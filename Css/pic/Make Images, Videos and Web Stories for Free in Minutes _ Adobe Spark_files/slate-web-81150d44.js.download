(window.webpackJsonp=window.webpackJsonp||[]).push([["slate-web","mui-cppublisher"],{101:function(e,t,i){var n,o;n=[i(0),i(2),i(3),i(1),i(6),i(4),i(8),i(35),i(62)],void 0===(o=function(e,t,i,n,o,r,a,s,l){"use strict";return n.View.extend({el:".language-and-region",cacheName:"LanguageSelectorView",initialize:function(e){this.location=e.location},render:function(){if(o.enableLocaleDetection){this.$el.closest(".spark-user-locale").removeClass("hide");var e={widthSetByStyle:!0,placeholderText:"Select your languageâ€¦",onchangeCallback:function(e){var t=e.getValue();r.trackEvent("languageSelected",{contextualData1:"switchedFromLanguage:"+a.getLocale(),contextualData2:"switchedToLanguage:"+t},this._analyticsPageName,function(){var e=s.parse(this.location||window.location.href,!0);e.pathname=a.getLocalizedSparkPath(e.pathname,t),a.setLocaleCookie(t),this._navigate(s.format(e))}.bind(this))}.bind(this),items:a.getSupportedLocales()};this.dropdownView=new l(this.$el,e,this),this.dropdownView.render(),this.dropdownView.setValue(a.getLocale())}else this.$el.closest(".spark-user-locale").addClass("hide");return this},remove:function(){this.dropdownView&&this.dropdownView.remove(),this.$el.empty()},_navigate:function(e){window.location=e}})}.apply(t,n))||(e.exports=o)},1025:function(e,t,i){var n=i(1319),o=i(17),r={assetsDict:{circle:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10"><circle cx="5" cy="5" r="5" fill="{{color}}"></circle></svg>',triangle:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="20" viewBox="0 0 12 20"><path style="fill:{{color}};" d="M 0 0 L 0 20 L 12 10 L 0 0 Z"/></svg>',"appreciate:filled":'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path style="fill:{{color}};" transform="translate(0 3)" d="M2.8,14.4C1.1,12.9,0,10.7,0,8.4c0-2.3,1-4.5,2.8-6C4.6,0.9,6.9,0,9.2,0c2.4,0,4.6,0.8,6.4,2.4c0.1,0.1,0.3,0.3,0.4,0.4c0.1-0.1,0.3-0.3,0.4-0.4C18.2,0.9,20.5,0,22.8,0c2.3,0,4.6,0.8,6.4,2.4C31,3.9,32,6.1,32,8.4c0,2.3-1,4.5-2.8,6L16,26"/></svg>',appreciate:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path style="fill:{{color}};" transform="translate(0 3)" d="M16,26L2.8,14.4C1.1,12.9,0,10.7,0,8.4c0-2.3,1-4.5,2.8-6C4.6,0.9,6.9,0,9.2,0c2.4,0,4.6,0.8,6.4,2.4c0.1,0.1,0.3,0.3,0.4,0.4c0.1-0.1,0.3-0.3,0.4-0.4C18.2,0.9,20.5,0,22.8,0c2.3,0,4.6,0.8,6.4,2.4C31,3.9,32,6.1,32,8.4c0,2.3-1,4.5-2.8,6L16,26z M9.2,4.7C8,4.7,6.9,5.2,6,5.9C5.3,6.5,4.8,7.4,4.8,8.4c0,1,0.5,1.9,1.2,2.5l10,8.8l10-8.8c0.7-0.6,1.2-1.5,1.2-2.5c0-1-0.5-1.9-1.2-2.5c-1.9-1.5-4.5-1.5-6.4,0c-0.7,0.6-1.2,1.5-1.2,2.5h-4.8c0-1-0.5-1.9-1.2-2.5C11.5,5.1,10.4,4.7,9.2,4.7z"/></svg>',"nightcap:linkbutton":'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="11.006" viewBox="0 0 6 11.006"><path style="fill:{{color}};" d="M6,5.503l-6,5.503V0L6,5.503z"/></svg>',"vintage:unorderedlist":'<svg xmlns="http://www.w3.org/2000/svg" width="181" height="181" viewBox="0 0 181 181"><path style="fill:{{color}};" d="M 172 90 C 112 109 27 126 2 181 C 1 180 1 178 1 159 C 4 137 9 104 39 91 C 39 91 39 90 38 89 C 17 86 1 38 1 22 C 1 22 1 1 1 1 C 38 62 127 73 172 90 Z"/></svg>',"luca:blockquote":'<svg xmlns="http://www.w3.org/2000/svg" width="150" height="125.2" viewBox="0 0 150 125.2"><path style="fill:{{color}};" d="M111.2,30.2c-7.738,7.6-11.6,16.2-11.6,25.8c0,4.269,0.662,7.737,2,10.4c1.331,2.669,2.662,4.669,4,6c2.4-1.6,5.062-2.663,8-3.2c2.931-0.531,5.863-0.8,8.8-0.8c2.931,0,6,0.537,9.2,1.6c3.2,1.069,6.131,2.737,8.8,5c2.663,2.269,4.931,5.2,6.8,8.8c1.862,3.6,2.8,7.938,2.8,13c0,5.069-0.938,9.4-2.8,13c-1.869,3.6-4.269,6.537-7.2,8.8c-2.938,2.269-6.2,3.938-9.8,5c-3.6,1.069-7.137,1.6-10.6,1.6c-10.138,0-18.8-4.131-26-12.4c-7.2-8.262-10.8-20-10.8-35.2c0-10.4,1.931-19.6,5.8-27.6c3.863-8,8.6-15.062,14.2-21.2c5.6-6.131,11.731-11.531,18.4-16.2C127.862,7.938,134,3.737,139.6,0l2.8,5.2C129.331,14.269,118.931,22.6,111.2,30.2z M28.4,30.2C20.663,37.8,16.8,46.4,16.8,56c0,4.269,0.662,7.737,2,10.4c1.331,2.669,2.663,4.669,4,6c2.4-1.6,5.063-2.663,8-3.2c2.931-0.531,5.862-0.8,8.8-0.8c2.931,0,6,0.537,9.2,1.6c3.2,1.069,6.131,2.737,8.8,5c2.662,2.269,4.931,5.2,6.8,8.8c1.863,3.6,2.8,7.938,2.8,13c0,5.069-0.937,9.4-2.8,13c-1.869,3.6-4.269,6.537-7.2,8.8c-2.938,2.269-6.2,3.938-9.8,5c-3.6,1.069-7.137,1.6-10.6,1.6c-10.138,0-18.8-4.131-26-12.4C3.6,104.537,0,92.8,0,77.6C0,67.2,1.931,58,5.8,50c3.862-8,8.6-15.062,14.2-21.2c5.6-6.131,11.731-11.531,18.4-16.2C45.063,7.938,51.2,3.737,56.8,0l2.8,5.2C46.531,14.269,36.131,22.6,28.4,30.2z"/></svg>',"whimsy:heading":'<svg xmlns="http://www.w3.org/2000/svg" width="539.347" height="22.027" viewBox="0 0 539.347 22.027"><path style="fill:{{color}};" d="M225.718,13.662L225.718,13.662c0.99,0,1.98,0,2.772,0c1.386,0,2.772,0,4.158-0.198c0.594-0.198,1.188-0.99,1.386-1.584c0.198-0.198-0.594-0.99-0.99-1.386c-0.792-0.198-1.584-0.198-2.376-0.396c-3.168,0-6.336,0.198-9.504,0c-1.98,0-4.158,0-6.138-0.198c-2.772-0.198-5.544-0.594-8.514-0.594c-4.95,0-9.9,0.198-14.85,0.198c-2.772,0.198-5.544,0.198-8.514,0.198c-4.554,0.198-9.306,0.792-14.058,0.594c-2.574-0.198-4.95,0-7.524,0.198c-3.168,0.198-6.534,0.198-9.702,0.396c-1.188,0-2.574,0.198-3.762,0.198c-4.554-0.396-9.306-0.792-13.86-0.792c-8.316-0.198-16.434-0.198-24.552-0.198c-3.564,0-6.93,0.396-10.296,0.396c-5.94,0.198-11.88-0.396-18.018,0.396c-0.198,0-0.594,0-0.792,0c-1.782-0.198-3.564-0.198-5.148-0.198c-2.574,0-4.95,0.198-7.524,0.198c-0.99,0-1.98-0.198-2.97-0.198c-3.762,0-7.524,0-11.484,0.198c-3.168,0.198-6.534,0.396-9.702,0.396c-2.178,0.198-4.158,0.198-6.138-0.99c-0.99-0.594-2.376-0.99-3.564-1.188c-2.772-0.99-5.346-0.594-7.92,0.99c-1.98,1.188-3.564,4.158-0.99,6.732c0.198,0.396,0.594,0.594,1.188,0.99c2.376,1.386,4.95,1.584,7.722,1.386c2.376-0.198,4.554-1.188,5.94-3.366c0.792-0.99,1.782-1.584,3.168-1.386c4.158,0,8.514,0,12.672,0.198c4.356,0,8.712,0.396,13.068,0.396c5.148-0.198,10.494-0.396,15.642-0.396c2.574-0.198,5.346-0.198,8.118-0.198c1.584,0,3.168,0.198,4.95,0.198c4.752,0,9.306,0.396,14.058,0c4.752-0.396,9.702-0.594,14.652,0c4.752,0.594,9.702,0.396,14.454,0.198c4.752-0.198,9.306-0.594,14.058-0.396c4.158,0,8.316-0.198,12.474-0.396c4.356,0,8.712,0,13.068,0c3.366,0,6.93-0.396,10.494-0.396c5.148,0,10.296,0.198,15.444,0.198c1.98,0.198,3.96-0.198,5.94-0.198C216.61,13.662,221.164,13.662,225.718,13.662z M268.683,0c-0.594,0.594-1.386,1.188-1.782,1.782c-0.99,1.188-1.782,2.178-2.574,3.366c-0.792,1.386-1.782,2.574-2.574,3.96c-0.99,1.584-0.792,2.376,0.198,3.762c0.396,0.396,0.792,0.792,0.99,1.188c0.792,1.188,1.584,2.178,2.376,3.366c0.99,1.188,2.178,2.376,3.168,3.564c0.99,1.386,1.584,1.386,2.574,0c1.98-2.574,3.96-5.148,5.94-7.722c1.584-1.782,1.584-1.584,0.396-3.564C275.217,5.94,272.049,3.168,268.683,0z M253.041,12.87c0.198-3.366-1.386-6.534-3.564-7.92c-1.98-1.188-2.97-1.188-4.752,0c-1.782,0.99-2.376,2.376-3.168,4.158c-0.99,2.772-0.594,5.346,0.792,7.722c1.386,2.97,5.148,4.752,8.316,1.386C252.249,16.632,253.041,14.652,253.041,12.87z M297.591,12.87c0-3.366-1.584-6.534-3.762-7.92c-1.782-1.188-2.97-1.188-4.752,0c-1.782,0.99-2.376,2.376-3.168,4.158c-0.792,2.772-0.594,5.346,0.792,7.722c1.386,2.97,5.148,4.752,8.316,1.386C296.601,16.632,297.393,14.652,297.591,12.87z M19.404,13.464c-1.98-1.188-3.762-2.178-5.346-3.366c-1.782-1.386-3.762-1.584-5.742-2.178C7.92,7.722,7.326,8.118,6.732,8.514c-1.584,0.99-3.168,1.98-4.752,2.97C1.386,11.88,0.792,12.276,0,12.672c0.198,0.594,0.396,0.99,0.594,1.188c1.782,1.584,3.564,3.366,5.544,4.554c1.386,0.792,3.168,1.386,4.95,0.396c1.584-0.99,3.366-1.782,4.95-2.376C17.424,15.84,18.612,15.048,19.404,13.464z M313.827,13.662c4.356,0,8.91,0,13.464,0c1.98,0,3.96,0.396,5.94,0.198c5.148,0,10.296-0.198,15.444-0.198c3.564,0,6.93,0.396,10.494,0.396c4.356,0,8.712,0,12.87,0c4.158,0.198,8.514,0.396,12.672,0.396c4.752-0.198,9.306,0.198,13.86,0.396c4.95,0.198,9.702,0.396,14.652-0.198c4.752-0.594,9.702-0.396,14.652,0c4.554,0.396,9.306,0,14.058,0c1.584,0,3.366-0.198,4.95-0.198c2.772,0,5.346,0,8.118,0.198c5.148,0,10.296,0.198,15.444,0.396c4.356,0,8.712-0.396,13.068-0.396c4.356-0.198,8.514-0.198,12.87-0.198c1.386-0.198,2.376,0.396,3.168,1.386c1.386,2.178,3.366,3.168,5.742,3.366c2.772,0.198,5.544,0,7.92-1.386c0.396-0.396,0.792-0.594,1.188-0.99c2.376-2.574,0.792-5.544-1.188-6.732c-2.376-1.584-4.95-1.98-7.92-0.99c-1.188,0.198-2.376,0.594-3.366,1.188c-1.98,1.188-4.158,1.188-6.138,0.99c-3.366,0-6.534-0.198-9.9-0.396c-3.762-0.198-7.524-0.198-11.286-0.198c-0.99,0-2.178,0.198-3.168,0.198c-2.376,0-4.95-0.198-7.326-0.198c-1.782,0-3.564,0-5.148,0.198c-0.396,0-0.594,0-0.99,0c-5.94-0.792-11.88-0.198-17.82-0.396c-3.564,0-6.93-0.396-10.296-0.396c-8.118,0-16.434,0-24.552,0.198c-4.752,0-9.306,0.396-13.86,0.792c-1.386,0-2.574-0.198-3.762-0.198c-3.366-0.198-6.534-0.198-9.9-0.396c-2.376-0.198-4.95-0.396-7.326-0.198c-4.752,0.198-9.504-0.396-14.256-0.594c-2.772,0-5.544,0-8.514-0.198c-4.95,0-9.9-0.198-14.85-0.198c-2.772,0-5.544,0.396-8.514,0.594c-1.98,0.198-3.96,0.198-6.138,0.198c-2.97,0.198-6.138,0-9.306,0c-0.792,0.198-1.584,0.198-2.376,0.396c-0.396,0.396-1.188,1.188-0.99,1.386c0,0.594,0.792,1.386,1.188,1.584c1.386,0.198,2.772,0.198,4.158,0.198C311.847,13.662,312.837,13.662,313.827,13.662L313.827,13.662z M519.943,13.464c0.99,1.584,2.178,2.376,3.366,2.97c1.782,0.594,3.366,1.386,4.95,2.376c1.782,0.99,3.564,0.396,4.95-0.396c2.178-1.188,3.762-2.97,5.742-4.554c0.198-0.198,0.198-0.594,0.396-1.188c-0.594-0.396-1.188-0.792-1.98-1.188c-1.584-0.99-3.168-1.98-4.752-2.97c-0.396-0.396-0.99-0.792-1.386-0.594c-1.98,0.594-3.96,0.792-5.742,2.178C523.903,11.286,521.923,12.276,519.943,13.464z"/></svg>',"whimsy:unorderedlist":'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="18" viewBox="0 0 15 18"><path fill="{{color}}" d="M 0 9 L 7 0 L 15 9 L 8 18 L 0 9 Z "/></svg>',"whimsy:blockquote":'<svg xmlns="http://www.w3.org/2000/svg" width="275" height="20.997" viewBox="0 0 275 20.997"><path fill="{{color}}" d="M273.108,11.152c-1,0.8-1.8,1.7-2.9,2.3c-0.7,0.4-1.6,0.7-2.5,0.2c-0.8-0.5-1.6-0.9-2.5-1.2 c-0.6-0.3-1.2-0.7-1.7-1.5c1-0.6,2-1.1,2.8-1.7c0.9-0.7,1.9-0.8,2.9-1.1c0.2-0.1,0.5,0.1,0.7,0.3c0.8,0.5,1.6,1,2.4,1.5 c0.4,0.2,0.7,0.4,1,0.6C273.208,10.852,273.208,11.052,273.108,11.152z M260.107,13.152c-1.2,0.7-2.6,0.8-4,0.7 c-1.2-0.1-2.2-0.6-2.9-1.7c-0.4-0.5-0.9-0.8-1.6-0.7c-2.2,0-4.3,0-6.5,0.1c-2.2,0-4.4,0.2-6.6,0.2c-2.6-0.1-5.2-0.2-7.801-0.2 c-1.4-0.1-2.7-0.1-4.1-0.1c-0.8,0-1.7,0.1-2.5,0.1c-2.4,0-4.8,0.2-7.1,0c-2.5-0.2-5-0.3-7.4,0c-2.5,0.3-4.9,0.2-7.4,0.1 c-2.3-0.1-4.6-0.3-7-0.2c-2.1,0-4.3-0.1-6.4-0.2c-2.1,0-4.3,0-6.5,0c-1.8,0-3.5-0.2-5.3-0.2c-2.6,0-5.2,0.1-7.801,0.1 c-1,0.1-2-0.1-3-0.1c-0.74,0-1.452,0-2.188,0V9.205c0.23-0.014,0.459-0.031,0.688-0.054c1.5-0.1,2.9-0.3,4.3-0.3 c2.5,0,5,0.1,7.5,0.1c1.5,0.1,2.9,0.1,4.3,0.1c2.4,0.1,4.8,0.4,7.2,0.3c1.2-0.1,2.5,0,3.7,0.1c1.7,0.1,3.3,0.1,5,0.2 c0.6,0,1.2,0.1,1.9,0.1c2.3-0.2,4.6-0.4,7-0.4c4.1-0.1,8.3-0.1,12.401-0.1c1.7,0,3.4,0.2,5.2,0.2c3,0.1,6-0.2,9.001,0.2 c0.2,0,0.3,0,0.5,0c0.8-0.1,1.7-0.1,2.6-0.1c1.2,0,2.5,0.1,3.7,0.1c0.5,0,1.1-0.1,1.6-0.1c1.9,0,3.8,0,5.7,0.1 c1.7,0.1,3.3,0.2,5,0.2c1,0.1,2.1,0.1,3.1-0.5c0.5-0.3,1.1-0.5,1.7-0.6c1.5-0.5,2.8-0.3,4,0.5c1,0.6,1.8,2.1,0.6,3.4 C260.508,12.852,260.307,12.952,260.107,13.152z"/><path fill="{{color}}" d="M0.199,11.141c0.998,0.83,1.795,1.764,2.893,2.387c0.698,0.415,1.596,0.727,2.494,0.208 c0.798-0.519,1.596-0.934,2.494-1.246c0.599-0.311,1.197-0.726,1.696-1.557C8.778,10.311,7.78,9.792,6.982,9.169 C6.085,8.443,5.087,8.339,4.09,8.028c-0.2-0.104-0.499,0.104-0.698,0.311C2.593,8.858,1.795,9.377,0.998,9.896 C0.599,10.103,0.299,10.311,0,10.518C0.1,10.83,0.1,11.037,0.199,11.141z M13.167,13.217c1.197,0.726,2.594,0.83,3.99,0.726 c1.197-0.104,2.194-0.623,2.893-1.764c0.399-0.519,0.898-0.83,1.596-0.727c2.194,0,4.289,0,6.484,0.104 c2.194,0,4.389,0.208,6.583,0.208c2.594-0.104,5.187-0.208,7.78-0.208c1.397-0.104,2.693-0.104,4.09-0.104 c0.798,0,1.696,0.104,2.494,0.104c2.394,0,4.788,0.208,7.082,0c2.494-0.208,4.987-0.311,7.381,0 c2.494,0.311,4.888,0.208,7.381,0.104c2.294-0.104,4.589-0.311,6.982-0.208c2.095,0,4.289-0.104,6.384-0.207 c2.095,0,4.289,0,6.484,0c1.795,0,3.491-0.208,5.287-0.208c2.593,0,5.187,0.104,7.78,0.104c0.997,0.104,1.995-0.104,2.992-0.104 c0.738,0,1.448,0,2.183,0V9.121c-0.23-0.014-0.458-0.032-0.686-0.056c-1.496-0.104-2.893-0.311-4.289-0.311 c-2.494,0-4.987,0.104-7.481,0.104c-1.496,0.104-2.893,0.104-4.289,0.104c-2.394,0.104-4.788,0.415-7.182,0.311 c-1.197-0.104-2.494,0-3.691,0.104c-1.696,0.104-3.292,0.104-4.987,0.208c-0.599,0-1.197,0.104-1.895,0.104 c-2.294-0.208-4.589-0.415-6.982-0.415c-4.09-0.104-8.279-0.104-12.369-0.104c-1.696,0-3.392,0.208-5.187,0.208 c-2.993,0.104-5.985-0.208-8.977,0.208c-0.2,0-0.299,0-0.499,0c-0.798-0.104-1.696-0.104-2.593-0.104 c-1.197,0-2.494,0.104-3.691,0.104c-0.499,0-1.097-0.104-1.596-0.104c-1.895,0-3.79,0-5.686,0.104 c-1.696,0.104-3.292,0.208-4.987,0.208c-0.998,0.104-2.095,0.104-3.092-0.519c-0.499-0.311-1.097-0.519-1.696-0.623 c-1.496-0.519-2.793-0.311-3.99,0.519c-0.997,0.623-1.795,2.18-0.599,3.529C12.768,12.906,12.967,13.009,13.167,13.217z"/><path fill="{{color}}" d="M124.026,12.755c0,1.867,0.622,3.54,1.867,5.019c1.244,1.48,2.84,2.22,4.788,2.22 c1.812,0,3.104-0.512,3.875-1.537c0.771-1.024,1.156-2.082,1.156-3.173c0-1.383-0.494-2.428-1.481-3.133 c-0.988-0.705-1.982-1.058-2.982-1.058c-0.136,0-1.082,0.094-2.84,0.279c-0.406,0-0.69-0.1-0.852-0.3 c-0.162-0.2-0.243-0.447-0.243-0.741c0-0.908,0.284-1.91,0.852-3.006c1.136-2.192,3.138-4.102,6.005-5.732l-0.771-1.597 c-2.327,1.04-4.47,2.713-6.431,5.019C125.006,7.323,124.026,9.903,124.026,12.755L124.026,12.755z"/><path fill="{{color}}" d="M138.337,12.755c0,1.867,0.622,3.54,1.867,5.019c1.244,1.48,2.84,2.22,4.788,2.22 c1.812,0,3.104-0.512,3.875-1.537c0.771-1.024,1.156-2.082,1.156-3.173c0-1.383-0.494-2.428-1.481-3.133 c-0.988-0.705-1.982-1.058-2.982-1.058c-0.136,0-1.082,0.094-2.84,0.279c-0.406,0-0.69-0.1-0.852-0.3 c-0.162-0.2-0.243-0.447-0.243-0.741c0-0.908,0.284-1.91,0.852-3.006c1.136-2.192,3.138-4.102,6.005-5.732l-0.771-1.597 c-2.327,1.04-4.47,2.713-6.431,5.019C139.317,7.323,138.337,9.903,138.337,12.755L138.337,12.755z"/></svg>',"whimsy:blockquote-end":'<svg xmlns="http://www.w3.org/2000/svg" width="275" height="19.997" viewBox="0 0 275 19.997"><path fill="{{color}}" d="M274.095,10.152c-1,0.8-1.8,1.7-2.9,2.3c-0.7,0.4-1.6,0.7-2.5,0.2c-0.8-0.5-1.6-0.9-2.5-1.2 c-0.6-0.3-1.2-0.7-1.7-1.5c1-0.6,2-1.1,2.8-1.7c0.9-0.7,1.9-0.8,2.9-1.1c0.2-0.1,0.5,0.1,0.7,0.3c0.8,0.5,1.6,1,2.4,1.5 c0.4,0.2,0.7,0.4,1,0.6C274.195,9.852,274.195,10.052,274.095,10.152z M261.094,12.152c-1.2,0.7-2.6,0.8-4,0.7 c-1.2-0.1-2.2-0.6-2.9-1.7c-0.4-0.5-0.9-0.8-1.6-0.7c-2.2,0-4.3,0-6.5,0.1c-2.2,0-4.4,0.2-6.6,0.2c-2.6-0.1-5.2-0.2-7.801-0.2 c-1.4-0.1-2.7-0.1-4.1-0.1c-0.8,0-1.7,0.1-2.5,0.1c-2.4,0-4.8,0.2-7.1,0c-2.5-0.2-5-0.3-7.4,0c-2.5,0.3-4.9,0.2-7.4,0.1 c-2.3-0.1-4.6-0.3-7-0.2c-2.1,0-4.3-0.1-6.4-0.2c-2.1,0-4.3,0-6.5,0c-1.8,0-3.5-0.2-5.3-0.2c-2.6,0-5.2,0.1-7.801,0.1 c-1,0.1-2-0.1-3-0.1c-0.74,0-1.452,0-2.188,0V8.205c0.23-0.014,0.459-0.031,0.688-0.054c1.5-0.1,2.9-0.3,4.3-0.3 c2.5,0,5,0.1,7.5,0.1c1.5,0.1,2.9,0.1,4.3,0.1c2.4,0.1,4.8,0.4,7.2,0.3c1.2-0.1,2.5,0,3.7,0.1c1.7,0.1,3.3,0.1,5,0.2 c0.6,0,1.2,0.1,1.9,0.1c2.3-0.2,4.6-0.4,7-0.4c4.1-0.1,8.3-0.1,12.401-0.1c1.7,0,3.4,0.2,5.2,0.2c3,0.1,6-0.2,9.001,0.2 c0.2,0,0.3,0,0.5,0c0.8-0.1,1.7-0.1,2.6-0.1c1.2,0,2.5,0.1,3.7,0.1c0.5,0,1.1-0.1,1.6-0.1c1.9,0,3.8,0,5.7,0.1 c1.7,0.1,3.3,0.2,5,0.2c1,0.1,2.1,0.1,3.1-0.5c0.5-0.3,1.1-0.5,1.7-0.6c1.5-0.5,2.8-0.3,4,0.5c1,0.6,1.8,2.1,0.6,3.4 C261.494,11.852,261.294,11.952,261.094,12.152z"/><path fill="{{color}}" d="M1.186,10.141c0.997,0.83,1.795,1.764,2.893,2.387c0.698,0.415,1.596,0.727,2.494,0.208 c0.798-0.519,1.596-0.934,2.494-1.246c0.599-0.311,1.197-0.726,1.696-1.557C9.764,9.311,8.767,8.792,7.969,8.169 c-0.898-0.727-1.895-0.83-2.893-1.142c-0.2-0.104-0.499,0.104-0.698,0.311C3.58,7.858,2.782,8.377,1.984,8.896 C1.585,9.103,1.286,9.311,0.986,9.518C1.086,9.83,1.086,10.037,1.186,10.141z M14.153,12.217c1.197,0.726,2.594,0.83,3.99,0.726 c1.197-0.104,2.194-0.623,2.893-1.764c0.399-0.519,0.898-0.83,1.596-0.727c2.194,0,4.289,0,6.484,0.104 c2.194,0,4.389,0.208,6.583,0.208c2.594-0.104,5.187-0.208,7.78-0.208c1.397-0.104,2.693-0.104,4.09-0.104 c0.798,0,1.696,0.104,2.494,0.104c2.394,0,4.788,0.208,7.082,0c2.494-0.208,4.987-0.311,7.381,0 c2.494,0.311,4.888,0.208,7.381,0.104c2.294-0.104,4.589-0.311,6.982-0.208c2.095,0,4.289-0.104,6.384-0.207 c2.095,0,4.289,0,6.484,0c1.795,0,3.491-0.208,5.287-0.208c2.593,0,5.187,0.104,7.78,0.104c0.997,0.104,1.995-0.104,2.992-0.104 c0.738,0,1.448,0,2.183,0V8.121c-0.23-0.014-0.458-0.032-0.686-0.056c-1.496-0.104-2.893-0.311-4.289-0.311 c-2.494,0-4.987,0.104-7.481,0.104c-1.496,0.104-2.893,0.104-4.289,0.104c-2.394,0.104-4.788,0.415-7.182,0.311 c-1.197-0.104-2.494,0-3.691,0.104c-1.696,0.104-3.292,0.104-4.987,0.208c-0.599,0-1.197,0.104-1.895,0.104 c-2.294-0.208-4.589-0.415-6.982-0.415c-4.09-0.104-8.279-0.104-12.369-0.104c-1.696,0-3.392,0.208-5.187,0.208 c-2.993,0.104-5.985-0.208-8.977,0.208c-0.2,0-0.299,0-0.499,0c-0.798-0.104-1.696-0.104-2.593-0.104 c-1.197,0-2.494,0.104-3.691,0.104c-0.499,0-1.097-0.104-1.596-0.104c-1.895,0-3.79,0-5.686,0.104 c-1.696,0.104-3.292,0.208-4.987,0.208c-0.997,0.104-2.095,0.104-3.092-0.519c-0.499-0.311-1.097-0.519-1.696-0.623 c-1.496-0.519-2.793-0.311-3.99,0.519c-0.998,0.623-1.795,2.18-0.599,3.529C13.754,11.906,13.954,12.009,14.153,12.217z"/><path fill="{{color}}" d="M151.009,7.239c0-1.867-0.622-3.54-1.867-5.019c-1.244-1.48-2.84-2.22-4.788-2.22 c-1.812,0-3.104,0.512-3.875,1.537c-0.771,1.024-1.156,2.082-1.156,3.173c0,1.383,0.494,2.428,1.481,3.133 c0.988,0.705,1.982,1.058,2.982,1.058c0.136,0,1.082-0.094,2.84-0.279c0.406,0,0.69,0.1,0.852,0.3 c0.162,0.199,0.243,0.446,0.243,0.741c0,0.908-0.284,1.91-0.852,3.006c-1.136,2.191-3.138,4.102-6.005,5.732l0.771,1.597 c2.327-1.04,4.47-2.713,6.431-5.019C150.028,12.672,151.009,10.091,151.009,7.239L151.009,7.239z"/><path fill="{{color}}" d="M136.698,7.239c0-1.867-0.622-3.54-1.867-5.019c-1.244-1.48-2.84-2.22-4.788-2.22 c-1.812,0-3.104,0.512-3.875,1.537c-0.771,1.024-1.156,2.082-1.156,3.173c0,1.383,0.494,2.428,1.481,3.133 c0.988,0.705,1.982,1.058,2.982,1.058c0.136,0,1.082-0.094,2.84-0.279c0.406,0,0.69,0.1,0.852,0.3 c0.162,0.199,0.243,0.446,0.243,0.741c0,0.908-0.284,1.91-0.852,3.006c-1.136,2.191-3.138,4.102-6.005,5.732l0.771,1.597 c2.327-1.04,4.47-2.713,6.431-5.019C135.718,12.672,136.698,10.091,136.698,7.239L136.698,7.239z"/></svg>',"whimsy:title":'<svg xmlns="http://www.w3.org/2000/svg" width="539.347" height="22.027" viewBox="0 0 539.347 22.027"><path style="fill:{{color}};" d="M225.718,13.662L225.718,13.662c0.99,0,1.98,0,2.772,0c1.386,0,2.772,0,4.158-0.198c0.594-0.198,1.188-0.99,1.386-1.584c0.198-0.198-0.594-0.99-0.99-1.386c-0.792-0.198-1.584-0.198-2.376-0.396c-3.168,0-6.336,0.198-9.504,0c-1.98,0-4.158,0-6.138-0.198c-2.772-0.198-5.544-0.594-8.514-0.594c-4.95,0-9.9,0.198-14.85,0.198c-2.772,0.198-5.544,0.198-8.514,0.198c-4.554,0.198-9.306,0.792-14.058,0.594c-2.574-0.198-4.95,0-7.524,0.198c-3.168,0.198-6.534,0.198-9.702,0.396c-1.188,0-2.574,0.198-3.762,0.198c-4.554-0.396-9.306-0.792-13.86-0.792c-8.316-0.198-16.434-0.198-24.552-0.198c-3.564,0-6.93,0.396-10.296,0.396c-5.94,0.198-11.88-0.396-18.018,0.396c-0.198,0-0.594,0-0.792,0c-1.782-0.198-3.564-0.198-5.148-0.198c-2.574,0-4.95,0.198-7.524,0.198c-0.99,0-1.98-0.198-2.97-0.198c-3.762,0-7.524,0-11.484,0.198c-3.168,0.198-6.534,0.396-9.702,0.396c-2.178,0.198-4.158,0.198-6.138-0.99c-0.99-0.594-2.376-0.99-3.564-1.188c-2.772-0.99-5.346-0.594-7.92,0.99c-1.98,1.188-3.564,4.158-0.99,6.732c0.198,0.396,0.594,0.594,1.188,0.99c2.376,1.386,4.95,1.584,7.722,1.386c2.376-0.198,4.554-1.188,5.94-3.366c0.792-0.99,1.782-1.584,3.168-1.386c4.158,0,8.514,0,12.672,0.198c4.356,0,8.712,0.396,13.068,0.396c5.148-0.198,10.494-0.396,15.642-0.396c2.574-0.198,5.346-0.198,8.118-0.198c1.584,0,3.168,0.198,4.95,0.198c4.752,0,9.306,0.396,14.058,0c4.752-0.396,9.702-0.594,14.652,0c4.752,0.594,9.702,0.396,14.454,0.198c4.752-0.198,9.306-0.594,14.058-0.396c4.158,0,8.316-0.198,12.474-0.396c4.356,0,8.712,0,13.068,0c3.366,0,6.93-0.396,10.494-0.396c5.148,0,10.296,0.198,15.444,0.198c1.98,0.198,3.96-0.198,5.94-0.198C216.61,13.662,221.164,13.662,225.718,13.662z M268.683,0c-0.594,0.594-1.386,1.188-1.782,1.782c-0.99,1.188-1.782,2.178-2.574,3.366c-0.792,1.386-1.782,2.574-2.574,3.96c-0.99,1.584-0.792,2.376,0.198,3.762c0.396,0.396,0.792,0.792,0.99,1.188c0.792,1.188,1.584,2.178,2.376,3.366c0.99,1.188,2.178,2.376,3.168,3.564c0.99,1.386,1.584,1.386,2.574,0c1.98-2.574,3.96-5.148,5.94-7.722c1.584-1.782,1.584-1.584,0.396-3.564C275.217,5.94,272.049,3.168,268.683,0z M253.041,12.87c0.198-3.366-1.386-6.534-3.564-7.92c-1.98-1.188-2.97-1.188-4.752,0c-1.782,0.99-2.376,2.376-3.168,4.158c-0.99,2.772-0.594,5.346,0.792,7.722c1.386,2.97,5.148,4.752,8.316,1.386C252.249,16.632,253.041,14.652,253.041,12.87z M297.591,12.87c0-3.366-1.584-6.534-3.762-7.92c-1.782-1.188-2.97-1.188-4.752,0c-1.782,0.99-2.376,2.376-3.168,4.158c-0.792,2.772-0.594,5.346,0.792,7.722c1.386,2.97,5.148,4.752,8.316,1.386C296.601,16.632,297.393,14.652,297.591,12.87z M19.404,13.464c-1.98-1.188-3.762-2.178-5.346-3.366c-1.782-1.386-3.762-1.584-5.742-2.178C7.92,7.722,7.326,8.118,6.732,8.514c-1.584,0.99-3.168,1.98-4.752,2.97C1.386,11.88,0.792,12.276,0,12.672c0.198,0.594,0.396,0.99,0.594,1.188c1.782,1.584,3.564,3.366,5.544,4.554c1.386,0.792,3.168,1.386,4.95,0.396c1.584-0.99,3.366-1.782,4.95-2.376C17.424,15.84,18.612,15.048,19.404,13.464z M313.827,13.662c4.356,0,8.91,0,13.464,0c1.98,0,3.96,0.396,5.94,0.198c5.148,0,10.296-0.198,15.444-0.198c3.564,0,6.93,0.396,10.494,0.396c4.356,0,8.712,0,12.87,0c4.158,0.198,8.514,0.396,12.672,0.396c4.752-0.198,9.306,0.198,13.86,0.396c4.95,0.198,9.702,0.396,14.652-0.198c4.752-0.594,9.702-0.396,14.652,0c4.554,0.396,9.306,0,14.058,0c1.584,0,3.366-0.198,4.95-0.198c2.772,0,5.346,0,8.118,0.198c5.148,0,10.296,0.198,15.444,0.396c4.356,0,8.712-0.396,13.068-0.396c4.356-0.198,8.514-0.198,12.87-0.198c1.386-0.198,2.376,0.396,3.168,1.386c1.386,2.178,3.366,3.168,5.742,3.366c2.772,0.198,5.544,0,7.92-1.386c0.396-0.396,0.792-0.594,1.188-0.99c2.376-2.574,0.792-5.544-1.188-6.732c-2.376-1.584-4.95-1.98-7.92-0.99c-1.188,0.198-2.376,0.594-3.366,1.188c-1.98,1.188-4.158,1.188-6.138,0.99c-3.366,0-6.534-0.198-9.9-0.396c-3.762-0.198-7.524-0.198-11.286-0.198c-0.99,0-2.178,0.198-3.168,0.198c-2.376,0-4.95-0.198-7.326-0.198c-1.782,0-3.564,0-5.148,0.198c-0.396,0-0.594,0-0.99,0c-5.94-0.792-11.88-0.198-17.82-0.396c-3.564,0-6.93-0.396-10.296-0.396c-8.118,0-16.434,0-24.552,0.198c-4.752,0-9.306,0.396-13.86,0.792c-1.386,0-2.574-0.198-3.762-0.198c-3.366-0.198-6.534-0.198-9.9-0.396c-2.376-0.198-4.95-0.396-7.326-0.198c-4.752,0.198-9.504-0.396-14.256-0.594c-2.772,0-5.544,0-8.514-0.198c-4.95,0-9.9-0.198-14.85-0.198c-2.772,0-5.544,0.396-8.514,0.594c-1.98,0.198-3.96,0.198-6.138,0.198c-2.97,0.198-6.138,0-9.306,0c-0.792,0.198-1.584,0.198-2.376,0.396c-0.396,0.396-1.188,1.188-0.99,1.386c0,0.594,0.792,1.386,1.188,1.584c1.386,0.198,2.772,0.198,4.158,0.198C311.847,13.662,312.837,13.662,313.827,13.662L313.827,13.662z M519.943,13.464c0.99,1.584,2.178,2.376,3.366,2.97c1.782,0.594,3.366,1.386,4.95,2.376c1.782,0.99,3.564,0.396,4.95-0.396c2.178-1.188,3.762-2.97,5.742-4.554c0.198-0.198,0.198-0.594,0.396-1.188c-0.594-0.396-1.188-0.792-1.98-1.188c-1.584-0.99-3.168-1.98-4.752-2.97c-0.396-0.396-0.99-0.792-1.386-0.594c-1.98,0.594-3.96,0.792-5.742,2.178C523.903,11.286,521.923,12.276,519.943,13.464z"/></svg>',"wiper:blockquote":'<svg xmlns="http://www.w3.org/2000/svg" width="82.099" height="72.456" viewBox="0 0 82.099 72.456"><path style="fill:{{color}};" d="M21.489,72.456c8.816,0,13.775-5.51,13.775-11.847c0-12.122-11.571-14.877-14.051-15.979c-1.928-0.826-4.132-4.132-4.132-7.714c0-13.5,11.571-25.621,17.356-31.131c2.204-1.653,2.204-2.204,2.204-3.581C36.641,0.826,35.815,0,33.886,0s-3.581,1.377-4.959,2.204C23.968,5.234,0,22.591,0,48.764C0,64.191,12.948,72.456,21.489,72.456z M66.671,72.456c8.816,0,14.05-5.51,14.05-11.847c0-12.122-11.846-14.877-14.326-15.979c-1.929-0.826-4.133-4.132-4.133-7.714c0-13.5,11.571-25.621,17.632-31.131c2.204-1.653,2.204-2.204,2.204-3.581C82.099,0.826,81.272,0,79.344,0c-2.204,0-3.857,1.377-5.234,2.204c-4.959,3.03-28.927,20.387-28.927,46.56C45.182,64.191,58.406,72.456,66.671,72.456z"/></svg>'},getAssetAsCSSUrl:function(e,t){var i='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10"><rect width="10" height="10" fill="{{color}}"></rect></svg>',r=this.assetsDict[e];return r?i=r:console.error('Error: Unknown SVG assetName "'+e+'"'),t&&(i=o.render(r,t)),"url('data:image/svg+xml;base64,"+n(i)+"')"}};e.exports=r},1049:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(17)],void 0===(o=function(e,t,i,n){"use strict";return i.View.extend({tagName:"ul",className:"panel-pane",collapsedClassName:"collapsed",collapseTime:250,events:{"click .pane-label":"_handleToggle"},initialize:function(e){e=e||{},this.name=e.name||"",this.$content=null},_handleToggle:function(e){this.$content.animate({height:"toggle"},this.collapseTime),this.$el.toggleClass(this.collapsedClassName)},isCollapsed:function(){return this.$el.hasClass(this.collapsedClassName)},add:function(){return this.$content.append.apply(this.$content,arguments),this},render:function(){return this.$el.html(n.render('<li><h3 class="pane-label">{{ name }}</h3><div class="pane-view"></div></li>',{name:this.name})),this.$content=this.$(".pane-view"),this}})}.apply(t,n))||(e.exports=o)},106:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(5),i(11),i(41)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s,l,d=new r({color:"rebeccapurple",name:"marketingController"}),h=["spark-newsletter","tips-and-tricks","spark-newsletter-holdout","book-report-2018"];return l=i.Model.extend({_emailListForReferCode:{segment_landing_page_book_ad_1:"book-report-2018"},emailListSettings:{},_getBrowserStorage:function(){return this.browserStorage||(this.browserStorage=new a(window.sessionStorage)),this.browserStorage},showedNewsletterPitch:function(){this._showedNewsletterPitch=!0},setNewsletterOptedIn:function(){try{window.sessionStorage.setItem("dismissed-spark-newsletter-pitch","true"),window.localStorage.setItem("spark-newsletter-pitches","4")}catch(e){}},getEmailListForReferCode:function(){var e=this._getBrowserStorage().get("referCode");return e&&this._emailListForReferCode.hasOwnProperty(e)?this._emailListForReferCode[e]:null},newsletterOptedOut:function(){try{window.sessionStorage.setItem("dismissed-spark-newsletter-pitch","true");var e=parseInt(window.localStorage.getItem("spark-newsletter-pitches")||"1");e++,window.localStorage.setItem("spark-newsletter-pitches",String(e))}catch(e){}},resetNewsletterOptOut:function(){try{window.localStorage.setItem("spark-newsletter-pitches","1"),window.sessionStorage.setItem("dismissed-spark-newsletter-pitch","true")}catch(e){}},_userQualifiesToReceiveEmail:function(){return"US"===o.getUserCountry()&&"type1"===o.getProfile().account_type&&!o.isAutomatedTestUser()},shouldSeeNewsletterPitch:function(){var e;if(!this._showedNewsletterPitch)try{if(!("true"===window.sessionStorage.getItem("dismissed-spark-newsletter-pitch"))){try{e=parseInt(window.localStorage.getItem("spark-newsletter-pitches")||"1",10)}catch(t){e=1}if(e<=3&&this._userQualifiesToReceiveEmail())return this.getEmailListOptInStatus("sparknewsletter").then(function(t){return t&&"subscribed"===t.status?n.reject():e}.bind(this))}}catch(e){}return n.reject()},getSettingIfEmailList:function(e){return this.emailListSettings.hasOwnProperty(e)?{value:this.emailListSettings[e]}:null},emailListSettingsLoaded:function(){return this.statusesDeferred||(this.statusesDeferred=n.defer(),this._userQualifiesToReceiveEmail()?this._getAllEmailListSubscriptionStatuses().then(this._initEmailListSubscriptionStatuses.bind(this)).done():this.statusesDeferred.resolve("unqualifiedToReceiveEmail")),this.statusesDeferred.promise},_initEmailListSubscriptionStatuses:function(e){var i=[];t.each(e,function(e){var n,o,r;"fulfilled"===e.state?(o="subscribed"===(n=e.value).status,r=t.find(h,function(e){return e.replace(/-/g,"")===n.listId}),this.emailListSettings[r]=o):"rejected"===e.state&&(d.error("email list subscription status failed to be initialized",e.reason),i.push(e.reason))}.bind(this)),t.isEmpty(i)?this.statusesDeferred.resolve("success"):this.statusesDeferred.resolve("unableToLoadEmailSettingsForQualifiedUser")},_getAllEmailListSubscriptionStatuses:function(){var e,i=[];return t.each(h,function(t){var o=t.replace(/-/g,"");e=s.getEmailListOptInStatus(o).then(function(e){return e.listId=o,e},function(e){return d.error("unable to get opt-in status for email list "+o,e),n.reject(e)}),i.push(e)}.bind(this)),n.allSettled(i)},getFilteredChanges:function(e){var i={},n={};return t.each(e,function(e,t){this.emailListSettings.hasOwnProperty(t)&&(i[t]={value:e,changed:this.emailListSettings[t]!==e},i[t].changed&&(n[t]=e,d.debug("MarketingController.getFilteredChanges differences has "+t+" with value "+e)))}.bind(this)),t.isEmpty(n)?{settings:i}:{settings:i,differences:n}},saveAndUpdateSettings:function(e){var i,o=[];return t.each(e,function(e,t){if(h.indexOf(t)>-1){var r=t.replace(/-/g,"");i=s.updateEmailListOptInForUser(e,r).then(function(i){var n=e?"subscribed":"unsubscribed";return d.info("Updated Status of Email List: "+r+" to: "+n),{settingId:t,status:e}},function(e){return d.error("unable to update opt-in status for email list "+r,e),n.reject(e)}),o.push(i)}}),n.allSettled(o).then(function(e){var i=[];if(t.each(e,function(e){"fulfilled"===e.state?this.emailListSettings[e.value.settingId]=e.value.status:"rejected"===e.state&&(d.error("failed to save updated opt-in status for email list",e.reason),i.push(e.reason))}.bind(this)),i.length>0)return n.reject(i)}.bind(this))},_fetchEmailListOptinStatus:function(e){var t=n.defer();return o.isValid().then(function(){o.ajax({type:"GET",url:"/list/subscription-status/"+e,success:function(e,i,n){t.resolve(e)},error:function(e,i,n){t.reject(n)}})}.bind(this),function(e){t.reject(e)}).done(),t.promise},getEmailListOptInStatus:function(e){return this._getBrowserStorage().get("spark-mrkt-subscription-"+e+"-status")?n.resolve({status:this._getBrowserStorage().get("spark-mrkt-subscription-"+e+"-status")}):this._fetchEmailListOptinStatus(e)},_saveOptInValue:function(e,t){var i="subscribe"===t?"subscribed":"unsubscribed";this._getBrowserStorage().set("spark-mrkt-subscription-"+e+"-status",i)},updateEmailListOptInForUser:function(e,t){var i=n.defer(),r=e?"subscribe":"unsubscribe";return o.isValid().then(function(){o.ajax({type:"GET",url:"/list/"+r+"/"+t,success:function(e,n,o){this._saveOptInValue(t,r),i.resolve(e)}.bind(this),error:function(e,t,n){i.reject(n)}.bind(this)})}.bind(this),function(e){i.reject(e)}.bind(this)),i.promise}}),s=new l}.apply(t,n))||(e.exports=o)},1180:function(e,t){function i(e){if(!e)return"";var t=e.id||e.name;return t=r(t),o(e)?t:"custom-"+t}function n(e){return Boolean(e&&e.components)}function o(e){return!!e&&(!n(e)||!e.id)}function r(e){return(e||"").toLowerCase().replace(/[\s_]+/g,"-").replace(/[^\w\-]/g,"")}e.exports={getUniqueName:i,getCssClassName:function(e){var t=i(e);return t&&t+"-theme"},isCustomThemeFormat:n,isBuiltInTheme:o,convertToKebabCase:r}},1198:function(e,t,i){var n,o;n=[i(0),i(344),i(519),i(523)],void 0===(o=function(e,t,i,n){function o(){n.call(this),this._initialize.apply(this,arguments)}return i.inherit(o,n),e.extend(o.prototype,{defaultOptions:{},_widgetName:"Widget",_initialize:function(){var t;this.plugins=[],this.trigger("before-setup").isDefaultPrevented()||(t=this._setUp.apply(this,arguments),this.trigger("setup")),this.trigger("before-init-plugins").isDefaultPrevented()||(this._initializePlugins(t),this.trigger("init-plugins")),this.options=e.extend({},this.defaultOptions,t),this.trigger("before-extract-data").isDefaultPrevented()||(this._extractData(),this.trigger("extract-data")),this.trigger("before-transform-markup").isDefaultPrevented()||(this._transformMarkup(),this.trigger("transform-markup")),this.trigger("before-attach-behavior").isDefaultPrevented()||(this._attachBehavior(),this.trigger("attach-behavior")),this.trigger("before-ready").isDefaultPrevented()||(this._ready(),this.trigger("ready"))},_setUp:function(t,i){return this.$element=e(t),i},_initializePlugins:function(e){var t=((void 0===(e=e||{}).useDefaultPlugins||e.useDefaultPlugins)&&this.defaultPlugins?this.defaultPlugins:[]).concat(e.plugins||[]);t=t.sort(function(e,t){return(e="number"==typeof e.priority?e.priority:50)-(t="number"==typeof t.priority?t.priority:50)});for(var i=0;i<t.length;i++){var n=t[i];n&&n.initialize&&n.initialize(this,e)}this.plugins=t},_extractData:function(){},_transformMarkup:function(){},_attachBehavior:function(){},_ready:function(){}}),o.registry={},o.build=function(t,n,r){var a=r&&n||o,s=r||n||{},l=function(){a.apply(this,arguments),this._widgetName=t};i.inherit(l,a),e.extend(l.prototype,s),l.prototype.defaultOptions=e.extend({},a.prototype.defaultOptions,s.defaultOptions);var d=t.split("."),h=d.length;h>1&&d[0];return o[t=d[h-1]]=l,l},o.addWidgetConstructorAsjQueryPlugin=function(t,i){e.fn[t]=function(n){var o="string"==typeof arguments[0],r=o?arguments[0]:"",a=o?Array.prototype.slice.call(arguments,1):null;return this.each(function(){if(o){var s=e(this).data(t);s&&s[r]&&s[r].apply(s,a)}else e(this).data(t,new i(this,n))}),this}},o.addMultiElementWidgetConstructorAsjQueryPlugin=function(t,i){e.fn[t]=function(n){var o="string"==typeof arguments[0],r=o?arguments[0]:"",a=o?Array.prototype.slice.call(arguments,1):null;if(this.length)if(o){(s=this.eq(0).data(t))&&s[r]&&s[r].apply(s,a)}else{var s=new i(this,n);this.each(function(){e(this).data(t,s)})}return this}},t.Widget=o,t.widget=o.build,t.addWidgetConstructorAsjQueryPlugin=o.addWidgetConstructorAsjQueryPlugin,t.addMultiElementWidgetConstructorAsjQueryPlugin=o.addMultiElementWidgetConstructorAsjQueryPlugin,o}.apply(t,n))||(e.exports=o)},1283:function(e,t,i){var n={"./af":1056,"./af.js":1056,"./ar":1057,"./ar-dz":1058,"./ar-dz.js":1058,"./ar-kw":1059,"./ar-kw.js":1059,"./ar-ly":1060,"./ar-ly.js":1060,"./ar-ma":1061,"./ar-ma.js":1061,"./ar-sa":1062,"./ar-sa.js":1062,"./ar-tn":1063,"./ar-tn.js":1063,"./ar.js":1057,"./az":1064,"./az.js":1064,"./be":1065,"./be.js":1065,"./bg":1066,"./bg.js":1066,"./bm":1067,"./bm.js":1067,"./bn":1068,"./bn.js":1068,"./bo":1069,"./bo.js":1069,"./br":1070,"./br.js":1070,"./bs":1071,"./bs.js":1071,"./ca":1072,"./ca.js":1072,"./cs":1073,"./cs.js":1073,"./cv":1074,"./cv.js":1074,"./cy":1075,"./cy.js":1075,"./da":1076,"./da.js":1076,"./de":1077,"./de-at":1078,"./de-at.js":1078,"./de-ch":1079,"./de-ch.js":1079,"./de.js":1077,"./dv":1080,"./dv.js":1080,"./el":1081,"./el.js":1081,"./en-au":1082,"./en-au.js":1082,"./en-ca":1083,"./en-ca.js":1083,"./en-gb":1084,"./en-gb.js":1084,"./en-ie":1085,"./en-ie.js":1085,"./en-il":1086,"./en-il.js":1086,"./en-nz":1087,"./en-nz.js":1087,"./eo":1088,"./eo.js":1088,"./es":1089,"./es-do":1090,"./es-do.js":1090,"./es-us":1091,"./es-us.js":1091,"./es.js":1089,"./et":1092,"./et.js":1092,"./eu":1093,"./eu.js":1093,"./fa":1094,"./fa.js":1094,"./fi":1095,"./fi.js":1095,"./fo":1096,"./fo.js":1096,"./fr":1097,"./fr-ca":1098,"./fr-ca.js":1098,"./fr-ch":1099,"./fr-ch.js":1099,"./fr.js":1097,"./fy":1100,"./fy.js":1100,"./gd":1101,"./gd.js":1101,"./gl":1102,"./gl.js":1102,"./gom-latn":1103,"./gom-latn.js":1103,"./gu":1104,"./gu.js":1104,"./he":1105,"./he.js":1105,"./hi":1106,"./hi.js":1106,"./hr":1107,"./hr.js":1107,"./hu":1108,"./hu.js":1108,"./hy-am":1109,"./hy-am.js":1109,"./id":1110,"./id.js":1110,"./is":1111,"./is.js":1111,"./it":1112,"./it.js":1112,"./ja":1113,"./ja.js":1113,"./jv":1114,"./jv.js":1114,"./ka":1115,"./ka.js":1115,"./kk":1116,"./kk.js":1116,"./km":1117,"./km.js":1117,"./kn":1118,"./kn.js":1118,"./ko":1119,"./ko.js":1119,"./ky":1120,"./ky.js":1120,"./lb":1121,"./lb.js":1121,"./lo":1122,"./lo.js":1122,"./lt":1123,"./lt.js":1123,"./lv":1124,"./lv.js":1124,"./me":1125,"./me.js":1125,"./mi":1126,"./mi.js":1126,"./mk":1127,"./mk.js":1127,"./ml":1128,"./ml.js":1128,"./mr":1129,"./mr.js":1129,"./ms":1130,"./ms-my":1131,"./ms-my.js":1131,"./ms.js":1130,"./mt":1132,"./mt.js":1132,"./my":1133,"./my.js":1133,"./nb":1134,"./nb.js":1134,"./ne":1135,"./ne.js":1135,"./nl":1136,"./nl-be":1137,"./nl-be.js":1137,"./nl.js":1136,"./nn":1138,"./nn.js":1138,"./pa-in":1139,"./pa-in.js":1139,"./pl":1140,"./pl.js":1140,"./pt":1141,"./pt-br":1142,"./pt-br.js":1142,"./pt.js":1141,"./ro":1143,"./ro.js":1143,"./ru":1144,"./ru.js":1144,"./sd":1145,"./sd.js":1145,"./se":1146,"./se.js":1146,"./si":1147,"./si.js":1147,"./sk":1148,"./sk.js":1148,"./sl":1149,"./sl.js":1149,"./sq":1150,"./sq.js":1150,"./sr":1151,"./sr-cyrl":1152,"./sr-cyrl.js":1152,"./sr.js":1151,"./ss":1153,"./ss.js":1153,"./sv":1154,"./sv.js":1154,"./sw":1155,"./sw.js":1155,"./ta":1156,"./ta.js":1156,"./te":1157,"./te.js":1157,"./tet":1158,"./tet.js":1158,"./tg":1159,"./tg.js":1159,"./th":1160,"./th.js":1160,"./tl-ph":1161,"./tl-ph.js":1161,"./tlh":1162,"./tlh.js":1162,"./tr":1163,"./tr.js":1163,"./tzl":1164,"./tzl.js":1164,"./tzm":1165,"./tzm-latn":1166,"./tzm-latn.js":1166,"./tzm.js":1165,"./ug-cn":1167,"./ug-cn.js":1167,"./uk":1168,"./uk.js":1168,"./ur":1169,"./ur.js":1169,"./uz":1170,"./uz-latn":1171,"./uz-latn.js":1171,"./uz.js":1170,"./vi":1172,"./vi.js":1172,"./x-pseudo":1173,"./x-pseudo.js":1173,"./yo":1174,"./yo.js":1174,"./zh-cn":1175,"./zh-cn.js":1175,"./zh-hk":1176,"./zh-hk.js":1176,"./zh-tw":1177,"./zh-tw.js":1177};function o(e){var t=r(e);return i(t)}function r(e){var t=n[e];if(!(t+1)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=1283},1319:function(e,t,i){(function(t){!function(){"use strict";e.exports=function(e){return(e instanceof t?e:new t(e.toString(),"binary")).toString("base64")}}()}).call(this,i(20).Buffer)},1369:function(e,t){e.exports={"acumin-pro-semi-condensed":{data:{title:{fontSize:"86px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.32"},subtitle:{fontSize:"24px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},heading:{fontSize:"58px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal"},subheading:{fontSize:"33px",fontWeight:"normal",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},paragraph:{fontSize:"20px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"18px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal",paddingShiftRatio:"0.43"},"unordered-list":{fontSize:"20px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"20px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"17px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"17px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"17px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"adobe-caslon-pro":{data:{title:{fontSize:"92px",fontWeight:"100",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal",paddingShiftRatio:"1"},subtitle:{fontSize:"25px",fontWeight:"600",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},heading:{fontSize:"55px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"34px",fontWeight:"600",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"21px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"29px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},button:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal",paddingShiftRatio:"0.71"},"unordered-list":{fontSize:"21px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"21px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"17px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"full-width-caption":{fontSize:"17px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"17px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"29px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"window-caption":{fontSize:"29px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"}}},"azo-sans-web":{data:{title:{fontSize:"84px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.5"},subtitle:{fontSize:"24px",fontWeight:"300",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},heading:{fontSize:"53px",fontWeight:"100",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},subheading:{fontSize:"32px",fontWeight:"bold",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},paragraph:{fontSize:"19px",fontWeight:"300",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},blockquote:{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.55",letterSpacing:"normal"},button:{fontSize:"17px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"19px",fontWeight:"300",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"ordered-list":{fontSize:"19px",fontWeight:"300",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.55",letterSpacing:"normal"},"window-caption":{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.55",letterSpacing:"normal"}}},calluna:{data:{title:{fontSize:"86px",fontWeight:"100",textTransform:"none",lineHeight:"1.15",letterSpacing:"normal",paddingShiftRatio:"0.46"},subtitle:{fontSize:"24px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"56px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"30px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"19px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},blockquote:{fontSize:"26px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"17px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"19px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"ordered-list":{fontSize:"19px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"inline-image-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"26px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"26px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"clarendon-text-pro":{data:{title:{fontSize:"76px",fontWeight:"100",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal",paddingShiftRatio:"0.68"},subtitle:{fontSize:"22px",fontWeight:"300",textTransform:"none",lineHeight:"1.85",letterSpacing:"normal"},heading:{fontSize:"44px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},subheading:{fontSize:"28px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},paragraph:{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},blockquote:{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},button:{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal",paddingShiftRatio:"0.57"},"unordered-list":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"ordered-list":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"inline-image-caption":{fontSize:"14px",fontWeight:"100",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"full-width-caption":{fontSize:"14px",fontWeight:"100",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"14px",fontWeight:"100",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"window-caption":{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"}}},"courier-std":{data:{title:{fontSize:"75px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.5"},subtitle:{fontSize:"22px",fontWeight:"300",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"},heading:{fontSize:"50px",fontWeight:"normal",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal"},subheading:{fontSize:"30px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"futura-pt":{data:{title:{fontSize:"90px",fontWeight:"bold",textTransform:"none",lineHeight:"1.1",letterSpacing:"normal",paddingShiftRatio:"0.5"},subtitle:{fontSize:"28px",fontWeight:"bold",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"51px",fontWeight:"bold",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"32px",fontWeight:"bold",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"28px",fontWeight:"normal",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},button:{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"full-width-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"28px",fontWeight:"bold",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},"window-caption":{fontSize:"28px",fontWeight:"bold",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"}}},lato:{data:{title:{fontSize:"80px",fontWeight:"800",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.39"},subtitle:{fontSize:"22px",fontWeight:"normal",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},heading:{fontSize:"48px",fontWeight:"bold",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},subheading:{fontSize:"29px",fontWeight:"bold",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},blockquote:{fontSize:"25px",fontWeight:"300",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"},button:{fontSize:"16px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal",paddingShiftRatio:"0.43"},"unordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"25px",fontWeight:"bold",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"},"window-caption":{fontSize:"25px",fontWeight:"bold",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"}}},"ltc-bodoni-175":{data:{title:{fontSize:"84px",fontWeight:"normal",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal",paddingShiftRatio:"0.61"},subtitle:{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},heading:{fontSize:"52px",fontWeight:"normal",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},subheading:{fontSize:"32px",fontWeight:"normal",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal"},paragraph:{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"26px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.57"},"unordered-list":{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"full-width-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"26px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"26px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"museo-sans-rounded":{data:{title:{fontSize:"80px",fontWeight:"bold",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.57"},subtitle:{fontSize:"24px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},heading:{fontSize:"50px",fontWeight:"bold",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},subheading:{fontSize:"28px",fontWeight:"bold",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},blockquote:{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"16px",fontWeight:"normal",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"inline-image-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"full-width-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"museo-slab":{data:{title:{fontSize:"84px",fontWeight:"bold",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.57"},subtitle:{fontSize:"22px",fontWeight:"300",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"},heading:{fontSize:"46px",fontWeight:"bold",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},subheading:{fontSize:"30px",fontWeight:"bold",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},blockquote:{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"16px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"inline-image-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"full-width-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"proxima-nova":{data:{title:{fontSize:"78px",fontWeight:"100",textTransform:"none",lineHeight:"1.15",letterSpacing:"normal",paddingShiftRatio:"0.57"},subtitle:{fontSize:"22px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"50px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"29px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"pt-sans":{data:{title:{fontSize:"84px",fontWeight:"normal",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.46"},subtitle:{fontSize:"23px",fontWeight:"300",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},heading:{fontSize:"48px",fontWeight:"normal",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},subheading:{fontSize:"30px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"24px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.43"},"unordered-list":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"pt-sans-narrow":{data:{title:{fontSize:"90px",fontWeight:"normal",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.46"},subtitle:{fontSize:"28px",fontWeight:"300",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal"},heading:{fontSize:"58px",fontWeight:"normal",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"34px",fontWeight:"normal",textTransform:"none",lineHeight:"1.34",letterSpacing:"normal"},paragraph:{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"28px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.43"},"unordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"pt-serif":{data:{title:{fontSize:"80px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.46"},subtitle:{fontSize:"23px",fontWeight:"300",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"},heading:{fontSize:"52px",fontWeight:"100",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},subheading:{fontSize:"29px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},blockquote:{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},button:{fontSize:"17px",fontWeight:"normal",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"window-caption":{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"}}},raleway:{data:{title:{fontSize:"76px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.57"},subtitle:{fontSize:"21px",fontWeight:"300",textTransform:"none",lineHeight:"1.55",letterSpacing:"normal"},heading:{fontSize:"48px",fontWeight:"100",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},subheading:{fontSize:"30px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},blockquote:{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},button:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"window-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"}}},"spark-bellfort-script":{data:{title:{fontSize:"98px",fontWeight:"100",textTransform:"none",lineHeight:"1.15",letterSpacing:"normal",paddingShiftRatio:"0.54"},subtitle:{fontSize:"32px",fontWeight:"300",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},heading:{fontSize:"60px",fontWeight:"100",textTransform:"none",lineHeight:"1.15",letterSpacing:"normal"},subheading:{fontSize:"38px",fontWeight:"normal",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},paragraph:{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},blockquote:{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},button:{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"ordered-list":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"inline-image-caption":{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"full-width-caption":{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"window-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"}}},"spark-didot-headline":{data:{title:{fontSize:"96px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.71"},subtitle:{fontSize:"29px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"56px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"35px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},blockquote:{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.57"},"unordered-list":{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"ordered-list":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"inline-image-caption":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"full-width-caption":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"spark-local-brewery":{data:{title:{fontSize:"88px",fontWeight:"100",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal",paddingShiftRatio:"0.64"},subtitle:{fontSize:"26px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},heading:{fontSize:"50px",fontWeight:"100",textTransform:"none",lineHeight:"1.24",letterSpacing:"normal"},subheading:{fontSize:"34px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.70",letterSpacing:"normal"},blockquote:{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.57"},"unordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.70",letterSpacing:"normal"},"ordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.70",letterSpacing:"normal"},"inline-image-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"spark-local-brewery-four":{data:{title:{fontSize:"80px",fontWeight:"100",textTransform:"none",lineHeight:"1.1",letterSpacing:"normal",paddingShiftRatio:"0.75"},subtitle:{fontSize:"26px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"54px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal"},subheading:{fontSize:"34px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},blockquote:{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.64"},"unordered-list":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"ordered-list":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"inline-image-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"full-width-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"spark-voltage":{data:{title:{fontSize:"86px",fontWeight:"normal",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.54"},subtitle:{fontSize:"28px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"52px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal"},subheading:{fontSize:"36px",fontWeight:"normal",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},paragraph:{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},button:{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"full-width-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"window-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"}}},"spark-wanderlust-shine":{data:{title:{fontSize:"90px",fontWeight:"100",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal",paddingShiftRatio:"0.86"},subtitle:{fontSize:"30px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},heading:{fontSize:"52px",fontWeight:"100",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},subheading:{fontSize:"36px",fontWeight:"normal",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal"},paragraph:{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},button:{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.71"},"unordered-list":{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"window-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"}}}}},1370:function(e,t,i){var n=i(996);i(1469),i(1470),i(1471),i(1472),i(1473),i(1474),i(1475),i(1476),i(1477),i(1478),i(1479),i(1480),i(1481),i(1482),i(1483),i(1484),i(1485),i(1486),i(1487),i(1488),e.exports=n},1371:function(e,t,i){var n,o;n=[i(0),i(344),i(519),i(419)],void 0===(o=function(e,t,i,n){function o(e,t){t=t||{},this._id=o.nextId++,this._enabled=!0;var i=this;this.mdFunc=function(e,t){return i._startDrag(e,t)},this.mmFunc=function(e,t){return i._handleDrag(e,t)},this.muFunc=function(e,t){return i._stopDrag(e,t)},this._delegateDragTracker=null,this.startEvent=t.startEvent||this.startEvent,this.updateEvent=t.updateEvent||this.updateEvent,this.stopEvent=t.stopEvent||this.stopEvent,this._dragHandlersInstalled=!1,this.attach(e)}function r(e,i){o.call(this,e,i),this._touchId=-1,this._eventTarget=null,this._tsFunc=null,this._tmFunc=null,this._teFunc=null,this._listenerOpts=!1,t.supportsPassiveEventListeners&&(this._listenerOpts={passive:!1})}function a(e,t){o.call(this,e,t),t=t||{},this._pointerId=-1,this._lastPosition=null,this._lastTime=0;var i=t.trackEvents||this.trackEvents;this._allowed={};for(var n=0;n<i.length;n++)this._allowed[i[n]||""]=!0}function s(e,t){o.call(this,e,t);var i=(t=t||{}).trackEvents||this.trackEvents;this._allowed={};for(var n=0;n<i.length;n++)this._allowed[i[n]||""]=!0;this._map={"":"mouse"},MouseEvent&&MouseEvent.MOZ_SOURCE_MOUSE&&(this._map[MouseEvent.MOZ_SOURCE_MOUSE]="mouse",this._map[MouseEvent.MOZ_SOURCE_TOUCH]="touch",this._map[MouseEvent.MOZ_SOURCE_PEN]="pen")}e.extend(o.prototype,{startEvent:"mousedown",updateEvent:"mousemove",stopEvent:"mouseup",attach:function(t){this._dragTracker=t,t&&(this._element=t.element,e(this._element).on(this.startEvent,this.mdFunc))},detach:function(){this._dragTracker&&(this._removeDragHandlers(),e(this._element).off(this.startEvent,this.mdFunc),this._element=null,this._dragTracker=null)},enable:function(){this._enabled=!0},disable:function(){this._enabled=!1,this._removeDragHandlers()},destroy:function(){this.detach()},_getCurrentTracker:function(){return this._delegateDragTracker||this._dragTracker},setDelegateTracker:function(e){this._delegateDragTracker=e},_clearDelegateTracker:function(){this._delegateDragTracker=null},_getNativeEvent:function(e){for(;e&&e.originalEvent;)e=e.originalEvent;return e},_startDrag:function(e){var t=this._getCurrentTracker(),i=!1;return this._enabled&&t&&(this._clearDelegateTracker(),i=t._startDrag(e,this.getPosition(e)),this._installDragHandlers()),i},_handleDrag:function(e){var t=!1;if(this._dragHandlersInstalled){var i=this._getCurrentTracker();this._enabled&&i&&(t=i._handleDrag(e,this.getPosition(e)))}return t},_stopDrag:function(e){var t=!1;if(this._dragHandlersInstalled){var i=this._getCurrentTracker();this._enabled&&i&&(t=i._stopDrag(e,this.getPosition(e)),this._removeDragHandlers())}return t},_installDragHandlers:function(){e(document).on(this.updateEvent,this.mmFunc).on(this.stopEvent,this.muFunc),this._dragHandlersInstalled=!0},_removeDragHandlers:function(){this._dragHandlersInstalled&&(e(document).off(this.updateEvent,this.mmFunc).off(this.stopEvent,this.muFunc),this._dragHandlersInstalled=!1),this._clearDelegateTracker()},getPosition:function(e){return{x:e.pageX,y:e.pageY}}}),o.nextId=1,i.inherit(r,o,{startEvent:"touchstart",updateEvent:"touchmove",stopEvent:"touchend",_wrapEventCallback:function(e){return function(t){var i=e.apply(this,arguments);return!1===i&&(t.preventDefault(),t.stopPropagation()),i}},_ensureCallbacksSetUp:function(){this._tsFunc||(this._tsFunc=this._wrapEventCallback(this.mdFunc),this._tmFunc=this._wrapEventCallback(this.mmFunc),this._teFunc=this._wrapEventCallback(this.muFunc))},attach:function(e){this._dragTracker=e,e&&(this._ensureCallbacksSetUp(),this._element=e.element,this._element&&(this._element.addEventListener(this.startEvent,this._tsFunc,this._listenerOpts),1==++r.dummyHandlerLock&&(document.addEventListener(this.updateEvent,r.dummyHandler,this._listenerOpts),document.addEventListener(this.stopEvent,r.dummyHandler,this._listenerOpts))))},detach:function(){this._dragTracker&&(this._removeDragHandlers(),this._element&&(this._element.removeEventListener(this.startEvent,this._tsFunc,this._listenerOpts),--r.dummyHandlerLock<1&&(document.removeEventListener(this.updateEvent,r.dummyHandler,this._listenerOpts),document.removeEventListener(this.stopEvent,r.dummyHandler,this._listenerOpts),r.dummyHandlerLock=0)),this._element=null,this._dragTracker=null)},_getTouchById:function(e,t,i){var n=this._getNativeEvent(e)[i||"changedTouches"];if(n)for(var o=0;o<n.length;o++)if(n[o].identifier===t)return n[o];return null},_ensureTouchIdValueIsValid:function(e){-1==this._touchId||this._getTouchById(e,this._touchId,"touches")||this._removeDragHandlers()},_startDrag:function(e){var t=void 0;if(this._ensureTouchIdValueIsValid(e),-1===this._touchId){var i=this._getNativeEvent(e),n=i&&i.changedTouches&&i.changedTouches[0];n&&(this._touchId=n.identifier,this._eventTarget=e.target,t=o.prototype._startDrag.call(this,e))}return t},_handleDrag:function(e){var t=void 0;return this._getTouchById(e,this._touchId)&&this._eventTarget===e.target&&(t=o.prototype._handleDrag.call(this,e)),t},_stopDrag:function(e){var t=void 0;return this._getTouchById(e,this._touchId)&&(t=o.prototype._stopDrag.call(this,e),this._touchId=-1),t},_installDragHandlers:function(){this._dragHandlersInstalled||(this._ensureCallbacksSetUp(),document.addEventListener(this.updateEvent,this._tmFunc,this._listenerOpts),document.addEventListener(this.stopEvent,this._teFunc,this._listenerOpts),document.addEventListener("touchcancel",this._teFunc,this._listenerOpts),this._dragHandlersInstalled=!0)},_removeDragHandlers:function(){this._touchId=-1,this._dragHandlersInstalled&&(document.removeEventListener(this.updateEvent,this._tmFunc,this._listenerOpts),document.removeEventListener(this.stopEvent,this._teFunc,this._listenerOpts),document.removeEventListener("touchcancel",this._teFunc,this._listenerOpts),this._dragHandlersInstalled=!1)},getPosition:function(e){var t=this._getTouchById(e,this._touchId);return{x:t&&t.pageX||0,y:t&&t.pageY||0}}}),r.dummyHandlerLock=0,r.dummyHandler=function(){},i.inherit(a,o,{startEvent:"pointerdown",updateEvent:"pointermove",stopEvent:"pointerup",trackEvents:["mouse","touch","pen"],_getPointerId:function(e){return this._getNativeEvent(e).pointerId},_canStartDrag:function(e){return-1===this._pointerId&&this._allowed[this._getNativeEvent(e).pointerType]},_startDrag:function(e){var t=void 0;return this._canStartDrag(e)&&(this._pointerId=this._getPointerId(e),this._lastPosition=this.getPosition(e),this._lastTime=Date.now(),t=o.prototype._startDrag.call(this,e)),t},_handleDrag:function(e){var t=void 0;if(this._dragHandlersInstalled&&this._pointerId===this._getPointerId(e)){var i=this._lastPosition,n=this._lastTime,r=this.getPosition(e),a=Date.now();this._lastTime=a,(i.x!=r.x||i.y!=r.y&&a-n>=16)&&(this._lastPosition=r,t=o.prototype._handleDrag.call(this,e))}return t},_stopDrag:function(e){var t=void 0;return this._dragHandlersInstalled&&this._pointerId===this._getPointerId(e)&&(this._pointerId=-1,t=o.prototype._stopDrag.call(this,e)),t},_installDragHandlers:function(){o.prototype._installDragHandlers.call(this),e(document).on("pointercancel",this.muFunc)},_removeDragHandlers:function(){this._pointerId=-1,e(document).off("pointercancel",this.muFunc),o.prototype._removeDragHandlers.call(this)},getPosition:function(e){return{x:(e=this._getNativeEvent(e)).pageX,y:e.pageY}}}),i.inherit(s,o,{trackEvents:["mouse","touch","pen"],_canStartDrag:function(e){return e=this._getNativeEvent(e),this._allowed[this._map[this._getNativeEvent(e).mozInputSource]||""]},_startDrag:function(e){var t=void 0;return this._canStartDrag(e)&&(t=o.prototype._startDrag.call(this,e)),t}});var l=function(t,i){var n=this;this.id=l.nextId++,this.element=t,this.options=e.extend({},l.prototype.defaultOptions,i),this.dragStarted=!1,this.enabled=!0,this.mdFunc=function(e,t){return n._startDrag(e,t)},this.mmFunc=function(e,t){return n._handleDrag(e,t)},this.muFunc=function(e,t){return n._stopDrag(e,t)},this.startX=0,this.startY=0,this.options.dragEventHandler?(this.dragEventHandler=this.options.dragEventHandler,this.dragEventHandler.attach(this)):this.dragEventHandler=this.createEventHandler()};return l.nextId=1,e.extend(l.prototype,{defaultOptions:{dragThreshold:5,ignoreX:!1,ignoreY:!1,dragStart:null,dragUpdate:null,dragStop:null,trackEvents:["mouse","touch","pen"]},createEventHandler:function(){var e=this.options.trackEvents;if(t.pointerEventsEnabled)return new a(this,{trackEvents:e});if(t.supportsMozInputSource)return new s(this,{trackEvents:e});for(var i={},n=0;n<e.length;n++)i[e[n]||""]=!0;return i.mouse||i.touch?i.mouse?i.touch?new o(this,{startEvent:"vmousedown",updateEvent:"vmousemove",stopEvent:"vmouseup"}):new o(this):new r(this):null},enable:function(){this.dragEventHandler&&this.dragEventHandler.enable()},disable:function(){this.dragEventHandler&&this.dragEventHandler.disable()},destroy:function(){this.dragEventHandler&&(this.dragEventHandler.destroy(),this.dragEventHandler=null),this.element=null},dragStart:function(e,t){var i=this.options;i.dragStart&&i.dragStart(this,e,t)},dragUpdate:function(e,t){var i=this.options;i.dragUpdate&&i.dragUpdate(this,e,t)},dragStop:function(e,t){var i=this.options;i.dragStop&&i.dragStop(this,e,t)},_startDrag:function(e,t){return this.dragStarted=!1,this.startX=t.x,this.startY=t.y,!1},_handleDrag:function(e,t){var i=t.x-this.startX,n=t.y-this.startY,o=this.options;if(!this.dragStarted){if(!o.ignoreX&&Math.abs(i)<o.dragThreshold&&!o.ignoreY&&Math.abs(n)<o.dragThreshold)return!1;this.dragStarted=!0,this.dragStart(0,0)}return this.dragUpdate(o.ignoreX?0:i,o.ignoreY?0:n),!1},_stopDrag:function(e,t){if(this.dragStarted){var i=t.x-this.startX,n=t.y-this.startY,o=this.options;this.dragStop(o.ignoreX?0:i,o.ignoreY?0:n)}return this.dragStarted=!1,!1}}),t.DragTrackerEventHandler=o,t.DragTrackerTouchHandler=r,t.DragTrackerPointerHandler=a,t.DragTracker=l,l}.apply(t,n))||(e.exports=o)},1464:function(e,t,i){var n,o;n=[i(2600),i(2601)],void 0===(o=function(e,t){"use strict";function i(e,t){if(!e)return e;var i="string"==typeof e?e:e.name;return t&&i&&(i=String(i).toLowerCase()),i}function n(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}return{DEFAULT_THEME_NAME:"Crisp",has:function(t){return!!t&&n(i(t))in e},get:function(t){return e[n(i(t))]},getTypekitPreviewFonts:function(e){var n=i(e,!0);return t.previewSets[n]||null},getTypekitId:function(e){var n=i(e,!0);return t.kitIds[n]||null},usesOwnFonts:function(e){var t=this.get(i(e));return Boolean(t&&t.font_includes)}}}.apply(t,n))||(e.exports=o)},1465:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(3),i(978),i(115),i(418),i(1466)],void 0===(o=function(e,t,i,n,o,r,a,s){"use strict";return a.extend({el:".conflict-dialog-overlay",events:{"click .pushButton":"_handlePushBtn","click .pullButton":"_handlePullBtn"},initialize:function(){t.bindAll(this,t.functionsIn(this)),t.extend(this,i.Events)},setDatetime:function(e){this.datetime=o(e)},_handlePushBtn:function(){marvel.logger.info("slate conflict resolve by push"),this.trigger("conflict-dialog-push")},_handlePullBtn:function(){marvel.logger.info("slate conflict resolve by pull"),this.trigger("conflict-dialog-pull")},showOverlay:function(){this.trigger("conflict-dialog-show"),a.prototype.showOverlay.apply(this,arguments),marvel.logger.info("slate conflict dialog shown")},hideOverlay:function(){a.prototype.hideOverlay.apply(this,arguments),this.trigger("conflict-dialog-hide")},render:function(){this.$el.html()||this.$el.html(r.renderMustache(s.toString())),this.datetime$=this.datetime$||this.$el.find(".conflict-dialog-datetime");var e=this.datetime;return this.datetime$.text(r.format("conflict_dialog.date_time",{datetime:e})),this}})}.apply(t,n))||(e.exports=o)},1466:function(e,t){e.exports='<div class="conflict-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="conflict-dialog-shell mrvl-overlay-shell">\n    <h2 class="conflict-dialog-overlay-title dialog-title">{{locString.conflict_dialog.title}}</h2>\n\n    <div class="mrvl-overlay-content-shell">\n        <div class="mrvl-overlay-content">\n            <p>{{locString.conflict_dialog.message}}<span class="conflict-dialog-datetime"></span>.</p>\n            <br/>\n            <p>{{locString.conflict_dialog.message_advice}}</p>\n        </div>\n        <div class="mrvl-dlg-btn-acts buttons">\n            <button class="pullButton button confirm-btn mrvl-btn">{{locString.conflict_dialog.button.update}}</button>\n            <button class="pushButton button confirm-btn mrvl-btn">{{locString.conflict_dialog.button.keep}}</button>\n        </div>\n    </div>\n</div>\n'},1467:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(3),i(418),i(1718),i(15)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s=i.Model.extend({defaults:{}});return o.extend({events:{"click .x-close-btn":"_handleCancel","click .mrvl-overlay-bg":"_handleCancel"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.model=new s,t.extend(this,i.Events),this.update(e),this.model.on("change:location",this.positionDialog())},onHide:function(){this.$el.find(".x-close-btn").removeClass("hide"),this.$el.find(".buttons").removeClass("hide"),this._ignoreCloseActions=!1},unclosable:function(){this.$el.find(".x-close-btn").addClass("hide"),this.$el.find(".buttons").addClass("hide"),this._ignoreCloseActions=!0},update:function(e){e&&t.extend(this,e),this.location&&this.model.set({location:this.location},{silent:!0})},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===a.DOM_VK_ESCAPE&&this._handleCancel()},positionDialog:function(){var e,t,i,n,o,r,a,s,l,d=this.$el.find(".mrvl-overlay-shell"),h=d.width(),c=d.height(),u=0;if(d.length>0&&this.location){for(n=d.parent();!u&&n.length;)"absolute"===(r=n.css("position"))||"relative"===r||"fixed"===r?(u=n.width(),o=n.height()):n=n.parent();i=(e=this.model.get("location")).x>=u/2?e.left-h/2-7:e.left+e.width+h/2+7,t=e.y-.75*c,t=Math.max(5,Math.min(t,o-c-5)),(a=d.find(".pointer"))&&(l=e.y-t-6,l=Math.max(4,Math.min(c-12,l)),a.css("top",l+"px"),s="auto"===a.css("left")||""===a.css("left")?a.css("right"):a.css("left"),e.x>=u/2?a.css({right:s,left:"auto"}).addClass("on-right"):a.css({left:s,right:"auto"}).removeClass("on-right")),d.css({top:t+"px",left:i+"px",position:"absolute"})}},render:function(){if(this.$el&&this.$el.length)if(this.template){if(this.$el.html(this.template.toString()),this.fields)for(var e in this.fields)this.fields.hasOwnProperty(e)&&this.$el.find("."+e).text(this.fields[e]);this.location&&this.positionDialog()}else this.$el.html("<p>This class needs to be extended or have an el and template defined to be useful</p>");return this}})}.apply(t,n))||(e.exports=o)},1468:function(e,t,i){var n,o;n=[i(28),i(1)],void 0===(o=function(e,t){"use strict";return{getValueFor:function(e){var i=String(t.history.fragment).split("/"),n=i.indexOf(e);if(-1!==n)return i[n+1]}}}.apply(t,n))||(e.exports=o)},1469:function(e,t,i){var n=i(996),o={templates:["ct_page_css","ct_text_props_css","ct_behaviors_css"],process:function(e,t,i){i.components.page={backgroundColor:n.convertColorToRGBA(t.backgroundColor)}}};n.registerCustomThemeComponent("page",o),e.exports=o},1470:function(e,t,i){var n=i(28),o=i(996),r=i(1025),a={templates:["ct_title_section_css","ct_title_section_gradient_overlay_treatment_css","ct_title_section_border_box_treatment_css","ct_title_section_solid_box_treatment_css","ct_title_section_top_bottom_rule_treatment_css","ct_title_section_middle_rule_treatment_css","ct_title_section_vintage_treatment_css","ct_title_section_whimsy_treatment_css","ct_title_section_color_band_treatment_css","ct_title_section_header_padding_css","ct_title_section_header_view_padding_css"],process:function(e,t,i){var a=t.title,s=t.subtitle,l=o.getTextSettingsForComponent("title",a.text,e),d=o.getTextSettingsForComponent("subtitle",s.text,e);l.color=o.convertColorToRGBA(a.color),d.color=o.convertColorToRGBA(s.color),l.maxHeight=this._getAutoHeightTrigger(l),d.maxHeight=this._getAutoHeightTrigger(d);var h=t.treatment.type,c={},u={title:l,subtitle:d,treatment:c,useGradientOverlayTreatment:"gradient-overlay"===h,useBorderBoxTreatment:"border-box"===h,useSolidBoxTreatment:"solid-box"===h,useTopBottomRuleTreatment:"top-bottom-rule"===h,useMiddleRuleTreatment:"middle-rule"===h,useVintageTreatment:"vintage"===h,useWhimsyTreatment:"whimsy"===h,useColorBandTreatment:"color-band"===h},p=t.treatment;switch(h){case"top-bottom-rule":c.color=o.convertColorToRGBA(p.color);break;case"middle-rule":c.color=o.convertColorToRGBA(o.cloneColorWithAlpha(p.color,.75));break;case"whimsy":c.color=o.convertColorToRGBA(p.color),c.backgroundImage=r.getAssetAsCSSUrl("whimsy:title",c);break;case"border-box":c.borderColor=o.convertColorToRGBA(o.cloneColorWithAlpha(p.borderColor,.5)),c.backgroundColor=o.convertColorToRGBA(o.cloneColorWithAlpha(p.backgroundColor,.5));break;case"solid-box":c.backgroundColor=o.convertColorToRGBA(o.cloneColorWithAlpha(p.backgroundColor,.8));break;case"color-band":c.backgroundColor=o.convertColorToRGBA(o.cloneColorWithAlpha(p.backgroundColor,.3))}n.merge(u,o.getPaddingsForFont(l.fontFamily,"title",28,l.paddingShiftRatio)),i.components.titleSection=u},_getAutoHeightTrigger:function(e){var t=(e=e||{}).lineHeight||"1";return 3*parseFloat(t)+"em"}};o.registerCustomThemeComponent("titleSection",a),e.exports=a},1471:function(e,t,i){var n=i(28),o=i(996),r=i(1025),a={templates:["ct_heading_css","ct_heading_single_rule_treatment_css","ct_heading_double_rule_treatment_css","ct_heading_image_rule_treatment_css"],process:function(e,t,i){var a=o.convertColorToRGBA(t.color),s=o.getTextSettingsForComponent("heading",t.text,e),l=t.treatment.type,d={},h={color:a,treatment:d,useNoTreatment:"none"===l,useSingleRuleTreatment:"single-rule"===l,useDoubleRuleTreatment:"double-rule"===l,useImageRuleTreatment:"whimsy"===l,textAlign:"left"};n.extend(h,s);var c=t.treatment;switch(l){case"single-rule":case"double-rule":d.color=o.convertColorToRGBA(o.cloneColorWithAlpha(c.color,.9));break;case"whimsy":d.color=o.convertColorToRGBA(o.cloneColorWithAlpha(c.color,.9)),d.backgroundImage=r.getAssetAsCSSUrl("whimsy:heading",d)}i.components.heading=h}};o.registerCustomThemeComponent("heading",a),e.exports=a},1472:function(e,t,i){var n=i(996);SubheadingCTC={templates:["ct_subheading_css"],process:function(e,t,i){var o=n.getTextSettingsForComponent("subheading",t.text,e);o.color=n.convertColorToRGBA(t.color),o.textAlign="left",i.components.subheading=o}},n.registerCustomThemeComponent("subheading",SubheadingCTC),e.exports=SubheadingCTC},1473:function(e,t,i){var n=i(996),o={templates:["ct_paragraph_css"],process:function(e,t,i){var o=n.getTextSettingsForComponent("paragraph",t.text,e);o.color=n.convertColorToRGBA(t.color),i.components.paragraph=o}};n.registerCustomThemeComponent("paragraph",o),e.exports=o},1474:function(e,t,i){var n=i(28),o=i(996),r=i(1025),a={templates:["ct_unordered_list_css","ct_unordered_list_image_treatment_css"],process:function(e,t,i){var a=o.convertColorToRGBA(t.color),s=o.getTextSettingsForComponent("unordered-list",t.text,e),l=t.treatment.type,d={},h={color:a,treatment:d};n.extend(h,s);var c=t.treatment;switch(d.color=o.convertColorToRGBA(c.color||t.color),l){case"triangle":d.backgroundImage=r.getAssetAsCSSUrl("triangle",d);break;case"vbullet":d.backgroundImage=r.getAssetAsCSSUrl("vintage:unorderedlist",d);break;case"diamond":d.backgroundImage=r.getAssetAsCSSUrl("whimsy:unorderedlist",d);break;case"circle":default:d.color!=a&&(d.backgroundImage=r.getAssetAsCSSUrl("circle",d))}h.useImageTreatment=!!d.backgroundImage,i.components.unorderedList=h}};o.registerCustomThemeComponent("unorderedList",a),e.exports=a},1475:function(e,t,i){var n=i(28),o=i(996),r={templates:["ct_ordered_list_css","ct_ordered_list_colored_counter_treatment_css"],process:function(e,t,i){var r=o.convertColorToRGBA(t.color),a=o.getTextSettingsForComponent("ordered-list",t.text,e),s={},l={color:r,treatment:s};n.extend(l,a);var d=t.treatment||{};s.color=o.convertColorToRGBA(d.color||t.color),l.useColoredCounterTreatment=s.color!=r,i.components.orderedList=l}};o.registerCustomThemeComponent("orderedList",r),e.exports=r},1476:function(e,t,i){var n=i(28),o=i(996),r=i(1025),a={templates:["ct_blockquote_css","ct_blockquote_quote_treatment_css","ct_blockquote_bottom_rule_treatment_css","ct_blockquote_top_bottom_rule_treatment_css","ct_blockquote_left_rule_treatment_css","ct_blockquote_color_band_treatment_css"],process:function(e,t,i){var a=o.convertColorToRGBA(t.color),s=o.getTextSettingsForComponent("blockquote",t.text,e),l=t.treatment.type,d={},h={color:a,treatment:d,useNoTreatment:"none"===l,useQuoteTreatment:"quote"===l,useBottomRuleTreatment:"bottom-rule"===l,useTopBottomRuleTreatment:"top-bottom-rule"===l,useLeftRuleTreatment:"left-rule"===l,useColorBandTreatment:"color-band"===l};n.extend(h,s);var c=t.treatment;switch(l){case"quote":d.color=o.convertColorToRGBA(o.cloneColorWithAlpha(c.color,.9)),d.backgroundImage=r.getAssetAsCSSUrl("luca:blockquote",d);break;case"bottom-rule":case"top-bottom-rule":case"left-rule":d.color=o.convertColorToRGBA(o.cloneColorWithAlpha(c.color,.9));break;case"color-band":d.backgroundColor=o.convertColorToRGBA(o.cloneColorWithAlpha(c.backgroundColor,.9))}i.components.blockquote=h}};o.registerCustomThemeComponent("blockquote",a),e.exports=a},1477:function(e,t,i){var n=i(28),o=i(996),r={templates:["ct_inline_image_css","ct_inline_image_caption_background_treatment_css","ct_inline_image_border_treatment_css"],process:function(e,t,i){var r=o.convertColorToRGBA(t.color),a=o.getTextSettingsForComponent("inline-image-caption",t.text,e),s=t.treatment.type,l={},d={color:r,treatment:l,useNoTreatment:"none"===s,useCaptionBackgroundTreatment:"caption-background"===s,useBorderTreatment:"image-border"===s};n.extend(d,a);var h=t.treatment;switch(s){case"caption-background":l.backgroundColor=o.convertColorToRGBA(h.backgroundColor);break;case"image-border":h.borderColor&&(l.borderColor=o.convertColorToRGBA(h.borderColor))}i.components.inlineImage=d}};o.registerCustomThemeComponent("inlineImage",r),e.exports=r},1478:function(e,t,i){var n=i(28),o=i(996),r=i(1025),a={templates:["ct_button_css","ct_button_square_treatment_css","ct_button_rounded_treatment_css","ct_button_double_rounded_treatment_css","ct_button_pill_treatment_css","ct_button_triangle_treatment_css"],process:function(e,t,i){var a=o.convertColorToRGBA(t.color),s=o.convertColorToRGBA(t.hoverColor),l=o.getTextSettingsForComponent("button",t.text,e),d=t.treatment.type,h={},c={color:a,hoverColor:s,treatment:h,useSquareTreatment:"square-border"===d||"square-background"===d,useRoundedTreatment:"rounded-border"===d||"rounded-background"===d,useDoubleRoundedTreatment:"double-border"===d,usePillTreatment:"pill-border"===d||"pill-background"===d,useTriangleTreatment:"triangle"===d};n.extend(c,l);var u=t.treatment,p=14;switch(d){case"square-border":case"square-background":case"rounded-border":case"rounded-background":case"double-border":case"pill-border":case"pill-background":u.borderColor&&(h.borderColor=o.convertColorToRGBA(u.borderColor),h.hoverBorderColor=o.convertColorToRGBA(u.hoverBorderColor)),u.backgroundColor&&(h.backgroundColor=o.convertColorToRGBA(u.backgroundColor),h.hoverBackgroundColor=o.convertColorToRGBA(u.hoverBackgroundColor));break;case"triangle":h.color=o.convertColorToRGBA(u.color),h.hoverColor=o.convertColorToRGBA(u.hoverColor),h.backgroundImage=r.getAssetAsCSSUrl("triangle",{color:h.color}),h.hoverBackgroundImage=r.getAssetAsCSSUrl("triangle",{color:h.hoverColor}),p=4}n.merge(c,o.getPaddingsForFont(c.fontFamily,"button",p,c.paddingShiftRatio)),i.components.button=c}};o.registerCustomThemeComponent("button",a),e.exports=a},1479:function(e,t,i){var n=i(996),o={templates:["ct_inline_link_css"],process:function(e,t,i){var o=t.treatment.type;i.components.inlineLink={color:n.convertColorToRGBA(t.color),hoverColor:n.convertColorToRGBA(t.hoverColor),useNoTreatment:"none"===o,useUnderlineTreatment:"underline"===o,underlineOnHover:"none"===o&&t.treatment.underlineOnHover}}};n.registerCustomThemeComponent("inlineLink",o),e.exports=o},1480:function(e,t,i){var n=i(28),o=i(996),r={templates:["ct_full_width_image_css","ct_full_width_image_caption_background_treatment_css","ct_full_width_image_border_treatment_css"],process:function(e,t,i){var r=o.convertColorToRGBA(t.color),a=o.getTextSettingsForComponent("full-width-caption",t.text,e),s=t.treatment.type,l={},d={color:r,treatment:l,useNoTreatment:"none"===s,useCaptionBackgroundTreatment:"caption-background"===s,useBorderTreatment:"image-border"===s};n.extend(d,a);var h=t.treatment;switch(s){case"caption-background":l.backgroundColor=o.convertColorToRGBA(h.backgroundColor);break;case"image-border":h.borderColor&&(l.borderColor=o.convertColorToRGBA(h.borderColor))}i.components.fullWidthImage=d}};o.registerCustomThemeComponent("fullWidthImage",r),e.exports=r},1481:function(e,t,i){var n=i(28),o=i(996),r={templates:["ct_fill_screen_image_css"],process:function(e,t,i){var r=o.getTextSettingsForComponent("fill-screen-caption",t.text,e),a={color:o.convertColorToRGBA(t.color),backgroundColor:o.convertColorToRGBA(t.backgroundColor)};n.extend(a,r),i.components.fillScreenImage=a}};o.registerCustomThemeComponent("fillScreenImage",r),e.exports=r},1482:function(e,t,i){var n=i(28),o=i(996),r={templates:["ct_window_image_css"],process:function(e,t,i){var r=o.getTextSettingsForComponent("window-caption",t.text,e),a={color:o.convertColorToRGBA(t.color),backgroundColor:o.convertColorToRGBA(t.backgroundColor)};n.extend(a,r),i.components.windowImage=a}};o.registerCustomThemeComponent("windowImage",r),e.exports=r},1483:function(e,t,i){var n=i(28),o=i(996),r={templates:["ct_photo_grid_css","ct_photo_grid_caption_background_treatment_css","ct_photo_grid_border_treatment_css"],process:function(e,t,i){var r=o.convertColorToRGBA(t.color),a=o.getTextSettingsForComponent("inline-image-caption",t.text,e),s=t.treatment.type,l={},d={color:r,treatment:l,useNoTreatment:"none"===s,useCaptionBackgroundTreatment:"caption-background"===s,useBorderTreatment:"image-border"===s};n.extend(d,a);var h=t.treatment;switch(s){case"caption-background":l.backgroundColor=o.convertColorToRGBA(h.backgroundColor);break;case"image-border":h.borderColor&&(l.borderColor=o.convertColorToRGBA(h.borderColor))}i.components.photoGrid=d}};o.registerCustomThemeComponent("photoGrid",r),e.exports=r},1484:function(e,t,i){i(28);var n=i(996),o={templates:["ct_glideshow_css"],process:function(e,t,i){i.components.glideshow={backgroundColor:n.convertColorToRGBA(t.backgroundColor)}}};n.registerCustomThemeComponent("glideshow",o),e.exports=o},1485:function(e,t,i){var n=i(1180),o=40,r=2,a=2,s={p:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},ol:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},ul:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},h3:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},h4:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},blockquote:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},".link-button-wrapper":{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},"div.image":{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1}},l={templates:["ct_spacing_css"],process:function(e,t,i){i.components.spacing={spacingRules:this._getItemSpacingRules(e,t,i)}},_getItemSpacingRules:function(e,t,i){var o="."+(n.getUniqueName(e)||"custom")+"-theme",r="";return r+=this._getItemSpacingRulesScaledForMediaQuery(o),r+=this._getItemSpacingRulesScaledForMediaQuery(o,.5,"max-width: 767px")},_getItemSpacingRulesScaledForMediaQuery:function(e,t,i){var n="";t=t||1;var l=i?"  ":"",d=o,h=a,c=function(e,i){var n=Math.round(e*d*t);switch(i){case"rem":return u(n).toFixed(3)+"rem";case"px":default:return n+"px"}},u=function(e){return e/16};i&&(n+="@media ("+i+") {\n"),n+=l+e+" .content-spacer {\n",n+=l+"  height: "+u(r)+"rem;\n",n+=l+"}\n",n+=l+e+" .content-item-spacer {\n",n+=l+"  height: "+c(h,"rem")+";\n",n+=l+"}\n",n+=l+e+" .section .section-content .content-container {\n",n+=l+"  padding-top: "+c(.5*h,"rem")+";\n",n+=l+"  padding-bottom: "+c(.5*h,"rem")+";\n",n+=l+"}\n",n+=l+e+" .full-width-section .section-content .content-container {\n",n+=l+"  padding-top: 0;\n",n+=l+"  padding-bottom: 0;\n",n+=l+"}\n",n+=l+e+" .section.large-content-spacing-top .section-content .content-container {\n",n+=l+"  padding-top: "+c(h,"rem")+";\n",n+=l+"}\n",n+=l+e+" .section.large-content-spacing-bottom .section-content .content-container {\n",n+=l+"  padding-bottom: "+c(h,"rem")+";\n",n+=l+"}\n",n+=l+e+" .content-container > :first-child {\n",n+=l+"  margin-top: 0;\n",n+=l+"}\n",n+=l+e+" .content-container > :last-child {\n",n+=l+"  margin-bottom: 0;\n",n+=l+"}\n",n+=l+e+" ul,\n",n+=l+e+" ol {\n",n+=l+"  padding: 0\n",n+=l+"}\n",n+=l+e+" li {\n",n+=l+"  margin-bottom: "+c(.2,"rem")+";\n",n+=l+"}\n",n+=l+e+" li:last-child {\n",n+=l+"  margin-bottom: 0;\n",n+=l+"}\n";for(var p=s,g=Object.keys(p),f=0;f<g.length;f++){var m=g[f];n+=l+e+" .content-container "+m+" {\n",n+=l+"  margin-top: 0;\n",n+=l+"  margin-bottom: 0;\n",n+=l+"}\n";for(var v=p[m],b=Object.keys(v),w=0;w<b.length;w++){var k=b[w];n+=l+e+" .content-container "+k+" + "+m+"{\n",n+=l+"  margin-top: "+c(p[m][k],"rem")+";\n",n+=l+"}\n"}}return n+=l+e+" .photo-grid-section + .single-column-section h3:first-child,\n",n+=l+e+" .photo-grid-section + .single-column-section h4:first-child,\n",n+=l+e+" .photo-grid-section + .single-column-section blockquote:first-child {\n",n+=l+"  margin-top: "+c(1,"rem")+";\n",n+=l+"}\n",n+=l+e+" .photo-grid-section + .single-column-section blockquote:last-child {\n",n+=l+"  margin-top: "+c(1,"rem")+";\n",n+=l+"}\n",i&&(n+="}\n"),n}};i(996).registerCustomThemeComponent("spacing",l),e.exports=l},1486:function(e,t,i){i(1180);var n={templates:["ct_column_css"],process:function(e,t,i){i.components.column={pageMargin:{superNarrow:Math.min(7,45),extraNarrow:Math.min(7,45),narrow:Math.min(12.5,45),default:20,wide:Math.min(25,45),extraWide:Math.min(30,45),superWide:Math.min(33,45)},glideshowColumn:{superNarrow:{width:Math.max(70,10),maxWidth:"none",margin:"18px 14px",padding:"31px 12px",centerAlignedWidth:75,centerAlignedMaxWidth:"900px"},extraNarrow:{width:Math.max(70,10),maxWidth:"none",margin:"18px 14px",padding:"31px 13px",centerAlignedWidth:75,centerAlignedMaxWidth:"900px"},narrow:{width:Math.max(60,10),maxWidth:"none",margin:"32px 32px",padding:"56px 32px",centerAlignedWidth:75,centerAlignedMaxWidth:"900px"},default:{width:50,maxWidth:"none",margin:"32px 32px",padding:"56px 32px",centerAlignedWidth:65,centerAlignedMaxWidth:"900px"},wide:{width:Math.max(40,10),maxWidth:"580px",margin:"32px 32px",padding:"56px 32px",centerAlignedWidth:65,centerAlignedMaxWidth:"900px"},extraWide:{width:Math.max(30,10),maxWidth:"580px",margin:"32px 80px",padding:"56px 32px",centerAlignedWidth:65,centerAlignedMaxWidth:"900px"},superWide:{width:Math.max(25,10),maxWidth:"580px",margin:"32px 80px",padding:"56px 32px",centerAlignedWidth:65,centerAlignedMaxWidth:"900px"}}}}};i(996).registerCustomThemeComponent("column",n),e.exports=n},1487:function(e,t,i){var n=i(996),o=i(1025),r={templates:["ct_author_section_css"],process:function(e,t,i){var r=e.components.paragraph;if(r){var a=n.getTextSettingsForComponent("paragraph",r.text,e),s=r.color,l=n.cloneColorWithAlpha(s,.5),d=n.convertColorToRGBA(s),h=n.convertColorToRGBA(l);a.color=d,a.colorAlpha=h,a.appreciateIconUnfilled=o.getAssetAsCSSUrl("appreciate",{color:d}),a.appreciateIconUnfilledAlpha=o.getAssetAsCSSUrl("appreciate",{color:h}),a.appreciateIconFilled=o.getAssetAsCSSUrl("appreciate:filled",{color:d}),a.appreciateIconFilledAlpha=o.getAssetAsCSSUrl("appreciate:filled",{color:h}),i.components.authorSection=a}}};n.registerCustomThemeComponent("authorSection",r),e.exports=r},1488:function(e,t,i){var n=i(996),o={templates:["ct_credits_section_css"],process:function(e,t,i){var o=e.components.paragraph;o&&(i.components.creditsSection={color:n.convertColorToRGBA(o.color)})}};n.registerCustomThemeComponent("creditsSection",o),e.exports=o},1489:function(e,t,i){var n,o;n=[i(0),i(344),i(519)],void 0===(o=function(e,t,i){var n=function(t,i){if(this.options=e.extend({},n.prototype.defaultOptions,i),this._startTime=0,this._timer=0,this._callback=t,this._running=!1,this.options.easingFunc)this._easingFunc=this.options.easingFunc;else{var o=this.options.easing||"linear";this._easingFunc=this.easings[o]||this.easings.linear}var r=this;this._updateCallback=function(){r._handleUpdate()}};return e.extend(n.prototype,{defaultOptions:{useSetTimeout:!1,interval:1e3/60,duration:1e3,easing:"linear",easingFunc:null},easings:{linear:function(e,t,i,n,o){return i+(n-i)*t/o},"ease-in":function(e,t,i,n,o){return n*((t=t/o-1)*t*t+1)+i},"ease-out":function(e,t,i,n,o){return n*(t/=o)*t*t+i}},start:function(){this._running||(e(this).trigger("animator-start"),this._startTime=(new Date).getTime(),this._handleUpdate())},stop:function(){this._running=!1,this._timer&&(this.options.useSetTimeout?clearTimeout(this._timer):cancelAnimationFrame(this._timer),this._timer=0,e(this).trigger("animator-stop"))},_handleUpdate:function(){var t=this._startTime,i=(new Date).getTime()-t,n=this.options.duration;i=i>n?n:i;var o=this._easingFunc(0,i,0,1,n);e(this).trigger("animator-update",{interpolationConstant:o}),this._callback&&this._callback(o),i===n?(this.options.complete&&this.options.complete(),e(this).trigger("animator-complete"),this.stop()):this.options.useSetTimeout?this._timer=setTimeout(this._updateCallback,this.options.interval):this._timer=requestAnimationFrame(this._updateCallback)}}),t.Animator=n,n}.apply(t,n))||(e.exports=o)},1490:function(e,t,i){var n,o;n=[i(0),i(344),i(519),i(520),i(1371)],void 0===(o=function(e,t,i,n,o){var r=function(t,i){i=e.extend({},r.prototype.defaultOptions,i),o.call(this,t,i),this._lastDragEvent=null,this._lastDragPosition=null,this._delegateEventHandler=null,e(this.element).data(this.options.delegatePropertyName,this);var n=this.options.delegateElement;n&&(this.options.delegateElement=e(n)[0])};i.inherit(r,o),e.extend(r.prototype,{defaultOptions:e.extend({},o.prototype.defaultOptions,{delegatePropertyName:"wpDragTrackerDelegate",delegateElement:null,getDirectionFunc:null,delegateIsCompatibleFunc:null}),_startDrag:function(e,t){return this._lastDragEvent=e,this._lastDragPosition=t,r.prototype._super.prototype._startDrag.call(this,e,t)},_handleDrag:function(e,t){return this._lastDragEvent=e,this._lastDragPosition=t,r.prototype._super.prototype._handleDrag.call(this,e,t)},_stopDrag:function(e,t){if(this._lastDragEvent=null,this._lastDragPosition=null,this._delegateEventHandler=null,this.dragStarted&&a){var i=this._delegateEventHandler||this.dragEventHandler,n=i&&i._getNativeEvent(e);n&&"touch"===n.pointerType&&void 0!=n.pointerId&&a.push({pointerId:n.pointerId})}return r.prototype._super.prototype._stopDrag.call(this,e,t)},_trackerIsCompatible:function(e,t){var i=this.options.delegateIsCompatibleFunc;if(i)return i(this,e,t);var n=t||this.getDirection(),o=e.getDirection();return n===o||"both"===o},_findClosestDelegate:function(t,i){for(;t;){var n=e(t).data(this.options.delegatePropertyName);if(n&&this._trackerIsCompatible(n,i))return n;t=t.parentNode}return null},_handleDelegateHandOff:function(e,t){this._stopDrag(e,t),this._lastDragEvent=null,this._lastDragPosition=null,this._delegateEventHandler=null},delegateDrag:function(e){var t=null;if(this.dragStarted&&this._lastDragEvent&&(t=this._findClosestDelegate(this.options.delegateElement||this.element.parentNode,e))){var i=this._lastDragEvent,n=this._lastDragPosition,o=this._delegateEventHandler||this.dragEventHandler;this.blockDelegates(),this._handleDelegateHandOff(i,n),t._startDrag(i,n),t.dragStarted=!0,t.dragStart(0,0),t._handleDrag(i,n),o.setDelegateTracker(t),t._delegateEventHandler=o}return t},_getAncestorDelegates:function(){for(var t=this.options.delegateElement||this.element.parentNode,i=this.options.delegatePropertyName,n=[];t;){var o=e(t).data(i);o&&n.push(o),t=t.parentNode}return n},blockDelegates:function(e){for(var t=(e=e||this._getAncestorDelegates()).length,i=0;i<t;i++){var n=e[i];n._stopTracking&&n._stopTracking()}},_stopTracking:function(){(this._delegateEventHandler||this.dragEventHandler)._removeDragHandlers()},getDirection:function(){var e=this.options,t=e.getDirectionFunc;return ignoreX=e.ignoreX,ignoreY=e.ignoreY,t?t(this):ignoreX||ignoreY?ignoreX?"vertical":"horizontal":"both"}});var a=null;return t.pointerEventsEnabled&&(a=[],document.addEventListener("click",function(e){var t=e.pointerId;if(void 0!=t&&"touch"===e.pointerType){for(var i=a.length,n=0;n<i;n++){var o=a[n];o&&o.pointerId===t&&(e.preventDefault(),e.stopPropagation())}a.length=0}},!0)),t.DragTrackerDelegate=r,r}.apply(t,n))||(e.exports=o)},1491:function(e,t,i){var n,o;n=[i(0),i(520),i(1198),i(419),i(1722)],void 0===(o=function(e,t,i,n,o){var r=i.build("Widget.MomentumScrollView",i,{_widgetName:"scrollview",defaultOptions:{useTransform:!1,maxVelocity:100,velocityDamper:.95,direction:void 0,delegateThreshold:1,delegateElement:null,trackEvents:["mouse","touch","pen"]},_attachBehavior:function(){var e=this,t=this.options;this.$element.css("overflow","hidden"),this._scrollLeft=0,this._scrollTop=0,this._direction=t.direction||void 0,this._directionLock=void 0,this.momentumStarted=!1,this.tracker=new o(this.$element[0],{trackEvents:t.trackEvents,delegateElement:t.delegateElement,maxVelocity:t.maxVelocity,velocityDamper:t.velocityDamper,getDirectionFunc:function(){return e._direction||"both"},dragStart:function(t,i,n){return e._handleDragStart(i,n)},dragUpdate:function(t,i,n){return e._handleDragUpdate(i,n)},dragStop:function(t,i,n){return e._handleDragStop(i,n)},momentumStart:function(t,i,n){return e._handleMomentumStart(i,n)},momentumStop:function(t,i,n){return e._handleMomentumStop(i,n)}})},scrollLeft:function(){return this.options.useTransform?this._scrollLeft:this.$element[0].scrollLeft},scrollTop:function(){return this.options.useTransform?this._scrollTop:this.$element[0].scrollTop},scrollWidth:function(){return this.$element[0].scrollWidth},scrollHeight:function(){return this.$element[0].scrollHeight},width:function(){return this.$element[0].offsetWidth},height:function(){return this.$element[0].offsetHeight},scrollTo:function(e,i){var n=this.$element[0],o=this.options.useTransform;if(n){var r=this.scrollWidth(),a=this.scrollHeight(),s=r-this.width(),l=a-this.height();if(e=s<=0||e<0?0:e>s?s:e,i=l<=0||i<0?0:i>l?l:i,this._scrollLeft=e,this._scrollTop=i,o){var d="translate3d("+(0-e)+"px,"+(0-i)+"px,0)";this._getElementsToScroll().css(t.vendorPrefix+"transform",d),this.$element.trigger("scroll")}else n.scrollLeft=e,n.scrollTop=i}},_getElementsToScroll:function(){return this.$element.children()},_handleDragStart:function(e,t){this.$element[0];this._scrollStartX=this.scrollLeft(),this._scrollStartY=this.scrollTop(),this._directionLock=void 0,this.momentumStarted=!1,this.scrollTo(this._scrollStartX-e,this._scrollStartY-t),this.$element.trigger("scroll-start",{dx:e,dy:t})},_isWithinAngleThreshold:function(e,t){return e&&Math.abs(Math.atan(t/e))*(180/Math.PI)<30},_handleDragUpdate:function(e,t){this.$element[0],this.options;var i=this._direction,n=this._directionLock;if(!n){var o=Math.abs(e),r=Math.abs(t);if(o<10&&r<10)return;if(this._isWithinAngleThreshold(o,r)?n="horizontal":this._isWithinAngleThreshold(r,o)&&(n="vertical"),i&&n&&i!=n&&this.tracker.delegateDrag(n))return void this._handleDragStop(e,t);this._directionLock=n=i||(n||"n"),this.tracker.blockDelegates()}var a=this._scrollStartX-("vertical"!=n?e:0),s=this._scrollStartY-("horizontal"!=n?t:0);this.scrollTo(a,s);var l=Math.abs(a-this.scrollLeft()),d=Math.abs(s-this.scrollTop()),h=this.options.delegateThreshold;!this.momentumStarted&&(l>h||d>h)&&this.tracker.delegateDrag("n"!=n&&n||i||"both")&&this._handleDragStop(e,t)},_handleDragStop:function(e,t){this.momentumStarted=!1,e="vertical"!=this._directionLock?e:0,t="horizontal"!=this._directionLock?t:0,this.scrollTo(this._scrollStartX-e,this._scrollStartY-t),this.$element.trigger("scroll-stop",{dx:e,dy:t})},_handleMomentumStart:function(e,t){this.momentumStarted=!0,this.$element.trigger("momentum-start",{dx:e,dy:t})},_handleMomentumStop:function(e,t){this.momentumStarted=!1,this.$element.trigger("momentum-stop",{dx:e,dy:t})}});return i.addWidgetConstructorAsjQueryPlugin("wpMomentumScrollView",r),i.SimpleMomentumScrollView=r,i.addWidgetConstructorAsjQueryPlugin("wpSimpleMomentumScrollView",r),r}.apply(t,n))||(e.exports=o)},1492:function(e,t,i){var n,o;n=[i(0),i(519),i(1198)],void 0===(o=function(e,t,i){var n=i.build("Widget.PanelGroup",i,{_widgetName:"panel-group",defaultOptions:{defaultIndex:0,panelClass:"wp-panel",activeClass:"wp-panel-active",toggleStateEnabled:!1,tabGroups:null},_setUp:function(){var e=this;return this.tabGroups=[],this._tabCallback=function(t,i){e._handleTabSelect(t,i)},this.showLock=0,this.tabDriver=null,n.prototype._super.prototype._setUp.apply(this,arguments)},_attachBehavior:function(){this.activeElement=null,this.activeIndex=-1,this.$element.addClass(this.options.panelClass);var e=this.options.defaultIndex;"number"==typeof e&&e>=0&&this.showPanel(e),this.addTabGroup(this.options.tabGroups)},_getElementIndex:function(t){return t?e.inArray(t,this.$element.get()):-1},_getElementByIndex:function(e){return this.$element.eq(e)[0]},_getElement:function(e){return"number"==typeof e?this._getElementByIndex(e):e},_syncTabGroups:function(){for(var e=this.tabGroups,t=this.activeIndex,i=0;i<e.length;i++){var n=e[i];n!==this.tabDriver&&n.selectTab(t)}},showPanel:function(t){if(!this.showLock){++this.showLock;var i=this._getElement(t),n=this.activeElement,o=this.options.activeClass;if(i)if(i!==n){var r={panel:i,panelIndex:this._getElementIndex(i)};this.trigger("wp-panel-before-show",r),n&&this.hidePanel(n),e(i).addClass(o),this.activeElement=i,this.activeIndex=this._getElementIndex(i),this._syncTabGroups(),this.trigger("wp-panel-show",r)}else this.options.toggleStateEnabled&&this.hidePanel(i);--this.showLock}},hidePanel:function(t){var i="number"==typeof t?this.$element.eq(t)[0]:t;if(i){var n={panel:i,panelIndex:this._getElementIndex(i)};this.trigger("wp-panel-before-hide",n),e(i).removeClass(this.options.activeClass),i===this.activeElement&&(this.activeElement=null,this.activeIndex=-1),this.trigger("wp-panel-hide",n)}},_handleTabSelect:function(e,t){this.showLock||(this.tabDriver=e.target,this.showPanel(t.tabIndex),this.tabDriver=null)},addTabGroup:function(i){if(i){for(var n=(i=t.ensureArray(i)).length,o=0;o<n;o++){var r=i[o];-1===e.inArray(r,this.tabGroups)&&(this.tabGroups.push(r),r.bind("wp-tab-select",this._tabCallback))}++this.showLock,this._syncTabGroups(),--this.showLock}},removeTabGroup:function(i){for(var n=(i=t.ensureArray(i)).length,o=0;o<n;o++){var r=i[o];sets=this.tabGroups,loc=e.inArray(r,sets),-1!==loc&&sets.splice(loc,1)}}});return i.addMultiElementWidgetConstructorAsjQueryPlugin("wpPanelGroup",n),n}.apply(t,n))||(e.exports=o)},1493:function(e,t,i){var n,o;n=[i(0),i(519),i(1198),i(1490),i(1492),i(1489),i(419)],void 0===(o=function(e,t,i,n,o,r,a){var s=function(t,i){i=e.extend({},s.prototype.defaultOptions,i),n.call(this,t,i)};t.inherit(s,n),e.extend(s.prototype,{defaultOptions:e.extend({},n.prototype.defaultOptions,{angleThreshold:30,direction:"horizontal"}),_startDrag:function(t,i){this._isNativeScroller=0!=e(t.target).closest(".scrollable").length,s.prototype._super.prototype._startDrag.call(this,t,i)},_handleDrag:function(e,t){var i=t.x-this.startX,n=t.y-this.startY,o=this.options;if(!this.dragStarted){var r=Math.abs(i),a=Math.abs(n);if(r>=o.dragThreshold||a>=o.dragThreshold){var l=360,d="horizontal"===o.direction,h=d?a:r,c=d?r:a;if(c>0&&(l=Math.abs(Math.atan(h/c))*(180/Math.PI)),l>o.angleThreshold)return this._isNativeScroller&&this._stopTracking(),this._isNativeScroller}}var u=s.prototype._super.prototype._handleDrag.call(this,e,t);return!this.dragStarted||u},_stopDrag:function(e,t){var i=s.prototype._super.prototype._stopDrag.call(this,e,t);return!this.dragStarted||i},getDirection:function(){return this.options.direction}});var l=i.build("Widget.SwipePanelGroup",o,{_widgetName:"swipe-panel-group",defaultOptions:{defaultIndex:0,direction:"horizontal",snapThreshold:0,duration:200,animateWithJS:!1,animationEnabled:!0,swipeEnabled:!0,easing:"ease-out",animateClass:"wp-animate",widgetClass:"wp-swipe-panel-group",viewClass:"wp-swipe-panel-group-view",panelClass:"wp-swipe-panel-group-panel",previousClass:"wp-previous",nextClass:"wp-next",allowDelegation:!0,delegateElement:null,trackEvents:["mouse","touch","pen"]},_setUp:function(i,n){n=e.extend({},this.defaultOptions,n);this.$clip=e(i);var o=this.$clip[0],r=t.scopedFind(o,"."+n.panelClass,n.widgetClass,o);return this.$view=t.scopedFind(o,"."+n.viewClass,n.widgetClass,o),this._blockShowPanel=!0,l.prototype._super.prototype._setUp.call(this,r,n)},_attachBehavior:function(){l.prototype._super.prototype._attachBehavior.apply(this,arguments);var e=this;this._blockShowPanel=!1,this._position=0,this._startPosition=0,this._snapPosition=0,this._lastDelta=0,this._tracker=new s(this.$clip[0],{direction:this.options.direction,trackEvents:this.options.trackEvents,delegateElement:this.options.delegateElement,dragStart:function(t,i,n){return e._handleDragStart(i,n)},dragUpdate:function(t,i,n){return e._handleDragUpdate(i,n)},dragStop:function(t,i,n){return e._handleDragStop(i,n)}}),this._isHorizontal="vertical"!==this.options.direction,this._animationInProgress=!1,this._animator=null,this._animationCompleteCB=function(t){if(!t||!t.target||t.target==e.$view[0])return e._handleTransitionEnd()},this.options.animateWithJS?(this._animStartPos=0,this._animDistance=0,this._animator=new r(function(t){e._setViewPosition(e._animStartPos+e._animDistance*t)},{easing:this.options.easing,duration:this.options.duration,complete:this._animationCompleteCB})):this.$view.on("webkitTransitionEnd oTransitionEnd msTransitionEnd transitionend",this._animationCompleteCB)},_ready:function(){this._postShowPanel(this.options.defaultIndex)},_setUpBeforeAndAfterPanels:function(){var t=this.options,i=(this.$clip,this.$element),n=this.activeIndex,o=e(),r=e(),a=e();n>=0&&(r=i.eq(n),n>0&&(o=i.eq(n-1)),n<i.length&&(a=i.eq(n+1))),this.$clip.removeClass(t.animateClass);var s=t.activeClass+" "+t.previousClass+" "+t.nextClass,l=i.filter("."+t.activeClass+", ."+t.previousClass+", ."+t.nextClass);l.removeClass(s),this._setViewPosition(0),o.addClass(t.previousClass),r.addClass(t.activeClass),a.addClass(t.nextClass),0!=(l=l.filter(function(i){var n=e(this);return!n.hasClass(t.activeClass)&&!n.hasClass(t.previousClass)&&!n.hasClass(t.nextClass)})).length&&this.trigger("wp-panels-dequeued",{dequeued:l}),this.trigger("wp-panels-queued",{before:o,after:a,active:r,queued:o.add(a)})},_setElementPosition:function(i,n,o){var r=this._isHorizontal?n:0,a=this._isHorizontal?0:n,s=e.extend({unit:"px"},o);t.setElementTransform(i,"translate3d("+r+s.unit+","+a+s.unit+",0)")},_setViewPosition:function(e,t){this._position=e,this._setElementPosition(this.$view,e,t)},_updateSnapPosition:function(e){var t=this._isHorizontal?this.$clip.width():this.$clip.height(),i=this._lastDelta;Math.abs(e)<this.options.snapThreshold?this._snapPosition=0:i<=0&&e<i?this._snapPosition=-t:i>=0&&e>i?this._snapPosition=t:e!=i&&(this._snapPosition=0);var n=this.activeIndex;(0===n&&this._snapPosition>0||n+1===this.$element.length&&this._snapPosition<0)&&(this._snapPosition=0)},_postShowPanel:function(e){l.prototype._super.prototype.showPanel.apply(this,arguments),this._setUpBeforeAndAfterPanels()},showPanel:function(t){if(!this._blockShowPanel&&("number"!=typeof t&&(t=this._getElementIndex(t)),t>-1&&t!==this.activeIndex)){var i=this._isHorizontal?this.$clip.width():this.$clip.height(),n=t>this.activeIndex,o=n?-i:i,r=n?this.options.nextClass:this.options.previousClass;this._snapIndex=t,this.$element.removeClass(r),e(this._getElement(t)).addClass(r),this.options.animationEnabled?this._animatePanels(o):this._handleTransitionEnd()}},_handleTransitionEnd:function(){this._postShowPanel(this._snapIndex),this._animationInProgress=!1},_handleDragStart:function(e,t){this.options.swipeEnabled&&(this._animationInProgress&&(this.options.animateWithJS&&this._animator.stop(),this._handleTransitionEnd()),this.$clip.removeClass(this.options.animateClass),this._lastDelta=0,this._startPosition=this._position,this._snapPosition=0,this._snapIndex=this.activeIndex,this._handleDragUpdate(e,t))},_handleDragUpdate:function(e,t){if(this.options.swipeEnabled){var i=this._isHorizontal?e:t,n=this.activeIndex;if(0===n&&i>0||n+1>=this.$element.length&&i<0){var o=this._snapPosition;if(this._snapPosition=0,this.options.allowDelegation&&this._tracker.delegateDrag())return void(this._animationInProgress=!1);this._snapPosition=o,i*=.4}this._tracker.blockDelegates(),this._updateSnapPosition(i),this._setViewPosition(this._startPosition+i),this._lastDelta=i}},_animatePanels:function(e){this._position;this._animationInProgress=!0,this.options.animateWithJS?(this._animator.stop(),this._animStartPos=this._position,this._animDistance=e-this._position,this._animator.start()):(this.$clip.addClass(this.options.animateClass),this._setViewPosition(e))},enableAnimation:function(){this.options.animationEnabled=!0},disableAnimation:function(){this.options.animationEnabled=!1},enableSwipe:function(){this.options.swipeEnabled=!0},disableSwipe:function(){this.options.swipeEnabled=!1},_handleDragStop:function(e,t){this.options.swipeEnabled&&(this._snapIndex=this.activeIndex,this._snapPosition>0?--this._snapIndex:this._snapPosition<0&&++this._snapIndex,this._animatePanels(this._snapPosition))}});return i.addWidgetConstructorAsjQueryPlugin("wpSwipePanelGroup",l),l}.apply(t,n))||(e.exports=o)},1717:function(e,t,i){var n;void 0===(n=function(){return new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i")}.apply(t,[]))||(e.exports=n)},1718:function(e,t){e.exports='<div class="editor-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="editor-dialog-shell confirm-view-shell mrvl-overlay-shell">\n    <h2 class="title dialog-title"></h2>\n\n    <div class="mrvl-overlay-content-shell">\n        <div class="mrvl-overlay-content">\n            <p class="content"></p>\n            <p class="remark"></p>\n        </div>\n        <div class="mrvl-dlg-btn-acts buttons"></div>\n    </div>\n    <button class="x-close-btn">X</button>\n</div>\n'},1719:function(e){e.exports="/slate-web/empty-1824e112.html"},1720:function(e){e.exports="/slate-web/preview-abd843d7.html"},1721:function(e,t,i){var n,o;n=[i(344)],void 0===(o=function(e){var t=function(){this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null},i=t.prototype;return i.removeChild=function(e){if(e.parentNode===this){var t=e.previousSibling,i=e.nextSibling;this.firstChild===e&&(this.firstChild=i),this.lastChild===e&&(this.lastChild=t),t&&(t.nextSibling=i),i&&(i.previousSibling=t),e.parentNode=e.previousSibling=e.nextSibling=null}return e},i.appendChild=function(e){if(e&&(e.parentNode!==this||e!==this.lastChild)){var t=this.lastChild;e.parentNode&&e.parentNode.removeChild(e),t?(t.nextSibling=e,e.previousSibling=t):this.firstChild=e,this.lastChild=e,e.parentNode=this}return e},i.insertBefore=function(e,t){if(e&&e!==t)if(e.parentNode&&e.parentNode.removeChild(e),t){this.firstChild===t&&(this.firstChild=e);var i=t.previousSibling;e.previousSibling=i,e.nextSibling=t,t.previousSibling=e,i&&(i.nextSibling=e),e.parentNode=this}else this.appendChild(e);return e},i.insertAfter=function(e,t){return this.insertBefore(e,t&&t.nextSibling||null)},i.childNodes=function(){for(var e=[],t=this.firstChild;t;)e.push(t),t=t.nextSibling;return e},e.Node=t,t}.apply(t,n))||(e.exports=o)},1722:function(e,t,i){var n,o;n=[i(0),i(344),i(519),i(1490)],void 0===(o=function(e,t,i,n){var o=function(t,i){i=e.extend({},o.prototype.defaultOptions,i),n.call(this,t,i);var r=this;this._lastDX=0,this._lastDY=0,this._velocityX=0,this._velocityY=0,this._velocityTimer=0,this._vtCallback=function(){r._handleMomentumUpdate()}};return i.inherit(o,n),e.extend(o.prototype,{defaultOptions:e.extend({},n.prototype.defaultOptions,{momentumStart:null,momentumStop:null,useRequestAnimationFrame:!0,animationInterval:Math.round(1e3/60),velocityDamper:.95,minVelocityThreshold:.25,maxVelocity:1e3}),_startVelocityTimer:function(){this._stopVelocityTimer(),this.options.useRequestAnimationFrame?this._velocityTimer=requestAnimationFrame(this._vtCallback):this._velocityTimer=setTimeout(this._vtCallback,this.options.animationInterval)},_stopVelocityTimer:function(){this._velocityTimer&&(this.options.useRequestAnimationFrame?cancelAnimationFrame(this._velocityTimer):clearTimeout(this._velocityTimer),this._velocityTimer=0)},_dispatchDragUpdate:function(e,t){o.prototype._super.prototype.dragUpdate.call(this,e,t)},_dispatchDragStop:function(e,t){var i=0!=this._velocityTimer;this._stopVelocityTimer(),this._velocityX=0,this._velocityY=0,o.prototype._super.prototype.dragStop.call(this,e,t),i&&this.momentumStop(e,t)},_handleMomentumUpdate:function(){var e=this.options.velocityDamper,t=this.options.minVelocityThreshold,i=this._velocityX*e,n=this._velocityY*e;this._velocityX=Math.abs(i)<t?0:i,this._velocityY=Math.abs(n)<t?0:n,this._velocityX||this._velocityY?(this._lastDX+=this._velocityX,this._lastDY+=this._velocityY,this._dispatchDragUpdate(this._lastDX,this._lastDY),this._startVelocityTimer()):this._dispatchDragStop(this._lastDX,this._lastDY)},_startDrag:function(e,t){this._velocityTimer&&this._dispatchDragStop(this._lastDX,this._lastDY),o.prototype._super.prototype._startDrag.apply(this,arguments)},_handleDrag:function(e,t){var i=o.prototype._super.prototype._handleDrag.apply(this,arguments);return!this.dragStarted||i},_stopDrag:function(e,t){var i=this.dragStarted,n=o.prototype._super.prototype._stopDrag.apply(this,arguments);return!i||n},momentumStart:function(e,t){var i=this.options;i.momentumStart&&i.momentumStart(this,e,t)},momentumStop:function(e,t){var i=this.options;i.momentumStop&&i.momentumStop(this,e,t)},dragStart:function(e,t){o.prototype._super.prototype.dragStart.call(this,e,t),this._velocityX=0,this._velocityY=0,this._lastDX=e,this._lastDY=t},dragUpdate:function(e,t){var i=this.options.maxVelocity;this._dispatchDragUpdate(e,t);var n=e-this._lastDX,o=t-this._lastDY;n=n<0?Math.max(n,-i):Math.min(n,i),o=o<0?Math.max(o,-i):Math.min(o,i),this._velocityX=n,this._velocityY=o,this._lastDX=e,this._lastDY=t},dragStop:function(e,t){this._velocityX||this._velocityY?(this.momentumStart(e,t),this._startVelocityTimer()):this._dispatchDragStop(e,t)},_handleDelegateHandOff:function(e){this._velocityX=0,this._velocityY=0,o.prototype._super.prototype._handleDelegateHandOff.apply(this,arguments)}}),t.MomentumDragTracker=o,o}.apply(t,n))||(e.exports=o)},1723:function(e,t,i){var n,o;n=[i(0),i(1198),i(1371)],void 0===(o=function(e,t,i){var n=t.build("Widget.Slider",t,{_widgetName:"slider",defaultOptions:{trackClassName:"wp-slider-track",trackFeedbackClassName:"wp-slider-track-feedback",thumbClassName:"wp-slider-thumb",useTransforms:!1},_attachBehavior:function(){var e=this,t=this.options;this.$track=this.$element.find("."+t.trackClassName),this.$trackFeedback=this.$element.find("."+t.trackFeedbackClassName),this.$thumb=this.$element.find("."+t.thumbClassName),this.percentage=0,this.position=0,this._resetConstraints(),this.tracker=new i(this.$thumb[0],{dragStart:function(t,i,n){e._handleDragStart(i,n)},dragUpdate:function(t,i,n){e._handleDragUpdate(i,n)},dragStop:function(t,i,n){e._handleDragStop(i,n)}})},_handleDragStart:function(e,t){this._resetConstraints(),this._startPos=this.position,this.trigger("wp-slider-drag-start",{position:this.position,percentage:this.percentage})},_handleDragUpdate:function(e,t){this.setPositionByPixel(this._startPos+e)},_handleDragStop:function(e,t){this._startPos=0,this.trigger("wp-slider-drag-stop",{position:this.position,percentage:this.percentage})},_resetConstraints:function(e){var t=this.$track.width(),i=this.$thumb.width();this.maxPos=t-i,this.setPositionByPixel(this.percentage*this.maxPos,e)},setPositionByPixel:function(e,t){e=(e=Math.round(e||0))<0?0:e>this.maxPos?this.maxPos:e,this._setThumbPosition(e,t)},setPositionByPercentage:function(e,t){this.percentage=e<0?0:e<1?e:1,this._setThumbPosition(Math.round(this.percentage*this.maxPos),t)},getPosition:function(){return this.position},getPositionAsPercentage:function(){return this.percentage},_setThumbPosition:function(e,t){if(this.percentage=e/this.maxPos,this.position=e,this.$trackFeedback.css("width",100*this.percentage+"%"),this.options.useTransforms){var i="translateX("+e+"px)";this.$thumb.css({webkitTransform:i,mozTransform:i,oTransform:i,msTransform:i,transform:i})}else this.$thumb.css("left",e+"px");(void 0===t||t)&&this.update()},update:function(){this._update(),this.trigger("wp-slider-update",{position:this.position,percentage:this.percentage})},_update:function(){}});return t.addWidgetConstructorAsjQueryPlugin("wpSlider",n),n}.apply(t,n))||(e.exports=o)},1724:function(e,t,i){var n,o;n=[i(0),i(1198),i(1371)],void 0===(o=function(e,t,i){var n=t.build("Widget.Slider2d",t,{_widgetName:"slider2d",defaultOptions:{trackClassName:"wp-slider-track",thumbClassName:"wp-slider-thumb",ignoreY:!0,ignoreX:!1,useTransforms:!1},_attachBehavior:function(){var e=this,t=this.options;this.$track=this.$element.find("."+t.trackClassName),this.$thumb=this.$element.find("."+t.thumbClassName);var n=Math.round(this.$track.width()),o=Math.round(this.$track.height()),r=(Math.round(this.$thumb.width()),parseInt(this.$thumb.css("left"))||0),a=parseInt(this.$thumb.css("top"))||0,s=r/n,l=a/o;this.percentage={x:s,y:l},this.position={x:r,y:a},this._resetConstraints(),this.tracker=new i(this.$thumb[0],{dragStart:function(t,i,n){e._handleDragStart(i,n)},dragUpdate:function(t,i,n){e._handleDragUpdate(i,n)},dragStop:function(t,i,n){e._handleDragStop(i,n)}})},_handleDragStart:function(e,t){this._resetConstraints(),this._startPos={x:this.position.x,y:this.position.y},this.trigger("wp-slider-drag-start",{position:this.position,percentage:this.percentage})},_handleDragUpdate:function(e,t){this.options.ignoreY?this.setPositionByPixel(this._startPos.x+e,this._startPos.y):this.options.ignoreX?this.setPositionByPixel(this._startPos.x,this._startPos.y+t):this.setPositionByPixel(this._startPos.x+e,this._startPos.y+t)},_handleDragStop:function(e,t){this._startPos={x:0,y:0},this.trigger("wp-slider-drag-stop",{position:this.position,percentage:this.percentage})},_resetConstraints:function(e){var t=this.$track.width(),i=this.$track.height(),n=this.$thumb.outerWidth(),o=this.$thumb.outerHeight();this.maxPos={x:t-n,y:i-o},this.maxPos.x=this.maxPos.x<0?0:this.maxPos.x,this.maxPos.y=this.maxPos.y<0?0:this.maxPos.y,this.setPositionByPixel(this.percentage.x*this.maxPos.x,this.percentage.y*this.maxPos.y,e)},setPositionByPixel:function(e,t,i){e=(e=Math.round(e||0))<0?0:e>this.maxPos.x?this.maxPos.x:e,t=(t=Math.round(t||0))<0?0:t>this.maxPos.y?this.maxPos.y:t,this._setThumbPosition(e,t,i)},setPositionByPercentage:function(e,t,i){this.percentage.x=e<0?0:e<1?e:1,this.percentage.y=t<0?0:t<1?t:1,this._setThumbPosition(Math.round(this.percentage.x*this.maxPos.x),Math.round(this.percentage.y*this.maxPos.y),i)},getPosition:function(){return this.position},getPositionAsPercentage:function(){return this.percentage},_setThumbPosition:function(e,t,i){var n=this.maxPos.x,o=this.maxPos.y;e=e<0?0:e>n?n:e,t=t<0?0:t>o?o:t,this.position={x:e,y:t},this.percentage={x:n?e/n:0,y:o?t/o:0},this.options.useTransforms?WebPro.Utils.setElementTransform(this.$thumb,"translate3d("+e+"px,"+t+"px,0)"):this.$thumb.css({left:e+"px",top:t+"px"}),(void 0===i||i)&&this.update()},update:function(){this._update(),this.options.ignoreY?this.trigger("wp-slider-update",{position:this.position.x,percentage:this.percentage.x}):this.options.ignoreX?this.trigger("wp-slider-update",{position:this.position.y,percentage:this.percentage.y}):this.trigger("wp-slider-update",{positionX:this.position.x,positionY:this.position.y,percentageX:this.percentage.x,percentageY:this.percentage.y})},_update:function(){}});return t.addWidgetConstructorAsjQueryPlugin("wpSlider2d",n),n}.apply(t,n))||(e.exports=o)},1725:function(e,t,i){var n,o;n=[i(0),i(519),i(1198),i(523),i(1721),i(1491),i(1489)],void 0===(o=function(e,t,i,n,o,r,a){var s=function(){n.call(this),o.call(this),this._x=0,this._y=0,this._width=0,this._height=0};t.inherit(s,o),e.extend(s.prototype,n.prototype,{getPosition:function(){return{x:this._x,y:this._y}},setPosition:function(e,t){this._x=e,this._y=t},getWidth:function(){return this._width},setWidth:function(e){this._width=e},getHeight:function(){return this._height},setHeight:function(e){this.height=e},getBounds:function(){return{width:this.getWidth(),height:this.getHeight()}},setBounds:function(e,t){this.setWidth(e),this.setHeight(t)}});var l=function(t,i){s.call(this),this.options=e.extend({},i),this.$element=e(t)};t.inherit(l,s),e.extend(l.prototype,{_setTransform:function(e){this.$element.css({webkitTransform:e,mozTransform:e,oTransform:e,msTransform:e,transform:e})},_syncTransform:function(){this._setTransform("translate("+this._x+"px,"+this._y+"px)")},setPosition:function(e,t){this._x=e,this._y=t,this._syncTransform()},setWidth:function(e){this._width=e,this.$element.css("width",e+"px")},setHeight:function(e){this._height=e,this.$element.css("height",e+"px")},getWidth:function(){return this.$element.width()},getHeight:function(){return this.$element.height()}});var d=function(e,t){l.call(this,e,t),this._zoom=1};t.inherit(d,l),e.extend(d.prototype,{_syncTransform:function(){this._setTransform("translate("+this._x+"px,"+this._y+"px) scale("+this._zoom+","+this._zoom+")")},getZoomWidth:function(){return this.$element.width()*this._zoom},getZoomHeight:function(){return this.$element.height()*this._zoom},getZoomBounds:function(){return{width:this.getZoomWidth(),height:this.getZoomHeight()}},getZoom:function(){return this._zoom},setZoom:function(e){this._zoom=e,this._syncTransform(),this.trigger("zoom-changed")}});var h=function(t,i,n,o){o=e.extend({},this.defaultOptions,o),l.call(this,t,o);var a=this;this.$view=e(i),this.$image=e(n),this._zoomAnimation=null,this.scrollview=new r(this.$element,{useTransform:!1}),this.zoomView=new d(this.$image),this.zoomView.bind("zoom-changed",function(){a._handleContentChanged()})};t.inherit(h,l),e.extend(h.prototype,{defaultOptions:{padding:0},_getClipBounds:function(){return{width:this.$element.width(),height:this.$element.height()}},_setViewBounds:function(e,t){this.$view.css({width:e+"px",height:t+"px"})},_getZoomCenterPoint:function(){var e=this.scrollview,t=e.$element,i=t.width(),n=t.height(),o=this.zoomView,r=o.getZoom()||1,a=(o.getWidth(),o.getHeight(),o.getPosition()),s=a.x,l=a.y;return{x:(e.scrollLeft()+i/2-s)/r,y:(e.scrollTop()+n/2-l)/r}},getZoom:function(){return this.zoomView.getZoom()},setZoom:function(e,t){e=e>0?e:1;var i=(t=t||{}).x,n=t.y;if("number"!=typeof i||"number"!=typeof n){var o=this._getZoomCenterPoint();i=o.x,n=o.y}var r=this.scrollview,a=r.$element,s=a.width(),l=a.height(),d=this.zoomView.getPosition(),h=i*e+d.x-s/2,c=n*e+d.y-l/2;this.zoomView.setZoom(e),h=Math.round(h<0?0:h),c=Math.round(c<0?0:c),r.scrollTo(h,c)},setZoomAnimate:function(t,i){var n=this,o=getZoomCenterPoint(),r=this._zoomAnimation,s=this.zoomView.getZoom(),l=e.extend({duration:500},i);r&&r.stop();var d=l.complete;l.complete=function(){n._zoomAnimation=null,d&&d()},(r=this._zoomAnimation=new a(function(e){setZoomLevel(s+(t-s)*e,{x:o.x,y:o.y})},l)).start()},_forceBrowserReflow:function(){return document.body.offsetHeight},scrollRectIntoView:function(t,i){var n=e.extend({padding:20,duration:500,zoomToFit:!1,canScaleUp:!1,zoomLevel:void 0,center:!0},i),o=this.scrollview,r=o.$element,s=o.scrollLeft(),l=o.scrollTop(),d=r.width(),h=r.height(),c=this.lastViewportWidth!=d||this.lastViewportHeight!=h,u=s,p=l,g=this.zoomView,f=g.getZoom(),m=t.width,v=t.height,b=f;n.zoomToFit?b=m<d&&v<h?n.canScaleUp?Math.min(d/m,h/v):1:Math.min(d/(m+n.padding),h/(v+n.padding)):n.zoomLevel&&(b=n.zoomLevel);var w=this._calculateViewZoomBounds(b),k=(g.getPosition(),t.x*b+w.imageX),S=t.y*b+w.imageY,_=m*b,x=v*b;u=Math.round(k-(d-_)/2),p=Math.round(S-(h-x)/2);u=u<0?0:u,p=p<0?0:p;var y=s!=u||l!=p,C=f!=b||c;this.lastViewportWidth=d,this.lastViewportHeight=h,n.center||!y||C||k>=s&&S>=l&&k+_<=s+d&&S+x<=l+h&&(y=!1);var T=this._zoomAnimation;if(T&&(T.stop(),this._zoomAnimation=null),y||C){var I=this,P=b-f,D=u-s,F=p-l;n.duration>0?(T=this._zoomAnimation=new a(function(e){C&&(g.setZoom(f+P*e),I._forceBrowserReflow()),y&&o.scrollTo(s+Math.round(D*e),l+Math.round(F*e))},n)).start():(C&&(g.setZoom(b),I._forceBrowserReflow()),y&&o.scrollTo(u,p))}},getImageBounds:function(){return this.zoomView.getBounds()},_getImageZoomBounds:function(e){var t=this.zoomView.getBounds();return t.width*=e,t.height*=e,t},_calculateViewZoomBounds:function(e){var t=this._getClipBounds(),i=this._getImageZoomBounds(e),n=this.options.padding,o=i.width,r=i.height,a=Math.max(n,(t.width-o)/2),s=Math.max(n,(t.height-r)/2);return{width:2*a+o,height:2*s+r,imageX:a,imageY:s,imageWidth:o,imageHeight:r}},_handleContentChanged:function(){var e=this._calculateViewZoomBounds(this.getZoom());this.zoomView.setPosition(e.imageX,e.imageY),this._setViewBounds(e.width,e.height)}});var c=i.build("Widget.InteractiveImage",i,{defaultOptions:{clipClassName:"wp-interactive-image-clip",viewClassName:"wp-interactive-image-view",contentClassName:"wp-interactive-image-content"},_attachBehavior:function(){this.$clip=this.$element.find("."+this.options.clipClassName),0===this.$clip.length&&(this.$clip=this.$element),this.$view=this.$element.find("."+this.options.viewClassName),this.$image=this.$element.find("."+this.options.contentClassName),this.imageZoomView=new h(this.$clip,this.$view,this.$image)},getClipBounds:function(){return this.imageZoomView._getClipBounds()},getImageBounds:function(){return this.imageZoomView.getImageBounds()},getZoom:function(){return this.imageZoomView.getZoom()},setZoom:function(e,t){this.imageZoomView.setZoom(e,t)},cover:function(t){t=e.extend({padding:0,horizontalPosition:"center",verticalPosition:"center",complete:void 0,duration:500},t);var i=this.imageZoomView._getClipBounds(),n=this.imageZoomView.getImageBounds(),o=0,r=0,a=i.width,s=i.height,l=Math.max(a/n.width,s/n.height),d=n.width*l,h=n.height*l,c=t.horizontalPosition,u=t.verticalPosition;"center"===c?o=(d-a)/2:"right"===c&&(o=d-a),"center"===u?r=(h-s)/2:"bottom"===c&&(r=h-s),o/=d,r/=h,a/=d,s/=h,this.zoomAndCenterRect({x:o,y:r,width:a,height:s},{percentageValues:!0,padding:t.padding,complete:t.complete,duration:t.duration,canScaleUp:t.canScaleUp})},fitAndCenter:function(t){t=e.extend({padding:20,complete:void 0,duration:500},t),this.zoomAndCenterRect({x:0,y:0,width:1,height:1},{percentageValues:!0,padding:t.padding,complete:t.complete,duration:t.duration,canScaleUp:t.canScaleUp})},zoomAndCenter:function(t,i,n,o){o=e.extend({complete:void 0,padding:20,duration:500},o),t=t>0?t:1;var r=this.imageZoomView.getImageBounds(),a=i*r.width,s=n*r.height;this.imageZoomView.scrollRectIntoView({x:a,y:s,width:1,height:1},{zoomLevel:t,padding:o.padding,complete:o.complete,duration:o.duration})},zoomAndCenterRect:function(t,i){var n=e.extend({},t);if((i=e.extend({canScaleUp:!0,padding:20,complete:void 0,duration:500,percentageValues:!1},i)).percentageValues){var o=this.imageZoomView.getImageBounds();n.x=n.x*o.width,n.y=n.y*o.height,n.width=n.width*o.width,n.height=n.height*o.height}this.imageZoomView.scrollRectIntoView(n,{complete:i.complete,duration:i.duration,zoomToFit:!0,canScaleUp:i.canScaleUp,padding:i.padding,center:!0})}});return i.addWidgetConstructorAsjQueryPlugin("wpInteractiveImage",c),c}.apply(t,n))||(e.exports=o)},213:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3)],void 0===(o=function(e,t,i,n){"use strict";function o(e){if(!e)throw new Error("Argument Error: Required data parameter must be non-null");this._init()}function r(e){o.prototype._init.call(this,e)}return t.extend(o.prototype,{_init:function(e){this.data=e,this.links={},this.links.preview={},this.links.original={},this.links.thumb={},this.isDir=!1,this._parseData()},_parseData:function(){},getOriginalURL:function(){return this._sanitizeURL(this.links.original.href)},getPreviewURL:function(){return this._sanitizeURL(this.links.preview.href)},getThumbURL:function(){return this._sanitizeURL(this.links.thumb.href)},getFolderName:function(){if(this.links.folder)return this._sanitizeURL(this.links.folder.filename)},getFolderPath:function(){if(this.links.folder)return this._sanitizeURL(this.links.folder.path)},isDirectory:function(){return this.isDir},_sanitizeURL:function(e){return e},hasCover:function(){return!1},getFolderLabel:function(){return this.getFolderName()},getCover:function(){var e=n.defer();return e.reject("no cover available"),e.promise},getThumbHoverLabel:function(){return""}}),o.createFolderItem=function(e,t){return new r({path:t})},t.extend(r.prototype,o.prototype,{_parseData:function(){this.isDir=!0,this.links.folder={},this.links.folder.filename=this.data.path,this.links.folder.path=this.data.path}}),o}.apply(t,n))||(e.exports=o)},220:function(e,t,i){var n,o;n=[i(0),i(2),i(3),i(1),i(5),i(40),i(7),i(106),i(11),i(6)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d){"use strict";var h=new l({color:"rebeccapurple",name:"userProfile"});return n.Model.extend({initProfile:function(e){var t=i.defer();return o.isValid().then(function(){o.isSocialSignIn()?o.asyncGetProfileFromIMS().then(function(i){this._acProfile=i,this._init(e),this.loadProfileImage(this.profile.avatar,100).then(function(e){this.profile.avatar._data=e,t.resolve()}.bind(this),function(e){this.profile.avatar._data="",t.resolve()}.bind(this))}.bind(this)).done():(this._init(e),this.loadProfileImage(this.profile.avatar,100).then(function(e){this.profile.avatar._data=e,t.resolve()}.bind(this),function(e){this.profile.avatar._data="",t.resolve()}.bind(this)).done())}.bind(this)),t.promise},_init:function(e){this._id=e.profileId,this._type=e.profileType,this._acProfile=this._acProfile||o.getProfile(),this._settings=t.assign({},this.defaults),this.profile=t.clone(this._settings),this.profile.displayName=this.getSetting("displayName"),this._settings.displayName=this.profile.displayName,this.profile.email=this.getSetting("email"),this.profile.getUserProfilePictureUrl=this.getUserProfilePictureUrl.bind(this)},defaults:{category:"",avatar:{default:"/images/icon-generic-avatar.svg"}},_getValueFromAuthControllerProfile:function(e){return this._acProfile[e]},getSetting:function(e){if(-1===e.indexOf("-")){if("first_name"===e||"last_name"===e){var i=this._settings.displayName;if(i===this._acProfile.displayName)return this._getValueFromAuthControllerProfile(e);var n=i&&i.split(" ")||[""];return 1===n.length?"first_name"===e?n[0]:"":"first_name"===e?n.slice(0,-1).join(" "):n[n.length-1].trim()}return t.isUndefined(this._settings[e])?this._acProfile[e]:this._settings[e]}var o=s.getSettingIfEmailList(e);return o?o.value:a.hasFeature(e)},_serviceLevelToInt:function(e){return 0===e.indexOf("PAID_LVL")?parseInt(e.substring(9),10):d.serviceLevelFree},_getMaxServiceLevelFromContexts:function(e){return e.length?t.reduce(e,function(e,t){var i=this._serviceLevelToInt(t.prodCtx.serviceLevel);return Math.max(i,e)}.bind(this),d.serviceLevelFree):this._serviceLevelToInt("FREE_BASIC")},_getAllSparkProductContextsFromAll:function(e){return t.filter(e||[],function(e){return"spark"===e.prodCtx.serviceCode})},getPaidLevel:function(){var e=this.getSetting("serviceAccounts"),i=t.find(e,function(e){return"spark"===e.serviceCode}),n=this.getSetting("projectedProductContext")||[],o=this._getAllSparkProductContextsFromAll(n);return Math.max(this._serviceLevelToInt(i?i.serviceLevel:"FREE_BASIC"),this._getMaxServiceLevelFromContexts(o))},isNonEnterpriseUser:function(){return"type1"===this._acProfile.account_type},canShowNonDooploImageSourceForUser:function(e,t){return"stock"===(e=e.toLowerCase())?!!a.hasFeature("stock-picker-enable-in-"+t)&&this.getSetting("user-flag-image-source-stock"):"giphy"!==e||!!a.hasFeature("image-picker-suppports-giphy")&&(!!a.hasFeature("giphy-picker-enable-in-"+t)&&this.getSetting("user-flag-image-source-giphy"))},filterDooploBitmapServicesForUser:function(e,i){var n={enabled:[],blocked:[],show:[]},o=function(e,t,i){this.getSetting(e)?i?n.enabled.push(t):n.show.push(t):n.blocked.push(t)}.bind(this);return e&&e.length?t.each(e,function(e){e=e.toLowerCase(),o(r.imageServices.flagPrefixDooplo+e,e,!0)}.bind(this)):t.each(r.imageServices.dooplo,function(e){var t=r.imageServices.flagPrefixDooplo+e;o(t,e,!0);var i=r.imageServices.showFlagPrefixDooplo+e;o(i,e,!1)}.bind(this)),n.enabled=t.filter(n.enabled,function(e){return"The Noun Project"!==e}),n},getGetNoticedSettings:function(){var e={supported:this.isNonEnterpriseUser(),value:!1};return e.supported&&(e.value=!this.getSetting("share-default-to-unlisted")),e},isUserProfileDefaultUrl:function(e){return e===this.defaults.avatar.default},getUserProfilePictureUrl:function(e){return this.getSizedProfileImage(e)},getSizedProfileImage:function(e){return this.profile&&this.profile.avatar?this.profile.avatar._data:""},loadProfileImage:function(e,t){return e.componentName?this.getNamedImageAsset(e.componentName,t):o.getUserProfilePictureUrl("max").then(function(t){return t||e.default}.bind(this),function(t){return h.error("error loading user profile image, using default instead",t),e.default}.bind(this))},getUserProfileImageForTransload:function(e){var t,n=this.profile[e],o=i.defer();if(n)if(n._data)0===n._data.indexOf("https")||n._data===this.defaults.avatar.default?o.resolve(n._data):r.convertUrlToBlob(n._data).then(function(e){t={source:"file",file:e},o.resolve(t)},function(e){o.reject(e)});else{var a=this.getNamedImageAssetComponent(e);a&&(t={source:"component",component:a}),o.resolve(t)}else o.resolve();return o.promise},getUserDisplayName:function(e){var t,i=this._settings&&this._settings.displayName;return e.preferFirstPlusInitial?this._getValueFromAuthControllerProfile("displayName")===i&&(t=this._getValueFromAuthControllerProfile("last_name")||"",""!==(i=this._getValueFromAuthControllerProfile("first_name")||"")?(i=i.charAt(0).toLocaleUpperCase()+i.substring(1),""!==t&&(i+=" "+t.charAt(0).toLocaleLowerCase())):i=t):e.preferFirst&&(i=this._getValueFromAuthControllerProfile("first_name")||"Friend"),i},emailListSettingsLoaded:function(){return s.emailListSettingsLoaded()},saveUpdatedProfileSettings:function(e){var n=e.featureFlipperChanges,o=n&&n.authenticated||{},r=[],l=s.getFilteredChanges(e),d=n&&n.numUnauthenticated?n.unauthenticated:null;return t.each(e,function(e,t){-1!==t.indexOf("-")&&(l.settings[t]||"featureFlipperChanges"===t||(o[t]=e))}),l.differences&&r.push(s.saveAndUpdateSettings(l.differences)),t.isEmpty(o)&&!d||r.push(a.setUserFlagsBothKinds(o,d)),r.length>0?i.allSettled(r).then(function(e){return n&&n.total&&(o.featureFlipperChanges=n),o}):i.resolve(o)},uploadNamedImageAsset:function(e,t){var i=this.composite.getDCXComposite().current,n={name:e,path:e,isUpdate:!!i.getComponentWithAbsolutePath("/"+e),parent:i.getChildrenOf()[0],relationship:"rendition",type:t.type,file:t};return this.composite.pushComponent(n).then(function(){return this.composite.saveChanges(function(){})}.bind(this))},updateNamedImageAsset:function(e,t,i,n){var o=this.composite.getDCXComposite().current,r=o.getComponentWithAbsolutePath("/"+e),a={name:e,relationship:"rendition",type:i||"image/jpg",path:e,isUpdate:!!r,parent:o.getChildrenOf()[0],copyFrom:{source:n,assetId:t}};return this.composite.pushComponent(a)},getNamedImageAssetComponent:function(e){return this.composite.getDCXComposite().current.getComponentWithAbsolutePath("/"+e)},getNamedImageAsset:function(e,t){var n=this.getNamedImageAssetComponent(e);return n?i.resolve(this.composite.getComponentHref(n,!0,{size:t})):i.reject("UserProfile: no component found for "+e)}})}.apply(t,n))||(e.exports=o)},221:function(e,t,i){var n,o;n=[i(0),i(2),i(3),i(1),i(23),i(222),i(12),i(99),i(15),i(11),i(4),i(7),i(34),i(16),i(40),i(223),i(101),i(8),i(227)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h,c,u,p,g,f,m,v,b){"use strict";var w=new d({color:"rebeccapurple",name:"userProfileView"});return new(o.extend({cachename:"userprofileview",_mode:"edit",_analyticsPageName:"user:profile",events:{"click .spark-user-profile-view-close-btn":"handleXCloseBtn","click .spark-user-profile-view-apply-changes":"handleConfirmBtn","click .cancel-btn":"handleCloseBtn","click .confirm-btn":"handleConfirmBtn","click .ok-btn":"handleConfirmBtn","click .spark-user-profile-view-editable-value":"handleEditableValueClick","click .spark-user-profile-view-editable-value-button":"handleEditValueClick","change .spark-user-profile-view-editable-value-select":"handleSelectChange","click .spark-user-profile-view-editable-value-flag":"handleFlagToggle","click .field-image-input":"handleImageClick","vclick .field-image":"handleImageVClick","click .field-image-hover-image":"handleImageVClick","change .field-image-input":"handleImageChange","click .spark-user-profile-reset-brand":"handleResetBrand"},initialize:function(){t.bindAll(this,t.functionsIn(this)),e("body").append(this.el),e(this.el).addClass("user-profile-view"),this.initFields()},handleResetBrand:function(e){e.preventDefault(),p.acquireDefaultBrand().then(function(e){h.trackEvent("clickedResetBrand",{},this._analyticsPageName),window.marvel._isInApp?(this.hideOverlay(),window.marvel.navigate("/branding/"+e.getId()+"/de-lete",{trigger:!0})):window.location.href=v.getLocalizedSparkPath("/sp/branding/"+e.getId()+"/de-lete")}.bind(this)).done()},setSaveButtonEnable:function(e){e?this.$saveBtn.removeClass("disabled"):this.$saveBtn.addClass("disabled")},showLoadingSpinner:function(){return this._loadingSpinnerHasBeenHidden=!1,a.showCancelableWaitView(v.getString("user-settings-loading"),"",{hideCloseButton:!0,okOnly:!0,okText:v.getString("user-settings-verb-cancel")}).then(function(){return this._loadingSpinnerHasBeenHidden?"hidden":"canceled"}.bind(this))},hideLoadingSpinner:function(){this._loadingSpinnerHasBeenHidden=!0,a.hide()},render:function(){return this.initFields().then(function(){this.$el.html(v.mustacheRender(r)),this.$el.addClass("user-profile-view"),e("body").addClass("no-scroll"),this.$el.addClass("hide"),this.confirmBtn$=this.$el.find(".confirm-btn"),this.cancelBtn$=this.$el.find(".cancel-btn"),this.closeBtn$=this.$el.find(".spark-user-profile-view-close-btn"),this.confirmBtn$.removeClass("disabled").removeClass("hide"),this.$el.find(".spark-user-profile-view-shell").addClass(this._mode),this.$el.addClass(this._mode),this.cancelBtn$.removeClass("disabled").removeClass("hide"),this.needsShowing$=this.$el.find(".needs-showing"),this.$el.removeClass("hide"),t.delay(function(){this.needsShowing$.addClass("showing")}.bind(this),5),this._options.unableToLoadEmailSettingsForQualifiedUser&&this.showUnusableSectionError({sectionId:"communication-preferences"}),this.setupUiFields(),this._showingFeatureFlipper=!1,this.$el.removeClass("tab-ff"),this.$saveBtn=this.$el.find(".spark-user-profile-view-apply-changes").addClass("hide"),c.hasFeature("enable-brand-kit-reset")&&p.acquireDefaultBrand().then(function(e){return!e||e.getSetupPercentDone().then(function(e){return e>0&&this.$el.find(".spark-user-profile-section.brand").removeClass("hide"),!0}.bind(this))}.bind(this)).catch(function(e){console.warn("caught error characterizing brand",e),this.$el.find(".spark-user-profile-section.brand").removeClass("hide")}.bind(this)).done(),c.hasFeature("feature-flipper-ui")&&this._options.isFeatureFlipperRequest&&(this.$el.addClass("tab-ff"),this.$el.find(".spark-user-profile-section.feature-flipper").removeClass("hide"),this._userFlagsView||(this._userFlagsView=new f,this._userFlagsView.$el.addClass("user-menu")),this._userFlagsView.setParentInfo({$el:this.$el.find(".user-flags"),setSaveButtonEnableCallback:this.setSaveButtonEnable}),this._userFlagsView.render(),this._showingFeatureFlipper=!0,this.$saveBtn.removeClass("hide"),t.delay(function(){this.$el.find(".x-close-btn.fixed").addClass("showing")}.bind(this),0)),c.hasFeature("user-settings-allow-show-account-info")?this.$el.find(".spark-user-profile-section.account").removeClass("hide"):this.$el.find(".spark-user-profile-section.account").addClass("hide"),new m({el:this.$el.find(".language-and-region"),location:"/sp/settings"}).render()}.bind(this)),this},drawFlagField:function(e){e.currentValue?e.field$.addClass("selected"):e.field$.removeClass("selected")},handleFlagToggle:function(i){if(!e(i.target).hasClass("no-toggle")){var n=i.target.fieldObj;if(!n){var o,r=e(i.target).parents();t.find(r,function(t){return e(t).hasClass("no-toggle")?(o=!0,!0):t.fieldObj?(n=t.fieldObj,!0):void 0});if(o)return}n?(n.currentValue=!n.currentValue,this.drawFlagField(n),this.fieldUpdated(n)):w.error("handleFlagToggle with no fieldObj",i.target)}},handleSelectChange:function(t){t.target.fieldObj.currentValue=e(t.target).val(),this.fieldUpdated(t.target.fieldObj)},loadCategories:function(){s.getUtils().then(function(e){e.getCommunityCategories("voice","voices").then(function(e){var t={placeholderText:v.getString("user-settings-pick-category-placeholder"),aData:e};this.initOneSelectField("category","category",{id:"selectedUse",valueId:"category"},t)}.bind(this)).done()}.bind(this))},fillFieldSelect:function(i,n,o){var r,a;o||(a=e('<option value="">'+(n.placeholderText||v.getString("uset-settings-select-placeholder"))+"</option>"),i.append(a)),t.each(n.aData,function(t){r=e('<option value="'+t.id+'"></option>').text(t.name),i.append(r)}),i.val(o||"")},_setFieldObjSubObject:function(e,t,i){var n=e.field$.find(i);return n.length?(e[t]=n,n[0].fieldObj=e,n):null},_getFieldSetting:function(e){return e.getSetting?e.getSetting(e):this._userProfile.getSetting(e.settingId)},_initOneFieldUi:function(e,t){var i=this.$el.find(".field-"+e.classId),n=i.length&&i.parents(".spark-user-profile-field-holder"),o=e.displayOnly;if(o||this._options.canEditNonBooleans||(o="boolean"!==e.dataType),o&&e.onlyDisplayIfCanEdit&&(t=!0),t)n&&n.addClass("hide");else{if(!n||!n.length)return void("user-flag-image-source-dooplo-bing"!==e.id&&w.warn("no fieldHolder for settings field:"+e.classId,e));e.uiDisplayOnly=o,n.removeClass("hide"),e.field$=i,e.fieldHolder$=n,e.originalValue=this._getFieldSetting(e),e.currentValue=e.originalValue,e.uiDisplayOnly&&(i.addClass("display-only"),n.addClass("display-only")),this._setFieldObjSubObject(e,"editBtn$",".spark-user-profile-view-editable-value-button"),"list"===e.dataType?this.fillFieldSelect(e.field$,e.data,e.originalValue):"string"===e.dataType?e.originalValue&&e.originalValue.jquery?e.field$.html(e.originalValue):e.valueIsClass?e.field$.addClass(e.originalValue||""):e.field$.text(e.originalValue||""):"boolean"===e.dataType?(e.originalValue=!!e.originalValue,e.currentValue=e.originalValue,this.drawFlagField(e)):"image"===e.dataType?(this._setFieldObjSubObject(e,"image$",".field-image"),this._setFieldObjSubObject(e,"hoverImage$",".field-image-hover-image"),this._setFieldObjSubObject(e,"input$",".field-image-input"),e.originalValue=e.originalValue&&e.originalValue._data,e.currentValue=e.originalValue,this.setFieldImageDisplay(e)):w.error("bad field data type:"+e.dataType,e),e.field$[0].fieldObj=e,this._uiFields[e.id]=e,this._numUiFields++}},_initOneField:function(e){e.id=e.settingId,"object"!=typeof e.dataSetOrType?e.dataType=e.dataSetOrType:(e.dataType=e.dataSetOrType.dataType,e.data=e.dataSetOrType.data),this._fields[e.id]=e},initOneEditField:function(e,t,i,n){this._initOneField({classId:e,settingId:t,analytic:i,dataSetOrType:"string",label:n})},initOneDisplayField:function(e){var i=t.clone(e);i.classId||(i.classId=i.settingId),i.dataSetOrType="string",i.readOnly=!0,this._initOneField(i)},initOneSelectField:function(e,t,i,n){this._initOneField({classId:e,settingId:t,analytic:i,dataSetOrType:{dataType:"list",data:n}})},initOneFlagField:function(e){var i=t.assign({dataSetOrType:"boolean"},e);this._initOneField(i)},initOneImageField:function(e,t,i,n){(n=n||{}).classId=e,n.settingId=t,n.compName=n.compName||t,n.analytic=i,n.dataSetOrType={dataType:"image"},n.displaySize=n.displaySize||100,this._initOneField(n)},setupUiFields:function(){this._uiFields={},this._modifiedFields={},this._numModifiedFields=0,this._numUiFields=0,this._fieldIdsSubset?t.each(this._fields,function(e){this._initOneFieldUi(e,-1===this._fieldIdsSubset.indexOf(e.settingId))}.bind(this)):t.each(this._fields,function(e){this._initOneFieldUi(e)}.bind(this)),this.required?(this._requiredFieldsFilled={},this._requiredFieldsNotFilled={},this._requiredFields={},this._numRequiredFieldsFilled=0,"all"===this.required?(t.each(this._uiFields,function(e){e.required=!0,this._requiredFields[e.id]=e}.bind(this)),this._numRequiredFields=this._numUiFields):(this._numRequiredFields=0,t.each(this._uiFields,function(e){e.required=this.required.indexOf(e.settingId)>-1,this._numRequiredFields++,this._requiredFields[e.id]=e}.bind(this))),this._numRequiredFields>0?this.recheckAllRequired():delete this._requiredFields):delete this._requiredFields,this._requiredFields||this.setRequiredDisplay(),this._initUiSections()},_initUiSections:function(){var i=this.$el.find(".spark-user-profile-section");t.each(i,function(i){if(e(i).hasClass("show-section-error"))e(i).removeClass("hide");else{var n=e(i).find(".spark-user-profile-field-holder");t.find(n,function(t){return!e(t).hasClass("section-error-holder")&&!e(t).hasClass("hide")})?e(i).removeClass("hide"):e(i).addClass("hide")}})},showUnusableSectionError:function(e){var t;t=e.sectionId?".spark-user-profile-section."+e.sectionId:e.sectionSelector;var i=this.$el.find(t);i.addClass("show-section-error"),e.errorString&&i.find(".section-error-holder").text(e.errorString)},getEntitlementSetting:function(e){var t=this._userProfile.getPaidLevel();return t>0?"premium-"+t:"free"},initFields:function(){return this._initFieldsDefer||(this._initFieldsDefer=i.defer(),c.featuresLoaded().then(function(){this._fields={},this.loadCategories(),this.initOneEditField("display-name","displayName",{id:"changedName"},"User Name"),this.initOneDisplayField({settingId:"email"}),this.initOneDisplayField({settingId:"entitlement",getSetting:this.getEntitlementSetting.bind(this),valueIsClass:!0}),this.initOneImageField("avatar","avatar",{id:"setAvatar"},{displaySize:100,onlyDisplayIfCanEdit:!0}),this.initOneFlagField({classId:"sparketing",settingId:"enableMarketing"}),this.initOneFlagField({classId:"share-default-to-unlisted",settingId:"share-default-to-unlisted",analytic:{eventNameMap:{true:"setDefaultToUnlisted",false:"setDefaultToListed"},id:"setShareDefaultToUnlisted",valueId:"shareDefaultToUnlisted"}}),this.initOneFlagField({classId:"spark-newsletter",settingId:"spark-newsletter",analytic:{eventNameMap:{true:"subscribeSparkNewsletter",false:"unsubscribeSparkNewsletter"},id:"sparkNewsletterPreference",valueId:"sparkNewsletterStatus"}}),this.initOneFlagField({classId:"tips-and-tricks",settingId:"tips-and-tricks",analytic:{eventNameMap:{true:"subscribeTipsAndTricks",false:"unsubscribeTipsAndTricks"},id:"tipsAndTricksPreference",valueId:"tipsAndTricksStatus"}}),this.initImagePickerFields(),this._initFieldsDefer.resolve()}.bind(this))),this._initFieldsDefer.promise},initImagePickerFields:function(){c.hasFeature("show-user-flag-image-source-stock")&&this.initOneFlagField({classId:"user-flag-image-source-stock",settingId:"user-flag-image-source-stock",analytic:{eventNameMap:{true:"enableStock",false:"disableStock"},id:"stockPreference",valueId:"stockStatus"}}),t.each(g.imageServices.dooplo,function(e){var t="the-noun-project"===e?"theNounProject":e,i=e.charAt(0).toUpperCase()+e.substring(1);c.hasFeature(g.imageServices.showFlagPrefixDooplo+e)&&this.initOneFlagField({classId:"user-flag-image-source-dooplo-"+e,settingId:"user-flag-image-source-dooplo-"+e,analytic:{eventNameMap:{true:"enable"+i,false:"disable"+i},id:t+"Preference",valueId:t+"Status"}})}.bind(this))},onConfirm:function(e,t,i){this._confirmCallback=e,this.title=t,this.text=i},handleXCloseBtn:function(e){var t=!this._showingFeatureFlipper;this.handleBtn(t)},handleConfirmBtn:function(t){e(t.currentTarget).hasClass("disabled")||this.handleBtn(!0,t)},getPrefixedFieldIdsForAnalytics:function(e,i){var n={};return t.each(e,function(e,t){n[i+t]=!0}),n},getChangeEventNamesForAnalytics:function(e,i){var n,o=[];return t.each(e,function(e,t){(n=this._fields[t]).analytic&&n.analytic.eventNameMap&&o.push(n.analytic.eventNameMap[e])}.bind(this)),o},sendFieldChangeEventAnalytics:function(e){var i=this.getChangeEventNamesForAnalytics(e);t.each(i,function(e){h.trackEvent(e,{},this._analyticsPageName)}.bind(this))},handleBtn:function(i,n){if(!this.confirmBtn$.hasClass("disabled")&&this._confirmDefer){var o;if(i){if(this._requiredFields&&(this._showingErrorsForRequired=!0,!this.recheckAllRequired()))return this.sendAnalytic("requiredNotFilled",this.getPrefixedFieldIdsForAnalytics(this._requiredFieldsNotFilled,"requiredNotFilled_")),void(this._requiredFieldsNotFilled.category&&this.sendAnalytic("noUseSelected"));if(this._numModifiedFields&&i&&(o={},t.each(this._modifiedFields,function(e){"image"!==e.dataType?o[e.settingId]=e.currentValue:o[e.settingId]={componentName:e.compName,imageData:e.currentValue,_file:e._file}})),this.sendAnalytic("save",this.getPrefixedFieldIdsForAnalytics(o,"saveChanged_")),this.sendFieldChangeEventAnalytics(o),this._showingFeatureFlipper){var r=this._userFlagsView.getChanges();r.total&&((o=o||{}).featureFlipperChanges=r)}}else this.sendAnalytic("cancel");this._closeDefer?(this._confirmDefer.resolve(o),this._confirmDefer=null,o&&a.showWaitView("",v.getString("user-settings-saving-settings")),this._closeDefer.promise.then(function(){this._closeDefer=null,this.needsShowing$.removeClass("showing"),o&&a.hide(),t.delay(function(){this.hideOverlay(),e("body").removeClass("no-scroll")}.bind(this),500)}.bind(this))):(this.hideOverlay(),this._confirmDefer.resolve(o),this._confirmDefer=null)}},handleCloseBtn:function(e){this.handleBtn(!1,e)},isShowing:function(){return!this.$el.hasClass("hide")},setFieldRequiredDisplay:function(e,t){t?e.fieldHolder$.removeClass("required"):e.fieldHolder$.addClass("required")},checkRequired:function(e,t){var i;(i="boolean"===e.dataType||("image"===e.dataType?e.currentValue&&""!==e.currentValue||e._data:e.currentValue&&""!==e.currentValue))?(this._requiredFieldsFilled[e.id]||(this._requiredFieldsFilled[e.id]=e,this._numRequiredFieldsFilled++),delete this._requiredFieldsNotFilled[e.id]):(this._requiredFieldsNotFilled[e.id]=e,this._requiredFieldsFilled[e.id]&&(delete this._requiredFieldsFilled[e.id],this._numRequiredFieldsFilled--)),t&&this.setRequiredDisplay(),this._showingErrorsForRequired&&this.setFieldRequiredDisplay(e,i)},setRequiredDisplay:function(){return this._requiredFields&&this._numRequiredFieldsFilled<this._numRequiredFields?(this.confirmBtn$.removeClass("ready"),!1):(this.confirmBtn$.addClass("ready"),!0)},recheckAllRequired:function(){return this._requiredFields&&t.each(this._requiredFields,function(e){this.checkRequired(e,!1)}.bind(this)),this.setRequiredDisplay()},fieldUpdated:function(e){this.setFieldChangedAnalytics(e),e.currentValue!=e.originalValue?this._modifiedFields[e.id]||(this._modifiedFields[e.id]=e,this._numModifiedFields++):this._modifiedFields[e.id]&&(this._numModifiedFields--,delete this._modifiedFields[e.id]),this._numModifiedFields?this.confirmBtn$.addClass("modified"):this.confirmBtn$.removeClass("modified"),this._requiredFields&&this.checkRequired(e,!0)},handleEditValueClick:function(e){var t=e.target.fieldObj;"string"===t.dataType?this.handleEditableValueClick(e):"image"===t.dataType&&this.forceImageClick(e)},handleEditableValueClick:function(e){var t=e.target.fieldObj;t.readOnly||(a.showPrompt("Edit Setting",t.label,{placeholderText:t.label,defaultText:t.currentValue,select:!0}).then(function(e){e&&e!==t.currentValue&&(t.currentValue=e,t.field$.text(e),this.fieldUpdated(t)),this.$el.removeClass("hide")}.bind(this)),this.$el.addClass("hide"))},sendAnalytic:function(e,t){(t=t||{}).context=this._mode,h.trackEvent(e,t,this._analyticsPageName)},setFieldChangedAnalytics:function(e){var t;e.analytic&&(e.analytic.valueId&&((t={})[e.analytic.valueId]=e.currentValue),this.sendAnalytic(e.analytic.id,t))},editProfile:function(e){if(e=e||{},this._options=e,this._confirmDefer=e&&e.defer||i.defer(),this._closeDefer=e.closeDefer,this._userProfile=e.userProfile,this._mode=e.mode||"edit","edit"===this._mode&&this.sendAnalytic("viewedUserProfile"),this.required=e.required,this._showingErrorsForRequired=!1,this._dontAllowCloseByKeyboard=e.dontAllowCloseByKeyboard,this._fieldIdsSubset=e.fieldIds,this.showOverlay(),this.avatarImage$=this.$el.find(".author-avatar-image"),this._options.canEditNonBooleans){var t=this._userProfile.getUserProfilePictureUrl(50);t&&(t="url("+t+")",this.avatarImage$.css("background-image",t))}return this._confirmDefer.promise},handleKeyup:function(t){if(!(this._dontAllowCloseByKeyboard||t&&t.isPropagationStopped()||this._ignoreCloseActions||a.isShowing()))if(t.keyCode===l.DOM_VK_ESCAPE)t.stopPropagation(),this.handleCloseBtn(t);else if(t.keyCode===l.DOM_VK_RETURN||t.keyCode===l.DOM_VK_ENTER){if(t.stopPropagation(),e(t.target).hasClass("feature-flags-filter-field"))return;this.handleConfirmBtn(t)}},handleImageClick:function(e){e.stopPropagation()},handleImageVClick:function(e){e.stopPropagation(),this.forceImageClick(e),e.preventDefault()},forceImageClick:function(e){var t=e.target.fieldObj;t.uiDisplayOnly||(t.input$=t.field$.find(".field-image-input"),t.input$.length&&(t.input$[0].fieldObj=t,t.input$[0].click()))},setFieldImageDisplay:function(e){e.currentValue&&e.image$.css("background-image","url("+e.currentValue+")")},handleImageChange:function(t){var i=t.target.fieldObj,n=t.target.files,o=e(t.target),r=o.clone();o.replaceWith(r),n[0]&&this._userProfile.uploadNamedImageAsset(i.compName,n[0]).then(function(){this._userProfile.getNamedImageAsset(i.compName,i.displaySize).then(function(e){i.currentValue=e,i._file=n[0],this.setFieldImageDisplay(i),this.fieldUpdated(i)}.bind(this))}.bind(this))}}))}.apply(t,n))||(e.exports=o)},222:function(e,t){e.exports='<div class="spark-user-profile-view-bg needs-showing mrvl-overlay-bg">\n</div>\n<div class="spark-user-profile-view-shell needs-showing mrvl-overlay-shell" data-auto="upv-shell">\n\n    <h2 class="spark-user-profile-view-dialog-title dialog-title new" data-auto="upv-title">{{user-settings-title}}</h2>\n    <h2 class="spark-user-profile-view-dialog-title dialog-title tab-ff" data-auto="upv-title">Feature Flipper</h2>\n    <div class="spark-user-profile-view-content-shell mrvl-overlay-content-shell">\n        <div class="spark-user-profile-setup-message">{{user-settings-personalize}}</div>\n            <div class="spark-user-profile-setup-message-sub">{{user-settings-streamline}}</div>\n            <div class="spark-user-profile-main-content tab-0">\n                <div class="spark-user-profile-section account">\n                    <div class="spark-user-profile-section-title">{{user-settings-account}}</div>\n                <div class="spark-user-profile-container-name-and-avatar">\n                    <div class="spark-user-profile-field-holder name left">\n                        <div class="spark-user-profile-view-label">{{user-settings-name}}</div>\n                        <div class="spark-user-profile-field-container">\n                            <div class="spark-user-profile-view-value field-display-name" data-auto="upv-field-display-name"></div><button class="spark-user-profile-view-editable-value-button hide">{{user-settings-edit}}</button>\n                            </div>\n                    </div>\n                    <div class="spark-user-profile-field-holder avatar right">\n\n                        <div class="spark-user-profile-view-image-value field-avatar">\n                            <input type="file" class="author-avatar-input field-image-input field-avatar-input" accept="image/png,image/jpeg,.jpeg,.jpg,.png">\n                            <div class="field-image field-avatar-image"></div>\n                            <div class="field-image-hover-image"></div>\n                            <button class="spark-user-profile-view-editable-value-button"></button>\n                        </div>\n\n                    </div>\n                </div>\n\n                <div class="spark-user-profile-field-holder">\n                    <div class="spark-user-profile-view-label">{{user-settings-adobe-id}}</div>\n                    <div class="spark-user-profile-view-value field-email" data-auto="upv-field-email"></div>\n                </div>\n                <div class="spark-user-profile-field-holder hide">\n                    <div class="spark-user-profile-view-label">{{user-settings-membership-status}}</div>\n                    <div class="spark-user-profile-view-value field-entitlement" data-auto="upv-field-entitlement">\n                        <div class="spark-user-profile-view-value-text entitlement free with-button">\n                            <span>{{user-settings-spark-free-account}}</span>\n                        </div>\n                        <div class="spark-user-profile-view-value-text entitlement premium-1">\n                            <span>{{user-settings-spark-premium-1}}</span>\n                        </div>\n                        <div class="spark-user-profile-view-value-text entitlement premium-2">\n                            <span>{{user-settings-spark-premium-2}}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="spark-user-profile-section opt-ins hide">\n                <div class="spark-user-profile-section-title">{{user-settings-options}}</div>\n                <div class="spark-user-profile-field-holder">\n                    <div class="spark-user-profile-view-label">{{user-settings-marketing-emails}}</div>\n                    <div class="spark-user-profile-view-editable-value-flag field-sparketing"></div>\n                </div>\n            </div>\n            <div class="spark-user-profile-section brand hide">\n                <div class="spark-user-profile-section-title">{{user-settings-brand}}</div>\n                <a href="#" class="spark-user-profile-reset-brand">{{user-settings-reset-brand}}</a>\n            </div>\n            <div class="spark-user-profile-section communication-preferences hide">\n                <div class="spark-user-profile-section-title">{{user-settings-communication-preferences}}</div>\n                <div class="spark-user-profile-field-holder flag-holder">\n                    <div class="spark-user-profile-view-flag-title-label">{{user-settings-newsletter}}</div>\n                    <div class="spark-user-profile-view-flag-subtext">{{user-settings-newsletter-description}}</div>\n                    <div class="spark-user-profile-view-editable-value-flag field-spark-newsletter flag-toggle" data-auto="upv-toggle-sendgrid-newsletter"><div class="toggle-handle"><div class="dot"></div></div><div class="toggle-mask"><div class="toggle-values"><div class="toggle-values-on">{{user-settings-on}}</div><div class="toggle-values-off">{{user-settings-off}}</div></div><div class="toggle-values-image-mask"></div></div></div>\n                </div>\n                <div class="spark-user-profile-field-holder flag-holder">\n                    <div class="spark-user-profile-view-flag-title-label">{{user-settings-tips-and-tricks}}</div>\n                    <div class="spark-user-profile-view-flag-subtext">{{user-settings-tips-and-tricks-description}}</div>\n                    <div class="spark-user-profile-view-editable-value-flag field-tips-and-tricks flag-toggle" data-auto="upv-toggle-sendgrid-tips-and-tricks"><div class="toggle-handle"><div class="dot"></div></div><div class="toggle-mask"><div class="toggle-values"><div class="toggle-values-on">{{user-settings-on}}</div><div class="toggle-values-off">{{user-settings-off}}</div></div><div class="toggle-values-image-mask"></div></div></div>\n                </div>\n                <div class="spark-user-profile-field-holder section-error-holder">\n                    <div class="spark-user-profile-view-error-text">{{user-settings-communication-error}}</div>\n                </div>\n            </div>\n            <div class="spark-user-profile-section restrictions hide">\n                <div class="spark-user-profile-section-title">{{user-settings-restrictions}}</div>\n                <div class="spark-user-profile-field-holder flag-holder">\n                    <div class="spark-user-profile-view-flag-title-label">{{user-settings-default-to-not-featured}}</div>\n                    <div class="spark-user-profile-view-flag-subtext">{{user-settings-default-to-not-featured-description}}</div>\n                    <div class="spark-user-profile-view-editable-value-flag field-share-default-to-unlisted flag-toggle" data-auto="upv-toggle-default-to-unlisted"><div class="toggle-handle"><div class="dot"></div></div><div class="toggle-mask"><div class="toggle-values"><div class="toggle-values-on">{{user-settings-on}}</div><div class="toggle-values-off">{{user-settings-off}}</div></div><div class="toggle-values-image-mask"></div></div></div>\n                </div>\n            </div>\n            <div class="spark-user-profile-section image-picker hide">\n                <div class="spark-user-profile-section-title">{{user-settings-image-sources}}</div>\n                <div class="spark-user-profile-field-holder flag-holder hide">\n                    <div class="spark-user-profile-view-flag-title-label">{{user-settings-adobe-stock}}</div>\n                    <div class="spark-user-profile-view-flag-subtext">{{user-settings-adobe-stock-description}}</div>\n                    <div class="spark-user-profile-view-editable-value-flag field-user-flag-image-source-stock flag-toggle" data-auto="upv-toggle-stock"><div class="toggle-handle"><div class="dot"></div></div><div class="toggle-mask"><div class="toggle-values"><div class="toggle-values-on">{{user-settings-on}}</div><div class="toggle-values-off">{{user-settings-off}}</div></div><div class="toggle-values-image-mask"></div></div></div>\n                </div>\n                <div class="spark-user-profile-field-holder flag-holder hide">\n                    <div class="spark-user-profile-view-flag-title-label">{{user-settings-flickr}}</div>\n                    <div class="spark-user-profile-view-flag-subtext">\n                        <div class="spark-user-profile-view-flag-inlinetext">{{user-settings-flickr-description}} <span class="spark-user-profile-view-flag-subtext-bold">{{user-settings-flickr-description-more}}</span></div>\n                    </div>\n                    <div class="spark-user-profile-view-editable-value-flag field-user-flag-image-source-dooplo-flickr flag-toggle" data-auto="upv-toggle-flickr"><div class="toggle-handle"><div class="dot"></div></div><div class="toggle-mask"><div class="toggle-values"><div class="toggle-values-on">{{user-settings-on}}</div><div class="toggle-values-off">{{user-settings-off}}</div></div><div class="toggle-values-image-mask"></div></div></div>\n                </div>\n                <div class="spark-user-profile-field-holder flag-holder hide">\n                    <div class="spark-user-profile-view-flag-title-label">{{user-settings-unsplash}}</div>\n                    <div class="spark-user-profile-view-flag-subtext">{{user-settings-unsplash-info}}</div>\n                    <div class="spark-user-profile-view-editable-value-flag field-user-flag-image-source-dooplo-unsplash flag-toggle" data-auto="upv-toggle-unsplash"><div class="toggle-handle"><div class="dot"></div></div><div class="toggle-mask"><div class="toggle-values"><div class="toggle-values-on">{{user-settings-on}}</div><div class="toggle-values-off">{{user-settings-off}}</div></div><div class="toggle-values-image-mask"></div></div></div>\n                </div>\n                <div class="spark-user-profile-field-holder flag-holder hide">\n                    <div class="spark-user-profile-view-flag-title-label">{{user-settings-pixabay}}</div>\n                    <div class="spark-user-profile-view-flag-subtext">{{user-settings-pixabay-info}}</div>\n                    <div class="spark-user-profile-view-editable-value-flag field-user-flag-image-source-dooplo-pixabay flag-toggle" data-auto="upv-toggle-pixabay"><div class="toggle-handle"><div class="dot"></div></div><div class="toggle-mask"><div class="toggle-values"><div class="toggle-values-on">{{user-settings-on}}</div><div class="toggle-values-off">{{user-settings-off}}</div></div><div class="toggle-values-image-mask"></div></div></div>\n                </div>\n            </div>\n            <div class="spark-user-profile-section spark-user-locale hide">\n                <div class="spark-user-profile-section-title">{{user-settings-language-and-region}}</div>\n                <div class="spark-user-profile-field-holder flag-holder">\n                    <div class="spark-user-profile-view-flag-title-label">{{user-settings-locale}}</div>\n                    <div class="spark-user-profile-view-flag-subtext">{{user-settings-language-and-region-description}}</div>\n                </div>\n                <div class="spark-user-profile-view-editable-value-select language-and-region">\n                </div>\n                <div class="spark-user-profile-field-holder section-error-holder">\n                    <div class="spark-user-profile-view-error-text">{{user-settings-locale-error}}</div>\n                </div>\n            </div>\n            <div class="spark-user-profile-section about-me hide">\n                <div class="spark-user-profile-section-title">{{user-settings-about-me}}</div>\n                <div class="spark-user-profile-field-holder">\n                    <div class="spark-user-profile-view-label">{{user-settings-intended-use}}</div>\n                    <div class="spark-user-profile-view-editable-value-select">\n                        <div class="spark-user-profile-dropdown">\n                            <select class="field-category" placeholder="Pick a category"></select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="spark-user-profile-main-content tab-ff">\n            <div class="spark-user-profile-section feature-flipper">\n                <div class="user-flags hide"></div>\n            </div>\n        </div>\n        <div class="mrvl-dlg-btn-acts">\n            <button class="cancel-btn mrvl-btn"></button>\n            <button class="confirm-btn mrvl-btn"></button>\n        </div>\n    </div>\n</div>\n<button class="spark-user-profile-view-apply-changes needs-showing sp-cta-button-primary disabled" data-auto="upv-apply-changes-button">{{user-settings-save}}</button>\n<button class="spark-user-profile-view-close-btn x-close-btn needs-showing" data-auto="upv-close-button">X</button>\n'},223:function(e,t,i){var n,o;n=[i(0),i(2),i(3),i(1),i(5),i(11),i(15),i(4),i(6),i(7),i(12),i(17),i(224),i(225),i(226)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h,c,u,p,g){"use strict";var f=new r({color:"tan",name:"user-profile"}),m=["default-env","variantid"],v=["global."];return n.View.extend({el:".user-flags",events:{"click .analytics-to-console":"handleAnalyticsDump","click .clear-unauthenticated-feature-flags":"handleClearUnauthenticatedFlags","click .clear-authenticated-feature-flags":"handleClearAuthenticatedFlags","click .spark-user-profile-field-holder":"handleHolderFlagClick","keyup .feature-flags-filter-field":"handleFilterFieldChange"},initialize:function(){this.$el.removeClass("hide"),this._handleFilterFieldChange=t.debounce(this._handleFilterFieldChange.bind(this),500)},setParentInfo:function(e){this.setElement(e.$el),this.setSaveButtonEnableCallback=e.setSaveButtonEnableCallback},handleAnalyticsDump:function(){var e=s.getAuditLog(!1);e?(f.debug("-------------analytics activity-----------------"),f.debug(e),f.debug("----------------end activity--------------------")):f.debug("----------------no activity--------------------")},handleClearAuthenticatedFlags:function(){h.showConfirm("Really?","Are you sure you want to reset all the Authenticated feature flags?").then(function(t){t&&e.ajax({type:"GET",url:"/clear-ff/"+o.getProfile().userId,headers:{"Content-Type":"application/json;charset=UTF-8"},success:function(e){document.location.reload()},error:function(e){f.error('Error processing clear flags "'+e.status+'"',e)}})}.bind(this))},handleClearUnauthenticatedFlags:function(){h.showConfirm("Really?","Are you sure you want to reset all the Unauthenticated feature flags?").then(function(e){e&&(d.clearUnauthenticatedFeatureFlags(),t.defer(function(){document.location.reload()}))}.bind(this))},drawFlagField:function(e,t){t?e.addClass("selected"):e.removeClass("selected")},getFlagObjFromFlagElem:function(e){var t=e.data("ff"),i=e.hasClass("authenticated");return{all:i?this._flagsInfo.authenticated[t]:this._flagsInfo.unauthenticated[t],custom:i?this._flagsInfo.authenticatedCustom[t]:this._flagsInfo.unauthenticatedCustom[t]}},handleFlagToggle:function(t,i){if(0===(i=i||e(t.currentTarget)).closest(".no-toggle").length){var n=this.getFlagObjFromFlagElem(i),o=!i.hasClass("selected"),r=i.parent(".spark-user-profile-field-holder"),a=n.all,s=n.custom;if(this.drawFlagField(i,o),a.enabled=o,a.modified=a.enabled!==a.initial,a.modified?(this.numMods++,r.addClass("modified")):(this.numMods--,r.removeClass("modified")),this.setSaveButtonEnableCallback(this.numMods>0),a.unknownDefault||o===a.default?r.removeClass("known-not-default"):r.addClass("known-not-default"),s){var l,d,h=a.isAuth?".authenticated-flags":".unauthenticated-flags",c=this.$el.find(h);if(s.enabled=a.enabled,s.modified=a.modified,l=r.closest(".is-custom").length?".is-all":".is-custom",(d=c.find(l).find(".field-"+a.id)).length){this.drawFlagField(d,o);var u=d.parent(".spark-user-profile-field-holder");s.modified?u.addClass("modified"):u.removeClass("modified"),s.unknownDefault||s.enabled===s.default?u.removeClass("known-not-default"):u.addClass("known-not-default")}}}},getChanges:function(){var e={},i={},n=0,o=0;return t.each(this._flagsInfo.authenticated,function(t){t.modified&&(e[t.id]=t.enabled,n++)}),t.each(this._flagsInfo.unauthenticated,function(e){e.modified&&(i[e.id]=e.enabled,o++)}),{numAuthenticated:n,authenticated:e,numUnauthenticated:o,unauthenticated:i,total:n+o}},_showNonBooleanModal:function(t){var i=e(t.currentTarget).find(".spark-profile-field-feature-flag-non-boolean"),n=this.getFlagObjFromFlagElem(i).all;h.showAlert(n.id,n.nonBooleanValue).done()},_showEnvDefaults:function(i){var n=e(i.currentTarget).find(".spark-user-profile-view-editable-value-feature-flag"),o=this.getFlagObjFromFlagElem(n).all,r=[],a={envs:r,flagName:o.id};if(this.environmentsDefaults){var s=o.isAuth?"authenticated":"unauthenticated",l=this.environmentsDefaults.current[s][o.id];if(t.isUndefined(l))r.push({env:"All",displayVal:"None Defined"});else{var d=!1;t.each(this.environmentsDefaults.available,function(e,i){var n=e[s][o.id];t.isUndefined(n)&&f.debug("no mataching setting:"+n),r.push({env:i,displayVal:n?"on":"off",isCurrent:e.isCurrent}),n!==l&&(d=!0)}),d||(r=[{env:"All",displayVal:l?"on":"off"}])}a.isCurrentOnly=this.environmentsDefaults.isCurrentOnly,a.currentName=this.environmentsDefaults.current.name}else a.defaultsUnavailable=!0;var h=e(document.body).find(".user-profile-view"),u=h.find(".user-flags-environments-flags-overlay"),p=c.to_html(g,a);u.length||(u=e('<div class="user-flags-environments-flags-overlay"></div>'),h.append(u)),u.html(p),u.removeClass("hide");var m=function(t){e(t.target).hasClass("user-flags-environments-flags-overlay")?u.hasClass("hide")||u.addClass("hide"):u.one("click",m)};u.one("click",m)},handleHolderFlagClick:function(t){var i=e(t.target);if(t.stopPropagation(),!i.hasClass("spark-user-profile-field-holder"))if(i.hasClass("spark-profile-field-default-val"))this._showEnvDefaults(t);else if(i.hasClass("spark-profile-field-feature-flag-non-boolean"))this._showNonBooleanModal(t);else{var n=e(t.currentTarget);i.hasClass("group-flag-holder")||this.handleFlagToggle(t,n.find(".spark-user-profile-view-editable-value-feature-flag"))}},handleFilterFieldChange:function(e){this._handleFilterFieldChange(e)},_handleFilterFieldChange:function(t){this.filterFlags(e(t.currentTarget).val())},_filterByString:function(e,t){if(-1!==e.idLc.indexOf(this))return!0},_filterByArrayOfStrings:function(e,i){return t.find(this,function(t){return-1!==e.idLc.indexOf(t)})},_filterByArrayOfStrings_AND:function(e,i){return!t.find(this,function(t){return-1===e.idLc.indexOf(t)})},filterFlags:function(i){var n,o,r,a;this._unfilteredTemplateVariables.unauthenticatedOverrideHadError;if(""===(i=i.toLowerCase().trim()))n=this._unfilteredTemplateVariables.authenticatedGroups,o=this._unfilteredTemplateVariables.unauthenticatedGroups;else{var s=this._filterByString;-1!==i.indexOf(",")?(i=t.filter(e.map(i.split(","),e.trim),function(e){return""!==e}),s=this._filterByArrayOfStrings):-1!==i.indexOf("+")&&(i=t.filter(e.map(i.split("+"),e.trim),function(e){return""!==e}),s=this._filterByArrayOfStrings_AND);var l=t.filter(this._flagsInfo.authenticated,s.bind(i)),d=t.filter(this._flagsInfo.unauthenticated,s.bind(i)),h=t.filter(this._flagsInfo.authenticatedCustom,s.bind(i)),u=t.filter(this._flagsInfo.unauthenticatedCustom,s.bind(i));n=this.getParsedGroups(!0,h,l),o=this.getParsedGroups(!1,u,d)}r=c.to_html(p,{groups:n}),a=c.to_html(p,{groups:o}),this.$el.find(".authenticated-flags").empty().append(r),this.$el.find(".unauthenticated-flags").empty().append(a)},getParsedGroups:function(e,t,i){var n,o=[],r=e?"Authenticated ":"Unauthenticated ",a=!!this.environmentsDefaults;return t&&t.length&&(n={id:r+"Account",flags:t,multi:!0,groupType:"is-custom",showDefaults:a},o.push(n)),i&&i.length&&(n={id:r+"All",flags:i,multi:!0,groupType:"is-all",showDefaults:a},o.push(n)),o},getParsedNameGroups:function(e){var i={},n=[];return t.each(e,function(e){var t=e.id.split("-")[0],o=i[t];o||(o={id:t,flags:[]},i[t]=o,n.push(o)),o.flags.push(e),o.flags.length>1&&(o.multi=!0)}),t.each(n,function(e){if(e.multi){for(var t=e.flags[0].id.split("-"),i=t.length,n=1;n<e.flags.length;n++){var o=e.flags[n].id.split("-");i=Math.min(i,o.length);for(var r=1;r<i;r++)if(t[r]!==o[r]){i=r;break}if(1===i)break}i>1&&(e.id=t.slice(0,i).join("-"))}}),n},canShowFeature:function(e){if(-1!==e.indexOf("experiment"))return!1;if(-1!==e.indexOf("experienceid"))return!1;if(-1!==m.indexOf(e))return!1;if("__sequence"===e)return!1;if(v){var i=e.split("-");if(t.find(v,function(e){return 0===i[0].indexOf(e)}))return!1}return!0},_getSetupFlag:function(e){var i,n=!t.isBoolean(e.value),o={id:e.feature,idLc:e.feature.toLowerCase(),nonBoolean:n,initial:e.value,isAuth:!e.unauthenticated};(o.nonBoolean?t.isObject(e.value)?o.nonBooleanValue=JSON.stringify(e.value):o.nonBooleanValue=e.value.toString():o.enabled=e.value,this.environmentsDefaults&&this.environmentsDefaults.current)?(i=e.unauthenticated?this.environmentsDefaults.current.unauthenticated[e.feature]:this.environmentsDefaults.current.authenticated[e.feature],t.isUndefined(i)?o.unknownDefault=!0:(o.default=i,o.knownNotDefault=e.value!==i)):o.unknownDefault=!0;return o.unknownDefault?o.defaultDisplay="?":o.nonBoolean?o.defaultDisplay="nb":o.defaultDisplay=!o.default?"off":"on",o},_readyForFlipping:function(){return o.isValid().then(function(){return d.featuresLoaded().then(function(){return d.hasFeature("feature-flipper-ui")?d.unauthenticatedFeaturesLoaded().then(function(){return d.loadEnvDefaults().then(function(e){this.environmentsDefaults=e}.bind(this),function(e){return this.environmentsDefaults=null,404===e.status?void 0:i.reject()}.bind(this))}.bind(this),function(e){return o.login(),i.reject()}):i.reject()}.bind(this),function(e){return o.login(),i.reject()}.bind(this))}.bind(this),function(e){return o.login(),i.reject()})},render:function(){return this._readyForFlipping().then(function(){var e,i,n,o=[],r=[],a=[],h=[],p={authenticated:{},unauthenticated:{},authenticatedCustom:{},unauthenticatedCustom:{}},g=d.getActuallySetFeatures();this.numMods=0,t.each(t.sortBy(t.keys(g)),function(e){this.canShowFeature(e)&&(n=this._getSetupFlag({feature:e,value:g[e]}),a.push(n),p.authenticatedCustom[n.id]=n)}.bind(this));try{e=d.getActuallySetUnauthenticatedFeatures()}catch(e){i=e.message}e&&t.each(t.sortBy(t.keys(e)),function(t){this.canShowFeature(t)&&(n=this._getSetupFlag({feature:t,value:e[t],unauthenticated:!0}),h.push(n),p.unauthenticatedCustom[n.id]=n)}.bind(this));var f=t.clone(l.authenticatedFeatures);t.each(p.authenticatedCustom,function(e,i){t.isUndefined(f[i])&&(f[i]=g[i])}),t.each(t.sortBy(t.keys(f)),function(e){this.canShowFeature(e)&&(n=this._getSetupFlag({feature:e,value:d.getFeature(e)}),o.push(n),p.authenticated[n.id]=n)}.bind(this));var m=l.unauthenticatedFeatures;e&&(m=t.clone(m),t.each(p.unauthenticatedCustom,function(i,n){t.isUndefined(m[n])&&(m[n]=e[n])})),t.each(t.sortBy(t.keys(m)),function(e,t){this.canShowFeature(e)&&(n=this._getSetupFlag({feature:e,value:d.hasUnauthenticatedFeature(e),unauthenticated:!0}),r.push(n),p.unauthenticated[n.id]=n)}.bind(this)),this._unfilteredTemplateVariables={authenticatedGroups:this.getParsedGroups(!0,a,o),unauthenticatedGroups:this.getParsedGroups(!1,h,r),unauthenticatedReadError:i};var v=c.to_html(u,this._unfilteredTemplateVariables);this.$el.html(v),this.$el.removeClass("hide"),s.getAuditMode()&&this.$el.find(".analytics-to-console").removeClass("hide"),this._flagsInfo=p,t.delay(function(){this.$el.find(".feature-flags-filter-field").focus()}.bind(this),0)}.bind(this)).done(),this}})}.apply(t,n))||(e.exports=o)},224:function(e,t){e.exports='<div class="user-flags-view">\n    <div class="feature-flipper" data-auto="feature-flipper">\n        <input type="text" class="feature-flags-filter-field" placeholder="Filter: commas for or, plusses for and"></input>\n\n        <div class="spark-user-profile-section-title">Authenticated Feature Flags</div>\n        <a href="#" class="clear-feature-flags clear-authenticated-feature-flags" data-auto="clear-authenticated-feature-flags">Reset all to environmental defaults</a>\n        <ul class="authenticated-flags">\n            \x3c!-- These are dynamically populated from features.conf.js,\n                 so add your flags there, and don\'t touch this. --\x3e\n            {{#authenticatedGroups}}\n            {{#multi}}\n            <li class="spark-user-profile-field-holder group-flag-holder{{#groupType}} {{.}}{{/groupType}}">\n            <div class="flag-group-header">\n                <div class="flag-group-label">{{id}}</div>\n                <div class="flag-group-flag">Flag</div>\n                {{#showDefaults}}<div class="flag-group-show-default">Dflt</div>{{/showDefaults}}\n                <div class="flag-group-modified">Mod</div>\n                <div class="flag-group-value">Value</div>\n            </div>\n            <ul>\n            {{/multi}}\n            {{#flags}}\n            <li class="spark-user-profile-field-holder flag-holder{{#knownNotDefault}} known-not-default{{/knownNotDefault}}{{#nonBoolean}} non-boolean{{/nonBoolean}}">\n                <div class="spark-user-profile-view-flag-title-label">{{id}}</div>\n                {{#description}}<div class="spark-user-profile-view-flag-subtext">{{.}}</div>{{/description}}\n                <div class="spark-profile-field-default-val">{{defaultDisplay}}</div>\n                <div class="spark-profile-field-modified"></div>\n                {{^nonBoolean}}\n                <div class="spark-user-profile-view-editable-value-feature-flag authenticated field-{{id}} flag-toggle{{#enabled}} selected{{/enabled}}" data-ff="{{id}}" data-auto="upv-toggle-{{id}}"><div class="toggle-handle"><div class="dot"></div></div><div class="toggle-mask"><div class="toggle-values"><div class="toggle-values-on">On</div><div class="toggle-values-off">Off</div></div><div class="toggle-values-image-mask"></div></div></div>\n                {{/nonBoolean}}\n                {{#nonBoolean}}\n                <div class="spark-profile-field-feature-flag-non-boolean authenticated" data-ff="{{id}}" title="{{nonBooleanValue}}">NB</div>\n                {{/nonBoolean}}\n            </li>\n            {{/flags}}\n            {{#multi}}\n            </ul>\n            </li>\n            {{/multi}}\n            {{/authenticatedGroups}}\n        </ul>\n\n        <div class="spark-user-profile-section-title">Unauthenticated Feature Flags</div>\n        <div class="unauthenticated-note">Note: Currently, overriding unauthenticated flags is only supported for client-side cheking.</div>\n        {{#unauthenticatedReadError}}\n        <div class="unauthenticated-read-error">{{.}}</div>\n        {{/unauthenticatedReadError}}\n        <a href="#" class="clear-feature-flags clear-unauthenticated-feature-flags" data-auto="clear-unauthenticated-feature-flags">Reset all to environmental defaults</a>\n        <ul class="unauthenticated-flags">\n            {{#unauthenticatedGroups}}\n            {{#multi}}\n            <li class="spark-user-profile-field-holder group-flag-holder">\n            <div class="flag-group-header">\n                <div class="flag-group-label">{{id}}</div>\n                <div class="flag-group-flag">Flag</div>\n                {{#showDefaults}}<div class="flag-group-show-default">Dflt</div>{{/showDefaults}}\n                <div class="flag-group-modified">Mod</div>\n                <div class="flag-group-value">Value</div>\n            </div>\n            <ul>\n            {{/multi}}\n            {{#flags}}\n            <li class="spark-user-profile-field-holder flag-holder{{#knownNotDefault}} known-not-default{{/knownNotDefault}}{{#nonBoolean}} non-boolean{{/nonBoolean}}">\n                <div class="spark-user-profile-view-flag-title-label">{{id}}</div>\n                {{#description}}<div class="spark-user-profile-view-flag-subtext">{{.}}</div>{{/description}}\n                <div class="spark-profile-field-default-val">{{defaultDisplay}}</div>\n                <div class="spark-profile-field-modified"></div>\n                {{^nonBoolean}}\n                <div class="spark-user-profile-view-editable-value-feature-flag field-{{id}} flag-toggle{{#enabled}} selected{{/enabled}}" data-ff="{{id}}" data-auto="upv-toggle-{{id}}"><div class="toggle-handle"><div class="dot"></div></div><div class="toggle-mask"><div class="toggle-values"><div class="toggle-values-on">On</div><div class="toggle-values-off">Off</div></div><div class="toggle-values-image-mask"></div></div></div>\n                {{/nonBoolean}}\n                {{#nonBoolean}}\n                <div class="spark-profile-field-feature-flag-non-boolean" data-ff="{{id}}" title="{{nonBooleanValue}}">NB</div>\n                {{/nonBoolean}}\n            </li>\n            {{/flags}}\n            {{#multi}}\n            </ul>\n            </li>\n            {{/multi}}\n            {{/unauthenticatedGroups}}\n        </ul>\n    </div>\n\n    <a href="#" class="analytics-to-console hide">Analytics to Console</a>\n</div>\n'},225:function(e,t){e.exports='{{#groups}}\n{{#multi}}\n<li class="spark-user-profile-field-holder group-flag-holder{{#groupType}} {{.}}{{/groupType}}">\n<div class="flag-group-label">{{id}}</div>\n<ul>\n{{/multi}}\n{{#flags}}\n<li class="spark-user-profile-field-holder flag-holder{{#modified}} modified{{/modified}}{{#knownNotDefault}} known-not-default{{/knownNotDefault}}{{#nonBoolean}} non-boolean{{/nonBoolean}}">\n    <div class="spark-user-profile-view-flag-title-label">{{id}}</div>\n    {{#description}}<div class="spark-user-profile-view-flag-subtext">{{.}}</div>{{/description}}\n    <div class="spark-profile-field-default-val">{{defaultDisplay}}</div>\n    <div class="spark-profile-field-modified"></div>\n    {{^nonBoolean}}\n    <div class="spark-user-profile-view-editable-value-feature-flag {{#isAuth}} authenticated{{/isAuth}} field-{{id}} flag-toggle{{#enabled}} selected{{/enabled}}" data-ff="{{id}}" data-auto="upv-toggle-{{id}}"><div class="toggle-handle"><div class="dot"></div></div><div class="toggle-mask"><div class="toggle-values"><div class="toggle-values-on">On</div><div class="toggle-values-off">Off</div></div><div class="toggle-values-image-mask"></div></div></div>\n    {{/nonBoolean}}\n    {{#nonBoolean}}\n    <div class="spark-profile-field-feature-flag-non-boolean{{#isAuth}} authenticated{{/isAuth}}" data-ff="{{id}}" title="{{nonBooleanValue}}">NB</div>\n    {{/nonBoolean}}\n</li>\n{{/flags}}\n{{#multi}}\n</ul>\n</li>\n{{/multi}}\n{{/groups}}\n'},226:function(e,t){e.exports='<div class="user-flags-environments-flags-holder">\n<div class="flag-label">{{flagName}}</div>\n<ul class="environments-flags">\n{{#envs}}\n<li class="flag-holder">\n    <div class="spark-user-profile-view-env-label">{{env}}{{#isCurrent}} (current){{/isCurrent}}</div>\n    <div class="spark-profile-field-env-val">{{displayVal}}</div>\n</li>\n{{/envs}}\n</ul>\n{{#isCurrentOnly}}<div class="user-flags-environments-single-env">Defaults only available for {{currentName}}.</div>{{/isCurrentOnly}}\n{{#defaultsUnavailable}}<div class="user-flags-environments-none-env">Defaults are unavailable for this environment. </div>{{/defaultsUnavailable}}\n</div>\n'},227:function(e,t,i){var n=i(228);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(27)(n,o);n.locals&&(e.exports=n.locals)},228:function(e,t,i){var n=i(51);(e.exports=i(26)(!1)).push([e.i,'.user-profile-view .mrvl-overlay-bg{z-index:105;position:fixed;left:0;right:0;top:0;bottom:0}.user-profile-view .mrvl-overlay-content-shell{padding:30px 30px 25px}.user-profile-view .flag-toggle{width:62px;height:28px;cursor:pointer;display:inline-block;position:relative}.user-profile-view .flag-toggle.selected .toggle-values{left:0}.user-profile-view .flag-toggle.selected .toggle-handle{left:33px}.user-profile-view .flag-toggle:not(.selected) .toggle-handle{left:-3px}.user-profile-view .flag-toggle .toggle-handle,.user-profile-view .flag-toggle .toggle-values{transition-property:left;transition:left .19s linear;transition-duration:.19s;transition-timing-function:linear;transition-delay:0s}.user-profile-view .flag-toggle .toggle-values{width:116px;height:24px;position:absolute;z-index:0;left:-58px}.user-profile-view .flag-toggle .toggle-values .toggle-values-off,.user-profile-view .flag-toggle .toggle-values .toggle-values-on{width:58px;line-height:24px;text-transform:uppercase;display:inline-block;font-size:11px;font-weight:700}.user-profile-view .flag-toggle .toggle-values .toggle-values-off.toggle-values-on,.user-profile-view .flag-toggle .toggle-values .toggle-values-on.toggle-values-on{background-color:#35414c;text-align:left;color:#fff;padding-left:10px}.user-profile-view .flag-toggle .toggle-values .toggle-values-off.toggle-values-off,.user-profile-view .flag-toggle .toggle-values .toggle-values-on.toggle-values-off{background-color:#f2f4f5;text-align:right;color:#81919b;padding-right:10px}.user-profile-view .flag-toggle .toggle-mask{position:absolute;overflow:hidden;width:58px;height:24px;z-index:1;top:2px}.user-profile-view .flag-toggle .toggle-mask .toggle-values-image-mask{position:absolute;top:0;left:0;width:58px;height:24px;z-index:1;background-image:url(/images/icon-pill-mask.svg);background-size:cover}.user-profile-view .flag-toggle .toggle-handle{height:28px;width:28px;border-radius:14px;background-color:#dce0e3;position:absolute;z-index:2}.user-profile-view .flag-toggle .toggle-handle .dot{background-color:#81919b;width:6px;height:6px;border-radius:3px;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.spark-user-profile-view-bg{background-color:hsla(0,0%,100%,0);transition:background-color .5s ease-in}.spark-user-profile-view-bg.showing{background-color:hsla(0,0%,100%,.75);transition:background-color 0s}.spark-user-profile-view-shell{z-index:106;height:100%;width:100%;border-radius:0;position:fixed;background-color:#fff;top:150%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);transition:top .5s ease-in;overflow-y:scroll}.spark-user-profile-view-shell.showing{top:50%}.spark-user-profile-view-shell .dialog-title{font-size:2em;font-weight:700;background-color:#f2f4f5;text-align:left;font-family:brandon-grotesque,adobe-clean,sans-serif;color:#35414c;margin:0;padding:20px 25px;border-top-left-radius:10px;border-top-right-radius:10px}.spark-user-profile-view-shell .spark-user-profile-view-dialog-title{text-align:center;font-size:24px;line-height:100px;background:none;background-size:384px 384px;border-radius:0;font-size:3.08em;font-weight:700}.spark-user-profile-view-shell .spark-user-profile-view-dialog-title h2{font-weight:700}.spark-user-profile-view-shell .spark-user-profile-view-dialog-title.tab-ff{display:none}.spark-user-profile-view-shell .spark-user-profile-section{margin-bottom:45px}.spark-user-profile-view-shell .spark-user-profile-section.show-section-error .spark-user-profile-field-holder.section-error-holder{display:inherit}.spark-user-profile-view-shell .spark-user-profile-section.show-section-error .spark-user-profile-field-holder:not(.section-error-holder){display:none}.spark-user-profile-view-shell .spark-user-profile-section-title{border-bottom:1px solid #eee;font-family:brandon-grotesque,adobe-clean,sans-serif;font-weight:700;font-size:21px;color:#35414c;padding-bottom:12px;margin-bottom:24px}.spark-user-profile-view-shell .spark-user-profile-main-content{width:770px;position:relative;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.spark-user-profile-view-shell.edit .mrvl-dlg-btn-acts,.spark-user-profile-view-shell .spark-user-profile-main-content.tab-ff{display:none}.spark-user-profile-view-shell.edit .mrvl-dlg-btn-acts .confirm-btn:after{content:"OK"}.spark-user-profile-view-shell.edit .mrvl-dlg-btn-acts .confirm-btn.modified:after{content:"Save"}.spark-user-profile-view-shell.edit .mrvl-dlg-btn-acts .cancel-btn:after{content:"Cancel"}.spark-user-profile-view-shell.edit .spark-user-profile-setup-message,.spark-user-profile-view-shell.edit .spark-user-profile-setup-message-sub{display:none}.spark-user-profile-view-shell.setup{text-align:center;width:100%;height:100%;border-radius:0}.spark-user-profile-view-shell.setup h2{display:none}.spark-user-profile-view-shell.setup .spark-user-profile-main-content{display:block;width:50%;background-color:#fff;border-radius:6px;display:inline-block;text-align:initial;padding:4.5em 3em 1em}.spark-user-profile-view-shell.setup .spark-user-profile-setup-message{font-family:brandon-grotesque,adobe-clean,sans-serif;font-weight:700;font-size:3em;color:#fff;display:block;text-align:center;margin-bottom:20px}.spark-user-profile-view-shell.setup .spark-user-profile-setup-message-sub{font-weight:400;font-size:1.5em;color:#fff;display:block;text-align:center;margin-bottom:60px}.spark-user-profile-view-shell.setup .mrvl-dlg-btn-acts{margin-top:48px;position:static;bottom:auto;text-align:center}.spark-user-profile-view-shell.setup .mrvl-dlg-btn-acts .confirm-btn{background-color:#e8ebed;color:#35414c}.spark-user-profile-view-shell.setup .mrvl-dlg-btn-acts .confirm-btn:after{content:"Save and continue";opacity:.4}.spark-user-profile-view-shell.setup .mrvl-dlg-btn-acts .confirm-btn.ready:after{content:"Save and continue";opacity:1}.spark-user-profile-view-shell.setup .mrvl-dlg-btn-acts .cancel-btn{display:none}.spark-user-profile-view-shell.setup .mrvl-dlg-btn-acts .cancel-btn:after{content:"I\'ll change this later"}.spark-user-profile-view-shell .spark-user-profile-container-name-and-avatar .spark-user-profile-field-holder.name{max-width:70%;margin-bottom:0}.spark-user-profile-view-shell .spark-user-profile-container-name-and-avatar .spark-user-profile-field-holder.avatar{margin-bottom:0;z-index:1}.spark-user-profile-view-shell .spark-user-profile-field-holder{font-size:1.2em;position:relative;margin-bottom:2.5em}.spark-user-profile-view-shell .spark-user-profile-field-holder.display-only{margin-bottom:0}.spark-user-profile-view-shell .spark-user-profile-field-holder.left{display:inline-block}.spark-user-profile-view-shell .spark-user-profile-field-holder.right{display:inline-block;float:right}.spark-user-profile-view-shell .spark-user-profile-field-holder.flag-holder{width:576px}.spark-user-profile-view-shell .spark-user-profile-field-holder.modified .spark-profile-field-modified{opacity:1}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-error-text,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-inlinetext,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-subtext,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-subtext-bold,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-label{font-weight:400;cursor:default;color:#82919b;display:inline-block;font-size:14px}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-inlinetext{display:inherit}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-subtext-bold{display:inline;font-weight:700}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-label{width:150px;margin-bottom:20px}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-error-text,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-inlinetext,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-subtext,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-subtext-bold{width:400px;line-height:19px;margin-bottom:0}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-error-text a,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-inlinetext a,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-subtext-bold a,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-subtext a{color:#35414c;text-decoration:none;font-weight:500}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-error-text a:hover,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-inlinetext a:hover,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-subtext-bold a:hover,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-subtext a:hover{opacity:.8}.spark-user-profile-view-shell .spark-user-profile-field-holder.section-error-holder{display:none}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-title-label{color:#35414c;display:block;font-weight:700;margin-bottom:15px}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-field-container{display:inline-block}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-button{display:inline-block;margin-left:10px;line-height:32px;background-color:#fff;font-weight:400;color:#82919b;cursor:pointer}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-button:focus{outline:none}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value span{font-weight:500;cursor:pointer;color:#35414c;display:inline-block}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-editable-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-editable-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-editable-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-editable-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-editable-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-editable-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-editable-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-editable-value{font-size:2.2em;padding-top:2px;height:2.2em;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;max-width:90%}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag .spark-user-profile-view-value-text,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag .spark-user-profile-view-value-text,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select .spark-user-profile-view-value-text,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value .spark-user-profile-view-value-text,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label .spark-user-profile-view-value-text,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value .spark-user-profile-view-value-text,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text .spark-user-profile-view-value-text,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-value,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value .spark-user-profile-view-value-text{cursor:default;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;padding-bottom:2px}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag .spark-user-profile-view-value-text span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-value span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag .spark-user-profile-view-value-text span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-value span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select .spark-user-profile-view-value-text span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-value span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value .spark-user-profile-view-value-text span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-value span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label .spark-user-profile-view-value-text span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-value span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value .spark-user-profile-view-value-text span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-value span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text .spark-user-profile-view-value-text span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-value span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value .spark-user-profile-view-value-text span,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-value span{cursor:default}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-editable-value-select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-editable-value-select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-editable-value-select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-editable-value-select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-editable-value-select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-editable-value-select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-editable-value-select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-editable-value-select{z-index:2000;height:40px}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown{min-width:172px;position:relative;width:172px;height:44px}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select{width:100%;color:#35414c;background-color:#e8ebed;padding:5px 35px 5px 23px;font-size:16px;border-radius:22px;height:100%;-moz-appearance:none;appearance:none;-webkit-appearance:none;outline:none;background:#f2f4f5 url(/images/icon-down-caret.svg) 90% 50% no-repeat;background-size:11px auto;border:1px solid #dce0e3;cursor:pointer;font-style:normal;font-weight:400}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select option:checked,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select option:checked,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select option:checked,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select option:checked,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select option:checked,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select option:checked,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select option:checked,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select option:checked{color:#35414c}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select::-ms-expand,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select::-ms-expand,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select::-ms-expand,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select::-ms-expand,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select::-ms-expand,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select::-ms-expand,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select::-ms-expand,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select::-ms-expand{display:none}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-editable-value-feature-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-editable-value-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-editable-value-feature-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-editable-value-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-editable-value-feature-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-editable-value-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-editable-value-feature-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-editable-value-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-editable-value-feature-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-editable-value-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-editable-value-feature-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-editable-value-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-editable-value-feature-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-editable-value-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-editable-value-feature-flag,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-editable-value-flag{margin-left:44px;display:inline-block;position:absolute;right:0}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-flag-label,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-flag-label,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-flag-label,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-flag-label,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-flag-label,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-flag-label,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-flag-label,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-flag-label{max-width:50%;display:inline-block;padding-right:10px}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value input,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value input,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value input,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value input,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value input,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value input,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value input,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value input{display:none}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value .field-image-hover-image{background-size:cover;background-position:50%;background-repeat:no-repeat;cursor:pointer;width:100%;height:100%;position:absolute;top:0;left:0}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value .field-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value .field-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value .field-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value .field-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value .field-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value .field-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value .field-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value .field-image.field-image-hover-image{opacity:0;background-image:url(/images/icon-avatar-overlay.svg);transition:opacity .4s;z-index:2}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value .field-image-hover-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value .field-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value .field-image-hover-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value .field-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value .field-image-hover-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value .field-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value .field-image-hover-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value .field-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value .field-image-hover-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value .field-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value .field-image-hover-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value .field-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value .field-image-hover-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value .field-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value .field-image-hover-image.disabled,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value .field-image.disabled{opacity:.5}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value:hover .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value:hover .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value:hover .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value:hover .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value:hover .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value:hover .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value:hover .field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value:hover .field-image-hover-image{border-color:#82919b}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value:hover .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value:hover .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value:hover .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value:hover .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value:hover .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value:hover .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value:hover .field-image-hover-image.field-image-hover-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value:hover .field-image-hover-image.field-image-hover-image{display:block;opacity:1;z-index:3;transition:opacity .4s}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value .spark-user-profile-view-editable-value-button,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value .spark-user-profile-view-editable-value-button,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value .spark-user-profile-view-editable-value-button,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value .spark-user-profile-view-editable-value-button,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value .spark-user-profile-view-editable-value-button,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value .spark-user-profile-view-editable-value-button,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value .spark-user-profile-view-editable-value-button,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value .spark-user-profile-view-editable-value-button{margin:0 auto;display:block}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value.field-avatar,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value.field-avatar,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value.field-avatar,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value.field-avatar,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value.field-avatar,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value.field-avatar,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value.field-avatar,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value.field-avatar{position:relative;display:inline-block;border:1px solid #ccc;width:50px;height:50px;border-radius:50%}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value.field-avatar .field-avatar-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value.field-avatar .field-avatar-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value.field-avatar .field-avatar-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value.field-avatar .field-avatar-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value.field-avatar .field-avatar-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value.field-avatar .field-avatar-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value.field-avatar .field-avatar-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value.field-avatar .field-avatar-image{color:#fff;text-align:center;border-radius:50%}.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value.display-only,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-feature-flag.spark-user-profile-view-image-value.display-only .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value.display-only,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-flag.spark-user-profile-view-image-value.display-only .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value.display-only,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value-select.spark-user-profile-view-image-value.display-only .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value.display-only,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-editable-value.spark-user-profile-view-image-value.display-only .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value.display-only,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-flag-label.spark-user-profile-view-image-value.display-only .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value.display-only,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-image-value.spark-user-profile-view-image-value.display-only .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value.display-only,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value-text.spark-user-profile-view-image-value.display-only .field-image,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value.display-only,.spark-user-profile-view-shell .spark-user-profile-field-holder .spark-user-profile-view-value.spark-user-profile-view-image-value.display-only .field-image{cursor:default}.spark-user-profile-view-shell .spark-user-profile-field-holder .field-entitlement .entitlement{display:none}.spark-user-profile-view-shell .spark-user-profile-field-holder .field-entitlement.free .entitlement.free,.spark-user-profile-view-shell .spark-user-profile-field-holder .field-entitlement.premium-1 .entitlement.premium-1,.spark-user-profile-view-shell .spark-user-profile-field-holder .field-entitlement.premium-2 .entitlement.premium-2{display:block}.spark-user-profile-view-shell .spark-user-profile-field-holder.required .spark-user-profile-view-editable-value-select .spark-user-profile-dropdown select{border:1px solid #e62015;color:#e62015;background-color:#fff}.spark-user-profile-view-shell .spark-profile-field-modified{position:absolute;height:32px;width:32px;top:4px;right:80px;background-size:contain;background-repeat:no-repeat;background-image:url('+n(i(229))+");cursor:pointer;opacity:0;transition:opacity .2s}.spark-user-profile-view-shell .user-flags-view{display:inline-block;text-align:left}.spark-user-profile-view-shell .user-flags-view .spark-user-profile-section-title{margin:8px 0}.spark-user-profile-view-shell .user-flags-view .feature-flipper h2{text-align:center;font-size:1.4em;padding-bottom:0;margin:inherit}.spark-user-profile-view-shell .user-flags-view .feature-flipper .feature-flags-filter-field{width:300px;height:36px;border:1px solid #35414c;border-radius:4px;margin-bottom:10px;padding-left:10px}.spark-user-profile-view-shell .user-flags-view .feature-flipper .unauthenticated-read-error{color:red;font-weight:700}.spark-user-profile-view-shell .user-flags-view .feature-flipper .unauthenticated-note{font-size:.9em}.spark-user-profile-view-shell .user-flags-view .feature-flipper li{margin-bottom:0;height:40px;cursor:pointer;border:1px solid #82919b}.spark-user-profile-view-shell .user-flags-view .feature-flipper li .spark-user-profile-view-flag-title-label{display:inline-block;max-width:400px;margin-bottom:inherit;margin-left:20px;padding:10px 0 0;font-weight:600;cursor:pointer;opacity:.8}.spark-user-profile-view-shell .user-flags-view .feature-flipper li .spark-user-profile-view-flag-title-label:hover{opacity:1}.spark-user-profile-view-shell .user-flags-view .feature-flipper li .spark-user-profile-field-holder{font-size:1em;cursor:default}.spark-user-profile-view-shell .user-flags-view .feature-flipper li .spark-user-profile-field-holder.non-boolean .spark-user-profile-view-flag-title-label{cursor:default}.spark-user-profile-view-shell .user-flags-view .feature-flipper li .spark-user-profile-field-holder.non-boolean .spark-user-profile-view-flag-title-label:hover{opacity:.8}.spark-user-profile-view-shell .user-flags-view .feature-flipper li .spark-profile-field-default-val,.spark-user-profile-view-shell .user-flags-view .feature-flipper li .spark-profile-field-feature-flag-non-boolean{position:absolute;right:130px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);margin-bottom:inherit;padding:0;width:32px;color:#82919b;display:block;font-weight:400;margin-bottom:15px;text-transform:uppercase;text-align:center;cursor:pointer}.spark-user-profile-view-shell .user-flags-view .feature-flipper li .spark-profile-field-default-val.spark-profile-field-feature-flag-non-boolean,.spark-user-profile-view-shell .user-flags-view .feature-flipper li .spark-profile-field-feature-flag-non-boolean.spark-profile-field-feature-flag-non-boolean{width:58px;right:10px}.spark-user-profile-view-shell .user-flags-view .feature-flipper li.known-not-default .spark-profile-field-default-val{color:#35414c}.spark-user-profile-view-shell .user-flags-view .feature-flipper li .spark-user-profile-view-editable-value-feature-flag{display:inline-block;top:6px;right:10px}.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder{height:inherit;border:1px solid #35414c;border-radius:4px;margin-bottom:5px;margin-top:5px}.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder li{border-left:none;border-right:none;border-bottom:none}.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header{width:576px;height:54px;cursor:default}.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-label{font-weight:700;padding-left:8px;padding-top:8px;margin-bottom:8px;max-width:400px}.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-flag,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-modified,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-show-default,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-value{position:absolute;height:32px;top:32px;text-transform:uppercase}.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-flag.flag-group-flag,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-modified.flag-group-flag,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-show-default.flag-group-flag,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-value.flag-group-flag{left:20px}.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-flag.flag-group-show-default,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-modified.flag-group-show-default,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-show-default.flag-group-show-default,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-value.flag-group-show-default{right:130px;width:32px;text-align:center}.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-flag.flag-group-modified,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-modified.flag-group-modified,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-show-default.flag-group-modified,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-value.flag-group-modified{right:80px;width:32px}.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-flag.flag-group-value,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-modified.flag-group-value,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-show-default.flag-group-value,.spark-user-profile-view-shell .user-flags-view .feature-flipper li.group-flag-holder .flag-group-header .flag-group-value.flag-group-value{right:10px;width:58px;text-align:center}.spark-user-profile-view-shell .user-flags-view .feature-flipper .authenticated-flags{padding-bottom:10px}.spark-user-profile-view-shell .user-flags-view a{color:#333;padding:10px;font-size:1.2em;display:block;text-decoration:none;text-align:right}.user-profile-view .spark-user-locale .spark-user-profile-field-holder{margin-bottom:.5em}.user-profile-view .spark-user-locale .dropdown-view-element,.user-profile-view .spark-user-locale .dropdown-view-element .ddv-dropdown-bg{width:14rem}.user-profile-view .spark-user-profile-view-apply-changes,.user-profile-view .x-close-btn{position:fixed;z-index:106;opacity:0;transition:opacity .2s}.user-profile-view .spark-user-profile-view-apply-changes.showing,.user-profile-view .x-close-btn.showing{transition-delay:.5s}.user-profile-view .spark-user-profile-view-apply-changes.showing:not(.disabled),.user-profile-view .x-close-btn.showing:not(.disabled){opacity:1}.user-profile-view .spark-user-profile-view-apply-changes.showing.disabled,.user-profile-view .x-close-btn.showing.disabled{opacity:.5}.user-profile-view .spark-user-profile-view-apply-changes{display:none;right:60px;top:18px}.user-profile-view .x-close-btn{right:25px;top:25px;background-image:url("+n(i(230))+");background-color:transparent;background-repeat:no-repeat;background-size:contain;background-position:50%;width:16px;height:16px;border:none;outline:none;cursor:pointer;color:transparent}.user-profile-view .x-close-btn:hover{background-image:url("+n(i(231))+")}.user-profile-view.setup .x-close-btn,.user-profile-view .user-flags-environments-flags-overlay{display:none}.user-profile-view.tab-ff .spark-user-profile-view-apply-changes{display:inherit}.user-profile-view.tab-ff .spark-user-profile-view-shell .spark-user-profile-view-content-shell{padding-top:0}.user-profile-view.tab-ff .spark-user-profile-view-shell .spark-user-profile-main-content:not(.tab-ff){display:none}.user-profile-view.tab-ff .spark-user-profile-view-shell .spark-user-profile-main-content.tab-ff{display:inherit}.user-profile-view.tab-ff .spark-user-profile-view-shell .spark-user-profile-view-dialog-title{display:none}.user-profile-view.tab-ff .spark-user-profile-view-shell .spark-user-profile-view-dialog-title.tab-ff{display:inherit;padding:0 25px}.user-profile-view.tab-ff .spark-user-profile-view-shell .spark-user-profile-section.feature-flipper{text-align:center}.user-profile-view.tab-ff .user-flags-environments-flags-overlay{display:block;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:106;background-color:rgba(0,0,0,.3)}.user-profile-view.tab-ff .user-flags-environments-flags-overlay .user-flags-environments-flags-holder{position:absolute;top:50%;left:50%;width:260px;padding:16px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:#fff;border-radius:16px;border:1px solid #35414c;-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.user-profile-view.tab-ff .user-flags-environments-flags-overlay .user-flags-environments-flags-holder .flag-label{font-size:1.2em;color:#35414c;font-weight:700;margin-bottom:1em;line-height:1.25em;-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;text-align:center}.user-profile-view.tab-ff .user-flags-environments-flags-overlay .user-flags-environments-flags-holder .environments-flags{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.user-profile-view.tab-ff .user-flags-environments-flags-overlay .user-flags-environments-flags-holder .environments-flags .flag-holder{display:-webkit-flex;display:flex;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:0;width:100%;padding:0 30px}.user-profile-view.tab-ff .user-flags-environments-flags-overlay .user-flags-environments-flags-holder .environments-flags .flag-holder .spark-user-profile-view-env-label{color:#35414c;font-weight:700;margin-bottom:8px;-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.user-profile-view.tab-ff .user-flags-environments-flags-overlay .user-flags-environments-flags-holder .environments-flags .flag-holder .spark-profile-field-env-val{text-transform:uppercase;-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}",""])},229:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIiB3aWR0aD0iMTg2IiBoZWlnaHQ9IjE2NiIgdmlld0JveD0iMCAwIDE4NiAxNjYiPjxkZWZzPjxzdHlsZT4uY2xzLTEsLmNscy0ye2ZpbGw6IzgyOTE5YjtzdHJva2U6IzgyOTE5YjtzdHJva2Utd2lkdGg6M3B4fS5jbHMtMntmaWxsLXJ1bGU6ZXZlbm9kZH0uY2xzLTN7c3Ryb2tlOiNmY2NlMDA7c3Ryb2tlLXdpZHRoOjNweDtmaWxsOiM4MjkxOWJ9PC9zdHlsZT48L2RlZnM+PGNpcmNsZSBpZD0iZW1ibGVtIiBjeD0iOTIuNSIgY3k9Ijk3LjUiIHI9IjMzLjUiIGNsYXNzPSJjbHMtMyIvPjxwYXRoIGlkPSJob29kIiBkPSJNMzIuMzEzIDYxLjVoMTIwLjk5OWMzLjg2NiAwIDQgMy4xMzQgNCA3cy0uMTM0IDctNCA3SDMyLjMxM2MtMy44NjYgMC00LTMuMTM0LTQtN3MuMTM0LTcgNC03eiIgY2xhc3M9ImNscy0yIi8+PHBhdGggaWQ9ImxlZnQtbWlycm9yIiBkPSJNMy4zMDMgMzcuMTE3bDUuOTczLS41NzJhMi4wMDEgMi4wMDEgMCAwIDEgMi4xODIgMS44bDEuNTI1IDE1LjkyN2MuMTA2IDEuMS0uNyAyLjA3Ny0xLjggMi4xODJsLTUuOTcyLjU3MmMtMS4xLjEwNi0yLjA3Ny0uNy0yLjE4Mi0xLjhMMS41MDMgMzkuMjk5YTIuMDAxIDIuMDAxIDAgMCAxIDEuOC0yLjE4MnoiIGNsYXNzPSJjbHMtMiIvPjxwYXRoIGlkPSJyaWdodC1taXJyb3IiIGQ9Ik0xNzcuMjkgMzYuNTMxbDUuOTY4LjYxOWEyIDIgMCAwIDEgMS43ODMgMi4xOTZsLTEuNjUxIDE1LjkxNWEyIDIgMCAwIDEtMi4xOTYgMS43ODNsLTUuOTY4LS42MmEyIDIgMCAwIDEtMS43ODMtMi4xOTVsMS42NTItMTUuOTE1YTIgMiAwIDAgMSAyLjE5NS0xLjc4M3oiIGNsYXNzPSJjbHMtMiIvPjxwYXRoIGlkPSJ3aW5kc2hpZWxkLWNvbWJpbmVkIiBkPSJNMTY2LjMxMiA1My41SDIxLjMxM2MtMS4xMDUgMC02LjQ0LTIuNzUzLTctNmw2LTM0YzMuMjg1LTcuMzkgMjYuNzUyLTExLjcxNCA2My45OTktMTJoMTkuMDAxYzUyLjY3NSAxLjI4IDU4LjU3MSA3LjE4MSA2Mi45OTkgMTNsNSAzNGMtLjQyOCAyLjUzMy0zLjg5NSA1LTUgNXptLTEzNy45OTkgOTZjOC42NjEuMDE0IDguMDgzLTEuNDkyIDggNi0uMDY4IDYuMDc1LTEuOTI1IDExLTggMTEtNi4wNzYgMC04LjkzNC00LjkyNS05LTExLS4wOS04LjE1OC0xLjMyMy02LjAxNyA5LTZ6bS0zLTQ1YzAtNi4wNzUgNC45MjQtMTEgMTEtMTEgNi4wNzUgMCAxMC45OTkgNC45MjUgMTAuOTk5IDExcy00LjkyNCAxMS0xMC45OTkgMTFjLTYuMDc2IDAtMTEtNC45MjUtMTEtMTF6bTEyNC45OTktMTFjNi4wNzYgMCAxMSA0LjkyNSAxMSAxMXMtNC45MjQgMTEtMTEgMTFjLTYuMDc1IDAtMTEtNC45MjUtMTEtMTFzNC45MjUtMTEgMTEtMTF6bTkgNTZjOC42NjIuMDE0IDguMDg0LTEuNDkyIDggNi0uMDY3IDYuMDc1LTEuOTI0IDExLTggMTEtNi4wNzUgMC04LjkzMy00LjkyNS05LTExLS4wODktOC4xNTgtMS4zMjItNi4wMTcgOS02eiIgY2xhc3M9ImNscy0yIi8+PHBhdGggaWQ9ImFpci12ZW50IiBjbGFzcz0iY2xzLTEiIGQ9Ik03NSAxNDVoMzZ2NEg3NXoiLz48cGF0aCBpZD0iYnVtcGVyIiBkPSJNMTguMzEzIDEzMy41aDE0OS45OTljMS4xMDUgMCAzIDIuODk1IDMgNHY1YzAgMS4xMDUtMS44OTUgMy0zIDNoLTUxLjA4N2MtMS4zNzggMC0zLjUxMy02LTQuOTEzLTZINzMuMzEzYy0xLjk2NCAwLTEuNjY2IDYtMy41OTIgNkgxOC4zMTNjLTEuMTA1IDAtNC0xLjg5NS00LTN2LTZjMC0xLjEwNSAyLjg5NS0zIDQtM3oiIGNsYXNzPSJjbHMtMiIvPjwvc3ZnPg=="},230:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHN0eWxlPi5zdDB7ZmlsbDojODI5MTlifTwvc3R5bGU+PHRpdGxlPmNsb3NlPC90aXRsZT48cGF0aCBjbGFzcz0ic3QwIiBkPSJNNS44IDBMMCA1LjhsMi45IDIuOSA3LjMgNy40LTcuMyA3LjNMMCAyNi4xIDUuOCAzMmwyLjktMi45IDcuNC03LjQgNy4zIDcuNCAyLjggMi45IDUuOS01LjktMi45LTIuOC03LjQtNy4zIDcuNC03LjRMMzIgNS44IDI2LjEgMGwtMi44IDIuOS03LjMgNy4zLTcuMy03LjNMNS44IDB6Ii8+PC9zdmc+"},231:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHN0eWxlPi5zdDB7ZmlsbDojMzU0MTRjfTwvc3R5bGU+PHRpdGxlPmNsb3NlPC90aXRsZT48cGF0aCBjbGFzcz0ic3QwIiBkPSJNNS44IDBMMCA1LjhsMi45IDIuOSA3LjMgNy40LTcuMyA3LjNMMCAyNi4xIDUuOCAzMmwyLjktMi45IDcuNC03LjQgNy4zIDcuNCAyLjggMi45IDUuOS01LjktMi45LTIuOC03LjQtNy4zIDcuNC03LjRMMzIgNS44IDI2LjEgMGwtMi44IDIuOS03LjMgNy4zLTcuMy03LjNMNS44IDB6Ii8+PC9zdmc+Cg=="},251:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(213)],void 0===(o=function(e,t,i,n){"use strict";function o(e){this.items=[]}return t.extend(o.prototype,{getMetaData:function(e){return[]},setImageFilter:function(e){this._imageFilter=e},getImage:function(e){return null},haveMoreMetaData:function(){return!1},newItem:function(){return null},canSetFilter:function(){return!1},fusePath:function(e){var t,i=e[0];for(t=1;t<e.length;t++)i=i.replace(/\/$/,"")+"/"+e[t].replace(/^\//,"");return i}}),o.fusePath=o.prototype.fusePath,o}.apply(t,n))||(e.exports=o)},2597:function(e,t,i){var n,o;n=[i(0),i(28),i(3),i(299),i(2605),i(2638),i(252),i(4)],void 0===(o=function(e,t,i,n,o,r,a,s){"use strict";window.$=window.jQuery=e,window.slateStorage=n;var l={theme:"",receiveMessage:function(e){return this.editSession?this.editSession.receiveMessage(e):void 0},_init:function(){this.editSession=new o},initSimplePreview:function(e){this.editSession=new r(e)},_beforeAppUnload:function(){var o=i.defer(),r=!1,l=!1;return t.delay(function(){r||(l=!0,window.marvel.events.trigger("mrvl-hide-global-nav"),e(".slate .saving-overlay").addClass("showing"),this.editSession.saveEditorCaretState(),this.editSession.restoreEditorCaretState(!0))}.bind(this),250),n.storageManager().waitForQuiet(n.currentDoc,function(e){return e.isMidCommit()||e._commitQueue.length>0||a.inProgress()||this.editSession.isSavingContent()||this.editSession.hasUnsavedContent()||this.editSession._isSavingTitleImage}.bind(this)).then(function(e){r=!0,s.clearProjectId(),l&&this.editSession._handleHidePopup(),o.resolve()}.bind(this)),o.promise},_remove:function(){this.editSession&&(this.editSession.destroy(),this.editSession=null,n.editorUnloadFinished())},getSlateThumbnailDataURL:function(e,t,i,n,o){var r=document.createElement("img");i&&(r.onload=function(){var i,a,s,l=r.width/r.height,d=e/t,h=document.createElement("canvas"),c=0,u=0;d<l?(i=t,a=Math.floor(i*l),c=Math.floor((e-a)/2)):(a=e,i=Math.floor(a/l),u=Math.floor((t-i)/2)),h.width=e,h.height=t,h.getContext("2d").drawImage(r,c,u,a,i);try{s=h.toDataURL("image/jpg"),console.log("Title image url = ",s),n(s)}catch(e){o&&o()}},r.onerror=function(e){o&&o()},r.src=i)}};return window.AppShell=l,l}.apply(t,n))||(e.exports=o)},2598:function(e,t,i){var n,o;n=[i(0),i(28),i(2599),i(1464),i(48),i(345),i(3),i(417),i(2602),i(2603),i(1025),i(1369),i(117)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h,c,u){var p=!1,g=function(e,t){if("number"!=typeof e&&!e)throw new Error("Must call px with at least one string or number param");if("number"==typeof e)return e;if(-1!=e.search(/em/)&&!t)return 16*parseFloat(e);if(-1!=e.search(/^-?[0-9\.]*$/)&&t)return parseFloat(e)*t;if(-1!=e.search(/^-?[0-9\.]*$/)||-1!=e.search(/^-?[0-9\.]*px$/))return parseFloat(e);if(-1!=e.search(/\%/)&&"number"==typeof t)return parseFloat(e)/100*t;if(-1!=e.search(/em/)&&"number"==typeof t)return parseFloat(e)*t;throw new Error("Cannot convert "+e+" (with percentOf "+t+") to pixels")},f=function(){};return f.prototype={generate:function(t){console.log("[embed generate start]");var i,o,r,s=this,l=(t=t||{}).title||"",d=t.subtitle||"",h=t.backgroundImage,c=t.titlePosition||"center",u=t.imagePosition,p=t.authoringContext,g=(e(t.appendTo),e(t.el)),f=t.width,m=t.height;return a().then(function(){if(u){var e=u.split(" ");u={x:parseFloat(e[0])/100,y:parseFloat(e[1])/100}}r=n.get(t.theme)||t.theme;var a=c.replace(/^title-/,"").split("-"),l=a[0],d=a[1];return c={},2==a.length?(c.x=d,c.y=l):(c.x="top"!=l&&"bottom"!=l?l:"center",c.y="left"!=l&&"right"!=l?l:"center"),g.length?(s.canvas=i=g[0],o=s.ctx):(s.canvas=i=document.createElement("canvas"),i.width=f,i.height=m,s.ctx=o=i.getContext("2d"),i.className="generator"),o.fillStyle="#9aa6af",o.fillRect(0,0,f,m),s.loadFonts(r,p)}).then(function(){console.log("[embed generate fonts loaded]");var e=s.parseTheme(r);return console.log("[embed generate theme parsed ("+e.name+")]"),h?s.drawImage(h,u,f,m,e).thenResolve(e):e}).then(function(e){console.log("[embed generate bg image drawn]"),l="uppercase"==e.titleTextTransform?l.toUpperCase():l,d="uppercase"==e.subtitleTextTransform?d.toUpperCase():d;var t=s.computeBox(l,d,f,m,c,e);if(l||d||"vintage"==e.name)return s.drawGradientOverlay(t,f,m,c,e),s.drawTitleAndSubtitle(l,d,t,c,f,m,e).then(function(){if("whimsy"==e.name)return s.drawWhimsyGlyph(t,c,f,m,e)})}).then(function(){return console.log("[embed generate done]"),i.toDataURL("image/jpeg")})},computeBox:function(e,t,i,n,o,r){var a=this.ctx,s=!e.replace(/\s/g,"").length,d=!t.replace(/\s/g,"").length,h=o.x||"center",c=o.y||"center",u=g(r.titleHeaderMarginTop),p=g(r.titleHeaderMarginBottom),f=g(r.titleHeaderMarginLeft,i),m=g(r.titleHeaderMarginRight,i),v=g(r.titleHeaderPaddingTop),b=g(r.titleHeaderPaddingBottom),w=g(r.titleHeaderPaddingLeft,i);"center"==h&&r.titleHeaderPaddingLeftAlignedCenter&&(w=g(r.titleHeaderPaddingLeftAlignedCenter,i)),"left"==h&&r.titleHeaderPaddingLeftAlignedLeft&&(w=g(r.titleHeaderPaddingLeftAlignedLeft,i)),"right"==h&&r.titleHeaderPaddingLeftAlignedRight&&(w=g(r.titleHeaderPaddingLeftAlignedRight,i));var k=g(r.titleHeaderPaddingRight,i);"center"==h&&r.titleHeaderPaddingRightAlignedCenter&&(k=g(r.titleHeaderPaddingRightAlignedCenter,i)),"left"==h&&r.titleHeaderPaddingRightAlignedLeft&&(k=g(r.titleHeaderPaddingRightAlignedLeft,i)),"right"==h&&r.titleHeaderPaddingRightAlignedRight&&(k=g(r.titleHeaderPaddingRightAlignedRight,i));var S=g(r.titleBorderTopWidth),_=g(r.titleBorderBottomWidth),x=g(r.subtitleBorderTopWidth),y=g(r.subtitleBorderBottomWidth),C=g(r.titleFontSize),T=g(r.titleLineHeight,C),I=g(r.titleLineHeight),P=g(r.titleMaxHeight||1,1),D=g(r.subtitleFontSize),F=g(r.subtitleLineHeight,D),R=g(r.subtitleLineHeight),B=g(r.subtitleMaxHeight||1,1),A=g(r.titleMarginTop),L=g(r.titlePaddingTop),M=g(r.titlePaddingBottom),E=g(r.titleMarginBottom),H=g(r.subtitleMarginTop),W=g(r.subtitlePaddingTop),N=g(r.subtitlePaddingBottom),z=g(r.subtitleMarginBottom),O=i-f-w-k-m;r.titleHeaderMaxWidth&&(O=g(r.titleHeaderMaxWidth,i));var $=O;r.titleMaxWidth&&($=g(r.titleMaxWidth,O));var j=O;r.subtitleMaxWidth&&(j=g(r.subtitleMaxWidth,O));var U=a.font=r.titleFontStyle+" "+r.titleFontWeight+" "+r.titleFontSize+" "+r.titleFontFace,G=l.autoSizeText(e,g(r.titleFontSize),a,U,$,P,I);C=G.fontSize;var q=g(r.titleMaxHeight,C);T=I*C,U=l.swapFontSize(C,U);var V=l.getLines(a,e,$,U),X=Math.max.apply(void 0,V.map(function(e){return e.width})),Y=0;s||(Y=S+L+V.length*T+M+_);var J=a.font=r.subtitleFontStyle+" "+r.subtitleFontWeight+" "+r.subtitleFontSize+" "+r.subtitleFontFace;D=l.autoSizeText(t,g(r.subtitleFontSize),a,J,j,B,R,G.scale).fontSize;var K=g(r.subtitleMaxHeight,D);F=R*D,J=l.swapFontSize(D,J);var Q,Z=l.getLines(a,t,j,J),ee=Math.max.apply(void 0,Z.map(function(e){return e.width}));Q=d?0:s?Z.length*F:x+W+Z.length*F+N+y;var te,ie=Math.max(X,ee),ne=f+w+ie+k+m,oe=u+v+(te=s&&d?0:s?Q:d?Y:A+Y+E+H+Q+z)+b+p,re=w+ie+k,ae=v+te+b,se=0;switch(h){case"left":se=0;break;case"center":se=(i-ne)/2;break;case"right":se=i-ne}var le=0;switch(c){case"top":le=0;break;case"center":le=(n-oe)/2;break;case"bottom":le=n-oe}for(var de=le+u,he=se+f,ce=he+w,ue=de+v,pe=[],ge=0,fe=V.length;ge<fe;ge++)pe[ge]=0;var me=[];for(ge=0,fe=Z.length;ge<fe;ge++)me[ge]=0;switch(h){case"center":for(ge=0,fe=Math.max(Z.length,V.length);ge<fe;ge++){var ve=V[ge];ve&&(pe[ge]=(ie-ve.width)/2);var be=Z[ge];be&&(me[ge]=(ie-be.width)/2)}break;case"right":for(ge=0,fe=V.length;ge<fe;ge++)pe[ge]=ie-V[ge].width;for(ge=0,fe=Z.length;ge<fe;ge++)me[ge]=ie-Z[ge].width}var we=[];for(ge=0,fe=pe.length;ge<fe;ge++)we[ge]=ce+pe[ge];var ke=Math.min.apply(void 0,we),Se=ue+A+L,_e=0,xe={"top-bottom-rule":{base:-10,max:10},"middle-rule":{base:0,max:10},"solid-box":{base:-20,max:10},"border-box":{base:-20,max:10},"color-band":{base:-20,max:10}};if(r.titleTreatment&&xe[r.titleTreatment]){var ye=xe[r.titleTreatment],Ce=ye.base,Te=ye.max;r.titlePaddingShiftRatio>.5?_e=Ce+Te*((r.titlePaddingShiftRatio-.5)/.5):r.titlePaddingShiftRatio<.5?_e=Ce+Te*(0-(.5-r.titlePaddingShiftRatio)/.5):r.titlePaddingShiftRatio&&(_e=0)}var Ie=[];for(ge=0,fe=me.length;ge<fe;ge++)Ie[ge]=ce+me[ge];var Pe=Math.min.apply(void 0,Ie);return{outerBoxTop:le,outerBoxLeft:se,outerBoxWidth:ne,outerBoxHeight:oe,boxTop:de,boxLeft:he,boxWidth:re,boxHeight:ae,innerTop:ue,innerLeft:ce,innerWidth:ie,innerHeight:te,titleFontSize:C,titleTextOffset:_e,titleTop:Se,titleLeft:ke,titleLefts:we,titleWidth:X,titleHeight:Y,titleMaxWidth:$,titleMaxHeight:q,subtitleFontSize:D,subtitleTop:ue+(s?0:A+L+Y+M+E+H+W),subtitleLeft:Pe,subtitleLefts:Ie,subtitleWidth:ee,subtitleHeight:Q,subtitleMaxWidth:j,subtitleMaxHeight:K}},drawGradientOverlay:function(e,t,i,n,o){var r,a=this.ctx,s=n.y||"center",l=s.charAt(0).toUpperCase()+s.slice(1),d=0,h=0,c=0,u=parseInt(o["gradientAngleAligned"+l]),p=o.gradientStops[s];if(a.save(),p){var f;if(o.gradientFull)f=0,0,90==u&&(d=t),a.rect(0,0,t,i),r=a.createLinearGradient(0,c,d,h);else{f=g(o["gradientTopAligned"+l]||"0%",e.boxHeight);var m=g(o["gradientBottomAligned"+l]||"0%",e.boxHeight);0!==u&&-270!==u||(c=e.boxTop,h=e.boxTop+e.boxHeight),c+=f,h-=m,a.rect(0,c,t,h-c),r=a.createLinearGradient(d,h,0,c)}if(p){for(var v=0,b=p.length;v<b;v++){var w=p[v];r.addColorStop(w.percent,w.color)}a.fillStyle=r,a.fill()}a.restore()}else if(o.titleHeaderBackground){g(o.titleHeaderMarginLeft,t),g(o.titleHeaderMarginRight,t),g(o.titleHeaderMarginTop),g(o.titleHeaderMarginBottom),g(o.titleHeaderPaddingLeft,t),g(o.titleHeaderPaddingRight,t),g(o.titleHeaderPaddingTop),g(o.titleHeaderPaddingBottom);var k=e.boxLeft,S=e.boxTop,_=e.boxWidth,x=e.boxHeight;if("wesley"==o.name&&(k=0,_=t),a.fillStyle=o.titleHeaderBackground,a.fillRect(k,S,_,x),o.titleHeaderBorderWidth&&o.titleHeaderBorderColor){a.fillStyle=o.titleHeaderBorderColor;var y=g(o.titleHeaderBorderWidth);a.fillRect(k,S,_,y),a.fillRect(k,S+x-y,_,y),a.fillRect(k,S+y,y,x-2*y),a.fillRect(k+_-y,S+y,y,x-2*y)}}},drawTitleAndSubtitle:function(e,t,i,n,o,s,d){n.y,n.x;var h,c=!e.replace(/\s/g,"").length,u=!t.replace(/\s/g,"").length,p=this.ctx,f=[];if(!d.titleTextShadow0X&&d.titleTextShadowX)f=[{x:g(d.titleTextShadowX,i.titleFontSize),y:g(d.titleTextShadowY,i.titleFontSize),blur:g(d.titleTextShadowBlur,i.titleFontSize)||0,color:d.titleTextShadowColor}];else for(h=0;d["titleTextShadow"+h+"X"];)f.push({x:g(d["titleTextShadow"+h+"X"]||0,i.titleFontSize),y:g(d["titleTextShadow"+h+"Y"]||0,i.titleFontSize),blur:g(d["titleTextShadow"+h+"Blur"]||0,i.titleFontSize),color:d["titleTextShadow"+h+"Color"]||"transparent"}),h++;var m=[];if(!d.subtitleTextShadow0X&&d.subtitleTextShadowX)m=[{x:g(d.subtitleTextShadowX,i.subtitleFont),y:g(d.subtitleTextShadowY,i.subtitleFont),blur:g(d.subtitleTextShadowBlur,i.subtitleFont)||0,color:d.subtitleTextShadowColor}];else for(h=0;d["subtitleTextShadow"+h+"X"];)m.push({x:g(d["subtitleTextShadow"+h+"X"]||0,i.subtitleFont),y:g(d["subtitleTextShadow"+h+"Y"]||0,i.subtitleFont),blur:g(d["subtitleTextShadow"+h+"Blur"]||0,i.subtitleFont),color:d["subtitleTextShadow"+h+"Color"]||"transparent"}),h++;"nightcap"==d.name&&u?p.textBaseline="hanging":"wesley"==d.name?p.textBaseline="hanging":"tereza"==d.name&&u?p.textBaseline="hanging":"whimsy"==d.name&&u?p.textBaseline="hanging":"crisp"!=d.name||c||u?(d.name,p.textBaseline="top"):p.textBaseline="hanging";g(d.titleHeaderPaddingLeft,o),g(d.titleHeaderPaddingRight,o);var v=p.font=d.titleFontStyle+" "+d.titleFontWeight+" "+i.titleFontSize+"px "+d.titleFontFace,b=p.font=d.subtitleFontStyle+" "+d.subtitleFontWeight+" "+i.subtitleFontSize+"px "+d.subtitleFontFace;return a.all([r.fontCanvas(this.canvas,this.canvas.width,this.canvas.height,v),r.fontCanvas(this.canvas,this.canvas.width,this.canvas.height,b)]).then(function(){var n,o,r,a,s,c,u=g(d.titleLineHeight,i.titleFontSize),b=l.getLines(p,e,i.titleMaxWidth,v),w=i.titleLefts;if(d.titleBorderTopColor&&(a=g(d.titleBorderTopWidth),s=i.titleLeft,c=i.innerTop,p.fillStyle=d.titleBorderTopColor,p.fillRect(s,c,i.titleWidth,a)),d.titleBorderBottomColor&&(a=g(d.titleBorderBottomWidth),s=i.titleLeft,c=i.innerTop+g(d.titlePaddingTop)+i.titleHeight+g(d.titlePaddingBottom),p.fillStyle=d.titleBorderBottomColor,p.fillRect(s,c,i.titleWidth,a)),p.fillStyle=d.titleFontColor,f.length)for(h=0,k=f.length;h<k;h++)for(o=f[h],p.shadowOffsetX=o.x,p.shadowOffsetY=o.y,p.shadowBlur=o.blur,p.shadowColor=o.color,r=0,S=b.length;r<S;r++)n=b[r].text,p.fillStyle=k-h==1?d.titleFontColor:d.titleHeaderBackground||"transparent",p.fillText(n,w[r],i.titleTop+r*u+i.titleTextOffset);else for(p.shadowColor="transparent",h=0,k=b.length;h<k;h++)n=b[h].text,p.fillText(n,w[h],i.titleTop+h*u+i.titleTextOffset);p.fillStyle=d.subtitleFontColor;var k,S,_=p.font=d.subtitleFontStyle+" "+d.subtitleFontWeight+" "+i.subtitleFontSize+"px "+d.subtitleFontFace,x=g(d.subtitleLineHeight,i.subtitleFontSize),y=l.getLines(p,t,i.subtitleMaxWidth,_),C=i.subtitleLefts;if(d.subtitleBorderTopColor){var T=g(d.subtitleBorderTopWidth);p.fillStyle=d.subtitleBorderTopColor,p.fillRect(i.subtitleLeft,i.subtitleTop+i.subtitleHeight-T,i.subtitleWidth,T)}if(d.subtitleBorderBottomColor){var I=g(d.subtitleBorderBottomWidth);p.fillStyle=d.subtitleBorderBottomColor,p.fillRect(i.subtitleLeft,i.subtitleTop+i.subtitleHeight-I,i.subtitleWidth,I)}if("crisp"!=d.name&&"wesley"!=d.name||(p.textBaseline="top"),m.length)for(h=0,k=m.length;h<k;h++)for(o=m[h],p.shadowOffsetX=o.x,p.shadowOffsetY=o.y,p.shadowBlur=o.blur,p.shadowColor=o.color,r=0,S=y.length;r<S;r++)n=y[r].text,p.fillStyle=k-h==1?d.subtitleFontColor:d.titleHeaderBackground||"transparent",p.fillText(n,C[r],i.subtitleTop+r*x);else for(p.shadowColor="transparent",h=0,k=y.length;h<k;h++)n=y[h].text,p.fillText(n,C[h],i.subtitleTop+h*x)})},drawWhimsyGlyph:function(e,t,i,n,o){var r=a.defer(),s=this.ctx,l=(t.y,t.x),d=e.innerLeft,c=e.innerTop+e.innerHeight+16;"center"==l?d=(i-375)/2:"right"==l&&(d=e.innerLeft+e.innerWidth-375);var u=new Image,p=o.whimsyGlyphColor||"#fff";return u.src=h.getAssetAsCSSUrl("whimsy:title",{color:p}).replace(/url\('?/,"").replace(/'?\)$/,""),u.onload=function(){s.drawImage(u,d,c,375,15.3),r.resolve()},r.promise},preloadImage:function(e){var t=a.defer(),i=new Image;return i.src=e,i.onload=function(){t.resolve(i)},i.onerror=function(){t.reject(new Error("Load error in preloadImage:"+e))},t.promise},drawImage:function(e,t,i,n,o){var r=this.ctx;return this.preloadImage(e).then(function(e){var a=e.width,s=e.height,l=a/s,d=i/n;d<=l?a=(s=n)*l:d>l&&(s=(a=i)/l);var h=t.x,c=t.y,u=a*h,p=s*c,g=i*h,f=n*c,m=Math.round(Math.min(g-u,u-g)),v=Math.round(Math.min(f-p,p-f));if(r.drawImage(e,m,v,a,s),"vintage"==o.name){for(var b=r.getImageData(0,0,i,n),w=b.data,k=0,S=w.length;k<S;k+=4){var _=.3*w[k]+.59*w[k+1]+.11*w[k+2];w[k]=_,w[k+1]=_,w[k+2]=_}r.putImageData(b,0,0,0,0,i,n)}})},loadFonts:function(e,r){var s=a.defer(),l=n.getTypekitPreviewFonts(e.name),d=n.getTypekitId(e.name);if(l)p||(window.TypekitPreview.setup({auth_id:"slte",auth_token:"Hik3Pm6JnhEwLxQ0zehfgHbPDnVkFnfVeM5Dl15HLM9Nvtt1z6Zcx%2FCrp%2Ba6IPG%2F4rar1RfQpMk18PnaqVj5UR3JusyvaDexkb4zuYwE6edbEtYVoeY8I0RGujcBA982%2FgXgDjNyLWrd6f8i%2FsbDs1mQLbIorXyId0bC0yU2kZo%3D"}),p=!0),window.TypekitPreview.load(l,{active:function(){s.resolve()},inactive:function(e){s.reject(e)}});else if(d)i.load({typekit:{id:d},active:function(){s.resolve()},inactive:function(e){s.reject(e)}});else{var h=[],c=[],g=[];o.inject().then(function(){return o.getFontRegistry()}).then(function(n){for(var o in e.components)if(e.components.hasOwnProperty(o)){var a,l=e.components[o];for(var d in l)if(l.hasOwnProperty(d)){var p=l[d];p.text&&"object"==typeof p.text&&(a=p.text)&&a.fontFamily&&h.push(a.fontFamily)}(a=l.text)&&a.fontFamily&&h.push(a.fontFamily)}for(var f=n.sparkfonts,m=0,v=h.length;m<v;m++){var b=h[m];for(var w in f)if(f.hasOwnProperty(w)){var k=f[w];k.cssName==b&&c.push(k.typekitSubgroupKitId)}}c=t.uniq(c),g=u.getCustomFontsInTheme(r,e);var S=c.length+g.length,_={},x=0;console.log("[embed generate fonts identified: "+JSON.stringify(c)+"]");var y=function(e){_[e]||(console.log("[embed generate loaded font "+e+"]"),_[e]=!0,x++),x>=S&&s.resolve()};S?(t.each(c,function(e){console.log("[embed generate loading font "+e+"]"),i.load({typekit:{id:e},fontactive:function(){y(e)},active:function(){y(e)},fontinactive:function(t){console.log("[embed generate font error "+e+" "+t+"]"),s.reject(t)},inactive:function(t){console.log("[embed generate load font error "+e+" "+t+"]"),s.reject(t)}})}),t.each(g,function(e){console.log("[embed generate loading brand font "+e.getId()+"]"),e.loadFont().then(function(){y(e.getId())})})):s.resolve()})}return s.promise},parseTheme:function(e){var i,o=(e.name||"").toLowerCase();if(n.usesOwnFonts(e)&&(i=d[o]))return i;i={name:o};var r,a,l=d.crisp,h=e.components.titleSection;if(h){var u,p=h.title,g=h.subtitle,f=h.treatment;if(f){var m=f.type;i.titleTreatment=m;var v={"middle-rule":.75,"border-box":.5,"solid-box":.8,"color-band":.3}[m]||1,b={"border-box":.5}[m]||1;if("border-box"==m||"solid-box"==m||"color-band"==m){i.titleTextShadowX="2px",i.titleTextShadowY="2px",i.titleTextShadowBlur="2px",i.titleTextShadowColor="rgba(0,0,0,0.25)";var w=f.backgroundColor;w&&(w=f.backgroundColor.value,i.titleHeaderBackground="rgba("+w.r+","+w.g+","+w.b+","+v+")");var k=f.borderColor;k&&(k=f.borderColor.value,i.titleHeaderBorderColor="rgba("+k.r+","+k.g+","+k.b+","+b+")")}if("border-box"==m?(l=d.nightcap,i.titleHeaderBorderWidth="2px"):"solid-box"==m?(l=d.nightcap,i.titleHeaderBorderWidth="0px"):"color-band"==m&&(l=d.wesley,i.titleHeaderBorderWidth="0px"),"top-bottom-rule"==m&&(l=d.luca,(r=f.color)&&(a="rgba("+(r=f.color.value).r+","+r.g+","+r.b+","+v+")",i.titleBorderTopColor=a,i.titleBorderBottomColor=a)),"middle-rule"==m&&(l=d.baldwin,(r=f.color)&&(a="rgba("+(r=f.color.value).r+","+r.g+","+r.b+","+v+")",i.titleBorderBottomColor=a,i.titleBorderBottomWidth="3px"),i.titlePaddingBottom="16px"),"whimsy"==m&&(l=d.whimsy,i.name="whimsy",r=f.color)){r=f.color.value;var S=s.rgbToHex(r);i.whimsyGlyphColor=S}"vintage"==m&&(l=d.vintage)}if(p){var _=p.text.fontFamily||"futura-pt";(u=c[_])&&(i.titlePaddingShiftRatio=u.data.title.paddingShiftRatio,i.titleFontSize=u.data.title.fontSize),i.titleFontFace=_,i.titleFontWeight=p.text.fontWeight,i.titleFontStyle=p.text.fontStyle,i.titleTextTransform=p.text.textTransform;var x=p.color.value;i.titleFontColor="rgb("+x.r+","+x.g+","+x.b+")"}if(g){var y=g.text.fontFamily||"futura-pt";(u=c[y])&&(i.subtitlePaddingShiftRatio=u.data.subtitle.paddingShiftRatio,i.subtitleFontSize=u.data.subtitle.fontSize),i.subtitleFontFace=y,i.subtitleFontWeight=g.text.fontWeight,i.subtitleFontStyle=g.text.fontStyle,i.subtitleTextTransform=g.text.textTransform;var C=g.color.value;i.subtitleFontColor="rgb("+C.r+","+C.g+","+C.b+")"}}return t.defaults(i,l)}},{generate:function(){var e=new f;return e.generate.apply(e,arguments)}}}.apply(t,n))||(e.exports=o)},2599:function(e,t,i){var n;void 0===(n=function(){return function(e,t,i){function n(e,t,i){return e.call.apply(e.bind,arguments)}function o(e,t,i){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function r(e,t,i){return(r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:o).apply(null,arguments)}var a=Date.now||function(){return+new Date};function s(e,t){this.K=e,this.w=t||e,this.G=this.w.document}function l(e,i,n){(e=e.G.getElementsByTagName(i)[0])||(e=t.documentElement),e&&e.lastChild&&e.insertBefore(n,e.lastChild)}function d(e,t,i){t=t||[],i=i||[];for(var n=e.className.split(/\s+/),o=0;o<t.length;o+=1){for(var r=!1,a=0;a<n.length;a+=1)if(t[o]===n[a]){r=!0;break}r||n.push(t[o])}for(t=[],o=0;o<n.length;o+=1){for(r=!1,a=0;a<i.length;a+=1)if(n[o]===i[a]){r=!0;break}r||t.push(n[o])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function h(e,t){for(var i=e.className.split(/\s+/),n=0,o=i.length;n<o;n++)if(i[n]==t)return!0;return!1}function c(e){if("string"==typeof e.na)return e.na;var t=e.w.location.protocol;return"about:"==t&&(t=e.K.location.protocol),"https:"==t?"https:":"http:"}function u(e,t){var i=e.createElement("link",{rel:"stylesheet",href:t,media:"all"}),n=!1;i.onload=function(){n||(n=!0)},i.onerror=function(){n||(n=!0)},l(e,"head",i)}function p(t,i,n,o){var r=t.G.getElementsByTagName("head")[0];if(r){var a=t.createElement("script",{src:i}),s=!1;return a.onload=a.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,n&&n(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&r.removeChild(a))},r.appendChild(a),e.setTimeout(function(){s||(s=!0,n&&n(Error("Script load timeout")))},o||5e3),a}return null}function g(e,t){this.Y=e,this.ga=t}function f(e,t,i,n){this.c=null!=e?e:null,this.g=null!=t?t:null,this.D=null!=i?i:null,this.e=null!=n?n:null}s.prototype.createElement=function(e,t,i){if(e=this.G.createElement(e),t)for(var n in t)t.hasOwnProperty(n)&&("style"==n?e.style.cssText=t[n]:e.setAttribute(n,t[n]));return i&&e.appendChild(this.G.createTextNode(i)),e};var m=/^([0-9]+)(?:[\._-]([0-9]+))?(?:[\._-]([0-9]+))?(?:[\._+-]?(.*))?$/;function v(e){var t=null,i=null,n=null,o=null;return(e=m.exec(e))&&(null!==e[1]&&e[1]&&(t=parseInt(e[1],10)),null!==e[2]&&e[2]&&(i=parseInt(e[2],10)),null!==e[3]&&e[3]&&(n=parseInt(e[3],10)),null!==e[4]&&e[4]&&(o=/^[0-9]+$/.test(e[4])?parseInt(e[4],10):e[4])),new f(t,i,n,o)}function b(e,t,i,n,o,r,a,s){this.N=e,this.k=s}function w(e){this.a=e}f.prototype.compare=function(e){return this.c>e.c||this.c===e.c&&this.g>e.g||this.c===e.c&&this.g===e.g&&this.D>e.D?1:this.c<e.c||this.c===e.c&&this.g<e.g||this.c===e.c&&this.g===e.g&&this.D<e.D?-1:0},f.prototype.toString=function(){return[this.c,this.g||"",this.D||"",this.e||""].join("")},b.prototype.getName=function(){return this.N};var k=new b("Unknown",0,0,0,0,0,0,new g(!1,!1));function S(e){var t=y(e.a,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,1);return""!=t?(/BB\d{2}/.test(t)&&(t="BlackBerry"),t):""!=(e=y(e.a,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS|PlayStation|CrKey)/,1))?("Mac_PowerPC"==e?e="Macintosh":"PlayStation"==e&&(e="Linux"),e):"Unknown"}function _(e){if((t=y(e.a,/(OS X|Windows NT|Android) ([^;)]+)/,2))||(t=y(e.a,/Windows Phone( OS)? ([^;)]+)/,2))||(t=y(e.a,/(iPhone )?OS ([\d_]+)/,2)))return t;if(t=y(e.a,/(?:Linux|CrOS|CrKey) ([^;)]+)/,1))for(var t=t.split(/\s/),i=0;i<t.length;i+=1)if(/^[\d\._]+$/.test(t[i]))return t[i];return(e=y(e.a,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))?e:"Unknown"}function x(e){var t=S(e),i=v(_(e)),n=v(y(e.a,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1)),o="Unknown",r=new f;r="Unknown";return/OPR\/[\d.]+/.test(e.a)?o="Opera":-1!=e.a.indexOf("Chrome")||-1!=e.a.indexOf("CrMo")||-1!=e.a.indexOf("CriOS")?o="Chrome":/Silk\/\d/.test(e.a)?o="Silk":"BlackBerry"==t||"Android"==t?o="BuiltinBrowser":-1!=e.a.indexOf("PhantomJS")?o="PhantomJS":-1!=e.a.indexOf("Safari")?o="Safari":-1!=e.a.indexOf("AdobeAIR")?o="AdobeAIR":-1!=e.a.indexOf("PlayStation")&&(o="BuiltinBrowser"),"BuiltinBrowser"==o?r="Unknown":"Silk"==o?r=y(e.a,/Silk\/([\d\._]+)/,1):"Chrome"==o?r=y(e.a,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2):-1!=e.a.indexOf("Version/")?r=y(e.a,/Version\/([\d\.\w]+)/,1):"AdobeAIR"==o?r=y(e.a,/AdobeAIR\/([\d\.]+)/,1):"Opera"==o?r=y(e.a,/OPR\/([\d.]+)/,1):"PhantomJS"==o&&(r=y(e.a,/PhantomJS\/([\d.]+)/,1)),r=v(r),new b(o,0,0,0,0,0,0,new g("AdobeAIR"==o?2<r.c||2==r.c&&5<=r.g:"BlackBerry"==t?10<=i.c:"Android"==t?2<i.c||2==i.c&&1<i.g:526<=n.c||525<=n.c&&13<=n.g,536>n.c||536==n.c&&11>n.g))}function y(e,t,i){return(e=e.match(t))&&e[i]?e[i]:""}function C(e){this.ma=e||"-"}function T(e,t){this.N=e,this.Z=4,this.O="n";var i=(t||"n4").match(/^([nio])([1-9])$/i);i&&(this.O=i[1],this.Z=parseInt(i[2],10))}function I(e){return e.O+e.Z}function P(e){var t=4,i="n",n=null;return e&&((n=e.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=e.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?t=7:/[1-9]00/.test(n[1])&&(t=parseInt(n[1].substr(0,1),10)))),i+t}function D(e){if(e.F){var t=h(e.q,e.h.e(e.j,"active")),i=[],n=[e.h.e(e.j,"loading")];t||i.push(e.h.e(e.j,"inactive")),d(e.q,i,n)}F(e,"inactive")}function F(e,t,i){e.ha&&e.Q[t]&&(i?e.Q[t](i.getName(),I(i)):e.Q[t]())}function R(e,t){this.d=e,this.I=t,this.o=this.d.createElement("span",{"aria-hidden":"true"},this.I)}function B(e,t){var i,n=e.o;i=[];for(var o=t.N.split(/,\s*/),r=0;r<o.length;r++){var a=o[r].replace(/['"]/g,"");-1==a.indexOf(" ")?i.push(a):i.push("'"+a+"'")}i=i.join(","),o="normal","o"===t.O?o="oblique":"i"===t.O&&(o="italic"),n.style.cssText="display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+i+";font-style:"+o+";font-weight:"+t.Z+"00;"}function A(e){l(e.d,"body",e.o)}function L(e,t,i,n,o,r,a,s){this.$=e,this.ka=t,this.d=i,this.m=n,this.k=o,this.I=s||"BESbswy",this.v={},this.X=r||3e3,this.ca=a||null,this.H=this.u=this.t=null,this.t=new R(this.d,this.I),this.u=new R(this.d,this.I),this.H=new R(this.d,this.I),B(this.t,new T("serif",I(this.m))),B(this.u,new T("sans-serif",I(this.m))),B(this.H,new T("monospace",I(this.m))),A(this.t),A(this.u),A(this.H),this.v.serif=this.t.o.offsetWidth,this.v["sans-serif"]=this.u.o.offsetWidth,this.v.monospace=this.H.o.offsetWidth}w.prototype.parse=function(){var e;if(-1!=this.a.indexOf("MSIE")||-1!=this.a.indexOf("Trident/")){e=S(this);var t=v(_(this)),i=null,n=y(this.a,/Trident\/([\d\w\.]+)/,1);i=-1!=this.a.indexOf("MSIE")?v(y(this.a,/MSIE ([\d\w\.]+)/,1)):v(y(this.a,/rv:([\d\w\.]+)/,1));""!=n&&v(n),e=new b("MSIE",0,0,0,0,0,0,new g("Windows"==e&&6<=i.c||"Windows Phone"==e&&8<=t.c,!1))}else if(-1!=this.a.indexOf("Opera"))e:if(e=v(y(this.a,/Presto\/([\d\w\.]+)/,1)),v(_(this)),null!==e.c||v(y(this.a,/rv:([^\)]+)/,1)),-1!=this.a.indexOf("Opera Mini/"))e=v(y(this.a,/Opera Mini\/([\d\.]+)/,1)),e=new b("OperaMini",0,0,0,S(this),0,0,new g(!1,!1));else{if(-1!=this.a.indexOf("Version/")&&null!==(e=v(y(this.a,/Version\/([\d\.]+)/,1))).c){e=new b("Opera",0,0,0,S(this),0,0,new g(10<=e.c,!1));break e}e=null!==(e=v(y(this.a,/Opera[\/ ]([\d\.]+)/,1))).c?new b("Opera",0,0,0,S(this),0,0,new g(10<=e.c,!1)):new b("Opera",0,0,0,S(this),0,0,new g(!1,!1))}else/OPR\/[\d.]+/.test(this.a)?e=x(this):/AppleWeb(K|k)it/.test(this.a)?e=x(this):-1!=this.a.indexOf("Gecko")?(e="Unknown",t=new f,v(_(this)),t=!1,-1!=this.a.indexOf("Firefox")?(e="Firefox",t=3<=(t=v(y(this.a,/Firefox\/([\d\w\.]+)/,1))).c&&5<=t.g):-1!=this.a.indexOf("Mozilla")&&(e="Mozilla"),i=v(y(this.a,/rv:([^\)]+)/,1)),t||(t=1<i.c||1==i.c&&9<i.g||1==i.c&&9==i.g&&2<=i.D),e=new b(e,0,0,0,S(this),0,0,new g(t,!1))):e=k;return e},C.prototype.e=function(e){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.ma)},T.prototype.getName=function(){return this.N},R.prototype.remove=function(){var e=this.o;e.parentNode&&e.parentNode.removeChild(e)};var M={sa:"serif",ra:"sans-serif",qa:"monospace"};function E(e,t,i){for(var n in M)if(M.hasOwnProperty(n)&&t===e.v[M[n]]&&i===e.v[M[n]])return!0;return!1}function H(e){var t=e.t.o.offsetWidth,i=e.u.o.offsetWidth;t===e.v.serif&&i===e.v["sans-serif"]||e.k.ga&&E(e,t,i)?a()-e.oa>=e.X?e.k.ga&&E(e,t,i)&&(null===e.ca||e.ca.hasOwnProperty(e.m.getName()))?W(e,e.$):W(e,e.ka):function(e){setTimeout(r(function(){H(this)},e),50)}(e):W(e,e.$)}function W(e,t){e.t.remove(),e.u.remove(),e.H.remove(),t(e.m)}function N(e,t,i,n){this.d=t,this.A=i,this.S=0,this.ea=this.ba=!1,this.X=n,this.k=e.k}function z(e,t,i,n,o){if(i=i||{},0===t.length&&o)D(e.A);else for(e.S+=t.length,o&&(e.ba=o),o=0;o<t.length;o++){var a=t[o],s=i[a.getName()],l=e.A,h=a;l.F&&d(l.q,[l.h.e(l.j,h.getName(),I(h).toString(),"loading")]),F(l,"fontloading",h),l=null,(l=new L(r(e.ia,e),r(e.ja,e),e.d,a,e.k,e.X,n,s)).start()}}function O(e){0==--e.S&&e.ba&&(e.ea?((e=e.A).F&&d(e.q,[e.h.e(e.j,"active")],[e.h.e(e.j,"loading"),e.h.e(e.j,"inactive")]),F(e,"active")):D(e.A))}function $(e){this.K=e,this.B=new function(){this.C={}},this.pa=new w(e.navigator.userAgent),this.a=this.pa.parse(),this.U=this.V=0,this.R=this.T=!0}function j(e,t,i){this.P=e||t+U,this.s=[],this.W=[],this.fa=i||""}L.prototype.start=function(){this.oa=a(),B(this.t,new T(this.m.getName()+",serif",I(this.m))),B(this.u,new T(this.m.getName()+",sans-serif",I(this.m))),H(this)},N.prototype.ia=function(e){var t=this.A;t.F&&d(t.q,[t.h.e(t.j,e.getName(),I(e).toString(),"active")],[t.h.e(t.j,e.getName(),I(e).toString(),"loading"),t.h.e(t.j,e.getName(),I(e).toString(),"inactive")]),F(t,"fontactive",e),this.ea=!0,O(this)},N.prototype.ja=function(e){var t=this.A;if(t.F){var i=h(t.q,t.h.e(t.j,e.getName(),I(e).toString(),"active")),n=[],o=[t.h.e(t.j,e.getName(),I(e).toString(),"loading")];i||n.push(t.h.e(t.j,e.getName(),I(e).toString(),"inactive")),d(t.q,n,o)}F(t,"fontinactive",e),O(this)},$.prototype.load=function(e){this.d=new s(this.K,e.context||this.K),this.T=!1!==e.events,this.R=!1!==e.classes;var t=new function(e,t){this.d=e,this.q=e.w.document.documentElement,this.Q=t,this.j="wf",this.h=new C("-"),this.ha=!1!==t.events,this.F=!1!==t.classes}(this.d,e),i=[],n=e.timeout;t.F&&d(t.q,[t.h.e(t.j,"loading")]),F(t,"loading");i=this.B;var o,a=this.d,l=[];for(o in e)if(e.hasOwnProperty(o)){var h=i.C[o];h&&l.push(h(e[o],a))}for(i=l,this.U=this.V=i.length,e=new N(this.a,this.d,t,n),n=0,o=i.length;n<o;n++)(a=i[n]).L(this.a,r(this.la,this,a,t,e))},$.prototype.la=function(e,t,i,n){var o=this;n?e.load(function(e,t,n){!function(e,t,i,n,o){var r=0==--e.V;(e.R||e.T)&&setTimeout(function(){z(t,i,n||null,o||null,r)},0)}(o,i,e,t,n)}):(e=0==--this.V,this.U--,e&&0==this.U?D(t):(this.R||this.T)&&z(i,[],{},null,e))};var U="//fonts.googleapis.com/css";function G(e){this.s=e,this.da=[],this.M={}}j.prototype.e=function(){if(0==this.s.length)throw Error("No fonts to load!");if(-1!=this.P.indexOf("kit="))return this.P;for(var e=this.s.length,t=[],i=0;i<e;i++)t.push(this.s[i].replace(/ /g,"+"));return e=this.P+"?family="+t.join("%7C"),0<this.W.length&&(e+="&subset="+this.W.join(",")),0<this.fa.length&&(e+="&text="+encodeURIComponent(this.fa)),e};var q={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},V={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},X={i:"i",italic:"i",n:"n",normal:"n"},Y=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function J(e,t){this.a=new w(navigator.userAgent).parse(),this.d=e,this.f=t}G.prototype.parse=function(){for(var e=this.s.length,t=0;t<e;t++){var i=this.s[t].split(":"),n=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var r;if(r=[],a=i[1])for(var a,s=(a=a.split(",")).length,l=0;l<s;l++){var d;if((d=a[l]).match(/^[\w-]+$/)){var h=void 0;if(null==(d=Y.exec(d.toLowerCase())))h="";else{if(h=void 0,null==(h=d[1])||""==h)h="4";else{var c=V[h];h=c||(isNaN(h)?"4":h.substr(0,1))}h=[null==(d=d[2])||""==d?"n":X[d],h].join("")}d=h}else d="";d&&r.push(d)}0<r.length&&(o=r),3==i.length&&(r=[],0<(i=(i=i[2])?i.split(","):r).length&&(i=q[i[0]])&&(this.M[n]=i))}for(this.M[n]||(i=q[n])&&(this.M[n]=i),i=0;i<o.length;i+=1)this.da.push(new T(n,o[i]))}};var K={Arimo:!0,Cousine:!0,Tinos:!0};function Q(e,t){this.d=e,this.f=t,this.p=[]}function Z(e,t){this.d=e,this.f=t,this.p=[]}function ee(e,t){this.d=e,this.f=t,this.p=[]}function te(e,t){this.d=e,this.f=t}J.prototype.L=function(e,t){t(e.k.Y)},J.prototype.load=function(e){var t=this.d;"MSIE"==this.a.getName()&&1!=this.f.blocking?function(e,t){!function i(){e.G.body?t():setTimeout(i,0)}()}(t,r(this.aa,this,e)):this.aa(e)},J.prototype.aa=function(e){for(var t=this.d,i=new j(this.f.api,c(t),this.f.text),n=this.f.families,o=n.length,r=0;r<o;r++){var a=n[r].split(":");3==a.length&&i.W.push(a.pop());var s="";2==a.length&&""!=a[1]&&(s=":"),i.s.push(a.join(s))}(n=new G(n)).parse(),u(t,i.e()),e(n.da,n.M,K)},Q.prototype.J=function(e){var t=this.d;return c(this.d)+(this.f.api||"//f.fontdeck.com/s/css/js/")+(t.w.location.hostname||t.K.location.hostname)+"/"+e+".js"},Q.prototype.L=function(e,t){var i=this.f.id,n=this.d.w,o=this;i?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[i]=function(e,i){for(var n=0,r=i.fonts.length;n<r;++n){var a=i.fonts[n];o.p.push(new T(a.name,P("font-weight:"+a.weight+";font-style:"+a.style)))}t(e)},p(this.d,this.J(i),function(e){e&&t(!1)})):t(!1)},Q.prototype.load=function(e){e(this.p)},Z.prototype.J=function(e){var t=c(this.d);return(this.f.api||t+"//use.typekit.net")+"/"+e+".js"},Z.prototype.L=function(e,t){var i=this.f.id,n=this.d.w,o=this;i?p(this.d,this.J(i),function(e){if(e)t(!1);else{if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var i=0;i<e.length;i+=2)for(var r=e[i],a=e[i+1],s=0;s<a.length;s++)o.p.push(new T(r,a[s]));try{n.Typekit.load({events:!1,classes:!1})}catch(e){}}t(!0)}},2e3):t(!1)},Z.prototype.load=function(e){e(this.p)},ee.prototype.L=function(e,t){var i=this,n=i.f.projectId,o=i.f.version;if(n){var r=i.d.w;p(this.d,i.J(n,o),function(o){if(o)t(!1);else{if(r["__mti_fntLst"+n]&&(o=r["__mti_fntLst"+n]()))for(var a=0;a<o.length;a++)i.p.push(new T(o[a].fontfamily));t(e.k.Y)}}).id="__MonotypeAPIScript__"+n}else t(!1)},ee.prototype.J=function(e,t){return c(this.d)+"//"+(this.f.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"")+"/"+e+".js"+(t?"?v="+t:"")},ee.prototype.load=function(e){e(this.p)},te.prototype.load=function(e){var t,i,n=this.f.urls||[],o=this.f.families||[],r=this.f.testStrings||{};for(t=0,i=n.length;t<i;t++)u(this.d,n[t]);for(n=[],t=0,i=o.length;t<i;t++){var a=o[t].split(":");if(a[1])for(var s=a[1].split(","),l=0;l<s.length;l+=1)n.push(new T(a[0],s[l]));else n.push(new T(a[0]))}e(n,r)},te.prototype.L=function(e,t){return t(e.k.Y)};var ie=new $(this);return ie.B.C.custom=function(e,t){return new te(t,e)},ie.B.C.fontdeck=function(e,t){return new Q(t,e)},ie.B.C.monotype=function(e,t){return new ee(t,e)},ie.B.C.typekit=function(e,t){return new Z(t,e)},ie.B.C.google=function(e,t){return new J(t,e)},this.WebFont||(this.WebFont={},this.WebFont.load=r(ie.load,ie),this.WebFontConfig&&ie.load(this.WebFontConfig)),this.WebFont}(window,document)}.apply(t,[]))||(e.exports=n)},2600:function(e,t,i){(function(e){window.lucaThemeMap={Baldwin:{version:"1.1",name:"Baldwin",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},titleSection:{treatment:{type:"middle-rule",color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},title:{text:{fontFamily:"league-gothic",fontWeight:"400",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Bold",fontSubgroup:"PT Sans Narrow",paddingShiftRatio:0,role:"none",fontScale:1.02},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"league-gothic",fontWeight:"300",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Bold",fontSubgroup:"PT Sans Narrow",paddingShiftRatio:0,role:"none",fontScale:1.45},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}}},heading:{treatment:{type:"none"},text:{fontFamily:"league-gothic",fontWeight:"400",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Bold",fontSubgroup:"PT Sans Narrow",paddingShiftRatio:0,role:"none",fontScale:1.28},color:{mode:"RGB",value:{r:68,g:68,b:68},alpha:1,assetId:""}},subheading:{text:{fontFamily:"league-gothic",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Bold",fontSubgroup:"PT Sans Narrow",paddingShiftRatio:0,role:"none",fontScale:1.38},color:{mode:"RGB",value:{r:68,g:68,b:68},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0},color:{mode:"RGB",value:{r:68,g:68,b:68},alpha:1,assetId:""}},unorderedList:{treatment:{type:"circle"},text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0},color:{mode:"RGB",value:{r:68,g:68,b:68},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0},color:{mode:"RGB",value:{r:68,g:68,b:68},alpha:1,assetId:""}},blockquote:{treatment:{type:"color-band",backgroundColor:{mode:"RGB",value:{r:232,g:231,b:231},alpha:1,assetId:""}},text:{fontFamily:"league-gothic",fontWeight:"400",fontStyle:"italic",textTransform:"none",assetId:"",fontFace:"Italic",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,role:"none",fontScale:1.28},color:{mode:"RGB",value:{r:68,g:68,b:68},alpha:1,assetId:""}},inlineImage:{treatment:{type:"none"},text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0},color:{mode:"RGB",value:{r:68,g:68,b:68},alpha:1,assetId:""}},button:{treatment:{type:"rounded-border",borderColor:{mode:"RGB",value:{r:68,g:68,b:68},alpha:1,assetId:""},hoverBorderColor:{mode:"RGB",value:{r:106,g:106,b:106},alpha:1,assetId:""}},text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,fontScale:1.11},color:{mode:"RGB",value:{r:68,g:68,b:68},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:106,g:106,b:106},alpha:1,assetId:""}},inlineLink:{treatment:{type:"underline"},color:{mode:"RGB",value:{r:102,g:132,b:172},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:64,g:88,b:121},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0},color:{mode:"RGB",value:{r:68,g:68,b:68},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"league-gothic",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Bold",fontSubgroup:"PT Sans Narrow",paddingShiftRatio:0,role:"none",fontScale:1.44},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:0,g:0,b:0},alpha:.5,assetId:""}},windowImage:{text:{fontFamily:"league-gothic",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Bold",fontSubgroup:"PT Sans Narrow",paddingShiftRatio:0,role:"none",fontScale:1.44},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:0,g:0,b:0},alpha:.5,assetId:""}},photoGrid:{treatment:{type:"none"},text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0},color:{mode:"RGB",value:{r:68,g:68,b:68},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.9,assetId:""}}},font_includes:[{method:"script",src:"baldwin-fonts.gz.js",path:"themes"}]},Bruce:{version:"1.1",name:"Bruce",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:239,g:239,b:239},alpha:1,assetId:""}},titleSection:{treatment:{type:"solid-box",backgroundColor:{mode:"RGB",value:{r:146,g:2,b:36},alpha:1,assetId:""}},title:{text:{fontFamily:"museo-slab",fontWeight:"700",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"700",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:.7},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:.94},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}}},heading:{treatment:{type:"none"},text:{fontFamily:"museo-slab",fontWeight:"700",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"700",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:.87},color:{mode:"RGB",value:{r:146,g:2,b:36},alpha:1,assetId:""}},subheading:{text:{fontFamily:"museo-slab",fontWeight:"700",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"700",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:.9,role:"none"},color:{mode:"RGB",value:{r:146,g:2,b:36},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:.94},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},unorderedList:{treatment:{type:"circle"},text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:.94},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:.94},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},blockquote:{treatment:{type:"color-band",backgroundColor:{mode:"RGB",value:{r:146,g:2,b:36},alpha:1,assetId:""}},text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:.85},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},inlineImage:{treatment:{type:"caption-background",backgroundColor:{mode:"RGB",value:{r:146,g:2,b:36},alpha:1,assetId:""}},text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0,lineHeightScale:.83},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},button:{treatment:{type:"square-border",borderColor:{mode:"RGB",value:{r:146,g:2,b:36},alpha:1,assetId:""},hoverBorderColor:{mode:"RGB",value:{r:221,g:3,b:55},alpha:1,assetId:""}},text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:1.04},color:{mode:"RGB",value:{r:146,g:2,b:36},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:221,g:3,b:55},alpha:1,assetId:""}},inlineLink:{treatment:{type:"underline"},color:{mode:"RGB",value:{r:81,g:115,b:180},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:31,g:57,b:107},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"caption-background",backgroundColor:{mode:"RGB",value:{r:146,g:2,b:36},alpha:1,assetId:""}},text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:1.16},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:.88},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:146,g:2,b:36},alpha:.8,assetId:""}},windowImage:{text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:.88,role:"none"},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:146,g:2,b:36},alpha:.8,assetId:""}},photoGrid:{treatment:{type:"caption-background",backgroundColor:{mode:"RGB",value:{r:146,g:2,b:36},alpha:1,assetId:""}},text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:1.17},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:239,g:239,b:239},alpha:.9,assetId:""}}}},Chic:{version:"1.1",name:"Chic",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:229,g:229,b:231},alpha:1,assetId:""}},titleSection:{treatment:{type:"gradient-overlay"},title:{text:{fontFamily:"ltc-bodoni-175",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"LTC Bodoni 175",paddingShiftRatio:0,role:"none",fontScale:1.19,lineHeightScale:.77},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"ltc-bodoni-175",fontWeight:"400",fontStyle:"italic",textTransform:"none",assetId:"",fontFace:"Italic",fontSubgroup:"LTC Bodoni 175",paddingShiftRatio:0,role:"none",fontScale:1.21,lineHeightScale:.88},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}}},heading:{treatment:{type:"none"},text:{fontFamily:"ltc-bodoni-175",fontWeight:"400",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Regular",fontSubgroup:"LTC Bodoni 175",paddingShiftRatio:0,role:"none",fontScale:.8},color:{mode:"RGB",value:{r:65,g:73,b:95},alpha:1,assetId:""}},subheading:{text:{fontFamily:"ltc-bodoni-175",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"LTC Bodoni 175",paddingShiftRatio:0,fontScale:1,role:"none"},color:{mode:"RGB",value:{r:65,g:73,b:95},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,fontScale:.96},color:{mode:"RGB",value:{r:51,g:51,b:51},alpha:1,assetId:""}},unorderedList:{treatment:{type:"circle"},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,fontScale:.96},color:{mode:"RGB",value:{r:51,g:51,b:51},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,fontScale:.96},color:{mode:"RGB",value:{r:51,g:51,b:51},alpha:1,assetId:""}},blockquote:{treatment:{type:"top-bottom-rule",color:{mode:"RGB",value:{r:217,g:217,b:217},alpha:1,assetId:""}},text:{fontFamily:"ltc-bodoni-175",fontWeight:"400",fontStyle:"italic",textTransform:"none",assetId:"",fontFace:"Italic",fontSubgroup:"LTC Bodoni 175",paddingShiftRatio:0,role:"none",lineHeightScale:1.05,fontScale:1.01},color:{mode:"RGB",value:{r:65,g:73,b:95},alpha:1,assetId:""}},inlineImage:{treatment:{type:"none"},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0},color:{mode:"RGB",value:{r:51,g:51,b:51},alpha:1,assetId:""}},button:{treatment:{type:"triangle",color:{mode:"RGB",value:{r:65,g:73,b:95},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:96,g:108,b:140},alpha:1,assetId:""}},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,fontScale:1.1,role:"none"},color:{mode:"RGB",value:{r:65,g:73,b:95},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:96,g:108,b:140},alpha:1,assetId:""}},inlineLink:{treatment:{type:"underline"},color:{mode:"RGB",value:{r:106,g:118,b:150},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:106,g:118,b:150},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0},color:{mode:"RGB",value:{r:51,g:51,b:51},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"ltc-bodoni-175",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"LTC Bodoni 175",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:65,g:72,b:96},alpha:.8,assetId:""}},windowImage:{text:{fontFamily:"ltc-bodoni-175",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"LTC Bodoni 175",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:65,g:72,b:96},alpha:.8,assetId:""}},photoGrid:{treatment:{type:"none"},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0},color:{mode:"RGB",value:{r:51,g:51,b:51},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:229,g:229,b:231},alpha:.9,assetId:""}}}},Crisp:{version:"1.1",name:"Crisp",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},titleSection:{treatment:{type:"gradient-overlay"},title:{text:{fontFamily:"proxima-nova",fontWeight:"100",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Thin",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,fontScale:1.2,lineHeightScale:.91,role:"none"},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"proxima-nova",fontWeight:"300",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Light",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,fontScale:1.1,lineHeightScale:1.07},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}}},heading:{treatment:{type:"none"},text:{fontFamily:"proxima-nova",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,fontScale:1.2,lineHeightScale:.92,role:"none"},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},subheading:{text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,fontScale:1},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"proxima-nova",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},unorderedList:{treatment:{type:"circle"},text:{fontFamily:"proxima-nova",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"proxima-nova",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},blockquote:{treatment:{type:"left-rule",color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},text:{fontFamily:"proxima-nova-condensed",fontWeight:"300",fontStyle:"italic",textTransform:"none",assetId:"",fontFace:"Light Italic",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,role:"none",fontScale:1.42,lineHeightScale:.83},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},inlineImage:{treatment:{type:"none"},text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},button:{treatment:{type:"rounded-border",borderColor:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""},hoverBorderColor:{mode:"RGB",value:{r:38,g:38,b:38},alpha:1,assetId:""}},text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,fontScale:1.06},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:38,g:38,b:38},alpha:1,assetId:""}},inlineLink:{treatment:{type:"underline"},color:{mode:"RGB",value:{r:82,g:159,b:198},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:31,g:91,b:122},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"proxima-nova",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.8,assetId:""}},windowImage:{text:{fontFamily:"proxima-nova",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.8,assetId:""}},photoGrid:{treatment:{type:"none"},text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,fontScale:1.01},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.9,assetId:""}}},font_includes:[{method:"script",src:"crisp-fonts.gz.js",path:"themes"}]},Luca:{version:"1.1",name:"Luca",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},titleSection:{treatment:{type:"top-bottom-rule",color:{mode:"RGB",value:{r:236,g:98,b:98},alpha:1,assetId:""}},title:{text:{fontFamily:"pt-sans-narrow",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"PT Sans Narrow",paddingShiftRatio:0,fontScale:.78},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"lato",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none",fontScale:1,lineHeightScale:.95},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}}},heading:{treatment:{type:"single-rule",color:{mode:"RGB",value:{r:236,g:98,b:98},alpha:1,assetId:""}},text:{fontFamily:"pt-sans-narrow",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"PT Sans Narrow",paddingShiftRatio:0,fontScale:.89},color:{mode:"RGB",value:{r:80,g:80,b:80},alpha:1,assetId:""}},subheading:{text:{fontFamily:"pt-sans-narrow",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"PT Sans Narrow",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:80,g:80,b:80},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none",lineHeightScale:1,fontScale:1.02},color:{mode:"RGB",value:{r:80,g:80,b:80},alpha:1,assetId:""}},unorderedList:{treatment:{type:"circle"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none",lineHeightScale:1,fontScale:1.02},color:{mode:"RGB",value:{r:80,g:80,b:80},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none",lineHeightScale:1,fontScale:1.02},color:{mode:"RGB",value:{r:80,g:80,b:80},alpha:1,assetId:""}},blockquote:{treatment:{type:"quote",color:{mode:"RGB",value:{r:238,g:103,b:100},alpha:1,assetId:""}},text:{fontFamily:"pt-sans-narrow",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"PT Sans Narrow",paddingShiftRatio:0,role:"none",lineHeightScale:.97},color:{mode:"RGB",value:{r:238,g:103,b:100},alpha:1,assetId:""}},inlineImage:{treatment:{type:"none"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none",fontScale:1.04},color:{mode:"RGB",value:{r:80,g:80,b:80},alpha:1,assetId:""}},button:{treatment:{type:"pill-border",borderColor:{mode:"RGB",value:{r:236,g:98,b:98},alpha:1,assetId:""},hoverBorderColor:{mode:"RGB",value:{r:228,g:30,b:30},alpha:1,assetId:""}},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:1.08},color:{mode:"RGB",value:{r:236,g:98,b:98},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:228,g:30,b:30},alpha:1,assetId:""}},inlineLink:{treatment:{type:"underline"},color:{mode:"RGB",value:{r:102,g:132,b:172},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:64,g:88,b:121},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:1.04,role:"none"},color:{mode:"RGB",value:{r:80,g:80,b:80},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"lato",fontWeight:"300",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Light",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:.89},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:236,g:98,b:78},alpha:.8,assetId:""}},windowImage:{text:{fontFamily:"lato",fontWeight:"300",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Light",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none",fontScale:.89},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:236,g:98,b:78},alpha:.8,assetId:""}},photoGrid:{treatment:{type:"none"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none",fontScale:1.04},color:{mode:"RGB",value:{r:80,g:80,b:80},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.9,assetId:""}}}},Nightcap:{version:"1.1",name:"Nightcap",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:51,g:51,b:51},alpha:1,assetId:""}},titleSection:{treatment:{type:"border-box",borderColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1},backgroundColor:{mode:"RGB",value:{r:19,g:19,b:19},alpha:1,assetId:""}},title:{text:{fontFamily:"raleway",fontWeight:"900",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Heavy",fontSubgroup:"Raleway",paddingShiftRatio:0,role:"none",fontScale:1.01},color:{mode:"RGB",value:{r:248,g:246,b:244},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"raleway",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Raleway",paddingShiftRatio:0,role:"none",fontScale:1.14},color:{mode:"RGB",value:{r:248,g:246,b:244},alpha:1,assetId:""}}},heading:{treatment:{type:"none"},text:{fontFamily:"raleway",fontWeight:"900",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Heavy",fontSubgroup:"Raleway",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:227,g:225,b:223},alpha:1,assetId:""}},subheading:{text:{fontFamily:"raleway",fontWeight:"900",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Heavy",fontSubgroup:"Raleway",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:227,g:225,b:223},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:.98,role:"none"},color:{mode:"RGB",value:{r:227,g:225,b:223},alpha:1,assetId:""}},unorderedList:{treatment:{type:"circle"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:.98,role:"none"},color:{mode:"RGB",value:{r:227,g:225,b:223},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:.98,role:"none"},color:{mode:"RGB",value:{r:227,g:225,b:223},alpha:1,assetId:""}},blockquote:{treatment:{type:"top-bottom-rule",color:{mode:"RGB",value:{r:227,g:225,b:223},alpha:1,assetId:""}},text:{fontFamily:"spark-voltage",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Voltage",paddingShiftRatio:0},color:{mode:"RGB",value:{r:227,g:225,b:223},alpha:1,assetId:""}},inlineImage:{treatment:{type:"none"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:227,g:225,b:223},alpha:1,assetId:""}},button:{treatment:{type:"triangle",color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:191,g:187,b:182},alpha:1,assetId:""}},text:{fontFamily:"lato",fontWeight:"700",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none",fontScale:1.25},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:191,g:187,b:182},alpha:1,assetId:""}},inlineLink:{treatment:{type:"none",underlineOnHover:!1},color:{mode:"RGB",value:{r:166,g:193,b:209},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:114,g:189,b:233},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:227,g:225,b:223},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"spark-voltage",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Voltage",paddingShiftRatio:0},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:51,g:51,b:51},alpha:.8,assetId:""}},windowImage:{text:{fontFamily:"spark-voltage",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Voltage",paddingShiftRatio:0},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:51,g:51,b:51},alpha:.8,assetId:""}},photoGrid:{treatment:{type:"none"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:227,g:225,b:223},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:51,g:51,b:51},alpha:.9,assetId:""}}}},Storybook:{version:"1.1",name:"Storybook",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:234,g:229,b:235},alpha:1,assetId:""}},titleSection:{treatment:{type:"gradient-overlay"},title:{text:{fontFamily:"spark-storybook",fontWeight:"100",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Bold",fontSubgroup:"Local Brewery",paddingShiftRatio:0,role:"none",fontScale:2.18,lineHeightScale:.65},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"adobe-caslon-pro",fontWeight:"600",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,role:"none",lineHeightScale:.9,letterSpacing:"3px",fontScale:.72},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}}},heading:{treatment:{type:"none"},text:{fontFamily:"spark-storybook",fontWeight:"100",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Bold",fontSubgroup:"Local Brewery",paddingShiftRatio:0,role:"none",fontScale:2,lineHeightScale:.64},color:{mode:"RGB",value:{r:95,g:78,b:107},alpha:1,assetId:""}},subheading:{text:{fontFamily:"adobe-caslon-pro",fontWeight:"600",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,letterSpacing:"3px",fontScale:.53},color:{mode:"RGB",value:{r:95,g:78,b:107},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,role:"none",fontScale:.9},color:{mode:"RGB",value:{r:87,g:86,b:89},alpha:1,assetId:""}},unorderedList:{treatment:{type:"circle"},text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,role:"none",fontScale:.9},color:{mode:"RGB",value:{r:87,g:86,b:89},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0,role:"none",fontScale:.9},color:{mode:"RGB",value:{r:87,g:86,b:89},alpha:1,assetId:""}},blockquote:{treatment:{type:"left-rule",color:{mode:"RGB",value:{r:95,g:78,b:107},alpha:1,assetId:""}},text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"italic",textTransform:"none",assetId:"",fontFace:"Italic",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,fontScale:.9},color:{mode:"RGB",value:{r:95,g:78,b:107},alpha:1,assetId:""}},inlineImage:{treatment:{type:"none"},text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0},color:{mode:"RGB",value:{r:87,g:86,b:89},alpha:1,assetId:""}},button:{treatment:{type:"rounded-border",borderColor:{mode:"RGB",value:{r:87,g:86,b:89},alpha:1,assetId:""},hoverBorderColor:{mode:"RGB",value:{r:125,g:124,b:128},alpha:1,assetId:""}},text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0},color:{mode:"RGB",value:{r:87,g:86,b:89},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:125,g:124,b:128},alpha:1,assetId:""}},inlineLink:{treatment:{type:"underline"},color:{mode:"RGB",value:{r:149,g:139,b:152},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:109,g:100,b:112},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0},color:{mode:"RGB",value:{r:87,g:86,b:89},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"italic",textTransform:"none",assetId:"",fontFace:"Italic",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,fontScale:.83},color:{mode:"RGB",value:{r:95,g:78,b:107},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:234,g:229,b:235},alpha:.8,assetId:""}},windowImage:{text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"italic",textTransform:"none",assetId:"",fontFace:"Italic",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,fontScale:.83},color:{mode:"RGB",value:{r:95,g:78,b:107},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:234,g:229,b:235},alpha:.8,assetId:""}},photoGrid:{treatment:{type:"none"},text:{fontFamily:"proxima-nova",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Proxima Nova",paddingShiftRatio:0},color:{mode:"RGB",value:{r:87,g:86,b:89},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:234,g:229,b:235},alpha:.9,assetId:""}}},font_includes:[{method:"script",src:"storybook-fonts.gz.js",path:"themes"}]},Tereza:{version:"1.1",name:"Tereza",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:242,g:241,b:235},alpha:1,assetId:""}},titleSection:{treatment:{type:"solid-box",backgroundColor:{mode:"RGB",value:{r:0,g:163,b:204},alpha:1,assetId:""}},title:{text:{fontFamily:"lato",fontWeight:"700",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Bold",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:.82},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:.94},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}}},heading:{treatment:{type:"none"},text:{fontFamily:"lato",fontWeight:"700",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Bold",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:.96},color:{mode:"RGB",value:{r:0,g:163,b:204},alpha:1,assetId:""}},subheading:{text:{fontFamily:"lato",fontWeight:"700",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Bold",fontSubgroup:"Lato",paddingShiftRatio:0},color:{mode:"RGB",value:{r:0,g:163,b:204},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"calluna",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Calluna",paddingShiftRatio:0,fontScale:1.11},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},unorderedList:{treatment:{type:"circle"},text:{fontFamily:"calluna",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Calluna",paddingShiftRatio:0,fontScale:1.11},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"calluna",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Calluna",paddingShiftRatio:0,fontScale:1.11},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},blockquote:{treatment:{type:"color-band",backgroundColor:{mode:"RGB",value:{r:0,g:163,b:204},alpha:1,assetId:""}},text:{fontFamily:"calluna",fontWeight:"400",fontStyle:"italic",textTransform:"none",assetId:"",fontFace:"Italic",fontSubgroup:"Calluna",paddingShiftRatio:0,fontScale:.95},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},inlineImage:{treatment:{type:"image-border"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none",fontScale:1.09},color:{mode:"RGB",value:{r:0,g:163,b:204},alpha:1,assetId:""}},button:{treatment:{type:"square-border",borderColor:{mode:"RGB",value:{r:0,g:163,b:204},alpha:1,assetId:""},hoverBorderColor:{mode:"RGB",value:{r:26,g:209,b:255},alpha:1,assetId:""}},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:0,g:163,b:204},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:26,g:209,b:255},alpha:1,assetId:""}},inlineLink:{treatment:{type:"underline"},color:{mode:"RGB",value:{r:0,g:163,b:204},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:0,g:163,b:204},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none",fontScale:1.09},color:{mode:"RGB",value:{r:0,g:163,b:204},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"lato",fontWeight:"700",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Bold",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:.84},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:0,g:163,b:204},alpha:.8,assetId:""}},windowImage:{text:{fontFamily:"lato",fontWeight:"700",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Bold",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:.84},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:0,g:163,b:204},alpha:.8,assetId:""}},photoGrid:{treatment:{type:"image-border"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0,fontScale:1.09,role:"none"},color:{mode:"RGB",value:{r:0,g:163,b:204},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:242,g:241,b:235},alpha:.9,assetId:""}}}},Trek:{version:"1.1",name:"Trek",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},titleSection:{treatment:{type:"gradient-overlay"},title:{text:{fontFamily:"spark-local-brewery-four",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Local Brewery Four",paddingShiftRatio:0,fontScale:1.26},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"italic",textTransform:"none",assetId:"",fontFace:"Italic",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,role:"none",fontScale:1.03,lineHeightScale:.91},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}}},heading:{treatment:{type:"none"},text:{fontFamily:"spark-local-brewery-four",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Local Brewery Four",paddingShiftRatio:0,fontScale:1.09},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},subheading:{text:{fontFamily:"adobe-caslon-pro",fontWeight:"600",fontStyle:"italic",textTransform:"none",assetId:"",fontFace:"Semibold Italic",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,fontScale:.93,role:"none"},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,fontScale:.95},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},unorderedList:{treatment:{type:"circle"},text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,fontScale:.95},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,fontScale:.95},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},blockquote:{treatment:{type:"left-rule",color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},text:{fontFamily:"spark-local-brewery-four",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Local Brewery Four",paddingShiftRatio:0,lineHeightScale:.93},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""}},inlineImage:{treatment:{type:"none"},text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},button:{treatment:{type:"rounded-border",borderColor:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""},hoverBorderColor:{mode:"RGB",value:{r:38,g:38,b:38},alpha:1,assetId:""}},text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0,fontScale:1.13},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:38,g:38,b:38},alpha:1,assetId:""}},inlineLink:{treatment:{type:"none",underlineOnHover:!1},color:{mode:"RGB",value:{r:47,g:108,b:143},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:118,g:167,b:196},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"spark-local-brewery-four",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Local Brewery Four",paddingShiftRatio:0},color:{mode:"RGB",value:{r:0,g:0,b:0},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.8,assetId:""}},windowImage:{text:{fontFamily:"spark-local-brewery-four",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Local Brewery Four",paddingShiftRatio:0,fontScale:1},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.8,assetId:""}},photoGrid:{treatment:{type:"none"},text:{fontFamily:"adobe-caslon-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Adobe Caslon Pro",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.9,assetId:""}}}},Vintage:{version:"1.1",name:"Vintage",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},titleSection:{treatment:{type:"vintage"},title:{text:{fontFamily:"spark-voltage",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Voltage",paddingShiftRatio:0,role:"none",fontScale:1.05},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}}},heading:{treatment:{type:"double-rule",color:{mode:"RGB",value:{r:225,g:216,b:224},alpha:1,assetId:""}},text:{fontFamily:"clarendon-text-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Clarendon Text Pro",paddingShiftRatio:0,role:"none",fontScale:.9},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},subheading:{text:{fontFamily:"clarendon-text-pro",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Clarendon Text Pro",paddingShiftRatio:0,fontScale:.96},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},unorderedList:{treatment:{type:"vbullet",color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},blockquote:{treatment:{type:"color-band",backgroundColor:{mode:"RGB",value:{r:230,g:223,b:229},alpha:1,assetId:""}},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"italic",textTransform:"none",assetId:"",fontFace:"Light Italic",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none",fontScale:.91},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},inlineImage:{treatment:{type:"none"},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},button:{treatment:{type:"double-border",borderColor:{mode:"RGB",value:{r:225,g:216,b:224},alpha:1,assetId:""},hoverBorderColor:{mode:"RGB",value:{r:192,g:173,b:190},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:225,g:216,b:224},alpha:1,assetId:""},hoverBackgroundColor:{mode:"RGB",value:{r:192,g:173,b:190},alpha:1,assetId:""}},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none",fontScale:1.03},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},inlineLink:{treatment:{type:"underline"},color:{mode:"RGB",value:{r:160,g:136,b:152},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none",fontScale:.91},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:0,g:0,b:0},alpha:.3,assetId:""}},windowImage:{text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none",fontScale:.91},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:0,g:0,b:0},alpha:.3,assetId:""}},photoGrid:{treatment:{type:"none"},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.9,assetId:""}}}},Wesley:{version:"1.1",name:"Wesley",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},titleSection:{treatment:{type:"color-band",backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},title:{text:{fontFamily:"futura-pt",fontWeight:"700",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Heavy",fontSubgroup:"Futura PT",paddingShiftRatio:0,fontScale:.78,role:"none"},color:{mode:"RGB",value:{r:16,g:33,b:61},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"futura-pt",fontWeight:"800",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Heavy",fontSubgroup:"Futura PT",paddingShiftRatio:0,fontScale:1.05,lineHeightScale:.99},color:{mode:"RGB",value:{r:16,g:33,b:61},alpha:1,assetId:""}}},heading:{treatment:{type:"none"},text:{fontFamily:"futura-pt",fontWeight:"700",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Heavy",fontSubgroup:"Futura PT",paddingShiftRatio:0,fontScale:.84,role:"none"},color:{mode:"RGB",value:{r:80,g:80,b:80},alpha:1,assetId:""}},subheading:{text:{fontFamily:"futura-pt",fontWeight:"800",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Heavy",fontSubgroup:"Futura PT",paddingShiftRatio:0,fontScale:.83},color:{mode:"RGB",value:{r:80,g:80,b:80},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"pt-serif",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"PT Serif",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},unorderedList:{treatment:{type:"circle"},text:{fontFamily:"pt-serif",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"PT Serif",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"pt-serif",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"PT Serif",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},blockquote:{treatment:{type:"top-bottom-rule",color:{mode:"RGB",value:{r:232,g:233,b:236},alpha:1,assetId:""}},text:{fontFamily:"futura-pt",fontWeight:"700",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Heavy",fontSubgroup:"Futura PT",paddingShiftRatio:0,role:"none",fontScale:.71,lineHeightScale:1.29},color:{mode:"RGB",value:{r:16,g:33,b:61},alpha:1,assetId:""}},inlineImage:{treatment:{type:"none"},text:{fontFamily:"pt-serif",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"PT Serif",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},button:{treatment:{type:"pill-background",backgroundColor:{mode:"RGB",value:{r:220,g:221,b:225},alpha:1,assetId:""},hoverBackgroundColor:{mode:"RGB",value:{r:179,g:181,b:190},alpha:1,assetId:""}},text:{fontFamily:"pt-serif",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"PT Serif",paddingShiftRatio:0,role:"none",fontScale:1.06},color:{mode:"RGB",value:{r:16,g:33,b:61},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:16,g:33,b:61},alpha:1,assetId:""}},inlineLink:{treatment:{type:"underline"},color:{mode:"RGB",value:{r:111,g:121,b:139},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:47,g:53,b:63},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"pt-serif",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"PT Serif",paddingShiftRatio:0,fontScale:1},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"futura-pt",fontWeight:500,fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Medium",fontSubgroup:"Futura PT",paddingShiftRatio:0,role:"headline-font",fontScale:1.06},color:{mode:"RGB",value:{r:16,g:33,b:61},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.8,assetId:""}},windowImage:{text:{fontFamily:"futura-pt",fontWeight:500,fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Medium",fontSubgroup:"Futura PT",paddingShiftRatio:0,fontScale:1.07,role:"headline-font"},color:{mode:"RGB",value:{r:16,g:33,b:61},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.8,assetId:""}},photoGrid:{treatment:{type:"none"},text:{fontFamily:"pt-serif",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"PT Serif",paddingShiftRatio:0},color:{mode:"RGB",value:{r:17,g:26,b:11},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.9,assetId:""}}}},Whimsy:{version:"1.1",name:"Whimsy",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:241,g:245,b:245},alpha:1,assetId:""}},titleSection:{treatment:{type:"whimsy",color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},title:{text:{fontFamily:"spark-wanderlust-shine",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Wanderlust Shine",paddingShiftRatio:0,role:"none",fontScale:1.06},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none",fontScale:.9,lineHeightScale:1.13},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}}},heading:{treatment:{type:"whimsy",color:{mode:"RGB",value:{r:7,g:185,b:187},alpha:1,assetId:""}},text:{fontFamily:"spark-wanderlust-shine",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Wanderlust Shine",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:7,g:185,b:187},alpha:1,assetId:""}},subheading:{text:{fontFamily:"spark-wanderlust-shine",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Wanderlust Shine",paddingShiftRatio:0,role:"none",fontScale:.93},color:{mode:"RGB",value:{r:7,g:185,b:187},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none",fontScale:.94},color:{mode:"RGB",value:{r:34,g:34,b:34},alpha:1,assetId:""}},unorderedList:{treatment:{type:"diamond"},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none",fontScale:.94},color:{mode:"RGB",value:{r:34,g:34,b:34},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none",fontScale:.94},color:{mode:"RGB",value:{r:34,g:34,b:34},alpha:1,assetId:""}},blockquote:{treatment:{type:"quote",color:{mode:"RGB",value:{r:191,g:220,b:222},alpha:1,assetId:""}},text:{fontFamily:"spark-wanderlust-shine",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Wanderlust Shine",paddingShiftRatio:0,role:"none",fontScale:.87},color:{mode:"RGB",value:{r:7,g:185,b:187},alpha:1,assetId:""}},inlineImage:{treatment:{type:"none"},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:34,g:34,b:34},alpha:1,assetId:""}},button:{treatment:{type:"rounded-border",borderColor:{mode:"RGB",value:{r:7,g:185,b:187},alpha:1,assetId:""},hoverBorderColor:{mode:"RGB",value:{r:24,g:244,b:246},alpha:1,assetId:""}},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:7,g:185,b:187},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:24,g:244,b:246},alpha:1,assetId:""}},inlineLink:{treatment:{type:"underline"},color:{mode:"RGB",value:{r:7,g:185,b:187},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:6,g:141,b:143},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:34,g:34,b:34},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"spark-wanderlust-shine",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Wanderlust Shine",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:126,g:157,b:153},alpha:.8,assetId:""}},windowImage:{text:{fontFamily:"spark-wanderlust-shine",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Wanderlust Shine",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:126,g:157,b:153},alpha:.8,assetId:""}},photoGrid:{treatment:{type:"none"},text:{fontFamily:"acumin-pro-semi-condensed",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Acumin Pro Semi Condensed",paddingShiftRatio:0,role:"none"},color:{mode:"RGB",value:{r:34,g:34,b:34},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:241,g:245,b:245},alpha:.9,assetId:""}}}},Wiper:{version:"1.1",name:"Wiper",customFontsUsed:[],components:{page:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},titleSection:{treatment:{type:"gradient-overlay"},title:{text:{fontFamily:"museo-slab",fontWeight:"700",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"700",fontSubgroup:"Museo Slab",paddingShiftRatio:0},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},subtitle:{text:{fontFamily:"lato",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Light",fontSubgroup:"Lato",paddingShiftRatio:0,role:"none",fontScale:1.09},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}}},heading:{treatment:{type:"none"},text:{fontFamily:"museo-slab",fontWeight:"700",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"700",fontSubgroup:"Museo Slab",paddingShiftRatio:0},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},subheading:{text:{fontFamily:"museo-slab",fontWeight:"700",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"700",fontSubgroup:"Museo Slab",paddingShiftRatio:0},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},paragraph:{text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},unorderedList:{treatment:{type:"circle"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},orderedList:{text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},blockquote:{treatment:{type:"quote",color:{mode:"RGB",value:{r:206,g:203,b:206},alpha:1,assetId:""}},text:{fontFamily:"museo-slab",fontWeight:"700",fontStyle:"normal",textTransform:"uppercase",assetId:"",fontFace:"700",fontSubgroup:"Museo Slab",paddingShiftRatio:0,fontScale:.75},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},inlineImage:{treatment:{type:"none"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},button:{treatment:{type:"rounded-background",backgroundColor:{mode:"RGB",value:{r:61,g:52,b:57},alpha:1,assetId:""},hoverBackgroundColor:{mode:"RGB",value:{r:102,g:87,b:96},alpha:1,assetId:""}},text:{fontFamily:"museo-slab",fontWeight:"300",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"300",fontSubgroup:"Museo Slab",paddingShiftRatio:0},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""}},inlineLink:{treatment:{type:"underline"},color:{mode:"RGB",value:{r:82,g:159,b:198},alpha:1,assetId:""},hoverColor:{mode:"RGB",value:{r:31,g:91,b:122},alpha:1,assetId:""}},fullWidthImage:{treatment:{type:"none"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},fillScreenImage:{text:{fontFamily:"museo-slab",fontWeight:"700",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"700",fontSubgroup:"Museo Slab",paddingShiftRatio:0},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:0,g:0,b:0},alpha:.3,assetId:""}},windowImage:{text:{fontFamily:"museo-slab",fontWeight:"700",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"700",fontSubgroup:"Museo Slab",paddingShiftRatio:0},color:{mode:"RGB",value:{r:255,g:255,b:255},alpha:1,assetId:""},backgroundColor:{mode:"RGB",value:{r:0,g:0,b:0},alpha:.3,assetId:""}},photoGrid:{treatment:{type:"none"},text:{fontFamily:"lato",fontWeight:"400",fontStyle:"normal",textTransform:"none",assetId:"",fontFace:"Regular",fontSubgroup:"Lato",paddingShiftRatio:0},color:{mode:"RGB",value:{r:61,g:52,b:58},alpha:1,assetId:""}},glideshow:{backgroundColor:{mode:"RGB",value:{r:255,g:255,b:255},alpha:.9,assetId:""}}}}},e&&(e.exports=window.lucaThemeMap)}).call(this,i(55)(e))},2601:function(e,t){e.exports={kitIds:{baldwin:"qja1fkh",crisp:"rbi5aua",storybook:"ndl6wht"},previewSets:{baldwin:[{id:"hmqz",variations:["i4","i7","n4","n7"],css_name:"adobe-caslon-pro",name:"Adobe Caslon Pro"},{id:"kmpm",variations:["n4"],css_name:"league-gothic",name:"League Gothic"}],crisp:[{id:"vcsm",variations:["i1","i3","i4","i6","n1","n3","n4","n6"],css_name:"proxima-nova",name:"Proxima Nova"},{id:"mtyl",variations:["i3"],css_name:"proxima-nova-condensed",name:"Proxima Nova Condensed"}],storybook:null}}},2602:function(e,t,i){var n,o;n=[i(0)],void 0===(o=function(e){return{getTextWidthDOM:function(t,i){var n=e("<span>").text(t).css({font:i,float:"left","white-space":"nowrap"}).css({visibility:"hidden"}).appendTo(e("body")),o=n.width();return n.remove(),o},getContentDimensions:function(e,t,i,n,o){var r=this.getLines(e,t,n,i);return{width:Math.max.apply(void 0,r.map(function(e){return e.width})),height:r.length*o}},swapFontSize:function(e,t){return t.replace(/([0-9\-\.]*)px/,e+"px")},autoSizeText:function(e,t,i,n,o,r,a,s){var l=t,d=a*l,h=r*l,c=1;for(1!=(s=s||1)&&(l*=c=s)<10&&(c=(l=10)/t);l&&l>10;){var u={width:o,height:h},p=this.getContentDimensions(i,e,this.swapFontSize(l,n),o,d),g=p.width>0?p.width:1,f=p.height>0?p.height:1,m=u.width,v=u.height,b=Math.min(m/g,v/f)||1;if(b>=1||g-m<=1&&f-v<=1)break;(l*=b)<10&&(b=(l=10)/t),c*=b,d=a*l,h=r*l}return{fontSize:l,scale:c}},getLines:function(e,t,i,n){var o=(t=t.toString()).split(" "),r=[],a=o[0],s=i;if(e.font=n,1==o.length)return[{text:a,width:this.getTextWidthDOM(a,n)}];for(var l=1;l<o.length;l++){var d=o[l];if(this.getTextWidthDOM(a+" "+d,n)<s?a+=" "+d:(r.push({text:a,width:this.getTextWidthDOM(a,n)}),a=d),l===o.length-1){r.push({text:a,width:this.getTextWidthDOM(a,n)});break}}return r}}}.apply(t,n))||(e.exports=o)},2603:function(e){e.exports={crisp:{name:"crisp",titleHeaderMarginTop:"0",titleHeaderMarginBottom:"0",titleHeaderMarginLeft:"0",titleHeaderMarginRight:0,titleHeaderPaddingTop:"64px",titleHeaderPaddingBottom:"64px",titleHeaderPaddingLeft:"5%",titleHeaderPaddingRight:"5%",titleBorderTopWidth:0,titleBorderBottomWidth:0,titleHeaderWidth:"100%",titlePaddingTop:0,titlePaddingBottom:0,titleMarginTop:0,titleMarginBottom:0,titleFontColor:"white",titleFontWeight:"100",titleFontStyle:"normal",subtitleBorderTopWidth:0,subtitleBorderBottomWidth:0,subtitlePaddingTop:0,subtitlePaddingBottom:0,subtitleMarginTop:"8px",subtitleMarginBottom:0,subtitleFontColor:"white",subtitleFontWeight:"300",subtitleFontStyle:"normal",gradientTopAlignedCenter:"-100%",gradientStops:{center:[{color:"rgba(0,0,0,0)",percent:0},{color:"rgba(0,0,0,0.25)",percent:.25},{color:"rgba(0,0,0,0.50)",percent:.5},{color:"rgba(0,0,0,0.25)",percent:.75},{color:"rgba(0,0,0,0)",percent:1}],top:[{color:"rgba(0,0,0,0)",percent:0},{color:"rgba(0,0,0,0.5)",percent:1}],bottom:[{color:"rgba(0,0,0,0.5)",percent:0},{color:"rgba(0,0,0,0)",percent:1}]},gradientBottomAlignedCenter:"-100%",gradientAngleAlignedCenter:"-270deg",gradientStop0ColorAlignedCenter:"rgba(0,0,0,0)",gradientStop0PercentAlignedCenter:"0%",gradientStop1ColorAlignedCenter:"rgba(0,0,0,0.25)",gradientStop1PercentAlignedCenter:"25%",gradientStop2ColorAlignedCenter:"rgba(0,0,0,0.50)",gradientStop2PercentAlignedCenter:"50%",gradientStop3ColorAlignedCenter:"rgba(0,0,0,0.25)",gradientStop3PercentAlignedCenter:"75%",gradientStop4ColorAlignedCenter:"rgba(0,0,0,0)",gradientStop4PercentAlignedCenter:"100%",gradientTopAlignedTop:"-48px",gradientBottomAlignedTop:"-50%",gradientAngleAlignedTop:"-270deg",gradientStop0ColorAlignedTop:"rgba(0,0,0,0)",gradientStop0PercentAlignedTop:"0%",gradientStop1ColorAlignedTop:"rgba(0,0,0,0.5)",gradientStop1PercentAlignedTop:"100%",gradientTopAlignedBottom:"-50%",gradientBottomAlignedBottom:"-48px",gradientAngleAlignedBottom:"-270deg",gradientStop0ColorAlignedBottom:"rgba(0,0,0,0.5)",gradientStop0PercentAlignedBottom:"0%",gradientStop1ColorAlignedBottom:"rgba(0,0,0,0)",gradientStop1PercentAlignedBottom:"100%",titleFontFace:'"proxima-nova",Helvetica,serif',subtitleFontFace:'"proxima-nova",Helvetica,serif',titleTextShadowX:"1px",subtitleTextShadowX:"1px",titleTextShadowY:"1px",subtitleTextShadowY:"1px",titleTextShadowBlur:"2px",subtitleTextShadowBlur:"2px",titleTextShadowColor:"rgba(0,0,0,0.25)",subtitleTextShadowColor:"rgba(0,0,0,0.25)",titleLineHeight:"1",titleHeaderPaddingRightAlignedLeft:"15%",titleHeaderPaddingLeftAlignedCenter:"10%",titleHeaderPaddingRightAlignedCenter:"10%",titleHeaderPaddingLeftAlignedRight:"15%",titleMaxHeight:"3em",titleFontSize:"96px",subtitleMaxHeight:"3.75em",subtitleFontSize:"24px",subtitleTextTransform:"uppercase",subtitleLineHeight:"1.25"},nightcap:{name:"nightcap",titleHeaderMarginTop:"32px",titleHeaderMarginBottom:"32px",titleHeaderMarginLeft:"4%",titleHeaderMarginRight:"4%",titleHeaderPaddingTop:"32px",titleHeaderPaddingBottom:"32px",titleHeaderPaddingLeft:"5%",titleHeaderPaddingRight:"5%",titleBorderTopWidth:0,titleBorderBottomWidth:0,titleHeaderWidth:"100%",titlePaddingTop:0,titlePaddingBottom:0,titleMarginTop:0,titleMarginBottom:0,titleFontColor:"#e3e1df",titleFontWeight:"normal",titleFontStyle:"normal",subtitleBorderTopWidth:0,subtitleBorderBottomWidth:0,subtitlePaddingTop:0,subtitlePaddingBottom:0,subtitleMarginTop:"24px",subtitleMarginBottom:0,subtitleFontColor:"#e3e1df",subtitleFontWeight:"300",subtitleFontStyle:"normal",gradientStops:{},titleHeaderMaxWidth:"80%",titleHeaderBackground:"rgba(0,0,0,0.5)",titleHeaderBorderWidth:"1px",titleHeaderBorderColor:"rgba(255,255,255,0.5)",titleTextShadowX:"1px",subtitleTextShadowX:"1px",titleTextShadowY:"1px",subtitleTextShadowY:"1px",titleTextShadowBlur:"2px",subtitleTextShadowBlur:"2px",titleTextShadowColor:"rgba(0,0,0,0.25)",subtitleTextShadowColor:"rgba(0,0,0,0.25)",titleLineHeight:"1",titleFontFace:'"azo-sans-uber",sans-serif',titleMaxHeight:"3em",titleFontSize:"68px",subtitleMaxHeight:"3.75em",subtitleFontFace:'"azo-sans-web",sans-serif',subtitleFontSize:"24px",subtitleLineHeight:"1.25"},tereza:{name:"tereza",titleHeaderMarginTop:"32px",titleHeaderMarginBottom:"32px",titleHeaderMarginLeft:"4%",titleHeaderMarginRight:"4%",titleHeaderPaddingTop:"32px",titleHeaderPaddingBottom:"32px",titleHeaderPaddingLeft:"35.2px",titleHeaderPaddingRight:"35.2px",titleBorderTopWidth:0,titleBorderBottomWidth:0,titleHeaderWidth:"100%",titlePaddingTop:0,titlePaddingBottom:0,titleMarginTop:0,titleMarginBottom:0,titleFontColor:"white",titleFontWeight:"bold",titleFontStyle:"normal",subtitleBorderTopWidth:0,subtitleBorderBottomWidth:0,subtitlePaddingTop:0,subtitlePaddingBottom:0,subtitleMarginTop:"0.7em",subtitleMarginBottom:0,subtitleFontColor:"white",subtitleFontWeight:"300",subtitleFontStyle:"normal",titleHeaderMaxWidth:"45%",gradientStops:{},titleHeaderBackground:"#00a3cc",titleMaxHeight:"3em",titleFontFace:"calluna-sans,serif",titleFontSize:"56px",titleLineHeight:"1",titleTextTransform:"uppercase",titleTextShadow0X:"0",titleTextShadow0Y:".005em",titleTextShadow0Color:"#68C7CF",titleTextShadow1X:"-.005em",titleTextShadow1Y:"0",titleTextShadow1Color:"#68C7CF",titleTextShadow2X:"-.005em",titleTextShadow2Y:".010em",titleTextShadow2Color:"#68C7CF",titleTextShadow3X:"-.010em",titleTextShadow3Y:".005em",titleTextShadow3Color:"#68C7CF",titleTextShadow4X:"-.010em",titleTextShadow4Y:".015em",titleTextShadow4Color:"#68C7CF",titleTextShadow5X:"-.015em",titleTextShadow5Y:".010em",titleTextShadow5Color:"#68C7CF",titleTextShadow6X:"-.015em",titleTextShadow6Y:".020em",titleTextShadow6Color:"#68C7CF",titleTextShadow7X:"-.020em",titleTextShadow7Y:".015em",titleTextShadow7Color:"#68C7CF",titleTextShadow8X:"-.020em",titleTextShadow8Y:".025em",titleTextShadow8Color:"#68C7CF",titleTextShadow9X:"-.025em",titleTextShadow9Y:".020em",titleTextShadow9Color:"#68C7CF",titleTextShadow10X:"-.025em",titleTextShadow10Y:".030em",titleTextShadow10Color:"#68C7CF",titleTextShadow11X:"-.030em",titleTextShadow11Y:".025em",titleTextShadow11Color:"#68C7CF",titleTextShadow12X:"-.030em",titleTextShadow12Y:".035em",titleTextShadow12Color:"#68C7CF",titleTextShadow13X:"-.035em",titleTextShadow13Y:".030em",titleTextShadow13Color:"#68C7CF",titleTextShadow14X:"-.035em",titleTextShadow14Y:".040em",titleTextShadow14Color:"#68C7CF",titleTextShadow15X:"-.040em",titleTextShadow15Y:".035em",titleTextShadow15Color:"#68C7CF",titleTextShadow16X:"-.040em",titleTextShadow16Y:".045em",titleTextShadow16Color:"#68C7CF",titleTextShadow17X:"-.045em",titleTextShadow17Y:".040em",titleTextShadow17Color:"#68C7CF",titleTextShadow18X:"-.045em",titleTextShadow18Y:".050em",titleTextShadow18Color:"#68C7CF",titleTextShadow19X:"-.050em",titleTextShadow19Y:".045em",titleTextShadow19Color:"#68C7CF",subtitleMaxHeight:"3.6em",subtitleFontFace:"calluna-sans,serif",subtitleFontSize:"26.4px",subtitleLineHeight:"1.2",subtitleTextTransform:"uppercase"},whimsy:{name:"whimsy",titleHeaderMarginTop:0,titleHeaderMarginBottom:0,titleHeaderMarginLeft:0,titleHeaderMarginRight:0,titleHeaderPaddingTop:"64px",titleHeaderPaddingBottom:"64px",titleHeaderPaddingLeft:"5%",titleHeaderPaddingRight:"5%",titleBorderTopWidth:0,titleBorderBottomWidth:0,titleHeaderWidth:"100%",titlePaddingTop:0,titlePaddingBottom:0,titleMarginTop:0,titleMarginBottom:0,titleFontColor:"white",titleFontWeight:"normal",titleFontStyle:"normal",subtitleBorderTopWidth:0,subtitleBorderBottomWidth:0,subtitlePaddingTop:0,subtitlePaddingBottom:0,subtitleMarginTop:"16px",subtitleMarginBottom:0,subtitleFontColor:"white",subtitleFontWeight:"300",subtitleFontStyle:"normal",gradientTopAlignedCenter:"-100%",gradientStops:{center:[{color:"rgba(0,0,0,0)",percent:0},{color:"rgba(0,0,0,0.25)",percent:.25},{color:"rgba(0,0,0,0.50)",percent:.5},{color:"rgba(0,0,0,0.25)",percent:.75},{color:"rgba(0,0,0,0)",percent:1}],top:[{color:"rgba(0,0,0,0)",percent:0},{color:"rgba(0,0,0,0.5)",percent:1}],bottom:[{color:"rgba(0,0,0,0.5)",percent:0},{color:"rgba(0,0,0,0)",percent:1}]},gradientBottomAlignedCenter:"-100%",gradientAngleAlignedCenter:"-270deg",gradientStop0ColorAlignedCenter:"rgba(0,0,0,0)",gradientStop0PercentAlignedCenter:"0%",gradientStop1ColorAlignedCenter:"rgba(0,0,0,0.25)",gradientStop1PercentAlignedCenter:"25%",gradientStop2ColorAlignedCenter:"rgba(0,0,0,0.50)",gradientStop2PercentAlignedCenter:"50%",gradientStop3ColorAlignedCenter:"rgba(0,0,0,0.25)",gradientStop3PercentAlignedCenter:"75%",gradientStop4ColorAlignedCenter:"rgba(0,0,0,0)",gradientStop4PercentAlignedCenter:"100%",gradientTopAlignedTop:"-48px",gradientBottomAlignedTop:"-50%",gradientAngleAlignedTop:"-270deg",gradientStop0ColorAlignedTop:"rgba(0,0,0,0)",gradientStop0PercentAlignedTop:"0%",gradientStop1ColorAlignedTop:"rgba(0,0,0,0.5)",gradientStop1PercentAlignedTop:"100%",gradientTopAlignedBottom:"-50%",gradientBottomAlignedBottom:"-48px",gradientAngleAlignedBottom:"-270deg",gradientStop0ColorAlignedBottom:"rgba(0,0,0,0.5)",gradientStop0PercentAlignedBottom:"0%",gradientStop1ColorAlignedBottom:"rgba(0,0,0,0)",gradientStop1PercentAlignedBottom:"100%",titleTextShadowX:"1px",subtitleTextShadowX:"1px",titleTextShadowY:"1px",subtitleTextShadowY:"1px",titleTextShadowBlur:"2px",subtitleTextShadowBlur:"2px",titleTextShadowColor:"rgba(0,0,0,0.25)",subtitleTextShadowColor:"rgba(0,0,0,0.25)",subtitleLineHeight:"1",titleHeaderPaddingRightAlignedLeft:"15%",titleHeaderPaddingLeftAlignedCenter:"10%",titleHeaderPaddingRightAlignedCenter:"10%",titleHeaderPaddingLeftAlignedRight:"15%",titleMaxHeight:"3.3em",titleFontFace:'"pacific-northwest-letters",serif',titleFontSize:"104px",titleLineHeight:"1.1",subtitleMaxHeight:"3em",subtitleFontFace:"source-sans-pro,Helvetica,sans-serif",subtitleFontSize:"30.4px",subtitleTextTransform:"uppercase"},wesley:{name:"wesley",titleHeaderMarginTop:"64px",titleHeaderMarginBottom:"64px",titleHeaderMarginLeft:0,titleHeaderMarginRight:0,titleHeaderPaddingTop:"32px",titleHeaderPaddingBottom:"32px",titleHeaderPaddingLeft:"5%",titleHeaderPaddingRight:"5%",titleBorderTopWidth:0,titleBorderBottomWidth:0,titleHeaderWidth:"100%",titlePaddingTop:0,titlePaddingBottom:0,titleMarginTop:0,titleMarginBottom:0,titleFontColor:"#10213d",titleFontWeight:"bold",titleFontStyle:"normal",subtitleBorderTopWidth:0,subtitleBorderBottomWidth:0,subtitlePaddingTop:0,subtitlePaddingBottom:0,subtitleMarginTop:"12px",subtitleMarginBottom:0,subtitleFontColor:"#10213d",subtitleFontWeight:"bold",subtitleFontStyle:"normal",titleHeaderBackground:"rgba(255,255,255,.4)",gradientStops:{},titleHeaderPaddingRightAlignedLeft:"15%",titleHeaderPaddingLeftAlignedCenter:"10%",titleHeaderPaddingRightAlignedCenter:"10%",titleHeaderPaddingLeftAlignedRight:"15%",titleMaxHeight:"3em",titleFontFace:"futura-pt",titleFontSize:"60px",titleLineHeight:"1",titleTextTransform:"uppercase",subtitleMaxHeight:"3.6em",subtitleFontFace:"futura-pt",subtitleFontSize:"28.8px",subtitleLineHeight:"1.2"},luca:{name:"luca",titleHeaderMarginTop:0,titleHeaderMarginBottom:0,titleHeaderMarginLeft:0,titleHeaderMarginRight:0,titleHeaderPaddingTop:"64px",titleHeaderPaddingBottom:"64px",titleHeaderPaddingLeft:"5%",titleHeaderPaddingRight:"5%",titleBorderTopWidth:"3px",titleBorderBottomWidth:"3px",titleHeaderWidth:"100%",titlePaddingTop:6,titlePaddingBottom:6,titleMarginTop:0,titleMarginBottom:0,titleFontColor:"white",titleFontWeight:"400",titleFontStyle:"normal",subtitleBorderTopWidth:0,subtitleBorderBottomWidth:0,subtitlePaddingTop:0,subtitlePaddingBottom:0,subtitleMarginTop:"16px",subtitleMarginBottom:0,subtitleFontColor:"white",subtitleFontWeight:"300",subtitleFontStyle:"normal",gradientStops:{center:[{color:"rgba(0,0,0,0)",percent:0},{color:"rgba(0,0,0,0.25)",percent:.25},{color:"rgba(0,0,0,0.50)",percent:.5},{color:"rgba(0,0,0,0.25)",percent:.75},{color:"rgba(0,0,0,0)",percent:1}],top:[{color:"rgba(0,0,0,0)",percent:0},{color:"rgba(0,0,0,0.5)",percent:1}],bottom:[{color:"rgba(0,0,0,0.5)",percent:0},{color:"rgba(0,0,0,0)",percent:1}]},gradientTopAlignedCenter:"-100%",gradientBottomAlignedCenter:"-100%",gradientAngleAlignedCenter:"-270deg",gradientStop0ColorAlignedCenter:"rgba(0,0,0,0)",gradientStop0PercentAlignedCenter:"0%",gradientStop1ColorAlignedCenter:"rgba(0,0,0,0.25)",gradientStop1PercentAlignedCenter:"25%",gradientStop2ColorAlignedCenter:"rgba(0,0,0,0.50)",gradientStop2PercentAlignedCenter:"50%",gradientStop3ColorAlignedCenter:"rgba(0,0,0,0.25)",gradientStop3PercentAlignedCenter:"75%",gradientStop4ColorAlignedCenter:"rgba(0,0,0,0)",gradientStop4PercentAlignedCenter:"100%",gradientTopAlignedTop:"-48px",gradientBottomAlignedTop:"-50%",gradientAngleAlignedTop:"-270deg",gradientStop0ColorAlignedTop:"rgba(0,0,0,0)",gradientStop0PercentAlignedTop:"0%",gradientStop1ColorAlignedTop:"rgba(0,0,0,0.5)",gradientStop1PercentAlignedTop:"100%",gradientTopAlignedBottom:"-50%",gradientBottomAlignedBottom:"-48px",gradientAngleAlignedBottom:"-270deg",gradientStop0ColorAlignedBottom:"rgba(0,0,0,0.5)",gradientStop0PercentAlignedBottom:"0%",gradientStop1ColorAlignedBottom:"rgba(0,0,0,0)",gradientStop1PercentAlignedBottom:"100%",titleBorderTopColor:"#ec6262",titleBorderBottomColor:"#ec6262",titleFontFace:"pt-sans-narrow,source-sans-pro,Helvetica,sans-serif",titleFontSize:"72px",titleLineHeight:"1",titleMaxHeight:"3em",titleMaxWidth:"80%",subtitleMaxWidth:"80%",subtitleMaxHeight:"3.9em",subtitleFontFace:"source-sans-pro,Helvetica,sans-serif",subtitleFontSize:"28px",subtitleLineHeight:"1.3"},baldwin:{name:"baldwin",titleHeaderMarginTop:0,titleHeaderMarginBottom:0,titleHeaderMarginLeft:0,titleHeaderMarginRight:0,titleHeaderPaddingTop:"64px",titleHeaderPaddingBottom:"64px",titleHeaderPaddingLeft:"5%",titleHeaderPaddingRight:"5%",titleBorderTopWidth:0,titleBorderBottomWidth:"3px",titleHeaderWidth:"100%",titlePaddingTop:0,titlePaddingBottom:"4px",titleMarginTop:0,titleMarginBottom:0,titleFontColor:"white",titleFontWeight:"normal",titleFontStyle:"normal",subtitleBorderTopWidth:0,subtitleBorderBottomWidth:0,subtitlePaddingTop:0,subtitlePaddingBottom:0,subtitleMarginTop:"19.2px",subtitleMarginBottom:0,subtitleFontColor:"white",subtitleFontWeight:"300",subtitleFontStyle:"normal",gradientStops:{center:[{color:"rgba(0,0,0,0)",percent:0},{color:"rgba(0,0,0,0.25)",percent:.25},{color:"rgba(0,0,0,0.50)",percent:.5},{color:"rgba(0,0,0,0.25)",percent:.75},{color:"rgba(0,0,0,0)",percent:1}],top:[{color:"rgba(0,0,0,0)",percent:0},{color:"rgba(0,0,0,0.5)",percent:1}],bottom:[{color:"rgba(0,0,0,0.5)",percent:0},{color:"rgba(0,0,0,0)",percent:1}]},titleTextShadowX:"1px",subtitleTextShadowX:"1px",titleTextShadowY:"1px",subtitleTextShadowY:"1px",titleTextShadowBlur:"2px",subtitleTextShadowBlur:"2px",titleTextShadowColor:"rgba(0,0,0,0.25)",subtitleTextShadowColor:"rgba(0,0,0,0.25)",titleHeaderPaddingRightAlignedLeft:"15%",titleHeaderPaddingLeftAlignedCenter:"10%",titleHeaderPaddingRightAlignedCenter:"10%",titleHeaderPaddingLeftAlignedRight:"15%",gradientTopAlignedCenter:"-100%",gradientBottomAlignedCenter:"-100%",gradientAngleAlignedCenter:"-270deg",gradientStop0ColorAlignedCenter:"rgba(0,0,0,0)",gradientStop0PercentAlignedCenter:"0%",gradientStop1ColorAlignedCenter:"rgba(0,0,0,0.25)",gradientStop1PercentAlignedCenter:"25%",gradientStop2ColorAlignedCenter:"rgba(0,0,0,0.50)",gradientStop2PercentAlignedCenter:"50%",gradientStop3ColorAlignedCenter:"rgba(0,0,0,0.25)",gradientStop3PercentAlignedCenter:"75%",gradientStop4ColorAlignedCenter:"rgba(0,0,0,0)",gradientStop4PercentAlignedCenter:"100%",gradientTopAlignedTop:"-48px",gradientBottomAlignedTop:"-50%",gradientAngleAlignedTop:"-270deg",gradientStop0ColorAlignedTop:"rgba(0,0,0,0)",gradientStop0PercentAlignedTop:"0%",gradientStop1ColorAlignedTop:"rgba(0,0,0,0.5)",gradientStop1PercentAlignedTop:"100%",gradientTopAlignedBottom:"-50%",gradientBottomAlignedBottom:"-48px",gradientAngleAlignedBottom:"-270deg",gradientStop0ColorAlignedBottom:"rgba(0,0,0,0.5)",gradientStop0PercentAlignedBottom:"0%",gradientStop1ColorAlignedBottom:"rgba(0,0,0,0)",gradientStop1PercentAlignedBottom:"100%",titleFontFace:"league-gothic,'Helvetica','Arial',sans-serif",titleFontSize:"80px",titleLineHeight:"1",titleTextTransform:"uppercase",titleMaxHeight:"3em",titleBorderBottomColor:"rgba(255,255,255,0.75)",subtitleFontFace:"league-gothic,'Helvetica','Arial',sans-serif",subtitleFontSize:"32px",subtitleTextTransform:"uppercase",subtitleLineHeight:"1.25",subtitleMaxHeight:"3.75em"},vintage:{name:"vintage",titleHeaderMarginTop:0,titleHeaderMarginBottom:0,titleHeaderMarginLeft:0,titleHeaderMarginRight:0,titleHeaderPaddingTop:"64px",titleHeaderPaddingBottom:"64px",titleHeaderPaddingLeft:"5%",titleHeaderPaddingRight:"5%",titleBorderTopWidth:0,titleBorderBottomWidth:0,titleHeaderWidth:"100%",titlePaddingTop:0,titlePaddingBottom:0,titleMarginTop:0,titleMarginBottom:0,titleFontColor:"white",titleFontWeight:"normal",titleFontStyle:"normal",subtitleBorderTopWidth:0,subtitleBorderBottomWidth:0,subtitlePaddingTop:0,subtitlePaddingBottom:0,subtitleMarginTop:"16px",subtitleMarginBottom:0,subtitleFontColor:"white",subtitleFontWeight:"400",subtitleFontStyle:"normal",subtitleFontFace:"source-sans-pro,sans-serif",gradientStops:{center:[{color:"rgba(62,146,187,0.4)",percent:0},{color:"transparent",percent:.5},{color:"rgba(216,87,65,0.2)",percent:1}],top:[{color:"rgba(62,146,187,0.4)",percent:0},{color:"transparent",percent:.5},{color:"rgba(216,87,65,0.2)",percent:1}],bottom:[{color:"rgba(62,146,187,0.4)",percent:0},{color:"transparent",percent:.5},{color:"rgba(216,87,65,0.2)",percent:1}]},gradientFull:"absolute",gradientAngleAlignedCenter:"90deg",gradientAngleAlignedTop:"90deg",gradientAngleAlignedBottom:"90deg",gradientStop0ColorAlignedCenter:"rgba(62,146,187,0.4)",gradientStop0ColorAlignedTop:"rgba(62,146,187,0.4)",gradientStop0ColorAlignedBottom:"rgba(62,146,187,0.4)",gradientStop0PercentAlignedCenter:"0",gradientStop0PercentAlignedTop:"0",gradientStop0PercentAlignedBottom:"0",gradientStop1ColorAlignedCenter:"transparent",gradientStop1ColorAlignedTop:"transparent",gradientStop1ColorAlignedBottom:"transparent",gradientStop1PercentAlignedCenter:"50%",gradientStop1PercentAlignedTop:"50%",gradientStop1PercentAlignedBottom:"50%",gradientStop2ColorAlignedCenter:"rgba(216,87,65,0.2)",gradientStop2ColorAlignedTop:"rgba(216,87,65,0.2)",gradientStop2ColorAlignedBottom:"rgba(216,87,65,0.2)",gradientStop2PercentAlignedCenter:"100%",gradientStop2PercentAlignedTop:"100%",gradientStop2PercentAlignedBottom:"100%",titleTextShadowX:"1px",subtitleTextShadowX:"1px",titleTextShadowY:"1px",subtitleTextShadowY:"1px",titleTextShadowBlur:"2px",subtitleTextShadowBlur:"2px",titleTextShadowColor:"rgba(0,0,0,0.25)",subtitleTextShadowColor:"rgba(0,0,0,0.25)",titleHeaderPaddingRightAlignedLeft:"15%",titleHeaderPaddingLeftAlignedCenter:"10%",titleHeaderPaddingRightAlignedCenter:"10%",titleHeaderPaddingLeftAlignedRight:"15%",titleMaxHeight:"3em",titleFontFace:"spark-voltage,sans-serif",titleFontSize:"83.2px",titleLineHeight:"1.1",subtitleMaxHeight:"3.6em",subtitleFontSize:"32px",subtitleLineHeight:"1.2"}}},2604:function(e,t,i){(function(t){!function(t,i){e.exports=i()}(0,function(){"use strict";var e,i,n=[];function o(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function a(e,t,i){a.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:i,enumerable:!0})}function s(e,t){s.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function l(e,t){l.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function d(e,t,i){d.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:i,enumerable:!0})}function h(e,t,i){var n=e.slice((i||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function c(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function u(e,t,i,n,o,r,p){o=o||[],p=p||[];var g=o.slice(0);if(void 0!==r){if(n){if("function"==typeof n&&n(g,r))return;if("object"==typeof n){if(n.prefilter&&n.prefilter(g,r))return;if(n.normalize){var f=n.normalize(g,r,e,t);f&&(e=f[0],t=f[1])}}}g.push(r)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var m=typeof e,v=typeof t,b="undefined"!==m||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(r),w="undefined"!==v||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(r);if(!b&&w)i(new s(g,t));else if(!w&&b)i(new l(g,e));else if(c(e)!==c(t))i(new a(g,e,t));else if("date"===c(e)&&e-t!=0)i(new a(g,e,t));else if("object"===m&&null!==e&&null!==t)if(p.filter(function(t){return t.lhs===e}).length)e!==t&&i(new a(g,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var k;e.length;for(k=0;k<e.length;k++)k>=t.length?i(new d(g,k,new l(void 0,e[k]))):u(e[k],t[k],i,n,g,k,p);for(;k<t.length;)i(new d(g,k,new s(void 0,t[k++])))}else{var S=Object.keys(e),_=Object.keys(t);S.forEach(function(o,r){var a=_.indexOf(o);a>=0?(u(e[o],t[o],i,n,g,o,p),_=h(_,a)):u(e[o],void 0,i,n,g,o,p)}),_.forEach(function(e){u(void 0,t[e],i,n,g,e,p)})}p.length=p.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||i(new a(g,e,t)))}function p(e,t,i,n){return n=n||[],u(e,t,function(e){e&&n.push(e)},i),n.length?n:void 0}function g(e,t,i){if(e&&t&&i&&i.kind){for(var n=e,o=-1,r=i.path?i.path.length-1:0;++o<r;)void 0===n[i.path[o]]&&(n[i.path[o]]="number"==typeof i.path[o]?[]:{}),n=n[i.path[o]];switch(i.kind){case"A":!function e(t,i,n){if(n.path&&n.path.length){var o,r=t[i],a=n.path.length-1;for(o=0;o<a;o++)r=r[n.path[o]];switch(n.kind){case"A":e(r[n.path[o]],n.index,n.item);break;case"D":delete r[n.path[o]];break;case"E":case"N":r[n.path[o]]=n.rhs}}else switch(n.kind){case"A":e(t[i],n.index,n.item);break;case"D":t=h(t,i);break;case"E":case"N":t[i]=n.rhs}return t}(i.path?n[i.path[o]]:n,i.index,i.item);break;case"D":delete n[i.path[o]];break;case"E":case"N":n[i.path[o]]=i.rhs}}}return e="object"==typeof t&&t?t:"undefined"!=typeof window?window:{},(i=e.DeepDiff)&&n.push(function(){void 0!==i&&e.DeepDiff===p&&(e.DeepDiff=i,i=void 0)}),o(a,r),o(s,r),o(l,r),o(d,r),Object.defineProperties(p,{diff:{value:p,enumerable:!0},observableDiff:{value:u,enumerable:!0},applyDiff:{value:function(e,t,i){e&&t&&u(e,t,function(n){i&&!i(e,t,n)||g(e,t,n)})},enumerable:!0},applyChange:{value:g,enumerable:!0},revertChange:{value:function(e,t,i){if(e&&t&&i&&i.kind){var n,o,r=e;for(o=i.path.length-1,n=0;n<o;n++)void 0===r[i.path[n]]&&(r[i.path[n]]={}),r=r[i.path[n]];switch(i.kind){case"A":!function e(t,i,n){if(n.path&&n.path.length){var o,r=t[i],a=n.path.length-1;for(o=0;o<a;o++)r=r[n.path[o]];switch(n.kind){case"A":e(r[n.path[o]],n.index,n.item);break;case"D":case"E":r[n.path[o]]=n.lhs;break;case"N":delete r[n.path[o]]}}else switch(n.kind){case"A":e(t[i],n.index,n.item);break;case"D":case"E":t[i]=n.lhs;break;case"N":t=h(t,i)}return t}(r[i.path[n]],i.index,i.item);break;case"D":case"E":r[i.path[n]]=i.lhs;break;case"N":delete r[i.path[n]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==i},enumerable:!0},noConflict:{value:function(){return n&&(n.forEach(function(e){e()}),n=null),p},enumerable:!0}}),p})}).call(this,i(9))},2605:function(e,t,i){var n,o;n=[i(0),i(28),i(3),i(17),i(299),i(1464),i(522),i(2606),i(2610),i(2611),i(235),i(6),i(1465),i(2612),i(2614),i(2616),i(2618),i(2619),i(2621),i(1467),i(2622),i(2624),i(2625),i(2627),i(34),i(2629),i(2630),i(2631),i(2632),i(252),i(16),i(36),i(520),i(519),i(2633),i(37),i(4),i(121),i(2635),i(117),i(115),i(2636),i(1180),i(1719),i(2637),i(1720)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h,c,u,p,g,f,m,v,b,w,k,S,_,x,y,C,T,I,P,D,F,R,B,A,L,M,E,H,W,N,z,O,$,j,U,G){"use strict";window.Mustache=n,L=window.Render;var q=marvel.features.hasFeature("enable-custom-fonts"),V=marvel.features.hasFeature("enable-custom-fonts-subsets"),X=0,Y=36e5;function J(e,t){var i;if(t=Array.isArray(t)?t:[t],e)for(i=0;e.images&&i<e.images.length;i++){var n=t[i];n&&n.license&&(e.images[i].license={photo_name:n.title,owner:n.owner.name,source_name:n.source.name,source_url:n.context?n.context.href:n.source.href,type:n.license.short_name,image_id:n.image_id})}}function K(e,t){"#"===e[0]?e="rgba("+(i=ColorUtils.hexToRgb(e)).r+","+i.g+","+i.b+",1)":"rgb("===e.slice(0,4)&&(e="rgba("+e.slice(4,-1)+",1)");var i,n=e.lastIndexOf(",");return 0!==e.indexOf("rgba(")||-1===n?e:(i=e.slice(0,n+1))+t+")"}function Q(){return B.isChrome}function Z(){window.marvel.logger.traceflow("baton-timeout","Restarting Present mode inactivity timeout"),ee(),X=setTimeout(function(){X=0,marvel.logger.traceflow("baton-timeout","onInactivityTimeout"),o.currentDoc.getMyApp().endLongUserActivity("release-lock")},Y)}function ee(){X&&(clearTimeout(X),X=0)}function te(){var n=this;this.slateModel=new l;this.formattingToolbarModel=new S,this.editorIsInitialized=!1,this.editorIsReady=!1,this.editorRefreshed=!1,this.syncInProgress=!1,this.slateModel.set("pushInProgress",!1),this.imageProcessingBatchCount=0,this.pendingImages=new d([],{storage:o,debugEnabled:!1}),this.pendingImages.on("add remove",this._handlePushChange,this),this.pendingImages.on("save-context",this._handleSaveContext,this),this.pendingImages.on("delete-context",this._handleDeleteContext,this),this.pendingImages.on("image-response",this._handlePendingImageResponse,this),this.pendingImages.on("image-error",this._handlePendingImageError,this),this.Fullscreen=O,this.showToolbar(".slate .main-toolbar");var a=this.$slateEle=e(".slate");this.editorWindow=a.find("iframe.editor")[0].contentWindow,o.on("update-conflict",this._handleConflict.bind(this));var s=a.find(".settingsButton"),h=a.find(".settings-flyout-overlay"),u=a.find(".settings-flyout"),p=a.find(".header-footer-toggle"),g=marvel.features.hasFeature("entitle-brand-kit");function f(e,t){var i=e.offset(),n=t.outerWidth()/2,o=e.outerWidth()/2;t.css({top:i.top+57+"px",left:i.left-n+o+"px"})}if(s.addClass("showing"),e(h).on("click",function(t){e(t.target).hasClass("settings-flyout-overlay")&&(t.preventDefault(),t.stopPropagation(),h.removeClass("showing"))}),window.marvel.features.hasFeature("inactivity-timeout-15-seconds")&&(Y=2e4),s.on("click",function(e){if(e.preventDefault(),e.stopPropagation(),!s.hasClass("disabled")){n._isFreeUser()&&E.trackEvent("projectSettings",n.getBrandingAnalytics({trigger:"page:settings:headerfooter"}),"slate:editor"),h.addClass("showing");var t=s.offset(),i=u.outerWidth()/2,o=s.outerWidth()/2;u.css({top:t.top+57+"px",left:t.left-i+o+"px"})}}),p.on("click",function(e){if(g)if(n.authContext&&n.authContext.activated()){p.toggleClass("checked");var t=p.hasClass("checked");o.setData("headerDisabled",!t);var i=n.slateModel.get("docModel");o.checkAndSetBranded(i.theme),n.slateModel.set("savePending",!0),n.updateMainToolbarState(),o.saveDocument(i).then(function(){n.slateModel.set("savePending",!1),n.updateMainToolbarState()}),E.trackEvent("toggleHeader",n.getBrandingAnalytics({trigger:"page:settings:headerfooter"}),"slate:editor")}else E.trackEvent("viewedOnboarding",n.getBrandingAnalytics({trigger:"page:settings:headerfooter"}),"slate:editor"),window.marvel.events.trigger("spark-show-onboarding-dialog",{touchpointName:"page:settings:headerfooter"});else E.trackEvent("clickedMerchandisingCTA",n.getBrandingAnalytics({trigger:"page:settings:headerfooter"}),"slate:editor"),y.showMerchPopover({touchpointName:"page:settings:headerfooter",anchorLocation:e.target.getBoundingClientRect()}).done();return!1}),a.find("iframe.editor").on("mousewheel",function(){}),a.find("iframe.preview").on("mousewheel",function(){}),a.find(".cancelButton").on("vclick",function(){return n.sendMessageToEditor("modal-cancel",{}),e(this).attr("disabled","disabled"),n.showToolbar(".slate .main-toolbar"),a.find(".photo-picker").removeClass("showing"),setTimeout(function(){a.find(".editor-wrapper").removeClass("modal")},100),!1}).attr("disabled","disabled"),marvel.features.hasFeature("slate-debug-embed")){var m=this.slateModel,v=a.find(".debugEmbedButton");v.addClass("show"),v.on("vclick",function(){var e=m.getTitleImageURL();(e=e&&-1==e.search(/^blob/)&&-1==e.search(/db_thumbnails/)&&-1==e.search(/rendition/)&&-1==e.search(/\/thumb/)?e:"")&&-1==e.indexOf(n.baseUrl)&&(e=n.baseUrl+"/"+e);var t=n.getThemeObject();o.debugEmbedImage(m.getTitle(),m.getSubtitle(),m.getTitleAlignment(),e,m.getTitleImageAlignment(),$.isBuiltInTheme(t)?o.getData("themeName"):t,n.authContext)})}if(marvel.features.hasFeature("slate-debug-locale")){var w=a.find(".debugLocButton"),k=a.find(".slate-debug-submenu-items"),_="button showing",C=function(t){var i=e(t.target).data("imageErrorCode");this._showImageErrorDialog(i,i)}.bind(this),T=Object.keys(this._imageErrorCodeToType).concat("default"),I=(t.each(T,function(t){k.append(e("<div>").addClass(_).data("imageErrorCode",t).text("Image Error: "+t).click(C))}),function(t){var i=e(t.target);this._showImageCreatingPreviewErrorDialog(i.data("total"),i.data("failed"))}.bind(this));k.append(e("<div>").addClass(_).data({failed:1,total:1}).text("Image Preview Creation Error: single (1/1)").click(I)),k.append(e("<div>").addClass(_).data({failed:2,total:3}).text("Image Preview Creation Error: some (2/3)").click(I)),k.append(e("<div>").addClass(_).data({failed:3,total:3}).text("Image Preview Creation Error: all (3/3)").click(I)),w.addClass("show"),w.on("vclick",function(){n._showSubmenu(".slate-debug-submenu-overlay");var e=a.find(".slate-debug-submenu");f(w,e)});var P=function(e){this.editorWindow.App.issueModel.set("model_version",e)}.bind(this);k.append(e("<div>").addClass(_).text("Set Project Model Version to 1.15").click(function(){P("1.15")})),k.append(e("<div>").addClass(_).text("Set Project Model Version to 1.99").click(function(){P("1.99")}))}a.find(".doneButton").on("vclick",function(){return a.find(".doneButton").hasClass("disabled")||(n.sendMessageToEditor("modal-done",{uuid:"",source:"foobar",event:"begin-modal"}),n.showToolbar(".slate .main-toolbar"),setTimeout(function(){a.find(".editor-wrapper").removeClass("modal")},100)),!1}),document.addEventListener("keydown",this._handleKeyDown.bind(this)),this._handleBeforeUnload=this._handleBeforeUnload.bind(this),window.addEventListener("beforeunload",this._handleBeforeUnload),a.find(".toolbars, .formatting-toolbar").mousedown(function(t){if(n.editorIsReady){n.saveEditorCaretState();var i=e(t.target),o=n.editorWindow.$("html"),r=e(window),a=function(t){var s=i.closest(".formatting-toolbar").length>0,l=e(t.target).closest(".formatting-toolbar").length>0,d=!0;!0===s&&!0===l&&(d=!1),n.restoreEditorCaretState(d),r.off("mouseup",a),o.off("mouseup",a)};r.on("mouseup",a),o.on("mouseup",a)}}.bind(this)),a.find(".homeButton").on("vclick",function(){window.marvel.navigate("/projects",{trigger:!0})}),a.find(".hamburgerButton").on("vclick",function(){return window.marvel.events.trigger("mrvl-show-global-nav"),!1}),a.find(".getInspiredButton").on("vclick",function(){return n.editorIsReady&&(n.imagePickerView&&n.imagePickerView.hide(),n.themePicker&&n.themePicker.hide(),n.getInspiredView?n.getInspiredView.isShowing()?n.getInspiredView.hide(function(){n.sendMessageToEditor("panel-closed",{})}.bind(this)):n.getInspiredView.show(function(){n.sendMessageToEditor("panel-opened",{})}.bind(this)):n._handleDisplayGetInspiredPanel()),!1}.bind(this)),a.find(".themesButton").on("vclick",function(){return!n.hasUnsavedContent()&&n.editorIsReady&&(n.imagePickerView&&n.imagePickerView.hide(),n.getInspiredView&&n.getInspiredView.hide(function(){n.sendMessageToEditor("panel-closed",{})}.bind(this)),n.themePicker.toggle()),!1}.bind(this)),this.updateMainToolbarState(),a.find(".theme-picker .close-button").on("vclick",function(){return n.themePicker.hide(),!1}),marvel.events.on("sync-start",function(){n.syncInProgress=!0,this.updateMainToolbarState()}.bind(this)),marvel.events.on("sync-stop",function(){n.syncInProgress=!1,this.updateMainToolbarState()}.bind(this));var D=a.find(".previewButton"),R=a.find(".presentButton");function B(e,t){if(!n.hasUnsavedContent()&&n.editorIsReady&&!D.hasClass("disabled")){a.find(".preview-wrapper").addClass("showing"),a.find(".editor-wrapper").removeClass("showing"),a.find(".main-toolbar").addClass("previewing"),a.find(".homeButton").removeClass("showing"),n.themePicker.hide();var i=n.getPreviewQueryParams(t);a.find(".preview-wrapper iframe.preview")[0].contentWindow.location.replace(G+i),n.getInspiredView&&n.getInspiredView.hide(function(){n.sendMessageToEditor("panel-closed",{})}.bind(this)),t&&t.presentMode&&(n._enteringPresentMode(),e.shiftKey||n.Fullscreen.enter()),E.trackEvent("projectPreviewed",{contextData:["projectId"]},"slate:editor")}return!1}var A=a.find(".printButton");Q()?a.addClass("print-supported"):(A.addClass("disabled"),a.addClass("print-unsupported")),n._isPrintEnabled()&&A.removeClass("hide").on("vclick",function(e){e.preventDefault(),e.stopPropagation(),this._hideSubmenus(),Q()&&this._printPage("printButton")}.bind(this)),D.on("vclick",B),R.on("vclick",function(e){return B(e,{presentMode:!0})});var M=a.find(".shareButton"),j=a.find(".uploadButton");function X(){n.themePicker=new b({el:a.find(".theme-picker"),editSession:n,compositeDoc:o.currentDoc})}j.on("vclick",function(){n._showSubmenu(".slate-share-submenu-overlay");var e=a.find(".slate-share-submenu");return f(j,e),!1}),M.on("vclick",function(){return n._hideSubmenus(),n.hasUnsavedContent()||!n.editorIsReady||j.hasClass("disabled")||(n.hasBrokenImages?alert(z.getString("share_submenu.error.photos")):window.marvel.events.trigger("share-workflow-current-doc")),!1}),this._spinnerView=new x,o.useProgressEvents=!0,o.extendPublishAnalytics=function(e){var i=n.slateModel,r=this.getDocument(),a=0,s=0,l=0,d=0,h=0,c=0,u=0,p=0,g=0,f=0,m=0,v=0;e.themename=o.getData("themeName"),e.isTitlePresent=(!!i.getTitle()).toString(),e.isSubtitlePresent=(!!i.getSubtitle()).toString(),e.isTitleImagePresent=!1,t.each(r.pages[0].sections,function(i,o){"photo-grid"==i.type?d++:"card-flipbook"==i.type?h++:"split-layout"==i.type?c++:"title"==i.type?t.each(i.content_items,function(t){"img"==t.type&&(e.isTitleImagePresent=!0)}.bind(this)):"content"==i.type&&t.each(i.content_items,function(e){if("a"==e.type){var i=e.settings;if(t.isArray(i))for(var o in i)if("embedded"==i[o].key&&1==!!i[o].value){g++;var r,a,s=n.sendMessageToEditor("get-url-info",{url:e.href},!0);try{r=JSON.parse(s)}catch(e){marvel.logger.error("Error while parsing message from Editor: "+e)}if(r&&(a=r.embedURL),a){var l=W.getEmbedType(a);l==W.embedTypes.YOUTUBE?f++:l==W.embedTypes.SPARK_VIDEO?v++:l==W.embedTypes.VIMEO&&m++;break}}else u++}}.bind(this)),t.each(i.content_items,function(e){if(e.text){a++;var i=e.text.replace(/[^a-zA-Z\s]/g,"");s+=i.split(/[\s]+/).length,t.each(e.markups,function(e){e&&"a"===e.type&&p++}.bind(this))}else e.image?l++:""!==e.text&&console.log("UNHANDLED "+JSON.stringify(e))}.bind(this))}.bind(this)),e.isTitleImagePresent=e.isTitleImagePresent.toString(),e.imageCount=l.toString(),e.photoGridCount=d.toString(),e.glideShowCount=h.toString(),e.contextualData1="splitLayoutCount:"+c.toString(),e.textSectionCount=a.toString(),e.wordCount=s.toString(),e.linkCount=u.toString(),e.inlineLinkCount=p.toString(),e.videoCount=g.toString(),e.vimeoCount=m.toString(),e.youtubeCount=f.toString(),e.sparkVideoCount=v.toString()},o.prePublish=function(){var e=n.slateModel,t=e.getTitleImageURL();(t=t&&-1==t.search(/^blob/)&&-1==t.search(/db_thumbnails/)&&-1==t.search(/rendition/)&&-1==t.search(/\/thumb/)?t:"")&&-1==t.indexOf(n.baseUrl)&&(t=n.baseUrl+"/"+t);var i=n.getThemeObject();return o.setEmbedImage(e.getTitle(),e.getSubtitle(),e.getTitleAlignment(),t,e.getTitleImageAlignment(),$.isBuiltInTheme(i)?o.getData("themeName"):i,n.authContext).then(function(){return o.saveDocument(n.slateModel.get("docModel"),{isPublishing:!0})}).catch(function(e){marvel.logger.error(e)})},o.doPublish=function(e,t,r){var a,s,l=i.defer(),d={},h=o.getDocument();h=n._addPageAssetCredits(h),window.issueJSON=h,window.issueJSON.cdn_base_url=c.lucacdn,window.issueJSON.cdn_version=H.getRuntimeVersion(),window.issueJSON.base_url="",window.issueJSON.facebook_image=window._prjtmrvlsetup.publishedContentBases.slate+"/"+r.alias+"/embed.jpg?buster="+Date.now(),window.issueJSON.twitter_image=window._prjtmrvlsetup.publishedContentBases.slate+"/"+r.alias+"/embed.jpg?buster="+Date.now(),(s=h.pages[0]).has_author=t.showAuthor||!1,s.has_author&&(s.author={first_name:t.authorFirst,last_name:t.authorLast},t.authorAvatarUrl&&(s.author.avatar_url=t.authorAvatarUrl)),s.appreciate_url=window._prjtmrvlsetup.publishedContentBases.slate+"/"+r.id,h.isSlate=!1,a=L.getHTML(L.getJSON(),"publish"),d["index.html"]=a;var u=(new Date).toUTCString();return o.setData({lastShared:u,lucaAssetLocation:r._links.self.href,cpAssetID:r.id,cpHash:r.alias,publishURL:r.publish_url}),l.resolve(d),l.promise},o.finalizePublish=function(r,a,s){var l,d=i.defer(),h=o.getDocument();(h=n._addPageAssetCredits(h)).cdn_base_url=c.lucacdn,h.cdn_version=H.getRuntimeVersion(),h.base_url="",h.brand_type="default";var u=o.getData("headerDisabled");if(a.customBranding?n.authContext&&n.authContext.activated()&&void 0!=u&&!u?h.brand_type="brandkit":h.brand_type="none":a.removeBranding&&(h.brand_type="none"),h.isSlate=!1,(l=h.pages[0]).has_author=a.showAuthor||!1,l.has_author&&(l.author={first_name:a.authorFirst,last_name:a.authorLast},a.authorAvatarUrl&&(l.author.avatar_url=a.authorAvatarUrl)),q&&n.authContext){var p;if(V){var g=o.getAllText(h),f=t.map(g,function(e){return e.charCodeAt(0)});p=n.authContext.getSubsetIdsForCharacterList(f)}var m=h.theme;$.isBuiltInTheme(m)||(h.theme.customFontFaces=N.getCustomFontData(n.authContext,m,"fonts/",!0,p))}var v=o.getData("title"),b=o.getData("publishTitle"),w=o.getSetting("newDocName"),k=o.getData("publishTitleIsUserSet");return b?k||b===v||!v&&b===w||(k=!0):k=!1,k||(b=v),h.title=b,h.contentTitle=v,o.setData({embedType:"overlay",lastPublishedHeaderDisabled:u,lastSharedTitle:b,publishTitle:b,publishTitleIsUserSet:k}),e.ajax({url:"/publish/page",method:"POST",contentType:"application/json",type:"json",data:JSON.stringify({metadata:{updateOnly:!1,resourceId:a.cpResourceId,alias:a.cpAlias,assetId:a.cpAssetId,isPublic:a.isPublic,category:o.communityCategory,subcategory:a.category?[a.category]:["other"]},content:h}),success:function(e,t,i){d.resolve(e)},error:function(e,t,i){d.reject(i)}}),d.promise},q&&(o.getFilesDataToCopyFromServerData=function(e,r,a){var s=n.authContext,l=[],d=r.getDCXComposite().current,h=d.getComponentsOf();t.each(h,function(t){l.push({source:e.id+"/"+t.id,content_type:t.type,destination:t.path})}.bind(this));var c=t.find(d.getChildrenOf(),function(e){return"page"==e.name}),u=d.getComponentsOf(c);if(t.each(u,function(t){l.push({source:e.id+"/"+t.id,destination:t.path,content_type:t.type})}.bind(this)),s){var p;if(V){var g=o.getAllText(o.getDocument()),f=t.map(g,function(e){return e.charCodeAt(0)});p=n.authContext.getSubsetIdsForCharacterList(f)}return d=s.composite.getDCXComposite().current,s.composite.getSharedCloudCollectionId().then(function(e){var i=o.getDocument(),r=N.getCustomFontsInTheme(n.authContext,i.theme);return t.each(r,function(i){if(p&&p.length)t.each(p,function(t){var n=s.getComponentForCustomFont(i,t);n&&l.push({source:e+"/"+n.id,destination:"fonts/"+n.id,content_type:n.type})});else{var n=s.getComponentForCustomFont(i);n&&l.push({source:e+"/"+n.id,destination:"fonts/"+n.id,content_type:n.type})}}),l}.bind(this))}return i.resolve(l)}),o.loadDocument().then(function(e){return F.getController().then(function(t){return t.getActiveContext(e)}).then(function(e){n.authContext=e}).thenResolve(e)}).then(function(e){var t,s=e.getMyApp();e.isNew()||(n.slateModel.set("isNewPub",!1),t=o.getDocument()),t?t.title&&n.slateModel.set("prevTitle",t.title):t=n.slateModel.get("docModel");var l=i(),d=!1;if(t.theme){if(!$.isBuiltInTheme(t.theme)){var h=s.getAuthoringContextThemeId(e);d=!n.authContext||!n.authContext.getThemeById(h)}}else n.authContext?l=l.thenResolve(n.authContext.getFormatThemes("page")).then(function(i){if(i.length){var r=i[0];s.setAuthoringContextThemeId(e,r.id,!0),o.updateJsonTheme(t,n.authContext,e)}else d=!0}):d=!0;return l.then(function(){d&&(t.theme=r.get(r.DEFAULT_THEME_NAME),s.setAuthoringContextThemeId(e,null,!0));var i=$.isBuiltInTheme(t.theme)?t.theme.name:"custom";if(o.setData("themeName",i),n.slateModel.set("docModel",t),X(),marvel.events.on("doc-authoring-context-assigned",function(e){X()}),g)if(n.authContext&&n.authContext.activated()){o.currentDoc.isNew()&&o.setData("headerDisabled",!1);var l=o.getData("headerDisabled");void 0===l&&(l=!0),p.toggleClass("checked",!l)}else p.removeClass("checked");else p.addClass("checked");o.checkAndSetBranded(t.theme),a.find(".editor")[0].contentWindow.location.replace(U+n.getPreviewQueryParams()),E.setCurrentProjectId(e.id),n._triggerProjectEditorDisplayedAnalytic(n.slateModel.get("isNewPub"))})}).done(),o.includesUploadedFonts=function(){if(q){var e=n.slateModel.get("docModel").theme;return!(!e.customFontsUsed||!e.customFontsUsed.length)}return!1},a.on("dragover.slate",function(e){return e.originalEvent.dataTransfer.dropEffect="copy",n.editorWindow.NativeApp.stopDraggingFeedback(),!1}).on("drop.slate",function(e){if(((e.originalEvent.dataTransfer||{}).files||[]).length)return!1}).on("dragleave.slate",function(e){n.editorWindow.NativeApp.stopDraggingFeedback()})}return e.extend(te.prototype,{msgCallbacks:{ready:"_handleReady","editor-ready":"_handleEditorReady","begin-modal":"_handleBeginModal","contentType-change":"_handleContentChange","image-request":"_handleImageRequest","image-request-file-select":"_handleRequestFileSelect","image-remove":"_handleRemoveImage","hide-picker":"_handleHidePicker","dropped-files":"_handleDroppedFiles","display-link-dialog":"_handleDisplayLinkDialog","handle-conflict":"_handleConflict","display-photo-attribution":"_handleDisplayAttributionDialog","display-dialog":"_handleDisplayDialog",save:"_handleSave","save-pending":"_handleSavePending","broken-image":"_handleBrokenImage","modal-enable":"_handleModalEnable","text-attribute-changed":"_handleTextAttributeChanged","caret-changed":"_handleCaretChanged","preview-ready":"_handlePreviewReady","preview-close":"_handlePreviewClose","preview-ready-print":"_handlePreviewReadyPrint","print-mode-ready":"_handlePrintModeready","print-page":"_handlePrintPage","print-complete":"_handlePrintComplete","display-popup":"_handleDisplayPopup","get-picker-width":"_handleGetPickerWidth","show-help":"_handleShowHelp","analytics-track":"_handleAnalyticsTrack","user-is-active":"_handleUserIsActive"},destroy:function(){this.$slateEle.off("dragover.slate").off("drop.slate").off("dragleave.slate"),document.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("beforeunload",this._handleBeforeUnload)},receiveMessage:function(e){var t=e.event;if(console.log("Shell received message: "+e.event,e),this.msgCallbacks.hasOwnProperty(t))return this[this.msgCallbacks[t]](e)},getURLInfo:function(e){var t=this.sendMessageToEditor("get-url-info",{url:e},!0);return JSON.parse(t)},_handleReady:function(e){var i=this.slateModel.get("docModel"),n=o.currentDoc.getDCXComposite().id;this.baseUrl=i.base_url="https://"+window.location.host+"/image_assets/slate/"+n,this.editorIsInitialized=!0,this.mouseIsDown=!1,this.$editorHTML=this.editorWindow.$("html");var a={deviceType:"web",modelVersion:H.getEditorModelVersion(),alertCycleEnabled:marvel.features.hasFeature("slate-debug-locale")?"1":null};if(a=t.extend(a,H.getEditorFeatureFlags()),this.sendMessageToEditor("preferences",a),window.marvel.logger.info("Slate Editor Preferences ("+JSON.stringify(a)+")"),$.isBuiltInTheme(this.getThemeObject())){var s=o.getData("themeName")||r.DEFAULT_THEME_NAME;i.theme=r.get(s)}else q&&this.authContext&&(i.theme.customFontFaces=N.getCustomFontData(this.authContext,i.theme));this.sendMessageToEditor("set-model",{model:i,is_refresh:this.editorRefreshed});var l=this.$editorHTML[0];l.addEventListener("mousedown",function(){this.mouseIsDown=!0}.bind(this),!0),l.addEventListener("mouseup",function(){this.mouseIsDown=!1,!0===this.showFormattingToolbarOnNextMouseup&&(this.showFormattingToolbar(),this.showFormattingToolbarOnNextMouseup=!1)}.bind(this),!0)},_handleEditorReady:function(e){this.editorIsReady=!0,this.updateMainToolbarState();var t=this;if(this.formattingToolbarView||(this.formattingToolbarView=new _({model:this.formattingToolbarModel,editSession:this}),this.formattingToolbarView.$el.on("item-type-clicked",function(e,i,n){var o=i==n?"p":i;switch(i){case"h3":case"h4":case"blockquote":case"ul.li":case"ol.li":case"p":E.trackEvent("editor:textFormatingChanged",{textFormat:i,contextData:["projectId"]},"slate:editor")}t.sendMessageToEditor("set-item-type",{type:o})}),this.formattingToolbarView.$el.on("alignment-clicked",function(e,i,n){var o=i==n?"none":i;t.sendMessageToEditor("change-text-attribute",{alignment:o}),t.formattingToolbarModel.set("alignment",o),E.trackEvent("editor:textAlignmentChanged",{contextData:["projectId"]},"slate:editor")}),this.formattingToolbarView.$el.on("markup-clicked",function(e,i,n){var o;switch(t.retainToolbarOnNextInput=!0,i){case"anchor":o={anchor:n};break;case"bold":o={bold:!0};break;case"italic":o={italic:!0}}"anchor"==i?t.displayInlineLinkDialog():(t.sendMessageToEditor("change-text-attribute",o),E.trackEvent("editor:textAttributeChanged",{type:i,contextData:["projectId"]},"slate:editor"))})),this.slateModel.get("isNewPub")){this.sendMessageToEditor("add-section",{type:"title","user-initiated":!1}),this.slateModel.set("isNewPub",!1)}if(marvel.features.hasFeature("show-slate-inspiration")&&this.$slateEle.find(".getInspiredButton").removeClass("hide"),this.$slateEle.find(".fouc").removeClass("fouc"),this.$slateEle.find(".splash-wrapper").removeClass("showing"),window.marvel.events.trigger("hide-interstitial"),window.marvel.events.trigger("editor-ready"),E.trackEvent("editor:loaded",{contextData:["projectId"]},"slate:editor"),this.$slateEle.find("iframe.editor").focus(),o.saveThumbOnLoad&&o.saveThumbOnLoad()){var i=this;this.titleImageChange().then(function(){var e=i.slateModel.get("docModel");o.saveDocument(e)}).fail(function(e){marvel.logger.error(e)})}},_triggerProjectEditorDisplayedAnalytic:function(e){E.trackEvent("project:editorDisplayed",{isNewProject:e,sparkFormat:"page",contextData:["projectId"],includesUploadedFonts:o.includesUploadedFonts()},"slate:editor")},_showSubmenu:function(e){var t=this.$slateEle.find(e);t.addClass("showing"),t.on("click.slateSubmenu",function(e){e.target===t[0]&&this._hideSubmenus()}.bind(this))},_hideSubmenus:function(){var e=this.$slateEle.find(".submenu");e.removeClass("showing"),e.off("click.slateSubmenu")},_isPrintEnabled:function(){return!0},_showSpinner:function(e){this._spinnerView.show(z.getString("slate_spinner.title")),this._spinnerView.on("cancel",this._handleCancelPrintPage.bind(this))},_hideSpinner:function(e){this._spinnerView.hide(),this._spinnerView.off("cancel")},_printPage:function(t){var i,n=e(".pdf-static-holder");if(this._showSpinner(),this.printingInProgress=!1,0===n.length){n=e("<div>").addClass("pdf-static-holder").css({position:"absolute",width:"800px",top:0,left:"-1000px",zIndex:9999,backgroundColor:"rgba(0,0,0,0.8)",textAlign:"center",padding:"2px"}),i=e("<iframe>").css({width:"100%",height:"600px"});var r=e("<button>").text(z.getString("print.preview.close")).css({padding:"6px 9px",margin:"4px"}).one("click",function(e){n.remove()}),a=e('<button class="printNowButton" disabled="true">').text(z.getString("print.preview.print")).css({padding:"6px 9px",margin:"4px"}).on("click",function(e){return this._hideSpinner(),(i=n.find(".print-preview")).length&&(this.printingInProgress=!0,i[0].focus(),i[0].contentWindow.focus(),i[0].contentWindow.printPage()),!1}.bind(this));n.append(i),n.append(r),n.append(a),e("body").append(n)}else(i=n.find(".print-preview")).remove(),i=e("<iframe>").css({width:"100%",height:"500px"}),n.append(i);i.addClass("preview").addClass("print-preview");var s=this.getPreviewQueryParams();s=s?s+"&page-mode=print":"?page-mode=print",s+="&print_preflight=1",i[0].contentWindow.isPrintPreflight=!0,i[0].contentWindow.location.replace(G+s),o.currentDoc.getMyApp().beginLongUserActivity(),this._sendPrintStartedAnalytics(t)},_handleKeyDown:function(e){if(8==e.keyCode){var t=e.target,i=t.tagName.toUpperCase();!0===t.isContentEditable||"TEXTAREA"==i||"INPUT"==i&&!{button:1,checkbox:1,file:1,image:1,radio:1,range:1,reset:1,submit:1}[t.type]||e.preventDefault()}else if(9==e.keyCode)e.preventDefault();else if(80==e.keyCode){if(Q()&&this._isPrintEnabled())e[/^Mac/.test(navigator.platform)?"metaKey":"ctrlKey"]&&(e.preventDefault(),this._printPage("keyboardShortcut"))}},beginImageProcessing:function(){return 1==++this.imageProcessingBatchCount&&this.updateMainToolbarState(),this.imageProcessingBatchCount},endImageProcessing:function(){return--this.imageProcessingBatchCount<0&&(console.error("Unbalanced endImageProcessing call!"),this.imageProcessingBatchCount=0),0===this.imageProcessingBatchCount&&this.updateMainToolbarState(),this.imageProcessingBatchCount},isProcessingImages:function(){return this.imageProcessingBatchCount>0||this.slateModel.get("pushInProgress")},isSavingContent:function(){return this.syncInProgress||this.slateModel.get("pushInProgress")},hasUnsavedContent:function(){return this.slateModel.get("savePending")||this.isProcessingImages()},isBusy:function(){return this.isSavingContent()||this.isProcessingImages()},_updateSavingIndicator:function(){var e=this.$slateEle.find(".syncButton");this.hasUnsavedContent()?e.addClass("syncing"):e.removeClass("syncing")},_handleBeforeUnload:function(e){if(this.hasUnsavedContent()&&!window.marvel.okToReload){return e.returnValue="You have unsaved changes.","You have unsaved changes."}},_addPageAssetCredits:function(e){var t=o.getDocumentCredits(),i=e&&e.pages;if(i&&t)for(var n=i.length,r=0;r<n;r++){var a=i[r];a&&(a.credits=t)}return e},_addPageAssetAuthor:function(e){if(!e||!e.pages)return e;if(o.getData("displayAuthorProfile")){var t=o.getData("authorFirstName"),i=o.getData("authorLastName"),n=o.getData("authorAvatarUrl");e.pages.forEach(function(e){e.author={first_name:t,last_name:i,avatar_url:n}})}return e},_addPageAssetBrand:function(e){if(!e)return i.resolve(e);var t=o.getData("headerDisabled");if(marvel.features.hasFeature("entitle-brand-kit"))if(t||void 0===t)e.brand_type="none";else if(this.authContext)return this.authContext.getChromeInfo().then(function(t){e.brand=this._applyDefaultBrandMappings(t),e.brand_type="brandkit",e.hasBrandChrome=!0}.bind(this)).thenResolve(e);return i.resolve(e)},_applyDefaultBrandMappings:function(e){var i=t.extend({},{splashLogo:null,splashLoadingLabelColor:"#909090",splashTextColor:"#6e6e6e",splashProgressBarColor:"#ccc",ctaBkgColor:"#35414d",ctaTextColor:"#82939d",headerLogo:null,headerBkgFloaterColor:"rgba(255,255,255,0.65)",headerBkgGradientStartColor:"rgba(255,255,255,0.6)",headerBkgGradientStopColor:"rgba(255,255,255,0)",headerBkgSectionColor:"rgba(255,255,255,1)",bumperLogo:null,bumperBkgColor:"#35414d",bumperTextColor:"#82939d"},e),o={splashLogo:["chrome-preloader-logo-href","primary-logo-href"],splashTextColor:["chrome-text-color","primary"],splashLoadingLabelColor:["chrome-text-color","alternate"],splashProgressBarColor:["chrome-text-color","alternate"],ctaBkgColor:["chrome-header-cta-background-color","primary"],ctaTextColor:["chrome-header-cta-color","alternate"],headerCta:["headerCTA","ctaLabel"],headerCtaUrl:["headerCTAURL","ctaURL"],headerCtaButtonStyle:["headerCTAButtonStyle","ctaButtonStyle"],footerCta:["footerCTA","ctaLabel"],footerCtaUrl:["footerCTAURL","ctaURL"],footerCtaButtonStyle:["footerCTAButtonStyle","ctaButtonStyle"],headerLogo:["chrome-header-logo-href","primary-logo"],headerBkgFloaterColor:"primary",headerBkgGradientStartColor:"primary",headerBkgGradientStopColor:"primary",headerBkgSectionColor:"primary",bumperLogo:["chrome-footer-logo-href","primary-logo"],bumperBkgColor:["chrome-footer-background-color","primary"],bumperTextColor:["chrome-footer-color","chrome-text-color","alternate"],twitterUrl:"twitterURL",instagramUrl:"instagramURL",facebookUrl:"facebookURL"};for(var r in o)if(!e[r]){var a=o[r];Array.isArray(a)||(a=[a]);for(var s=0,l=a.length;s<l;s++){var d=e[a[s]];if(d){i[r]=d;break}}}for(var r in i){var h=i[r];switch(r){case"headerBkgFloaterColor":i[r]=K(h,"0.95");break;case"headerBkgGradientStartColor":i[r]=K(h,"0.6");break;case"headerBkgGradientStopColor":i[r]=K(h,"0");break;case"ctaButtonStyle":i[r]="brand-cta-"+h}}var c=e["chrome-social-icons-color"];return i.facebookIcon=btoa(n.render(T,{FILL_COLOR:c,FILL_OPACITY:.85})),i.twitterIcon=btoa(n.render(I,{FILL_COLOR:c,FILL_OPACITY:.85})),i.instagramIcon=btoa(n.render(P,{FILL_COLOR:c,FILL_OPACITY:.85})),i},_handlePreviewReady:function(e){var t=this.sendMessageToEditor("get-model",{},!0),i=JSON.parse(t).model;i.preview_data={},this._addPageAssetCredits(i),this._addPageAssetAuthor(i),i.preview_data.scrollInfo=JSON.parse(this.sendMessageToEditor("get-scroll-info",{},!0)),!$.isBuiltInTheme(i.theme)&&q&&this.authContext&&(i.theme.customFontFaces=N.getCustomFontData(this.authContext,i.theme)),this._addPageAssetBrand(i).then(function(){var e=this.$slateEle.find("iframe.preview")[0].contentWindow;e.loadJSON(i,{}),e.localize(z.getLocale(),z.getFlatStrings())}.bind(this)).catch(function(e){console.error("Error loading brand values for brand kit:"),console.log(e)}).done()},_handlePreviewReadyPrint:function(t){var i=this.sendMessageToEditor("get-model",{},!0),n=JSON.parse(i).model;this._addPageAssetCredits(n),this._addPageAssetAuthor(n),!$.isBuiltInTheme(n.theme)&&q&&this.authContext&&(n.theme.customFontFaces=N.getCustomFontData(this.authContext,n.theme)),this._addPageAssetBrand(n).then(function(){e(".pdf-static-holder");e("iframe.print-preview")[0].contentWindow.loadJSON(n,{})}.bind(this)).catch(function(e){console.error("Error loading brand values for brand kit:"),console.log(e)}).done()},_handlePrintModeready:function(t){if(e(".pdf-static-holder").find(".printNowButton").prop("disabled",!1),this._hideSpinner(),!this.printingInProgress){this.printingInProgress=!0;var i=e("iframe.print-preview");i[0].contentWindow.focus(),i[0].contentWindow.printPage()}},_handlePrintPage:function(){this._printPage("keyboardShortcut")},_handleCancelPrintPage:function(){var t=e("iframe.print-preview");this.printingInProgress||t[0].contentWindow.location.replace("about:blank"),this._spinnerView.off("cancel"),o.currentDoc.getMyApp().endLongUserActivity(),this._sendPrintCanceledAnalytics("cancel")},_handlePrintComplete:function(){o.currentDoc.getMyApp().endLongUserActivity(),this.printingInProgress&&this._sendPrintCompleteAnalytics("unknown"),this.printingInProgress=!1},_sendPrintStartedAnalytics:function(e){E.trackEvent("printFlow:started",this.getBrandingAnalytics({trigger:e}),"slate:editor")},_sendPrintCanceledAnalytics:function(){E.trackEvent("printFlow:canceled",this.getBrandingAnalytics(),"slate:editor")},_sendPrintCompleteAnalytics:function(e){var t=!1,i=o.includesUploadedFonts();o.currentDoc&&o.currentDoc.getDataFromRoot&&o.currentDoc.setAndSaveDataToRoot&&((t=o.currentDoc.getDataFromRoot("cp#isExported"))||o.currentDoc.setAndSaveDataToRoot("cp#isExported",!0));F.getExportAnalytics(o.currentDoc,"default","print").then(function(n){n.isReExport=t?"true":"false",n.includesUploadedFonts=i,n.reason=e,n.exportedWithBranding&&E.trackEvent("exportedBrandedProject",n,"slate:editor"),E.trackEvent("project:exportCompleted",n,"slate:editor")}.bind(this)).done()},_handlePreviewClose:function(e){this.$slateEle.find(".preview-wrapper").removeClass("showing"),this.$slateEle.find(".preview-wrapper iframe.preview")[0].contentWindow.location.replace(j),this.$slateEle.find(".editor-wrapper").addClass("showing"),this.$slateEle.find(".main-toolbar").removeClass("previewing"),this.$slateEle.find(".homeButton").addClass("showing"),this._exitingPreviewOrPresentMode()},_handleBeginModal:function(t){this.$slateEle.find(".cancelButton").removeAttr("disabled"),this.showToolbar(".slate .modal-toolbar",t.title),e(".editor-wrapper").addClass("modal")},_handleModalEnable:function(e){!1===e.enabled||"false"===e.enabled?this.$slateEle.find(".doneButton").addClass("disabled"):this.$slateEle.find(".doneButton").removeClass("disabled")},titleImageChange:function(){marvel.events.trigger("sync-start",!0);var e,t=this,n=this.slateModel,r=this.titleImageUrl=n.getTitleImageURL(),a=/^[^\:]{2,6}\:/.test(r);return!(r&&-1==r.search(/^blob/)&&-1==r.search(/db_thumbnails/)&&-1==r.search(/rendition/)&&-1==r.search(/\/thumb/)&&-1==r.search(/\/preview/)&&-1==r.search(/flickr/)&&-1==r.search(/unsplash/)&&-1==r.search(/\/get/)&&-1==r.search(/\.fbcdn\.net/)&&-1==r.search(/\.ftcdn\.net/)&&-1==r.search(/\.cdninstagram\.com/)&&-1==r.search(/bing/)&&-1==r.search(/google/))&&r?(t._isSavingTitleImage=!0,i.resolve()):D.execute("Slate Title Image",!1,function(i){e=n.getTitleImageAlignment(),o.setWebCoverImage(r,e),r&&!a&&-1==r.indexOf(t.baseUrl)&&(r=t.baseUrl+"/"+r),i.promises.push(o.copyThumbnailFrom(r,e))}).then(function(e){return t._isSavingTitleImage=!1,e})},_handleContentChange:function(t){this.formattingToolbarModel.set("contentType",t.params.contentType),this.formattingToolbarModel.set("alignment",t.params.alignment),e(".editor-wrapper").hasClass("modal")||this.showToolbar(".slate .main-toolbar")},_handleTextAttributeChanged:function(e){e.params&&this.formattingToolbarModel.set("markups",{bold:"true"===e.params.bold,italic:"true"===e.params.italic,anchor:e.params.anchor||!1})},_handleCaretChanged:function(e){var t=this.editorWindow.getSelection(),i=t.toString().length;if(t.rangeCount>0){var n=e.params,o=n.reason,r=n.sourceEvent;this.formattingToolbarModel.set("caretMetrics",n.caretMetrics);var a=!1;if("input"==o)this.retainToolbarOnNextInput&&(this.retainToolbarOnNextInput=!1,a=!0);else if("keyboard"==o)if(i>0)a=!0;else{var s=/^Mac/.test(navigator.platform)?"metaKey":"ctrlKey";r&&r[s]&&65==r.keyCode&&(a=!0)}else"itemTypeChange"==o?a=!0:"mouse"==o&&(this.mouseIsDown?this.showFormattingToolbarOnNextMouseup=!0:a=!0);a?this.showFormattingToolbar():this.hideFormattingToolbar()}},showFormattingToolbar:function(){this._isFreeUser()&&E.trackEvent("viewedTextToolbar",this.getBrandingAnalytics({trigger:"page:texttoolbar"}),"slate:editor"),this.formattingToolbarModel.set("show",!0)},hideFormattingToolbar:function(){this.formattingToolbarModel.set("show",!1)},showToolbar:function(t,i){e(".slate .toolbar").removeClass("show"),e(t).addClass("show").find(".title").text(i||"")},_handlePushChange:function(){this.slateModel.set("pushInProgress",this.pendingImages.length>0),this.updateMainToolbarState()},_handleSaveContext:function(e,t,i){this.saveContext(e,t,i)},_handleDeleteContext:function(e){this.deleteContext(e)},_handlePendingImageResponse:function(e,t){t&&J(e,t),this.sendMessageToEditor("image-response",e,!0)},_handlePendingImageError:function(e,t){console.error("Error handling selected image:",t);var i=null,n=null;t&&(t.hasOwnProperty("status")?((n=i=t.status)>1e3&&(n-=1e5*Math.floor(n/1e5)),t.transload&&(i=t.responseText&&-1!=t.responseText.search(/download/i)?"TRNSDNLD"+n:"TRNSUPLD"+n)):t.hasOwnProperty("code")&&(n=i=t.code,"UNEXPECTED_RESPONSE"==t.code&&(i=t.message))),this._showImageErrorDialog(n,i),this.sendMessageToEditor("image-error",{source:e},!0)},_imageErrorCodeToType:{0:"no.connect",404:"not.found",413:"too.large",415:"invalid.type",503:"service.unavailable",504:"service.unavailable",NETWORK_ERROR:"no.connect"},_showImageErrorDialog:function(e,t){var i="default";null!==e&&(i=this._imageErrorCodeToType[e]||"default");var n,o=z.getString("error.images."+i+".title"),r=z.getString("error.images."+i+".body");null!==t&&(n=z.format("error.images.status.code",{code:t})),this.showDialog({title:o,content:r,remark:n,buttons:[z.getString("error.images.dismiss")]})},updateToolbarDisabled:function(){var e=this.$slateEle.find(".previewButton, .uploadButton, .settingsButton, .presentButton, .syncButton, .themesButton, .getInspiredButton");this.hasUnsavedContent()||!this.editorIsReady?e.addClass("disabled"):(e.removeClass("disabled"),o&&o.currentDoc&&o.currentDoc.isNew()&&this.$slateEle.find(".previewButton, .uploadButton, .settingsButton, .presentButton").addClass("disabled"))},updateMainToolbarState:function(){this._updateSavingIndicator(),this.updateToolbarDisabled()},showPicker:function(e){this.imagePickerView||(this.imagePickerView=new a({image_filter:["jpg","jpeg","png","image/jpeg","image/png"],lightroomImporter:!0}),this.imagePickerView.on("wantPageReload",function(e){return!0}),this.imagePickerView.setCallbacks(t.bind(this._handleImageServiceFiles,this),t.bind(this._handleLocalFiles,this)),this.imagePickerView.setElement(".image-picker-container"),this.imagePickerView.render()),this.imagePickerView.show(e)},hidePicker:function(){this.imagePickerView&&this.imagePickerView.hide(),this.themePicker.hide(),this.getInspiredView&&this.getInspiredView.hide(function(){this.sendMessageToEditor("panel-closed",{})}.bind(this))},_handleImageRequest:function(e){this.slateModel.set("source",e.source),this.slateModel.set("maxDimension",e.maxDimension||1024),this.slateModel.set("detectPanoramas",e.detectPanoramas),this.slateModel.set("multiSelect",e.multiSelect),this.slateModel.set("replacedUUID",e.uuid);var t=this.getContext(e.uuid);this.showPicker({context:t,multiSelect:e.multiSelect,suppressServiceUI:e.suppressServiceUI})},_handleRequestFileSelect:function(e){this.imagePickerView.requestFileSelect()},_handleRemoveImage:function(e){for(var t=e.imageSources,i=0,n=t.length;i<n;i++){var r=t[i].source,a=t[i].uuid;this.pendingImages.removeBySource(r),t[i].isTitleImage&&o.clearWebCoverImage(),o.removeImage(a)}},_handleHidePicker:function(e){this.hidePicker()},_handleDisplayLinkDialog:function(e){e.embedded?this.displayEmbeddedLinkDialog(!0,e.location,e):this.displayLinkDialog(!0,e.location,e)},_handleConflict:function(e){this.displayConflictDialog(e)},saveEditorCaretState:function(){var e=this.sendMessageToEditor("set-editor-context",{paused:!0},!0);return JSON.parse(e)},restoreEditorCaretState:function(e){var t=this.sendMessageToEditor("set-editor-context",{paused:!1,clearContext:e},!0);return JSON.parse(t)},sendMessageToEditor:function(e,t,i){if(i)return this.editorWindow.NativeApp.fromNative(e,t);var n={source:"adobe-spark-page-editor",name:e,data:t};this.editorWindow.postMessage(n,"*")},_handleLinkDialogDone:function(){if(this.sendMessageToEditor("insert-link",this.linkData),this.linkData.embedded)if(this.linkData.href){var e,t,i=this.sendMessageToEditor("get-url-info",{url:this.linkData.href},!0);try{e=JSON.parse(i)}catch(e){marvel.logger.error("Error while parsing message from Editor: "+e)}if(e&&(t=e.embedURL),t){var n=W.getEmbedType(t);for(var o in W.embedTypes)if(W.embedTypes[o]==n){E.trackEvent("editor:embededLinkAdded",{contextData:["projectId"],embedType:o},"slate:editor");break}}}else marvel.logger.error("Error - href property missing on embed link data: "+this.linkData);else E.trackEvent("editor:linkAdded",{contextData:["projectId"]},"slate:editor")},_handleInlineLinkDialogDone:function(){this.restoreEditorCaretState(),this.sendMessageToEditor("change-text-attribute",{anchor:this.inlineLinkData.href}),E.trackEvent("editor:inlineLinkAdded",{contextData:["projectId"]},"slate:editor")},_handleInlineLinkDialogCancel:function(){this.restoreEditorCaretState()},_handleInlineLinkDialogRemove:function(){this.restoreEditorCaretState(),this.sendMessageToEditor("change-text-attribute",{anchor:""})},_handleLinkDialogCancel:function(){this.sendMessageToEditor("link-canceled",{source:this.linkData.source})},displayLinkDialog:function(t,i,n){this._linkDialogOverlay&&!this._linkDialogOverlay.$el.hasClass("hide")?(this.linkData.location=n.location,this.linkData.source=n.source?n.source:this.linkData.source,this._linkDialogOverlay.positionDialog()):(this._linkDialogOverlay||(this._linkDialogOverlay=new p(this.getURLInfo.bind(this)),this._linkDialogOverlay.model.on("change:linkData",this._handleLinkDialogDone,this),this._linkDialogOverlay.on("cancel",this._handleLinkDialogCancel,this)),this.linkData=e.extend({},n),this._linkDialogOverlay.populate(this.linkData),this._linkDialogOverlay.showOverlay())},displayEmbeddedLinkDialog:function(t,i,n){this._embeddedLinkDialogOverlay&&!this._embeddedLinkDialogOverlay.$el.hasClass("hide")?(this.linkData.location=n.location,this.linkData.source=n.source?n.source:this.linkData.source,this._embeddedLinkDialogOverlay.positionDialog()):(this._embeddedLinkDialogOverlay||(this._embeddedLinkDialogOverlay=new g(this.getURLInfo.bind(this)),this._embeddedLinkDialogOverlay.model.on("change:linkData",this._handleLinkDialogDone,this),this._embeddedLinkDialogOverlay.on("cancel",this._handleLinkDialogCancel,this)),this.linkData=e.extend({},n),this._embeddedLinkDialogOverlay.populate(this.linkData),this._embeddedLinkDialogOverlay.showOverlay())},displayInlineLinkDialog:function(){var t=((this.saveEditorCaretState()||{}).caretMetrics||{}).extent,i={href:this.formattingToolbarModel.get("markups").anchor,location:t};this._inlinelinkDialogOverlay&&!this._inlinelinkDialogOverlay.$el.hasClass("hide")?(this.inlineLinkData.location=i.location,this._inlineLinkDialogOverlay.positionDialog()):(this._inlineLinkDialogOverlay||(this._inlineLinkDialogOverlay=new f(this.getURLInfo.bind(this)),this._inlineLinkDialogOverlay.model.on("change:linkData",this._handleInlineLinkDialogDone,this),this._inlineLinkDialogOverlay.on("cancel",this._handleInlineLinkDialogCancel,this),this._inlineLinkDialogOverlay.on("remove",this._handleInlineLinkDialogRemove,this)),this.formattingToolbarModel.set("show",!1),this.inlineLinkData=e.extend({},i),this._inlineLinkDialogOverlay.populate(this.inlineLinkData),this._inlineLinkDialogOverlay.showOverlay())},displayConflictDialog:function(e){var t=this;this._conflictDialogOverlay||(this._conflictDialogOverlay=new u,this._conflictDialogOverlay.on("conflict-dialog-push",function(){t._handleConflictPush(e)}),this._conflictDialogOverlay.on("conflict-dialog-pull",function(){t._handleConflictPull(e)}),this._conflictDialogOverlay.on("conflict-dialog-show",function(){t.saveEditorCaretState()}),this._conflictDialogOverlay.on("conflict-dialog-hide",function(){t.restoreEditorCaretState()})),this._conflictDialogOverlay.setDatetime(e.datetime),this._conflictDialogOverlay.showOverlay()},_handleConflictPush:function(e){o.saveDocument(this.slateModel.get("docModel"),{override:!0}),this._conflictDialogOverlay.hideOverlay()},_handleConflictPull:function(e){e.pushBeforePull?e.pushBeforePull().then(function(){window.marvel.okToReload=!0,window.location.reload()}).catch(function(e){console.error("handleConflictPull failed to pushBeforePull and caught "+e,e),window.marvel.okToReload=!0,window.location.reload()}):(window.marvel.okToReload=!0,window.location.reload())},_handleEditorDialogCancel:function(){this.sendMessageToEditor("dialog-dismissed",{selectedIndex:-1})},_handleEditorDialogDone:function(){var e=this._editorDialogOverlay.model.get("index");this.sendMessageToEditor("dialog-dismissed",{selectedIndex:e})},_handleDisplayGetInspiredPanel:function(){this.getInspiredView||(this.getInspiredView=new s,this.getInspiredView.setElement(".get-inspired-panel"),this.getInspiredView.category="slate-inspiration",this.getInspiredView.render()),this.getInspiredView.show(function(){this.sendMessageToEditor("panel-opened",{})}.bind(this))},getBrandingAnalytics:function(t){var i={contextData:["projectId"]};return t&&e.extend(i,t),i},_isFreeUser:function(){return!this._isEntitledUser()},_userHasBrandkit:function(){return this.authContext.activated()},_isEntitledUser:function(){return marvel.features.hasFeature("entitle-brand-kit")},_handleDisplayAttributionDialog:function(e){var t={license:{image_id:e.license.image_id,owner:e.license.owner,photo_name:e.license.photo_name,source_name:e.license.source_name,type:e.license.type,source_url:e.license.source_url,licenseObject:e.license},imageSource:e.source,path:e.path,uuid:e.uuid},i={editorEl$:this.$slateEle,location:e.location,licenseUpdatedCallback:this._licensedUpdatedFromImageAttributionDialog.bind(this),calcLocationFromIcon:!1};a.displayAttributionDialog(t,i).then(function(e){this.sendMessageToEditor("popup-dismissed",{})}.bind(this),function(e){marvel.logger.error("editSession.displayAttributionDialog returned err",e)}.bind(this))},_licensedUpdatedFromImageAttributionDialog:function(e,t){var i={uuid:t.uuid,original:{link:e.href,width:e.width,height:e.height}},n=t.imageSource,o=[],r=i.original,a={width:r.width,height:r.height};this.beginImageProcessing(),t.license.type=e.licenseType,o.push({uuid:t.uuid,path:t.path,imageSize:a,is_preview:!0,is_new:!1,license:t.license});var s={source:n,images:o},l=this.getContext(t.uuid),d=(this.sendMessageToEditor("image-response",s,!0),{source:n,serviceSource:"adobestock",imageSize:a,maxDimension:this.slateModel.get("maxDimension"),previewUUID:t.uuid}),h=this.pendingImages.insert("service",d),c=function(e){return{title:e.photo_name,owner:{name:e.owner},source:{name:e.source_name},context:{href:e.source_url},license:{short_name:e.type},image_id:e.image_id}}(t.license);c.searchText=l.search_string,h.load(i,c),this.endImageProcessing(),console.log("Licensed It!")},_handleDisplayDialog:function(e){this.showDialog(e)},_handleHidePopup:function(){this._popupDialogOverlay&&this._popupDialogOverlay.hideOverlay()},_handleDisplayPopup:function(e){e.content;var t=!e.uncloseable,i=C.toString(),n={fields:{content:e.content,title:e.title},location:e.location,el:".popup-dialog-overlay",template:i};if(marvel._dialogShowing){if(!this._popupDialogOverlay||this._popupDialogOverlay.$el.hasClass("hide"))return void console.log("Other dialog already showing");this._popupDialogOverlay.model.set({location:e.location})}this._popupDialogOverlay?this._popupDialogOverlay.update(n):(this._popupDialogOverlay=new w(n),this._popupDialogOverlay.on("cancel",function(){this.sendMessageToEditor("popup-dismissed",{})}.bind(this))),this._popupDialogOverlay.showOverlay(),t||this._popupDialogOverlay.unclosable()},_handleGetPickerWidth:function(e){var t=this.$slateEle.find(".photo-picker"),i=t.length?t.width():301;this.sendMessageToEditor("picker-width",{width:i})},_handleShowHelp:function(e){this.showHelp(e.context)},showHelp:function(e){switch(e){case"glideshow":this._showHelpForGlideshow()}},_showHelpForGlideshow:function(){this._helpDialogOverlay||(this._helpDialogOverlay=new v),this._helpDialogOverlay.populate({title:z.getString("dialog.help.glideshow.title"),video:{width:640,height:364,autoplay:!0,source:[{src:c.lucacdn+"videos/GlideshowTutorial_web.mp4",type:"video/mp4"},{src:c.lucacdn+"videos/GlideshowTutorial_web.webm",type:"video/webm"}]},content:z.getString("dialog.help.glideshow.content"),buttonOK:z.getString("dialog.help.glideshow.button.ok")}),this._helpDialogOverlay.showOverlay()},_handleAnalyticsTrack:function(e){var i=t.extend({sparkFormat:"page",contextData:["projectId"]},e.eventData);switch(e.eventName){case"presentMode:began":case"presentMode:advanced":case"presentMode:ended":E.trackEvent(e.eventName,i,e.pageName)}},_handleUserIsActive:function(){o.currentDoc.getMyApp().userIsActive()},isCollaborationEnabled:function(){return o.currentDoc.getMyApp().isCollaborationEnabled()},restartPresentModeInactivityTimer:function(){0!==X&&Z()},_enteringPresentMode:function(){marvel.logger.traceflow("baton-timeout","_enteringPresentMode"),this.isCollaborationEnabled()&&(this._inPresentMode=!0,Z(),o.currentDoc.getMyApp().beginLongUserActivity())},_exitingPreviewOrPresentMode:function(){marvel.logger.traceflow("baton-timeout","_exitingPreviewOrPresentMode"),this.isCollaborationEnabled()&&this._inPresentMode&&(this._inPresentMode=!1,X?(ee(),o.currentDoc.getMyApp().endLongUserActivity()):window.location.reload())},_handleSavePending:function(e){this.slateModel.set("savePending",!0),this.updateMainToolbarState()},_handleModelChangeForAA:function(e,i){var n=0,o=0,r=0,a=0,s=i.pages[0].sections;for(var l in s)if("photo-grid"==s[l].type&&r++,"card-flipbook"==s[l].type&&n++,"split-layout"==s[l].type&&o++,"content"==s[l].type){var d=s[l].content_items;for(var h in d)d[h].text&&"img"!=d[h].type&&"a"!=d[h].type&&a++}if(t.isArray(e.pages)){var c=e.pages[0].sections;for(var l in c)if("photo-grid"==c[l].type&&r--,"card-flipbook"==c[l].type&&n--,"split-layout"==c[l].type&&o--,"content"==c[l].type){d=c[l].content_items;for(var h in d)d[h].text&&"img"!=d[h].type&&"a"!=d[h].type&&a--}}n>0?t.times(n,function(){E.trackEvent("editor:glideShowAdded",{contextData:["projectId"]},"slate:editor")}):t.times(Math.abs(n),function(){E.trackEvent("editor:glideShowRemoved",{contextData:["projectId"]},"slate:editor")}),o>0?t.times(o,function(){E.trackEvent("editor:splitLayoutAdded",{contextData:["projectId"]},"slate:editor")}):t.times(Math.abs(o),function(){E.trackEvent("editor:splitLayoutRemoved",{contextData:["projectId"]},"slate:editor")}),r>0?t.times(r,function(){E.trackEvent("editor:photoGridAdded",{contextData:["projectId"]},"slate:editor")}):t.times(Math.abs(r),function(){E.trackEvent("editor:photoGridRemoved",{contextData:["projectId"]},"slate:editor")}),a>0?t.times(a,function(){E.trackEvent("editor:textContentItemAdded",{contextData:["projectId"]},"slate:editor")}):t.times(Math.abs(a),function(){E.trackEvent("editor:textContentItemRemoved",{contextData:["projectId"]},"slate:editor")})},_handleSave:function(e){var t=e.changes,n=e.refresh?jQuery.extend(!0,{},e.model):e.model,r=this.slateModel.get("docModel");this._handleModelChangeForAA(r,n),this.slateModel.set("docModel",n);var a=i.resolve();if((t.titleImagePosition||t.titleImage)&&(a=this.titleImageChange()),t.titleImage&&E.trackEvent("editor:titleImageChanged",{contextData:["projectId"]},"slate:editor"),"string"==typeof t.titleText){var s=this.slateModel.get("prevTitle"),l=o.getSetting("newDocName"),d=o.getCompositeName();d!=s&&d!=l||o.setCompositeName(t.titleText),o.setData("title",t.titleText),o.getData("publishTitleIsUserSet")||o.setData("publishTitle",t.titleText||l),this.slateModel.set("prevTitle",t.titleText),E.trackEvent("editor:titleChanged",{contextData:["projectId"]},"slate:editor")}"string"==typeof t.subtitleText&&E.trackEvent("editor:subTitleChanged",{contextData:["projectId"]},"slate:editor");var h=this,c=!1;"model_version"in t&&(c=!0),a.then(function(){o.saveDocument(n,{skipContentModifiedTimestamp:c}).then(function(){h.slateModel.set("savePending",!1),h.updateMainToolbarState()})}),e.refresh&&setTimeout(function(){h.editorIsInitialized=!1,h.editorIsReady=!1,h.editorRefreshed=!0,h.$slateEle.find(".editor")[0].contentWindow.location.replace(U+h.getPreviewQueryParams())},0)},_handleBrokenImage:function(e){var t=e.count;this.hasBrokenImages=t>0},showDialog:function(e){this._editorDialogOverlay&&!this._editorDialogOverlay.$el.hasClass("hide")||(this._editorDialogOverlay||(this._editorDialogOverlay=new m,this._editorDialogOverlay.on("select",this._handleEditorDialogDone,this),this._editorDialogOverlay.on("cancel",this._handleEditorDialogCancel,this)),this._editorDialogOverlay.populate(e),this._editorDialogOverlay.showOverlay())},scaleImageToMax:function(e,t,n){var o=i.defer(),r=document.createElement("img");function a(e){o.reject(e||new Error("Unknown"))}return r.onload=function(){try{var e=r.height,i=r.width;if(e*i>16777216)throw new Error("Image too large");var s=1;if(n&&i>t&&e>t){var l=Math.min(i,e);s=t/l}else if(!n&&(i>t||e>t)){var d=Math.max(i,e);s=t/d}i*=s,e*=s;var c=document.createElement("canvas");c.width=i,c.height=e,c.getContext("2d").drawImage(r,0,0,i,e);var u=h(c.toDataURL("image/jpg")),p=URL.createObjectURL(u),g=document.createElement("img");g.onload=function(){o.resolve({blob:u,url:p,width:i,height:e})},g.onerror=a,g.src=p}catch(e){a(e)}},r.onerror=a,r.src=e,o.promise},captureImageSourceUpdates:function(e){var t={};if(!e)return t;"string"==typeof e&&(e=JSON.parse(e)),e.pickerSource&&this.slateModel.set("source",e.pickerSource);var i=e.imageSources;return i&&i.forEach(function(e){t[e.uuid]=e.source}),t.imageSource=e.imageSource,t},mostRecentContext:null,isFirstContextSave:!0,saveContext:function(e,t,i){var n=o.getData("imagePickerContexts")||[];this.isFirstContextSave&&(this.isFirstContextSave=!1,n=this.clearUnusedContexts(n));var r,a=-1,s=n.filter(function(t,i){var n=t.asset_id==e;return n&&-1==a&&(a=i),n})[0];s?(s={},n[a]=s):(s={},n.push(s)),r="google photos"==t?"GooglePhotos":"facebook"==t?"Facebook":"cc"==t?"CC":t.charAt(0).toUpperCase()+t.slice(1),s.class_name=r+"ImagePickerContext",s.asset_id=e,"dooplo"==t||"adobestock"==t?s.search_string=i.searchText:"google photos"==t?(s.album_id=i.albumId,s.album_name=i.albumName):"facebook"==t?(s.album_id=i.albumId,s.album_name=i.albumName):(s.path=i.path,s.album_name=i.albumName),o.setData("imagePickerContexts",n),this.mostRecentContext=s},getContext:function(e){var i=o.getData("imagePickerContexts")||[];return t.find(i,function(t){return t.asset_id===e})||this.mostRecentContext},deleteContext:function(e){if("ALL"!==e)for(var t=o.getData("imagePickerContexts")||[],i=t.length;i--;){if(t[i].asset_id===e){t.splice(i,1),o.setData("imagePickerContexts",t);break}}else o.setData("imagePickerContexts",[])},clearMostRecentContext:function(){this.mostRecentContext=null},clearUnusedContexts:function(e){var i=t.zipObject(this.getDocumentImageUUIDs());return e=e.filter(function(e){return i.hasOwnProperty(e.asset_id)})},getDocumentImageUUIDs:function(){var e=[],t=o.getDocument();return t.pages&&t.pages.forEach(function(t){t.sections.forEach(function(t){t.content_items.forEach(function(t){var i=t.image&&t.image.id;i&&e.push(i)})})}),e},getServiceSource:function(e){var t=e.source.toLowerCase();return"creative cloud"===t&&(t="cc"),t},_handleImageServiceFiles:function(e,t){var i,n=Array.isArray(t)?t:[t],o=this.slateModel.get("replacedUUID");if(e&&e.length){var r=[];for(this.beginImageProcessing(),i=0;i<e.length;i++){var a=e[i],s=M(),l=this.slateModel.get("source");a.uuid=s,a.info=n[i],this.saveContext(s,this.getServiceSource(a),a.info);var d=a.thumbnail||a.preview||a.original,h=a.original||a.preview||a.thumbnail,c={width:h.width,height:h.height};r.push({uuid:s,path:A.setQueryParam(d.link,"nonresponsive","true"),imageSize:c,is_preview:!0,is_new:!0,caption:a.caption})}var u={source:l,images:r};J(u,n);var p=this.sendMessageToEditor("image-response",u,!0),g=this.captureImageSourceUpdates(p);e.forEach(function(e){var t=g[e.uuid]||l,i=this.pendingImages.insert("service",{source:t,serviceSource:this.getServiceSource(e),imageSize:c,maxDimension:this.slateModel.get("maxDimension"),previewUUID:e.uuid,replacedUUID:o});i.load(e,e.info),console.log("pending: ",i,e,e.info)}.bind(this)),this.endImageProcessing()}},_showProgressBarView:function(e){var t=this._miniProgressBarOverlay;t||(t=this._miniProgressBarOverlay=new k({el:".mini-progress-bar-overlay"})),t.showOverlay(),t.setTitle(e||""),t.setProgress(0)},_hideProgressBarView:function(){this._miniProgressBarOverlay&&this._miniProgressBarOverlay.hideOverlay()},_setProgressBarViewProgress:function(e){this._miniProgressBarOverlay&&this._miniProgressBarOverlay.setProgress(e)},_setProgressBarViewLabel:function(e){this._miniProgressBarOverlay&&this._miniProgressBarOverlay.setProgressLabel(e||"")},setTheme:function(e,t){o.setData("themeName",e),t?o.currentDoc.trigger("authoring-context-theme-assigned",t.id):o.currentDoc.trigger("authoring-context-theme-assigned",null);var i=t||r.get(e);this.sendMessageToEditor("theme",i),o.checkAndSetBranded(i),E.trackEvent("themeChange",{themeName:e,contextData:["projectId"]},"slate:editor")},getThemeObject:function(){return this.slateModel.get("docModel").theme},getPreviewQueryParams:function(e){e=e||{};var t="?";$.isBuiltInTheme(this.getThemeObject())&&(t+="theme="+o.getData("themeName")+"&");e.presentMode&&(t+="page-mode=presentation&");var i=z.getLocale();return t+="locale="+i+"&",t+="localeStringsPath="+encodeURIComponent(z.getLocaleStringsPath(i,"luca-editor"))},getThemeId:function(){var e=this.getThemeObject();return $.isBuiltInTheme(e)?o.getData("themeName"):e.id},_handleLocalFiles:function(e){var n=this.slateModel.get("replacedUUID");if(e&&e.length){var o=this;this.beginImageProcessing(),this.clearMostRecentContext();var r=t.toArray(e),a=this.slateModel.get("source"),s=this.slateModel.get("maxDimension"),l=this.slateModel.get("detectPanoramas"),d=r.map(function(e){return this._createLocalFilePreviewRequest(e,s,l)}.bind(this));this._processLocalFilePreviewRequests(d).then(function(e){return i.allSettled(e)}).done(function(e){var t=e.filter(function(e){return"fulfilled"===e.state}).map(function(e){return e.value}),i=e.length-t.length,r=i===e.length;if(i>0&&(this._showImageCreatingPreviewErrorDialog(e.length,i),r))o.endImageProcessing();else{var s=t.map(function(e){return e.data}),l=this.sendMessageToEditor("image-response",{source:a,images:s},!0),d=this.captureImageSourceUpdates(l);t.forEach(function(e){var t=d[e.data.uuid]||a;this.pendingImages.insert("local",{source:t,imageSize:e.data.imageSize,maxDimension:this.slateModel.get("maxDimension"),replacedUUID:n}).load(e)}.bind(this)),o.endImageProcessing()}}.bind(this))}},_showImageCreatingPreviewErrorDialog:function(e,t){var i,o=e>1,r=t===e,a={count:o?t:null},s=z.format("error.images.creating.preview.title.unavailable",{count:t});i=o?r?z.getString("error.images.creating.preview.body.all"):z.getString("error.images.creating.preview.body.some"):z.getString("error.images.creating.preview.body.single"),this.showDialog({title:n.render(s,a),content:i,buttons:[z.getString("error.images.dismiss")]})},_handleDroppedFiles:function(e){var t=e.data,i=e.x,n=e.y,o=this.sendMessageToEditor("get-source-for-coordinates",{x:i,y:n},!0);o&&(this.slateModel.set("source",o),this.slateModel.set("maxDimension",2560),this.slateModel.set("replacedUUID",null),this._handleLocalFiles(t.files))},_cachedImagePlaceholder:null,_createLocalFilePreviewRequest:function(e,t,n){var o=i.defer(),r=function(e){h.data.imageSize.width=e.width,h.data.imageSize.height=e.height,h.data.path=e.url,o.resolve(h)},a=function(e){return console.warn("Image preview could not be generated.",e),this._cachedImagePlaceholder?this._cachedImagePlaceholder:this.scaleImageToMax("/slate-web/images/image-placeholder.png",t,n)}.bind(this),s=function(e){return this._cachedImagePlaceholder=e,r(e)}.bind(this),l=function(e){o.reject(e||new Error("Unknown"))},d=new FileReader;d.onload=function(e){var i=e.target.result;this.scaleImageToMax(i,t,n).then(r).catch(a).then(s).catch(l)}.bind(this),d.onerror=a;var h={file:e,mimeType:e.type||"image/jpeg",data:{uuid:M(),path:"",imageSize:{width:0,height:0},is_new:!0,is_preview:!0},getRenderingPreview:function(){try{d.readAsDataURL(e)}catch(e){a(e)}return o.promise}};return h},_processLocalFilePreviewRequests:function(e){var t=i.defer(),n=[],o=0,r=e.length;z.getString("progress.creating.photo.previews.count.label"),z.getString("progress.complete.count.label");if(r>1){var a=z.format("progress.creating.photo.previews.count.label",{count:r});this._showProgressBarView(a)}var s=function(){if(o<r){var i=e[o++].getRenderingPreview();if(n.push(i),r>1){var a=z.format("progress.complete.count.label",{current:o,count:r});this._setProgressBarViewLabel(a),this._setProgressBarViewProgress(o/r*100)}setTimeout(s,0)}else this._hideProgressBarView(),t.resolve(n)}.bind(this);return s(),t.promise}}),te}.apply(t,n))||(e.exports=o)},2606:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(7),i(2607),i(103),i(2608)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";return i.View.extend({events:{"click .close-button":"handleClose","click .usecases li":"handleSelectUseCase","click .sp-dropdown-2":"openDropdown"},handleClose:function(){this.$el.removeClass("showing")},createOption:function(e){var t=new i.Model(e);return e.viewObj=new a({model:t,analyticsContext:this.category}),e.viewObj.$el},openDropdown:function(t){e(t.currentTarget).toggleClass("active")},isShowing:function(){return this.$el.hasClass("showing")},handleSelectUseCase:function(t){t.preventDefault();var i,n=e(t.currentTarget).data("value");n&&n.length&&(i="All"!=n?this.exampleList.filter(function(e){return e.useCase===n}):this.exampleList,this.renderExamples(i,!1))},renderExamples:function(e,i){this.featured$.empty();var n=[];t.each(e,function(e){i&&n.push(e.useCase),this.featured$.append(this.createOption(e))}.bind(this)),i&&(n=n.sort(),t.each(n,function(e){this.usecases$.append('<li data-value="'+e+'">'+e+"</li>")}.bind(this)))},render:function(){return this.$el.html(o.toString()),this.featured$=this.$el.find(".get-inspired-panel-wrapper"),this.usecases$=this.$el.find(".usecases"),r.getCategoryFavorites(this.category).then(function(e){this.exampleList=e,this.renderExamples(e,!0),this.$el.find(".more-to-come").addClass("hide")}.bind(this)).done(),this},show:function(e){window.setTimeout(function(){this.isShowing()||(this.$el.addClass("showing"),e&&"function"==typeof e&&e())}.bind(this),0)},hide:function(e){this.isShowing()&&(this.$el.removeClass("showing"),e&&"function"==typeof e&&e())},toggle:function(){this.isShowing()?this.hide():this.show()},remove:function(){this.$el.empty()}})}.apply(t,n))||(e.exports=o)},2607:function(e,t){e.exports='<div class="title-bar">Inspiration Gallery\n    <div class="close-button"></div>\n</div>\n<div class="intro">\n    <p>See examples to help inspire you:</p>\n    <div class="sp-dropdown-2" tabindex="1">\n        <span>Select a category</span>\n        <ul class="usecases dropdown">\n            <li data-value="All">All</li>\n        </ul>\n    </div>\n</div>\n<br />\n<br />\n<p>Our favorite Spark Pages</p>\n<div class="more-to-come"></div>\n<div class="get-inspired-panel-wrapper"></div>\n'},2608:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(4),i(2609)],void 0===(o=function(e,t,i,n,o){"use strict";return i.View.extend({tagName:"article",className:"panel-option",events:{"click .panel-item":"handleExampleClick"},handleExampleClick:function(){n.trackLink("clickedOnGetInspiredExample",{contextString:this.analyticsContext,hash_id:this.model.get("alias"),useCase:this.model.get("useCase"),formatType:this.model.get("type")},"editor")},initialize:function(e){e&&e.analyticsContext&&(this.analyticsContext=e.analyticsContext),this.render()},_getExampleUrl:function(){var e=this.model.get("type");return"theo"===e?"https://spark.adobe.com/post/"+this.model.get("alias"):"slate"===e?"https://spark.adobe.com/page/"+this.model.get("alias"):"video"===e?"https://spark.adobe.com/video/"+this.model.get("alias"):"#"},render:function(){this.$el.html(o.toString());var e=this.model.get("thumbMedURI");return this.label$=this.$el.find(".example-label"),this.$el.find(".example-link").attr("href",this._getExampleUrl()),this.$el.find(".panel-item").css("background-image","url("+e+")"),this.label$.text(this.model.get("useCase")),this}})}.apply(t,n))||(e.exports=o)},2609:function(e,t){e.exports='<h3 class="example-label"></h3>\n<a href="" target="_blank" class="example-link">\n    <button class="example panel-item"></button>\n</a>\n'},2610:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(37)],void 0===(o=function(e,t,i,n){"use strict";return i.Model.extend({defaults:{docModel:null,source:"",isNewPub:!0,prevTitle:"",titleImagePositionX:.5,titleImagePositionY:.5,pushInProgress:!1},initialize:function(e,t){this.set("docModel",{id:n(),publication_id:n(),title:""})},getThemeName:function(){var e=this.get("docModel");if(e&&e.theme)return e.theme.name},getTitleImageURL:function(){var e,t=this.get("docModel");if(t&&t.pages&&t.pages[0].sections)return t.pages[0].sections[0].content_items.forEach(function(t){"img"==t.type&&t.image&&(e=t.image.image_url)}),e},getTitle:function(){var e,t=this.get("docModel");if(t&&t.pages&&t.pages[0].sections)return t.pages[0].sections[0].content_items.forEach(function(t){"title"==t.type&&(e=t.text)}),e},getSubtitle:function(){var e,t=this.get("docModel");if(t&&t.pages&&t.pages[0].sections)return t.pages[0].sections[0].content_items.forEach(function(t){"subtitle"==t.type&&(e=t.text)}),e},getTitleAlignment:function(){var e=this.get("docModel");if(e&&e.pages&&e.pages[0].sections){var t="title-center";return e.pages[0].sections[0].settings.forEach(function(e){var i=e.key,n=e.value;"title_align"==i&&(t=n)}),t}},getTitleImageAlignment:function(){var e=this.get("docModel"),t="50% 50%";e&&e.pages&&e.pages[0].sections&&e.pages[0].sections[0].content_items.forEach(function(e){"img"==e.type&&e.settings&&e.settings.forEach(function(e){"image_align"==e.key&&(t=e.value)})});return t}})}.apply(t,n))||(e.exports=o)},2611:function(e,t,i){var n,o;n=[i(28),i(1),i(37)],void 0===(o=function(e,t,i){"use strict";function n(e){return{jpg:".jpg",png:".png","image/png":".png","image/jpeg":".jpg","image/pjpeg":".jpg"}[e]||""}var o=t.Model.extend({_imagePending:!0,_imageLoading:!1,imageResponse:null,contextValues:null,error:null,stage:0,pendingCollection:null,initialize:function(e,t){this.pendingCollection=t.pendingCollection,this.listenTo(this,"remove",this._handleRemove)},_handleRemove:function(e,t,i){var n=this.get("previewUUID");n&&this.pendingCollection.trigger("delete-context",n)},validatePending:function(){if(!this.collection)throw o.ABORTED},isPending:function(){return this._imagePending},isLoading:function(){return this._imageLoading},loadingStart:function(){this._imageLoading=!0},loadingComplete:function(e){e||(e="pendingComplete"),this._imagePending=!1,this._imageLoading=!1,this.trigger(e,this)},imageErrorHandler:function(e){e!==o.ABORTED&&(e&&e.hasOwnProperty("status")&&this.stage>1&&(e.status+=1e5*this.stage),this.error=e,this.loadingComplete("pendingError"))},postImage:function(){if(!this.imageResponse)throw new Error("Cannot post image response before it is available.");if(this.contextValues){var e=["save-context"].concat(this.contextValues);this.pendingCollection.trigger.apply(this.pendingCollection,e)}this.pendingCollection.trigger("image-response",this.imageResponse.data,this.imageResponse.info)},postError:function(){if(!this.error)throw new Error("Cannot post error without there first being an error.");var e=this.get("source");this.pendingCollection.trigger("image-error",e,this.error)},getRequestImageSize:function(){var e=this.get("maxDimension")||2560,t=this.get("imageSize")||{},i=t.width||2560,n=t.height||2560;return Math.min(Math.max(e,Math.round(e*(n/i))),8192)},load:function(){}});o.ABORTED=new Error("Image request no longer valid.");var r=o.extend({load:function(e){this.loadingStart();var t=this.get("source"),o=this.get("replacedUUID"),r=i(),a=e.mimeType,s=n(a),l="images/"+r+s,d=this.pendingCollection.storage,h=d.currentDoc.getDCXComposite().current;return this.stage++,d.currentDoc.pushComponent({name:"image",relationship:"image",type:a,path:l,file:e.file,parent:h.getChildrenOf()[0]}).then(function(e){this.validatePending(),o&&d.removeImage(o);var t=this.getRequestImageSize(),i=Date.now();return this.stage++,d.getImage("/"+l,{size:t},i)}.bind(this)).then(function(e){this.imageResponse={data:{source:t,images:[{uuid:r,path:e.path,is_new:!1,is_preview:!1,imageSize:{width:e.size.width,height:e.size.height}}]}},this.loadingComplete()}.bind(this)).catch(this.imageErrorHandler.bind(this))}}),a=o.extend({load:function(e,t){this.loadingStart();var o=this.get("source"),r=this.get("serviceSource"),a=this.get("replacedUUID"),s=e.original||e.preview||e.thumbnail,l=i(),d=e.mimeType||"image/jpg",h=n(d),c="images/"+l+h,u=this.pendingCollection.storage,p=u.currentDoc.getDCXComposite().current;this.stage++;var g={name:"image",relationship:"image",type:d,path:c,parent:p.getChildrenOf()[0],copyFrom:{source:r,assetId:s.link,largeRenditionRequest:e.largeRenditionRequest}};return(e.largeRenditionRequest?e.largeRenditionRequest().then(function(e){g.copyFrom.assetId=e}).finally(function(){return u.currentDoc.pushComponent(g)}):u.currentDoc.pushComponent(g)).then(function(e){this.validatePending(),a&&u.removeImage(a);var t=this.getRequestImageSize(),i=Date.now();return this.stage++,u.getImage("/"+c,{size:t},i)}.bind(this)).then(function(e){this.contextValues=[l,r,t],this.imageResponse={data:{source:o,images:[{uuid:l,path:e.path,is_preview:!1,is_new:!1,imageSize:{width:e.size.width,height:e.size.height}}]},info:t},this.loadingComplete()}.bind(this)).catch(function(e){e.transload=!0,this.imageErrorHandler(e)}.bind(this))}}),s=t.Collection.extend({storage:null,debugEnabled:!1,initialize:function(e,t){if(!t||!t.storage)throw new Error("PendingImagesCollection option `storage` is required.");this.storage=t.storage,t.hasOwnProperty("debugEnabled")&&(this.debugEnabled=t.debugEnabled),this.logger=t.logger||console},insert:function(e,t){var i=this.createImageByType(e,t),n=this.getGroup(i.get("source"));return n.add(i),this.add(n),this.debug("ImageAdd"),i},removeBySource:function(e){this.getGroup(e).remove()},createImageByType:function(e,t){switch(e){case"service":return new a(t,{pendingCollection:this});case"local":return new r(t,{pendingCollection:this});default:throw new Error("Unrecognized pending image type provided.")}},getGroup:function(e){var t=this.findWhere({source:e});return t||new l({source:e})},debug:function(e){if(this.debugEnabled){var t={},i=function(e,t){return e.isPending()?e.isLoading()?"Load":"New":"Done"};this.length?this.each(function(e,n){t[e.get("source")]=e.images.map(i)}):t["[EMPTY]"]=[],this.logger.table?this.logger.table(t):this.logger.log(JSON.stringify(t)),e&&(e="^ "+e,this.logger.debug?this.logger.debug(e):this.logger.log(e))}}}),l=t.Model.extend({initialize:function(e,i){this.images=new t.Collection,this.listenTo(this.images,"pendingComplete",this._handlePendingComplete),this.listenTo(this.images,"pendingError",this._handlePendingError)},add:function(t,i){i=e.defaults({at:0},i),this.images.add(t,i)},_handlePendingComplete:function(e){this.collection.debug("ImageDone"),this.isNewestImage(e)?this.postPendingImage(e):this.cleanUpTo(e)},_handlePendingError:function(e){this.collection.debug("ImageError");var t=this.isNewestImage(e);if(this.images.remove(e),this.collection.debug("ImageClean"),t){if(e.postError(),!this.images.length)return void this.remove();var i=this.images.at(0);if(!i.isPending())return void this.postPendingImage(i)}},cleanUpTo:function(e){for(var t=this.images.length,i=t;--i&&this.images.at(i)!==e;)this.images.pop();t!==this.images.length&&this.collection.debug("ImageClean")},isNewestImage:function(e){return 0===this.images.indexOf(e)},postPendingImage:function(e){e.postImage(),this.remove()},remove:function(){for(;this.images.length;)this.images.pop();var e=this.collection;e&&(e.remove(this),e.debug("GroupClean"))}});return s}.apply(t,n))||(e.exports=o)},2612:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(3),i(418),i(2613),i(115),i(15),i(1717)],void 0===(o=function(e,t,i,n,o,r,a,s,l){"use strict";var d=i.Model.extend({defaults:{linkData:null,alignment:null}});return o.extend({el:".link-dialog-overlay",events:{"click .cancelButton":"_handleCancel","click .doneButton":"_handleDoneBtn","click .link-dialog-bg":"_handleCancel","click .alignmentButton":"_handleAlignButton","change .linkText":"_validate","change .linkHref":"_validate","keyup .linkText":"_validate","keyup .linkHref":"_validate"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.urlInfoFunction=e,this.model=new d,t.extend(this,i.Events),this.model.on("change:alignment",this._handleAlignmentChange)},populate:function(e){this.linkData=e,this.model.set({linkData:null},{silent:!0}),this.$el.find(".linkText").attr("value",e.text?e.text.trim():""),this.$el.find(".linkHref").attr("value",e.href?e.href.trim():""),this._validate()},testForValidUrl:function(e){var t=this.urlInfoFunction(e);return t&&t.valid},_validate:function(){var e=this.$el.find(".linkText").val(),t=this.$el.find(".linkHref").val(),i=void 0!==e&&e.length&&void 0!==t&&t.length;this.$el.find(".doneButton").prop("disabled",!i)},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},_handleDoneBtn:function(){var e=this.$el.find(".linkHref").val().trim(),t=this.$el.find(".linkHref");if(!this.testForValidUrl(e))return this.$el.find(".url-advice").removeClass("hide"),this.$el.find(".link-dialog-shell").addClass("validation-error"),t[0].focus(),void this.positionDialog();this.linkData.text=this.$el.find(".linkText").val().trim(),this.linkData.href=e,this.linkData.alignment=this.model.get("alignment"),this.model.set({linkData:this.linkData}),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===s.DOM_VK_ESCAPE?this._handleCancel():e.keyCode!==s.DOM_VK_RETURN&&e.keyCode!==s.DOM_VK_ENTER||this.$el.find(".doneButton").prop("disabled")||this._handleDoneBtn()},_handleAlignmentChange:function(){var t=this.model.get("alignment");e(".alignmentButton").removeClass("checked"),e(".alignmentButton."+t).addClass("checked")},_handleAlignButton:function(t){console.log("_handleAlignButton");var i=e(t.target).data("alignment");this.model.set({alignment:i})},positionDialog:function(){var e,t,i,n,o,r,a=this.$el.find(".link-dialog-shell"),s=a.width(),l=a.height(),d=a.parent(),h=0,c=!0,u=!0;if(a.length>0&&this.linkData&&this.linkData.location){for(e=this.linkData.location,d=a.parent();!h&&d.length;)"absolute"===(o=d.css("position"))||"relative"===o||"fixed"===o?(h=d.width(),n=d.height()):d=d.parent();l+9>e.top?(t=e.top+e.height+9-2,u=!1):t=e.top-l-9,t+l>n&&(t=n-l,c=!1),i=e.x-s/2,i=Math.max(i,0),r=a.find(".pointer"),u?r.removeClass("at-top"):r.addClass("at-top"),c?r.removeClass("hide"):r.addClass("hide"),a.css({top:t+"px",left:i+"px"})}},render:function(){var e;return this.$el.html(a.renderMustache(r.toString())),this.title$=this.$el.find(".link-dialog-overlay-title"),this.linkData&&(e=void 0!==this.linkData.text?this.linkData.text.trim():"",this.title$.text(a.format(e.length?"dialog.link.edit_button":"dialog.link.add_button")),this.$el.find(".linkText").attr("value",e),this.$el.find(".linkHref").attr("value",this.linkData.href?this.linkData.href.trim():""),this.model.set({alignment:this.linkData.alignment}),this.model.trigger("change:alignment")),this.positionDialog(),this._validate(),this.$el.css("opacity","0"),setTimeout(function(){this.$el.find(".linkText")[0].focus(),this.positionDialog(),this.$el.css("opacity","1")}.bind(this),0),this}})}.apply(t,n))||(e.exports=o)},2613:function(e,t){e.exports='<div class="link-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="link-dialog-shell mrvl-overlay-shell dialog">\n\n  <h2 class="link-dialog-overlay-title">{{locString.link_dialog.title}}</h2>\n\n  <input type=\'text\' placeholder=\'{{locString.link_dialog.link.placeholder}}\' class="linkText" class="initial" value=""/>\n  <input type=\'text\' placeholder=\'www.example.com\' class="linkHref" class="initial" value=""/>\n\n  <p class="url-advice hide">{{locString.link_dialog.advice}}</p>\n\n  <h2 class="alignmentLabel">{{locString.link_dialog.alignment}}</h2>\n\n  <p class="alignmentRadioButtons">\n    <button class="alignmentButton left checked" data-alignment="left"></button>\n    <button class="alignmentButton center" data-alignment="center"></button>\n    <button class="alignmentButton right" data-alignment="right"></button>\n  </p>\n\n  <div class="dismissalButtons">\n    <button class="doneButton primary-button">{{locString.link_dialog.button.save}}</button>\n    <button class="cancelButton secondary-button">{{locString.link_dialog.button.cancel}}</button>\n  </div>\n\n  <div class="pointer"></div>\n</div>\n'},2614:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(3),i(115),i(418),i(2615),i(15),i(1717)],void 0===(o=function(e,t,i,n,o,r,a,s,l){"use strict";var d=i.Model.extend({defaults:{linkData:null}});return r.extend({el:".embedded-link-dialog-overlay",events:{"click .cancelButton":"_handleCancel","click .doneButton":"_handleDoneBtn","click .embedded-link-dialog-bg":"_handleCancel","input .linkHref":"_validate"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.urlInfoFunction=e,this.model=new d,t.extend(this,i.Events)},populate:function(e){this.linkData=e,this.model.set({linkData:null},{silent:!0}),this.$el.find(".linkHref").attr("value",e.href?e.href.trim():""),this._validate()},testForValidUrl:function(e){var t=this.urlInfoFunction(e);return t&&t.valid&&t.embeddable},_validate:function(){var e=this.$el.find(".linkHref").val(),t=void 0!==e&&e.length;this.$el.find(".doneButton").prop("disabled",!t)},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},_handleDoneBtn:function(){var e=this.$el.find(".linkHref").val().trim(),t=this.$el.find(".linkHref");if(!this.testForValidUrl(e))return this.$el.find(".url-advice").removeClass("hide"),this.$el.find(".embedded-link-dialog-shell").addClass("validation-error"),t[0].focus(),void this.positionDialog();this.linkData.text="Video",this.linkData.href=e,this.model.set({linkData:this.linkData}),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===s.DOM_VK_ESCAPE?this._handleCancel():e.keyCode!==s.DOM_VK_RETURN&&e.keyCode!==s.DOM_VK_ENTER||this.$el.find(".doneButton").prop("disabled")||this._handleDoneBtn()},positionDialog:function(){var e,t,i,n,o,r,a=this.$el.find(".embedded-link-dialog-shell"),s=a.width(),l=a.height(),d=a.parent(),h=0,c=!0,u=!0;if(a.length>0&&this.linkData&&this.linkData.location){for(e=this.linkData.location,d=a.parent();!h&&d.length;)"absolute"===(o=d.css("position"))||"relative"===o||"fixed"===o?(h=d.width(),n=d.height()):d=d.parent();l+9>e.top?(t=e.top+e.height+9-2,u=!1):t=e.top-l-9,t+l>n&&(t=n-l,c=!1),i=e.x-s/2,i=Math.max(i,0),r=a.find(".pointer"),u?r.removeClass("at-top"):r.addClass("at-top"),c?r.removeClass("hide"):r.addClass("hide"),a.css({top:t+"px",left:i+"px"})}},render:function(){var e;return this.$el.html(o.renderMustache(a.toString())),this.title$=this.$el.find(".embedded-link-dialog-overlay-title"),this.linkData&&(e=void 0!==this.linkData.text?this.linkData.text.trim():"",this.title$.text(o.format(e.length?"dialog.embedded_link.edit_video":"dialog.embedded_link.add_video")),this.$el.find(".linkHref").attr("value",this.linkData.href?this.linkData.href.trim():"")),this.positionDialog(),this._validate(),this.$el.css("opacity","0"),setTimeout(function(){this.$el.find(".linkHref")[0].focus(),this.positionDialog(),this.$el.css("opacity","1")}.bind(this),0),this}})}.apply(t,n))||(e.exports=o)},2615:function(e,t){e.exports='<div class="embedded-link-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="embedded-link-dialog-shell mrvl-overlay-shell dialog">\n\n  <h2 class="embedded-link-dialog-overlay-title">{{locString.embedded_link_dialog.title}}</h2>\n\n  <input type=\'text\' placeholder=\'www.youtube.com/watch?v=<id>\' class="linkHref" class="initial" value=""/>\n\n  <p class="url-advice"> {{locString.embedded_link_dialog.advice}}</p>\n\n  <div class="dismissalButtons">\n    <button class="doneButton primary-button">{{locString.embedded_link_dialog.button.save}}</button>\n    <button class="cancelButton secondary-button">{{locString.embedded_link_dialog.button.cancel}}</button>\n  </div>\n\n  <div class="pointer"></div>\n</div>\n'},2616:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(3),i(115),i(418),i(2617),i(15)],void 0===(o=function(e,t,i,n,o,r,a,s){"use strict";var l=i.Model.extend({defaults:{linkData:null}});return r.extend({el:".inline-link-dialog-overlay",events:{"click .removeButton":"_handleRemove","click .cancelButton":"_handleCancel","click .doneButton":"_handleDoneBtn","click .inline-link-dialog-bg":"_handleCancel","input .linkHref":"_validate"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.urlInfoFunction=e,this.model=new l,t.extend(this,i.Events)},populate:function(e){this.linkData=e,this.model.set({linkData:null},{silent:!0}),this.$el.find(".linkHref").attr("value",e.href?e.href.trim():""),this._validate()},testForValidUrl:function(e){var t=this.urlInfoFunction(e);return t&&t.valid},_validate:function(){var e=!!this.$el.find(".linkHref").val();this.$el.find(".doneButton").prop("disabled",!e)},_handleRemove:function(){this.trigger("remove"),this.handleCloseBtn()},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},_handleDoneBtn:function(){var e=this.$el.find(".linkHref"),t=e.val().trim();if(!this.testForValidUrl(t))return this.$el.find(".url-advice").removeClass("hide"),this.$el.find(".inline-link-dialog-shell").addClass("validation-error"),e[0].focus(),void this.positionDialog();this.linkData.href=t,this.model.set({linkData:this.linkData}),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===s.DOM_VK_ESCAPE?this._handleCancel():e.keyCode!==s.DOM_VK_RETURN&&e.keyCode!==s.DOM_VK_ENTER||this.$el.find(".doneButton").prop("disabled")||this._handleDoneBtn()},positionDialog:function(){var e,t,i,n,o,r=this.$el.find(".inline-link-dialog-shell"),a=r.width(),s=r.height(),l=r.parent(),d=0,h=0,c=!0,u=!0;if(r.length>0&&this.linkData&&this.linkData.location){for(e=this.linkData.location,l=r.parent();!d&&l.length;)"absolute"===(n=l.css("position"))||"relative"===n||"fixed"===n?(d=l.width(),h=l.height()):l=l.parent();s+9>e.top?(t=e.top+e.height+9-2,u=!1):t=e.top-s-9,t+s>h&&(t=h-s,c=!1),i=e.left-a/2,i=Math.max(i,0),o=r.find(".pointer"),u?o.removeClass("at-top"):o.addClass("at-top"),c?o.removeClass("hide"):o.addClass("hide"),r.css({top:t+"px",left:i+"px"})}},render:function(){return this.$el.html(o.renderMustache(a.toString())),this.linkData&&this.$el.find(".linkHref").attr("value",this.linkData.href?this.linkData.href.trim():""),this.linkData&&this.linkData.href&&this.linkData.href.length>0?this.$el.find(".removeButton").addClass("show"):this.$el.find(".removeButton").removeClass("show"),this.positionDialog(),this._validate(),this.$el.css("opacity","0"),setTimeout(function(){this.$el.find(".linkHref")[0].focus(),this.positionDialog(),this.$el.css("opacity","1")}.bind(this),0),this}})}.apply(t,n))||(e.exports=o)},2617:function(e,t){e.exports='<div class="inline-link-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="inline-link-dialog-shell mrvl-overlay-shell dialog">\n\n  <h2 class="inline-link-dialog-overlay-title">{{locString.inline_link_dialog.title}}</h2>\n\n  <input type=\'text\' placeholder=\'www.example.com\' class="linkHref" class="initial" value=""/>\n\n  <p class="url-advice hide">{{locString.inline_link_dialog.advice}}</p>\n\n  <div class="dismissalButtons">\n    <button class="doneButton primary-button">{{locString.inline_link_dialog.button.save}}</button>\n    <button class="cancelButton secondary-button">{{locString.inline_link_dialog.button.cancel}}</button>\n  </div>\n\n  <button class="removeButton"></button>\n\n  <div class="pointer"></div>\n</div>\n'},2618:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(3),i(1467),i(1718),i(15)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s=i.Model.extend({defaults:{index:void 0}});return o.extend({el:".editor-dialog-overlay",events:{"click .x-close-btn":"_handleCancel","click .mrvl-overlay-bg":"_handleCancel"},initialize:function(){t.bindAll(this,t.functionsIn(this)),this.model=new s,t.extend(this,i.Events)},populate:function(e){e&&(this.data=e),this.$el.find(".title").text(this.data.title),this.$el.find(".content").text(this.data.content),this.$el.find(".remark").text(this.data.remark)},_handleButton:function(t){var i=parseInt(e(t.target).data("ordinal"),10);console.log("clicked button "+i),this.model.set({index:i}),this.trigger("select"),this.handleCloseBtn()},render:function(){var t,i;if(this.$el.html(r.toString()),this.data&&(this.populate(),this.data.buttons)){var n=this.$el.find(".buttons"),o=this.data.buttonOptions;if(!o)(o=[])[a=this.data.buttons.length-1]={style:"primary"};var a=this.data.buttons.length-1;for(t=0;t<this.data.buttons.length;t++){var s=this.data.buttons[t],l=o[t];i=e("<button>").addClass("button mrvl-btn"+(t===a?" confirm-btn":" cancel-btn")).attr("data-ordinal",t).text(s),l&&l.style&&i.addClass(l.style),n.append(i)}n.find(".button").click(this._handleButton)}return this}})}.apply(t,n))||(e.exports=o)},2619:function(e,t,i){var n,o;n=[i(418),i(2620)],void 0===(o=function(e,t){"use strict";return e.extend({el:".help-video-dialog-overlay",events:{"click .ok-btn":"_handleDismiss","click .mrvl-overlay-bg":"_handleDismiss"},initialize:function(){this.data=null},populate:function(e){this.data=e},_handleDismiss:function(e){this.hideOverlay()},hideOverlay:function(){var t=this.$el.find(".video"),i=t.find("video")[0];return i&&i.pause(),t.empty(),e.prototype.hideOverlay.call(this)},_getVideoEl:function(){var e=this.data.video,t=$("<video>");e.width&&t.attr("width",e.width),e.height&&t.attr("height",e.height),e.autoplay&&t.attr("autoplay","");for(var i=0,n=e.source.length;i<n;i++){var o=e.source[i],r=$("<source>");r.attr({src:o.src,type:o.type}),t.append(r)}return t},render:function(){return this.$el.html(t),this.$(".title").text(this.data.title),this.$(".video").append(this._getVideoEl()),this.$(".content").text(this.data.content),this.$(".ok-btn").text(this.data.buttonOK),this}})}.apply(t,n))||(e.exports=o)},2620:function(e,t){e.exports='<div class="help-video-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="help-video-dialog-shell mrvl-overlay-shell">\n    <div class="video"></div>\n    <div class="help-video-content-shell mrvl-overlay-content-shell">\n        <h2 class="title dialog-title"></h2>\n        <div class="mrvl-overlay-content">\n            <p class="content"></p>\n        </div>\n        <div class="mrvl-dlg-btn-acts buttons">\n            <button class="ok-btn confirm-btn mrvl-btn"></button>\n        </div>\n    </div>\n</div>\n'},2621:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(3),i(34),i(7),i(16),i(369),i(4),i(1049),i(1468),i(115),i(1180)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h,c,u){"use strict";var p=[{name:"Storybook"},{name:"Trek"},{name:"Nightcap"},{name:"Crisp"},{name:"Whimsy"},{name:"Vintage"},{name:"Baldwin"},{name:"Chic"},{name:"Tereza"},{name:"Wiper"},{name:"Bruce"},{name:"Wesley"},{name:"Luca"}];function g(e){return a.getController().then(function(t){return t.getActiveContext(e)})}return i.View.extend({events:{"vclick .theme-button":"_handleClickTheme","vclick .edit-theme-button":"_handleClickEditTheme","vclick .upgrade-button":"_handleClickUpgrade"},initialize:function(e){this.editSession=e.editSession,this.doc=e.compositeDoc,this.themes=[],this.$wrapper=this.$(".theme-wrapper"),this.$spinner=this.$(".more-to-come"),t.bindAll(this,"render"),this.setThemes(e.themes||p)},setThemes:function(e){this.themes=e&&e.length?e:null,this.$wrapper.addClass("hide"),this.$spinner.removeClass("hide");var t=r.hasFeature("entitle-brand-kit");n().then(function(){return t?this._getBrandedPickerMetadata():[]}.bind(this)).then(function(e){e&&e.length&&(this.themes?this.themes=[e,this.themes]:this.themes=e)}.bind(this)).then(this.render).done()},_handleClickTheme:function(t){if(this.editSession.editorIsInitialized){var i=e(t.target),n=i.data("theme-id"),o=i.data("theme-name"),r=i.data("theme-data"),a=function(){this._updateThemeButtonSelection(n),this.editSession.setTheme(o,r)}.bind(this);u.isBuiltInTheme(r)?a():(l.trackEvent("clickCustomTheme",this.editSession.getBrandingAnalytics({trigger:"page:themepicker"}),"slate:editor"),this._validateCustomThemeSelection(r).then(function(e){e&&a()}).catch(function(e){console.error("Unexpected error attempting to validate selected theme",e)}).done())}return!1},_handleClickEditTheme:function(t){var i=e(t.target),n=i.data("theme-brand-id"),o=i.data("theme-id"),r=h.getValueFor("page");window.marvel.navigate("/branding/"+n+"/themes/"+o+"/page/"+r,{trigger:!0})},_handleClickUpgrade:function(e){l.trackEvent("clickedMerchandisingCTA",this.editSession.getBrandingAnalytics({trigger:"page:themepicker"}),"slate:editor"),o.showMerchPopover({touchpointName:"page:themepicker",anchorLocation:e.target.getBoundingClientRect()}).done()},_validateCustomThemeSelection:function(e){if(!r.hasFeature("enable-collaboration"))return n(!0);return n().then(function(){return this.doc.getMyApp().getFontsUsedFromSlateTheme(e,this.doc)}.bind(this)).then(function(e){return n.all([function(e){return t.filter(e,function(e){return"user-uploaded"===e.source})}(e),g(this.doc)])}.bind(this)).spread(a.verifyFontsUsed).then(function(e){if(!e.length)return!0;var t={missingFonts:e,doc:this.doc,defer:n.defer()};return window.marvel.events.trigger("missing-brand-fonts-ux",t),t.defer.promise}.bind(this))},_getBrandedPickerMetadata:function(){return g(this.doc).then(function(e){return[e,e?e.getFormatThemes("page"):[]]}).spread(function(e,i){return i=t.map(i,function(t){return{name:"custom",branded:!0,context:e,component:t,themeData:t.getValue("theme#data")}})})},_updateThemeButtonSelection:function(t){this.$(".theme-button, .edit-theme-button").removeClass("selected"),this.$(".theme-button-wrapper").each(function(i,n){var o=e(n).find(".theme-button");if(o.data("theme-id")===t){o.addClass("selected");var r=o.data("theme-meta");if(r&&r.context.belongsToUser())e(n).find(".edit-theme-button").addClass("selected")}})},isShowing:function(){return this.$el.hasClass("showing")},show:function(){window.setTimeout(function(){this.isShowing()||(r.hasFeature("entitle-brand-kit")||l.trackEvent("viewedThemePicker",this.editSession.getBrandingAnalytics({trigger:"page:themepicker"}),"slate:editor"),this.$el.addClass("showing"),this.editSession.sendMessageToEditor("panel-opened",{}))}.bind(this),0)},hide:function(){this.isShowing()&&(this.$el.removeClass("showing"),this.editSession.sendMessageToEditor("panel-closed",{}))},toggle:function(){this.isShowing()?this.hide():this.show()},render:function(){this.$wrapper.empty();var i=this.themes;if(i&&i.length){var n=new s,o=t.isArray(i[0]),a=r.hasFeature("entitle-brand-kit");if(o)this._renderButtonGroup(i[0],"theme_picker.brand_group.title",n),this._renderButtonGroup(i[1],"theme_picker.builtin_group.title",n);else if(this._renderButtonGroup(this.themes,null,n),!a){var l=c.getString("theme_picker.upgrade_button.text");this._createThemeButton("upgrade-wrapper","upgrade-button").prependTo(this.$wrapper).children(".theme-button").removeClass("theme-button").append(e("<span>").text(l))}return this._updateThemeButtonSelection(this.editSession.getThemeId()),n.bind("wp-image-loader-empty",function(){this.$wrapper.removeClass("hide"),this.$spinner.addClass("hide")}.bind(this)),n.start(),this}},_renderButtonGroup:function(t,i,n){var o=this.$wrapper,r=i?c.format(i):i;if(r){var a=new d({name:r}).render();a.$el.appendTo(o),o=a.$content}for(var s=0;s<t.length;s++){var l=t[s],h=l.name||"",u=h,p=this._createThemeButton("",h.toLowerCase()+"-theme"),g=p.children(".theme-button");if(l.branded){var f=l.context.getThemeThumbnailHref(l.component);n.add(f),u=l.component.id,g.data("theme-meta",l).data("theme-data",l.themeData).css("background-image","url("+f+")")}g.data({"theme-name":h,"theme-id":u}),"theme_picker.brand_group.title"===i&&e(document.createElement("button")).addClass("edit-theme-button").attr("title",c.getString("theme_picker.edit_theme_shortcut")).data("theme-brand-id",l.themeData.brandId).data("theme-id",l.themeData.id).appendTo(p),p.appendTo(o)}return o},_createThemeButton:function(t,i){var n=e(document.createElement("div")).addClass("theme-button-wrapper").addClass(t);e(document.createElement("button")).addClass("theme-button").addClass(i).appendTo(n);return n}})}.apply(t,n))||(e.exports=o)},2622:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(3),i(1467),i(2623)],void 0===(o=function(e,t,i,n,o,r){"use strict";return o.extend({el:".mini-progressbar-overlay",template:r.toString(),setProgress:function(e){e=(e=e||0)<0?0:e>100?100:e,this.$progress.css("width",e+"%")},setTitle:function(e){this.$title.text(e||"")},setProgressLabel:function(e){this.$progressLabel.text(e)},render:function(){return this._tagDict={},this.$el.html(r.toString()),this.$shell=this.$el.find(".mini-progress-bar-shell"),this.$progress=this.$el.find(".progress"),this.$title=this.$el.find(".title"),this.$progressLabel=this.$el.find(".progress-label"),this},_handleCancel:function(){}})}.apply(t,n))||(e.exports=o)},2623:function(e,t){e.exports='<div class="mini-progress-bar-bg mrvl-overlay-bg">\n</div>\n<div class="mini-progress-bar-shell mrvl-overlay-shell">\n  <div class="label title"></div><div class="progress-bar"><div class="progress"></div></div><div class="label progress-label"></div>\n</div>\n'},2624:function(e,t,i){var n,o;n=[i(0),i(28),i(1)],void 0===(o=function(e,t,i){"use strict";return i.Model.extend({defaults:{show:!1,caretMetrics:null,contentType:null,markups:{anchor:"",bold:!1,italic:!1},alignment:null}})}.apply(t,n))||(e.exports=o)},2625:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(3),i(34),i(7),i(2626)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";return i.View.extend({itemTypeSupportsToolbar:{p:!0,h3:!0,h4:!0,blockquote:!0,"ol.li":!0,"ul.li":!0},itemTypeSupportsAlignment:{p:!0,h3:!0,h4:!0,caption:!0},itemTypeSupportsMarkups:{caption:!0,p:!0,"ol.li":!0,"ul.li":!0},el:".formatting-toolbar",events:{"click .item-type-buttons .button":"_handleItemTypeButtonClick","click .markup-buttons .button":"_handleMarkupButtonClick","click .text-align-buttons .button":"_handleAlignmentButtonClick","click .upgrade-buttons .button":"_handleUpgradeButtonClick"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,i.Events),this.editSession=e.editSession,this.listenTo(this.model,"change",this.render),this.$el.html(a.toString()),this.$itemTypeButtons=this.$el.find(".button.item-type"),this.$anchorButton=this.$el.find(".anchorButton"),this.$boldButton=this.$el.find(".boldButton"),this.$italicButton=this.$el.find(".italicsButton"),this.$alignmentButtons=this.$el.find(".text-align-buttons .button"),this.render()},_handleItemTypeButtonClick:function(t){var i=e(t.target).data("type"),n=this.model.get("contentType");this.$el.trigger("item-type-clicked",[i,n])},_handleMarkupButtonClick:function(t){if(this.itemTypeSupportsMarkups[this.model.get("contentType")]){var i="bold",n=e(t.target);n.hasClass("italicsButton")?i="italic":n.hasClass("anchorButton")&&(i="anchor"),this.$el.trigger("markup-clicked",[i,"http://example.com"])}},_handleAlignmentButtonClick:function(t){var i=e(t.target).data("alignment"),n=this.model.get("alignment");this.$el.trigger("alignment-clicked",[i,n])},_handleUpgradeButtonClick:function(e){o.showMerchPopover({touchpointName:"page:texttoolbar",anchorLocation:e.target.getBoundingClientRect()}).done()},position:function(){var e=this.$el,t=this.editSession.editorWindow.getSelection();t.toString().length;if(t.rangeCount>0){var i=window.innerWidth,n=e.outerWidth(),o=e.outerHeight(),r=(this.model.get("caretMetrics")||{}).extent||{},a=r.left,s=r.top;if(void 0===a||void 0===s){var l=t.focusNode;l.nodeType==Node.TEXT_NODE&&(l=l.parentNode);var d=l.getClientRects()[0];a=d?d.left:0,s=d?d.top:0}var h=Math.max(25,a+r.width/2-n/2),c=Math.max(0,s-o-10);h>=i-n&&(h=i-n-25),r.bottom<o&&(c+=o),e.css({top:Math.round(c),left:Math.round(h)})}},show:function(){this.itemTypeSupportsToolbar[this.model.get("contentType")]?this.$el.addClass("show"):this.hide()},hide:function(){this.$el.removeClass("show")},render:function(){for(var e=this.model.get("contentType"),t=0,i=this.$itemTypeButtons.length;t<i;t++){var n=this.$itemTypeButtons.eq(t);n.data("type")==e?n.addClass("active"):n.removeClass("active")}var o=this.model.get("alignment"),a=this.itemTypeSupportsAlignment[e];for(t=0,i=this.$alignmentButtons.length;t<i;t++){var s=this.$alignmentButtons.eq(t);a&&s.data("alignment")==o?s.addClass("active"):s.removeClass("active"),a?s.addClass("enabled"):s.removeClass("enabled")}var l=this.model.get("markups"),d=this.itemTypeSupportsMarkups[e],h=this.$anchorButton,c=this.$boldButton,u=this.$italicButton;return d?(h.addClass("enabled"),c.addClass("enabled"),u.addClass("enabled")):(h.removeClass("enabled"),c.removeClass("enabled"),u.removeClass("enabled")),d&&l.anchor?h.addClass("active"):h.removeClass("active"),d&&l.bold?c.addClass("active"):c.removeClass("active"),d&&l.italic?u.addClass("active"):u.removeClass("active"),r.hasFeature("entitle-brand-kit")?this.$(".upgrade-buttons").hide():this.$(".upgrade-buttons").show(),this.position(),this.model.get("show")?this.show():this.hide(),this}})}.apply(t,n))||(e.exports=o)},2626:function(e,t){e.exports='<div class="item-type-buttons">\n  <div class="h1Button item-type button enabled" data-type="h3"></div>\n  <div class="h2Button item-type button enabled" data-type="h4"></div>\n  <div class="quotesButton item-type button enabled" data-type="blockquote"></div>\n  <div class="ulButton item-type button enabled" data-type="ul.li"></div>\n  <div class="olButton item-type button enabled" data-type="ol.li"></div>\n</div>\n<div class="markup-buttons">\n  <div class="boldButton button"></div>\n  <div class="italicsButton button"></div>\n  <div class="anchorButton button"></div>\n</div>\n<div class="text-align-buttons">\n  <div class="textAlignLeftButton button" data-alignment="left"></div>\n  <div class="textAlignCenterButton button" data-alignment="center"></div>\n  <div class="textAlignRightButton button" data-alignment="right"></div>\n</div>\n<div class="upgrade-buttons">\n  <div class="upgradeButton button enabled"></div>\n</div>\n'},2627:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(3),i(574),i(593),i(115),i(2628)],void 0===(o=function(e,t,i,n,o,r,a,s){"use strict";return r.extend({events:{"click .closeButton":"_handleCloseBtn","click .slate-spinner-overlay":"_handleClick"},initialize:function(){t.bindAll(this,t.functionsIn(this)),t.extend(this,i.Events),this._quoteLoaderView=new o({location:"editor"})},_handleCloseBtn:function(e){this.trigger("cancel"),this.hide(),e.preventDefault(),e.stopPropagation()},_handleClick:function(e){e.preventDefault(),e.stopPropagation()},show:function(e){this._isShowing||(this._isShowing=!0,this.render(e),this.$el.addClass("show"))},hide:function(){this.handleHide()},_doHide:function(){this._isShowing&&(this._isShowing=!1,this._quoteLoaderView.clear(),this.$el.removeClass("show"),this.$el.find(".slate-spinner").css("visibility","hidden"),t.delay(function(){this._quoteLoaderView.remove(),this.$el.remove()}.bind(this),1))},render:function(t){return this.$el=e(".slate-spinner-overlay"),this.$el&&this.$el[0]||(this.$el=e("<div></div>"),e(".slate.main-wrapper").append(this.$el)),this.$el.attr("class","slate-spinner-overlay page"),this.$el.html(a.renderMustache(s.toString())),t&&this.$el.find(".title").text(t),this.quoteLoaderEl$=this.$el.find(".quotes"),this._quoteLoaderView.setElement(this.quoteLoaderEl$),this._quoteLoaderView.setAppCssId("page"),this._quoteLoaderView.render(),this.delegateEvents(),this}})}.apply(t,n))||(e.exports=o)},2628:function(e,t){e.exports='<div class="slate-spinner">\n  <div class="title"></div>\n  <div class="closeButtonWrapper">\n    <div class="closeButton"></div>\n    <div class="tooltipWrapper">\n      <div class="tooltip">\n      {{locString.slate_spinner.tooltip}}\n      </div>\n    </div>\n  </div>\n  <div class="spinner-inner">\n    <div class="spinner"></div>\n    <div class="quotes"></div>\n  </div>\n</div>\n'},2629:function(e,t){e.exports='<div class="popup-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="popup-dialog-shell mrvl-overlay-shell">\n    <div class="popup-dialog-content-shell">\n        <div class="pointer"></div>\n        <h2 class="title"></h2>\n        <p class="content"></p>\n    </div>\n</div>\n'},2630:function(e,t,i){var n;void 0===(n=function(){return'<svg version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 32 32" width="32" height="32" style="enable-background:new 0 0 32 32;" xml:space="preserve"><style type="text/css">.st0{fill:{{FILL_COLOR}};{{# FILL_OPACITY }}fill-opacity:{{ FILL_OPACITY }};{{/ FILL_OPACITY }}}</style><path class="st0" d="M16,0C7.2,0,0,7.2,0,16s7.2,16,16,16s16-7.2,16-16S24.8,0,16,0z M19.4,16h-2.2v8h-3.3v-8h-1.6v-2.8h1.6v-1.8 C13.7,9.6,15,8.1,16.7,8c0.2,0,0.3,0,0.5,0h2.5v2.7h-1.8c-0.4,0-0.7,0.3-0.7,0.7c0,0,0,0.1,0,0.1v1.7h2.5L19.4,16z"/></svg>'}.apply(t,[]))||(e.exports=n)},2631:function(e,t,i){var n;void 0===(n=function(){return'<svg version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 32 32" width="32" height="32" style="enable-background:new 0 0 32 32;" xml:space="preserve"><style type="text/css">.st0{fill:{{FILL_COLOR}};{{# FILL_OPACITY }}fill-opacity:{{ FILL_OPACITY }};{{/ FILL_OPACITY }}}</style><path class="st0" d="M16,0C7.2,0,0,7.2,0,16s7.2,16,16,16s16-7.2,16-16S24.8,0,16,0z M22.4,12.7c0,0.1,0,0.3,0,0.4 c0,5.2-4.2,9.3-9.4,9.3c-1.8,0-3.5-0.5-5-1.5c0.3,0,0.5,0,0.8,0c1.5,0,2.9-0.5,4.1-1.4c-1.4,0-2.6-0.9-3.1-2.3 c0.2,0,0.4,0.1,0.6,0.1c0.3,0,0.6,0,0.9-0.1c-1.5-0.3-2.6-1.7-2.6-3.2l0,0c0.5,0.3,1,0.4,1.5,0.4c-1.4-1-1.9-2.9-1-4.4 c1.7,2.1,4.1,3.3,6.8,3.4c-0.4-1.8,0.7-3.5,2.5-3.9c1.1-0.3,2.3,0.1,3.1,0.9c0.7-0.1,1.4-0.4,2.1-0.8c-0.2,0.8-0.8,1.4-1.4,1.8 c0.6-0.1,1.3-0.3,1.9-0.5C23.6,11.7,23,12.3,22.4,12.7z"/></svg>'}.apply(t,[]))||(e.exports=n)},2632:function(e,t,i){var n;void 0===(n=function(){return'<svg version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 32 32" width="32" height="32" style="enable-background:new 0 0 32 32;" xml:space="preserve"><style type="text/css">.st0{fill:{{FILL_COLOR}};{{# FILL_OPACITY }}fill-opacity:{{ FILL_OPACITY }};{{/ FILL_OPACITY }}}</style><path class="st0" d="M16,0C7.1,0,0,7.1,0,16s7.1,16,16,16s16-7.1,16-16S24.8,0,16,0z M24.8,19.6c0,0.7-0.2,1.5-0.4,2.1 c-0.5,1.2-1.4,2.1-2.6,2.6c-0.7,0.3-1.4,0.4-2.1,0.4c-1,0.1-1.2,0.1-3.7,0.1c-2.4,0-2.7,0-3.7-0.1c-0.7,0-1.5-0.2-2.1-0.4 C9,23.9,8,23,7.5,21.8c-0.3-0.7-0.4-1.4-0.4-2.1C7,18.7,7,18.4,7,15.9c0-2.4,0-2.7,0.1-3.7c0-0.7,0.2-1.5,0.4-2.1 C8,9,8.9,8,10.1,7.5c0.7-0.3,1.4-0.4,2.1-0.4C13.2,7,13.5,7,15.9,7c2.4,0,2.7,0,3.7,0.1c0.7,0,1.5,0.2,2.1,0.4 c1.2,0.5,2.1,1.4,2.6,2.6c0.3,0.7,0.4,1.4,0.4,2.1c0.1,1,0.1,1.2,0.1,3.7S24.9,18.7,24.8,19.6z M16,13c-1.7,0-3,1.3-3,3s1.3,3,3,3 c1.7,0,3-1.3,3-3C18.9,14.3,17.6,13,16,13z M22.9,10.7c-0.2-0.4-0.4-0.7-0.6-1c-0.3-0.3-0.6-0.5-1-0.6c-0.5-0.2-1.1-0.3-1.7-0.3 c-1-0.1-1.2-0.1-3.6-0.1s-2.7,0-3.6,0.1c-0.6,0-1.1,0.1-1.7,0.3c-0.4,0.2-0.7,0.4-1,0.6c-0.3,0.3-0.5,0.6-0.6,1 c-0.2,0.5-0.3,1.1-0.3,1.7c-0.1,1-0.1,1.2-0.1,3.6s0,2.7,0.1,3.6c0,0.6,0.1,1.1,0.3,1.7c0.2,0.4,0.4,0.7,0.6,1 c0.3,0.3,0.6,0.5,1,0.6c0.5,0.2,1.1,0.3,1.7,0.3c1,0.1,1.2,0.1,3.6,0.1c2.4,0,2.7,0,3.6-0.1c0.6,0,1.1-0.1,1.7-0.3 c0.4-0.2,0.7-0.4,1-0.6c0.3-0.3,0.5-0.6,0.6-1c0.2-0.5,0.3-1.1,0.3-1.7l0,0c0.1-1,0.1-1.2,0.1-3.6s0-2.7-0.1-3.6 C23.2,11.8,23.1,11.3,22.9,10.7z M16,20.5c-2.5,0-4.6-2-4.6-4.6s2-4.6,4.6-4.6c2.5,0,4.6,2,4.6,4.6C20.5,18.5,18.5,20.5,16,20.5z M20.7,12.3c-0.6,0-1.1-0.5-1.1-1.1s0.5-1.1,1.1-1.1s1.1,0.5,1.1,1.1C21.8,11.8,21.3,12.3,20.7,12.3z"/></svg>'}.apply(t,[]))||(e.exports=n)},2633:function(e,t,i){var n=i(2634),o=i(1180),r=i(1370);window.Render={preview:function(e){var t=this.getJSON(),i=this.getHTML(t,"preview");if($("body").append(i),!Luca.publicationViewer){Luca.initializePublicationViewer(),Luca.publicationViewer._panelGroup.disableSwipe();var n=new WebPro.ImageLoader;n.bind("wp-image-loader-empty",function(t,i){Luca.initializePublication(),e&&e()}),n.add(t.images),n.start()}},publish:function(){return this.getHTML(this.getJSON(),"publish")},getJSON:function(){if(!window.issueJSON)throw new Error("No issue data found!");var e=n.preprocessJSON(window.issueJSON);return n.parseIssueForTemplate(e)},getHTML:function(e,t){var i=e.theme;if("publish"===t){var n=i&&i.name||"crisp",o=e.cdn_base_url=e.cdn_base_url||"https://s3.amazonaws.com/adobe-luca-prod-ue1-assets/",r=e.cdn_version=e.cdn_version||"1.22";if(e.javascripts=[o+"runtime/"+r+"/runtime-prod.gz.js"],e.stylesheets=[o+"runtime/"+r+"/runtime.gz.css"],i&&i.isCustomTheme||e.stylesheets.push(o+"runtime/"+r+"/themes/"+n+".gz.css"),e.favicon=o+"runtime/"+r+"/images/favicon.ico",e.baseFonts=o+"runtime/"+r+"/base-fonts.gz.js",e.noscriptStylesheet=o+"runtime/"+r+"/noscript.gz.css",e.titleWithFallback=e.title,!e.title.replace(/\s*/g,"")){var a=e.pages[0];if(a.has_author){for(var s,l=0,d=a.sections.length;l<d;l++){var h=a.sections[l];if(h.author_section){s=h;break}}if(s){var c=s.author_first_name,u=s.author_last_name,p=c||"";p+=c&&u?" ":"",p+=u,e.titleWithFallback=p}else e.titleWithFallback="My Page"}else e.titleWithFallback="My Page"}e.use_default_brand=!e.brand_type||"default"===e.brand_type}if(i&&i.font_includes){var g=i.font_includes,f=i.isCustomTheme?"font-subgroup-kits":"themes";for(l=0;l<g.length;l++){var m=g[l];m.is_script="script"===m.method,m.is_link="link"===m.method,m.src&&m.src.search(/^(https?:)?\/\//)<0&&(m.src=o+"runtime/"+r+"/"+(m.path||f)+"/"+m.src)}i.isCustomTheme&&g.push({src:o+"runtime/"+r+"/typekit-load.gz.js",is_script:!0,is_link:!1})}return Mustache.render(this.getTemplateText("#"+t+"-template"),e,{page_container:this.getTemplateText("#page-container-template"),toc_page:this.getTemplateText("#toc-page-template"),toc_item:this.getTemplateText("#toc-item-template"),sections_page:this.getTemplateText("#sections-page-template"),content_section:this.getTemplateText("#content-section-template"),spacer_section:this.getTemplateText("#spacer-section-template"),content_body:this.getTemplateText("#content-body-template"),bumper_page:this.getTemplateText("#bumper-page-template"),bumper_section:this.getTemplateText("#bumper-section-template"),report_abuse:this.getTemplateText("#report-abuse-template"),title_section:this.getTemplateText("#title-section-template"),zoom_section:this.getTemplateText("#zoom-section-template"),card_flipbook_section:this.getTemplateText("#card-flipbook-section-template"),fifty_fifty_section:this.getTemplateText("#fifty-fifty-section-template"),wipe_section:this.getTemplateText("#wipe-section-template"),window_section:this.getTemplateText("#window-section-template"),banner_section:this.getTemplateText("#banner-section-template"),full_width_photo_section:this.getTemplateText("#full-width-photo-section-template"),photo_grid_section:this.getTemplateText("#photo-grid-section-template"),back_matter_section:this.getTemplateText("#back-matter-section-template"),author_section:this.getTemplateText("#author-section-template"),credits_section:this.getTemplateText("#credits-section-template"),splash_page:this.getTemplateText("#splash-page-template"),brand_header_section:this.getTemplateText("#brand-header-section-template"),brand_bumper_section:this.getTemplateText("#brand-bumper-section-template"),brand_chrome_css:this.getTemplateText("#brand-chrome-css-template"),ct_author_section_css:this.getTemplateText("#ct-author-section-css-template"),ct_blockquote_bottom_rule_treatment_css:this.getTemplateText("#ct-blockquote-bottom-rule-treatment-css-template"),ct_blockquote_color_band_treatment_css:this.getTemplateText("#ct-blockquote-color-band-treatment-css-template"),ct_blockquote_css:this.getTemplateText("#ct-blockquote-css-template"),ct_blockquote_left_rule_treatment_css:this.getTemplateText("#ct-blockquote-left-rule-treatment-css-template"),ct_blockquote_quote_treatment_css:this.getTemplateText("#ct-blockquote-quote-treatment-css-template"),ct_blockquote_top_bottom_rule_treatment_css:this.getTemplateText("#ct-blockquote-top-bottom-rule-treatment-css-template"),ct_button_css:this.getTemplateText("#ct-button-css-template"),ct_button_double_rounded_treatment_css:this.getTemplateText("#ct-button-double-rounded-treatment-css-template"),ct_button_pill_treatment_css:this.getTemplateText("#ct-button-pill-treatment-css-template"),ct_button_rounded_treatment_css:this.getTemplateText("#ct-button-rounded-treatment-css-template"),ct_button_square_treatment_css:this.getTemplateText("#ct-button-square-treatment-css-template"),ct_button_triangle_treatment_css:this.getTemplateText("#ct-button-triangle-treatment-css-template"),ct_column_css:this.getTemplateText("#ct-column-css-template"),ct_credits_section_css:this.getTemplateText("#ct-credits-section-css-template"),ct_behaviors_css:this.getTemplateText("#ct-behaviors-css-template"),ct_css:this.getTemplateText("#ct-css-template"),ct_fill_screen_image_css:this.getTemplateText("#ct-fill-screen-image-css-template"),ct_full_width_image_border_treatment_css:this.getTemplateText("#ct-full-width-image-border-treatment-css-template"),ct_full_width_image_caption_background_treatment_css:this.getTemplateText("#ct-full-width-image-caption-background-treatment-css-template"),ct_full_width_image_css:this.getTemplateText("#ct-full-width-image-css-template"),ct_glideshow_css:this.getTemplateText("#ct-glideshow-css-template"),ct_heading_css:this.getTemplateText("#ct-heading-css-template"),ct_heading_double_rule_treatment_css:this.getTemplateText("#ct-heading-double-rule-treatment-css-template"),ct_heading_image_rule_treatment_css:this.getTemplateText("#ct-heading-image-rule-treatment-css-template"),ct_heading_single_rule_treatment_css:this.getTemplateText("#ct-heading-single-rule-treatment-css-template"),ct_inline_image_border_treatment_css:this.getTemplateText("#ct-inline-image-border-treatment-css-template"),ct_inline_image_caption_background_treatment_css:this.getTemplateText("#ct-inline-image-caption-background-treatment-css-template"),ct_inline_image_css:this.getTemplateText("#ct-inline-image-css-template"),ct_inline_link_css:this.getTemplateText("#ct-inline-link-css-template"),ct_ordered_list_colored_counter_treatment_css:this.getTemplateText("#ct-ordered-list-colored-counter-treatment-css-template"),ct_ordered_list_css:this.getTemplateText("#ct-ordered-list-css-template"),ct_page_css:this.getTemplateText("#ct-page-css-template"),ct_paragraph_css:this.getTemplateText("#ct-paragraph-css-template"),ct_photo_grid_border_treatment_css:this.getTemplateText("#ct-photo-grid-border-treatment-css-template"),ct_photo_grid_caption_background_treatment_css:this.getTemplateText("#ct-photo-grid-caption-background-treatment-css-template"),ct_photo_grid_css:this.getTemplateText("#ct-photo-grid-css-template"),ct_spacing_css:this.getTemplateText("#ct-spacing-css-template"),ct_subheading_css:this.getTemplateText("#ct-subheading-css-template"),ct_text_props_css:this.getTemplateText("#ct-text-props-css-template"),ct_title_section_border_box_treatment_css:this.getTemplateText("#ct-title-section-border-box-treatment-css-template"),ct_title_section_whimsy_treatment_css:this.getTemplateText("#ct-title-section-whimsy-treatment-css-template"),ct_title_section_css:this.getTemplateText("#ct-title-section-css-template"),ct_title_section_gradient_overlay_treatment_css:this.getTemplateText("#ct-title-section-gradient-overlay-treatment-css-template"),ct_title_section_middle_rule_treatment_css:this.getTemplateText("#ct-title-section-middle-rule-treatment-css-template"),ct_title_section_solid_box_treatment_css:this.getTemplateText("#ct-title-section-solid-box-treatment-css-template"),ct_title_section_top_bottom_rule_treatment_css:this.getTemplateText("#ct-title-section-top-bottom-rule-treatment-css-template"),ct_title_section_vintage_treatment_css:this.getTemplateText("#ct-title-section-vintage-treatment-css-template"),ct_title_section_color_band_treatment_css:this.getTemplateText("#ct-title-section-color-band-treatment-css-template"),ct_title_section_header_padding_css:this.getTemplateText("#ct-title-section-header-padding-css-template"),ct_title_section_header_view_padding_css:this.getTemplateText("#ct-title-section-header-view-padding-css-template"),ct_unordered_list_css:this.getTemplateText("#ct-unordered-list-css-template"),ct_unordered_list_image_treatment_css:this.getTemplateText("#ct-unordered-list-image-treatment-css-template"),ct_window_image_css:this.getTemplateText("#ct-window-image-css-template")})},getTemplateText:function(e){return $(e).text().replace(/\&lt\;(\/)?script([^\&]*)\&gt\;/g,"<$1script$2>")},getCustomThemeUniqueName:function(e){return o.getUniqueName(e)},getCustomThemeFontIncludes:function(e){return r.getFontIncludes(e)},getCustomThemeCSS:function(e){return r.getCSS(e)}},e.exports&&(e.exports=window.Render)},2634:function(e,t,i){var n=i(1370),o=i(1180),r=function(e){this._parseIssueRoot(e)},a=i(28),s=function(e){return e?e.replace(/\</g,"%3C").replace(/\>/g,"%3E").replace(/\"/g,"%22"):e};a.extend(r.prototype,{defaultTitleAlign:"title-center",defaultCoverTitleAlign:"title-top-left",defaultCaptionAlign:"caption-left",defaultCardAlign:"card-left",defaultImageAlign:"50% 50%",defaultLinkButtonAlign:"link-left",defaultEmbedURL:"about:blank",defaultLinkURL:"",sectionTypeSettings:{title:{isName:"title_section",settingsName:"title",parser:"parseTitleSectionForTemplate"},content:{isName:"default_section",settingsName:"single-column",parser:"parseCommonSection"},"column-layout":{isName:"column_layout_section",settingsName:"column-layout",parser:"parseColumnLayoutSectionForTemplate"},"card-layout":{isName:"card_layout_section",settingsName:"card-layout",parser:"parseCardLayoutSectionForTemplate"},"split-layout":{isName:"split_layout_section",settingsName:"split-layout",parser:"parseSplitLayoutSectionForTemplate"},spacer:{isName:"spacer_section",settingsName:"spacer",parser:"parseSpacerSectionForTemplate"},zoom:{isName:"zoom_section",settingsName:"fullscreen-photo",parser:"parseSectionImageForTemplate"},window:{isName:"window_section",settingsName:"window",parser:"parseSectionImageForTemplate"},banner:{isName:"banner_section",settingsName:"banner",parser:"parseSectionImageForTemplate"},"full-width":{isName:"full_width_photo_section",settingsName:"full-width-photo",parser:"parseSectionImageForTemplate"},"card-flipbook":{isName:"card_flipbook_section",settingsName:"column-overlay",parser:"parseCardFlipbookSectionForTemplate"},"fifty-fifty":{isName:"fifty_fifty_section",settingsName:"50-50",parser:"parseFiftyFiftySectionForTemplate"},wipe:{isName:"wipe_section",settingsName:"wipe",parser:"parseWipeSectionForTemplate"},"photo-grid":{isName:"photo_grid_section",settingsName:"photo-grid",parser:"parsePhotoGridSectionForTemplate"},"back-matter":{isName:"back_matter_section",settingsName:"back-matter",parser:"parseBackMatterSectionForTemplate"},author:{isName:"author_section",settingsName:"author",parser:"parseAuthorSectionForTemplate"},credits:{isName:"credits_section",settingsName:"credits",parser:"parseCreditsSectionForTemplate"},bumper:{isName:"bumper_section",settingsName:"bumper",parser:"parseBumperSectionForTemplate"},"brand-bumper":{isName:"brand_bumper_section",settingsName:"brand-bumper",parser:"parseBrandBumperSectionForTemplate"},"brand-header":{isName:"brand_header_section",settingsName:"brand-header",parser:"parseBrandHeaderSectionForTemplate"}},openCloseTypes:{ol:1,ul:1},rootPayload:null,rootURL:"",isValidURL:function(e){var t=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),i="http://"+e,n="http:"+e;return t.test(e)||t.test(i)||t.test(n)||/^mailto\:[^\@]+\@[^\@]+/.test(e)||/^tel\:[\d\s\(\)\-\+]+/.test(e)},getBasicURLInfo:function(e){var t={};return t.valid=this.isValidURL(e),t.absoluteURL=e,e&&!/^(([A-Za-z]+:)|\/\/)/.test(e)&&(t.absoluteURL="http://"+e),t},getURLInfo:function(e){var t=this.getBasicURLInfo(e);if(t.embeddable=!1,t.embedURL=void 0,!t.valid)return t;var i=e.match(/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*([^\/\?#:]+)\.[^\/\?#:]+/),n=i&&i[1]||"";i&&"adobe"===i[1]&&"spark"==(n=(i=e.match(/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*([^\/\?#:]+)\.adobe\.[^\/\?#:]+\/([^\/\?#:]+)/))&&i[1]||"")&&(n+="-"+i[2]);if("voice"===n&&e.search(/voice\.adobe\.com\/v\//)>=0&&(n="voice-ccv"),n){var o={voice:{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*voice\.adobe\.com\/(?:[^\/\?#]+\/)([^\?#\&\/]+)/,prefix:"https://voice.adobe.com/a/",postfix:"/embed"},"voice-ccv":{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*voice\.adobe\.com\/v\/([^\?#\&\/]+)/,prefix:"https://www.ccv.adobe.com/v1/player/",postfix:"/embed"},ccv:{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*ccv.adobe\.com\/(?:[^\/\?#]+\/)+([^\?#\&\/]+)\/embed/,prefix:"https://www.ccv.adobe.com/v1/player/",postfix:"/embed"},"spark-video":{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*spark\.adobe\.com\/video\/([^\?#\&\/]+)/,prefix:"https://spark.adobe.com/video/",postfix:"/embed?lazyLoading=true"},youtube:{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*youtube\.com\/(?:(?:watch\?(?:[^&]+&)*v=)|(?:embed\/))([^\?#\&\/]+)/,prefix:"https://youtube.com/embed/",postfix:"?enablejsapi=1"},youtu:{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*youtu\.be\/([^\?#\&\/]+)/,prefix:"https://youtube.com/embed/",postfix:"?enablejsapi=1"},vimeo:{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*vimeo\.com(?:\/[^\/\?#]+)*\/([^\?#\&\/]+)/,prefix:"https://player.vimeo.com/video/",postfix:""}}[n];if(o){var r=e.match(o.regex);r&&(t.embeddable=!0,t.embedURL=o.prefix+r[1]+o.postfix)}}return t},simpleValidateLinkURL:function(e){var t=this.getBasicURLInfo(e);return t.valid?t.absoluteURL:this.defaultLinkURL},parseIssueForTemplate:function(e){var t=this._parseIssueRoot(e);return e.pages&&(t.pages=this.parseIssuePages(e.pages,t)),t.splash=this._parseSplashForTemplate(e,t),t},_parsePageBrandForTemplate:function(e,t){var i=t.brand;return i&&this._copyPrimitives(i,{})},_parseSplashForTemplate:function(e,t){for(var i={},n=t.pages,o=n.length,r=0;r<o;r++){for(var a=n[r].sections,s=a.length,l=0;l<s;l++){var d=a[l];if(d.title_section&&d.image){i.image=this._copyPrimitives(d.image,{});break}}if(i.image)break}return i},parseBrandSocialUrls:function(e,t){t.facebookUrl&&(e.facebookUrl=this.simpleValidateLinkURL(t.facebookUrl)),t.facebookIcon&&(e.facebookIcon=t.facebookIcon),t.twitterUrl&&(e.twitterUrl=this.simpleValidateLinkURL(t.twitterUrl)),t.twitterIcon&&(e.twitterIcon=t.twitterIcon),t.instagramUrl&&(e.instagramUrl=this.simpleValidateLinkURL(t.instagramUrl)),t.instagramIcon&&(e.instagramIcon=t.instagramIcon),e.hasSocialUrls=!!(e.facebookUrl||e.twitterUrl||e.instagramUrl)},parseBrandHeaderSectionForTemplate:function(e,t){var i=this.parseCommonSection(e,t),n=t.brand;return"brandkit"==t.brand_type&&(i.brandCTAEnabled=!!n.headerCTAEnabled),n&&(i.brandName=n.name,i.hasBrandLogo="custom"==t.brand_type||!!n.headerLogo,i.brandUrl=this.simpleValidateLinkURL(n.url),i.brandCTA=n.headerCta,i.brandCTAUrl=this.simpleValidateLinkURL(n.headerCtaUrl),i.brandCTAButtonStyle=n.headerCTAButtonStyle,this.parseBrandSocialUrls(i,n)),i},parseBrandBumperSectionForTemplate:function(e,t){var i=this.parseCommonSection(e,t),n=t.brand;return"brandkit"==t.brand_type&&(i.brandCTAEnabled=!!n.footerCTAEnabled),n&&(i.brandName=n.name,i.hasBrandLogo="custom"==t.brand_type||!!n.bumperLogo,i.brandUrl=this.simpleValidateLinkURL(n.url),i.brandCTA=n.footerCta,i.brandCTAUrl=this.simpleValidateLinkURL(n.footerCtaUrl),i.brandCTAButtonStyle=n.footerCTAButtonStyle,this.parseBrandSocialUrls(i,n)),i},_parseIssueRoot:function(e){e||(e={});var t={id:e.cid||"",isSinglePage:!0,images:[]};return this.rootPayload=t,this.rootURL=e.base_url||"",this._copyPrimitives(e,t),e.brand&&(t.brand=e.brand),e.brand_type&&(t.brand_type=e.brand_type),e.theme&&(t.theme=this.parseThemeForTemplate(e.theme)),e.stylesheets&&(t.stylesheets=e.stylesheets.slice()),e.javascripts&&(t.javascripts=e.javascripts.slice()),e.pages&&(t.isSinglePage=1===e.pages.length),t},parseIssuePages:function(e,t){for(var i=[],n=e.length,o=0;o<n;o++){var r=e[o],a=0===o&&n>1&&r.sections&&1===r.sections.length,s=this.parsePageForTemplate(r,a,t);i.push(s)}if(n>1){var l={bumper_page:!0,issue_id:t&&t.id,issue_url:t&&t.published_url,title:t&&t.title,subtitle:t&&t.subtitle};i.push(l)}return i},parsePageForTemplate:function(e,t,i){var n={id:e.cid||""};this._copyPrimitives(e,n),n.brand=this._parsePageBrandForTemplate(e,i),n.brand_type=i.brand_type,n.isCover=t,n.isCover||(n.toc={id:e.id});var o=e.author;return n.has_author=!(!o||!o.first_name&&!o.last_name),n.author=e.author,n.credits=e.credits,e.sections&&(n.sections=this.parsePageSections(e.sections,n)),n},parsePageSections:function(e,t){for(var i=[],n=0,o=e.length;n<o;n++){var r=e[n],a=this.parseSectionForTemplate(r,t);i.push(a)}return this.updateLayersFromLayerNames(i),i},parseSectionForTemplate:function(e,t){var i=this.sectionTypeSettings[e.type]||{};return(i.parser&&this[i.parser]||this.parseCommonSection).call(this,e,t)},parseSectionForTemplateInContext:function(e,t){return t&&this._parseIssueRoot(t),this.parseSectionForTemplate(e)},parseCommonSection:function(e,t,i){var n={id:e.cid||"",isCover:!!t&&t.isCover,section_class:this.getSettingByName(e.settings,"section_class")||""};this._copyPrimitives(e,n),this._parseSectionTypeIsBools(e,n),this._applyThemeSettings(n);var o=i||e.content_items||[];return n.content_items=this.parseInlineContentItems(o,n),n},parseSingleColumnSectionForTemplate:function(e,t,i){var n=this.parseCommonSection(e,t,i),o=n.content_items;if("img"===(this.getSettingByName(e.settings,"background_type")||"none")&&o.length){var r=o[0];"img"===r.type&&(n.image=r.image,o.shift())}return n},parseColumnLayoutSectionForTemplate:function(e,t,i){var n=this.parseSingleColumnSectionForTemplate(e,t,i);n.section_class+=(n.section_class?" ":"")+"column-layout";this.getSettingByName(e.settings,"background_type");if(n.image){n.section_class+=" background-image-overrides";var o=this.getSettingByName(e.settings,"background_overlay_type")||"none";"none"!=o&&(n.section_class+=" background-overlay-"+o)}var r=this.getSettingByName(e.settings,"section_sizing")||"natural";return"natural"!==r&&(n.section_class+=(n.section_class?" ":"")+"height-"+r),n},parseCardLayoutSectionForTemplate:function(e,t,i){var n=this.parseSingleColumnSectionForTemplate(e,t,i);return n.section_class+=(n.section_class?" ":"")+"card-layout",n},parseSplitLayoutSectionForTemplate:function(e,t,i){var n=this.parseSingleColumnSectionForTemplate(e,t,i),o=this.getSettingByName(e.settings,"background_split_position")||"left";return n.section_class+=(n.section_class?" ":"")+"split-layout",n.section_class+=" image-on-"+o,n},parseTitleSectionForTemplate:function(e,t){var i=this.parseCommonSection(e,t,[]);this._parseTitleAlign(e,i),this._addToTOC("title_align",i.title_align,t);var n=e.content_items;if(n)for(var o=0,r=n.length;o<r;o++){var a=n[o];"title"===a.type?(i.title=a.text,this._addToTOC("title",i.title,t)):"subtitle"===a.type?(i.subtitle=a.text,this._addToTOC("subtitle",i.subtitle,t)):"img"===a.type&&(i.image=this.parseImage(a,i),this._addToTOC("image_url",s(i.image_url),t),this._addToTOC("image_align",i.image.align,t))}return(i.title||i.subtitle)&&(i.renderTitleHeader=!0),i},parseSectionImageForTemplate:function(e,t){var i=this.parseCommonSection(e,t);this._parseTitleAlign(e,i),this._parseCaptionAlign(e,i);var n=this._findFirstByType(e.content_items,"img");return n&&(i.image=this.parseImage(n,i),i.caption=n.text),i},parseSpacerSectionForTemplate:function(e,t){var i=this.parseCommonSection(e,t);return i.spacer_class=this.getSettingByName(e.settings,"spacer_class")||"",i},parseCardFlipbookSectionForTemplate:function(e,t){for(var i=this.parseCommonSection(e,t),n=[],o=[],r=e.groups,a=r.length-1,s=0,l=r.length;s<l;s++){var d=r[s],h=i.content_items.slice(d.offset,d.offset+d.count);n[s]=h.shift();var c=n[s].settings.card_align||this.defaultCardAlign;(s!==a||h.length)&&(o[s]={content_items:h,card_align:c})}return i.background_images=n,i.cards=o,i},updateLayersFromLayerNames:function(e){for(var t={over:1,under:0},i={over:1,under:-1},n=-1,o=0,r=e.length;o<r;o++){var a,s=e[o],l=s.layerName,d=t[l];if(void 0===d)d=-1;else a=-1===n?i[l]:d-n,s.layer=a;n=d}},parseFiftyFiftySectionForTemplate:function(e,t){for(var i=this.parseCommonSection(e,t),n=i.content_items,o=0,r=n.length;o<r;o++){var a=n[o];if("img"!==a.type)break;a.background_image=!0}return i},parseWipeSectionForTemplate:function(e,t){for(var i=this.parseCommonSection(e,t),n=1,o=i.content_items,r=0,a=o.length;r<a;r++){var s=o[r];if("img"===s.type&&(i["background_image_"+n]=s.src,++n>2))break}return i},parsePhotoGridSectionForTemplate:function(e,t){var i,n,o=this.parseCommonSection(e,t),r=e.groups||[],a=o.content_items||[];for(i=0;i<a.length;i++)if("p"===a[i].type&&a[i].text){n=a[i];break}n&&(o.grid_caption=n.content,o.text_align=n.text_align);var s=[];for(o.groups=s,i=0;i<r.length;i++){var l=r[i];if(l){for(var d={layoutName:l.layoutName,photos:[]},h=0;h<l.count;h++){var c=a[l.offset+h];if(c&&c.image){var u=c.id,p=c.image,g=p.src||"",f=p.image_width||0,m=p.image_height||0,v=Math.min(Math.max(f,m),1024);d.photos.push({id:u,src:g,caption:c.text||"",image_src:g.replace(/(\?(?:[^#\&]*\&)*)size=[0-9]+/,"$1size="+v),image_width:f,image_height:m})}}s.push(d)}}return o},parseBackMatterSectionForTemplate:function(e,t){var i=this.parseCommonSection(e,t),n=e.groups||[],o=i.content_items||[],r=[];i.groups=r;for(var a=0;a<n.length;a++){var s=n[a];if(s){for(var l={name:s.name,content_items:[]},d=0;d<s.count;d++){var h=o[s.offset+d];h&&l.content_items.push(h)}r.push(l)}}return i},parseAuthorSectionForTemplate:function(e,t){var i=this.parseCommonSection(e,t),n=t.author;if(i.has_author=t.has_author,n){i.author_first_name=n.first_name||"",i.author_last_name=n.last_name||"";var o=n.avatar_url||"";o&&(o=this.makeAbsoluteURL(o)),i.avatar_url=o}return i.appreciate_url=t.appreciate_url||"",i},parseCreditsSectionForTemplate:function(e,t){var i=this.parseCommonSection(e,t);return i.credits=t.credits||"",i},parseBumperSectionForTemplate:function(e,t){return this.parseCommonSection(e,t)},_parseSectionTypeIsBools:function(e,t){for(var i in this.sectionTypeSettings){t[this.sectionTypeSettings[i].isName]=e.type===i}},_parseTitleAlign:function(e,t){var i=this.getSettingByName(e.settings,"title_align");t.title_align=i||(t.isCover?this.defaultCoverTitleAlign:this.defaultTitleAlign)},_parseCaptionAlign:function(e,t){var i=this.getSettingByName(e.settings,"caption_align");t.caption_align=i||this.defaultCaptionAlign},_addToTOC:function(e,t,i){i&&i.toc&&void 0===i.toc[e]&&(i.toc[e]=t)},parseInlineContentItems:function(e,t){var i,n,o=[],r=0,a=e.length;for(r=0;r<a;r++){var s=e[r],l=this.parseInlineContentItem(s,t);o.push(l)}for(r=0;r<a;r++)n=o[r],(i=o[r-1])&&n.supertype===i.supertype||(this.openCloseTypes[n.supertype]&&(n.open=n.supertype),i&&this.openCloseTypes[i.supertype]&&(n.close=i.supertype));return n&&this.openCloseTypes[n.supertype]&&o.push({body:!0,type:"",close:n.supertype}),o},parseInlineContentItem:function(e,t){var i=t?t.type:"",n={id:e.cid||"",body:!0,content:this.parseContentText(i,e)};switch(this._copyPrimitives(e,n),e.type){case"ol.li":case"ul.li":var o=e.type.split(".");n.supertype=o[0],n.type=o[1];break;case"img":this.parseImageItem(e,n,t);break;case"a":n.block_class="link-button-wrapper",n.item_class="link-button",n.link_align=this.getSettingByName(e.settings,"link_align")||this.defaultLinkButtonAlign,n.href=s(n.href);var r=this.getURLInfo(n.href);n.href=r.absoluteURL,this.getSettingByName(e.settings,"embedded")&&(r.valid&&r.embeddable&&r.embedURL?n.embed_url=r.embedURL:n.embed_url=this.defaultEmbedURL)}switch(e.type){case"p":case"img":case"h3":case"h4":var a=this.getSettingByName(e.settings,"text_align");a&&(n.text_align=a)}if(n.is_simple_text=!this.itemSupportsMarkups(i,e.type),e.settings){n.settings={};for(var l=0,d=e.settings.length;l<d;l++){var h=e.settings[l];n.settings[h.key]=h.value}}return n},parseImageItem:function(e,t,i){var n=t||{id:e.cid||""};return t||this._copyPrimitives(e,n),n.body=!0,n.type=e.type,n.href=e.href,n.is_image=!0,n.image=this.parseImage(e,i),n.src=s(n.image.image_url),n},makeAbsoluteURL:function(e){if(e&&this.rootURL&&!/^[^\:]{2,6}\:/.test(e)&&!/^\//.test(e)){var t="/"===this.rootURL.slice(-1)?"":"/";e=this.rootURL+t+e}return e},parseImage:function(e,t){var i={};this._copyPrimitives(e.image,i);var n=e.image,o=s(n?n.image_url:"");o&&(o=this.makeAbsoluteURL(o),this.rootPayload&&this.rootPayload.images&&(this.rootPayload.images[o]||(this.rootPayload.images.push(o),this.rootPayload.images[o]=!0))),i.image_url=o,i.src=o,i.url=o?"url("+o+")":"",i.image_width=n?n.image_width:0,i.image_height=n?n.image_height:0,i.image_width&&i.image_height&&(i.aspect_ratio=i.image_height/i.image_width*100);var r=this.getSettingByName(e.settings,"image_align");return(!r||r.search(/^\s*(?:(?:[0-9]*\.[0-9]+)|(?:[0-9]+))\%\s+(?:(?:[0-9]*\.[0-9]+)|(?:[0-9]+))\%\s*$/)<0)&&(r=this.defaultImageAlign),i.align=r,i.attribution=e.contributor_name,i.site=e.contributor_website,i},itemSupportsMarkups:function(e,t){if(!0==={p:!0,"ol.li":!0,"ul.li":!0}[t])return!0;if("img"==t){if(1==={content:1,"full-width":1,"card-flipbook":1,"split-layout":1,"column-layout":1,"card-layout":1}[e])return!0}return!1},parseContentText:function(e,t){var i=t.text,n=t.type;if(i&&this.itemSupportsMarkups(e,t.type)){var o=t.markups;o.sort(this._startIndexSort);var r=[];for(h=0;h<o.length;h++){var a=o[h],s=a.start_index,l=a.end_index;if(s!=l||"br"==n){var d=this.getMarkupStyleTags(a);r.push({tag:d.open,offset:s,index:h,type:"open"}),r.push({tag:d.close,offset:l,index:h,type:"close"})}}for(var h=0;h<r.length;h++)"close"==r[h].type&&""==r[h].tag&&r.splice(h,1);r.sort(this._offsetSort);var c=[],u=0;for(h=0;h<r.length;h++){var p=r[h];p.offset>u&&(c.push(this.getSubstring(i,u,p.offset,!0)),u=p.offset),c.push(p.tag)}return u<i.length&&c.push(this.getSubstring(i,u,i.length,!0)),c.join("")}return i||""},parseThemeForTemplate:function(e){var t={},i=o.isCustomThemeFormat(e);if(i)t=n.getCustomThemePayload(e);else{var r=o.convertToKebabCase(e.name||"Crisp");t.name=r}return e.fonts&&(t.fonts=e.fonts.slice()),e.font_includes?t.font_includes=a.map(e.font_includes,function(e){return{src:e.src,method:e.method,is_script:"script"===e.method,is_link:"link"===e.method,path:e.path}}):t.font_includes=i?n.getFontIncludes(e):[],t},_applyThemeSettings:function(e){var t=this._getSectionThemeSettings(this.rootPayload,e.type);t.layer&&(e.layer=t.layer),t.layerName&&(e.layerName=t.layerName),t.behavior&&(e.behavior=t.behavior)},getSettingByName:function(e,t){if(e&&t)for(var i=0,n=e.length;i<n;i++){var o=e[i];if(o.key===t)return o.value}return null},getSettingsValues:function(e){var t=[];if(!e)return t;for(var i=0,n=e.length;i<n;i++){var o=e[i];t.push(o.value)}return t},_copyPrimitives:function(e,t){for(var i in e){var n=e[i];"object"!=typeof n&&(t[i]=n)}return t},_simpleClone:function(e){var t={};for(var i in e){var n=e[i];t[i]=n&&"object"==typeof n?this._simpleClone(n):n}return t},_findFirstByType:function(e,t){if(!e)return null;for(var i=0,n=e.length;i<n;i++){var o=e[i];if(o.type===t)return o}return null},startIndexSort:function(e,t){var i=e.start_index-t.start_index;return 0===i&&(i=t.end_index-e.end_index),i},_offsetSort:function(e,t){if(e.offset==t.offset){if("open"==e.type&&"open"==t.type){if("<br>"==e.tag||"\n"==e.tag)return-1;if("<br>"==t.tag||"\n"==t.tag)return 1}return"close"==e.type&&"close"==t.type?t.index-e.index:e.index===t.index?"open"==e.type?-1:1:e.index-t.index}return e.offset-t.offset},getMarkupStyleTags:function(e){var t=e.type,i="",n=this.getURLInfo(s(e.href));return n.absoluteURL&&(i=' href="'+n.absoluteURL+'" target="_blank" rel="nofollow noreferrer"'),{open:"<"+t+i+">",close:"</"+t+">"}},entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},escapeHtml:function(e){var t=this.entityMap;return String(e).replace(/[&<>"'\/]/g,function(e){return t[e]})},getSubstring:function(e,t,i,n){var o=e.substring(t,i);return n?this.escapeHtml(o):o},getSectionIdFromType:function(e){var t=r.sectionTypeSettings[e];return t&&t.settingsName||e},_getSectionThemeSettings:function(e,t){var i=this.getSectionIdFromType(t),r={behavior:"default",layerName:n.isUnderSection[i]?"under":"over"};if(o.isBuiltInTheme(e.theme))r.behavior=(e.theme.name||"default")+"-"+i;else{var a=e.theme&&e.theme.section_settings,s=a&&a[i];s&&(r=s)}return r},_addSectionClass:function(e,t){if(e&&t){var i,n=e.settings;n||(e.settings=n=[]);for(var o=0,r=n.length;o<r;o++){var a=n[o];if("section_class"===a.key){i=a;break}}i||(i={key:"section_class",value:""},n.push(i));var s=i.value.split(/\s+/);s.push(t),i.value=s.join(" ")}},isFullWidthImageWithCaption:function(e){var t=null;return e&&"full-width"===e.type&&(t=e.content_items[0]),t&&"img"===t.type&&t.text},preprocessSections:function(e,t,i){var n=t.sections,o=n[n.length-1],r=t.author;(r&&(r.first_name||r.last_name)||t.appreciate_url)&&n.push({type:"author"}),t.credits&&n.push({type:"credits"}),e.brand&&n.unshift({type:"brand-header"}),i&&(e.brand?n.push({type:"brand-bumper"}):n.push({type:"bumper"}));for(var a={title:!0,zoom:!0,window:!0,"full-width":!0,banner:!0,"card-flipbook":!0,"split-layout":!0,"column-layout":!0,"card-layout":!0},s={content:!0,"photo-grid":!0},l={p:!0,blockquote:!0,h3:!0,h4:!0,"ul.li":!0,"ol.li":!0,a:!0},d=0,h=null,c="";d<n.length;){var u=n[d],p=u.type,g=n[d+1],f=g&&g.type||"",m="",v=null,b=u===o;if(a[p])a[f]&&(m="content-spacer",this.isFullWidthImageWithCaption(u)&&(m="content-item-spacer"),"under"===this._getSectionThemeSettings(e,p).layerName&&(m+=" top-shadow"),f&&"under"===this._getSectionThemeSettings(e,f).layerName&&(m+=" bottom-shadow"),d++,v={type:"spacer",settings:[{key:"section_class",value:m}]},n.splice(d,0,v));else if(s[p]){if(a[c]){if(a[f]){var w=u.content_items;1===w.length&&l[w[0].type]&&this._addSectionClass(u,"single-item-content-section")}this._addSectionClass(u,"large-content-spacing-top")}(a[f]||b)&&this._addSectionClass(u,"large-content-spacing-bottom")}var k=v||g,S=k&&k.type||"";"over"===this._getSectionThemeSettings(e,p).layerName?(c&&"under"===this._getSectionThemeSettings(e,c).layerName&&this._addSectionClass(u,"top-shadow"),S&&"under"===this._getSectionThemeSettings(e,S).layerName&&this._addSectionClass(u,"bottom-shadow")):"bumper"===p&&c&&"under"===this._getSectionThemeSettings(e,c).layerName&&this._addSectionClass(h,"bottom-shadow"),d++,h=v||u,c=v?v.type:p}return e},preprocessJSON:function(e){var t=null;e.theme&&((t=e.theme.section_settings)||(t=n.generateCustomThemeSectionSettings(),e.theme.section_settings=t)),t&&(t.bumper||(t.bumper={behavior:"default",layerName:"under"}),e.brand&&(t["brand-header"]||(t["brand-header"]={behavior:"brand-header",layerName:"over"}),t["brand-bumper"]||(t["brand-bumper"]={behavior:"brand-bumper",layerName:"under"})));for(var i=e.pages.length,o=0;o<i;o++)this.preprocessSections(e,e.pages[o],1===i);return e}}),a.extend(r,r.prototype);try{window.LucaJSONParser=r}catch(e){}e.exports&&(e.exports=r)},2635:function(e,t,i){var n;void 0===(n=function(){var e={youtube:"https://youtube.com/embed/",vimeo:"https://player.vimeo.com/video/",voice:"https://voice.adobe.com/a/",ccv:"https://www.ccv.adobe.com/v1/player/","voice-ccv":"https://www.ccv.adobe.com/v1/player/","spark-video":"https://spark.adobe.com/video/"},t={YOUTUBE:1,SPARK_VIDEO:2,VIMEO:3,INVALID_SOURCE:0};return{getEmbedType:function(i){var n=i.trim().split(/\r?\n/).join("");for(var o in e){var r=e[o];if(-1!=n.indexOf(r))return"youtube"==o?t.YOUTUBE:"vimeo"==o?t.VIMEO:t.SPARK_VIDEO}return t.INVALID_SOURCE},embedTypes:t}}.apply(t,[]))||(e.exports=n)},2636:function(e,t,i){var n,o;n=[i(0),i(3)],void 0===(o=function(e,t){var i=["fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement"],n=["requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen"],o=["exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen"],r=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"],a=function(e){this.doc=e},s={enter:function(e){e||(e=this.doc||document);var i=e.documentElement;return t(d(i,n).call(i))},exit:function(e){return e||(e=this.doc||document),t(d(e,o).call(e))},toggle:function(e){return e||(e=this.doc||document),a.isFullscreen(e)?{fullscreen:!1,promise:a.exit(e)}:{fullscreen:!0,promise:a.enter(e)}},getElement:function(e){return e||(e=this.doc||document),d(e,i)},isFullscreen:function(e){return e||(e=this.doc||document),!!a.getElement(e)},addListener:function(e,t){t||(t=this.doc||document),t.addEventListener(l(t),e)},removeListener:function(e,t){t||(t=this.doc||document),t.removeEventListener(l(t),e)}};function l(e){return d(e,o,r)}function d(e,t,i){for(var n=0,o=t.length;n<o;n++){var r=t[n];if(r in e)return i?i[n]:e[r]}}return e.extend(a,s),e.extend(a.prototype,s),a}.apply(t,n))||(e.exports=o)},2637:function(e){e.exports="/slate-web/editor-f93247ea.html"},2638:function(e,t,i){var n,o;n=[i(0),i(28),i(3),i(299),i(2639),i(1464),i(37),i(271),i(4),i(1719),i(1720)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h){var c="Crisp";function u(t){var i=this.$slateEle=e(".slate.simple-preview");this.previewIsReady=!1,this._shouldPreLoadImages=!1,this.renderData=t.renderData,this.appConfig=t.appConfig,this.analyticsEventNamespace=this.appConfig.analyticsEventNamespace,this.currentSelectedTheme=c,this.marvelWrapper=e(t.previewEl),this.previewWindow=i.find("iframe.preview")[0].contentWindow,this.$previewEle=i.find("iframe.preview")[0],this._initThemeButtons(),this.renderData&&this._handlePreviewUpdate(this.renderData),e(".theme-button").on("click",function(e){this._handleThemeClicked(e)}.bind(this))}return e.extend(u.prototype,{msgCallbacks:{"preview-ready":"_handlePreviewReady","preview-update":"_handlePreviewUpdate","create-doc":"_handleCreatePageDoc"},destroy:function(){},receiveMessage:function(e){var t=e.event;if(console.log("Shell received message: "+e.event,e),this.msgCallbacks.hasOwnProperty(t))return this[this.msgCallbacks[t]](e)},_initThemeButtons:function(){var t,i,n=e(".theme-button");this.themeNames=["Crisp","Storybook","Trek","Chic"];for(var o=0;o<n.length;o++)i=n[o],t=this.themeNames[o],e(i).data("theme-name",this.themeNames[o]),t===this.currentSelectedTheme&&e(i).addClass("selected")},_preLoadImages:function(){if(this._shouldPreLoadImages){for(var e=0;e<this.lucaJSONImages.length;e++)this.lucaJSONImages[e]=o.Utils.setQueryParam(this.lucaJSONImages[e],"size","1024");var t=new o.ImageLoader({numAsyncRequestsAllowed:10});t.add(this.lucaJSONImages),t.start(),this._shouldPreLoadImages=!1}},_updatePreview:function(){this.$slateEle.find(".preview-wrapper").removeClass("showing"),this.previewWindow.location.replace(h+this.getPreviewQueryParams())},getPreviewQueryParams:function(){return this.currentSelectedTheme||(this.currentSelectedTheme=c),"?theme="+this.currentSelectedTheme},_handlePreviewReady:function(t){this._preLoadImages(),this.previewIsReady=!0,this.previewWindow.isSimplePreview=!0,this.previewWindow.$("<style>").text(".wp-scrollbar.vertical{bottom:0 !important;}").appendTo("body"),this.previewWindow.loadJSON(this.lucaJSONToUpdate,{removeSparkBumper:!0}),e(this.previewWindow.document).on("click",function(e){this._handlePreviewClicked(e)}.bind(this)),this.$slateEle.find(".preview-wrapper").addClass("showing")},_handlePreviewUpdate:function(e){var t=e.lucaJSON,i=e.imageUrls;t&&(this.lucaJSONToUpdate=t,this.lucaJSONToUpdate.theme=r.get(this.currentSelectedTheme)),i&&(this._shouldPreLoadImages=!0,this.lucaJSONImages=i),this._updatePreview()},_handleThemeClicked:function(t){if(this.previewIsReady){var i=e(t.target),n=e(".theme-button-wrapper button"),o=(this.currentSelectedTheme,i.data("theme-name")),a=r.get(o);o!==this.currentSelectedTheme&&(this.analyticsEventNamespace&&l.trackEvent(this.analyticsEventNamespace+":themeChanged",{themeName:o,sparkFormat:"sparkFormat:page"},this.analyticsEventNamespace+":page"),n.removeClass("selected"),i.addClass("selected"),this.lucaJSONToUpdate.theme=a,this.currentSelectedTheme=o,this._updatePreview())}return!1},_handlePreviewClicked:function(e){this.analyticsEventNamespace&&l.trackEvent(this.analyticsEventNamespace+":previewClicked",{sparkFormat:"sparkFormat:page"},this.analyticsEventNamespace+":page")},_handleCreatePageDoc:function(e){var t=e.createDocDefer,i={};return n.createDocument(this.appConfig).then(function(e){return i.newDoc=e,i.lucajson=this.lucaJSONToUpdate,this.lucaJSONToUpdate.pages[0].author&&(this.lucaJSONToUpdate.pages[0].author.first_name=AuthController.getProfile().first_name,this.lucaJSONToUpdate.pages[0].author.last_name=AuthController.getProfile().last_name),this._dupePreviewAssets(i,"images/")}.bind(this)).then(function(e){var t,o,r;if(e&&e.length)for(r=0;r<e.length;r++)t=e[r]._data,(o=i.sourceImages[t.path.substring("images/".length)])?(o.image_url="images/"+o.id+"?asset_id="+t.id,o.id=t.id):logger.error("missing image match:",t);s.setProjectName(i.newDoc,i.lucajson.title);var a,l=i.newDoc.nextSave();this._removeBumperSectionFromJSON(i.lucajson),i.lucajson.pages[0].sections[0].content_items.forEach(function(e){"img"==e.type&&e.image&&(a=e.image.image_url)}.bind(this));var d=n.currentDoc.getDCXComposite().id,h="https://"+window.location.host+"/image_assets/slate/"+d+"/"+a;return n.setWebCoverImage(a,"50% 50%"),n.copyThumbnailFrom(h,"50% 50%"),n.saveDocument(i.lucajson),l}.bind(this)).then(function(){t.resolve(i.newDoc)}).catch(function(e){console.log("Error creating document "+e),t.reject(e)}),t.promise},_dupePreviewAssets:function(e,n){var o,r=this._getCompositeItemsFromJSON(e.lucajson),a=[];return r?(e.sourceImages=r,o=t.find(e.newDoc.getDCXComposite().current.getChildrenOf(),function(e){return"page"==e.name}),t.each(r,function(t,i){var r={copyFrom:{source:"lightroom",assetId:t.image_url},name:"Image",relationship:"image",path:n+i,parent:o,type:"image/image",isUpdate:!1},s=e.newDoc.pushComponent(r);a.push(s)}.bind(this)),i.all(a)):i.resolve()},_getCompositeItemsFromJSON:function(e){var i={},n=0;return t.each(e.pages[0].sections,function(e){t.each(e.content_items,function(e){var t=e.image;t&&(t.id=a(),i[t.id]=t,n++)}.bind(this))}.bind(this)),n?i:null},_removeBumperSectionFromJSON:function(e){for(var t=e.pages[0].sections,i=t.length-1;i>=0;i--){"bumper"==t[i].type&&t.splice(i,1)}}}),u}.apply(t,n))||(e.exports=o)},2639:function(e,t,i){var n,o;n=[i(0),i(344),i(1721),i(519),i(523),i(1198),i(520),i(2640),i(2641),i(419),i(2642),i(1489),i(369),i(1371),i(1490),i(1722),i(2643),i(1491),i(1492),i(1493),i(1723),i(1724),i(1725),i(2644),i(2645),i(2646),i(2647),i(2648),i(2649)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h,c,u,p,g,f,m,v,b,w,k,S,_,x,y,C,T,I){w.prototype.defaultPlugins=[T],w.prototype.defaultOptions.trackEvents=["touch"],x.prototype.defaultOptions.trackEvents=["touch"],v.prototype.defaultOptions.trackEvents=["touch"];var P=T.defaultOptions;return P.injectNextPreviousLinks=navigator.userAgent.search(/iPad|iPhone|iPod/i)<0,P.nextPreviousLinkTriggerEvent="vclick",v.prototype.defaultOptions.useTransform=!0,v.prototype.defaultPlugins=[y],y.defaultOptions.scrollbarsUseTransforms=!0,y.defaultOptions.scrollbarPlugins=k.sliderTrackPlugin,t}.apply(t,n))||(e.exports=o)},2640:function(e,t,i){var n;void 0===(n=function(){!function(e){e.requestAnimationFrame||(e.requestAnimationFrame=e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){return e.setTimeout(t,e.requestAnimationFrame._wpRequestAnimationFrameInterval)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.oCancelAnimationFrame||e.msCancelAnimationFrame||function(t){return e.clearTimeout(t)}),e.requestAnimationFrame._wpRequestAnimationFrameInterval=1e3/60}(window)}.apply(t,[]))||(e.exports=n)},2641:function(e,t,i){var n,o;
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.11
 *
 * Requires: jQuery 1.2.2+
 */n=[i(0),i(520)],void 0===(o=function(e,t){var i,n,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],a=Array.prototype.slice;if(e.event.fixHooks)for(var s=o.length;s;)e.event.fixHooks[o[--s]]=e.event.mouseHooks;var l=e.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],d,!1);else this.onmousewheel=d;e.data(this,"mousewheel-line-height",l.getLineHeight(this)),e.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],d,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var i=e(t)["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function d(o){var r=o||window.event,s=a.call(arguments,1),d=0,u=0,p=0,g=0,f=0,m=0;if((o=e.event.fix(r)).type="mousewheel","detail"in r&&(p=-1*r.detail),"wheelDelta"in r&&(p=r.wheelDelta),"wheelDeltaY"in r&&(p=r.wheelDeltaY),"wheelDeltaX"in r&&(u=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(u=-1*p,p=0),d=0===p?u:p,"deltaY"in r&&(d=p=-1*r.deltaY),"deltaX"in r&&(u=r.deltaX,0===p&&(d=-1*u)),0!==p||0!==u){if(1===r.deltaMode){var v=e.data(this,"mousewheel-line-height");d*=v,p*=v,u*=v}else if(2===r.deltaMode){var b=e.data(this,"mousewheel-page-height");d*=b,p*=b,u*=b}if(t.isSafari?"deltaY"in r||(d=Math[d>=1?"floor":"ceil"](d/3),u=Math[u>=1?"floor":"ceil"](u/3),p=Math[p>=1?"floor":"ceil"](p/3)):t.isFirefox?0===r.deltaMode&&(d=Math[d>=1?"floor":"ceil"](d/2),u=Math[u>=1?"floor":"ceil"](u/2),p=Math[p>=1?"floor":"ceil"](p/2)):t.isChrome||t.isIE||t.isMSEdge||(g=Math.max(Math.abs(p),Math.abs(u)),(!n||g<n)&&(n=g,c(r,g)&&(n/=40)),c(r,g)&&(d/=40,u/=40,p/=40),d=Math[d>=1?"floor":"ceil"](d/n),u=Math[u>=1?"floor":"ceil"](u/n),p=Math[p>=1?"floor":"ceil"](p/n)),l.settings.normalizeOffset&&this.getBoundingClientRect){var w=this.getBoundingClientRect();f=o.clientX-w.left,m=o.clientY-w.top}return o.deltaX=u,o.deltaY=p,o.deltaFactor=n,o.offsetX=f,o.offsetY=m,o.deltaMode=0,s.unshift(o,d,u,p),i&&clearTimeout(i),i=setTimeout(h,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function h(){n=null}function c(e,t){return l.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}.apply(t,n))||(e.exports=o)},2642:function(e,t,i){var n,o;n=[i(0),i(419)],void 0===(o=function(e){e.event.special.vtaphold={duration:1e3,moveThreshold:10,setup:function(){var t=e(this),i=e(),n=e(document),o=e.event.special.vtaphold.duration,r=e.event.special.vtaphold.moveThreshold,a=e.Event("vtaphold"),s=0,l=0,d=0,h=function(e){(Math.abs(e.pageX-s)>r||Math.abs(e.pageY-l)>r)&&c()},c=function(){d&&(clearTimeout(d),d=0),n.off("vmousemove",h).off("vmouseup",c),t.data("vtapholdSource",!1)},u=function(){c(),i.trigger(a)};t.bind("vmousedown",function(r){c(),s=r.pageX,l=r.pageY,i=e(r.target),e.extend(a,r),a.type="vtaphold";for(var p=r.target;p&&p!=t[0];){if(1==e(p).data("vtapholdSource"))return;p=p.parentNode}t.data("vtapholdSource",!0),n.on("vmousemove",h).on("vmouseup",c),d=setTimeout(u,o)})}}}.apply(t,n))||(e.exports=o)},2643:function(e,t,i){var n,o;n=[i(0),i(519),i(1198)],void 0===(o=function(e,t,i){var n=i.build("Widget.ScrollView",i,{defaultOptions:{smoothScroll:!0,method:"scroll"},_attachBehavior:function(){this._scrollX=0,this._scrollY=0,this.$inner=this.$element.children().first()},_ready:function(){this.scrollTo(this._scrollX,this._scrollY)},scrollTo:function(e,t){this.trigger("scroll-start",{x:this._scrollX,y:this._scrollY}),this._setScrollPosition(e,t),this.trigger("scroll-stop",{x:this._scrollX,y:this._scrollY})},_translate3d:function(e,i){t.setElementTransform(this.$inner,"translate3d("+e+"px,"+i+"px, 0)")},_setScrollPosition:function(e,t){switch(e=e>0?e:0,t=t>0?t:0,this.options.method){case"offset":this.$inner.css({left:-e+"px",top:-t+"px"});break;case"scroll":this.$element[0].scrollLeft=e,this.$element[0].scrollTop=t;break;case"transform":this._translate3d(-e,-t)}this._scrollX=e,this._scrollY=t,this.trigger("scroll",{x:this._scrollX,y:this._scrollY})},getWidth:function(){return this.$element.width()},getHeight:function(){return this.$element.height()},getScrollWidth:function(){return"scroll"===this.options.method?this.$element[0].scrollWidth:this.$inner[0].offsetWidth},getScrollHeight:function(){return"scroll"===this.options.method?this.$element[0].scrollHeight:this.$inner[0].offsetHeight},getScrollMaxX:function(){var e=this.getScrollWidth()-this.getWidth();return e<0?0:e},getScrollMaxY:function(){var e=this.getScrollHeight()-this.getHeight();return e<0?0:e},getPosition:function(){return{x:this._scrollX,y:this._scrollY}}});return i.addWidgetConstructorAsjQueryPlugin("wpScrollView",n),n}.apply(t,n))||(e.exports=o)},2644:function(e,t,i){var n,o;n=[i(0),i(1198),i(1725),i(1492),i(1493),i(419)],void 0===(o=function(e,t,i,n,o,r){var a=t.build("Widget.CollectionBrowser",t,{_widgetName:"CollectionBrowser",defaultOptions:{sourceArray:[],interactiveImageClipClassName:i.prototype.defaultOptions.clipClassName,interactiveImageViewClassName:i.prototype.defaultOptions.viewClassName,interactiveImageContentClassName:i.prototype.defaultOptions.contentClassName,swipePanelGroupClassName:o.prototype.defaultOptions.widgetClass,swipePanelGroupViewClassName:o.prototype.defaultOptions.viewClass,swipePanelGroupPanelClassName:o.prototype.defaultOptions.panelClass,swipePanelGroupPanelPreviousClassName:o.prototype.defaultOptions.previousClass,swipePanelGroupPanelActiveClassName:n.prototype.defaultOptions.activeClass,swipePanelGroupPanelNextClassName:o.prototype.defaultOptions.nextClass,closeButtonClassName:"wp-collection-browser-close-button",showClassName:"wp-show",hideClassName:"wp-hide",allowDelegation:!1},_transformMarkup:function(){var t=this.options,i=t.sourceArray,n="";n+='<div class="'+t.swipePanelGroupClassName+'">',n+='  <div class="'+t.swipePanelGroupViewClassName+'">';for(var o=0;o<i.length;o++){var r=e(i[o]).addClass(t.interactiveImageContentClassName).prop("outerHTML");n+='    <div class="'+t.swipePanelGroupPanelClassName+'">',n+='      <div class="'+t.interactiveImageClipClassName+'">',n+='        <div class="'+t.interactiveImageViewClassName+'">',n+="          "+r,n+="        </div>",n+="\t     </div>",n+="    </div>"}n+="  </div>",n+="</div>",n+='<button class="'+t.closeButtonClassName+'"></button>',this.$element.html(n)},_attachBehavior:function(){var t=this,i=t.options,n=t.$element.find("."+i.swipePanelGroupClassName).wpSwipePanelGroup({allowDelegation:i.allowDelegation});t.swipePanelGroup=n.data("wpSwipePanelGroup"),t.$element.find("."+i.interactiveImageClipClassName).wpInteractiveImage(),t.swipePanelGroup.bind("wp-panels-queued",function(e,i){t._fit()}),e(window).resize(function(){t._fit()}),e(window).load(function(){t._fit()}),t.$element.find(" ."+i.closeButtonClassName).bind("vclick",function(e){return t.hideWidget(),!1}),e(document).keyup(function(e){27==e.keyCode&&t.hideWidget()})},showWidget:function(){var e=this.options;this.$element.removeClass(e.hideClassName).addClass(e.showClassName),this._fit(),this.trigger("show")},hideWidget:function(){var e=this.options;this.$element.removeClass(e.showClassName).addClass(e.hideClassName),this.trigger("hide")},_fit:function(){var e=this.$element,t={duration:0,canScaleUp:!1},i=this.options,n=" ."+i.interactiveImageClipClassName,o="."+i.interactiveImageContentClassName,r=e.find("."+i.swipePanelGroupPanelPreviousClassName+n),a=e.find("."+i.swipePanelGroupPanelActiveClassName+n),s=e.find("."+i.swipePanelGroupPanelNextClassName+n);if(r.length>0){var l=r.find(o);l.width()>0&&l.height()>0&&r.wpInteractiveImage("fitAndCenter",t)}if(a.length>0){var d=a.find(o);d.width()>0&&d.height()>0&&a.wpInteractiveImage("fitAndCenter",t)}if(s.length>0){var h=s.find(o);h.width()>0&&h.height()>0&&s.wpInteractiveImage("fitAndCenter",t)}},_ready:function(){this._fit()}});return t.addWidgetConstructorAsjQueryPlugin("wpCollectionBrowser",a),a}.apply(t,n))||(e.exports=o)},2645:function(e,t,i){var n,o;n=[i(0),i(520),i(1491),i(1724)],void 0===(o=function(e,t,i,n){return i.desktopScrollbarPlugin={defaultOptions:{scrollbarMarkupCallback:null,scrollbarsUseTransforms:!1,scrollbarPlugins:void 0},initialize:function(i,n){var o=this;!t.touchEnabled&&i.$element.hasClass("no-scrollbars");n=e.extend(n,e.extend({},o.defaultOptions,n)),o._isEnabled(i,n)&&i.bind("transform-markup",function(e){o._transformMarkup(i)}).bind("attach-behavior",function(e){o._attachBehavior(i)})},_isEnabled:function(e,i){return!t.touchEnabled&&!e.$element.hasClass("no-scrollbars")},_transformMarkup:function(t){var i,n=t.options.direction;t._dsbp$root=t.$element.parent(),t._dsbp$vSB=e(),t._dsbpVSBSize=100,t._dsbp$hSB=e(),t._dsbpHSBSize=100,t._dsbpIsScrolling=!1,t._dsbpMouseInView=!1,n&&"vertical"!==n||((i=this._getScrollbarMarkup(t,"vertical")).appendTo(t._dsbp$root),t._dsbp$vSB=i),n&&"horizontal"!==n||((i=this._getScrollbarMarkup(t,"horizontal")).appendTo(t._dsbp$root),t._dsbp$hSB=i)},_syncScrollbars:function(e,t){var i=e.options.direction;if(!i||"vertical"===i){var n=e.height(),o=e.scrollHeight(),r=Math.round(100*(n>o?1:n/o));e._dsbpVSBSize!=r&&e._dsbpVSB.$thumb.css("height",r+"%"),e._dsbpVSB._resetConstraints(t),e._dsbpVSBSize=r}if(!i||"horizontal"===i){var a=e.width(),s=e.scrollWidth(),l=Math.round(100*(a>s?1:a/s));e._dsbpHSBSize!=l&&e._dsbpHSB.$thumb.css("width",l+"%"),e._dsbpHSB._resetConstraints(t),e._dsbpHSBSize=l}},_showScrollbars:function(e){this._syncScrollbars(e,!1),e._dsbpVSBSize<100&&e._dsbp$vSB.addClass("visible"),e._dsbpHSBSize<100&&e._dsbp$hSB.addClass("visible")},_hideScrollbars:function(e){e._dsbpMouseInView||e._dsbpIsScrolling||(e._dsbp$vSB.removeClass("visible"),e._dsbp$hSB.removeClass("visible"))},_attachBehavior:function(e){var i=this;t.touchEnabled||e.tracker.disable(),e._dsbpLock=0,e._dsbpScrollStart=function(t){i._handleScrollStart(e)},e._dsbpScrollStop=function(t){i._handleScrollStop(e)},e._dsbpScrollWheel=function(t,n,o,r){return i._handleMouseWheel(e,n,o,r)},e.$element.bind("mousewheel",e._dsbpScrollWheel),e._dsbp$root.bind("mouseenter",function(t){e._dsbpMouseInView=!0,i._showScrollbars(e)}),e._dsbp$root.bind("mouseleave",function(t){e._dsbpMouseInView=!1,i._hideScrollbars(e)}),e._dsbp$vSB.length>0&&(e._dsbpVSB=new n(e._dsbp$vSB,{ignoreX:!0,ignoreY:!1,trackClassName:"wp-scrollbar-track",thumbClassName:"wp-scrollbar-thumb",useTransforms:e.options.scrollbarsUseTransforms,plugins:e.options.scrollbarPlugins}),e._dsbpVSB.bind("wp-slider-drag-start",e._dsbpScrollStart).bind("wp-slider-drag-stop",e._dsbpScrollStop).bind("wp-slider-update",function(t,n){i._handleVerticalScroll(e,n)}),e._dsbp$vSB.bind("click",function(){return!1}).bind("mousewheel",e._dsbpScrollWheel),e.bind("scroll",function(t,n){i._handleScroll(e,n)})),e._dsbp$hSB.length>0&&(e._dsbpHSB=new n(e._dsbp$hSB,{ignoreX:!1,ignoreY:!0,trackClassName:"wp-scrollbar-track",thumbClassName:"wp-scrollbar-thumb",useTransforms:e.options.scrollbarsUseTransforms,plugins:e.options.scrollbarPlugins}),e._dsbpHSB.bind("wp-slider-drag-start",e._dsbpScrollStart).bind("wp-slider-drag-stop",e._dsbpScrollStop).bind("wp-slider-update",function(t,n){i._handleHorizontalScroll(e,n)}),e._dsbp$hSB.bind("click",function(){return!1}).bind("mousewheel",e._dsbpScrollWheel))},_getScrollbarMarkup:function(t,i){var n=t.options.scrollbarMarkupCallback;return n?n(t,i):e('<div class="wp-scrollbar '+i+'"><div class="wp-scrollbar-track"><div class="wp-scrollbar-thumb"></div></div></div>')},_syncWithWidget:function(e){var t=e.scrollLeft(),i=e.scrollTop();if(this._syncScrollbars(e),e._dsbpHSB){var n=t/(e.scrollWidth()-e.width());e._dsbpHSB.setPositionByPercentage(n,0)}if(e._dsbpVSB){n=i/(e.scrollHeight()-e.height());e._dsbpVSB.setPositionByPercentage(0,n)}},_handleScroll:function(e,t){e._dsbpLock||(++e._dsbpLock,this._syncWithWidget(e),--e._dsbpLock)},_handleMouseWheel:function(e,t,i,n){++e._dsbpLock;var o=e.scrollLeft(),r=e.scrollTop();e.scrollTo(o+i,r-n);var a=e.scrollLeft(),s=e.scrollTop(),l=o!=a||r!=s;return l&&this._syncWithWidget(e),--e._dsbpLock,!l},_handleScrollStart:function(e){e._dsbpIsScrolling=!0},_handleScrollStop:function(e){e._dsbpIsScrolling=!1,this._hideScrollbars(e)},_handleVerticalScroll:function(e,t){if(!e._dsbpLock){++e._dsbpLock;var i=this._percentageToPixelValue(e.height(),e.scrollHeight(),t.percentage);e.scrollTo(e.scrollLeft(),i),--e._dsbpLock}},_handleHorizontalScroll:function(e,t){if(!e._dsbpLock){++e._dsbpLock;var i=this._percentageToPixelValue(e.width(),e.scrollWidth(),t.percentage);e.scrollTo(i,e.scrollTop()),--e._dsbpLock}},_percentageToPixelValue:function(e,t,i){return i*(e<t?t-e:0)}},i.desktopScrollbarPlugin}.apply(t,n))||(e.exports=o)},2646:function(e,t,i){var n,o;n=[i(0),i(1723)],void 0===(o=function(e,t){return t.sliderTrackPlugin={initialize:function(e,t){var i=this;e.bind("attach-behavior",function(t){i._attachBehavior(e)})},_attachBehavior:function(e){e.$track.bind(e.tracker.dragEventHandler.startEvent,function(t){var i=e.$track.offset();e._resetConstraints(),e.setPositionByPixel(t.pageX-i.left,t.pageY-i.top),e.tracker.dragEventHandler._startDrag(t),t.preventDefault()})}},t.sliderTrackPlugin}.apply(t,n))||(e.exports=o)},2647:function(e,t,i){var n,o;n=[i(0),i(1493)],void 0===(o=function(e,t){return t.nextPreviousPlugin={defaultOptions:{previousLinkClass:"wp-swipe-panel-group-previous-link",nextLinkClass:"wp-swipe-panel-group-next-link",firstPanelClass:"wp-first-panel-displayed",lastPanelClass:"wp-last-panel-displayed",noPanelClass:"wp-no-panel-displayed",injectNextPreviousLinks:!0,nextPreviousLinkTriggerEvent:"click"},initialize:function(t,i){var n=this;e.extend(i,e.extend({},n.defaultOptions,i)),t.nextPanel||(t.nextPanel=function(){var e=t.$element.length,i=t.activeIndex;i<e-1&&t.showPanel(i+1)}),t.previousPanel||(t.previousPanel=function(){var e=t.activeIndex;e>0&&t.showPanel(e-1)}),i.injectNextPreviousLinks&&(t.bind("transform-markup",function(){n._transformMarkup(t)}),t.bind("attach-behavior",function(){n._attachBehavior(t)}),t.bind("ready",function(){n._ready(t)}),t.bind("wp-panel-show wp-insert-panel wp-remove-panel",function(e,i){n._syncNavLinks(t,i)}))},_transformMarkup:function(t){var i=t.options;t._npp$nextLink=e('<a href="#" class="'+i.nextLinkClass+'">Next</a>'),t._npp$previousLink=e('<a href="#" class="'+i.previousLinkClass+'">Previous</a>'),t.$clip,t._npp$nextLink.appendTo(t.$clip),t._npp$previousLink.appendTo(t.$clip)},_syncNavLinks:function(e){var t=e.activeIndex,i=e.options.firstPanelClass,n=e.options.lastPanelClass,o=e.options.noPanelClass;e.$clip.removeClass(i+" "+n+" "+o),0===e.$element.length?e.$clip.addClass(o):(0===t&&e.$clip.addClass(i),t===e.$element.length-1&&e.$clip.addClass(n))},_next:function(e){var t=e.activeIndex;t<e.$element.length-1&&e.showPanel(t+1)},_previous:function(e){var t=e.activeIndex;t>0&&e.showPanel(t-1)},_attachBehavior:function(e){var t=this,i=e.options.nextPreviousLinkTriggerEvent||"click";e._npp$previousLink.on(i,function(i){return t._previous(e),!1}),e._npp$nextLink.on(i,function(i){return t._next(e),!1})},_ready:function(e){this._syncNavLinks(e)}},t.nextPreviousPlugin}.apply(t,n))||(e.exports=o)},2648:function(e,t,i){var n,o;n=[i(0),i(344),i(1198)],void 0===(o=function(e,t,i){return t.widget("Widget.ProgressBar",t.Widget,{_widgetName:"progress-bar",defaultOptions:{widgetClass:"wp-progress-bar",clipClass:"wp-progress-bar-clip",viewClass:"wp-progress-bar-view",orientation:"horizontal",useFloatPercentage:!1,percentage:0},_attachBehavior:function(){var e=this.options;this._$view=this.$element.find("."+e.viewClass),this._$view=this.$element.find("."+e.viewClass),this._percentage=e.percentage,this.setPercentage(this._percentage)},setPercentage:function(e){var t="horizontal"===this.options.orientation?"width":"height";this.options.useFloatPercentage&&(e*=100),this._$view.css(t,e+"%"),this._percentage=e,this.trigger("percentage",{percentage:e})}})}.apply(t,n))||(e.exports=o)},2649:function(e,t,i){var n,o;n=[i(0),i(344)],void 0===(o=function(e,t){return window.$=window.jQuery=e,window.WebPro=t,t}.apply(t,n))||(e.exports=o)},2650:function(e,t){e.exports='<script src="https://use.typekit.net/previewkits/pk-v1.js"><\/script>\n<link rel="stylesheet" type="text/css" href="/slate-web/css/shell-538f70a7.css">\n\n<div class="slate main-wrapper">\n  <div class="toolbars fouc" style="position: relative; height: 30px;">\n    <div class="modal-toolbar toolbar">\n      <div class="title" data-auto="projectTitle"></div>\n      <div class="doneButton" data-auto="doneBtn">{{locString.modal_toolbar.save}}</div>\n      <div class="cancelButton" data-auto="cancelBtn">{{locString.modal_toolbar.cancel}}</div>\n    </div>\n    <div class="main-toolbar toolbar">\n      <div class="application-options">\n        <div class="hamburgerButton mrvl-hamburger-menu hide" data-auto="mrvl-hamburger-menu"></div>\n        <div class="homeButton showing" data-auto="homeBtn"></div>\n        <div class="name" data-auto="editorName">Page</div>\n        <div class="syncButton showing" data-auto="syncBtn">\n            <div class="message saved showing" data-auto="saved">{{locString.sync.saved}}</div>\n            <div class="message saving" data-auto="saving">{{locString.sync.saving}}</div>\n        </div>\n      </div>\n      <div class="document-options">\n        <div class="button settingsButton" data-auto="settingsBtn">{{locString.toolbar.settings}}</div>\n        <div class="button previewButton showing" data-auto="previewBtn">{{locString.toolbar.preview}}</div>\n        <div class="button presentButton showing" data-auto="presentBtn">{{locString.toolbar.present}}</div>\n        <div class="button uploadButton showing" data-auto="uploadBtn">{{locString.toolbar.share}}</div>\n      </div>\n      <div class="editor-options">\n        <div class="button debugEmbedButton">Debug Embed</div>\n        <div class="button debugLocButton">Debug Loc</div>\n        <div class="button getInspiredButton hide" data-auto="getInspiredBtn">{{locString.toolbar.get_inspired}}</div>\n        <div class="button themesButton showing" data-auto="themesBtn">{{locString.toolbar.themes}}</div>\n      </div>\n    </div>\n  </div>\n\n  <div class="editor-wrapper showing">\n    <iframe class="editor" data-auto="editor">\n\x3c!--\n      <iframe id="editor" src="/slate-web.editor.html?theme=Luca" >\n--\x3e\n    </iframe>\n\n      <div class="formatting-toolbar"></div>\n\n      <div class="image-picker-container"></div>\n      <div class="get-inspired-panel fouc"></div>\n\n      <div class="theme-picker fouc">\n          <div class="title-bar">{{locString.theme_picker.title}}\n            <div class="close-button"></div>\n          </div>\n\n          <div class="more-to-come"></div>\n          <div class="theme-wrapper hide"></div>\n      </div>\n\n      <div class="editor-dialog-overlay confirm-overlay"></div>\n      <div class="help-video-dialog-overlay"></div>\n      <div class="link-dialog-overlay hide"></div>\n      <div class="embedded-link-dialog-overlay hide"></div>\n      <div class="inline-link-dialog-overlay hide"></div>\n      <div class="conflict-dialog-overlay hide"></div>\n      <div class="attribution-dialog-overlay hide"></div>\n      <div class="popup-dialog-overlay hide"></div>\n      <div class="theme-picker-dialog-overlay hide"></div>\n      <div class="theme-preview-popup-overlay hide"></div>\n      <div class="mini-progress-bar-overlay hide"></div>\n\n  </div>\n    <div class="preview-wrapper">\n        <iframe class="preview"></iframe>\n    </div>\n    <div class="splash-wrapper showing">\n        <iframe class="splash" src="/slate-web/splash-0ed8aff7.html"></iframe>\n    </div>\n    <div class="saving-overlay fouc" data-auto="savingOverlay">\n        <div class="saving-overlay-content">{{locString.sync.saving}}</div>\n    </div>\n    <div class="settings-flyout-overlay">\n        <div class="settings-flyout">\n            <div class="settings-flyout-inner">\n                <div class="settings-flyout-title">{{locString.toolbar.setting.project_settings}}</div>\n                <div class="settings-flyout-settings">\n                    <div class="settings-flyout-setting">\n                        <div class="settings-flyout-setting-label">{{locString.toolbar.setting.header_footer}}</div>\n                        <div class="settings-flyout-setting-checkbox header-footer-toggle" data-checked="false"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n  <div class="slate-share-submenu-overlay submenu">\n    <div class="slate-share-submenu">\n      <div class="slate-share-submenu-items">\n        <div class="button shareButton showing" data-auto="shareBtn">{{locString.share_submenu.button.publish}}</div>\n        <div class="button printButton showing">{{locString.share_submenu.button.print}}\n          <div class="unsupported popup">\n            <div class="title">{{locString.print.unsupported.title}}</div>\n            {{locString.print.unsupported.message}}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="slate-debug-submenu-overlay submenu">\n    <div class="slate-debug-submenu">\n      <div class="slate-debug-submenu-items"></div>\n    </div>\n  </div>\n  <div class="slate-print-message-overlay">\n    <h3 class="supported-text">{{locString.print.wrong_method.title}}</h3>\n    <p class="supported-text">{{locString.print.wrong_method.message}}</p>\n    <h3 class="unsupported-text">{{locString.print.unsupported.title}}</h3>\n    <p class="unsupported-text">{{locString.print.unsupported.message}}}</p>\n  </div>\n\n\n</div>\n'},2651:function(e,t){e.exports='<script src="https://use.typekit.net/previewkits/pk-v1.js"><\/script>\n<link rel="stylesheet" type="text/css" href="/slate-web/css/shell-538f70a7.css">\n\n<div class="slate main-wrapper simple-preview">\n\t<div class="preview-wrapper">\n\t\t<iframe class="preview"></iframe>\n\t</div>\n\t<div class="theme-picker showing">\n\t\t<div class="theme-wrapper">\n\t\t\t<div class="theme-button-wrapper">\n\t\t\t\t<button class="theme-button crisp-theme"/>\n\t\t\t</div>\n\t\t\t<div class="theme-button-wrapper">\n\t\t\t\t<button class="theme-button storybook-theme"/>\n\t\t\t</div>\n\t\t\t<div class="theme-button-wrapper">\n\t\t\t\t<button class="theme-button trek-theme"/>\n\t\t\t</div>\n\t\t\t<div class="theme-button-wrapper">\n\t\t\t\t<button class="theme-button chic-theme"/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n'},297:function(e,t,i){var n,o;n=[i(0),i(2),i(3),i(1)],void 0===(o=function(e,t,i,n){"use strict";return n.Model.extend({PROPERTIES_TO_CHECK:null,SERVICE_NAME:null,WAIT_TIME:9e4,init:function(){return t.bindAll(this,t.functionsIn(this)),this.initializeDefered?this.initializeDefered.promise:(this.initializeDefered=i.defer(),this._loadLibrary(),this._whenAvailable(this.SERVICE_NAME,this.PROPERTIES_TO_CHECK).then(function(){this.initializeDefered.resolve()}.bind(this),function(){this.initializeDefered.reject()}.bind(this)),this.initializeDefered.promise)},_loadLibrary:function(){return!1},_whenAvailable:function(e,n){var o=this.WAIT_TIME,r=i.defer(),a=function(e,i){var n=!1;return t.each(i,function(t,i){typeof window[e][i]===t&&(n=!0)}),n},s=function(){var t=Date.now()+o;if(!window[e]||n&&!a(e,n))var i=window.setInterval(function(){!window[e]||n&&!a(e,n)?Date.now()>=t&&(window.marvel.logger.warn(e+" is not available globally"),clearInterval(i),r.reject()):(clearInterval(i),r.resolve())},2);else r.resolve()};return"complete"!==document.readyState?window.attachEvent?window.attachEvent("onload",s):window.addEventListener("load",s,!1):s(),r.promise}})}.apply(t,n))||(e.exports=o)},299:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(3),i(5),i(13),i(331),i(45),i(235),i(519),i(2598),i(6),i(252),i(16),i(4),i(2604),i(117),i(115),i(1180)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h,c,u,p,g,f,m,v,b){"use strict";var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return new(s.extend({_saveDeferredQueue:[],_getLucaDatTemplate:function(){return{version:2.4,viewCount:0,likeCount:0,cpVersion:"2.0",lucaAssetLocation:"",publishURL:"",cpAssetID:"",cpHash:"",category:"",scope:"",overrideCredits:!1,customCredits:"",authorFirstName:"",authorLastName:"",displayAuthorProfile:!1,created:"",lastModified:"",lastShared:"",ownerAdobeID:"",title:"",lucaUUID:"",imagePickerContexts:[]}},_getSlateDataTemplate:function(){return{version:2.5,category:"",scope:"",title:"",publishTitle:this.getSetting("newDocName"),publishTitleIsUserSet:!1,lastSharedTitle:"",overrideCredits:!1,customCredits:"",authorFirstName:"",authorLastName:"",displayAuthorProfile:!1,headerDisabled:void 0,lastPublishedHeaderDisabled:void 0,imagePickerContexts:[]}},getSetting:function(e){},seedNewDoc:function(t){var i=this.currentDoc.getDCXComposite(),n=i.current,r=this.currentDoc.getDCXRoot(),a=n.addChild("page",void 0,0,n.rootNode);this.currentDoc.addComponent({parent:a,name:"content",relationship:"primary",type:"application/vnd.adobe.luca.content+json",path:"luca.json",contents:"{}"});var s=(new Date).toUTCString(),l=this._getSlateDataTemplate();r.setValue("slate#data",l),l=e.extend(this._getLucaDatTemplate(),{lucaUUID:i.id,created:s,lastModified:s,ownerAdobeID:o.getProfile().userId}),this.currentDoc.addComponent({parent:a,name:"data",relationship:"primary",type:"application/vnd.adobe.luca.data+json",path:"lucaDat.json",contents:JSON.stringify(l)}).setModified()},_startingCreateDoc:function(){this.loadDocumentPromise=null},loadDocument:function(){return this.loadDocumentPromise||(this.loadDocumentPromise=s.prototype.loadDocument.call(this).then(function(e){var t=n();return e.isNew()||(t=t.thenResolve(n.all([e.getComponent("/luca.json"),e.getComponent("/lucaDat.json")])).spread(function(t,i){var o=e.getDCXComposite().current,r=n(),a=!1;if(t&&"{}"!=t){try{var s=JSON.parse(t)}catch(e){throw console.error("slate-app-storage failed to parse and init the luca.json model with "+e,e),e}var l=this._updateJsonImagePaths(s,o);i||(a=!0,i=this._getNewLucaDatState(s)),r=(r=r.thenResolve(this._ensureBrandKit(s,e))).then(function(){this._ensureLucaComponent(s,o,e)}.bind(this))}return r.then(function(){this._ensureSlateData(e,i),this._ensureLucaDatWithState(o,e,a,i),this._cleanupUnusedImageComponents(l)}.bind(this))}.bind(this))),t.thenResolve(e)}.bind(this)).catch(function(e){console.error("slate-app-storage failed to load the document with "+e,e),window.marvel.events.trigger("mrvl-must-reload",{msg:"We seem to have encountered an error and need to reload, you will be directed back to the projects view."})})),this.loadDocumentPromise},_updateJsonImagePaths:function(e,t){var i=e.pages[0],n=[];if(i)for(var o=i.sections,r=0,a=o.length;r<a;r++)for(var s=o[r].content_items,l=0,h=s.length;l<h;l++){var c=s[l].image;if(c&&c.image_url){var u=t.getComponentWithAbsolutePath("/"+d.setQueryParams(c.image_url));u&&(c.image_url=d.setQueryParam(c.image_url,"asset_id",u.id),n.push({url:c.image_url,asset_id:u.id}))}}return n},_ensureBrandKit:function(e,t){return p.getController().then(function(e){return this._ensureDocumentContext(t,e)}.bind(this)).then(function(i){this.updateJsonTheme(e,i,t)}.bind(this))},_ensureDocumentContext:function(e,t){var i=e.getMyApp(),n=i.getAuthoringContextId(e);return t.getContextById(n).then(function(t){return t||p.acquireDefaultBrand().then(function(t){return i.setAuthoringContextId(e,t.getId(),!0).thenResolve(t)})}.bind(this))},updateJsonTheme:function(e,t,i){var n=(i=i||this.currentDoc).getMyApp().getAuthoringContextThemeId(i);if(t&&n){var o=t.getThemeById(n);if(o){var r=e.theme,a=o.getValue("theme#data");r&&a&&f(r,a),e.theme=a,e.theme.id=n,e.theme.brandId=t.getId()}}},_ensureLucaComponent:function(e,t,i){var n=i.getComponentWithAbsolutePath("/luca.json");if(n)n.set("contents",JSON.stringify(e));else{var o=t.getComponentWithAbsolutePath("/luca.json");i.addComponent({name:o.name,relationship:o.relationship,type:o.type,path:o.path,contents:JSON.stringify(e)})}},_ensureSlateData:function(t,i){var n=t.getDCXRoot(),o=n.getValue("slate#data");if(!o){var r=this._getSlateDataTemplate();if(i){var a=JSON.parse(i);for(var s in o={},r)if(r.hasOwnProperty(s)){var l=a[s];o[s]=l}o.version=r.version,o=e.extend(r,o)}else o=r}o.publishTitle||(o.publishTitle=o.title),o.lastSharedTitle||(o.lastSharedTitle=o.publishTitle),n.setValue("slate#data",o)},_ensureLucaDatWithState:function(e,t,i,n){var o=t.getComponentWithAbsolutePath("/lucaDat.json");if(o)o.set("contents",n);else{var r=e.getChildrenOf()[0];o=t.addComponent({parent:r,name:"data",relationship:"primary",type:"application/vnd.adobe.luca.data+json",path:"lucaDat.json",contents:n})}i&&o.setModified()},_cleanupUnusedImageComponents:function(e){var i=this.currentDoc.getDCXComposite().current,n=t.find(i.getChildrenOf(),function(e){return"page"==e.name}),o=i.getComponentsOf(n);t.each(o,function(n){"image"===n.name&&(t.find(e,function(e){return e.asset_id===n.id})||i.removeComponent(n))})},_getNewLucaDatState:function(t){var i=(new Date).toUTCString();return JSON.stringify(e.extend(this._getLucaDatTemplate(),{lucaUUID:t.id,created:i,lastModified:i,ownerAdobeID:o.getProfile().userId,title:t.title?t.title:""}))},getData:function(e,t){var i=(t=t||this.currentDoc).getDCXRoot().getValue("slate#data");if(i)return i[e];var n=t.getComponentWithAbsolutePath("/lucaDat.json");if(n){var o,r=n.get("contents");try{o=JSON.parse(r)}catch(t){console.error("slate-app-storage failed to getData for ["+e+"] with "+t,{stateStr:r,error:t})}return o[e]}},setData:function(e,t,i){var n;i=i||this.currentDoc,"object"==typeof e?n=e:(n={})[e]=t;var o,r,a=i.getDCXRoot(),s=i.getComponentWithAbsolutePath("/lucaDat.json");if(s){var l=s.get("contents");try{o=JSON.parse(l)}catch(t){console.error("slate-app-storage failed to setData ["+e+"] with "+t,{stateStr:l,error:t})}if("string"==typeof n.credits&&(n.customCredits=n.credits,delete n.credits),"string"==typeof n.customCredits){var d=this.getDocumentDefaultCredits(),h=n.customCredits;h!=d?0===h.indexOf(d)?(n.overrideCredits=!1,n.customCredits=h.substr(d.length)):(n.overrideCredits=!0,n.customCredits=h):(n.overrideCredits=!1,n.customCredits="")}for(r in n)n.hasOwnProperty(r)&&(o[r]=n[r]);s.set("contents",JSON.stringify(o)),s.setModified()}for(r in o=a.getValue("slate#data"),n)n.hasOwnProperty(r)&&(o[r]=n[r]);a.setValue("slate#data",o)},addComponent:function(e){return this.currentDoc.addComponent(e),this.nextSave()},nextSave:function(){var e=n.defer();return this._saveDeferredQueue.push(e),e.promise},getImage:function(t,i,o){var r=new n.defer,a=this.currentDoc.getDCXComposite(),s=(a.current.getComponentWithAbsolutePath(t),this.currentDoc.getComponentHref(t,!0,{size:i.size})),l=0;return function t(){var i=document.createElement("img");i.onload=function(){r.resolve({path:s.replace(new RegExp("^.*image_assets/[^/]*/"+a.id+"/"),""),size:{width:i.width,height:i.height}})},i.onerror=function(){e.get(s).success(n).error(o)};var n=function(e,i,n){l<2?t():o(n,i,"Image not accepting URL")},o=function(e,t,i){var n=i,o=1;"Image not accepting URL"!==i&&(o=e.status),r.reject({message:n,status:o})};l++,i.src=s}(),r.promise},copyThumbnailFrom:function(e,t){var i,o=n.defer();if(!e)return(i=this.currentDoc.getComponentWithAbsolutePath("/cover.jpg"))&&this.currentDoc.removeComponent(i),o.resolve(),o.promise;if(t){var r=t.split(" ");t={x:parseFloat(r[0])/100,y:parseFloat(r[1])/100}}else t={x:.5,y:.5};var a,s=document.createElement("canvas"),d=new Image;return d.onload=function(){var e=d.width,n=d.height,r=e/n;768/576<=r?e=(n=576)*r:768/576>r&&(n=(e=768)/r);var h=t.x,c=t.y,u=e*h,p=n*c,g=768*h,f=576*c,m=Math.round(Math.min(g-u,u-g)),v=Math.round(Math.min(f-p,p-f));s.width=768,s.height=576,s.getContext("2d").drawImage(d,m,v,e,n),a=l(s.toDataURL("image/jpeg")),(i=this.currentDoc.getComponentWithAbsolutePath("/cover.jpg"))?(i.set("file",a),i.setModified()):(i=this.currentDoc.addComponent({name:"cover",relationship:"rendition",type:"image/jpeg",path:"cover.jpg",file:a})).setModified(),o.resolve()}.bind(this),d.onerror=function(e){o.reject(e)},d.src=e,o.promise},setWebCoverImage:function(e,t){var i=this.currentDoc.getDCXRoot(),n=t.split(" ");e=(e=e||"").replace(/^([^\#\?]*)\??[^\#]*\#?.*$/,"$1"),i.setValue("slate#coverpath",e),i.setValue("slate#coverx",n[0]),i.setValue("slate#covery",n[1])},clearWebCoverImage:function(){var e=this.currentDoc.getDCXRoot();e.removeValue("slate#coverpath"),e.removeValue("slate#coverx"),e.removeValue("slate#covery")},_settingCoverImage:!1,_coverImageUpdateQueue:[],generateEmbedImage:function(e,t,i,n,o,r,a){return h.generate({title:e,subtitle:t,backgroundImage:n,titlePosition:i,imagePosition:o,theme:r,authoringContext:a,width:1024,height:512})},debugEmbedImage:function(t,i,n,o,r,a,s){var l=e(".debug-embed-image-holder");if(0==l.length){l=e("<div>").addClass(".debug-embed-image-holder").css({position:"absolute",width:"50%",top:0,left:0,zIndex:9999,backgroundColor:"rgba(0,0,0,0.8)",textAlign:"center",padding:"2px"});var d=e("<img>").css({width:"100%"}),h=e("<button>").text("Close").css({padding:"6px 9px",margin:"4px"}).one("click",function(e){l.remove()});l.append(d),l.append(h),e("body").append(l)}return this.generateEmbedImage(t,i,n,o,r,a,s).then(function(e){l.find("img").attr("src",e)})},setEmbedImage:function(e,t,i,n,o,r,a){var s=this;return this.generateEmbedImage(e,t,i,n,o,r,a).then(function(e){var t=l(e),i=s.currentDoc.getComponentWithAbsolutePath("/embed.jpg");i?i.set("file",t):i=s.currentDoc.addComponent({name:"shareImage",relationship:"rendition",type:"image/jpeg",path:"embed.jpg",file:t}),i.setModified()})},removeImage:function(e){var i=this.currentDoc.getDCXComposite().current,n=new RegExp("images/"+e+"."),o=t.find(i.getChildrenOf(),function(e){return"page"==e.name}),r=i.getComponentsOf(o),a=t.find(r,function(e){return"image"===e.name&&e.path.search(n)>=0});a&&i.removeComponent(a)},getDocument:function(e){return JSON.parse((e||this.currentDoc).getComponentWithAbsolutePath("/luca.json").get("contents"))},checkAndSetBranded:function(e){var t=this.getData("headerDisabled"),i=void 0!==t&&!t,n=!b.isBuiltInTheme(e);this.setBranded(i||n)},setBranded:function(e){var t=this.currentDoc.getDCXRoot();e&&!1===t.getValue("authctx#uses-branded-elements")&&g.trackEvent("addedBrandingToProject",{contextData:["projectId"]},"slate:editor"),t.setValue("authctx#uses-branded-elements",e)},isBranded:function(){return this.currentDoc.getDCXRoot().getValue("authctx#uses-branded-elements")},saveDocument:function(e,t){return t=t||{},u.execute("Save Slate",5,function(i){var n=this.currentDoc.saveChanges(function(i){if(e){i.setValue("slate#modelVersion",e.model_version),t.skipContentModifiedTimestamp||this.currentDoc.setContentModifiedIfNeeded();var n=this.currentDoc.getComponentWithAbsolutePath("/luca.json");n.set("contents",JSON.stringify(e)),n.setModified();var o=this.currentDoc.getDCXComposite().current;o&&(n=o.getComponentWithAbsolutePath("/embed.jpg"))&&"shareImage"!=n.name&&(n.name="shareImage")}for(;this._saveDeferredQueue.length;)this._saveDeferredQueue.shift().resolve(this.currentDoc.getDCXComposite())}.bind(this),t.override,function(){return{slateDocJSON:e,isPublishing:t.isPublishing}});i.promises.push(n)}.bind(this))},resolveConflict:function(t,i){var o,s;if(i){var l=i();o=l.slateDocJSON,s=l.isPublishing}else s=a.isPublishing;var d,h,u,p=t._data["cp#contentModified"],g=this,m=this.currentDoc.getDCXComposite(),v=m.current.rootNode,b=!1,w=!1,k=!1;r.loadBaseBranch(m).then(function(e){var i=(d=e).getComponentWithAbsolutePath("/lucaDat.json"),o=t.getComponentWithAbsolutePath("/lucaDat.json");return i&&o?n.all([r.getComponent(i),r.getComponent(o)]):["{}","{}"]}).spread(function(e,t){try{h=JSON.parse(e)}catch(e){throw new Error("base lucaDat.json is not JSON-parseable")}try{u=JSON.parse(t)}catch(e){throw new Error("remote lucaDat.json is not JSON-parseable")}}).then(function(){for(var i,o,r,a=f(h,u)||[],s={likeCount:!0,viewCount:!0},l=!1,p=0,g=a.length;p<g;p++){if(!s[r=(o=(i=a[p]).path)?o[o.length-1]:""]){k=!0;break}l=!0}var m,v=!1;for(s={"cp#assetId":!0,"cp#shortId":!0,"cp#contentEtag":!0,"cp#contentModified":!0,"cp#publishedEtag":!0,"cp#projectId":!0},p=0,g=(a=f(d._data,t._data)||[]).length;p<g;p++){var S=(o=(i=a[p]).path)[0];if("cp#assetId"==(r=o?o[o.length-1]:"")&&(!a.rhs&&i.lhs?(m=i.lhs,w=!0,v=!0):!a.lhs&&i.rhs&&(m=i.rhs,b=!0,v=!0)),!k&&"local"!=S&&!s[r]){var _,x=t.getComponentsOf(),y=t.getChildrenOf()[0],C=t.getComponentsOf(y);if("children"==o[0]&&"components"==o[2]&&5==o.length){_=C[o[3]];var T=o[4];l&&"lucaDat.json"==_.path||"luca.json"==_.path&&"version"==T||(k=!0)}else"components"==o[0]?"metadata"!=(_=x[o[1]]).relationship&&(k=!0):k=!0}}if(v&&m){var I=n.defer();return e.ajax({url:"https://"+c.cps+"/api/v2/"+c.lucac+"/assets/"+m+"?api_key="+c.key,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+window.adobeIMS.getAccessToken())},dataType:"json"}).always(function(){I.resolve(arguments)}),I.promise}}).then(function(e){e?"error"!=e[1]&&200==e[2].status?(b&&(v.setValue("cp#assetId",t.rootNode.getValue("cp#assetId")),v.setValue("cp#shortId",t.rootNode.getValue("cp#shortId")),v.setValue("cp#contentEtag",t.rootNode.getValue("cp#contentEtag")),v.setValue("cp#contentModified",t.rootNode.getValue("cp#contentModified"))),k?s?g.saveDocument(o,{override:!0}):g.trigger("update-conflict",{datetime:p,pushBeforePull:function(){if(w){m.resolvePullWithBranch(t);var e=m.current.rootNode;return e.setValue("cp#assetId",v.getValue("cp#assetId")),e.setValue("cp#shortId",v.getValue("cp#shortId")),e.setValue("cp#contentEtag",v.getValue("cp#contentEtag")),e.setValue("cp#contentModified",Date.now()),g.saveDocument(void 0,{override:!0})}var i=n.defer();return i.resolve(),i.promise}}):g.saveDocument(o,{override:!0})):(v.setValue("cp#assetId",null),v.setValue("cp#contentEtag",""),v.setValue("cp#contentModified",t.rootNode.getValue("cp#contentModified")),k?s?g.saveDocument(o,{override:!0}):g.trigger("update-conflict",{datetime:p,pushBeforePull:function(){if(b){m.resolvePullWithBranch(t);var e=m.current.rootNode;return e.setValue("cp#assetId",null),e.setValue("cp#contentEtag",""),e.setValue("cp#contentModified",Date.now()),g.saveDocument(void 0,{override:!0})}var i=n.defer();return i.resolve(),i.promise}}):g.saveDocument(o,{override:!0})):s?g.saveDocument(o,{override:!0}):k?g.trigger("update-conflict",{datetime:p}):g.saveDocument(o,{override:!0})}).catch(function(e){console.error("slate-app-storage failed to resolve conflict with "+e,{error:e,isPublishing:s}),s?g.saveDocument(o,{override:!0}):g.trigger("update-conflict",{datetime:p})})},community:window.marvel.settings.lucac,communityCategory:"lucas",doPublish:function(e,t,i){console.warn("THIS SHOULD NOT BE CALLED - its overriden in shell/EditSession.js")},extendPublishAnalytics:function(e){console.warn("THIS SHOULD NOT BE CALLED - its overriden in shell/EditSession.js")},getDocumentCredits:function(e){e=e||this.currentDoc;var t=this.getOverrideCredits(e),i=this.getCustomCredits(e)||"";return t?i:this.getDocumentDefaultCredits(e)+i},getDocumentDefaultCredits:function(e){e=e||this.currentDoc;var t=this.getDocument(e),i=[],n=t&&t.pages;if(n)for(var o=n.length,r=0;r<o;r++)this.getCreditsForPage(n[r],i);return i.length?v.format("storage.credits.default",{count:i.length})+" "+i.join(" â€¢ "):""},getCreditsForPage:function(e,t){if(t=t||[],e){var i=e.sections;if(i)for(var n=i.length,o=0;o<n;o++)for(var r=i[o].content_items,a=r.length,s=0;s<a;s++){var l=r[s];if("img"===l.type){var d=l.image;if(d&&d.license){var h=d.license.owner,c=d.license.photo_name;h&&c&&t.push(h+' - "'+c+'"')}}}}return t},getOverrideCredits:function(e){return this.getData("overrideCredits",e)||!1},getCustomCredits:function(e){return this.getData("customCredits",e)||""},savePublishedDataToDoc:function(e,t){var i=(new Date).toUTCString();this.setData({lastShared:i,lucaAssetLocation:t.assetLink,publishURL:t.publishUrl,publishVersion:t.publishedAssetVersion,cpAssetID:t.cpAssetId,cpHash:t.cpAlias})},getCompositeName:function(){return this.currentDoc.getDCXComposite().current.name},setCompositeName:function(e,t){this.currentDoc.getDCXComposite().current.name=e},getLastSharedTitle:function(e){return this.getData("lastSharedTitle",e)||this.getData("title",e)||this.getSetting("newDocName")},getEmbedHTML:function(e){e=this.currentDoc||e;var t,i=this.getLastSharedTitle(e),n=Date.now(),o=c.publishedContentBases.slate,r=window.location.host,a=e.getDCXRoot().getValue("cp#shortId");a||(a=this.getData("cpHash",e)),t=a?o+"/"+a+"/":this.getData("publishUrl",e);var s=this.getData("embedType",e),l=s&&"overlay"==s,d="<a "+(l?'class="asp-embed-link"':"")+' href="'+t+'" target="_blank"><img src="'+t+"embed.jpg?buster="+n+'" alt="'+function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return w[e]})}(i)+'" style="width:100%" border="0" /></a>';return l?'<script id="asp-embed-script" data-zindex="1000000" type="text/javascript" charset="utf-8" src="https://'+r+'/page-embed.js"><\/script>'+d:d},cleanUpComponentsBeforeServerCopy:function(e,t,i){i=i||this.currentDoc;var n=e.copy.files;if(n)for(var o=n.length-1;o>=0;o--){var r=n[o],a=r.type,s=r.destination;if("text/html"==a||"index.html"==s){var l=i.getComponentWithAbsolutePath("/"+s);if(l)i.removeComponent(l);else{var d=i.getDCXComposite().current,h=d.getComponentWithAbsolutePath("/"+s);h&&d.removeComponent(h)}n.splice(o,1)}}},handlePublishCompletedModerate:function(e,t,i,o){return n.resolve()},getAllText:function(e){for(var t=e.pages[0].sections,i="",n=0,o=t.length;n<o;n++)for(var r=t[n],a=0,s=r.content_items.length;a<s;a++){i+=r.content_items[a].text}return i}}))}.apply(t,n))||(e.exports=o)},315:function(e,t,i){var n,o;n=[i(0),i(28),i(1),i(17),i(6),i(5),i(2597),i(299),i(8),i(115),i(2650),i(2651)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h,c){"use strict";return i.View.extend({collection:null,tagName:"section",initialize:function(){},render:function(){var e,t;return d.init(l.getLocale()).then(function(){if(this.appConfig.showPreview)e=c.toString(),this.$el.html(e),t={appConfig:this.appConfig,renderData:this.renderData,previewEl:this.$el[0]},a.initSimplePreview(t);else{e=h.toString();var i={locString:d.getStrings()};e=n.render(e,i),this.$el.html(e),a._init()}}.bind(this)).fail(function(){}),this},sendDataToShell:function(e){a.receiveMessage(e)},beforeUnload:function(){return a._beforeAppUnload()},remove:function(){return a._remove(),this.$el.empty(),this}})}.apply(t,n))||(e.exports=o)},330:function(e,t,i){var n,o;n=[i(3),i(0),i(2),i(1),i(56),i(37),i(7),i(8)],void 0===(o=function(e,t,i,n,o,r,a,s){"use strict";return new(n.Model.extend({apiKey:"AIzaSyDy6YVZ2tn92vnMtI7NozGoIxUSR2iZS5A",appId:"659897251118",clientId:"659897251118-ee2goq8mbgnc25dqgotto40rd79745hc.apps.googleusercontent.com",clientSecret:"6P4VfnW8X3mdeVED7iMxJdpj",scope:["profile"],init:function(){var e,t,i=window.location.search,n=o.get("google-csrf-token"),r=o.get("gp-restore-doc-path"),a=o.get("gp-cid");if(e=/code\=([^\&]+)/.exec(i),t=/state\=google_photos_auth_([^\&]+)/.exec(i),n&&e&&e.length>1&&t&&t.length>1){if(o.expire("google-csrf-token"),n!==t[1])return void console.warn("Cross site forgery detected on Google authorization!");this.code=e[1],o.set("google-code",e[1],{secure:!0}),this.authenticating=!0}this.token||(this.code=this.clientId===a?o.get("google-code"):null,this.refreshToken=this.clientId===a?o.get("google-token"):null,this.userId=o.get("google-uid")),marvel.events.on("ims-session-logged-out",this.logout.bind(this)),r&&(o.set("gp-restore-doc-path","",{secure:!0}),window.location.replace(r))},getAccessToken:function(){var n=e.defer(),r="&client_id="+this.clientId,a="&client_secret="+this.clientSecret,l="&redirect_uri="+encodeURI(window.location.protocol+"//"+window.location.host+s.getLocalizedSparkPath("/sp/")),d=this,h=[],c=this._getScopeWithFeatures(),u=localStorage.getItem("google-granted-scopes");return u&&(h=u.split(" ")),!this.refreshToken&&!this.code||i.difference(c,h).length?(this.authenticate(),n.reject("need_to_authenticate"),n.promise):(this.accessToken&&this.expiration>Date.now()+1e4?n.resolve(this.accessToken):this.code?(o.expire("google-code"),t.ajax({method:"POST",url:"https://www.googleapis.com/oauth2/v3/token?scope="+this._encodeScope(c)+"&code="+this.code+r+a+l+"&grant_type=authorization_code"}).done(function(e,i,r){if(this.accessToken=e.access_token,this.expiration=Date.now()+1e3*e.expires_in,this.refreshToken=e.refresh_token,this.code=null,o.set("google-token",this.refreshToken,{secure:!0}),this.accessToken){t.ajax({url:"https://www.googleapis.com/oauth2/v3/tokeninfo?access_token="+this.accessToken}).done(function(e,t,i){d.userId=e.sub,o.set("google-uid",d.userId,{secure:!0}),n.resolve(this.accessToken)}.bind(this)).fail(function(e,t,i){console.warn("token info failed: message =  ",t),n.reject("cant_get_userid")}.bind(this))}}.bind(this)).fail(function(e,t,i){console.warn("Google getting tokens failed ",e),this.code=null,n.reject("invalid_code")}.bind(this))):this.refreshToken&&t.ajax({method:"POST",url:"https://www.googleapis.com/oauth2/v3/token?scope="+this._encodeScope(c)+"&refresh_token="+this.refreshToken+r+a+"&grant_type=refresh_token"}).done(function(e,t,i){this.accessToken=e.access_token,this.expiration=Date.now()+1e3*e.expires_in,n.resolve(this.accessToken)}.bind(this)).fail(function(e,t,i){console.warn("Google getting tokens failed ",e),n.reject("invalid_token"),e.responseJSON&&"invalid_scope"==e.responseJSON.error&&(console.warn("[GoogleAuth] detected scope change. Initiating new authentication."),this.logout(),this.authenticate())}.bind(this)),n.promise)},getUserId:function(){return this.userId||(this.userId=o.get("google-uid")),this.userId},validateRefreshToken:function(){var i=e.defer(),n="&client_secret="+this.clientSecret,o="&client_id="+this.clientId;return this.refreshToken?t.ajax({method:"POST",url:"https://www.googleapis.com/oauth2/v3/token?scope=&refresh_token="+this.refreshToken+o+n+"&grant_type=refresh_token"}).done(function(e,t,n){this.accessToken=e.access_token,this.expiration=Date.now()+1e3*e.expires_in,i.resolve(this.accessToken)}.bind(this)).fail(function(e,t,n){console.warn("Google getting tokens failed ",e),i.reject("invalid")}.bind(this)):i.reject("no token"),i.promise},authenticate:function(){var e=this._getScopeWithFeatures(),t=r.v4(),i="&state=google_photos_auth_"+t,n="&scope="+this._encodeScope(e),a="&redirect_uri="+window.location.protocol+"//"+window.location.host+s.getLocalizedSparkPath("/sp/"),l="https://accounts.google.com/o/oauth2/v2/auth?response_type=code&access_type=offline&client_id="+this.clientId+a+n+i+"&prompt=consent";o.set("google-csrf-token",t,{secure:!0}),o.set("gp-restore-doc-path",window.location.href,{secure:!0}),o.set("gp-cid",this.clientId,{secure:!0});try{localStorage.setItem("google-granted-scopes",e.join(" "))}catch(e){console.error("[GoogleAuthController] failed to set scope in localStorage.",e)}window.location.replace(l)},isAuthenticated:function(){return!!this.refreshToken||!!this.code},logout:function(){this.authenticating||(o.expire("google-code"),o.expire("google-drive-token"),o.expire("google-uid"),o.expire("google-token"),o.expire("google-uid"),o.expire("gp-restore-doc-path"),this.refreshToken=null,this.accessToken=null,this.code=null)},getAppId:function(){return this.appId},getApiKey:function(){return this.apiKey},getClientId:function(){return this.clientId},_getScopeWithFeatures:function(){var e=[].concat(this.scope);return(a.hasFeature("google-drive-in-voice")||a.hasFeature("google-drive-in-theo")||a.hasFeature("google-drive-in-slate"))&&e.push("https://www.googleapis.com/auth/drive"),a.hasFeature("enable-google-picasa-api")&&e.push("https://www.googleapis.com/auth/photos"),a.hasFeature("enable-google-photo-api")&&e.push("https://www.googleapis.com/auth/photoslibrary.readonly"),e},_encodeScope:function(e){return e.join("%20")}}))}.apply(t,n))||(e.exports=o)},331:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(5),i(7),i(11),i(6),i(12),i(16)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d){"use strict";var h,c=new a({color:"orange",name:"publisher"});return i.Model.extend({initialize:function(e){h=e.cpUtils,this.confirmView=l},getPublishedLink:function(e){var t="",i=e.getMyApp(),n=i.getPublishImpl();switch(i.registeredName){case"ginger-snap":t=n.getData("publishedVideoURL",e);break;default:t=h.cpLink(i.getCPCommunity(),i.getCPAssetId(e),i.getCPAlias(e))}return t},getCommunityCategories:function(e,t){return h.getCommunityCategories(e,t)},getVersion:function(e,i){var r=n.defer();return i=i?i+"/":"",o.ajax({type:"GET",url:"https://"+h.cpService+"/api/v2/resources/"+e+"/"+i+":metadata",headers:{Accept:"*/*","X-api-key":h.apiKey}}).then(function(e,i,n){t.isUndefined(e.version)?r.resolve(new Date(e.modified)-new Date(e.created)):r.resolve(e.version)},function(e){r.reject(e)}),r.promise},initiateServerCopy:function(e,i,r,a){var l=s.maxFilesInCpCopy;if(r.cleanUpComponentsBeforeServerCopy&&"function"==typeof r.cleanUpComponentsBeforeServerCopy&&r.cleanUpComponentsBeforeServerCopy(e,i,a),e.copy.files.length<=l){var d=n.defer();return o.ajax({type:"POST",url:"https://"+h.cpService+"/api/v2/resources/"+this.getResourcePath(i)+"/:copy?api_key="+h.apiKey,data:JSON.stringify(e),headers:{Accept:"*/*","Content-Type":"application/json"},success:function(e,t,i){var n=i.getResponseHeader("Location");d.resolve(n+"?api_key="+h.apiKey)}.bind(this),error:function(e){c.error("Server-side initiate copy failed with "+e.status,e),d.reject(e)}}),d.promise}var u=t.chunk(e.copy.files,l),p=t.clone(e),g=[],f=e.copy.files.length;return delete p.copy.files,t.each(u,function(e){var r=n.defer(),a=e.length,s=t.clone(p);g.push(r.promise),s.copy.files=e,o.ajax({type:"POST",url:"https://"+h.cpService+"/api/v2/resources/"+this.getResourcePath(i)+"/:copy?api_key="+h.apiKey,data:JSON.stringify(s),headers:{Accept:"*/*","Content-Type":"application/json"},success:function(e,t,i){var n=i.getResponseHeader("Location");r.resolve({weight:a/f,url:n+"?api_key="+h.apiKey})}.bind(this),error:function(e){c.error("Server-side initiate chunk copy failed with "+e.status,e),r.reject(e)}})}.bind(this)),n.all(g).then(function(e){return e}).catch(function(e){return n.reject(e)})},updateOneProgress:function(e,i,n,o){var r=0;if("object"==typeof i){if(i.monitors[n].pct=o.progress,t.each(i.monitors,function(e){r+=e.pct*e.weight}),i.lastSentPct===r)return;i.lastSentPct=r}else r=o.progress;e.trigger("progress",r)},_getCheckStatusError:function(e,t,i){var n="Server-side copy monitor status error:";n+=i?i.error_code+":"+i.sub_error_code+":"+i.error_message:e.status;var o=new Error(n);return o.url=t,o.responseText=e.responseText,o.is_resources_copy_err=!0,i?(o.status=i.error_code,o.sub_error_code=i.sub_error_code):o.status=e.status,c.error(o.message,o),o},checkStatus:function(e,i,r,a,s){var l=i||n.defer();if(o.ajax({type:"GET",url:e,headers:{Accept:"*/*"},success:function(i,n,o){"done"==i.status?(r.trigger&&a&&this.updateOneProgress(r,a,e,i),l.resolve(i)):"in_progress"==i.status?(r.trigger&&a&&this.updateOneProgress(r,a,e,i),t.delay(this.checkStatus.bind(this,e,l,r,a,s),s||500)):"failed"==i.status?l.reject(this._getCheckStatusError(o,e,i)):t.delay(this.checkStatus.bind(this,e,l,r,a,s),s||500)}.bind(this),error:function(t){l.reject(this._getCheckStatusError(t,e))}}),!i)return l.promise},getManifest:function(e,t,i){var n={title:"string"==typeof t.title?t.title:e.get("name"),undiscoverable:!t.isPublic,description:t.description||"",category_id:t.category,sub_category_ids:[t.subcat||"other"]};return i?n:{resource_path:t.projectId,resource_type:t.type,metadata:n}},createDirectoryResource:function(t,i,r){return n.Promise(function(n,a){var s="";"adobe-theo"===t.get("syncGroupName")&&(s="?"+e.param({tags:"collection_class:dcx_composite"})),o.ajax({type:"PUT",url:"https://"+h.cpService+"/api/v2/resources/"+this.getResourcePath(i,r)+"/:dir"+s,headers:{Accept:"application/json","X-Api-Key":h.apiKey},success:function(e){n(e)},error:function(e){c.error("Failed to create resource directory with "+e.status,{xhr:e,projectId:i,path:r}),a(e)}.bind(this)})}.bind(this))},uploadResources:function(e,i,o){var r=[];return t.each(o,function(t,n){r.push(this.uploadResource(e,i,n,t))}.bind(this)),n.all(r)},uploadResource:function(e,t,i,r,a){var s=n.defer();return this.checkResource(e,t,i,r).then(function(n){var l="update"===n,d="text/html",u=r;"object"==typeof r&&r.content&&(d=r.contentType,u=r.content),o.ajax({type:"PUT",url:"https://"+h.cpService+"/api/v2/resources/"+this.getResourcePath(t,i),headers:{Accept:"application/vnd.adobe.file+json","X-Api-Key":h.apiKey,"Content-Type":d},beforeSend:function(e){l&&e.setRequestHeader("If-Match","*")},data:u,success:function(e){s.resolve(e)},error:function(n){409!==n.status||l||a?(c.error("Failed to upload resource with "+n.status,{xhr:n,projectId:t,path:i}),s.reject(n)):this.uploadResource(e,t,i,r,!0).then(function(e){s.resolve(e)},function(e){s.reject(e)})}.bind(this)})}.bind(this)),s.promise},checkResource:function(e,t,i,r){var a=n.defer();return o.ajax({type:"GET",url:"https://"+h.cpService+"/api/v2/resources/"+this.getResourcePath(t,i)+"/:S3",headers:{Accept:"*/*","X-Api-Key":h.apiKey},success:function(){c.debug("Resource exists, update",{projectId:t,path:i}),a.resolve("update")},error:function(){c.debug("Resource doesn't exist, upload",{projectId:t,path:i}),a.resolve("upload")}}),a.promise},getResourcePath:function(e,t){return e+(t?"/"+t:"")},_fetchAssetMetadata:function(e,i){var r,a=n.defer(),s=this,l=!1;return c.debug("fetch asset meta-data for "+i),r=function(n,d,u){d||(d=new Date),u||(u=500),o.ajax({type:"GET",url:"https://"+h.cpService+"/api/v2/"+e+"/assets/"+i,dataType:"json",headers:{"X-Api-Key":h.apiKey,Accept:"application/hal+json"},success:function(e){s.hideConfirm(),c.debug("fetched asset meta-data for "+i,e),a.resolve(e)},error:function(e){if(500!==e.status&&404!==e.status)s.hideConfirm(),c.error("Failed to fetch recently published asset from CP",{assetId:i,err:e}),a.reject(e);else{var o,h=(new Date).getTime(),p=h-d.getTime();if(l)c.error("Failed to fetch recently published asset from CP after waiting",{assetId:i,err:e,waitSecs:p/1e3}),e.shownErr=!0,a.reject(e),a=null;else{if(p>6e4)return void s.showConfirm("Publishing has reached the maximum time that it can wait","Please try again later.",!0,null,function(){c.error("Failed to fetch recently published asset from CP after waiting max time",{assetId:i,err:e}),e.shownErr=!0,a.reject(e),a=null}.bind(this));this.confirmView.isShowing()||(n?o=h-n.getTime():n=new Date,o>=1e4?(n=null,s.showConfirm("Publishing is taking longer than usual.","Would you like to cancel and try again later, or would you like to wait a little longer?",!1,"Continue",function(e){e||(l=!0)}.bind(this))):p>3e3&&(u=1e3))}a&&t.delay(function(){r(n,d,u)},u)}}})}.bind(this),t.defer(r),a.promise},showConfirm:function(e,t,i,n,o){i?this.confirmView.showAlert(e,t,{okText:n}).then(function(e){o(e)}):this.confirmView.showConfirm(e,t,{okText:n}).then(function(e){o(e)})},hideConfirm:function(){this.confirmView.isShowing()&&this.confirmView.hide()},updatePublishedAsset:function(e,t,i){var r,a=this,s=n.defer();return e.mrvlDoc?(t=e.pubSettings,i=e.cpAssetId,r=this.addMetaDataToPubInfo(e,!0)):r=this.getManifest(e,t,!0),o.ajax({type:"PUT",url:"https://"+h.cpService+"/api/v2/"+t.community+"/assets/"+i,headers:{"X-Api-Key":h.apiKey,Accept:"application/vnd.adobe.file+json","Content-Type":"application/json"},data:JSON.stringify(r,null,"  "),success:function(e,n,o){a._fetchAssetMetadata(t.community,i).then(function(e){s.resolve(e)},function(e){s.reject(e)})},error:function(e){c.error("Failed to update asset in CP "+e.status,e),s.reject(e)}}),s.promise},acquireShareLinkFromPubInfo:function(e){var t=e.publishConfig;return t.category||((t=this.getCopyOfPubConfigFromPubInfo(e)).category="other"),e.publishImpl.acquireShareLink(e.mrvlDoc,e.publishImpl,t,e.progressId).then(function(t){return t&&(t.cancel||(e.cpAssetId=t.asset.assetId,t.cpAlias=t.asset.cpAlias,t.asset&&t.asset.resource_version&&(e.lastUpdatedMainResourceVersion=t.asset.resource_version))),{publishData:t,pubInfo:e}}.bind(this))},acquireFinalDownloadLink:function(e,t,i){if(i.cancel)return{publishData:i,pubInfo:e};var r=n.defer();return t=t.replace(/"/g,"'"),o.ajax({type:"GET",url:i.link+"/:raw",headers:{Accept:"application/vnd.adobe.s3presignedurl+json","X-api-key":h.apiKey,"Content-Disposition":'attachment; filename="'+t+'"'},success:function(e){r.resolve(e)},error:function(e){c.error("getPresignedUrlDefer: "+e.status,e),r.reject(e)}}),r.promise.then(function(t){return i.downloadLink=t.presigned_href,{publishData:i,pubInfo:e}}.bind(this))},acquireDownloadLinkFromPubInfo:function(e,t){return e.publishImpl.downloadFile(e.mrvlDoc,e.publishImpl,e.publishConfig,e.progressId).then(function(i){return this.acquireFinalDownloadLink(e,t,i)}.bind(this))},_getPreShareCpAlias:function(e){if(!e.aquireAliasBeforePublish)return n.resolve(e);var t=n.defer();return o.ajax({type:"POST",url:"https://"+h.cpService+"/api/v2/"+e.app.getCPCommunity()+"/alias",headers:{Accept:"*/*","X-api-key":h.apiKey},success:function(e){t.resolve(e)},error:function(e){c.error("_getPreShareCpAlias data error: "+e.status,e),t.reject(e)}}),t.promise.then(function(t){return e.cpAlias=t.alias,e}.bind(this))},calculatePreshare:function(e,t){var i=n.defer(),o={pubInfo:e,mrvlDoc:e.mrvlDoc,fileDataIsOnlyForAvatar:!1,avatarNeedsUpload:!1},r=e.supportsFileData&&!e.filesDataResult&&!e.isRepublishWithIdenticalContent,a=e.prepublishFunction&&!e.prePubResult&&!e.isRepublishWithIdenticalContent;return e.publishImpl.finalizePublish&&(e.finalizerPublishPromise=null),e.publishConfig.showAvatar&&this.getAvatarComponent(e.mrvlDoc,e.app.getStorageImpl())&&e.supportsFileData&&!r&&(o.fileDataIsOnlyForAvatar=!0,e.lastAvatarCopied?e.avatarDirty&&e.avatarDirty!==e.lastAvatarSuccessfullyCopiedDirty&&(o.avatarNeedsUpload=!0):o.avatarNeedsUpload=!0,o.avatarNeedsUpload&&(r=!0)),a?e.prepublishFunction().then(function(n){if(t(e))return i.resolve("cancel");e.prePubResult=n,r?this.fetchCurrentDocFilesData(o,t).done(function(e){i.resolve(e)}.bind(this)):i.resolve("skipped")}.bind(this)):r?this.fetchCurrentDocFilesData(o,t).done(function(e){i.resolve(e)}.bind(this)):i.resolve("skipped"),i.promise.then(function(t){return"cancel"===t?n.resolve(e,"cancel"):"skipped"===t?(e.filesDataResult&&(e.filesDataResult.avatarNeedsUpload=o.avatarNeedsUpload,e.filesDataResult.fileDataIsOnlyForAvatar=o.fileDataIsOnlyForAvatar),n.resolve(e,"success")):(e.filesDataResult=t,e.publishConfig.showAvatar&&this.addAvatarSrcToFilesDataResult(e),n.resolve(e,"success"))}.bind(this))},_addLinkToPreshareRslt:function(e,t){return e.link||!e.aquireAliasBeforePublish&&!t||(e.cpAlias?e.link=h.cpLink(e.pubSettings.community,null,e.cpAlias):(t||c.error("no cpAlias for preshare!",e),e.link="")),e},setPotentialPublishedStateOfPubInfo:function(e){e.app.getCPAlias(e.mrvlDoc);var t=e.app.getCPAssetId(e.mrvlDoc);return e.potentialPubState=!!t,e.potentialDirtyPublish=e.app.hasContentBeenUpdatedSincePublish(e.mrvlDoc),e.potentialPubState},acquirePreshareLink:function(e){if(this.setIsPublishing(!0,e.publishImpl),e.initialConfigSettings=this.getCopyOfPubConfigFromPubInfo(e),e.settingsRequireDocRecalc=!1,e.publishImpl.acquirePreshareLink)return e.publishImpl.acquirePreshareLink.apply(e.publishImpl,[e.mrvlDoc,e.publishImpl,e.publishConfig]);var t=n.defer(),i=e.app.getCPAssetId(e.mrvlDoc);return e.projectId=e.app.getCPProjectId(e.mrvlDoc),e.cpAssetId=i,e.cpAlias=e.app.getCPAlias(e.mrvlDoc),e.isRepublish=!!i,e.pubSettings={type:e.assetType,community:e.app.getCPCommunity(),category:e.publishImpl.communityCategory,subcat:e.publishConfig.category,isPublic:e.publishConfig.isPublic},e.cpVerifyChange=!1,e.pubSettings.projectId=e.projectId,e.projectId?h.checkPublishState(e.projectId).then(function(n,o,r){var a=n.id;0===a.indexOf("US/")&&(a=a.substr(3)),e.cpAssetId!==a?(e.cpVerifyChange=!0,h.checkUnpublishedState(a,e.app.getCPCommunity()).then(function(n,o,r){c.warn("Discovered inaccurate CP asset ID was "+i+" now "+a),e.cpAssetId=a,e.isRepublish=!0,n.alias?(e.cpAlias=n.alias,t.resolve(this._addLinkToPreshareRslt(e,!0))):(c.error("checkUnpublishedState had inaccurate CP asset ID, but no alias",n),this._getPreShareCpAlias(e).done(function(){t.resolve(this._addLinkToPreshareRslt(e,!0))}.bind(this)))}.bind(this),function(i){this._getPreShareCpAlias(e).done(function(){t.resolve(this._addLinkToPreshareRslt(e,!0))}.bind(this))}.bind(this))):(e.app.hasContentBeenUpdatedSincePublish(e.mrvlDoc)||(e.isRepublishWithIdenticalContent=!0),t.resolve(this._addLinkToPreshareRslt(e)))}.bind(this),function(o){var r=n();e.isRepublish&&(c.warn("Discovered inaccurate CP asset ID was "+i+" but it wasn't published"),e.isRepublish=!1,e.cpAssetId=null,r=this.createDirectoryResource(e.mrvlDoc,e.projectId)),r.then(this._getPreShareCpAlias.bind(this,e)).done(function(){t.resolve(this._addLinkToPreshareRslt(e))}.bind(this))}.bind(this)):(e.projectId=e.app.generateCPProjectId(e.mrvlDoc),e.app.setCPProjectId(e.mrvlDoc,e.projectId),e.pubSettings.projectId=e.projectId,this.createDirectoryResource(e.mrvlDoc,e.projectId).then(this._getPreShareCpAlias.bind(this,e)).done(function(){t.resolve(this._addLinkToPreshareRslt(e))}.bind(this))),t.promise},addAvatarSrcToFilesDataResult:function(e){var i=t.find(e.filesDataResult.currentFilesInfo.copy,function(e){return e.destination.match(/^avatar/)});return t.isUndefined(i)||(e.filesDataResult.currentFilesInfo.avatarFile={copyInfo:i}),!!e.filesDataResult.currentFilesInfo.avatarFile},getAvatarComponent:function(e,t){var i=e.getDCXComposite().current;if(t.avatarComponentPath)return i.getComponentWithAbsolutePath(t.avatarComponentPath);var n=i.getComponentWithAbsolutePath("/avatar.jpg");return n||(n=i.getComponentWithAbsolutePath("/avatar.png")),n},getCopyOfPubConfigFromPubInfo:function(e,i){return t.clone(i||e.publishConfig)},calculatePublishDataFromDoc:function(e){return e.publishImpl.finalizePublish?(e.publishResources="finalize",n.resolve(e)):(e.forceDocRecalcForThisShare?(t=!0,e.forceDocRecalcForThisShare=!1):t=!e.isRepublish||e.app.hasContentBeenUpdatedSincePublish(e.mrvlDoc)||this.doShareSettingsRequireContentRecalc(e),this.cachePublishingEtag(e),t?this.calculatePublishResources(e):(e.isRepublish||c.error("doc doesn't need recalc for initial publish",e),e.settingsFromLastResourcesCalc=this.getCopyOfPubConfigFromPubInfo(e),e.publishResources="current",n.resolve(e)));var t},publishSettingsChanged:function(e,t){return this.recalcSettingsChanged(e)},recalcSettingsChanged:function(e){var i=e.settingsRequireDocRecalc,n=e.settingsFromLastResourcesCalc||e.initialConfigSettings,o=e.publishConfig;return e.lastPublishAssetInfo&&(n=e.lastPublishAssetInfo.pubConfig),e.settingsChangedSinceLastShare=t.find(n,function(e,t){return o[t]!==n[t]}),e.settingsRequireDocRecalc=this.doShareSettingsRequireContentRecalc(e),e.settingsRequireDocRecalc?e.settingsDirty=!0:e.settingsDirty=t.some(e.fields.metadataOnly,function(e){return o[e]!==n[e]}),e.settingsRequireDocRecalc!==i&&c.debug("Share settings require recalc changed to:"+e.settingsRequireDocRecalc),e.settingsDirty},doShareSettingsRequireContentRecalc:function(e){if(e.publishImpl.finalizePublish)return!1;var i=e.settingsFromLastResourcesCalc||e.initialConfigSettings,n=e.publishConfig,o=!1;return e.fields.doesAuthorChangeRequireDocRecalc&&(n[e.fields.showAuthorFieldId]!==i[e.fields.showAuthorFieldId]?o=!0:n[e.fields.showAuthorFieldId]&&(o=t.some(e.fields.author,function(e){return n[e]!==i[e]})),!o&&e.fields.showAvatarFieldId&&(o=!0===n[e.fields.showAvatarFieldId]?!i[e.fields.showAvatarFieldId]||n[e.fields.avatarUrlFieldId]!==i[e.fields.avatarUrlFieldId]:i[e.fields.showAvatarFieldId]&&i[e.fields.avatarUrlFieldId])),!o&&e.fields.nonAuthorFieldsThatTriggerContentRecalc&&(o=t.some(e.fields.nonAuthorFieldsThatTriggerContentRecalc,function(e){return n[e]!==i[e]})),o},cachePublishingEtag:function(e){e.publishingEtag=e.mrvlDoc.getMainContentEtag()},calculatePublishResources:function(e){var t,i=n.defer(),o={etag:e.publishingEtag};t={id:e.cpAssetId,alias:e.cpAlias,_links:{self:{href:this.getHrefForPublishedAsset(e.cpAssetId,e.pubSettings)}},publish_url:e.link},e.settingsFromLastResourcesCalc=this.getCopyOfPubConfigFromPubInfo(e);var r=e.publishConfig;return(e.publishImpl.getUpdatedPublishResourcesForPublishConfig&&e.isRepublishWithIdenticalContent&&e.publishResources&&e.publishResources.resources?e.publishImpl.getUpdatedPublishResourcesForPublishConfig(e.mrvlDoc,e.publishResources.resources,r):e.publishImpl.doPublish(e.mrvlDoc,r,t)).done(function(t){o.resources=t,e.publishResources=o,i.resolve(e)}.bind(this)),i.promise},getCPAssetIdFromAssetUrl:function(e){var t=e.split("/");return t[t.length-1]},finalizeServerPublish:function(e){if(e.finalizerPublishPromise)return e.finalizerPublishPromise;this.recalcSettingsChanged(e),e.settingsFromLastResourcesCalc=this.getCopyOfPubConfigFromPubInfo(e);var i=e.publishConfig,n={};return i!==e.publishConfig&&(i=t.clone(e.publishConfig)),i.cpAssetId=e.cpAssetId,i.cpAlias=e.cpAlias,i.cpResourceId=e.projectId,n.previousPublishConfig=e.lastFinalizeServerPublishConfig||e.initialConfigSettings,n.isRepublish=e.isRepublish,n.contentDirty=!n.isRepublish||!e.isRepublishWithIdenticalContent,n.settingsDirty=e.settingsDirty,e.lastFinalizeServerPublishConfig=this.getCopyOfPubConfigFromPubInfo(e,i),e.finalizerPublishPromise=e.publishImpl.finalizePublish(e.mrvlDoc,i,n).then(function(t){return t.alias&&(t.location&&(e.cpAssetId=this.getCPAssetIdFromAssetUrl(t.location),i.cpAssetId=e.cpAssetId),t.version&&(e.publishedAssetVersion=t.version),e.cpAlias!==t.alias?(e.cpAlias=t.alias,e.link=h.cpLink(e.pubSettings.community,null,e.cpAlias)):e.link||(e.link=h.cpLink(e.pubSettings.community,null,e.cpAlias))),e}.bind(this)),e.finalizerPublishPromise},fetchCurrentDocFilesData:function(e,i){var r=n.defer(),a=e.mrvlDoc.getDCXComposite(),s=a.current,l=n.defer(),d=e.pubInfo;return o.ajax({type:"GET",url:a.href,headers:{Accept:"*/*","X-api-key":h.apiKey},success:function(e){c.debug("Fetch data success",e),l.resolve(e)},error:function(e){c.error("Fetch data error: "+e.status,e),l.reject(e)}}),l.promise.then(function(o){var a=[];if(i(d))return n.resolve("cancel");if(c.debug("fetchCurrentDocFilesData in progress",o),e.collectionId=o.id,d.publishImpl.getFilesDataToCopyFromServerData)return d.publishImpl.getFilesDataToCopyFromServerData(o,d.mrvlDoc,d.publishConfig).then(function(t){if(i(d))return n.resolve("cancel");e.currentFilesInfo={copy:t,data:o},r.resolve(e)});var l=s.getComponentsOf();t.each(l,function(t){a.push({source:e.collectionId+"/"+t.id,content_type:t.type,destination:t.path})}.bind(this));var h=t.find(s.getChildrenOf(),function(e){return"page"==e.name}),u=s.getComponentsOf(h);if(t.each(u,function(t){a.push({source:e.collectionId+"/"+t.id,destination:t.path,content_type:t.type})}.bind(this)),i(d))return n.resolve("cancel");e.currentFilesInfo={copy:a,data:o},r.resolve(e)}.bind(this)),r.promise},updateFileVersionsAfterCopy:function(e,i){if(i&&i.outputs)return t.each(e.filesDataResult.currentFilesInfo.copy,function(e){if(e.track_version){var n=t.find(i.outputs,function(t){return t.path===e.destination});n&&(e.version=n.version,e.copyResults=n)}}),n.resolve();var o=[];if(t.each(e.filesDataResult.currentFilesInfo.copy,function(i){if(i.track_version&&t.isUndefined(i.version)){var r=n.defer();o.push(r.promise),this.getVersion(e.projectId,i.destination).then(function(e){i.version=e,r.resolve()},function(e){r.reject(e)})}}.bind(this)),o.length){var r=n.defer();return n.allSettled(o).done(function(i){var n=[];t.each(i,function(e){"fulfilled"!==e.state&&n.push(e.reason)}),n.length?r.reject(n):r.resolve(e)}),r.promise}return n.resolve()},copyThePublishDataFiles:function(e,i){if(e.publishImpl.copyThePublishDataFiles)return e.publishImpl.copyThePublishDataFiles(e,i);if(!e.filesDataResult)return n.resolve(e);var o,r=n.defer(),a=n.defer(),s=e.avatarDirty,l=e.filesDataResult.currentFilesInfo.avatarFile&&e.filesDataResult.currentFilesInfo.avatarFile.copyInfo;if(e.filesDataResult.fileDataIsOnlyForAvatar)e.filesDataResult.avatarNeedsUpload?l?o=[l]:(o=null,c.warn("avatarNeedsUpload but no src",e)):l=null;else if(e.filesDataResult.currentFilesInfo.copy.length&&(e.filesSuccessfullyCopied?(o=[],t.each(e.filesDataResult.currentFilesInfo.copy,function(i){t.isUndefined(e.filesSuccessfullyCopied[i.source])&&o.push(i)})):o=e.filesDataResult.currentFilesInfo.copy.slice(),e.initialCopyRequest&&!e.initialCopyRequest.done)){var d=[],h={};t.each(e.initialCopyRequest.copy.files,function(e){h[e.source]=e}),t.each(o,function(e){t.isUndefined(h[e.source])&&d.push(e)}),o=d}if(o&&o.length){l&&(e.lastAvatarCopied=l);var u,p={copy:{files:o}},g=!e.filesDataResult.fileDataIsOnlyForAvatar;c.debug("has files to copy server-side",o),e.filesDataResult.currentFilesInfo.status="initiating",e.initialCopyRequest||(e.initialCopyRequest=p,u=!0),this.initiateServerCopy(p,e.projectId,e.publishImpl,e.mrvlDoc).done(function(o){if(i(e))return a.resolve({status:"cancel"});if(t.isArray(o)){var r=[];p.copy.files.length;g&&(g={monitors:{},totalMonitors:0}),c.debug("Server side copy monitor URLs: "+o),e.filesDataResult.currentFilesInfo.status="monitoring",t.each(o,function(t){g&&(g.monitors[t.url]={pct:0,weight:t.weight},g.totalMonitors++),r.push(this.checkStatus(t.url,null,e.publishImpl,g,2e3))}.bind(this)),n.all(r).then(function(e){var i=[],n=t.find(e,function(e){if("done"!==e.status)return!0;i=i.concat(e.outputs)});n?a.resolve(n):(e[0].outputs=i,a.resolve(e[0]))}).catch(function(e){return a.reject(e)})}else c.debug("Server side copy monitor URL: "+o),e.filesDataResult.currentFilesInfo.status="monitoring",this.checkStatus(o,null,e.publishImpl,g,500).done(function(e){a.resolve(e)}.bind(this),function(e){a.reject(e)})}.bind(this),function(e){a.reject(e)}.bind(this))}else a.resolve({status:"skipped"});return a.promise.then(function(n){"cancel"===n.status||i(e)?e.filesDataResult.currentFilesInfo.status="cancelled":(u&&(e.initialCopyRequest.isDone=!0),e.filesDataResult.currentFilesInfo.status="done","done"===n.status&&(e.filesSuccessfullyCopied||(e.filesSuccessfullyCopied={}),t.each(o,function(t){e.filesSuccessfullyCopied[t.source]=t}),s&&(e.lastAvatarSuccessfullyCopiedDirty=s))),e.publishImpl.reviseDoPublishAfterFilesUpdate?this.updateFileVersionsAfterCopy(e,n).then(function(){r.resolve(e)},function(e){r.reject(e)}):r.resolve(e)}.bind(this),function(t){u&&delete e.initialCopyRequest,r.reject(t)}.bind(this)),r.promise},uploadThePublishResources:function(e){if(e.publishImpl.finalizePublish)return this.finalizeServerPublish(e);if("current"!==e.publishResources){var t=n.defer();return this.uploadResources(e.mrvlDoc,e.projectId,e.publishResources.resources).done(function(i){e.publishResources.results=i,t.resolve()}.bind(this),function(e){t.reject(e)}),t.promise}n.resolve()},doShareUploads:function(e,i){var o=n.defer(),r=(e.mrvlDoc.getDCXComposite().current,[]);if(r.push(this.copyThePublishDataFiles(e,i)),!e.publishImpl.finalizePublish||e.userWantsToGoInfo&&(e.requiredFilled||e.isRepublish))if(e.publishImpl.reviseDoPublishAfterFilesUpdate&&e.publishResources&&e.publishResources.resources){var a=n.defer(),s=r[0];r.push(a.promise),s.then(function(t){e.publishImpl.reviseDoPublishAfterFilesUpdate(e.publishResources.resources,e.filesDataResult.currentFilesInfo.copy).then(function(t){this.uploadThePublishResources(e).then(function(){a.resolve()},function(e){a.reject(e)})}.bind(this))}.bind(this),function(e){c.error("could not upload due to copy error in doShareUploads",e),a.reject(e)}.bind(this))}else r.push(this.uploadThePublishResources(e));return n.allSettled(r).done(function(n){var r=[];(t.each(n,function(e){"fulfilled"!==e.state&&r.push(e.reason)}),r.length)?o.reject(r):"cancel"===n[0].value||i(e)?o.resolve("cancel"):o.resolve(n)}.bind(this)),o.promise},addPubInfoToCurrentDoc:function(e){if(e.publishImpl.savePublishedDataToDoc){var t={cpAlias:e.cpAlias,cpAssetId:e.cpAssetId,assetLink:this.getHrefForPublishedAsset(e.cpAssetId,e.pubSettings),publishUrl:e.link,publishedAssetVersion:e.publishedAssetVersion,contentEtag:e.publishingEtag,scope:e.pubSettings.isPublic?"public":"private"};e.publishImpl.savePublishedDataToDoc(e.mrvlDoc,t)}},saveSuccessfulPublishDataToDoc:function(e){e.app.setCPAssetId(e.mrvlDoc,e.cpAssetId),e.app.setCPAlias(e.mrvlDoc,e.cpAlias),"current"!==e.publishResources?e.app.setPublishedContentETag(e.mrvlDoc,e.publishResources.etag):e.app.getPublishedContentETag(e.mrvlDoc)||e.app.setPublishedContentETag(e.mrvlDoc),this.addPubInfoToCurrentDoc(e)},doWeNeedToPostThisPublishedAsset:function(e){return!0},setIsPublishing:function(e,t){t.setIsPublishing&&t.setIsPublishing(e),this.isPublishing=e},postTheAssetAtEndOfShare:function(e){var t,i=n.defer();if(this.doWeNeedToPostThisPublishedAsset(e))"string"==typeof e.publishConfig.publishTitle?e.pubSettings.title=e.publishConfig.publishTitle:e.pubSettings.title=e.mrvlDoc.get("name")||"",e.pubSettings.isPublic=e.publishConfig.isPublic,e.publishImpl.finalizePublish?(c.debug("publishing to slate server",e),t=this.finalizeServerPublish(e)):e.isRepublish?(c.debug("Republishing: "+e.cpAssetId),t=this.updatePublishedAsset(e)):e.lastPublishAssetInfo&&!e.lastPublishAssetInfo.promise.isRejected()?(c.warn("Publishing actual conent for first time, but updating:"+e.cpAssetId,e),t=this.updatePublishedAsset(e)):(c.debug("Publishing actual content for first time:"+e.cpAssetId),t=this.publishActualAsset(e));else{var o=n.defer();t=o.promise,o.resolve("success")}return e.postAssetPromise=t,t.then(function(t){var o=n.defer();e.lastUpdatedMainResourceVersion?o.resolve(e.lastUpdatedMainResourceVersion):e.mainResourceName?this.getVersion(e.projectId,e.mainResourceName).done(function(e){o.resolve(e)}.bind(this),function(e){i.reject(e)}.bind(this)):o.resolve(""),o.promise.then(function(t){this.setIsPublishing(!1,e.publishImpl),e.publishedAssetVersion=t,this.saveSuccessfulPublishDataToDoc(e),i.resolve("success")}.bind(this))}.bind(this),function(t){this.setIsPublishing(!1,e.publishImpl),i.reject(t)}.bind(this)),i.promise},publishBrandedChrome:function(e){var t,i=e.mrvlDoc;e.publishImpl.community,s.brandedChromeCommunity;return d.getController().then(function(e){return e.getActiveContext(i)}.bind(this)).then(function(e){var i;if(t=e,!e)throw(i=new Error("No active brand kit selected. Skipping branded chrome publish")).code="skip_branded_chrome_publish",i;if(!t.activated())throw(i=new Error("The active brand kit is not activated/complete yet. Skipping branded chrome publish")).code="skip_branded_chrome_publish",i;return t.changesSinceLastPublish()}.bind(this)).then(function(e){return e.changes?t.publish(e.assetId):(console.log("Local brand kit chrome checksum and remote checksum matched. skipping brand kit chrome publish"),e)}.bind(this)).then(function(e){return e.brandKit=t,e}.bind(this))},updateBrandedChromeMetadata:function(e,i){var o=e.mrvlDoc,r=i.brandKit;delete i.brandKit;var a=e.publishImpl.community,l=s.brandedChromeCommunity,h=r.getClientCommunityPlatform(),u=h(a),p=h(l),g={checksum:i.checksum};return g[e.cpAssetId]=i.version,n.all([d.getController(),u.getMetadata(e.cpAssetId),p.getMetadata(i.assetId)]).then(function(a){var s=a[0],l=a[1],d=a[2];return n.all([u.updateMetadata(e.cpAssetId,{custom:t.extend(l.custom||{},{brandedChromeAssetId:i.assetId})}),r.composite.pull().then(function(){return s.setActiveContext(r,o,!0)}).then(function(){return s.setLastPublishedContext(r,o)}),p.updateMetadata(i.assetId,{custom:t.extend(d.custom||{},g)})])}).catch(function(e){c.warn("Error while updating metadata for branded chrome: "+e.message+" "+e.stack)})},getHrefForPublishedAsset:function(e,t){return"https://"+h.cpService+"/api/v2/"+t.community+"/assets/"+e},addMetaDataToPubInfo:function(e,i){var n=t.assign({},e.pubSettings,e.publishConfig);n.subcat=e.publishConfig.category,n.category=e.pubSettings.category;var o,r=this.getManifest(e.mrvlDoc,n,i),a={creator:e.mrvlDoc.getMyApp().getAppTypeID(),contentEtag:e.publishingEtag};if(t.isFunction(e.publishImpl.addToCustomMetaData)&&(a=t.merge(a,e.publishImpl.addToCustomMetaData(e.mrvlDoc))),a.contentEtag=t.trim(a.contentEtag,'"'),e.supportsAuthor&&e.publishConfig.showAuthor?t.isUndefined(e.fields.authorFullFieldId)?(a.author=e.publishConfig[e.fields.authorFirstFieldId],e.publishConfig[e.fields.authorLastFieldId]&&(a.author?a.author+=" "+e.publishConfig[e.fields.authorLastFieldId]:a.author=e.publishConfig[e.fields.authorLastFieldId])):a.author=e.publishConfig[e.fields.authorFullFieldId]:a.author="",e.publishConfig.showAvatar?a.authorAvatarPath=e.publishConfig.authorAvatarUrl:a.authorAvatarPath="",e.supportsCredits&&(a.credits=e.publishConfig[e.fields.creditsFieldId]),o=i?r:r.metadata,e.mainResourceName&&e.publishResources.results){var s=t.find(e.publishResources.results,function(t){return t.name===e.mainResourceName});s&&(o.main_resource={resource_path:e.mainResourceName,resource_version:s.version},e.lastUpdatedMainResourceVersion=s.version)}return t.isUndefined(e.publishConfig.removeBranding)||(a.removeBranding=e.publishConfig.removeBranding),o.alias=e.cpAlias,o.custom=a,t.isFunction(e.publishImpl.augmentMetaData)&&e.publishImpl.augmentMetaData(o,e.mrvlDoc),e.metadata=o,i?o:r},publishActualAsset:function(e){var t,i=n.defer(),r="https://"+h.cpService+"/api/v2/"+e.pubSettings.community+"/assets",a=this.addMetaDataToPubInfo(e),s=n.defer();return e.lastPublishAssetInfo={pubConfig:this.getCopyOfPubConfigFromPubInfo(e),promise:i.promise},t=JSON.stringify(a,null,"  "),o.ajax({type:"POST",url:r,headers:{"X-Api-Key":h.apiKey,Accept:"application/vnd.adobe.file+json","Content-Type":"application/json"},data:t,success:function(t,i,n){var o=n.getResponseHeader("Location"),r=o.split("/");e.cpAssetId=r[r.length-1],c.debug("Publish actual asset URL: "+o),e.link=h.cpLink(e.pubSettings.community,e.cpAssetId,e.metadata.alias),e.metadata.publish_url=e.link,s.resolve()},error:function(e){c.error("Error publishing asset "+e.status,e),s.reject(e)}}),s.promise.done(function(){i.resolve(e)},function(e){i.reject(e)}),i.promise},_forceFacebookScrapeOfUrl:function(t){var i=n.defer(),o={id:t,scrape:!0};return e.ajax({type:"POST",url:"https://graph.facebook.com/",data:o,success:function(e,t,n){i.resolve(e)},error:function(e){c.error("facebook scrape failed",{err:e,body:o}),i.reject(e)}}),i.promise},publishCompleted:function(e){if(e.publishImpl.handlePublishCompletedModerate)return e.publishImpl.handlePublishCompletedModerate(e.mrvlDoc,e.cpAlias,e.publishConfig,e.isRepublish);if(e.publishConfig.isPublic&&r.hasFeature("moderate-public-shares")){var t=n.defer(),i="https://"+h.cpService+"/api/v2/"+e.publishImpl.community+"/assets/"+e.cpAlias+"/moderate";return o.ajax({type:"POST",url:i,headers:{"X-Api-Key":h.apiKey,"Content-Type":"application/json"},success:function(e){t.resolve()},error:function(e){c.error("Error publishing moderate "+e.status,e),t.reject(e)}}).done(),t.promise}return n.resolve()},forceSocialScrapeOfUrl:function(e){if(e.noFBScrapeForRepublish||!r.hasFeature("share-can-do-facebook-scrape-for-republish"))return n();var t=e.link||this.getPublishedLink(e.mrvlDoc);return this._forceFacebookScrapeOfUrl(t)},_appShareChecks:{},userCanShare:function(e){var i=e.getCPCommunity(),r=this._appShareChecks[i],a={Accept:"*/*","X-api-key":h.apiKey};return t.isUndefined(r)?o.ajax({type:"GET",url:"https://"+h.cpService+"/api/v2/"+i+"/users/me/policy",headers:a}).then(function(e,t,n){return this._appShareChecks[i]=!!e.public_share,this._appShareChecks[i]}.bind(this),function(e){return c.error("error checking if user can share",e),n.reject(e)}):n.resolve(r)}})}.apply(t,n))||(e.exports=o)},344:function(e,t,i){var n;void 0===(n=function(){return{}}.apply(t,[]))||(e.exports=n)},346:function(e,t,i){var n,o;n=[i(0),i(2),i(1)],void 0===(o=function(e,t,i){"use strict";function n(e){this._init(e)}return e.extend(n.prototype,{_init:function(t,i){this._userCallback=i,this.$ele=e(t),this.$rootPicker=this.$ele.parents(".photo-picker"),this.items=[]},show:function(){this.$ele.addClass("showing")},getItem:function(e){return this.items[e]},_clear:function(){this.$ele.find(".column").empty(),this.items=[]},_handleScroll:function(e){this.requestOutstanding||this._scrolledFarEnough()&&this.hasMore()&&(this.requestOutstanding=!0,this.showMoreToCome(),this.searchNextSet())},_handleResize:function(e){this._handleScroll(e)},_handleThumbClick:function(e){},_handleLoadedThumbnail:function(e){},handleChangingToEditor:function(e){},handleChangingFromEditor:function(e){},hasMore:function(){return this.page<this.pages},_scrolledFarEnough:function(){var t=this.$ele.find(".results"),i=t.find(".column"),n=t[0].scrollTop,o=2*t.height()+n,r=!1;return i.each(function(){if(o>e(this).height())return r=!0,!1}),r},_addThumbnail:function(t,i,n,o,r,a){var s,l,d=i.find(".left"),h=i.find(".right"),c=this,u=this.requestId,p=e("<img class='thumbnail' data-auto='image-picker-thumbnail-img' />"),g=e("<div class='thumbnail-wrapper' data-auto='image-picker-thumbnail-wrapper' />"),f=n.getThumbHoverLabel&&n.getThumbHoverLabel();if(l=r?d.height()<=h.height()?d:h:d,o&&o.width&&o.height&&(g.append(p),l.append(g),p.css("height",p.width()*o.height/o.width),s=!0),f){var m=e("<div class='thumb-hover-label' data-auto='thumb-hover-label'>"+f+"</div>");g.append(m),m.on("click",c._handleThumbClick.bind(c)),m.data("item",n),g.addClass("has-hover-label")}return this.loader.add(t,{callback:function(e,t,i){c.requestId&&u!==c.requestId||(p.on("load",function(){window.setTimeout(function(){g.addClass("showing")},0)}),s||(r&&(l=d.height()<=h.height()?d:h),g.append(p),l.append(g)),a&&(p[0].crossOrigin="anonymous"),p[0].src=e,p.on("click",c._handleThumbClick.bind(c)),p.data("item",n),c._handleLoadedThumbnail(p,g))}}),g},canGoBack:function(){return!1},goBack:function(){},showMoreToCome:function(){this.$rootPicker.find(".more-to-come").addClass("showing")},hideMoreToCome:function(){this.$rootPicker.find(".more-to-come").removeClass("showing")}}),n}.apply(t,n))||(e.exports=o)},347:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(56),i(37),i(8)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";return new(i.Model.extend({clientId:"c5bgx3h0lcjhqsm",init:function(){var e,t,i=window.location.hash,n=o.get("dropbox-csrf-token"),r=o.get("db-restore-doc-path"),a=o.get("db-cid");if(e=/access_token\=([^\&]+)/.exec(i),t=/state\=dropbox_auth_([^\&]+)/.exec(i),n&&e&&e.length>1&&t&&t.length>1){if(o.expire("dropbox-csrf-token"),n!==t[1])return void console.warn("Cross site forgery detected on Dropbox authorization!");this.token=e[1],o.set("dropbox-token",this.token,{secure:!0})}if(this.token||(this.token=this.clientId===a?o.get("dropbox-token"):null),marvel.events.on("ims-session-logged-out",this.logout.bind(this)),r){o.set("db-restore-doc-path","",{secure:!0});var s=window.location,l=s.protocol+"//"+s.host+r;window.location.replace(l)}},getToken:function(){return this.token||this.authenticate(),this.token},authenticate:function(){var e=r.v4(),t="&state=dropbox_auth_"+e,i="&redirect_uri="+window.location.protocol+"//"+window.location.host+a.getLocalizedSparkPath("/sp/"),n="https://www.dropbox.com/oauth2/authorize?response_type=token&client_id="+this.clientId+i+t+"&force_reapprove=true";o.set("dropbox-csrf-token",e,{secure:!0}),o.set("db-restore-doc-path",window.location.pathname,{secure:!0}),o.set("db-cid",this.clientId,{secure:!0}),window.location.replace(n)},isAuthenticated:function(){return!!this.token},logout:function(){o.expire("dropbox-token"),o.expire("dropbox-csrf-token"),o.expire("db-cid"),o.expire("db-restore-doc-path"),this.token=null}}))}.apply(t,n))||(e.exports=o)},348:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(422),i(56),i(37),i(6)],void 0===(o=function(e,t,i,n,o,r,a,s){return new(i.Model.extend({clientId:s.instagramClientId,instagramAPIUrl:"https://api.instagram.com",init:function(){var e,t,i,n=window.location.href,a=r.get("im-restore-doc-hash"),s=r.get("instagram-csrf-token"),l=r.get("im-cid");if(e=/access_token\=([^\&]+)/.exec(n),i=/state\=instagram_auth_([^\&]+)#/.exec(n),s&&e&&e.length>1&&i&&i.length>1){if(r.expire("instagram-csrf-token"),s!==i[1])return void console.warn("Cross site forgery detected on Instagram authorization!");t=e[1],r.set("instagram-token",t,{secure:!0}),this.token=t,this.authenticating=!0}if(this.token=this.clientId===l?r.get("instagram-token"):null,marvel.events.on("ims-session-logged-out",this.logout.bind(this)),a){r.set("im-restore-doc-hash","",{secure:!0});var d=window.location,h=d.protocol+"//"+d.host+d.pathname+a;window.location.replace(h)}this.token&&o.authenticate(this.token)},getAccessToken:function(){var e=n.defer();return this.token?e.resolve(this.token):(this.authenticate(),e.reject("need_to_authenticate")),e.promise},getUserId:function(){return this.userId||(this.userId=r.get("instagram-uid")),this.userId},authenticate:function(){var e=encodeURI(window.location.protocol+"//"+window.location.host+"/"),t=a.v4(),i="&state=instagram_auth_"+t,n="&redirect_uri="+e,o=this.instagramAPIUrl+"/oauth/authorize/?client_id="+this.clientId+n+i+"&response_type=token";r.set("instagram-csrf-token",t,{secure:!0}),r.set("im-restore-doc-hash",window.location.hash,{secure:!0}),r.set("im-cid",this.clientId,{secure:!0}),window.location.replace(o)},isAuthenticated:function(){return!!this.token},logout:function(){this.authenticating||(r.expire("instagram-token"),r.expire("instagram-uid"),r.expire("instagram-csrf-token"),r.expire("im-cid"),this.token=null)}}))}.apply(t,n))||(e.exports=o)},369:function(e,t,i){var n,o;n=[i(0),i(344),i(519),i(523)],void 0===(o=function(e,t,i,n){var o=function(t){n.call();this.options=t=e.extend({},this.defaultOptions,t),this._queue=[],this._needsSort=!1,this._isRunning=!1,this._loaderContexts=[];for(var i=0;i<t.numAsyncRequestsAllowed;i++)this._loaderContexts[i]=this._createLoaderContext()};return o.nextRequestId=1,i.inherit(o,n),e.extend(o.prototype,{defaultOptions:{createNewImageOnReset:!0,timeoutInterval:0,numAsyncRequestsAllowed:1,crossOrigin:!1},_createLoaderContext:function(){var e=this,t={entry:null,loader:new Image,loadFunc:function(){e._handleLoad(t)},loadErrorFunc:function(){e._handleError(t)},timeoutFunc:function(){e._handleTimeout(t)},timeoutTimerId:0};return this.options.crossOrigin&&(t.loader.crossOrigin=this.options.crossOrigin),t},add:function(t,n){if(t){for(var r=i.ensureArray(t),a=0;a<r.length;a++){var s=e.extend({reqId:o.nextRequestId++,src:r[a],width:0,height:0,priority:50,callback:null,data:null},n);this._queue.push(s),this._needsSort=!0,this.trigger("wp-image-loader-add",s)}this._isRunning&&this._loadNext()}},start:function(){this._isRunning||(this._isRunning=!0,this.trigger("wp-image-loader-start"),this._loadNext())},stop:function(){if(this._isRunning){for(var e=this._loaderContexts,t=e.length,i=0;i<t;i++){var n=e[i];n.entry&&(this._queue.unshift(n.entry),this._needsSort=!0),this._resetLoaderContext(n)}this._isRunning=!1,this.trigger("wp-image-loader-stop")}},getQueueCount:function(){return this._queue.length+this._getPendingRequestCount()},clearQueue:function(){var e=this._isRunning;this.stop(),this._queue.length=0,e&&this.start()},_loadNext:function(){if(this._isRunning){var e=this._getAvailableLoaderContext();if(e){var t=this._queue;if(t.length){this._needsSort&&(t=this._queue=t.sort(function(e,t){var i=e.priority-t.priority;return i||e.reqId-t.reqId}),this._needsSort=!1);var i=t.shift();e.entry=i,this.options.timeoutInterval>0&&(e.timeoutTimerId=setTimeout(e.timeoutFunc,this.options.timeoutInterval));var n=e.loader;n.onload=e.loadFunc,n.onerror=e.loadErrorFunc,n.src=i.src,t.length&&this._loadNext()}else 0===this.getQueueCount()&&this.trigger("wp-image-loader-empty")}}},_getPendingRequestCount:function(){for(var e=this._loaderContexts,t=e.length,i=0,n=0;n<t;n++){e[n].entry&&++i}return i},_getAvailableLoaderContext:function(){for(var e=this._loaderContexts,t=e.length,i=0;i<t;i++){var n=e[i];if(!n.entry)return n}return null},_resetLoaderContext:function(e){var t=e.loader;t.onload=null,t.onerror=null,t.src=""==t.src?" ":"",this.options.createNewImageOnReset&&(e.loader=new Image,this.options.crossOrigin&&(e.loader.crossOrigin=this.options.crossOrigin)),e.entry=null,e.timeoutTimerId&&(clearTimeout(e.timeoutTimerId),e.timeoutTimerId=0)},_handleLoad:function(e){var t=e.loader;entry=e.entry,entry.width=t.width,entry.height=t.height,this._resetLoaderContext(e),entry.callback&&entry.callback(entry.src,entry.width,entry.height,entry.data),this.trigger("wp-image-loader-load-success",entry),this._loadNext()},_handleError:function(e){var t=e.entry;this._resetLoaderContext(e),this.trigger("wp-image-loader-load-error",t),this._loadNext()},_handleTimeout:function(e){var t=e.entry;this._resetLoaderContext(e),this.trigger("wp-image-loader-timeout",t),this._loadNext()}}),t.ImageLoader=o,o}.apply(t,n))||(e.exports=o)},418:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(23),i(15)],void 0===(o=function(e,t,i,n,o,r){"use strict";var a=i.Model.extend({defaults:{}});return o.extend({events:{"click .x-close-btn":"_handleCancel","click .mrvl-overlay-bg":"_handleCancel"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.model=new a,t.extend(this,i.Events),this.update(e),this.model.on("change:location",this.positionDialog())},onHide:function(){this.cleanupForHide()},cleanupForHide:function(){this.$el.find(".x-close-btn").removeClass("hide"),this.$el.find(".buttons").removeClass("hide"),this._ignoreCloseActions=!1},unclosable:function(){this.$el.find(".x-close-btn").addClass("hide"),this.$el.find(".buttons").addClass("hide"),this._ignoreCloseActions=!0},update:function(e){e&&t.extend(this,e),this.location&&this.model.set({location:this.location},{silent:!0})},move:function(e){this.model.set({location:e},{silent:!0}),this.positionDialog()},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===r.DOM_VK_ESCAPE&&this._handleCancel()},contentModified:function(){this.positionDialog(!0)},positionDialog:function(e){var t=this.$el.find(".mrvl-overlay-shell"),i=this.model.get("location");if(t.length>0&&i){var n=this.$el.hasClass("hide");n&&this.$el.removeClass("hide");var o,r,a,s,l,d,h,c=t.outerWidth(),u=t.outerHeight(),p=0,g=t.find(".pointer"),f=g.length&&g.outerWidth();g.length&&g.outerHeight();for(a=t.parent();!p&&a.length;){if("absolute"===(l=a.css("position"))||"relative"===l||"fixed"===l){p=a.width(),s=a.height();break}a=a.parent()}i.x>=p/2?(r=i.left-c/2-7,h=!0):(r=i.left+i.width+c/2+7,h=!1),o=i.y-.75*u,o=Math.max(5,Math.min(o,s-u-5)),t.css({top:o+"px",left:r+"px",position:"absolute"});var m=t.offset().top-a.offset().top;if(n&&this.$el.addClass("hide"),g&&(d=i.y-m-6,d=Math.max(4,Math.min(u-12,d)),g.css("top",d+"px"),h?g.css({right:.5*-f,left:"auto"}).addClass("on-right"):g.css({left:.5*-f,right:"auto"}).removeClass("on-right"),this.zoomInOut)){var v=(h?c+.5*f:.5*-f)+"px"+" "+(d+"px");t.css("transform-origin",v)}}},assignFieldsByClass:function(){if(this.fields)for(var e in this.fields)this.fields.hasOwnProperty(e)&&this.$el.find("."+e).text(this.fields[e])},render:function(){return this.$el&&this.$el.length&&(this.zoomInOut?(this.$el.addClass("zoomInOut"),this.transitionObjectSelector=".mrvl-overlay-shell"):(this.$el.removeClass("zoomInOut"),this.transitionObjectSelector=null),this.template?(this.$el.html(this.template.toString()),this.assignFieldsByClass(),this.location&&this.positionDialog()):this.$el.html("<p>This class needs to be extended or have an el and template defined to be useful</p>")),this.afterRenderCallback&&this.afterRenderCallback(this.$el),this}})}.apply(t,n))||(e.exports=o)},419:function(e,t,i){var n,o;n=[i(0)],void 0===(o=function(e){var t,i="virtualMouseBindings",n="virtualTouchID",o="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),r="clientX clientY pageX pageY screenX screenY".split(" "),a=e.event.mouseHooks?e.event.mouseHooks.props:[],s=e.event.props.concat(a),l={},d=0,h=0,c=0,u=!1,p=[],g=!1,f=!1,m="addEventListener"in document,v=e(document),b=1,w=0;function k(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function S(t){for(var n,o,r={};t;){for(o in n=e.data(t,i))n[o]&&(r[o]=r.hasVirtualBinding=!0);t=t.parentNode}return r}function _(){f=!0}function x(){f=!1}function y(){C(),d=setTimeout(function(){d=0,w=0,p.length=0,g=!1,_()},e.vmouse.resetTimerDuration)}function C(){d&&(clearTimeout(d),d=0)}function T(t,n,o){var a;return(o&&o[t]||!o&&function(t,n){for(var o;t;){if((o=e.data(t,i))&&(!n||o[n]))return t;t=t.parentNode}return null}(n.target,t))&&(a=function(t,i){var n,o,a,l,d,h,c,u,p,g=t.type;if((t=e.Event(t)).type=i,n=t.originalEvent,o=e.event.props,g.search(/^(mouse|click)/)>-1&&(o=s),n)for(c=o.length;c;)t[l=o[--c]]=n[l];if(g.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==g.search(/^touch/)&&(g=(a=k(n)).touches,d=a.changedTouches,h=g&&g.length?g[0]:d&&d.length?d[0]:void 0))for(u=0,p=r.length;u<p;u++)t[l=r[u]]=h[l];return t}(n,t),e(n.target).trigger(a)),a}function I(t){var i=e.data(t.target,n);if(!(g||w&&w===i)){var o=T("v"+t.type,t);o&&(o.isDefaultPrevented()&&t.preventDefault(),o.isPropagationStopped()&&t.stopPropagation(),o.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function P(t){var i,o,r=k(t).touches;if(r&&1===r.length&&(o=S(i=t.target)).hasVirtualBinding){w=b++,e.data(i,n,w),C(),x(),u=!1;var a=k(t).touches[0];h=a.pageX,c=a.pageY,T("vmouseover",t,o),T("vmousedown",t,o)}}function D(e){f||(u||T("vmousecancel",e,S(e.target)),u=!0,y())}function F(t){if(!f){var i=k(t).touches[0],n=u,o=e.vmouse.moveDistanceThreshold,r=S(t.target);(u=u||Math.abs(i.pageX-h)>o||Math.abs(i.pageY-c)>o)&&!n&&T("vmousecancel",t,r),T("vmousemove",t,r),y()}}function R(e){if(!f){_();var t,i=S(e.target);if(T("vmouseup",e,i),!u){var n=T("vclick",e,i);n&&n.isDefaultPrevented()&&(t=k(e).changedTouches[0],p.push({touchID:w,x:t.clientX,y:t.clientY}),g=!0)}T("vmouseout",e,i),u=!1,y()}}function B(t){var n,o=e.data(t,i);if(o)for(n in o)if(o[n])return!0;return!1}function A(){}e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};var L=!1;try{var M=Object.defineProperty({},"passive",{get:function(){L={passive:!1}}});window.addEventListener("test",M,M),window.removeEventListener("test",M,M)}catch(e){L=!1}function E(t){var n=t.substr(1);return{setup:function(o,r){B(this)||e.data(this,i,{}),e.data(this,i)[t]=!0,l[t]=(l[t]||0)+1,1===l[t]&&v.bind(n,I),e(this).bind(n,A),m&&(l.touchstart=(l.touchstart||0)+1,1===l.touchstart&&(document.addEventListener("touchstart",P,L),document.addEventListener("touchend",R,L),document.addEventListener("touchmove",F,L),v.bind("scroll",D)))},teardown:function(o,r){--l[t],l[t]||v.unbind(n,I),m&&(--l.touchstart,l.touchstart||(document.removeEventListener("touchstart",P,L),document.removeEventListener("touchend",R,L),document.removeEventListener("touchmove",F,L),v.unbind("scroll",D)));var a=e(this),s=e.data(this,i);s&&(s[t]=!1),a.unbind(n,A),B(this)||a.removeData(i)}}}for(var H=0;H<o.length;H++)e.event.special[o[H]]=E(o[H]);m&&document.addEventListener("click",function(i){var o,r,a,s,l,d=p.length,h=i.target;if(d)for(o=i.clientX,r=i.clientY,t=e.vmouse.clickDistanceThreshold,a=h;a;){for(s=0;s<d;s++)if(l=p[s],0,a===h&&Math.abs(l.x-o)<t&&Math.abs(l.y-r)<t||e.data(a,n)===l.touchID)return i.preventDefault(),void i.stopPropagation();a=a.parentNode}},!0)}.apply(t,n))||(e.exports=o)},422:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(6)],void 0===(o=function(e,t,i,n,o){"use strict";return new(i.Model.extend({clientId:o.instagramClientId,authenticate:function(e){this.accessToken=e},_request:function(t,i){var o=n.defer(),r=e.ajax({url:"https://api.instagram.com/v1/"+t,dataType:"jsonp",type:"GET",data:e.extend({},{access_token:this.accessToken},i)});return r.done(function(e,t,i){o.resolve(e,t,i)}),r.fail(function(e,i,n){console.warn("Instagram API: access to url "+t+" failed =  ",i),o.reject(e,i,n)}),o.promise},userProfile:function(e,t){return t=t||"self",this._request("users/"+t,e)},fetchRecentUserMedia:function(e,t){return t=t||"self",this._request("users/"+t+"/media/recent",e)}}))}.apply(t,n))||(e.exports=o)},425:function(e,t,i){var n,o;n=[i(0),i(2),i(3),i(1),i(8),i(107),i(6)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s=r.LibraryImageLinksModel;function l(){this.result=null,this._reachedEnd=!1,this.collection=new n.Collection,this.collection.model=s,this._lastOpts=null}function d(e,t){if(!e)throw new Error("Argument Error: Required data parameter must be non-null");this.data=e,this._items=[],this._modelAttrs=[],this.filter=t,this._parseData()}function h(e){if(!e)throw new Error("Argument Error: Required data parameter must be non-null");this.data=e,this.links={},this._parseData()}return l.apiHost="https://"+(a.dooplo||"cc-api-dooplo.adobe.io"),l.searchPath="/api/v1/assets/search",l.infoPath="/api/v1/assets/",l.apiKey=a.cpkey,l.SOURCE_CREDIT_INFOS={flickr:{hoverName:"Flickr",sourcesName:"Flickr",link:"https://www.flickr.com/",creditOrderIndex:1},pixabay:{hoverName:"Pixabay",sourcesName:"Pixabay",link:o.getLocalizedPixabayURL("https://pixabay.com/"),creditOrderIndex:2},unsplash:{hoverName:"Unsplash",sourcesName:"Unsplash",link:"https://unsplash.com/",creditOrderIndex:0},bing:{hoverName:"Bing",sourcesName:"Bing",link:"http://bing.com/images/",creditOrderIndex:4},"the noun project":{hoverName:"",sourcesName:"The Noun Project",link:"https://thenounproject.com/",creditOrderIndex:3}},t.extend(l.prototype,{search:function(i){this.result=null;var n=this._getParams({query:"landscape",page:i.startPage||1,size:25,asset_type:"image",image_filter:[],source:[]},i),o=i.success,r=i.error;function a(e){var t=e.links.original.type;return i.imageFilter.includesType(t)||i.imageFilter.includesExtensionOnly(t)}var s=l.apiHost+l.searchPath;return this._lastOpts=t.extend({},n,i),e.ajax({url:s,data:n,dataType:"json",traditional:!0}).done(function(e,s,l){var h=null;if(!e||t.isEmpty(e))h=new Error("No data received");else if(e.error_code)h=new Error(e.message);else try{var c=null;"image"===n.asset_type&&(c=a),this.result=new d(e,c&&c.bind(this)),this.result.getLength()?i.add?this.collection.set(this.result._modelAttrs,{add:!0}):this.collection.reset(this.result._modelAttrs):this._reachedEnd=!0}catch(e){h=e}h?r&&r(l,"error",h):o&&o(this.result,s,l)}.bind(this)).fail(r)},searchNextSet:function(e){return this._lastOpts&&this._lastOpts.page++,e=t.extend({add:!0},this._lastOpts,e),this.search(e)},reachedEnd:function(){return this._reachedEnd},_getParams:function(e,i){var n={api_key:l.apiKey};if(e=t.extend(n,e),i){var o=[];for(var r in e)o.push(r);o.unshift(i);var a=t.pick.apply(t,o);e=t.extend(e,a)}return e},getLength:function(){return this.collection.length},at:function(e){return this.collection.at(e)}}),l.getAssetInfo=function(t){var n=l.apiHost+l.infoPath+t,o=i.defer();return e.ajax({method:"GET",url:n,data:{api_key:l.apiKey},dataType:"json",success:function(e,t,i){o.resolve(e)},error:function(e,t,i){marvel.logger.error("dooplo getAssetInfo error:",{err:i,status:t,responseText:e.responseText,url:n}),o.reject()}}).done(),o.promise},t.extend(d.prototype,{_parseData:function(){for(var e=this.data._embedded.assets,t=0,i=e.length;t<i;t++){var n=e[t],o=new h(n);if(!this.filter||this.filter(o)){var r=o.getThumbURL(),a=o.getPreviewURL(),s=o.getOriginalURL();this._items.push(o),this._modelAttrs.push({source_id:n.id,title:n.title,mimeType:o.getMimeType(),image_url:s||a||r,preview_url:a||s||r,thumb_url:r||a||s})}}},getLength:function(){return this._items.length},at:function(e){return this._items[e]}}),t.extend(h.prototype,{_parseData:function(){for(var e=this.data._links.rendition,t=0,i=e.length;t<i;t++){var n=e[t];this.links[n.name]=n}},getOriginalURL:function(){return this._sanitizeURL(this.links.original.href)},getPreviewURL:function(){return this._sanitizeURL(this.links.preview.href)},getThumbURL:function(){return this._sanitizeURL(this.links.thumb.href)},getMimeType:function(){return this.links.original.type},_sanitizeURL:function(e){return 0===e.indexOf(l.apiHost)&&(e=this._addAPIKeyToURL(e)),e},_addAPIKeyToURL:function(e){var t="?";return-1!==e.indexOf("?")&&(t="&"),e+t+"api_key="+l.apiKey},getAspect:function(){return{width:this.links.thumb.width,height:this.links.thumb.height}},getThumbHoverLabel:function(){if("vector"===this.data.asset_type)return"";var e=l.SOURCE_CREDIT_INFOS[this.data.source.name.toLowerCase()];return e?e.hoverName||"":(marvel.logger.error("dooplo-request: unknown image source type for thumb hover label:"+this.data.source.name,this),"")}}),l}.apply(t,n))||(e.exports=o)},426:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(213)],void 0===(o=function(e,t,i,n){"use strict";function o(e){this.formatArr=e,this.types=t.filter(e,function(e){return e.indexOf("/")>-1}),this.extensionsWithDot=[],this.extensionsWithoutDot=[],t.each(e,function(e){var i;e.indexOf("/")>-1||(i=t.startsWith(e,".")?e.replace(/^\./,""):e,this.extensionsWithoutDot.push(i),this.extensionsWithDot.push("."+i))}.bind(this))}return t.extend(o.prototype,{includesType:function(e){return this.types.indexOf(e)>=0},includesExtensionOnly:function(e){return this.extensionsWithoutDot.indexOf(e)>=0},includesExtension:function(e){return t.some(this.extensionsWithDot,function(i){return t.endsWith(e,i)})},getAcceptAttributeString:function(){return this.extensionsWithDot.concat(this.types).join(",")}}),o}.apply(t,n))||(e.exports=o)},519:function(e,t,i){var n,o;n=[i(0),i(344),i(520)],void 0===(o=function(e,t,i){var n={inherit:function(t,i,n){var o=function(){};o.prototype=i.prototype,t.prototype=new o,t.prototype.constructor=t,t.prototype._super=i,n&&e.extend(t.prototype,n)},ensureArray:function(){var t=[],i=arguments.length;return i>0&&(t=i>1||!e.isArray(arguments[0])?e.map(arguments,function(e){return e}):arguments[0]),t},scopedFind:function(t,i,n,o){var r=" "+n+" ",a=[],s=e(t).find(i),l=s.length;o=e(o)[0];for(var d=0;d<l;d++)for(var h=s[d],c=h;c;){if(c.className&&-1!==(" "+c.className+" ").indexOf(r)){c===o&&a.push(h);break}c=c.parentNode}return e(a)},getDocumentOffset:function(t){var i=0,n=0;if(t=e(t)[0]){var o=t.offsetParent;for(i=t.offsetLeft,n=t.offsetTop;t;)t===o&&(i+=t.offsetLeft,n+=t.offsetTop,o=t.offsetParent),i-=t.scrollLeft||0,n-=t.scrollTop||0,t=t.parentNode}return{left:i,top:n}},getAlignmentAdjustment:function(e,t,i){var n=0;switch(e){case"left":case"top":n=0;break;case"right":case"bottom":n=t-i;break;case"center":default:n=(t-i)/2}return n},positionElementAroundAnother:function(t,i,n){n=e.extend({position:"right",positionOffset:0,align:"center",alignOffset:0},n);var o=e(t),r=e(i),a=r.offsetParent();r.removeClass("above below left right");var s=o.offset(),l=o.outerWidth(),d=o.outerHeight(),h=a.offset(),c=r.outerWidth(),u=r.outerHeight(),p=n.positionOffset,g=n.align,f=n.alignOffset,m=s.left-h.left,v=s.top-h.top;switch(n.position){case"above":m=m+this.getAlignmentAdjustment(g,l,c)+f,v=v-u-p;break;case"below":m=m+this.getAlignmentAdjustment(g,l,c)+f,v=v+d+p;break;case"left":m=m-c-p,v=v+this.getAlignmentAdjustment(g,d,u)+f;break;case"right":default:m=m+l+p,v=v+this.getAlignmentAdjustment(g,d,u)+f}return{x:m,y:v}},positionElementInsideAnother:function(t,i,n,o){var r=e(t),a=e(i),s=a.offsetParent(),l=r.offset(),d=s.offset(),h=l.left-d.left,c=l.top-d.top;switch(n){case"left":case"center":case"right":n=h+this.getAlignmentAdjustment(n,r.outerWidth(),a.outerWidth());break;default:n=n||0}switch(o){case"top":case"center":case"bottom":o=c+this.getAlignmentAdjustment(o,r.outerHeight(),a.outerHeight());break;default:o=o||0}return{x:n,y:o}},calcTotalWidthOfObjects:function(t){var i=0;for(var n in t)i+=e(t[n]).outerWidth();return i},setElementTransform:function(t,n){e(t).css(i.vendorPrefix+"transform",n)},instantTransform:function(t,i,n){var o=e(t);o.addClass(n),this.setElementTransform(t,i),setTimeout(function(){o.removeClass(n)},0)},parseQueryParams:function(e){var t=/([^\?#]+)?(\?([^#]*))?(#.*)?/.exec(e||""),i={};if(t&&t[3])for(var n=t[3].split("&"),o=0;o<n.length;o++){var r=(n[o]||"").split("=");i[decodeURIComponent(r[0]||"")]=decodeURIComponent(r[1]||"")}return i},serializeQueryParams:function(e){var t="";if(e)for(var i in e)t&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]);return t},setQueryParams:function(e,t){var i=this.serializeQueryParams(t);return i=(i?"?":"")+i,e.replace(/([^\?#]+)?(\?[^#]*)?(#.*)?/,"$1"+i+"$3")},setQueryParam:function(e,t,i){if(t){var n=this.parseQueryParams(e);return n[t]=i,this.setQueryParams(e,n)}return e}};return t.Utils=n,e.extend(t,n),n}.apply(t,n))||(e.exports=o)},520:function(e,t,i){var n,o;n=[i(344)],void 0===(o=function(e){window.navigator.userAgent;e.isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,e.isFirefox="undefined"!=typeof InstallTrigger,e.isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),e.isIE=!!document.documentMode,e.isEdge=!e.isIE&&!!window.StyleMedia,e.isMSEdge=e.isEdge,e.isChrome=!!window.chrome&&!window.opera&&!e.isMSEdge,e.isBlink=(e.isChrome||e.isOpera)&&!!window.CSS,e.supportsAddEventListenerOptions=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e.supportsAddEventListenerOptions=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e.supportsAddEventListenerOptions=!1}e.supportsPassiveEventListeners=e.supportsAddEventListenerOptions,e.touchEventsEnabled="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,e.pointerEventsEnabled=window.PointerEvent||window.navigator.pointerEnabled,e.msPointerEventsEnabled=window.navigator.msPointerEnabled,e.supportsMozInputSource=e.isFirefox&&!e.touchEventsEnabled&&window.MouseEvent&&window.MouseEvent.MOZ_SOURCE_MOUSE,e.touchEnabled=e.touchEventsEnabled||e.msPointerEventsEnabled||e.pointerEventsEnabled||e.supportsMozInputSource;var i="";if(window.getComputedStyle){var n=window.getComputedStyle(document.documentElement,"");"-moz-"===(i=(Array.prototype.slice.call(n).join("").match(/(-moz-|-webkit-|-ms-)/)||""===n.OLink&&["","o"])[1])&&(i="")}return e.vendorPrefix=i||"",e}.apply(t,n))||(e.exports=o)},522:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(56),i(419),i(98),i(6),i(530),i(531),i(532),i(540),i(542),i(12),i(544),i(546),i(548),i(550),i(552),i(553),i(554),i(558),i(347),i(219),i(348),i(330),i(559),i(95),i(4),i(426),i(40),i(35),i(560),i(418),i(8)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h,c,u,p,g,f,m,v,b,w,k,S,_,x,y,C,T,I,P,D,F,R,B,A,L){"use strict";var M=i.View.extend({collection:null,childViews:[],initialize:function(e){this._options=e||{},this._options.image_filter||(this._options.image_filter=[".jpg",".jpeg",".png","image/jpeg","image/png"]),this._options.imageFilter=new D(this._options.image_filter),this._handleDooploPick=this._handleDooploPick.bind(this),this._handleLightroomPick=this._handleLightroomPick.bind(this),this._handleLightroomImporterPick=this._handleLightroomImporterPick.bind(this),this._handleHierarchicalPick=this._handleHierarchicalPick.bind(this),this._handleAdobeStockPick=this._handleAdobeStockPick.bind(this),this.dropboxPickerDefer=n.defer(),this.googlePhotosPickerDefer=n.defer(),this.facebookPickerDefer=n.defer(),this.model=new S,this.model.on("change:label",function(e){var t=e.get("label");this.$el.find(".picker-bar .source-label").text(t)}.bind(this)),this._connectedApp=P.getProductName(),this._editorSection=window.marvel._siteSection.split(":")[1],this._pickerInstances=[],this._isBound||(this._isBound=!0,this._sparkAreaChange=this._sparkAreaChange.bind(this)),window.marvel.events.on("spark-area-change",this._sparkAreaChange)},render:function(){var e=this.$el;e.html(L.mustacheRender(w)),e.find(".search-button").on("vclick",this._handleSearch.bind(this)),e.find(".dropbox-button").on("vclick",this._handleDropbox.bind(this)),e.find(".stock-search-button").on("vclick",this._handleStockSearch.bind(this)),e.find(".facebook-button").on("vclick",this._handleFacebook.bind(this)),e.find(".instagram-button").on("vclick",this._handleInstagram.bind(this)),e.find(".dropbox-logout").on("vclick",this._handleDropboxLogout.bind(this)),e.find(".instagram-logout").on("vclick",this._handleInstagramLogout.bind(this)),e.find(".facebook-logout").on("vclick",this._handleFacebookLogout.bind(this)),e.find(".google-photos-logout").on("vclick",this._handleGoogleLogout.bind(this)),e.find(".google-photos-button").on("vclick",this._handleGooglePhotos.bind(this)),e.find(".google-drive-button").on("vclick",this._handleGoogleDrive.bind(this)),this._useLightroomImporter()?e.find(".lightroom-button").on("vclick",this._handleLightroomImporter.bind(this)):e.find(".lightroom-button").on("vclick",this._handleLightroom.bind(this)),e.find(".cc-button").on("vclick",this._handleCC.bind(this)),e.find(".picker-bar .close-button").on("vclick",this.hide.bind(this)),e.find("button.filter").on("vclick",this._handleFilterButton.bind(this)),e.find("button.sort").on("vclick",this._handleSortButton.bind(this)),e.find(".picker-bar .back-button").on("vclick",this._handlePickerBack.bind(this));var t=e.find(".local-file-input");return t.attr("accept",this._options.imageFilter.getAcceptAttributeString()),t.on("change",this._handleLocalFile.bind(this)).on("click",function(e){e.stopPropagation()}),e.find(".local-file-button").on("vclick",function(t){var i=e.find(".local-file-input");i&&i[0].click(),t.preventDefault()}),e.addClass("v1design"),this.$(".local-file-button")[0].firstChild.textContent=L.formatMessage("imagepicker-upload-photo",{usePlural:!1}),this.home(),_.isAuthenticated()&&(e.find(".dropbox-connect").addClass("hide"),e.find(".dropbox-logout").addClass("authenticated")),x.isAuthenticated()&&e.find(".facebook-logout").addClass("authenticated"),y.isAuthenticated()&&e.find(".instagram-logout").addClass("authenticated"),C.isAuthenticated()&&(e.find(".google-photos-connect").addClass("hide"),e.find(".google-photos-logout").addClass("authenticated")),marvel.features.hasFeature("show-facebook-image-picker")||e.find(".facebook-button-wrapper").addClass("hide"),marvel.features.hasFeature("show-published-url-image-picker")&&(this._setupCopyUrl(),this._setupPickerProgress()),marvel.features.hasFeature("enable-image-picker-dnd")&&this._setupDragAndDrop(),marvel.features.hasFeature("show-instagram-image-picker")||e.find(".instagram-button-wrapper").addClass("hide"),this},jumpTo:function(e,t,i,n){n=n||{};var o,r=!0;"Dooplo"==e?o="vector"==this._options.assetType?"IconSearch":"Search":"Creative Cloud"==e?e=o="CC":"adobestock"==e.toLowerCase()?(e="AdobeStock",o="StockSearch",E(this._connectedApp)||(e="",o="",r=!1)):"Lightroom"===e&&this._useLightroomImporter()?(o="LightroomImporter",this.home()):"google drive"==e.toLowerCase()?r=!1:"googledrive"==e.toLowerCase()?(o=null,r=!1):o=e,"LightroomImporter"===o?this._setPickerToLightroomImporter():"StockSearch"===o?this._handleStockSearch(t||!1):this["_handle"+o]?this["_handle"+o](!1):(this.home(),r&&console.warn("Unknown image source! Context specifies "+o));this.model.get("picker");"Dooplo"==e?this.dooploPicker.show(t):"google drive"==e.toLowerCase()?this._handleGoogleDrive():"googledrive"==e.toLowerCase()?e=null:(t=t||"",e="GooglePhotos"===e?"googlePhotos":"googleDrive"==e?"googleDrive":"CC"===e?"creativeCloud":"AdobeStock"===e?"adobeStock":"LightroomImporter"===o?n.suppressServiceUI?null:"lightroomImporter":e.toLowerCase(),this._ensurePicker(e).then(function(e){e&&e.jumpTo&&e.jumpTo(t,i,n)}).done())},_ensurePicker:function(e){var t=e&&this[e+"Picker"],i=this[e+"PickerDefer"];return t?n(t):i?i.promise:n.reject("No picker found for "+e)},deselectAsset:function(){this.$(".results .selected").removeClass("selected")},_hideCurrentPicker:function(e){var t=this.$el.find(".sp-picker.showing");t.hasClass(e+"-picker")||(t.removeClass("showing"),t.hasClass("picker-home")&&t.addClass("leaving"))},_sparkAreaChange:function(e,t){"editor"===t.area.new?t.section.new===this._editorSection&&this._changingToMyEditor(t):"editor"===t.area.old&&t.section.old===this._editorSection&&this._changingFromMyEditor(t)},_changingToMyEditor:function(e){t.each(this._pickerInstances,function(t){t.handleChangingToEditor(e)})},_changingFromMyEditor:function(e){t.each(this._pickerInstances,function(t){t.handleChangingFromEditor(e)})},_saveNewPicker:function(e){this._pickerInstances.push(e)},setHomeLablesText:function(){var e,t=marvel.features.hasFeature("image-picker-singular-plural");e=this._options.homeLabel?this._options.homeLabel:L.formatMessage("imagepicker-add-photo",{usePlural:!t||this.model.get("multiSelect")}),this.model.set({label:e}),t&&(this.$(".local-file-button")[0].firstChild.textContent=L.formatMessage("imagepicker-upload-photo",{usePlural:this.model.get("multiSelect")}))},home:function(){if("vector"==this._options.assetType)return this._handleIconSearch(),void this.$(".back-button").remove();this.$el.find(".sp-picker.showing");this.$el.find(".picker-home").hasClass(".showing")||this._hideCurrentPicker(),this.$el.find(".picker-home").addClass("showing").removeClass("leaving"),this.$el.find(".picker-bar").addClass("home"),this.model.set(this.model.defaults),this.setHomeLablesText(),E(this._connectedApp)?this.$el.find(".stock-search-button-wrapper").removeClass("hide"):this.$el.find(".stock-search-button-wrapper").addClass("hide")},_enableGoogleDrive:function(){switch(this._editorSection){case"video":return marvel.features.hasFeature("google-drive-in-voice");case"post":return marvel.features.hasFeature("google-drive-in-theo");case"page":return marvel.features.hasFeature("google-drive-in-slate");default:return!1}},_handleSearch:function(){this._hideCurrentPicker("dooplo"),this.dooploPicker||(this.dooploPicker=new l(this.$el.find(".dooplo-picker"),this._handleDooploPick,this._options),this._saveNewPicker(this.dooploPicker)),this.model.set({picker:this.dooploPicker,label:L.getString("imagepicker-find-free-photos"),page:this.$el.find(".dooplo-picker"),source:"Dooplo"}),this.dooploPicker.show(),this.$el.find(".picker-bar").removeClass("home")},_handleIconSearch:function(){this._hideCurrentPicker("dooplo-icon"),this.dooploPicker||(this.dooploPicker=new l(this.$el.find(".dooplo-icon-picker"),this._handleDooploPick,this._options),this._saveNewPicker(this.dooploPicker)),this.model.set({picker:this.dooploPicker,label:L.getString("imagepicker-find-icon"),page:this.$el.find(".dooplo-icon-picker"),source:"Dooplo"}),this.dooploPicker.show()},_handleStockSearch:function(e){this._hideCurrentPicker("stock"),this.adobeStockPicker||(this.adobeStockPicker=new d(this.$el.find(".stock-picker"),this._handleAdobeStockPick,this._options),this._saveNewPicker(this.adobeStockPicker)),this.model.set({picker:this.adobeStockPicker,label:L.getString("imagepicker-source-adobe-stock"),page:this.$el.find(".stock-picker"),source:"AdobeStock"}),this.adobeStockPicker.show("string"==typeof e&&e||!1),this.$el.find(".picker-bar").removeClass("home")},_handleLocal:function(){this.$el.find(".sp-picker").removeClass("showing"),this.$el.find(".local-picker").addClass("showing")},_handleBeforeUnload:function(e){return!e.isAuthenticated()&&this._beforeUnload?this._beforeUnload():n.resolve()},_handleDropbox:function(e){this._handleBeforeUnload(_).then(function(){this._hideCurrentPicker("dropbox"),this.dropboxPicker||(this.dropboxPicker=new h(this.$el.find(".dropbox-picker"),this._handleHierarchicalPick,this),this._saveNewPicker(this.dropboxPicker)),this.model.set({picker:this.dropboxPicker,label:L.getString("imagepicker-source-dropbox"),page:this.$el.find(".dropbox-picker"),source:"Dropbox"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.dropboxPicker.populate(),this.$el.find(".dropbox-picker").addClass("showing"),this.dropboxPickerDefer.resolve(this.dropboxPicker)}.bind(this)).done()},_handleFacebook:function(e){this._handleBeforeUnload(x).then(function(){this._hideCurrentPicker("facebook"),this.facebookPicker||(this.facebookPicker=new h(this.$el.find(".facebook-picker"),this._handleHierarchicalPick,this),this._saveNewPicker(this.facebookPicker)),this.model.set({picker:this.facebookPicker,label:L.getString("imagepicker-source-facebook"),page:this.$el.find(".facebook-picker"),source:"Facebook"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.facebookPicker.populate(),this.$el.find(".facebook-picker").addClass("showing"),this.facebookPickerDefer.resolve(this.facebookPicker)}.bind(this)).done()},_handleInstagram:function(e){this._hideCurrentPicker("instagram"),this.instagramPicker||(this.instagramPicker=new h(this.$el.find(".instagram-picker"),this._handleHierarchicalPick,this),this._saveNewPicker(this.instagramPicker)),this.model.set({picker:this.instagramPicker,label:L.getString("imagepicker-source-instagram"),page:this.$el.find(".instagram-picker"),source:"Instagram"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.instagramPicker.populate(),this.$el.find(".instagram-picker").addClass("showing")},_handleGooglePhotos:function(e){this._handleBeforeUnload(C).then(function(){this._hideCurrentPicker("google-photos"),this.googlePhotosPicker||(this.googlePhotosPicker=new h(this.$el.find(".google-photos-picker"),this._handleHierarchicalPick,this),this._saveNewPicker(this.googlePhotosPicker)),this.model.set({picker:this.googlePhotosPicker,label:L.getString("imagepicker-source-google-photos"),page:this.$el.find(".google-photos-picker"),source:"Google Photos"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.googlePhotosPicker.populate(),this.$el.find(".google-photos-picker").addClass("showing"),this.googlePhotosPickerDefer.resolve(this.googlePhotosPicker)}.bind(this)).done()},_handleGoogleDrive:function(e){var t,i,n=C.getAccessToken();t=function(){n.then(function(e){o.set("google-drive-token",e);var t=new google.picker.DocsView(google.picker.ViewId.DOCS_IMAGES);t.setIncludeFolders(!0).setParent("root").setMimeTypes("image/png,image/jpeg,image/jpg");var n=(new google.picker.PickerBuilder).setAppId(C.getAppId()).setOAuthToken(e).addView(t).setDeveloperKey(C.getApiKey()).setCallback(i);marvel.features.hasFeature("google-drive-multi")&&this.model.get("multiSelect")?(this.googleDrivePickerMulti||(n.enableFeature(google.picker.Feature.MULTISELECT_ENABLED),this.googleDrivePickerMulti=n.build()),this.googleDrivePicker=this.googleDrivePickerMulti):(this.googleDrivePickerSingle||(this.googleDrivePickerSingle=n.build()),this.googleDrivePicker=this.googleDrivePickerSingle),this.googleDrivePicker.setVisible(!0),this.model.set({picker:this.googleDrivePicker,page:this.$el.find(".google-drive-picker"),source:"GoogleDrive"})}.bind(this)).catch(function(e){marvel.logger.warn("[GoogleDrive] getAccessToken failed",e)})}.bind(this),i=function(e){var t=e[google.picker.Response.ACTION];if(t==google.picker.Action.PICKED){var i=e[google.picker.Response.DOCUMENTS];this._handleGoogleDrivePick(i)}t!=google.picker.Action.PICKED&&t!=google.picker.Action.CANCEL||this.googleDrivePicker.setVisible(!1)}.bind(this),T.whenAvailable().then(function(){window.gapi.load("picker",{callback:t,onerror:function(e){marvel.logger.error("[GoogleDrive] error while loading Google API",e)},timeout:5e3,ontimeout:function(){marvel.logger.error("[GoogleDrive] timeout while loading Google API")}})})},_handleLightroom:function(e){this._hideCurrentPicker("lightroom"),this.lightroomPicker||(this.lightroomPicker=new h(this.$el.find(".lightroom-picker"),this._handleLightroomPick,this),this._saveNewPicker(this.lightroomPicker)),this.model.set({picker:this.lightroomPicker,label:L.getString("imagepicker-source-lightroom"),page:this.$el.find(".lightroom-picker"),source:"Lightroom"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.lightroomPicker.populate(),this.$el.find(".lightroom-picker").addClass("showing")},_setPickerToLightroomImporter:function(){this.lightroomImporterPicker||(this.lightroomImporterPicker=new k(this.$el.find(".lightroom-importer-wrapper"),this._handleLightroomImporterPick,this),this._saveNewPicker(this.lightroomImporterPicker)),this.model.set({picker:this.lightroomImporterPicker,page:this.$el.find(".lightroom-importer-wrapper"),source:"Lightroom"})},_handleLightroomImporter:function(e){this._setPickerToLightroomImporter(),this.lightroomImporterPicker.show({multiSelect:this.model.get("multiSelect")})},_handleCC:function(e){this._hideCurrentPicker("creative-cloud"),this.creativeCloudPicker||(this.creativeCloudPicker=new h(this.$el.find(".creative-cloud-picker"),this._handleHierarchicalPick,this),this._saveNewPicker(this.creativeCloudPicker)),this.model.set({picker:this.creativeCloudPicker,label:L.getString("imagepicker-source-creative-cloud"),page:this.$el.find(".creative-cloud-picker"),source:"Creative Cloud"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.creativeCloudPicker.populate(),this.$el.find(".creative-cloud-picker").addClass("showing")},_handleDropboxLogout:function(e){var t=this.$el.find(".dropbox-logout"),i=this.$el.find(".dropbox-connect");marvel._dialogShowing||(this.dropboxLogoutConfirmView||(this.dropboxLogoutConfirmView=new f,this.dropboxLogoutConfirmView.on("confirm",function(){_.logout(),t.removeClass("authenticated"),i.removeClass("hide")})),this.dropboxLogoutConfirmView.showOverlay(),e.stopPropagation())},_handleInstagramLogout:function(e){var t=this.$el.find(".instagram-logout");marvel._dialogShowing||(this.instagramLogoutConfirmView||(this.instagramLogoutConfirmView=new v,this.instagramLogoutConfirmView.on("confirm",function(){y.logout(),t.removeClass("authenticated")})),this.instagramLogoutConfirmView.showOverlay(),e.stopPropagation())},_handleFacebookLogout:function(e){var t=this.$el.find(".facebook-logout");marvel._dialogShowing||(this.facebookLogoutConfirmView||(this.facebookLogoutConfirmView=new g,this.facebookLogoutConfirmView.on("confirm",function(){x.logout(),t.removeClass("authenticated")})),this.facebookLogoutConfirmView.showOverlay(),e.stopPropagation())},_handleGoogleLogout:function(e){var t=this.$el.find(".google-photos-logout"),i=this.$el.find(".google-photos-connect");marvel._dialogShowing||(this.googleLogoutConfirmView||(this.googleLogoutConfirmView=new m,this.googleLogoutConfirmView.on("confirm",function(){C.logout(),t.removeClass("authenticated"),i.removeClass("hide")})),this.googleLogoutConfirmView.showOverlay(),e.stopPropagation())},_handlePickerBack:function(){var e=this.model.get("picker");e&&e.canGoBack()?e.goBack():this.home()},_handleDooploPick:function(e){var t=[{source:"Dooplo",mimeType:e.getMimeType(),original:{link:e.getOriginalURL(),height:e.links.original.height,width:e.links.original.width},preview:{link:e.getPreviewURL(),height:e.links.preview.height,width:e.links.preview.width},thumbnail:{link:e.getThumbURL(),height:e.links.thumb.height,width:e.links.thumb.width}}],i=this.dooploPicker.getSearchText(),n=e.data.source.name;e.data.searchText=i,P.trackEvent("imageChosen",{imageSource:"dooplo:"+n,searchTerm:i,contextData:["projectId"]},this._connectedApp+":editor"),this._userURLHandler&&this._userURLHandler(t,e.data)},_handleAdobeStockPick:function(e){var t=[{source:"AdobeStock",mimeType:e.getMimeType(),original:{},preview:{link:e.getPreviewURL(),height:e.links.preview.height,width:e.links.preview.width},thumbnail:{link:e.getThumbURL(),height:e.links.thumb.height,width:e.links.thumb.width},licenseInfo:e.licenseInfo}],i=t[0].licenseInfo.license.short_name;e.setOriginalLinkFields(t[0].original);var n=this.adobeStockPicker.getSearchContext();e.licenseInfo.searchText=n,P.trackEvent("imageChosen",{imageSource:"AdobeStock",licenseType:i,searchTerm:n,contextData:["projectId"]},this._connectedApp+":editor"),this._userURLHandler&&this._userURLHandler(t,e.licenseInfo)},_handleHierarchicalPick:function(e,t,i){e.aspect&&(t=e.aspect.width||t,i=e.aspect.height||i);var n=[{source:this.model.get("source"),mimeType:e.getMimeType?e.getMimeType():"image/jpeg",original:{link:encodeURI(e.getOriginalURL()),height:e.links.original.height||i,width:e.links.original.width||t},preview:{link:encodeURI(e.getPreviewURL()),height:e.links.original.height||i,width:e.links.original.width||t},thumbnail:{link:encodeURI(e.getThumbURL()),height:e.links.original.height||i,width:e.links.original.width||t},caption:e.caption}];"Dropbox"==this.model.get("source")&&P.trackEvent("imageChosen",{imageSource:"Dropbox",contextData:["projectId"]},this._connectedApp+":editor"),"Facebook"==this.model.get("source")?P.trackEvent("imageChosen",{imageSource:"Facebook",contextData:["projectId"]},this._connectedApp+":editor"):"Creative Cloud"==this.model.get("source")?P.trackEvent("imageChosen",{imageSource:"Creative Cloud",contextData:["projectId"]},this._connectedApp+":editor"):"Google Photos"==this.model.get("source")?P.trackEvent("imageChosen",{imageSource:"Google Photos",contextData:["projectId"]},this._connectedApp+":editor"):"Facebook"==this.model.get("source")?P.trackEvent("imageChosen",{imageSource:"Facebook",contextData:["projectId"]},this._connectedApp+":editor"):"Instagram"==this.model.get("source")&&P.trackEvent("imageChosen",{imageSource:"Instagram",contextData:["projectId"]},this._connectedApp+":editor");var o,r,a=this.model.get("picker"),s=e.getParentPath(),l=a.getCurrentFolderPath();l&&(s=s.replace(l.toLowerCase(),l)),"Google Photos"==this.model.get("source")?(o=a.getCurrentFolderUrl().replace(/^.*albumid\/([^\/\?\#]*).*$/,"$1"),r=l.replace(/^\//,"")):"Facebook"==this.model.get("source")?(o=a.getCurrentFolderUrl(),r=l.replace(/^\//,"")):"Instagram"==this.model.get("source")&&(o=a.getCurrentFolderUrl(),r=l.replace(/^\//,"")),this._userURLHandler&&this._userURLHandler(n,{path:s,albumId:o,albumName:r,assetID:e.data.path_lower,thumbNaturalSize:e.thumbNaturalSize})},_handleGoogleDrivePick:function(e){var i=window.location.protocol+"//"+window.location.host+"/images/google/drive-icon-mono-512.png?t="+t.now(),n=[];t.each(e,function(e){var t={source:"Google Drive",mimeType:e.mimeType,original:{link:encodeURI("https://www.googleapis.com/drive/v2/files/"+e.id+"?alt=media")},preview:{link:encodeURI("https://"+window.location.host+"/gd_files/drive/v2/files/"+e.id+"?alt=media")},thumbnail:{link:encodeURI(i)},caption:e.description};n.push(t)}),P.trackEvent("imageChosen",{imageSource:"Google Drive",contextData:["projectId"]},this._connectedApp+":editor"),this._userURLHandler&&this._userURLHandler(n,{path:encodeURI("https://"+window.location.host+"/gd_files/drive/v2/files/"+e[0].id+"?alt=media"),albumId:"",albumName:"",assetID:e[0].id,thumbNaturalSize:{width:0,height:0}})},_handleLightroomPick:function(e){var t,i=[{source:"Lightroom",mimeType:e.getMimeType(),original:{link:encodeURI(e.getOriginalURL()),height:e.links.original.height,width:e.links.original.width},preview:{link:encodeURI(e.getPreviewURL()),height:e.links.original.height,width:e.links.original.width},thumbnail:{link:encodeURI(e.getThumbURL()),height:e.links.original.height,width:e.links.original.width},caption:e.caption}];P.trackEvent("imageChosen",{imageSource:"Lightroom",contextData:["projectId"]},this._connectedApp+":editor");var n=this.model.get("picker").getLastCrumb();this._userURLHandler&&(n&&n.label?t={albumName:n.label}:n&&n.item&&n.item.data&&(t={albumName:n.item.data.name}),t.thumbNaturalSize=e.thumbNaturalSize,this._userURLHandler(i,t))},_handleLightroomImporterPick:function(e){var t,i=[],n=[];for(t=0;t<e.length;t++){var o=e[t],r={source:"Lightroom",mimeType:o.getMimeType(),original:{link:encodeURI(o.getOriginalURL()),height:o.links.original.height,width:o.links.original.width},preview:{link:encodeURI(o.getPreviewURL()),height:o.links.original.height,width:o.links.original.width},thumbnail:{link:encodeURI(o.getThumbURL()),height:o.links.original.height,width:o.links.original.width},caption:o.caption,largeRenditionRequest:o.largeRenditionRequest};i.push(r),n.push({albumName:o.albumName})}P.trackEvent("imageChosen",{imageSource:"Lightroom",contextData:["projectId"]},this._connectedApp+":editor"),this._useLightroomImporter()&&this._userURLHandler&&this._userURLHandler(i,n)},_handleLocalFile:function(t){var i=t.target.files;P.trackEvent("imageChosen",{imageSource:"Local File",contextData:["projectId"]},this._connectedApp+":editor");var n=e(t.target).clone();e(t.target).replaceWith(n),n.val("").on("change",this._handleLocalFile.bind(this)).on("click",function(e){e.stopPropagation()}),this._userLocalHandler&&this._userLocalHandler(i)},_setupDragAndDrop:function(){this._userLocalHandler&&(this._dropTarget$=this.$el.find(".photo-picker"),this.$el.find(".drag-and-drop-explainer-holder").removeClass("hide"),this._dropTarget$.on("drag dragstart dragend dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}),this._dropTarget$.on("dragenter dragover",function(e){"dragover"===e.originalEvent.type&&(e.originalEvent.dataTransfer.dropEffect="copy"),this._dropTarget$.addClass("dragover-target"),e.preventDefault(),e.stopPropagation()}.bind(this)),this._dropTarget$.on("dragleave dragend drop",function(e){this._dropTarget$.removeClass("dragover-target")}.bind(this)),this._dropTarget$.on("drop",this._handleDrop.bind(this)),this._applyOptionsToDnD())},_handleDrop:function(e){e.preventDefault(),e.stopPropagation();var i=[],n=this.model.get("multiSelect"),o=this._options.image_filter,r=e.originalEvent.target.files||e.originalEvent.dataTransfer.files;if(r&&r.length)if(n)i=t.filter(r,function(e){return o.indexOf(e.type)>-1});else{var a=t.find(r,function(e){return o.indexOf(e.type)>-1});a&&i.push(a)}else if(marvel.features.hasFeature("show-published-url-image-picker")){var s=e.originalEvent.dataTransfer&&(e.originalEvent.dataTransfer.getData("URL")||e.originalEvent.dataTransfer.getData("text"));if(s)return void this._handleCopyUrl(s,"dnd")}if(i.length)if(n&&i.length!==r.length){var l=L.formatMessage("imagepicker-drop-confirm-message",{validCount:i.length,totalCount:r.length,supportedType:this._fileTypesString});p.showConfirm(L.getString("imagepicker-copy-url-alert-title"),l,{okText:L.getString("imagepicker-drop-confirm-button-ok"),cancelText:L.getString("imagepicker-drop-confirm-button-cancel")}).then(function(e){e&&this._userLocalHandler(i)}.bind(this))}else this._userLocalHandler(i);else{var d=L.formatMessage("imagepicker-drop-confirm-message-invalid",{supportedType:this._fileTypesString});p.showAlert(L.getString("imagepicker-copy-url-alert-title"),d).done()}P.trackEvent("imageChosen",{imageSource:"Local File DnD",contextData:["projectId"],numFiles:i.length},this._connectedApp+":editor")},_applyOptionsToDnD:function(){var e=[];t.each(this._options.image_filter,function(t){"."===t.charAt(0)?t=t.substring(1):0===t.indexOf("image/")&&(t=t.substring(6)),-1===e.indexOf(t)&&e.push(t)}),this._fileTypesString=e.join(", "),this.model.get("multiSelect")?this.$el.find(".drag-and-drop-explainer-holder").addClass("multiSelect"):this.$el.find(".drag-and-drop-explainer-holder").removeClass("multiSelect")},remove:function(){return this.$el.empty(),this._changingFromMyEditor(),window.marvel.events.off("spark-area-change",this._sparkAreaChange),this},show:function(e){e=e||{},this.model.set("multiSelect",e.multiSelect);var t="vector"==this._options.assetType,i=t?".dooplo-icon-picker":".picker-home";this.isShowing()||window.setTimeout(function(){if(!this.isShowing()){var n=this.$el;n.find(".photo-picker").addClass("showing"),n.find(".sp-picker").removeClass("showing"),n.find(i).addClass("showing"),n.find(".results .selected").removeClass("selected"),marvel.features.hasFeature("google-photos")&&n.find(".google-photos-button-wrapper").removeClass("hide"),this._enableGoogleDrive()&&(T.init(),n.find(".google-drive-button-wrapper").removeClass("hide"));var o=e.context;o&&-1==o.class_name.search(/OnDevice|Camera/)?(n.addClass("no-animate"),n.find(".picker-home").removeClass("showing"),setTimeout(function(){n.removeClass("no-animate")},0),this.jumpTo(o.class_name.replace(/ImagePickerContext$/,""),o.album_id||o.path||o.search_string||o.album_name,o.album_name,e)):(this.$el.find(".picker-bar").addClass("home"),t||this.setHomeLablesText())}}.bind(this),0);var n=this.$el.find(".local-file-input");e.multiSelect?n.attr("multiple","multiple"):n.removeAttr("multiple"),marvel.features.hasFeature("enable-image-picker-dnd")&&this._dropTarget$&&this._applyOptionsToDnD();var o=[];s.ignoreDooploSourceTypes||this._options.dooploSourceTypes&&this._options.dooploSourceTypes.length>0&&(o=this._options.dooploSourceTypes);var r=a.getProfile();r&&(r.filterDooploBitmapServicesForUser(o,this._connectedApp).enabled.length?(this._dooploEnabled=!0,this.$el.find(".search-button").removeClass("hide")):(this._dooploEnabled=!1,this.$el.find(".search-button").addClass("hide")));return this},hide:function(){return this.$el.find(".photo-picker").removeClass("showing"),this._pickerProgress$&&this._hidePickerProgressForPickerClose(),this.lightroomImporterPicker&&this.lightroomImporterPicker.hide(),this.trigger("hide"),this},isShowing:function(){return this.$el.find(".photo-picker").hasClass("showing")},setCallbacks:function(e,t){this._userURLHandler=e,this._userLocalHandler=t},setBeforeUnload:function(e){this._beforeUnload=e},canReloadPage:function(){var e={okToReload:!0};return this.trigger("wantPageReload",e),e.okToReload},getImageFilter:function(){return this._options.imageFilter},requestFileSelect:function(){this.isShowing()&&this.$el.find(".local-file-input").click()},_handleFilterButton:function(){var e=this.model.get("picker").getFilter();marvel._dialogShowing||(this._filterDialogView||(this._filterDialogView=new c({filter:e}),this._filterDialogView.model.on("change:filter",this._handleSetFilter.bind(this))),this._filterDialogView.showOverlay())},_handleSortButton:function(){var e=this.model.get("picker").getSort();marvel._dialogShowing||(this._sortDialogView||(this._sortDialogView=new u({sort:e}),this._sortDialogView.model.on("change:sort",this._handleSetSort.bind(this))),this._sortDialogView.showOverlay())},_handleSetFilter:function(){var e=this.model.get("picker");e.setFilter(this._filterDialogView.model.get("filter")),e.refresh()},_handleSetSort:function(){var e=this.model.get("picker");e.setSort(this._sortDialogView.model.get("sort")),e.refresh()},_useLightroomImporter:function(){return marvel.features.hasFeature("lightroom-importer")&&this._options&&this._options.lightroomImporter},_parsePastedUrl:function(e,i){var n={},o=R.parse(e,!0);if(o.protocol&&"https:"!==o.protocol?n.errorAlertString=L.getString("imagepicker-parsed-url-error-https"):o.hostname&&(-1!=o.hostname.search(/\.adobe\.io$/)?-1!=o.pathname.search(/.*\/rendition\/.*\/format\/|\/assets\//)&&(n.renditionUrl=e):-1!=o.hostname.search(/\.adobeprojectm\.com$|\.adobe\.com$/)?o.query.asset_id&&(n.renditionUrl=e):-1!=o.hostname.search(/\.adobecc\.com$/)?"/api"===o.pathname?n.renditionUrl=e:n.errorAlertString=L.getString("imagepicker-parsed-url-error-adobecc"):"photos.google.com"===o.hostname?this._errorStrForDisallowedGoogleCopyUrl?n.errorAlertString=this._errorStrForDisallowedGoogleCopyUrl:-1==o.pathname.search(/.*\/photo\//)?n.errorAlertString=L.getString("imagepicker-parsed-url-error-google-photo-single"):n.errorAlertString="dnd"===i?L.getString("imagepicker-parsed-url-error-google-photo-dnd"):L.getString("imagepicker-parsed-url-error-google-photo"):-1!=o.hostname.search(/\.googleusercontent\.com$/)?this._errorStrForDisallowedGoogleCopyUrl?n.errorAlertString=this._errorStrForDisallowedGoogleCopyUrl:n.renditionUrl=e:-1!=o.hostname.search(/\.fbcdn\.net$/)?this._errorStrForDisallowedFacebookCopyUrl?n.errorAlertString=this._errorStrForDisallowedFacebookCopyUrl:n.renditionUrl=e:-1!=o.hostname.search(/\.facebook\.com$/)&&(this._errorStrForDisallowedFacebookCopyUrl?n.errorAlertString=this._errorStrForDisallowedFacebookCopyUrl:"/photo.php"!==o.pathname?n.errorAlertString=L.getString("imagepicker-parsed-url-error-facebook-single"):n.errorAlertString="dnd"===i?L.getString("imagepicker-parsed-url-error-facebook-dnd"):L.getString("imagepicker-parsed-url-error-facebook"))),!n.renditionUrl&&!n.errorAlertString){var r=o.pathname.split("/"),a=r.length-1,s="",l=marvel.settings.umbrellaCommunity;n.alias=t.findLast(r,function(e){if(""!==e)return!0;a--}),n.alias&&(a&&"assets"===(s=r[a-1])&&a>1&&(s=r[a-2]),"lrgallery"===s&&(l=s),n.metaDataUrl="https://"+marvel.settings.cps+"/api/v2/"+l+"/assets/"+n.alias)}return n},_setupPickerProgress:function(){this._pickerProgress$=this.$el.find(".picker-progress"),this._pickerProgressContent$=this._pickerProgress$.find(".content")},_showPickerProgress:function(e,t){this.$el.find(".picker-wrapper").addClass("hide"),this._pickerProgress$.removeClass("hide"),this._pickerProgressContent$.text(e||""),this._pickerProgressCancelledCallback=t},_hidePickerProgress:function(){this.$el.find(".picker-wrapper").removeClass("hide"),this._pickerProgress$.addClass("hide"),delete this._pickerProgressCancelledCallback},_hidePickerProgressForPickerClose:function(){this._pickerProgressCancelledCallback&&this._pickerProgressCancelledCallback(),this._hidePickerProgress()},_handleCopyUrlButton:function(e){this._handleCopyUrl(this.copyUrlInput$.val(),"field")},_handleCopyUrl:function(t,i){var o,r=this._parsePastedUrl(t,i),a=n.defer(),s=!1;r.metaDataUrl?(this._showPickerProgress(L.formatMessage("imagepicker-copy-url-processing-uri",{projectUri:t}),function(){s=!0}),e.ajax({url:r.metaDataUrl,type:"GET",headers:{"X-Api-Key":marvel.settings.cpkey},success:function(e,t,i){a.resolve(e)},error:function(e){o=404===e.status?L.formatMessage("imagepicker-copy-url-error-not-found",{projectUri:t}):L.formatMessage("imagepicker-copy-url-error-load",{projectUri:t}),p.showAlert(L.getString("imagepicker-copy-url-alert-title"),o).then(function(){a.reject(e)})}})):r.renditionUrl?(this._showPickerProgress(L.formatMessage("imagepicker-copy-url-processing"),function(){s=!0}),a.resolve(r)):r.errorAlertString?p.showAlert(L.getString("imagepicker-copy-url-alert-title"),r.errorAlertString).then(function(){a.reject()}):(o=L.formatMessage("imagepicker-copy-url-error-url",{projectUri:t}),p.showAlert(L.getString("imagepicker-copy-url-alert-title"),o).then(function(){a.reject()})),a.promise.then(function(e){if(this.isShowing()&&!s){var t;if(e.renditionUrl)t=e.renditionUrl;else{var i=0;e.category&&("lucas"===e.category.id?i=1440:"voices"===e.category.id?i=1280:"theos"===e.category.id&&(i=1600)),t=e._links.rendition.href.replace("{format}","jpg").replace("{dimension}","width").replace("{size}",i)}F.convertUrlToBlob(t).then(function(e){s||(this._hidePickerProgress(),this._userLocalHandler([e]))}.bind(this),function(e){s||(this._hidePickerProgress(),p.showAlert(L.getString("imagepicker-copy-url-alert-title"),L.getString("imagepicker-copy-url-processing-error")).done())}.bind(this)).done()}}.bind(this),function(e){s||this._hidePickerProgress()}.bind(this)).done()},_setupCopyUrl:function(){if(this._userLocalHandler){var t=this.$el.find(".copy-url-wrapper"),i=t.find(".copy-url-button");this.copyUrlInput$=t.find(".copy-url-input"),this.copyUrlInput$.on("keydown",function(e){13===e.keyCode&&this._handleCopyUrlButton(e)}.bind(this)),this.copyUrlProgress$=this.$el.find(".copy-url-progress"),i.on("click",function(e){this._handleCopyUrlButton(e)}.bind(this)),this.copyUrlInput$.on("click",function(t){e(this).select()}),t.removeClass("hide"),marvel.features.hasFeature("show-published-url-image-picker-allow-facebook")||(marvel.features.hasFeature("show-facebook-image-picker")?this._errorStrForDisallowedFacebookCopyUrl=L.getString("imagepicker-copy-url-error-facebook-picker"):this._errorStrForDisallowedFacebookCopyUrl=L.getString("imagepicker-copy-url-error-facebook")),marvel.features.hasFeature("show-published-url-image-picker-allow-google")||(this._errorStrForDisallowedGoogleCopyUrl=L.getString("imagepicker-copy-url-error-google"))}}});function E(e){return a.getProfile()?a.getProfile().canShowNonDooploImageSourceForUser("stock",e):null}return M.getStockAssetDetailUrl=function(e){return I.getStockAssetDetailsUrl(e.image_id)},M.licenseStockAsset=function(e){console.log("Called licenseStockAsset for id "+e.image_id);var i=n.defer(),o={};return p.showWaitView(L.getString("imagepicker-stock-retrieving-wait"),"",{minHeight:b.getMinHeightForConfirms()}),I.getLicensesAvailable().then(function(i){return t.assign(o,{"licenses-available":i.numLicenses,purchase_url:i.purchaseUrl,referToStockSite:i.requiresCheckout,notAllowedToPurchase:i.notAllowedToPurchase,purchaseMessage:i.purchaseMessage}),I.getItemInfo(e.image_id)}).then(function(e){o.creator_name=e.creator_name,o.image_title=e.title,o.details_url=e.details_url,o.license_type=e.is_licensed,o.premium_level_id=e.premium_level_id,o.image_id=e.id,(new b).showLicensingFlow(o).then(function(t){t.info=d.licenseInfoFromData(e,t.licenseType),i.resolve(t)}.bind(this),function(e,t){"cancel"!==e?(marvel.logger.error("showLicensingFlow failed",e),i.reject("licensing failed",t)):i.reject("licensing cancelled")})}).fail(function(e){p.showAlert(L.getString("imagepicker-stock-retrieving-error"),L.getString("imagepicker-stock-retrieving-error-desc")),marvel.logger.error("licensing failed",e),i.reject("not licensed",e)}),i.promise},M.getStockLicenseInfo=function(e){return I.getItemInfo(e)},M.isLicenseForStock=function(e){return["royalty_free","royalty_free_standard","royalty_free_extended"].indexOf(e.type)>-1},M.updateAttributeViewForLicensing=function(e){var t=e.attributionDialog;if(t.$el.hasClass("auto-height")||(t.$el.addClass("auto-height"),M.isLicenseForStock(e.licenseInfo)||t.contentModified()),e.licenseInfo&&"unsplash"===e.licenseInfo.type){var i=t.$el.find(".license_type");if(i.length){B.licenseTypeMap.unsplash;i.text(L.getString("imagepicker-unsplash-license"))}}if(!M.isLicenseForStock(e.licenseInfo))return!1;var n=t.$el.find(".original_source"),o=t.$el.find(".license_wrapper"),r=e.licenseInfo,a={image_id:r.image_id};return t.licenseHandlerObjects||(t.licenseHandlerObjects={}),t.on("cancel",function(){this.licenseHandlerObjects&&(this.licenseHandlerObjects.$buttonWrapper&&this.licenseHandlerObjects.$buttonWrapper.off("click"),this.licenseHandlerObjects.$originalSource.off("click"),this.licenseHandlerObjects=null)}),o.removeClass("hide"),t.$el.find(".copyright_info").addClass("hide"),"royalty_free"===r.type?(o.find(".license_photo_button").on("click",function(){var t={image_id:r.image_id,owner:r.owner,photo_name:r.photo_name,source_name:r.source_name,license_type:r.type};e.licensingCallback&&e.licensingCallback("licensing"),M.licenseStockAsset(t).then(function(t){e.licensingCallback("licensed",t)},function(t){e.licensingCallback("licensing-rejected",t)})}.bind(this)).removeClass("hide"),t.licenseHandlerObjects.$buttonWrapper=o):o.find(".license_photo_button").addClass("hide"),n.addClass("disabled"),n.on("click",function(e){if(n.hasClass("disabled"))e.preventDefault();else{n.addClass("disabled");var t={image_id:r.image_id};M.getStockAssetDetailUrl(t).then(function(e){n.attr("href",e),n.removeClass("disabled")}).done()}}.bind(this)),M.getStockAssetDetailUrl(a).then(function(e){n.attr("href",e).removeClass("disabled")}).done(),t.licenseHandlerObjects.$originalSource=n,e.ignoreContentModified||t.contentModified(),!0},M.displayAttributionDialog=function(t,i){var o,r,a=i.editorEl$.find(".attribution-dialog-overlay");if(a.length?r=a.data("attribution-dialog-overlay"):(a=e('<div class="attribution-dialog-overlay hide"></div>'),i.editorEl$.append(a)),marvel._dialogShowing&&(!r||!r.isShowing()))return n.reject("other dialog already showing");var s=n.defer();if(r&&r.$el.parent().length||(r=new B({el:a}),a.data("attribution-dialog-overlay",r),a.addClass(i.appSpecificClass||"generic")),i.calcLocationFromIcon){var l=i.icon$[0].getBoundingClientRect(),d=l.top-i.editorEl$.offset().top;o={x:l.left+l.width/2,y:d+l.height/2,left:l.left,top:d,width:l.width,height:l.height}}else o=i.location;var h={location:o,updateAttributeViewForLicensing:M.updateAttributeViewForLicensing,info:t,options:i,imagePickerView:this};return r.showOverlayWithData(h,s),s.promise},M.getServiceSource=function(e){var t=e.source.toLowerCase();return"creative cloud"===t?t="cc":"adobe stock"===t&&(t="AdobeStock"),t},M}.apply(t,n))||(e.exports=o)},523:function(e,t,i){var n,o;n=[i(0),i(344)],void 0===(o=function(e,t){var i=function(){};return e.extend(i.prototype,{bind:function(t,i,n){return e(this).on(t,i,n)},unbind:function(t,i){return e(this).off(t,i)},on:function(t,i,n){return e(this).on(t,i,n)},off:function(t,i){return e(this).off(t,i)},trigger:function(t,i){var n=e.Event(t);return e(this).trigger(n,i),n}}),t.EventDispatcher=i,i}.apply(t,n))||(e.exports=o)},526:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(213),i(251),i(5),i(3)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s="https://"+window.location.host,l=s+"/lr_files";function d(e){this.items=[],this.received=0,this.filter="all"}function h(e){var t,i=e.replace(/^while \(1\) \{\}/,"");try{t=JSON.parse(i)}catch(e){console.warn("LR json data parse failed")}return t}function c(e){n.prototype._init.call(this,e)}return t.extend(d.prototype,o.prototype,{getMetaData:function(e,i){var n=[],o=e.path,a=e.success,d=e.error;if(this.nextHref=i?this.nextHref:null,i&&!this.nextHref&&g)g("no more assets");else{var u=function(e){e.assets&&e.assets.length&&(n=t.map(e.assets,function(e){return new c(e)}),this.received+=n.length)}.bind(this),p=function(){var e,t={all:"pick%3Bunflagged%3Breject",picked:"pick","picked-unflagged":"pick%3Bunflagged"},c=this.options.sort?{"capture-descending":"captured_before=9999-01-01T00:00:00","capture-ascending":"captured_after=-0001-12-31T23:59:59",custom:"order_after=-"}[this.options.sort]:"capture-ascending",p=this.options.filter?t[this.options.filter]:t.all,f="?limit="+(this.options.limit||"20");marvel.features.hasFeature("lightroom-picker-filters")&&(f=f+"&flag="+p+"&"+c),e=i?s+"/lr_files"+this.nextHref:l+o+"/assets"+f,r.ajax(e,{dataType:"text"}).done(function(e,t,i){var o=h(e);o?(u(o),this.options.sort&&"capture-descending"===this.options.sort?(this.nextHref=o.links&&o.links.prev?o.links.prev.href:null,n.reverse()):this.nextHref=o.links&&o.links.next?o.links.next.href:null,n.data={page:1,pages:1},a&&a(n,"success",i)):d&&d("JSON parse failed")}.bind(this)).fail(g.bind(this))}.bind(this);o&&"/"!==o||i?(this.options=e,p()):this._getAlbumsUrl().then(function(o){this.options=e,this.received=i?this.received:0;var l=this.options.limit?"?limit="+this.options.limit:"",u=s+"/lr_files"+(i?this.nextHref:o+l);r.getAccessToken().then(function(e){r.ajax(u,{dataType:"text"}).done(function(e,i,o){var r=h(e);r?(r.albums&&r.albums.length&&(n=t.map(r.albums,function(e){return new c(e)}.bind(this)),this.received+=n.length,n.data={page:1,pages:1}),a&&a(n,"success",o)):d&&d("JSON parse failed")}.bind(this)).fail(g.bind(this))}.bind(this))}.bind(this),function(){d("fail")})}function g(e,t,i){console.warn("Lightroom fail ",t,e,i),n.data={page:1,pages:1},d&&d("failure")}},getNextMetaData:function(){return this.getMetaData(this.options,!0)},haveMoreMetaData:function(){return!!this.nextHref},_getAlbumsUrl:function(){var e=a.defer(),t=this;if(this.albumsHref)e.resolve(this.albumsHref);else{var i=s+"/lr_files/v1.0/catalogs?subtype=lightroom%3BX-lightroom";r.ajax(i,{beforeSend:function(e){return e.setRequestHeader("X-api-key",r.apiKey),!0},dataType:"text"}).done(function(i,n,o){var r;i=i.replace(/^while \(1\) \{\}/,"");try{var a=JSON.parse(i);a&&a.catalogs&&a.catalogs.length?(r=t.albumsHref=a.catalogs[0].links["/rels/albums"].href||a.catalogs[0].links.self.href+"/albums",e.resolve(r)):e.reject("no catalog found")}catch(t){e.reject(t)}}).fail(function(e,t,i){console.warn("Failed to get catalog",t)})}return e.promise},getAlbumCount:function(e){var t=a.defer(),i=l+e+"/assets/count";return r.ajax(i,{beforeSend:function(e){return e.setRequestHeader("X-api-key",r.apiKey),!0},dataType:"text"}).done(function(e,i,n){var o;e=e.replace(/^while \(1\) \{\}/,"");try{var r=JSON.parse(e);r&&r.total_count?(o=r.total_count,t.resolve({albumCount:o})):t.reject("no album count")}catch(e){t.reject(e)}}).fail(function(e,i,n){console.warn("Failed to get album count",i),t.reject(n)}),t.promise}}),t.extend(c.prototype,n.prototype,{_parseData:function(){var e,t,i=this.data;this.links.preview.href="",this.isDir=/\:album\:[^\:]+$/.test(i.id),this.isDir?(this.links.folder={},this.links.folder.path=i.links.self.href,this.links.folder.filename=i.name,this.cover=i.cover,this.has_cover=!0):(e=i.links,t=t||(e["/rels/rendition_type/2048"]?e["/rels/rendition_type/2048"].href:void 0),this.links.thumb.href=e["/rels/rendition_type/thumbnail2x"]?e["/rels/rendition_type/thumbnail2x"].href:t,this.links.thumb.href=l+this.links.thumb.href,this.links.thumb.filename=i.name,this.links.preview.href=t,this.links.preview.href=l+t,this.links.preview.filename=i.name,this.links.original.href=l+t,this.links.original.filename=i.name,this.links.original.width=i.payload.width,this.links.original.height=i.payload.height,this.aspect={width:i.payload.width,height:i.payload.height},this.caption=i.payload.caption)},getMimeType:function(){return"image/"+this.data.subtype},hasCover:function(){return this.has_cover},getCover:function(){var e,t=a.defer(),i=s+"/lr_files",n=this.data;return this.hasCover()?this.cover&&this.cover.links&&this.cover.links["/rels/rendition_type/thumbnail2x"]?t.resolve(i+this.cover.links["/rels/rendition_type/thumbnail2x"].href):(e=i+n.links["/rels/album_assets"].href+"?limit=1&subtype=jpeg;png",r.ajax(e,{dataType:"text"}).done(function(n,o,r){var a,s=h(n);s&&s.assets&&s.assets.length?(a=s.assets[0],e=i+a.links["/rels/rendition_type/thumbnail2x"].href,t.resolve(e)):t.reject("no assets")}).fail(function(){t.reject("not available")})):t.reject("no cover available"),t.promise},canSetFilter:function(){return!0}}),d}.apply(t,n))||(e.exports=o)},530:function(e,t,i){var n,o;n=[i(0),i(2),i(369),i(419),i(1),i(8),i(3),i(98),i(4),i(425),i(346),i(6),i(62)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h,c,u){"use strict";function p(e,t,i){this._init(e,t,i)}return e.extend(p.prototype,h.prototype,{_init:function(t,i,n){this._options={},this._isFlickrAllowed=!1,this._isFlickrEnabled=!1,this._isBingAllowed=!1,this._switchedIntoBing=!1,e.extend(this._options,{image_filter:n.imageFilter.extensionsWithoutDot.concat(n.imageFilter.types),imageFilter:n.imageFilter,startPage:n.startPage},n),h.prototype._init.call(this,t,i),this._isBound||(this._isBound=!0,this._handleResize=this._handleResize.bind(this),this._handleSearchTextChange=this._handleSearchTextChange.bind(this),this._handleDooploSearch=this._handleDooploSearch.bind(this),this._handleSearchTextKeyDown=this._handleSearchTextKeyDown.bind(this),this._handleScroll=this._handleScroll.bind(this),this._handleSearchTextFocus=this._handleSearchTextFocus.bind(this),this.clearFilterSettingsOnEditorLoad=this.clearFilterSettingsOnEditorLoad.bind(this)),this.results$=this.$ele.find("#results-without-bing"),this._registerEvents(),this._setHintTextForFilters(),this.setupSearchDropdown()},_registerEvents:function(){if(!this._eventsRegistered){var t=this.$ele.find(".dooploSearchEntry .search-text");t.on("focus",this._handleSearchTextFocus),t.on("input",this._handleSearchTextChange),t.on("keydown",this._handleSearchTextKeyDown),this.$ele.find(".results").on("scroll",this._handleScroll),this.$ele.find(".execute-search-button").on("vclick",this._handleDooploSearch),e(window).on("resize",this._handleResize),this._eventsRegistered=!0}},_deregisterEvents:function(){if(this._eventsRegistered){var t=this.$ele.find(".dooploSearchEntry .search-text");t.off("input",this._handleSearchTextChange),t.off("keydown",this._handleSearchTextKeyDown),this.$ele.find(".results").off("scroll",this._handleScroll),this.$ele.find(".execute-search-button").off("vclick",this._handleDooploSearch),e(window).off("resize",this._handleResize),this._eventsRegistered=!1}},handleChangingToEditor:function(e){this._registerEvents(),window.marvel.features.hasFeature("dooplo-service-persistant-filters")||this.clearFilterSettingsOnEditorLoad()},handleChangingFromEditor:function(e){this._deregisterEvents()},_needsTitleWorkaround:function(e){return"Unsplash"===e.data.source.name&&"untitled image"===e.data.title},_comesFromBing:function(e){return"bing"===e.data.source.name},_handleThumbClick:function(t){var i=e(t.target).data("item");this.$ele.find(".results .selected").removeClass("selected"),e(t.target).parent().addClass("selected"),this._needsTitleWorkaround(i)?d.getAssetInfo(i.data.id).then(function(e){e.title&&(i.data.title=e.title),this._userCallback(i)}.bind(this),function(e){this._userCallback(i)}.bind(this)):(this._comesFromBing(i)&&(i.data.owner={name:"Unknown"}),this._userCallback(i))},_getComboSourcesString:function(e){var i="";if((e=t.compact(e)).length&&(i=e[0],e.length>1))if(2===e.length)i+=" & "+e[1];else{for(var n=1;n<e.length-1;n++)i+=", "+e[n];i+=", & "+e[e.length-1]}return i},_getAllowedSourcesForCurrentAssetType:function(){var e,t=[];if(c.ignoreDooploSourceTypes||this._options.dooploSourceTypes&&this._options.dooploSourceTypes.length>0&&(t=this._options.dooploSourceTypes),this._options.assetType&&"vector"===this._options.assetType)e=["The Noun Project"];else{var i=s.getProfile().filterDooploBitmapServicesForUser(t,this._connectedApp);this._isFlickrAllowed=-1!==i.show.indexOf("flickr"),this._isFlickrEnabled=-1!==i.enabled.indexOf("flickr"),this._isBingAllowed=-1!==i.show.indexOf("bing"),e=i.enabled}return e||[]},_useBingOnly:function(){var e=s.getProfile().getSetting("show-user-flag-image-source-dooplo-bing"),i=this._getCurrentSearchSettings().sourceFilters,n=t.filter(i,{isSelected:!0}),o=i.bing&&i.bing.isSelected&&1===n.length,r=i.bing&&!i.bing.isSelected,a=this._options.assetType&&"vector"===this._options.assetType,l=this.page>2||this.resultsTotal>0&&this.resultsTotal<50;return!a&&!r&&(o||l&&e&&this._isBingAllowed&&1!==n.length)},_switchToBing:function(){this._switchedIntoBing=!0,this.results$=this.$ele.find("#results-bing-only"),this._sendAnalyticsEvent("bingSearchResultsShown"),this._makeDooploRequest(this.subject,1,this.results$,["bing"])},_setHintTextForFilters:function(){var e,i=this._getAllowedSourcesForCurrentAssetType(),n=this._getCurrentSearchSettings().sourceFilters,o=[],a=0;t.each(i,function(e){var t=n[e];if(!t||t.isSelected){var i=d.SOURCE_CREDIT_INFOS[e.toLowerCase()];o[i.creditOrderIndex]=i.sourcesName,a++}}),e=1==a||a!==i.length?"Search "+this._getComboSourcesString(o)+"...":r.getString("imagepicker-allphotos-search"),this.$ele.find(".dooploSearchEntry .search-text-hint").text(e)},_handleSearchTextFocus:function(){this.$ele.parents().scrollLeft(0)},_handleSearchTextChange:function(e){var t=this.$ele.find(".dooploSearchEntry .search-text").val(),i=this.$ele.find(".dooploSearchEntry .search-text-hint");i.removeClass("showing"),t&&0!==t.length||i.addClass("showing")},_handleSearchTextKeyDown:function(e){if(13===e.keyCode)this._handleDooploSearch();else if(27===e.keyCode){var t=this.$ele.find(".dooploSearchEntry .search-text");return setTimeout(function(){t.val(""),this._handleDooploSearch(),this._handleSearchTextChange()}.bind(this),0),e.stopPropagation(),0}},searchNextSet:function(){this._switchedIntoBing||!this._useBingOnly()?this.request.searchNextSet():this._switchToBing()},updateInfoMessage:function(){var e=this.results$.find(".left"),t=this.$ele.find(".search-text").val();e.children().length||t.length?this.showInfoMessage(!1):this.showInfoMessage(!0)},showInfoMessage:function(e){var t=this.$ele.find(".search-info");e?t.removeClass("hide"):t.addClass("hide")},showImageSourcesMessage:function(e,i){var n;if((n=(i=i||this.results$).find(".search-sources")).length){var o=[];if(t.each(e,function(e){var t,i=e.source;i&&i.sourcesName&&(t=i.link?'<a class="search-source-link" target="_blank" href="'+i.link+'">'+i.sourcesName+"</a>":i.sourcesName,o[i.creditOrderIndex]=t)}),(o=t.compact(o)).length){var r="Results from "+this._getComboSourcesString(o);n.removeClass("hide"),n.html(r)}else n.addClass("hide")}},getEnabledSearchSources:function(){var e=this._getAllowedSourcesForCurrentAssetType(),i=this._getCurrentSearchSettings().sourceFilters,n=t.filter(e,function(e){var t=i[e];return!t||t.isSelected});return n=this._useBingOnly()?["bing"]:t.pull(n,"bing")},clearFilterSettingsOnEditorLoad:function(){this.setupSearchDropdown(),this._cachedDooploSearchSettings=null},_saveCurrentSearchSettings:function(e){if(window.marvel.features.hasFeature("dooplo-service-persistant-filters")&&(window._cachedDooploSearchSettings=e,window.localStorage))try{window.localStorage.setItem("spark-dooplo-user-settings",JSON.stringify(e))}catch(e){window.marvel.logger.warn("could not save search settings",e)}this._cachedDooploSearchSettings=e},_getCurrentSearchSettings:function(){if(!this._cachedDooploSearchSettings)if(window.marvel.features.hasFeature("dooplo-service-persistant-filters")){if(!window._cachedDooploSearchSettings){var e;if(window.localStorage){var t=window.localStorage.getItem("spark-dooplo-user-settings");if(t)try{e=JSON.parse(t)}catch(e){window.marvel.logger.error("error parsing cached dooplo settings:"+e,{settingsString:t})}}window._cachedDooploSearchSettings=e||{sourceFilters:{}}}this._cachedDooploSearchSettings=window._cachedDooploSearchSettings}else this._cachedDooploSearchSettings={sourceFilters:{}};return this._cachedDooploSearchSettings},searchDropdownOnChangeCallback:function(e,i){var n=this._getCurrentSearchSettings(),o=n.sourceFilters,r=!i.length||i.length&&"all"===i[0];t.each(this.filteredSourcesFromUserSettings,function(e){var t=o[e];t||(t={},o[e]=t),t.isSelected=r||-1!==i.indexOf(e)}.bind(this)),this._saveCurrentSearchSettings(n),this._setHintTextForFilters()},setupSearchDropdown:function(){if(this.filteredSourcesFromUserSettings=this._getAllowedSourcesForCurrentAssetType(),!(this.filteredSourcesFromUserSettings.length<2)){var e=this._getCurrentSearchSettings().sourceFilters;if(!this.searchDropdown){var i={onchangeCallback:this.searchDropdownOnChangeCallback.bind(this),multiple:!0,widthSetByStyle:!0,elemHeightSetByStyle:!0,checkmarkStyle:"use-checkbox",buttonDisplayControlledByCaller:!0,alignTarget$:this.$ele.find(".dooplo-search-dropdown-aligner"),analytics:{dropdownName:"dooploSearch",pageName:l.getProductName()+":editor"},dropdownShowingCallback:function(e){var t=this.$ele.find(".dooploSearchEntry .search-text-wrapper");e?(t.addClass("showing-dropdown"),t.one("click.sharetextdropdownclose",function(e){this.searchDropdown.closeAndApply()}.bind(this))):(t.removeClass("showing-dropdown"),t.off("click.sharetextdropdownclose"))}.bind(this)};this.searchDropdown=new u(this.$ele.find(".dooplo-search-dropdown"),i,this)}var n=[{name:r.getString("imagepicker-all-photos"),id:"all",isAllItem:!0}],o=0;if(t.each(this.filteredSourcesFromUserSettings,function(t){var i=t.toLowerCase(),r=d.SOURCE_CREDIT_INFOS[i],a=e[t],s=!a||a.isSelected;s&&o++,n.push({name:r.sourcesName,id:t,isSelected:s})}),o===this.filteredSourcesFromUserSettings.length){n[0].isSelected=!0;for(var a=1;a<n.length;a++)n[a].isSelected=!1}else n[0].isSelected=!1;this.searchDropdown.renderItemsMultiple(n)}},show:function(e){this.$ele.find(".search-failure").addClass("hide"),h.prototype.show.call(this);window.setTimeout(function(){var t=this.$ele.find(".dooploSearchEntry .search-text");this.updateInfoMessage(),t.focus(),this.$ele.parents().scrollLeft(0),e&&e!=this.getSearchText()?(this.$ele.find(".dooploSearchEntry .search-text-hint").removeClass("showing"),t.val(e),this._handleDooploSearch()):this.getSearchText()?this.$ele.find(".dooploSearchEntry .search-text-hint").removeClass("showing"):this.$ele.find(".dooploSearchEntry .search-text-hint").addClass("showing")}.bind(this),500)},_makeDooploRequest:function(e,t,n,o){n=n||this.$ele.find("#results-without-bing"),this.preloadPagesWhenLoaderEmpty=!1,this.$ele.find(".search-failure").addClass("hide"),this.$ele.find(".results .flickr-more-results").addClass("hide"),this.loader?(this.loader.stop(),this.loader.clearQueue(),this.hideMoreToCome()):(this.loader=new i({numAsyncRequestsAllowed:20,crossOrigin:!!this._options.crossOriginThumbnails&&"anonymous"}),this.loader.bind("wp-image-loader-empty",function(e){this.requestOutstanding=!1,this.preloadPagesWhenLoaderEmpty&&this._scrolledFarEnough()&&this.hasMore()&&(this.requestOutstanding=!0,this.showMoreToCome(),this.searchNextSet()),this.requestOutstanding?this._isFlickrAllowed&&!this._isFlickrEnabled&&(this.$ele.find(".results .flickr-more-results").removeClass("hide"),this._sendAnalyticsEvent("dooploSearchSuggestFlickrMoreResultsShown")):this.hideMoreToCome()}.bind(this))),this.preloadPagesWhenLoaderEmpty=!0;var r=this.request;r.resultsTarget$=n,this.requestOutstanding=!0,t=t||1,this.subject=e;var a={query:e,page:t,success:this._handleRequestSuccess.bind(this),error:function(e,t,i){this.hideMoreToCome(),this._sendAnalyticsEvent("dooploSearchErroredOut"),console.log("REQUEST ERROR on Search for Photos in Dooplo:",i),console.log("XHR text for Dooplo error is:",JSON.stringify(e)),this.$ele.find(".search-progress").addClass("hide"),this.$ele.find(".search-failure").removeClass("hide"),this.$ele.find(".search-failure .error-msg").text(e.responseJSON&&e.responseJSON.message?e.responseJSON.message:"unknown")}.bind(this)};this._options.assetType&&"vector"===this._options.assetType?(a.asset_type=this._options.assetType,a.image_min_width=0):(a.image_filter=this._options.image_filter,a.imageFilter=this._options.imageFilter),this._options.itemsPerPage&&(a.size=this._options.itemsPerPage),this._options.startPage&&(a.startPage=this._options.startPage);var s=o||this.getEnabledSearchSources();a.source=s,this._currentSourcesResults={},this._currentSourceFilters=s,this._currentSearchTerm=e,r.search(a)},_handleRequestSuccess:function(e,t,i){var n=this.request.resultsTarget$,o="vector"!==this._options.assetType,r=!!this._options.crossOriginThumbnails;if(n.removeClass("hide"),n.find(".privacy-sources").removeClass("hide"),n.find(".no-results").addClass("hide"),this.$ele.find(".search-progress").addClass("hide"),this.showMoreToCome(),this.page=e.data.page,this.resultsTotal=e.data.total,e.getLength()){var a,s=e.at(0);for(a=0;a<e.getLength();a++){if(s=e.at(a),this.items.push(s),s.data.title=s.data.title||"untitled image",this._currentSourcesResults){var l=s.data.source.name.toLowerCase(),h=s.data.sourceLabel=d.SOURCE_CREDIT_INFOS[l];h&&(this._currentSourcesResults[l]?this._currentSourcesResults[l].numImages++:this._currentSourcesResults[l]={source:h,numImages:1})}this._addThumbnail(s.getThumbURL(),n,s,s.getAspect(),o,r)}this.loader.start(),this.showImageSourcesMessage(this._currentSourcesResults,n),this._sendAnalyticsEvent("dooploSearchResultsShown")}else{var c=this.getSearchText();if(this.hideMoreToCome(),this._isBingAllowed&&!this._switchedIntoBing&&c)return 0===this.items.length&&this.$ele.find("#results-without-bing").addClass("hide"),this.request=new d,void this._switchToBing();this.request.getLength()||(this.$ele.find(".no-results").removeClass("hide"),this.$ele.find("#results-bing-only").addClass("hide"),this.$ele.find(".privacy-sources").addClass("hide"),this._isFlickrAllowed&&!this._isFlickrEnabled?(this.$ele.find(".no-results-no-suggest-flickr").addClass("hide"),this._sendAnalyticsEvent("dooploSearchSuggestAddingFlickrShown")):this.$ele.find(".no-results-suggest-flickr").addClass("hide"),this.showInfoMessage(!1),this._sendAnalyticsEvent("dooploSearchReturnedZeroResults"))}},hasMore:function(){return this.request&&!this.request.reachedEnd()},getSearchText:function(){return this.$ele.find(".search-text").val()},_sendAnalyticsEvent:function(e){var t=l.getProductName()+":editor",i={searchTerm:this._currentSearchTerm||"",filter:this._currentSourceFilters||""};l.trackEvent(e,i,t)},_handleDooploSearch:function(){var e,t=this.$ele.find(".search-text").val(),i=r.formatMessage("imagepicker-searching-for-subject",{subject:t});return this.loader&&(this.loader.stop(),this.loader.clearQueue()),this.request=new d,this._switchedIntoBing=!1,this.page=this._options.startPage||1,this.resultsTotal=0,this._clear(),this.count=0,t.length&&(this.$ele.find(".search-progress").removeClass("hide"),this.$ele.find(".search-progress .content").text(i)),this.$ele.find(".no-results").addClass("hide"),this.$ele.find("#results-bing-only").addClass("hide"),this.$ele.find("#results-without-bing").addClass("hide"),this.showImageSourcesMessage(),t?(e=this._useBingOnly()?this.$ele.find("#results-bing-only"):this._options.assetType&&"vector"===this._options.assetType?this.$ele.find(".results"):this.$ele.find("#results-without-bing"),this.showInfoMessage(!1),this._makeDooploRequest(t,this.page,e)):this.hideMoreToCome(),!1},_scrolledFarEnough:function(){var e=this.$ele.find(".results"),t=e[0].scrollTop,i=!1;return 2*e.height()+t>e[0].scrollHeight&&(i=!0),i},showMoreToCome:function(){this.request.result&&this.$rootPicker.find(".more-to-come").addClass("showing")}}),p}.apply(t,n))||(e.exports=o)},531:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(369),i(8),i(95),i(5),i(346),i(6)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d){"use strict";function h(e,t,i){this._init(e,t,i)}return h.licenseInfoFromData=function(e,t){var i=t||e.is_licensed||e.license;return{title:e.title,owner:{name:e.creator_name},source:{name:"Adobe Stock",url:""},license:{short_name:i?{standard:"royalty_free_standard",extended:"royalty_free_extended",royalty_free_extended:"royalty_free_extended",royalty_free_standard:"royalty_free_standard",royalty_free:"royalty_free"}[i.toLowerCase()]:"royalty_free"},image_id:e.id}},e.extend(h.prototype,l.prototype,{_init:function(t,i,n){this._options={},e.extend(this._options,{image_filter:["jpg","jpeg","png","image/jpeg","image/png"]},n),l.prototype._init.call(this,t,i);var o=this.$ele.find(".stockSearchEntry .search-text");o.on("input",this._handleSearchTextChange.bind(this)),o.on("keydown",this._handleSearchTextKeyDown.bind(this)),this.$ele.find(".results").on("scroll",this._handleScroll.bind(this)),e(window).on("resize",this._handleResize.bind(this)),this.$ele.find(".execute-search-button").on("vclick",this._handleAdobeStockSearch.bind(this)),this.$ele.find(".stockShowSearchButton").on("vclick",this._handleShowSearchButton.bind(this)),this.$ele.find(".stockShowLicenseHistoryButton").on("vclick",this._handleShowLicenseHistoryButton.bind(this))},_handleThumbClick:function(t){var i=e(t.target).data("item"),n=this,o=i.data.id;this.$ele.find(".results .selected").removeClass("selected"),e(t.target).parent().addClass("selected");var r=a.apiHost+a.itemLicensePath,l={content_id:o};i.licenseInfo=h.licenseInfoFromData(i.data,i.is_licensed),i.is_licensed&&!i.links.licensed?s.ajax({url:r,data:l,beforeSend:function(e){return e.setRequestHeader("X-api-key",s.apiKey),e.setRequestHeader("X-Product",s.apiKey),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done(function(e,t,r){var a=e.contents[o];i.links.licensed=a.purchase_details,n._userCallback(i)}).fail(function(){}.bind(this)):this._userCallback(i)},_handleSearchTextChange:function(e){var t=this.$ele.find(".stockSearchEntry .search-text").val(),i=this.$ele.find(".stockSearchEntry .search-text-hint");i.removeClass("showing"),t&&0!==t.length||i.addClass("showing")},_handleSearchTextKeyDown:function(e){if(13===e.keyCode)this._handleAdobeStockSearch(),e.stopPropagation();else if(27===e.keyCode){var t=this.$ele.find(".stockSearchEntry .search-text");return setTimeout(function(){t.val(""),this._handleAdobeStockSearch(),this._handleSearchTextChange()}.bind(this),0),e.stopPropagation(),0}},searchNextSet:function(){this.request.searchNextSet()},updateInfoMessage:function(){var e=this.$ele.find(".results").find(".left");this.$ele.find(".search-info");e.children().length?this.showInfoMessage(!1):this.showInfoMessage(!0)},showInfoMessage:function(e){var t=this.$ele.find(".search-info");e?(t.removeClass("hide"),this.$ele.find(".stockLicenses").addClass("fromNoSearch")):(t.addClass("hide"),this.$ele.find(".stockLicenses").removeClass("fromNoSearch"))},_lastRequestType:function(){return a.getRequestType(this.request)},show:function(e){var t,i=this._lastRequestType(),n=this._currentType||this._lastRequestType();if(this.$ele.find(".search-failure").addClass("hide"),l.prototype.show.call(this),e===a.licenseHistorySearchQuery?t=!0:e||"history"!==n||(t=!0),t)return this._updateLicenseCount(),this.updateInfoMessage(),void this._setShowTypeTab("history",{triggerSearch:a.licenseHistorySearchQuery});window.setTimeout(function(){this._updateLicenseCount();var t,o=this.$ele.find(".stockSearchEntry .search-text");if(this.updateInfoMessage(),o.focus(),e)t="history"===n?e:e!==this._getSearchText()&&e,this.$ele.find(".stockSearchEntry .search-text-hint").removeClass("showing"),o.val(e),this._setShowTypeTab("search",{triggerSearch:t});else{var r={};this._getSearchText()?this.$ele.find(".stockSearchEntry .search-text-hint").removeClass("showing"):this.$ele.find(".stockSearchEntry .search-text-hint").addClass("showing"),r.triggerSearch="history"===i||"search"===i&&this._lastRequestSubject!==this._getSearchText(),this._setShowTypeTab("search",r)}}.bind(this),500)},_updateLicenseCount:function(){var e=a.apiHost+a.profilePath,t=this;this.$ele.find(".stockLicenses").addClass("calculating"),s.ajax({url:e,beforeSend:function(e){return e.setRequestHeader("X-api-key",s.apiKey),e.setRequestHeader("X-Product",s.apiKey),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done(function(e,i,n){var o=t.$ele.find(".stockLicenses").removeClass("calculating");if(e.purchase_options.requires_checkout||"not_possible"===e.purchase_options.state)o.addClass("noAccount");else{var r=e.available_entitlement?e.available_entitlement.quota:0;o.find(".count").text(r),o.removeClass("noAccount")}}).fail(function(){}.bind(this))},_makeAdobeStockRequest:function(e,t){this.preloadPagesWhenLoaderEmpty=!1,this.$ele.find(".search-failure").addClass("hide"),this._lastRequestSubject=e,this.loader?(this.loader.stop(),this.loader.clearQueue(),this.hideMoreToCome()):(this.loader=new o({numAsyncRequestsAllowed:20,crossOrigin:!!this._options.crossOriginThumbnails&&"anonymous"}),this.loader.bind("wp-image-loader-empty",function(e){this.requestOutstanding=!1,this.preloadPagesWhenLoaderEmpty&&this._scrolledFarEnough()&&this.hasMore()&&(this.requestOutstanding=!0,this.showMoreToCome(),this.searchNextSet()),this.requestOutstanding||this.hideMoreToCome()}.bind(this))),this.preloadPagesWhenLoaderEmpty=!0;var i=this.request;this.requestOutstanding=!0,t=t||1,this.subject=e;var n={query:e,page:t,success:this._handleRequestSuccess.bind(this,i),error:function(e,t,n){this.request===i&&(this.hideMoreToCome(),console.log("REQUEST ERROR on Search for Photos in AdobeStock:",n),console.log("XHR text for AdobeStock error is:",JSON.stringify(e)),this.$ele.find(".search-progress").addClass("hide"),this.$ele.find(".search-failure").removeClass("hide"),this.$ele.find(".search-failure .error-msg").text(e.responseJSON&&e.responseJSON.message?e.responseJSON.message:"unknown"))}.bind(this)};this._options.assetType&&"vector"===this._options.assetType?(n.asset_type=this._options.assetType,n.image_min_width=0):n.image_filter=this._options.image_filter,this._options.itemsPerPage&&(n.size=this._options.itemsPerPage),n.blockUnlicensedPremium=marvel.features.hasFeature("stock-picker-block-unlicensed-premium"),i.search(n)},_handleRequestSuccess:function(e,t,i,n){if(this.request===e){var o=this.$ele.find(".results"),r="vector"!==this._options.assetType,a=!!this._options.crossOriginThumbnails;if(o.find(".no-results").addClass("hide"),this.$ele.find(".search-progress").addClass("hide"),this.showMoreToCome(),this.page=t.data.page,t.getLength()){this.showInfoMessage(!1);var s,l,d=t.at(0);for(s=0;s<t.getLength();s++)d=t.at(s),this.items.push(d),d.data.title=d.data.title||"untitled image",l=this._addThumbnail(d.getThumbURL(),o,d,d.getAspect(),r,a),d.is_licensed&&l.addClass("licensed");this.loader.start()}else this.hideMoreToCome(),this.request.getLength()||(this.$ele.find(".no-results").removeClass("hide"),this.showInfoMessage(!1))}},hasMore:function(){return this.request&&!this.request.reachedEnd()},getSearchContext:function(){return"history"===this._lastRequestType()?a.licenseHistorySearchQuery:this._getSearchText()},_getSearchText:function(){return this.$ele.find(".search-text").val()},_handleAdobeStockSearch:function(){var e=this.$ele.find(".search-text").val().trim(),t=r.formatMessage("imagepicker-searching-for-subject",{subject:e});if(this.loader&&(this.loader.stop(),this.loader.clearQueue()),this.request=new a,this._clear(),this.count=0,this.$ele.find(".no-results").addClass("hide"),e){this.$ele.find(".search-progress").removeClass("hide"),this.$ele.find(".search-progress .content").text(t),this.showInfoMessage(!1);var i=d.safeSearchQueryFilterEndpoint;if(i){var n="https://"+i+"/api/v1/moderation/profanity",o={query:e};s.ajax({type:"GET",url:n,headers:{"X-Api-Key":d.key,"Content-Type":"application/json"},data:o,dataType:"json",traditional:!0,success:function(t,i,n){t.contains_badwords?this._showEmptySearchResults(!1):this._makeAdobeStockRequest(e)}.bind(this),error:function(t,i,n){window.marvel.logger.error("stock data search failure:"+i,t),this._makeAdobeStockRequest(e)}.bind(this)})}else this._makeAdobeStockRequest(e)}else this._showEmptySearchResults(!0);return!1},_showEmptySearchResults:function(e){this.hideMoreToCome(),this.$ele.find(".search-progress").addClass("hide"),this.showInfoMessage(e),e?this.$ele.find(".no-results").addClass("hide"):this.$ele.find(".no-results").removeClass("hide")},_setShowTypeTab:function(e,t){(t=t||{}).ignoreIfSame&&e===this._currentType||(this._currentType=e,"history"===e?(this.$ele.addClass("view-type-history"),this.$ele.removeClass("view-type-search"),t.triggerSearch&&this._handleLicenseHistory(t.triggerSearch)):(this.$ele.addClass("view-type-search"),this.$ele.removeClass("view-type-history"),t.triggerSearch&&this._handleAdobeStockSearch(t.triggerSearch)))},_handleShowSearchButton:function(e){var t,i=this._getSearchText();this.updateInfoMessage(),i?this.$ele.find(".stockSearchEntry .search-text-hint").removeClass("showing"):(this.$ele.find(".stockSearchEntry .search-text-hint").addClass("showing"),this.$ele.find(".no-results").addClass("hide"),t=!0),this._setShowTypeTab("search",{triggerSearch:this._getSearchText()||"history"===this._currentType,ignoreIfSame:t})},_handleShowLicenseHistoryButton:function(e){this._setShowTypeTab("history",{triggerSearch:a.licenseHistorySearchQuery})},_handleLicenseHistory:function(){this.loader&&(this.loader.stop(),this.loader.clearQueue()),this.request=new a(a.licenseHistoryPath),this._clear(),this.count=0,this.$ele.find(".search-progress").removeClass("hide"),this.$ele.find(".search-progress .content").text(r.getString("imagepicker-stock-looking-up-license-history")),this.$ele.find(".no-results").addClass("hide"),this.showInfoMessage(!1),this._makeAdobeStockRequest(a.licenseHistorySearchQuery)}}),h}.apply(t,n))||(e.exports=o)},532:function(e,t,i){var n,o;n=[i(0),i(2),i(369),i(1),i(346),i(347),i(330),i(219),i(348),i(533),i(526),i(534),i(535),i(536),i(537),i(213),i(37)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d,h,c,u,p,g,f,m){"use strict";function v(e,t,i){this._init(e,t,i)}return e.extend(v.prototype,o.prototype,{_init:function(t,i,n){o.prototype._init.call(this,t,i),e(window).on("resize",this._handleResize.bind(this)),this.items=[],this.dirs=[],this.crumbs=[],this.rootCrumb=null,this._handleFolderClick=this._handleFolderClick.bind(this),this.pickerModel=n.model,this.source=n.model.get("source"),this.parentView=n,this._options=this._options||this.parentView._options,this.sort="custom",this.filter="all",this.depth=0},_handleLoadedThumbnail:function(e,t){this._options.enableDNDThumbclick&&(e.attr("draggable","true"),t.attr("draggable","true"),e.on("mousedown",this._handleThumbClick.bind(this)),e.on("mouseup",this._handleThumbClick.bind(this)),e.on("dragstart",function(e){e.preventDefault(),e.originalEvent.dataTransfer.setData("text/plain","foo"),this._handleThumbClick()}.bind(this)),e.on("dragleave dragend",function(e){e.originalEvent.dataTransfer.clearData()}.bind(this)))},_handleThumbClick:function(t){var i=e(t.target).data("item");if(this.$ele.find(".results .selected").removeClass("selected"),e(t.target).parent().addClass("selected"),this._userCallback){var n=this.crumbs[this.crumbs.length-1];i.parentFolderName=n.item.getFolderName(),i.thumbNaturalSize={width:t.target.naturalWidth,height:t.target.naturalHeight},this._userCallback(i,e(t.target).width(),e(t.target).height())}},populate:function(){this.crumbs=[],this.items=[];this.addRootCrumb(),this._makeRequest("",1)},getCurrentFolderPath:function(){for(var e="",t=this.crumbs,i=0,n=t.length;i<n;i++){e+=t[i].item.getFolderName()+"/"}return e=e.replace(/\/$/,"")},getCurrentFolderUrl:function(){var e=this.crumbs;return e[e.length-1].item.getFolderPath()},addRootCrumb:function(){var e=new f("root");e.isDir=!0,e.links.folder={},e.links.preview.href="",e.links.folder.path="/",e.links.folder.filename="",this.rootCrumb={label:this.pickerModel.get("label"),item:e},this.crumbs.push(this.rootCrumb)},_clear:function(){var e=this.$ele.find(".results").eq(this.depth),t=e.find(".folders"),i=e.find(".column");t.empty(),i.empty(),this.loader&&(this.loader.stop(),this.loader.clearQueue())},_scrolledFarEnough:function(){var t=this.$results,i=t.find(".column"),n=t[0].scrollTop,o=2*t.height()+n,r=!1;return i.each(function(){if(o>e(this).height())return r=!0,!1}),r},_makeRequest:function(n,o,r){var a=r?e(r):this.$ele.find(".results").eq(this.depth);this.$results=a,a.off("scroll",this._handleScroll.bind(this)),a.on("scroll",this._handleScroll.bind(this)),this.loader=new i({numAsyncRequestsAllowed:20}),this.requestId=m.v4(),this.updateFilterability(),this.requestOutstanding=!0,this.showMoreToCome(),this.loader.bind("wp-image-loader-empty",function(e){this.loader.stop(),this.requestOutstanding=!1,this._scrolledFarEnough()&&this.imageSource&&this.imageSource.haveMoreMetaData()&&(this.requestOutstanding=!0,this.imageSource.getNextMetaData(),this.showMoreToCome()),this.requestOutstanding||this.hideMoreToCome()}.bind(this)),1===(o=o||1)&&this._clear(),this._requestMetaData({page:o,path:n,success:function(e,i,n){if(a.find(".no-photos").addClass("hide"),e.length&&0!==e.data.pages){var o,r,s,l,d=e[0];for(this.page=e.data.page,this.pages=e.data.pages,s=t.filter(e,function(e){return e.isDir}),r=t.filter(e,function(e){return!e.isDir}),o=0;o<s.length;o++)l=s[o],this.dirs.push(l),this._addDir(l.getPreviewURL(),l.getFolderLabel(),a,o,l);for(o=0;o<r.length;o++)d=r[o],this.items.push(d),this._addThumbnail(d.getThumbURL(),a,d,d.aspect,!0,!1);this.loader.bind("wp-image-loader-load-error",function(e){this.hideMoreToCome(),console.warn("image loader error ",e)}.bind(this)),this.loader.start()}else(!e.data||e.data.pages<2&&1===e.data.page)&&a.find(".no-photos").removeClass("hide");this.hideMoreToCome()}.bind(this),error:function(e,t,i){a.find(".no-photos").removeClass("hide"),this.hideMoreToCome(),console.warn("REQUEST ERROR:",i)}.bind(this)})},searchNextSet:function(){this.imageSource.getNextMetaData()},_addDir:function(t,i,n,o,r){var a,s=n.find(".folders"),l=e("<div class='folder-wrapper'></div>"),d=e("<p class='label'>"+i+"</p>");l.on("click",this._handleFolderClick),l.data("index",o),l.data("item",r),r.hasCover()&&(l.addClass("withPreview"),a=e("<div class='preview'></div>"),r.getCover().then(function(e){a.css("background-image",'url("'+e+'")')}).fail(function(e){console.warn("getCover failed because ",e)}),l.append(a)),l.append(d);var h=l.wrap("<div class='folder-hover'></div>");s.append(h),window.setTimeout(function(){l.addClass("showing")},0)},_appendResults:function(){var t=e(document.createElement("div")),i='<div class="folders"></div><div class="left column"></div><div class="right column"></div><div class="picker-bumper"></div>',n=this.$ele.find(".results-carrier"),o=this.$ele.find(".results");return i+="Lightroom"===this.pickerModel.get("source")?'<div class="no-photos hide">No photos in this album</div>':'<div class="no-photos hide">No photos in this folder</div>',t.addClass("results").html(i),n.append(t),t.css("left",o.length*o.width()),t},_showResults:function(e){var t=this.$ele.find(".results"),i=this.$ele.find(".results-carrier"),n="onwebkittransitionend"in window?"webkitTransitionEnd":"transitionend",o=function(r){var a;if(i[0].removeEventListener(n,o),"left"===r.propertyName)for(a=t.length-1;a>e;a--)t.eq(a).remove()};i[0].addEventListener(n,o),i.css("left",t.width()*-e+"px")},_handleFolderClick:function(t){var i=e(t.currentTarget).data("item");this._appendResults(),this.depth++,this._clear(),this._showResults(this.depth);var n=i.getFolderLabel();this.pickerModel.set("label",n),this.crumbs.push({label:n,item:i}),this._makeRequest(i.getFolderPath(),1)},canGoBack:function(){return this.crumbs.length>1},goBack:function(){this.crumbs.length>1&&this.crumbs.pop();var e=t.last(this.crumbs);if(this.depth=this.crumbs.length-1,this._showResults(this.depth),this.pickerModel.set("label",e.label),1===this.crumbs.length)this.populate();else{var i=e.item?e.item.getFolderPath():e.path;this._clear(),this._makeRequest(i,1)}},jumpTo:function(e,t){var i=this,n=i.pickerModel.get("source"),o=this.crumbs[this.crumbs.length-1];if(e=decodeURI(e),"Lightroom"==n)this.imageSource=this.imageSource||new h,this.imageSource.getMetaData({filter:this.filter,sort:this.sort,success:function(e,n,r){for(var a,s=0,l=e.length;s<l;s++){var d=e[s];d.links.folder.filename==t&&(a=d.getFolderPath())}o&&o.item&&a==o.item.getFolderPath()||(i.crumbs=[],i.addRootCrumb(),i.crumbs.push({label:t,path:a,item:f.createFolderItem(a,t)}),i._clear(),i._makeRequest(a,1)),i.pickerModel.set("label",t)}});else if(e&&"/"!=e){var r,a;if("Dropbox"==n?(r=new c,a=e):"Google Photos"==n?a=(r=new g).generateUrlForAlbumId(e):"Facebook"==n?(r=new u,a=e):"Instagram"==n?(r=new p,a=e):(r=new d,a=e),!o||!o.item||o.item.getFolderPath()!=e){var s=r.generateCrumbsForPath(e,t);i._appendResults(),i.crumbs=[],i.addRootCrumb(),i.crumbs=i.crumbs.concat(s),t=s[s.length-1].item.getFolderLabel(),i._clear(),i._makeRequest(a,1)}i.pickerModel.set("label",t||i.crumbs[i.crumbs.length-1].label)}else i.populate()},getLastCrumb:function(){return this.crumbs[this.crumbs.length-1]},_handleScroll:function(e){this.requestOutstanding||this._scrolledFarEnough()&&this.imageSource&&this.imageSource.haveMoreMetaData()&&(this.showMoreToCome(),this.requestOutstanding=!0,this.searchNextSet())},_requestMetaData:function(e){if("Dropbox"==this.pickerModel.get("source"))return this._getDropboxMetadata(e);if("Facebook"==this.pickerModel.get("source"))return this._getFacebookMetaData(e);if("Instagram"==this.pickerModel.get("source"))return this._getInstagramMetaData(e);if("Creative Cloud"==this.pickerModel.get("source"))return this._getCCMetadata(e);if("Lightroom"==this.pickerModel.get("source")){e.path,e.success,e.error;return e.filter=this.filter,e.sort=this.sort,this.imageSource=this.imageSource||new h(e),this.imageSource.getMetaData(e)}return"Google Photos"==this.pickerModel.get("source")?this._getGoogleMetadata(e):void 0},_getDropboxMetadata:function(e){e.path,e.success;var t=e.error;r.isAuthenticated()||this.parentView.canReloadPage()?(this.imageSource=this.imageSource||new c(e),this.imageSource.setImageFilter(this.parentView.getImageFilter()),this.imageSource.getMetaData(e)):t("user cancelled authentication")},_getFacebookMetaData:function(e){e.path,e.success;var t=e.error;s.isAuthenticated()||this.parentView.canReloadPage()?(this.imageSource=this.imageSource||new u(e),this.imageSource.getMetaData(e)):t("user cancelled authentication")},_getInstagramMetaData:function(e){e.path,e.success;var t=e.error;l.isAuthenticated()||this.parentView.canReloadPage()?(this.imageSource=this.imageSource||new p(e),this.imageSource.getMetaData(e)):t("user cancelled authentication")},_getGoogleMetadata:function(e){e.path,e.success;var t=e.error;a.isAuthenticated()||this.parentView.canReloadPage()?(this.imageSource=this.imageSource||new g(e),this.imageSource.setImageFilter(this.parentView.getImageFilter()),this.imageSource.getMetaData(e)):t&&t("user cancelled authentication")},_getCCMetadata:function(e){e.path,e.success,e.error;this.imageSource=this.imageSource||new d(e),this.imageSource.setImageFilter(this.parentView.getImageFilter()),this.imageSource.getMetaData(e)},getFilter:function(){return this.filter},setFilter:function(e){this.filter=e},canSetFilter:function(){return"Lightroom"===this.pickerModel.get("source")&&this.crumbs.length>1},getSort:function(){return this.sort},setSort:function(e){this.sort=e},updateFilterability:function(){this.canSetFilter()?marvel.features.hasFeature("lightroom-picker-filters")&&this.$ele.addClass("filterable"):this.$ele.removeClass("filterable")},refresh:function(){var e=this.crumbs[this.crumbs.length-1],t=e.url;e.item&&(t=e.item.getFolderPath()),this._makeRequest(t,1)}}),v}.apply(t,n))||(e.exports=o)},533:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(213),i(251),i(5),i(13)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s="https://"+window.location.host;function l(e){this.items=[],this.hostname=a.storageServer,this.received=0,this.path=null,this.start=null,this.metaDataHost="https://"+a.storageServer,this.metaDataUrl=this.metaDataHost}function d(e,t){this.parentPath=t,n.prototype._init.call(this,e)}return t.extend(l.prototype,o.prototype,{getMetaData:function(e,i){var n=[],a=(e.path&&/\/$/.test(e.path)?e.path:e.path+"/").replace(/^files\//,""),s=e.success,l=e.error,h=""===a?this.metaDataHost+"/files/":o.fusePath([this.metaDataHost,"/files/",a]),c=h+"?type=application%2Fvnd.adobe.directory%2Bjson&orderby=name";this.start=i,this.options=e,this.received=i?this.received:0;var u=function(e){var i=[];e.total_children&&(i=t.map(e.children,function(e){return new d(e,a)}),this.received+=i.length,n=n.concat(i))}.bind(this);function p(e,t,i){console.warn("CC fail ",t,e,i),n.data={page:1,pages:1},l&&l("failure")}var g=function(){var e="?limit=20"+t.reduce(this._imageFilter.types,function(e,t){return e+"&type="+encodeURIComponent(t)},"")+"&orderby=modified&order=desc";i&&(e+="&start="+i),r.ajax(h+e,{beforeSend:function(e){return e.setRequestHeader("X-api-key",r.apiKey),!0},dataType:"json"}).done(function(e,t,i){u(e),e.total_children&&(this.start=e.children[e.children.length-1].modified),this.total_children=e.total_children,n.data={page:1,pages:1},s&&s(n,"success",i)}.bind(this)).fail(p.bind(this))}.bind(this);r.getAccessToken().then(function(e){i?g():r.ajax(c,{beforeSend:function(e){return e.setRequestHeader("X-api-key",r.apiKey),!0},dataType:"json"}).done(function(e,t,i){u(e),g()}.bind(this)).fail(p.bind(this))}.bind(this))},generateCrumbsForPath:function(e){var t=[],i=(e=e.replace(/https?\:\/\/[^\/]*\/files(\/.*)$/,"$1")).replace(/^\//,"").replace(/\/$/,"").split("/");"files"==i[0]&&i.splice(0,1);for(var o="",r=0,a=i.length;r<a;r++)o+="/"+i[r],t.push({label:i[r].replace(/\%20/g," "),path:this.metaDataHost+"/files"+o,item:n.createFolderItem("files"+o,o)});return t},getNextMetaData:function(){return this.getMetaData(this.options,this.start)},haveMoreMetaData:function(){return this.total_children>this.received}}),t.extend(d.prototype,n.prototype,{_parseData:function(){var e=this.data,t=o.fusePath([s,"/files/",this.parentPath]);e.path&&0===e.path.indexOf("files/")&&(e.path=null),this.links.preview.href="",this.isDir=/vnd\.adobe\.directory/.test(e.type),this.isDir?(this.links.folder={},this.links.folder.path=e.path?e.path:this.parentPath+e.name+"/",this.links.folder.filename=e.name):(this.links.thumb.href=e.path?e.path:t+e.name+"/:rendition;size=200",this.links.thumb.filename=e.name,this.links.preview.href=e.path?e.path:t+e.name+"/:rendition;size=512",this.links.preview.filename=e.name,this.links.original.href=e.path?e.path:t+e.name,this.links.original.filename=e.name,this.links.original.width=void 0,this.links.original.height=void 0,this.aspect={width:e.width,height:e.height})},getParentPath:function(){return this.parentPath.replace(/^\//,"")},getMimeType:function(){return this.data.type},getThumbHoverLabel:function(){return this.data.name}}),l}.apply(t,n))||(e.exports=o)},534:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(213),i(251),i(5),i(347)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s="https://api.dropbox.com/2/files/list_folder",l="https://"+window.location.host+"/db_files",d="https://"+window.location.host+"/db_thumbnails";function h(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entries:[]}}function c(e){return"folder"===e[".tag"]}function u(e){n.prototype._init.call(this,e)}return t.extend(h.prototype,o.prototype,{getMetaData:function(i,n){var o,r=i.path,l=i.success,d=i.error,h=a.getToken(),u=n?"https://api.dropbox.com/2/files/list_folder/continue/":s;function p(e){return new Date(e)}function g(e){return(e.media_info&&e.media_info.metadata?e.media_info.metadata.time_taken:0)||e.client_modified||e.server_modified||0}this.start=0,this.options=i,this.path=r,n||(this.pages=0),h&&(o=n?JSON.stringify({cursor:this.data.cursor}):JSON.stringify({path:r||"",include_media_info:!0}),e.ajax({method:"POST",url:u,beforeSend:function(e){return e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Authorization","Bearer "+h),!0},dataType:"json",data:o}).done(function(e,i,o){e=function(e){return e.entries&&e.entries.sort(function(e,t){if(c(e)&&!c(t))return-1;if(!c(e)&&c(t))return 1;if(c(e)&&c(t))return e.name.toLowerCase()<t.name.toLowerCase()?-1:1;var i=p(g(e)),n=p(g(t));return i>n?-1:i<n?1:0}),e}(e=function(e,i){return e.entries&&(e.entries=t.filter(e.entries,function(e){return c(e)||function(e,t){var i=t.includesExtension(e.name.toLowerCase());return"file"===e[".tag"]&&i||e.media_info&&e.media_info.metadata&&"photo"===e.media_info.metadata[".tag"]}(e,i)})),e}(e,this._imageFilter)),this.data=e,this._processData(e,0,r),this.page=n?++this.page:1,this.pages+=Math.ceil(e.entries.length/this.pageSize),this.items.data={page:this.page,pages:this.pages},l&&l(this.items,"success",o)}.bind(this)).fail(function(e,t,i){if(console.warn("Dropbox metadata failure",t,e,i),401===e.status&&/invalid_access_token/.test(e.statusText))return a.logout(),void a.getToken();this.items.data={page:1,pages:1},d&&d(e,t,i)}.bind(this)))},generateCrumbsForPath:function(e){for(var t=[],i=(e=e.replace(s,"")).replace(/^\//,"").replace(/\/$/,"").split("/"),o=(i[i.length-1],"/"),r=0,a=i.length;r<a;r++)o+=i[r],t.push({label:i[r].replace(/\%20/g," "),path:s+o,item:n.createFolderItem(o,o)});return t},_processData:function(e,t,i){var n,o=Math.min(this.pageSize+t,e.entries.length);if(this.items=[],e.entries){for(n=t;n<o;n++){var r=new u(e.entries[n],i);this.items.push(r)}this.received+=this.items.length,this.start=t+this.items.length}return this.items},getNextMetaData:function(){var e=[],t=this.options.success;return this.start<this.data.entries.length?(this.page++,(e=this._processData(this.data,this.start,this.path)).data={page:this.page,pages:this.pages},t&&t(e,"success"),e):this.data.has_more?this.getMetaData(this.options,!0):(console.warn("getNextMetadata called wothout data available"),e)},haveMoreMetaData:function(){return this.start<this.data.entries.length||!!this.data.has_more}}),t.extend(u.prototype,n.prototype,{_parseData:function(){var e=this.data;this.links.preview.href="",this.isDir=c(e),this.isDir?(this.links.folder={},this.links.folder.path=e.path_lower,this.links.folder.filename=e.name):(this.links.thumb.href=d+e.path_lower+"?size=m",this.links.thumb.filename=e.name,this.links.preview.href=d+e.path_lower+"?size=l",this.links.preview.filename=e.name,this.links.original.href=l+e.path_lower,this.links.original.filename=name,e.media_info&&e.media_info.metadata&&e.media_info.metadata.dimensions?(this.links.original.width=e.media_info.metadata.dimensions.width,this.links.original.height=e.media_info.metadata.dimensions.height,this.aspect={width:this.links.original.width,height:this.links.original.height}):(this.links.original.width=void 0,this.links.original.height=void 0,this.aspect=void 0))},getParentPath:function(){var e=this.links.original.href.replace(/\/[^\/]*$/,"");return-1!=e.search(s)?"/"+e.replace(s,""):-1!=e.search(l)?e.replace(l,""):e},getMimeType:function(){return this.data.mime_type},getThumbHoverLabel:function(){return this.data.name}}),h}.apply(t,n))||(e.exports=o)},535:function(e,t,i){var n,o;n=[i(3),i(0),i(2),i(1),i(213),i(251),i(219)],void 0===(o=function(e,t,i,n,o,r,a){var s=["cover_photo","name"],l=["picture","images","width","height","name","album"],d={"Mobile Uploads":1,"Timeline Photos":2,"Profile Pictures":3,"Instagram Photos":4};function h(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entry:[]}}function c(e,t){o.prototype._init.call(this,e),this.albumId="facebook_"+t}function u(e){c.prototype._init.call(this,e)}return i.extend(h.prototype,r.prototype,{getMetaData:function(e,t){var i,n=e.path,o=e.success,r=e.error,h=this;function c(e){var i,n,r;e.paging&&(i=e.paging.cursors.after,n=e.paging.cursors.before),i&&n&&i!=n&&(r=i);var a=e.data?e.data.length:0;h.resultCountSoFar+=a,h.totalCount+=a,e=function(e,t){return e.data&&e.data.sort(function(e,i){return t[e.name]&&t[i.name]?t[e.name]-t[i.name]:t[e.name]?-1:t[i.name]?1:e.name.localeCompare(i.name)}),e}(e,d),h.data=e,h._processData(e,0),h.page=t?++this.page:1,h.pages+=Math.ceil(a/h.pageSize),h.items.data={page:h.page,pages:h.pages,next:r},o&&o(h.items,"success",null)}function u(e){var i,r,a;e.paging&&(i=e.paging.cursors.after,r=e.paging.cursors.before),i&&r&&i!=r&&(a=i);var s=e.data?e.data.length:0;h.resultCountSoFar+=s,h.totalCount=e.data.length,h.data=e,h._processData(e,0,n),h.page=t?++h.page:1,h.pages+=Math.ceil(s/h.pageSize),h.items.data={page:h.page,pages:h.pages,next:a},o&&o(h.items,"success",null)}function p(e){return console.warn("Facebook Photos metadata failure",e),/invalid_access_token/.test(e)||/not_authorized/.test(e)?(a.logout(),void a.authenticate()):(h.items.data={page:1,pages:1},void(r&&r(null,e,e)))}function g(e,t,n){i.then(function(i){window.FB.getLoginStatus(function(i){i&&"connected"===i.status?window.FB.api(e,{after:h.next?h.next:""},function(e){!e||e.error?n(e.error):t(e)}):i&&"not_authorized"===i.status?n("not_authorized"):n("invalid_access_token")},!0)}).catch(function(e){console.warn("getAccessToken failed",e),a.logout(),a.authenticate(),r&&r()})}i=a.getAccessToken({scopes:"user_photos,public_profile"}),this.start=0,this.options=e,this.path=n,this.next=t,t||(this.pages=0,this.totalCount=0),this.options=e,n&&"/"!==n?g(n+"/photos?fields="+l.join(","),u,p):g("/me/albums?fields="+s.join(","),c,p)},generateUrlForAlbumId:function(e){return e},generateCrumbsForPath:function(e,t){return[{label:t,path:this.generateUrlForAlbumId(e),item:c.createFolderItem(e,t)}]},_processData:function(e,t,i){var n,o=e.data?e.data:null,r=o?Math.min(this.pageSize+t,o.length):0;if(this.items=[],o){for(n=t;n<r;n++){var a=new c(o[n],i);this.items.push(a)}this.received+=this.items.length,this.start=t+this.items.length}return this.items},getNextMetaData:function(){var e=[],t=this.options.success;return this.start<this.data.data.length?(this.page++,(e=this._processData(this.data,this.start,this.path)).data={page:this.page,pages:this.pages},t&&t(e,"success"),e):this.data.paging&&this.data.paging.cursors.before!=this.data.paging.cursors.after?this.getMetaData(this.options,this.data.paging.cursors.after):(console.warn("getNextMetadata called without data available"),e)},haveMoreMetaData:function(){return this.start<this.data.data.length||!(!this.data.paging||this.data.paging.cursors.before==this.data.paging.cursors.after)}}),i.extend(c.prototype,o.prototype,{_parseData:function(){var e=this.data;this.links.preview.href="",this.isDir=!function(e){return"picture"in e}(e),this.isDir?(this.links.folder={},this.links.folder.filename=e.name,this.links.folder.path=e.id,this.links.cover={},this.has_cover=!1,e.cover_photo&&e.cover_photo.id&&(this.links.cover=e.cover_photo,this.has_cover=!0)):(this.links.preview.href=e.images[0].source,this.links.preview.filename=e.name,this.links.thumb.href=e.picture,this.links.thumb.filename=e.name,this.links.original.href=e.images[0].source,this.links.original.filename=e.name,this.links.original.width=parseInt(e.images[0].width),this.links.original.height=parseInt(e.images[0].height),this.aspect={width:this.links.original.width,height:this.links.original.height})},getParentPath:function(){return"facebook_"+this.albumId},hasCover:function(){return this.has_cover},getFolderLabel:function(){return this.getFolderName()},getMimeType:function(){},getCover:function(){var t=e.defer();if(this.links&&this.has_cover)try{window.FB.api("/"+this.links.cover.id+"?fields=picture",function(e){e&&!e.error?(this.links.cover.href=e.picture,t.resolve(e.picture)):t.reject("no cover available")}.bind(this))}catch(e){t.reject("no cover available")}else t.reject("no cover available");return t.promise},getThumbHoverLabel:function(){return this.data.name}}),c.createFolderItem=function(e,t){return new u({path:e,label:t})},i.extend(u.prototype,c.prototype,{_parseData:function(){this.isDir=!0,this.links.folder={},this.links.folder.filename=this.data.label,this.links.folder.path=this.data.path}}),h}.apply(t,n))||(e.exports=o)},536:function(e,t,i){var n,o;n=[i(3),i(0),i(2),i(1),i(213),i(251),i(348),i(422)],void 0===(o=function(e,t,i,n,o,r,a,s){function l(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entry:[]}}function d(e,t){o.prototype._init.call(this,e),this.albumId=t}function h(e){d.prototype._init.call(this,e)}return i.extend(l.prototype,r.prototype,{getMetaData:function(e,t){var n,o=e.path,r=e.success,l=e.error,d=this;n=a.getAccessToken(),this.start=0,this.options=e,this.path=o,t||(this.pages=0,this.startIndex=1,this.totalCount=0),this.options=e,o&&"/"!==o||t?function(e,t,i){n.then(function(n){var o=d.data.pagination&&d.data.pagination.next_max_id?d.data.pagination.next_max_id:"";s.fetchRecentUserMedia({max_id:o}).then(function(i,n,o){i&&i.meta&&i.meta.error_type?t(i):e(i,n,o)}).fail(function(e,t,n){i(e,t,n)})}.bind(d)).catch(function(e){a.logout(),a.authenticate(),l&&l()})}(function(e){e.data=function(e){return i.filter(e,function(e){return"image"==e.type})}(e.data);var n=e.data?e.data.length:0;d.startIndex+=n,d.resultCountSoFar+=n,d.totalCount=e.data.length,d.data=e,d._processData(e,0,o),d.page=t?++d.page:1,d.pages+=Math.ceil(n/d.pageSize),d.items.data={page:d.page,pages:d.pages},r&&r(d.items,"success",null)},function(e){console.warn("Instagram Photos metadata failure",e);var t=e.meta&&e.meta.error_message?e.meta.error_message:null,i=e.meta&&e.meta.error_type?e.meta.error_type:"";if(/OAuthAccessTokenException/.test(i))return a.logout(),void a.authenticate();d.items.data={page:1,pages:1},l&&l(null,t,t)},function(e,t,i){d.items.data={page:1,pages:1},l&&l(null,t,i)}):function(e){e({data:[{id:"1",name:"Recent Photos",type:"album"}]})}(function(e){var i=e.data?e.data.length:0;d.startIndex+=i,d.resultCountSoFar+=i,d.totalCount=i,d.data=e,d._processData(e,0),d.page=t?++this.page:1,d.pages+=Math.ceil(i/d.pageSize),d.items.data={page:d.page,pages:d.pages},r&&r(d.items,"success",null)})},generateUrlForAlbumId:function(e){return e},generateCrumbsForPath:function(e,t){return[{label:t,path:this.generateUrlForAlbumId(e),item:d.createFolderItem(e,t)}]},_processData:function(e,t,i){var n,o=e.data?e.data:null,r=o?Math.min(this.pageSize+t,o.length):0;if(this.items=[],o){for(n=t;n<r;n++){var a=new d(o[n],i);this.items.push(a)}this.received+=this.items.length,this.start=t+this.items.length}return this.items},getNextMetaData:function(){var e=[],t=this.options.success;return this.start<this.data.data.length?(this.page++,(e=this._processData(this.data,this.start,this.path)).data={page:this.page,pages:this.pages},t&&t(e,"success"),e):this.startIndex<this.totalCount?this.getMetaData(this.options,!0):this.data.pagination&&this.data.pagination.next_max_id.length?this.getMetaData(this.options,!0):(console.warn("getNextMetadata called without data available"),e)},haveMoreMetaData:function(){return this.start<this.data.data.length||(this.startIndex<this.totalCount||!(!this.data.pagination||!this.data.pagination.next_max_id.length))}}),i.extend(d.prototype,o.prototype,{_parseData:function(){var e=this.data;this.links.preview.href="",this.isImage=function(e){return"image"==e.type}(e),this.isDir=!this.isImage,this.isImage?(this.links.preview.href=e.images.standard_resolution.url,this.links.preview.filename=e.images.standard_resolution.url,this.links.thumb.href=e.images.thumbnail.url,this.links.thumb.filename=e.images.thumbnail.url,this.links.original.href=e.images.standard_resolution.url,this.links.original.filename=e.images.standard_resolution.url,this.links.original.width=e.images.standard_resolution.width,this.links.original.height=e.images.standard_resolution.height,this.aspect=void 0):(this.links.folder={},this.links.folder.filename=e.name,this.links.folder.path=e.id,this.links.cover={},this.has_cover=!1)},getParentPath:function(){return this.albumId},hasCover:function(){return this.has_cover},getFolderLabel:function(){return this.getFolderName()},getCover:function(){var t=e.defer();return t.reject("no cover image"),t.promise},getMimeType:function(){}}),d.createFolderItem=function(e,t){return new h({path:e,label:t})},i.extend(h.prototype,d.prototype,{_parseData:function(){this.isDir=!0,this.links.folder={},this.links.folder.filename=this.data.label,this.links.folder.path=this.data.path}}),l}.apply(t,n))||(e.exports=o)},537:function(e,t,i){var n,o;n=[i(3),i(0),i(2),i(7),i(538),i(539)],void 0===(o=function(e,t,i,n,o,r){"use strict";function a(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entry:[]}}return n.hasFeature("enable-google-picasa-api")?i.extend(a.prototype,o.prototype):n.hasFeature("enable-google-photo-api")?i.extend(a.prototype,r.prototype):marvel.logger.error("[ImageSourceGoogle] need to enable at least 1 google API!!!"),a}.apply(t,n))||(e.exports=o)},538:function(e,t,i){var n,o;n=[i(3),i(0),i(2),i(1),i(213),i(251),i(330)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s="https://picasaweb.google.com/data/feed/api/user/",l=(window.location.host,window.location.host,["AUTO BACKUP"]);function d(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entry:[]}}function h(e){return e.category&&e.category.length&&/#album/.test(e.category[0].term)}function c(e,t){o.prototype._init.call(this,e),this.albumId=t}function u(e){c.prototype._init.call(this,e)}return i.extend(d.prototype,r.prototype,{getMetaData:function(e,n){var o,r=e.path,d=e.success,c=e.error,u=s,p=this;function g(e,t,o){var a=e.feed.entry?e.feed.entry.length:0;this.startIndex+=a,this.resultCountSoFar+=a,this.totalCount=a,e=function(e){if(e.feed.entry){e.feed.entry.sort(function(e,t){return new Date(e.updated.$t)>new Date(t.updated.$t)?-1:1});var t=[];i.each(l,function(n){e.feed.entry=i.filter(e.feed.entry,function(e,i){return e.title.$t.toLowerCase()!=n.toLowerCase()||(t.push(e),!1)}.bind(p))}.bind(p)),t.length&&(e.feed.entry=t.concat(e.feed.entry))}return e}(e),this.data=e,this._processData(e,0,r),this.page=n?++this.page:1,this.pages+=Math.ceil(a/this.pageSize),this.items.data={page:this.page,pages:this.pages},d&&d(this.items,"success",o)}function f(e,t,o){var a=e.feed.entry?e.feed.entry.length:0;this.startIndex+=a,this.resultCountSoFar+=a,this.totalCount=e.feed.gphoto$numphotos.$t,e=function(e,t){return e.feed.entry&&(e.feed.entry=i.filter(e.feed.entry,function(e){return h(e)||function(e,t){var i=e.media$group.media$content&&e.media$group.media$content.length?e.media$group.media$content[0].type.toLowerCase():null;return t.includesType(i)}(e,t)})),e}(e,this._imageFilter),this.data=e,this._processData(e,0,r),this.page=n?++this.page:1,this.pages+=Math.ceil(a/this.pageSize),this.items.data={page:this.page,pages:this.pages},d&&d(this.items,"success",o)}function m(e,t,i){function n(){p.items.data={page:1,pages:1},c&&c(e,t,i)}console.warn("Google Photos metadata failure",t,e,i),401!==e.status&&404!==e.status?n():a.validateRefreshToken().then(function(e){n()}.bind(p)).catch(function(e){a.logout(),a.authenticate()})}function v(e,i,n){o.then(function(o){t.ajax({url:e,data:{alt:"json-in-script",access_token:o,imgmax:"d",thumbsize:"288","max-results":100,"start-index":this.startIndex},jsonpCallback:"picasaCallback",dataType:"jsonp",beforeSend:function(e){return e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Authorization","Bearer "+o),e.setRequestHeader("GData-Version","2"),!0}}).done(i.bind(p)).fail(n.bind(p))}.bind(p)).catch(function(e){console.warn("getAccessToken failed",e),a.logout(),a.authenticate(),c&&c()})}return o=a.getAccessToken(),this.start=0,this.options=e,this.path=r,n||(this.pages=0,this.startIndex=1,this.resultCountSoFar=0,this.totalCount=0),this.options=e,r&&"/"!==r||n?v(r,f,m):v(u+"default",g,m)},generateUrlForAlbumId:function(e){return s+a.getUserId()+"/albumid/"+e+"?alt=json-in-script"},generateCrumbsForPath:function(e,t){return[{label:t,path:this.generateUrlForAlbumId(e),item:c.createFolderItem(e,t)}]},_processData:function(e,t,i){var n,o=e.feed?e.feed.entry:null,r=o?Math.min(this.pageSize+t,o.length):0;if(this.items=[],o){for(n=t;n<r;n++){var a=new c(o[n],i);this.items.push(a)}this.received+=this.items.length,this.start=t+this.items.length}return this.items},getNextMetaData:function(){var e=[],t=this.options.success;return this.start<this.data.feed.entry.length?(this.page++,(e=this._processData(this.data,this.start,this.path)).data={page:this.page,pages:this.pages},t&&t(e,"success"),e):this.startIndex<this.totalCount?this.getMetaData(this.options,!0):(console.warn("getNextMetadata called without data available"),e)},haveMoreMetaData:function(){return this.start<this.data.feed.entry.length||this.startIndex<this.totalCount}}),i.extend(c.prototype,o.prototype,{_parseData:function(){var e,t=this.data,n=t.media$group?t.media$group.media$thumbnail:null,o=n&&n.length?n[n.length-1].url:null;this.links.preview.href="",this.isDir=h(t),this.isDir?(this.links.folder={},(e=i.find(t.link,function(e){return/#feed/.test(e.rel)}))&&(this.links.folder.path=e.href,this.links.folder.href=e.href),this.links.folder.filename=t.title.$t,this.has_cover=!0,this.links.cover={},this.links.cover.href=o):(this.links.thumb.href=o,this.links.thumb.filename=t.name,this.links.original.href=t.media$group.media$content[0].url,this.links.original.filename=t.name,t.gphoto$width?(this.links.original.width=parseInt(t.gphoto$width.$t),this.links.original.height=parseInt(t.gphoto$height.$t),this.aspect={width:this.links.original.width,height:this.links.original.height}):(this.links.original.width=void 0,this.links.original.height=void 0,this.aspect=void 0),t.media$group.media$description&&t.media$group.media$description.$t&&(this.caption=t.media$group.media$description.$t))},getParentPath:function(){return this.albumId},hasCover:function(){return this.has_cover},getCover:function(){var t=e.defer();this.data;return this.links&&this.links.cover&&this.links.cover.href?t.resolve(this.links.cover.href):t.reject("no cover available"),t.promise},getFolderLabel:function(){var e=this.getFolderName();return e&&"AUTO BACKUP"===e.toUpperCase()?"All Photos":e},getMimeType:function(){return this.data.mime_type},getThumbHoverLabel:function(){return this.data.title.$t}}),c.createFolderItem=function(e,t){return new u({path:e,label:t})},i.extend(u.prototype,c.prototype,{_parseData:function(){this.isDir=!0,this.links.folder={},this.links.folder.filename=this.data.label,this.links.folder.path=this.data.path}}),d}.apply(t,n))||(e.exports=o)},539:function(e,t,i){var n,o;n=[i(3),i(0),i(2),i(213),i(251),i(330)],void 0===(o=function(e,t,i,n,o,r){"use strict";var a="https://photoslibrary.googleapis.com",s=(window.location.host,window.location.host,20);function l(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entry:[]}}function d(e,t){n.prototype._init.call(this,e),this.albumId=t}function h(e){d.prototype._init.call(this,e)}return i.extend(l.prototype,o.prototype,{getMetaData:function(e,i,n){var o,l=e.path,d=e.success,h=e.error,c=this;function u(e,t,n){if(void 0===e.albums)return this.options.path="/all_photos",void this.getMetaData(this.options,!0,this.data.nextPageToken);var o=e.albums,r=o?o.length:0;this.startIndex+=r,this.resultCountSoFar+=r,this.totalCount=r,this.data=e,this._processData(e,0,l),this.page=i?++this.page:1,this.pages+=Math.ceil(r/this.pageSize),this.items.data={page:this.page,pages:this.pages},d&&d(this.items,"success",n)}function p(e,t,n){var o=e.mediaItems?e.mediaItems.length:0;this.startIndex+=o,this.resultCountSoFar+=o,this.data=e,this._processData(e,0,l),this.page=i?++this.page:1,this.pages+=Math.ceil(o/this.pageSize),this.items.data={page:this.page,pages:this.pages},d&&d(this.items,"success",n)}function g(e,t,i){function n(){c.items.data={page:1,pages:1},h&&h(e,t,i)}console.warn("Google Photos metadata failure",t,e,i),401!==e.status&&404!==e.status?n():r.validateRefreshToken().then(function(e){n()}.bind(c)).catch(function(e){r.logout(),r.authenticate()})}return o=r.getAccessToken(),this.start=0,this.options=e,this.path=l,i||(this.pages=0,this.startIndex=1,this.resultCountSoFar=0,this.totalCount=0),this.nextPageToken=n||"",this.options=e,l&&"/"!==l?(l=/all_photos$/i.test(l)?"":l,function(e,i,n,a){o.then(function(o){marvel.logger.info("[GooglePhotoApi] requesting data from URL",e),t.ajax({url:e,method:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json",beforeSend:function(e){return e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Authorization","Bearer "+o),!0}}).done(n.bind(c)).fail(a.bind(c))}.bind(c)).catch(function(e){console.warn("getAccessToken failed",e),r.logout(),r.authenticate(),h&&h()})}(a+"/v1/mediaItems:search",{albumId:l,pageSize:s,pageToken:c.nextPageToken},p,g)):function(e,i,n,a){o.then(function(o){marvel.logger.info("[GooglePhotoApi] requesting data from URL",e),t.ajax({url:e,data:i,dataType:"json",beforeSend:function(e){return e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Authorization","Bearer "+o),!0}}).done(n.bind(c)).fail(a.bind(c))}.bind(c)).catch(function(e){console.warn("getAccessToken failed",e),r.logout(),r.authenticate(),h&&h()})}(a+"/v1/albums",{pageSize:s,pageToken:c.nextPageToken},u,g)},generateUrlForAlbumId:function(e){return a+"/v1/albums/"+e},generateCrumbsForPath:function(e,t){return[{label:t,path:this.generateUrlForAlbumId(e),item:d.createFolderItem(e,t)}]},_processData:function(e,t,n){var o,r,a=[],s=0;if(e.albums?(a=e.albums,0===this.nextPageToken.length&&a.unshift({id:"all_photos",coverPhotoBaseUrl:a[0]?a[0].coverPhotoBaseUrl:"/",title:"All Photos"}),s=Math.min(this.pageSize+t,a.length)):e.mediaItems&&(a=i.filter(e.mediaItems,function(e){return!!e.mediaMetadata.photo}),s=Math.min(this.pageSize+t,e.mediaItems.length)),this.items=[],a.length){for(o=t;o<s;o++)a[o]&&(r=new d(a[o],n),this.items.push(r));this.received+=this.items.length,this.start=t+this.items.length}return this.pageToken=e.pageToken?e.pageToken:"",this.items},_stillHasItems:function(){return this.data.albums&&this.start<this.data.albums.length||this.data.mediaItems&&this.start<this.data.mediaItems.length},getNextMetaData:function(){var e=[],t=this.options.success;return this.data.nextPageToken?this.getMetaData(this.options,!0,this.data.nextPageToken):this._stillHasItems()?(this.page++,(e=this._processData(this.data,this.start,this.path)).data={page:this.page,pages:this.pages},t&&t(e,"success"),e):this.startIndex<this.totalCount?this.getMetaData(this.options,!0):(console.warn("getNextMetadata called without data available"),e)},haveMoreMetaData:function(){return!!this.data.nextPageToken||(!!this._stillHasItems()||this.startIndex<this.totalCount)}}),i.extend(d.prototype,n.prototype,{_parseData:function(){var e=this.data,t="=w256-h192";this.links.preview.href="",this.isDir=function(e){return!(!e||!e.coverPhotoBaseUrl)}(e),this.isDir?(this.links.thumb.href=e.coverPhotoBaseUrl+t,this.links.folder={},this.links.folder.path=this.data.id,this.links.folder.href=e.id,this.links.folder.filename=e.title,this.has_cover=!1,"/"!==e.coverPhotoBaseUrl&&(this.has_cover=!0,this.links.cover={},this.links.cover.href=e.coverPhotoBaseUrl+t)):(this.links.thumb.href=e.baseUrl+t,this.links.thumb.filename=e.filename,this.links.original.href=e.baseUrl+"=d",this.links.original.filename=e.filename,e.mediaMetadata?(this.links.original.width=parseInt(e.mediaMetadata.width),this.links.original.height=parseInt(e.mediaMetadata.height),this.aspect={width:this.links.original.width,height:this.links.original.height}):(this.links.original.width=void 0,this.links.original.height=void 0,this.aspect=void 0),e.mediaMetadata.description&&(this.caption=e.mediaMetadata.description))},getParentPath:function(){return this.albumId},hasCover:function(){return this.has_cover},getCover:function(){var t=e.defer();return this.links&&this.links.cover&&this.links.cover.href?t.resolve(this.links.cover.href):t.reject("no cover available"),t.promise},getFolderLabel:function(){var e=this.getFolderName();return e&&"AUTO BACKUP"===e.toUpperCase()?"All Photos":e},getMimeType:function(){return this.data.mime_type},getThumbHoverLabel:function(){return this.data.filename}}),d.createFolderItem=function(e,t){return new h({path:e,label:t})},i.extend(h.prototype,d.prototype,{_parseData:function(){this.isDir=!0,this.links.folder={},this.links.folder.filename=this.data.label,this.links.folder.path=this.data.path}}),l}.apply(t,n))||(e.exports=o)},540:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(23),i(541),i(15)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s=i.Model.extend({defaults:{filter:"all"}});return o.extend({el:".image-picker-filter-dialog-overlay",events:{"click .x-close-btn":"_handleCancel","click .mrvl-overlay-bg":"_handleCancel","click button.filter":"_handleFilterButton"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.model=new s,t.extend(this,i.Events),this.model.set({filter:e.filter},{silent:!0})},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===a.DOM_VK_ESCAPE&&this._handleCancel()},_handleFilterButton:function(t){var i=e(t.target),n=i.data("filter");this.$el.find("button.filter").removeClass("checked"),i.addClass("checked"),this.handleCloseBtn(),this.model.set({filter:n})},render:function(){return this.$el.html(r.toString()),this.$el.find("button.filter").removeClass("checked"),this.$el.find("button.filter."+this.model.get("filter")).addClass("checked"),this}})}.apply(t,n))||(e.exports=o)},541:function(e,t){e.exports='<div class="picker-filter-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="picker-filter-dialog-shell mrvl-overlay-shell">\n\n    <h2 class="title">Filter Photos</h2>\n\n    <button class="filter all checked" data-filter="all">Show All</button>\n    <button class="filter picked" data-filter="picked">Picked</button>\n    <button class="filter picked-unflagged" data-filter="picked-unflagged">Picked and Unflagged</button>\n\n    <button class="x-close-btn">X</button>\n</div>\n'},542:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(23),i(543),i(15)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s=i.Model.extend({defaults:{sort:"all"}});return o.extend({el:".image-picker-sort-dialog-overlay",events:{"click .x-close-btn":"_handleCancel","click .mrvl-overlay-bg":"_handleCancel","click button.sort":"_handleSortButton"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.model=new s,t.extend(this,i.Events),this.model.set({sort:e.sort},{silent:!0})},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===a.DOM_VK_ESCAPE&&this._handleCancel()},_handleSortButton:function(t){var i=e(t.target),n=i.data("sort");this.$el.find("button.sort").removeClass("checked"),i.addClass("checked"),this.handleCloseBtn(),this.model.set({sort:n})},render:function(){return this.$el.html(r.toString()),this.$el.find("button.sort").removeClass("checked"),this.$el.find("button.sort."+this.model.get("sort")).addClass("checked"),this}})}.apply(t,n))||(e.exports=o)},543:function(e,t){e.exports='<div class="picker-sort-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="picker-sort-dialog-shell mrvl-overlay-shell">\n\n    <h2 class="title">Sort Photos</h2>\n\n    <button class="sort capture-ascending checked" data-sort="capture-ascending">Capture Time: Ascending</button>\n    <button class="sort capture-descending" data-sort="capture-descending">Capture Time: Descending</button>\n    <button class="sort custom" data-sort="custom">Custom Order</button>\n\n    <button class="x-close-btn">X</button>\n</div>\n'},544:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(23),i(15),i(545)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";return o.extend({events:{"click .fb-logout-close-btn":"_handleCancel","click .fb-logout-bg":"_handleCancel","click .cancel-btn":"_handleCancel","click .confirm-btn":"_handleConfirmButton"},el:".facebook-logout-confirm-overlay",initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,i.Events)},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===r.DOM_VK_ESCAPE&&this._handleCancel()},_handleConfirmButton:function(t){e(t.target);this.handleCloseBtn(),this.trigger("confirm","user confirmed")},render:function(){return this.$el.html(a.toString()),this}})}.apply(t,n))||(e.exports=o)},545:function(e,t){e.exports='<div class="fb-logout-bg mrvl-overlay-bg">\n</div>\n<div class="fb-logout-shell mrvl-overlay-shell">\n    <h2 class="fb-logout-dialog-title">Do you want to disconnect Facebook?</h2>\n    <p class="fb-logout-dialog-text">Adobe Spark will no longer be able to access your files,\n        but you may still be logged in to Facebook elsewhere on this computer.</p>\n\n    <div class="mrvl-dlg-btn-area">\n        <button class="cancel-btn mrvl-btn">Cancel</button>\n        <button class="confirm-btn mrvl-btn">Disconnect</button>\n    </div>\n\n</div>\n'},546:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(23),i(15),i(8),i(547)],void 0===(o=function(e,t,i,n,o,r,a,s){"use strict";return o.extend({events:{"click .db-logout-close-btn":"_handleCancel","click .db-logout-bg":"_handleCancel","click .cancel-btn":"_handleCancel","click .confirm-btn":"_handleConfirmButton"},el:".dropbox-logout-confirm-overlay",initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,i.Events)},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===r.DOM_VK_ESCAPE&&this._handleCancel()},_handleConfirmButton:function(t){e(t.target);this.handleCloseBtn(),this.trigger("confirm","user confirmed")},render:function(){return this.$el.html(a.mustacheRender(s)),this}})}.apply(t,n))||(e.exports=o)},547:function(e,t){e.exports='<div class="db-logout-bg mrvl-overlay-bg">\n</div>\n<div class="db-logout-shell mrvl-overlay-shell">\n    <h2 class="db-logout-dialog-title">Do you want to disconnect Dropbox?</h2>\n    <p class="db-logout-dialog-text">{{product_name}} will no longer be able to access your files,\n      but you may still be logged in to Dropbox elsewhere on this computer.</p>\n\n    <div class="mrvl-dlg-btn-area">\n        <button class="cancel-btn mrvl-btn">Cancel</button>\n        <button class="confirm-btn mrvl-btn">Disconnect</button>\n    </div>\n\n</div>\n'},548:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(23),i(15),i(8),i(549)],void 0===(o=function(e,t,i,n,o,r,a,s){"use strict";return o.extend({events:{"click .db-logout-close-btn":"_handleCancel","click .db-logout-bg":"_handleCancel","click .cancel-btn":"_handleCancel","click .confirm-btn":"_handleConfirmButton"},el:".google-logout-confirm-overlay",initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,i.Events)},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===r.DOM_VK_ESCAPE&&this._handleCancel()},_handleConfirmButton:function(t){e(t.target);this.handleCloseBtn(),this.trigger("confirm","user confirmed")},render:function(){return this.$el.html(a.mustacheRender(s)),this}})}.apply(t,n))||(e.exports=o)},549:function(e,t){e.exports='<div class="gp-logout-bg mrvl-overlay-bg">\n</div>\n<div class="gp-logout-shell mrvl-overlay-shell">\n    <h2 class="gp-logout-dialog-title">Do you want to disconnect Google Services?</h2>\n    <p class="gp-logout-dialog-text">{{product_name}} will no longer be able to access your files,\n      but you may still be logged in to Google elsewhere on this computer.</p>\n\n    <div class="mrvl-dlg-btn-area">\n        <button class="cancel-btn mrvl-btn">Cancel</button>\n        <button class="confirm-btn mrvl-btn">Disconnect</button>\n    </div>\n\n</div>\n'},550:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(23),i(15),i(551)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";return o.extend({events:{"click .im-logout-close-btn":"_handleCancel","click .im-logout-bg":"_handleCancel","click .cancel-btn":"_handleCancel","click .confirm-btn":"_handleConfirmButton"},el:".instagram-logout-confirm-overlay",initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,i.Events)},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===r.DOM_VK_ESCAPE&&this._handleCancel()},_handleConfirmButton:function(t){e(t.target);this.handleCloseBtn(),this.trigger("confirm","user confirmed")},render:function(){return this.$el.html(a.toString()),this}})}.apply(t,n))||(e.exports=o)},551:function(e,t){e.exports='<div class="im-logout-bg mrvl-overlay-bg">\n</div>\n<div class="im-logout-shell mrvl-overlay-shell">\n    <h2 class="im-logout-dialog-title">Do you want to disconnect Instagram?</h2>\n    <p class="im-logout-dialog-text">Adobe Spark will no longer be able to access your files,\n        but you may still be logged in to Instagram elsewhere on this computer.</p>\n\n    <div class="mrvl-dlg-btn-area">\n        <button class="cancel-btn mrvl-btn">Cancel</button>\n        <button class="confirm-btn mrvl-btn">Disconnect</button>\n    </div>\n</div>\n'},552:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(8),i(12),i(95)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s=o.getString("license-stock-cancel"),l=o.getString("license-stock-default-title"),d={license:{title:o.getString("license-stock-license-title"),text:"{{#fmr}}license-stock-license-text{{/fmr}}",okText:{id:"license",text:o.getString("license-stock-button-license")}},notAllowedToPurchase:{title:o.getString("license-stock-not-allowed-to-purchase-title"),text:"{{purchaseMessage}}",isAlert:!0},cantSignUp:{title:o.getString("license-stock-cant-sign-up-title"),text:o.getString("license-stock-cant-sign-up-text"),okText:"<a class='signup-link' href='{{details_url}}' target='_blank'>"+o.getString("license-stock-take-me-to-stock")+"</a>",cancelText:o.getString("license-stock-button-close")},signUp:{title:o.getString("license-stock-signup-title"),text:o.getString("license-stock-signup-text"),okText:"<a class='signup-link' href='{{details_url}}' target='_blank'>"+o.getString("license-stock-take-me-to-stock")+"</a>",cancelText:o.getString("license-stock-button-close"),returnToStockLinkText:"<a class='signup-link' href='{{details_url}}' target='_blank'>"+o.getString("license-stock-take-me-back-to-stock")+"</a>"},noCredits:{title:o.getString("license-stock-no-credits-title"),text:"<span>{{purchaseMessage}}&nbsp;&nbsp;<a class='learn-more-link' href='{{details_url}}' target='_blank'>"+o.getString("license-stock-no-credits-text")+"</a></span>",okText:[{id:"license",text:o.getString("license-stock-button-license")}],linkEvent:{selector:".learn-more-link"}},alreadyLicensed:{title:o.getString("license-stock-already-licensed-title"),text:o.getString("license-stock-already-licensed-text"),okText:o.getString("license-stock-already-licensed-ok")},licensingFailed:{title:o.getString("license-stock-licensing-failed-title"),text:o.getString("license-stock-licensing-failed-text"),cancelText:o.getString("license-stock-button-close"),okText:"<a class='license-link' href='{{details_url}}' target='_blank'>"+o.getString("license-stock-take-me-to-stock")+"</a>"},licensingFromStockSiteSucceded:{title:o.getString("license-stock-from-site-succeded-title"),text:o.getString("license-stock-from-site-succeded-text")},licensingFromStockSignUpSucceded:{title:o.getString("license-stock-signup-succeded-title"),text:o.getString("license-stock-signup-succeded-text")},signupReturnNoLicense:{title:o.getString("license-stock-signup-return-no-license-title"),okText:[{id:"checkAgain",text:o.getString("license-stock-signup-return-no-license-check-again")},{id:"returnToStock",text:"<a class='signup-link' href='{{details_url}}' target='_blank'>"+o.getString("license-stock-take-me-back-to-stock")+"</a>"}],text:"{{^referToStockSite}}"+o.getString("license-stock-signup-return-no-license-account-no-license")+"{{/referToStockSite}}{{#referToStockSite}}"+o.getString("license-stock-signup-return-no-license-no-account")+"{{/referToStockSite}}"},licenseStatusCheck:{text:o.getString("license-stock-status-check-text"),cancelText:o.getString("license-stock-status-check-cancel")},licenseStatusCheckError:{text:o.getString("license-stock-status-check-error-text")},licenseAndSignupSuccess:{text:"{{#fmr}}license-stock-license-and-signup-success{{/fmr}}"}},h=i.Model.extend({initialize:function(){t.bindAll(this,t.functionsIn(this))},showLicensingFlow:function(t){this._updateData(t),this._flowDeferred=n.defer();var i=d[this._displayType],o=this._parseSettings(i);return this._currentStrings=i,i.linkEvent&&(o.options.afterRenderCallback=function(e){e.find(i.linkEvent.selector).on("click",this._handleLinkClick.bind(this))}.bind(this)),this._showConfirm(o).then(function(t){t?"signUp"===this._displayType?this._handleSignupButton():"cantSignUp"===this._displayType?this._handleUserCancel():"license"!==t&&"alreadyLicensed"!==this._displayType||this._licenseCurrentStockAsset("alreadyLicensed"===this._displayType).then(function(e){this._flowDeferred.resolve(e)}.bind(this),function(t,i){this._parseAndShowConfirm(d.licensingFailed).then(function(n){n?(e(window).one("focus.stockassetview",this._returnedToWindowAfterStockDetail),this._waitingToReturn=!0,this._showChecking()):this._flowDeferred.reject(t,i)}.bind(this))}.bind(this)):this._handleUserCancel()}.bind(this)),this._flowDeferred.promise},_updateData:function(e){this._data=e,e.referToStockSite?this._displayType="signUp":e.notAllowedToPurchase?this._displayType="notAllowedToPurchase":e.license_type?this._displayType="alreadyLicensed":e["licenses-available"]?this._displayType="license":this._displayType="noCredits"},_licenseStockAsset:function(e){var t=n.defer();if(e.showProgress){var i=e.alreadyLicensed?o.getString("license-stock-progress-retrieving"):o.getString("license-stock-progress-licensing");r.showWaitView(i,"",{minHeight:269})}return a.licenseItem(e.imageId).then(function(i){var n={href:i.url,width:i.width,height:i.height,mimeType:i.mimeType,thumb:i.thumb,licenseType:i.licenseType};e.showProgress&&r.hide(),t.resolve(n,"licensed")}).fail(function(i){marvel.logger.error("licensing failed in licenseStockAsset",i),e.showProgress&&r.hide(),t.reject("licensing failed",i)}),t.promise},_licenseCurrentStockAsset:function(e){return this._licenseStockAsset({imageId:this._data.image_id,showProgress:!0,alreadyLicensed:e})},_handleLinkClick:function(t){var i=e(t.target);if(i.hasClass("disabled"))return t.preventDefault(),void t.stopPropagation();i.hasClass("learn-more-link")&&(i.addClass("disabled"),a.getStockAssetDetailsUrl(this._data.image_id).then(function(e){i.attr("href",e),i.removeClass("disabled")}))},handleCloseBtn:function(){this._waitingToReturn=!1,this._currentLicenseRequestPromise=null,e(window).off("focus.stockassetview",this.returnedToWindowAfterSignupButton)},_handleUserCancel:function(){this.handleCloseBtn(),this._flowDeferred.reject("cancel")},_applyNewlyLicensedImage:function(e,i){this._licenseCurrentStockAsset(!0).then(function(e){var n;if(this.referToStockSite?n=d.licenseAndSignupSuccess:i&&(n="string"==typeof i?{text:i}:i),n){var o=!1;this._parseAndShowConfirm(n).then(function(){o=!0}.bind(this)),t.delay(function(){o||r.hide()},5e3)}this.handleCloseBtn(),this._flowDeferred.resolve(e)}.bind(this),function(e){r.hide(),this._flowDeferred.reject(e)}.bind(this))},_returnedToWindowAfterSignupButton:function(e){this._currentLicenseRequestPromise||this._checkForLicense()},_returnedToWindowAfterStockDetail:function(e){this._currentLicenseRequestPromise||this._checkForImageLicense()},_checkForImageLicense:function(){this._currentLicenseRequestPromise=a.getItemInfo(this._data.image_id).then(function(e){e.is_licensed?this._applyNewlyLicensedImage(e,d.licensingFromStockSiteSucceded):(r.hide(),this._handleUserCancel())}.bind(this),function(e){r.hide(),this._handleUserCancel()})},_getParsedText:function(i,n){var r;if(t.isString(i))return"<"===(r=o.mustacheRender(i,n)).charAt(0)&&(r=e(r)),r;if(Array.isArray(i)){var a=[];return t.each(i,function(t){"<"===(r=o.mustacheRender(t.text,n)).charAt(0)&&(r=e(r)),a.push({id:t.id,text:r})}),a}return t.isObject(i)?("<"===(r=o.mustacheRender(i.text,n)).charAt(0)&&(r=e(r)),{id:i.id,text:r}):""},_parseSettings:function(e,t){return t=t||this._data,{title:this._getParsedText(e.title,t)||l,text:this._getParsedText(e.text,t),options:{cancelText:this._getParsedText(e.cancelText,t)||s,okText:this._getParsedText(e.okText,t),minHeight:269},isAlert:e.isAlert}},_parseAndShowConfirm:function(e,t){var i=this._parseSettings(e,t);return this._showConfirm(i)},_showConfirm:function(e){return e.isAlert?r.showAlert(e.title,e.text,e.options):r.showConfirm(e.title,e.text,e.options)},_checkForLicense:function(e){(e=e||{}).showChecking&&this._showChecking(),this._currentLicenseRequestPromise=a.getLicensesAvailable().then(function(e){return this._data["licenses-available"]=e.numLicenses,this._data.purchase_url=e.purchaseUrl,this._data.referToStockSite=e.requiresCheckout,this._data.purchaseMessage=e.purchaseMessage,this._data.notAllowedToPurchase=e.notAllowedToPurchase,this._currentLicenseRequestPromise?a.getItemInfo(this._data.image_id):n.reject("cancelled")}.bind(this)).then(function(e){if(!this._currentLicenseRequestPromise)return n.reject("cancelled");e.is_licensed?this._applyNewlyLicensedImage(e,d.licensingFromStockSignUpSucceded):(r.hide(),this._data.details_url=e.details_url,this._parseAndShowConfirm(d.signupReturnNoLicense).then(function(e){e?(this._currentLicenseRequestPromise=null,"checkAgain"===e?this._checkForLicense({showChecking:!0}):this._handleSignupButton()):this._handleUserCancel()}.bind(this)))}.bind(this)).catch(function(e){"cancelled"!==e&&(marvel.logger.error("error checking stock in stock asset view",e),this._parseAndShowConfirm(d.licenseStatusCheckError).then(function(e){e?(this._currentLicenseRequestPromise=null,this._checkForLicense({showChecking:!0})):this._handleUserCancel()}.bind(this)))}.bind(this))},_userCancelledWaiter:function(){this._currentLicenseRequestPromise=null,this.handleCloseBtn()},_showChecking:function(){var e=this._parseSettings(d.licenseStatusCheck);r.showCancelableWaitView(e.title,e.text,e.options).then(function(){this._userCancelledWaiter()}.bind(this))},_handleSignupButton:function(t){e(window).one("focus.stockassetview",this._returnedToWindowAfterSignupButton),this._waitingToReturn=!0,this._showChecking()}});return h.getMinHeightForConfirms=function(){return 269},h}.apply(t,n))||(e.exports=o)},553:function(e,t){e.exports='\x3c!--\n--\x3e\n<div class="photo-picker">\n    <div class="picker-bar">\n        <div class="source-label" data-auto="image-picker-source-label"></div>\n        <div class="back-button" data-auto="image-picker-back-button"></div>\n        <div class="close-button" data-auto="image-picker-close-button"></div>\n    </div>\n    <div class="picker-wrapper" data-auto="image-picker-wrapper">\n        <div class="picker-home sp-picker">\n            <button class="local-file-button" data-auto="image-picker-button-local-file">{{imagepicker-browse-files}}<input class="local-file-input" data-auto="image-picker-local-file-input" type="file" accept="image/jpeg,image/png"/></button>\n\n            <div class="copy-url-wrapper hide">\n                <input class="copy-url-input" type="text" placeholder="shared Spark link" data-auto="copy-url-input"/>\n                <button class="copy-url-button"></button>\n            </div>\n            <div class="drag-and-drop-explainer-holder hide">\n                <div class="or-delimiter-wrap">\n                    <p class="or-delimiter">{{imagepicker-or}}</p>\n                </div>\n                <div class="drag-and-drop-explainer-multi-select">{{imagepicker-drop-multi-image-here}}</div>\n                <div class="drag-and-drop-explainer">{{imagepicker-drop-single-image-here}}</div>\n            </div>\n            <div class="or-delimiter-wrap">\n                <p class="or-delimiter">{{imagepicker-or}}</p>\n            </div>\n\n          <div class="picker-button-wrapper"><button class="search-button" data-auto="image-picker-button-search">{{imagepicker-find-free-photos}}</button></div>\n\n          <div class="picker-button-wrapper stock-search-button-wrapper">\n            <button class="stock-search-button" data-auto="image-picker-button-stock-search">{{imagepicker-source-adobe-stock}}\n            </button>\n          </div>\n\n          <div class="picker-button-wrapper facebook-button-wrapper">\n                <button class="facebook-button"><span>{{imagepicker-source-facebook}}</span>\n                </button>\n                <div class="facebook-logout">\n                    <div class="facebook-logout-tooltip visible"></div>\n                </div>\n            </div>\n\n            <div class="picker-button-wrapper"><button class="cc-button" data-auto="image-picker-button-cc"><span>{{imagepicker-source-creative-cloud}}</span></button></div>\n            <div class="picker-button-wrapper"><button class="lightroom-button" data-auto="image-picker-button-lightroom"><span>{{imagepicker-source-lightroom}}</span></button></div>\n\n          <div class="picker-button-wrapper dropbox-button-wrapper">\n              <div class="dropbox-button" data-auto="image-picker-button-dropbox">\n                  <span class="dropbox-connect">\n                    {{imagepicker-source-dropbox-connect}}\n                  </span>\n                  <span>{{imagepicker-source-dropbox}}</span>\n                  <span class="dropbox-logout">\n                    {{imagepicker-source-dropbox-disconnect}}\n                  </span>\n                </div>\n          </div>\n\n            <div class="picker-button-wrapper instagram-button-wrapper">\n                <button class="instagram-button"><span>{{imagepicker-source-instagram}}</span>\n                </button>\n                <div class="instagram-logout">\n                    <div class="instagram-logout-tooltip visible"></div>\n                </div>\n            </div>\n\n          <div class="picker-button-wrapper google-photos-button-wrapper hide">\n            <div class="google-photos-button" data-auto="image-picker-button-google-photos">\n              <span class="google-photos-connect">\n                {{imagepicker-source-google-photos-connect}}\n              </span>\n              <span>{{imagepicker-source-google-photos}}</span>\n              <span class="google-photos-logout">\n                {{imagepicker-source-google-disconnect}}\n              </span>\n            </div>\n          </div>\n\n          <div class="picker-button-wrapper google-drive-button-wrapper hide">\n            <div class="google-drive-button" data-auto="image-picker-button-google-drive">\n              <span class="google-photos-connect">\n                {{imagepicker-source-google-drive-connect}}\n              </span>\n              <span>{{imagepicker-source-google-drive}}</span>\n              <span class="google-photos-logout">\x3c!-- logout happens for both photo & drive --\x3e\n                {{imagepicker-source-google-disconnect}}\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class="dooplo-picker sp-picker show-image-sources">\n            <div class="dooploSearchEntry">\n                <div class="search-text-hint">{{imagepicker-search-for-photo}}...</div>\n              <div class="search-text-wrapper">\n                <input class="search-text" value="" data-auto="image-picker-dooplo-search-field"/>\n              </div>\n              <button class="execute-search-button"></button>\n              <div class="dooplo-search-dropdown">\n                <div class="dooplo-search-dropdown-aligner"></div>\n              </div>\n\n            </div>\n            <div class="results">\n              <div id="results-without-bing" class="clearfix">\n                  <div class="search-sources"></div>\n                  <div class="left column"></div>\n                  <div class="right column"></div>\n\n              </div>\n              <div id="results-bing-only" class="clearfix hide">\n                <div class="search-sources"></div>\n                <div class="privacy-sources"><a href="https://go.microsoft.com/fwlink/?LinkId=521839" target="_blank">{{imagepicker-microsoft-privacy-statement}}</a></div>\n                <div class="left column"></div>\n                <div class="right column"></div>\n              </div>\n              <div class="search-progress hide">\n                  <div class="spinner"></div>\n                  <p class="content"></p>\n                </div>\n                <div class="search-failure hide">\n                  <p class="content">{{imagepicker-oops}}</p>\n                  <p class="error-detail">{{{imagepicker-search-error-message}}}</p>\n                </div>\n                <p class="no-results no-results-suggest-flickr hide">{{imagepicker-search-no-results}}<br/>{{imagepicker-search-no-results-flickr}}</p>\n                <p class="no-results no-results-no-suggest-flickr hide">{{imagepicker-search-no-results}}<br/>{{imagepicker-search-no-results-desc}}</p>\n                <p class="flickr-more-results hide">{{imagepicker-search-want-more-results}}<br/>{{imagepicker-search-want-more-results-desc}}</p>\n                <div class="picker-bumper hide"></div>\n            </div>\n          <div class="search-info hide">{{imagepicker-search-info-photo}}\n            {{{imagepicker-search-info-photo-link-text}}}\n          </div>\n          <div class="search-sources hide"></div>\n          <div class="more-to-come hide"></div>\n        </div>\n        <div class="dooplo-icon-picker sp-picker show-image-sources">\n            <div class="dooploSearchEntry">\n              <div class="search-text-hint">{{imagepicker-search-for-icon}}...</div>\n              <div class="search-text-wrapper">\n                <input class="search-text" value=""/>\n              </div>\n              <button class="execute-search-button"></button>\n            </div>\n            <div class="results">\n              <div class="left column"></div>\n              <div class="search-progress hide">\n                <div class="spinner"></div>\n                <p class="content"></p>\n              </div>\n              <p class="no-results hide">{{imagepicker-search-no-results}}<br/>{{imagepicker-search-no-results-desc}}</p>\n              <div class="picker-bumper hide"></div>\n            </div>\n          <div class="search-info hide">{{imagepicker-search-info-icon}}\n            <a  href="http://adobe.com/special/legal/permissions/image-notice.html" target="_blank">{{imagepicker-search-info-icon-link-text}}</a>\n          </div>\n          <div class="search-sources hide"></div>\n          <div class="more-to-come hide"></div>\n        </div>\n      <div class="stock-picker sp-picker">\n          <div class="stockViewTypeTabs">\n              <button class="stockShowSearchButton">{{imagepicker-search}}</button>\n              <button class="stockShowLicenseHistoryButton">{{imagepicker-licensed-images}}</button>\n            </div>\n          <div class="stockSearchEntry">\n              <div class="search-text-hint">{{imagepicker-search-for-photo}}...</div>\n            <div class="search-text-wrapper">\n              <input class="search-text" value="" data-auto="image-picker-stock-search-field"/>\n            </div>\n            <button class="execute-search-button"></button>\n          </div>\n        <div class="stockLicenses calculating noSearch fromNoSearch">{{imagepicker-standard-assets-remaining}} <span class="count"></span></div>\n        <div class="stockLicenses calculating search fromNoSearch">{{imagepicker-standard-assets-remaining}} <span class="count"></span></div>\n          <div class="results">\n              <div class="left column"></div>\n              <div class="right column"></div>\n            <div class="search-progress hide">\n              <div class="spinner"></div>\n              <p class="content"></p>\n            </div>\n            <div class="search-failure hide">\n              <p class="content">{{imagepicker-oops}}</p>\n              <p class="error-detail">{{{imagepicker-search-error-message}}}</p>\n            </div>\n            <p class="no-results hide"><span class="no-results-search">{{imagepicker-search-no-results}}<br/>{{imagepicker-search-no-results-desc}}</span><span class="no-results-history"><span class="no-results-history-title">{{imagepicker-no-licensed-images}}</span><br/>{{{imagepicker-search-adobe-stock}}}</span></p>\n            <div class="picker-bumper hide"></div>\n          </div>\n        <div class="search-info hide">{{imagepicker-search-info-stock}}<br/>\n          {{{imagepicker-search-info-stock-link-text}}}\n        </div>\n        <div class="more-to-come hide"></div>\n      </div>\n        <div class="creative-cloud-picker sp-picker">\n          <div class="results-carrier">\n            <div class="results">\n              <div class="folders"></div>\n              <div class="left column"></div>\n              <div class="right column"></div>\n              <div class="no-photos hide"><h2>{{imagepicker-no-files}}</h2>\n                <p>{{imagepicker-no-files-creative-cloud}}</p>\n                <div class="learn-more"><a href="https://helpx.adobe.com/creative-cloud/help/sync-files.html" target="_blank">{{imagepicker-learn-more}}</a></div>\n              </div>\n              <div class="picker-bumper"></div>\n            </div>\n          </div>\n        </div>\n        <div class="lightroom-picker sp-picker">\n          <div class="results-wrapper">\n            <div class="results-carrier">\n              <div class="results">\n                <div class="folders"></div>\n                <div class="left column"></div>\n                <div class="right column"></div>\n                <div class="no-photos hide"><h2>{{imagepicker-no-files-lightroom}}</h2>\n                  <p>{{imagepicker-no-files-lightroom-desc}} <a class="learn-more"href="https://lightroom.adobe.com" target="_blank">{{imagepicker-learn-more}}</a></p>\n                </div>\n                <div class="picker-bumper"></div>\n              </div>\n            </div>\n          </div>\n          <div class="buttons-wrapper">\n            <button class="filter">{{imagepicker-filter}}</button>\n            <button class="sort">{{imagepicker-sort}}</button>\n          </div>\n        </div>\n      <div class="dropbox-picker sp-picker">\n        <div class="results-carrier">\n          <div class="results">\n            <div class="folders"></div>\n            <div class="left column"></div>\n            <div class="right column"></div>\n            <div class="no-photos hide">{{imagepicker-no-photos-folder}}</div>\n            <div class="picker-bumper"></div>\n          </div>\n        </div>\n      </div>\n\n        <div class="facebook-picker sp-picker">\n            <div class="results-carrier">\n                <div class="results">\n                    <div class="folders"></div>\n                    <div class="left column"></div>\n                    <div class="right column"></div>\n                    <div class="no-photos hide">{{imagepicker-no-photos-folder}}</div>\n                    <div class="picker-bumper"></div>\n                </div>\n            </div>\n        </div>\n\n        <div class="instagram-picker sp-picker">\n            <div class="results-carrier">\n                <div class="results">\n                    <div class="folders"></div>\n                    <div class="left column"></div>\n                    <div class="right column"></div>\n                    <div class="no-photos hide">{{imagepicker-no-photos-folder}}</div>\n                    <div class="picker-bumper"></div>\n                </div>\n            </div>\n        </div>\n\n      <div class="google-photos-picker sp-picker">\n        <div class="results-carrier">\n          <div class="results">\n            <div class="folders"></div>\n            <div class="left column"></div>\n            <div class="right column"></div>\n            <div class="no-photos hide">{{imagepicker-no-photos-folder}}</div>\n            <div class="picker-bumper"></div>\n          </div>\n        </div>\n      </div>\n        <div class="more-to-come shared"></div>\n    </div>\n    <div class="picker-progress hide">\n        <div class="spinner"></div>\n        <div class="content"></div>\n    </div>\n\n</div>\n<div class="lightroom-importer-wrapper hide"></div>\n<div class="image-picker-filter-dialog-overlay hide"></div>\n<div class="image-picker-sort-dialog-overlay hide"></div>\n<div class="dropbox-logout-confirm-overlay hide"></div>\n<div class="facebook-logout-confirm-overlay hide"></div>\n<div class="google-logout-confirm-overlay hide"></div>\n<div class="instagram-logout-confirm-overlay hide"></div>\n'},554:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(5),i(346),i(555),i(556)],void 0===(o=function(e,t,i,n,o,r,a,s){"use strict";function l(e,t){this._init(e,t)}function d(e,t){var i,n,o,r,a=e.assetSources?e.assetSources[t.id]:null;if(a&&a.search&&a.search.predicates)for(o=a.search.predicates,i=0;o.terms&&i<o.terms.length;i++)for(r=o.terms[i],n=0;"text"===r.type&&r.fields&&n<r.fields.length;n++)if("albumName"===r.fields[n])return r.query;return null}function h(e,t){var i=e.assetSources?e.assetSources[t.id]:null,n=null;return i&&i.search&&i.search.sort&&(n=i.search.sort),n}function c(e,t){var i,n,o,r,a=e.assetSources?e.assetSources[t.id]:null,s=[];if(a&&a.search&&a.search.predicates)for(o=a.search.predicates,i=0;o.terms&&i<o.terms.length;i++)for(r=o.terms[i],n=0;"text"===r.type&&r.fields&&n<r.fields.length;n++)"review"===r.fields[n]&&s.push(r);return s}return e.extend(l.prototype,r.prototype,{show:function(t){var i,n=this.$ele,r=e("<iframe>");if(!this.$ele.children().length){this.options=this.options||{},this.options.multiSelect=t.multiSelect,i=window.marvel.settings.lightroomImporter;var a=function(e){if(console.log("message event  received:",e),"LRImporter ready"===e.data.message){var t=n.find("iframe")[0].contentWindow;o.getAccessToken().then(function(e){t.handlers.setImagePickerContext({view:this,imsStack:"stage",imsToken:e,environment:i,albumName:this.albumName,singleSelect:!this.options.multiSelect,searchFilters:this.searchFilters,searchOrder:this.searchOrder})}.bind(this)).catch(function(e){this.$ele.addClass("hide").children().remove()}.bind(this)),window.removeEventListener("message",a)}}.bind(this);window.addEventListener("message",a,!1),marvel.features.hasFeature("lightroom-importer-overlay")?(this.lightroomImporterView=new s,this.lightroomImporterView.on("cancel",function(){this.importLightroom()}.bind(this)),this.lightroomImporterView.showOverlay()):(r[0].src="/marvel-core/lightroomImporter.html",n.append(r),n.removeClass("hide"))}},getLastCrumb:function(){return null},jumpTo:function(e,t,i){this.albumName=e,this.show(i)},hide:function(){this.$ele.addClass("hide").children().remove()},importLightroom:function(e){var t,i,n,o=[];if(this.hide(),this.lightroomImporterView&&(this.lightroomImporterView.hideOverlay(),this.lightroomImporterView.off("cancel"),this.lightroomImporterView=null),e&&e.resources&&e.resources.length){for(t=this.options.multiSelect?e.resources.length:1,i=0;i<t;i++){var r=e.resources[i].asset;(n=new a(this.ozV1AssetFromOzV2Asset(e,r))).albumName=d(e,r),o.push(n),this.searchFilters=c(e,r),this.searchOrder=h(e,r)}this._userCallback&&this._userCallback(o)}},_loadLrSDK:function(){var e=n.defer(),t=document.createElement("script");t.onload=function(){e.resolve()},t.onerror=function(){e.reject()};var i=window.marvel.settings.lightroomImporter||"prod";return t.src="stage"===i?"https://stage.adobelr.com/sdk/lr-sdk.js":"https://lightroom.adobe.com/sdk/lr-sdk.js",document.body.appendChild(t),e.promise},_initLrSDK:function(){return o.getAccessToken().then(function(e){return window.LrSDK.initializeP({clientId:"MarvelWeb1",token:e,environment:window.marvel.settings.lightroomImporter||"prod"},"importer","catalog")})},ensureLrSDKIsAvailable:function(){return this._LrSDKLoadedPromise||(window.LrSDK?this._LrSDKLoadedPromise=this._initLrSDK():this._LrSDKLoadedPromise=this._loadLrSDK().then(function(){return this._initLrSDK()}.bind(this))),this._LrSDKLoadedPromise},ozV1AssetFromOzV2Asset:function(e,t){var i,n=1280,o=960,r=t.payload.develop;if(r&&r.croppedWidth>0&&r.croppedHeight>0)n=r.croppedWidth,o=r.croppedHeight;else{var a=t.payload.importSource;a.originalWidth>0&&a.originalHeight>0&&(n=a.originalWidth,o=a.OriginalHeight)}var s=t.payload.xmp;s&&s.dc&&(i=s.dc.description);var l=/^https?:\/\/[a-z\-\:0-9.]+\/v2/,d="/v1.0";var h={id:t.id,subtype:t.subtype,payload:function(){var e={width:n,height:o};return i&&(e.caption=i),e}(),links:function(){var i="",n=l.exec(e.base);n&&(i=e.base.replace(n[0],d));var o={},r=t.links["/rels/rendition_type/2048"]?t.links["/rels/rendition_type/2048"].href:void 0;return r&&(o["/rels/rendition_type/2048"]={href:i+r}),(r=t.links["/rels/rendition_type/thumbnail2x"]?t.links["/rels/rendition_type/thumbnail2x"].href:void 0)&&(o["/rels/rendition_type/thumbnail2x"]={href:i+r}),o}()};if(t.largeRenditionRequestData){var c=JSON.parse(t.largeRenditionRequestData);h.largeRenditionRequest=function(){return this.ensureLrSDKIsAvailable().then(function(){return window.LrSDK.catalog.get2560RenditionRelativeUrlP(c.base,c.asset)}).then(function(e){var t=c.base.replace(l,d);return"https://"+window.location.host+"/lr_files"+t+e})}.bind(this)}return h}}),l}.apply(t,n))||(e.exports=o)},555:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(213),i(251),i(5),i(3)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";var s="https://"+window.location.host,l=s+"/lr_files";function d(e){n.prototype._init.call(this,e)}return t.extend(d.prototype,n.prototype,{_parseData:function(){var e,t,i=this.data;this.links.preview.href="",this.isDir=/\:album\:[^\:]+$/.test(i.id),this.isDir?(this.links.folder={},this.links.folder.path=i.links.self.href,this.links.folder.filename=i.name,this.cover=i.cover,this.has_cover=!0):(e=i.links,t=t||(e["/rels/rendition_type/2048"]?e["/rels/rendition_type/2048"].href:void 0),this.links.thumb.href=e["/rels/rendition_type/thumbnail2x"]?e["/rels/rendition_type/thumbnail2x"].href:t,this.links.thumb.href=l+this.links.thumb.href,this.links.thumb.filename=i.name,this.links.preview.href=t,this.links.preview.href=l+t,this.links.preview.filename=i.name,this.links.original.href=l+t,this.links.original.filename=i.name,this.links.original.width=i.payload.width,this.links.original.height=i.payload.height,this.aspect={width:i.payload.width,height:i.payload.height},this.caption=i.payload.caption,this.largeRenditionRequest=i.largeRenditionRequest)},getMimeType:function(){return"image/"+this.data.subtype},hasCover:function(){return this.has_cover},getCover:function(){var e,t=a.defer(),i=s+"/lr_files",n=this.data;return this.hasCover()?this.cover&&this.cover.links&&this.cover.links["/rels/rendition_type/thumbnail2x"]?t.resolve(i+this.cover.links["/rels/rendition_type/thumbnail2x"].href):(e=i+n.links["/rels/album_assets"].href+"?limit=1&subtype=jpeg;png",r.ajax(e,{dataType:"text"}).done(function(n,o,r){var a,s=function(e){var t,i=e.replace(/^while \(1\) \{\}/,"");try{t=JSON.parse(i)}catch(e){console.warn("LR json data parse failed")}return t}(n);s&&s.assets&&s.assets.length?(a=s.assets[0],e=i+a.links["/rels/rendition_type/thumbnail2x"].href,t.resolve(e)):t.reject("no assets")}).fail(function(){t.reject("not available")})):t.reject("no cover available"),t.promise},canSetFilter:function(){return!0}}),d}.apply(t,n))||(e.exports=o)},556:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(23),i(557),i(15)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";return o.extend({el:".lightroom-importer-wrapper",events:{"click .lightroom-importer-bg":"_handleCancel"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,i.Events)},_handleCancel:function(){this.hideOverlay(),this.trigger("cancel","user cancelled")},handleKeyup:function(e){e.keyCode===a.DOM_VK_ESCAPE&&this._handleCancel()},render:function(){var e=window.marvel.settings.lightroomImporter;return this.$el.html(r.toString()),this.$el.find("iframe")[0].src="/marvel-core/lightroomImporter.html?env="+e,this}})}.apply(t,n))||(e.exports=o)},557:function(e,t){e.exports='<div class="lightroom-importer-bg mrvl-overlay-bg">\n</div>\n<div class="lightroom-importer-dialog-shell mrvl-overlay-shell">\n  <iframe></iframe>\n</div>\n'},558:function(e,t,i){var n,o;n=[i(0),i(2),i(1)],void 0===(o=function(e,t,i){"use strict";return i.Model.extend({defaults:{label:"",picker:null,page:null,source:""}})}.apply(t,n))||(e.exports=o)},559:function(e,t,i){var n,o;n=[i(3),i(297)],void 0===(o=function(e,t){"use strict";return new(t.extend({SERVICE_NAME:"GoogleApi",SERVICE_URI:"https://apis.google.com/js/api.js",init:function(){this.deferred||(this.deferred=e.defer()),window.gapi||this.initializing||(marvel.logger.info(this.SERVICE_NAME+" Initializing"),this._loadLibrary(),this.initializing=!0)},_loadLibrary:function(){var e=document.createElement("script");e.type="text/javascript",e.src=this.SERVICE_URI,e.onload=this.onLoad.bind(this),marvel.logger.info(this.SERVICE_NAME+" Loading"),document.body.appendChild(e)},onLoad:function(){marvel.logger.info(this.SERVICE_NAME+" Successfully loaded"),this.deferred.resolve()},whenAvailable:function(){return this.deferred.promise}}))}.apply(t,n))||(e.exports=o)},560:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(418),i(561),i(562),i(4),i(8),i(102)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d){"use strict";return o.extend({initialize:function(){o.prototype.initialize.call(this),t.bindAll(this,t.functionsIn(this)),this.zoomInOut=!0,this.on("cancel",function(){this.close()}),this._productName=s.getProductName()},imageAttributesEvent:function(e){"close"===e.type?this.close():"move"===e.type&&this.move(e.location)},close:function(){if(this._registeredModEvent&&(marvel.events.off("image-attributes-event",this.imageAttributesEvent.bind(this)),this._registeredModEvent=!1),this.hideOverlay(),this._defer){var e=this._defer;this._defer=null,e.resolve("popup-dismissed")}},handleLicensingStage:function(e,t){"licensing"===e?(marvel.logger.debug("License Me!",this.info),this.hideOverlay()):"licensed"===e?this.options.licenseUpdatedCallback?(this.options.licenseUpdatedCallback(t,this.info),this._defer.resolve("licensed")):this._defer.resolve({newItemInfo:t,info:this.info,changeType:"licensed"}):"licensing-rejected"===e?"licensing cancelled"===t?this._defer.resolve("popup-dismissed"):this._defer.reject(t):"error"===e&&(marvel.logger("License me failed!",this.info),this._defer.reject(t))},showOverlayWithData:function(e,t){this._registeredModEvent||(marvel.events.on("image-attributes-event",this.imageAttributesEvent.bind(this)),this._registeredModEvent=!0);var i=e.info,n="GIPHY"!==i.license.source_name,o=l.getLocale(),a={owner:i.license.owner,photoName:i.license.photo_name,sourceName:i.license.source_name,licenseType:l.formatMessage("attribution-license-types",{licenseType:i.license.type}),attributionOriginalSourceUri:i.license.source_url||"#",showLicenseField:n,copyrightInfoText:l.formatMessage("attribution-copyright-info",{copyrightUrl:d.getLocalizedURL("https://adobe.com/legal/permissions/image-notice.html",o)}),attributionLicenseText:l.formatMessage("attribution-license-text",{licenseUrl:d.getLocalizedURL("https://stock.adobe.com/license-terms",o)})};this.update(e),this.afterRenderCallback=this.updateAfterRender.bind(this),this.template=l.mustacheRender(r,a),this.showOverlay(this),this._defer=t},isShowing:function(){return!this.$el.hasClass("hide")},handleLicensing:function(){var e=this.info.license,t={image_id:e.image_id,owner:e.owner,photo_name:e.photo_name,source_name:e.source_name,license_type:e.type};this.handleLicensingStage("licensing"),this.imagePickerView.licenseStockAsset(t).then(function(e){this.handleLicensingStage("licensed",e),s.trackEvent("StockAssetLicensingSuccess",{contextData:["projectId"]},this._productName+":editor")}.bind(this),function(e){this.handleLicensingStage("licensing-rejected",e),"licensing cancelled"===e?s.trackEvent("StockAssetLicensingCancelled",{contextData:["projectId"]},this._productName+":editor"):s.trackEvent("StockAssetLicensingFailed",{contextData:["projectId"]},this._productName+":editor")}.bind(this))},handleShowOriginalStockSource:function(e){var t=this.$el.find(".original_source");if(t.hasClass("disabled"))e.preventDefault();else{t.addClass("disabled");var i={image_id:this.info.license.image_id};this.imagePickerView.getStockAssetDetailUrl(i).then(function(e){t.attr("href",e),t.removeClass("disabled")}).done()}},updateAfterRender:function(){var e=this.info.license;if(this.$el.hasClass("auto-height")||(this.$el.addClass("auto-height"),this.imagePickerView.isLicenseForStock(e)||this.contentModified()),!this.imagePickerView.isLicenseForStock(e))return!1;var t=this.$el.find(".original_source"),i=this.$el.find(".license_wrapper"),n={image_id:e.image_id};return this.licenseHandlerObjects||(this.licenseHandlerObjects={}),this.on("cancel",function(){this.licenseHandlerObjects&&(this.licenseHandlerObjects.$buttonWrapper&&this.licenseHandlerObjects.$buttonWrapper.off("click"),this.licenseHandlerObjects.$originalSource.off("click"),this.licenseHandlerObjects=null)}),i.removeClass("hide"),this.$el.find(".copyright_info").addClass("hide"),"royalty_free"===e.type?(i.find(".license_photo_button").on("click",function(){s.trackEvent("LicenseBtnClickedOnAtrView",{contextData:["projectId"]},this._productName+":editor"),this.handleLicensing()}.bind(this)).removeClass("hide"),this.licenseHandlerObjects.$buttonWrapper=i):i.find(".license_photo_button").addClass("hide"),t.addClass("disabled"),t.on("click",this.handleShowOriginalStockSource.bind(this)),this.imagePickerView.getStockAssetDetailUrl(n).then(function(e){t.attr("href",e).removeClass("disabled")}).done(),this.licenseHandlerObjects.$originalSource=t,this.contentModified(),!0}})}.apply(t,n))||(e.exports=o)},561:function(e,t){e.exports='<div class="attribution-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="attribution-dialog-shell mrvl-overlay-shell">\n\n  <div class="pointer"></div>\n  <h2 class="photo_name">{{photoName}}</h2>\n\n  <p><span class="by label">{{attribution-label-by}} </span>\n    <span class="owner">{{owner}}</span>\n  </p>\n\n  <p><span class="source label">{{attribution-label-source}} </span>\n    <span class="source_name">{{sourceName}}</span>\n  </p>\n\n  {{#showLicenseField}}\n  <p><span class="license label">{{attribution-label-license}} </span>\n    <span class="license_type">{{licenseType}}</span>\n  </p>\n  {{/showLicenseField}}\n\n  <p class="original_source_wrapper"><a class="original_source" href="{{attributionOriginalSourceUri}}" target="_blank">{{attribution-original-source-link}}</a></p>\n\n  <p class="copyright_info">{{{copyrightInfoText}}}</p>\n  <div class="license_wrapper hide">\n    <p class="license_wrapper-text">{{{attributionLicenseText}}}</p>\n    <button class="license_photo_button">{{attribution-license-button}}</button>\n  </div>\n</div>\n'},562:function(e,t,i){var n=i(563);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(27)(n,o);n.locals&&(e.exports=n.locals)},563:function(e,t,i){(e.exports=i(26)(!1)).push([e.i,".attribution-dialog-bg.mrvl-overlay-bg{background-color:transparent}.attribution-dialog-overlay.auto-height .mrvl-overlay-shell.attribution-dialog-shell{height:auto}.attribution-dialog-overlay.zoomInOut .mrvl-overlay-shell.attribution-dialog-shell{transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;-webkit-transform:translate(-50%) scale(1);transform:translate(-50%) scale(1)}.attribution-dialog-overlay.zoomInOut .mrvl-overlay-shell.attribution-dialog-shell.no-transition{transition:none}.attribution-dialog-overlay.zoomInOut.transitioned-out .mrvl-overlay-shell.attribution-dialog-shell{-webkit-transform:translate(-50%) scale(0);transform:translate(-50%) scale(0)}.attribution-dialog-overlay.generic .mrvl-overlay-shell.attribution-dialog-shell p .label{color:#284660;font-size:12px}.mrvl-overlay-shell.attribution-dialog-shell{height:244px;width:222px;border-radius:6px;font-family:adobe-clean,Helvetica Neue,Helvetica,Arial,sans-serif;padding:15px 15px 20px;margin:0;text-align:left;-webkit-transform:translate(-50%);transform:translate(-50%);box-sizing:border-box;border:1px solid rgba(0,0,0,.1);box-shadow:0 0 8px 0 rgba(0,0,0,.1)}.mrvl-overlay-shell.attribution-dialog-shell.auto-height{height:auto}.mrvl-overlay-shell.attribution-dialog-shell *{color:#35414c;font-size:12px;font-weight:400}.mrvl-overlay-shell.attribution-dialog-shell p{margin:0;line-height:19px;overflow:hidden;text-overflow:ellipsis}.mrvl-overlay-shell.attribution-dialog-shell p .label{font-weight:700}.mrvl-overlay-shell.attribution-dialog-shell p a{font-weight:700;text-decoration:none;display:inline-block;border-bottom:3px solid #e8ebed}.mrvl-overlay-shell.attribution-dialog-shell .copyright_info{color:#9aa6af}.mrvl-overlay-shell.attribution-dialog-shell h2{font-family:brandon-grotesque,adobe-clean,sans-serif;font-size:17px;font-weight:700;margin:0 0 4px;line-height:22px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:left}.mrvl-overlay-shell.attribution-dialog-shell .license_wrapper{text-overflow:clip;margin-top:10px}.mrvl-overlay-shell.attribution-dialog-shell .license_wrapper .license_photo_button{font-size:1.23em;font-family:adobe-clean,sans-serif;font-weight:700;height:32px;padding:6px 16px 7px;margin-top:18px;cursor:pointer;background-color:#1473e6;color:#fff;position:relative;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);transition:background-color .2s ease-in,color .2s ease-in;border-radius:24px}.mrvl-overlay-shell.attribution-dialog-shell .license_wrapper .license_photo_button:hover{background-color:#1269d0}.mrvl-overlay-shell.attribution-dialog-shell .license_wrapper .license_photo_button:active{background-color:#1056a7}.mrvl-overlay-shell.attribution-dialog-shell .original_source.disabled{font-weight:400}.mrvl-overlay-shell.attribution-dialog-shell p.copyright_info{margin-top:8px;line-height:17px}.mrvl-overlay-shell.attribution-dialog-shell .pointer{display:block;position:absolute;background-color:#fff;right:-5px;left:auto;top:200px;-webkit-transform:rotate(225deg);transform:rotate(225deg);width:10px;height:10px;border-radius:2px;border-top:1px solid rgba(0,0,0,.1);border-right:1px solid rgba(0,0,0,.1);box-shadow:4px -4px 4px 0 rgba(0,0,0,.05)}.mrvl-overlay-shell.attribution-dialog-shell .pointer.on-right{-webkit-transform:rotate(45deg);transform:rotate(45deg)}",""])},574:function(e,t,i){var n,o;n=[i(0),i(2),i(3),i(1),i(7),i(36),i(577),i(578),i(8),i(579)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d){return n.View.extend({_transitionTime:5e3,_quoteSetMap:{upgradeToPremium:a.upgradeToPremiumQuotes,default:a.defaultQuotes},_appCssId:"slate",_quoteSetName:"default",initialize:function(e){t.bindAll(this,t.functionsIn(this)),e&&"object"==typeof e&&(e.quoteSetName&&this._quoteSetMap.hasOwnProperty(e.quoteSetName)&&(this._quoteSetName=e.quoteSetName),e.transitionTime&&(this._transitionTime=e.transitionTime),e.appCssId&&(this._appCssId=e.appCssId),e.location&&(this._location=e.location)),this._quoteIndex=0,this._quoteData=[],this._quotesLoadedDefer=i.defer(),r.runSilent("SMBQuoteLoaderExperiment",{showSMBQuotesForSMBUsers:function(e){var t=e.getMetadata();this._setQuotesFromExperimentData(t),this._quotesLoadedDefer.resolve()}.bind(this)}).done(),r.runSilent("quotesForNonSMBExperiment",{showSMBQuotesForNonSMBUsers:function(e){var t=e.getMetadata();this._setQuotesFromExperimentData(t),this._quotesLoadedDefer.resolve()}.bind(this),control:function(e){t.isEmpty(this._quoteData)&&(this._quoteData=t.shuffle(this._quoteSetMap[this._quoteSetName])),this._quotesLoadedDefer.resolve()}.bind(this)}).done()},_setQuotesFromExperimentData:function(e){var i=t.pickBy(e,function(e,t,i){return t.indexOf(this._location)>-1}.bind(this)),n=this._createQuotesDataObj(i);this._quoteData=t.shuffle(n)},_createQuotesDataObj:function(e){var i=[];return e&&t.isObject(e)&&t.each(e,function(e,t){i.push({text:e})}.bind(this)),i},_whenQuotesLoaded:function(){return this._quotesLoadedDefer||(this._quotesLoadedDefer=i.defer()),this._quotesLoadedDefer.promise},clear:function(){this._isVisible=!1,this._currentQuoteTimer&&(window.clearTimeout(this._currentQuoteTimer),this._currentQuoteTimer=null)},timeLastQuoteShown:function(){return this._shownAt},remove:function(){this.$el.empty()},setAppCssId:function(e){this._appCssId=e},showNextQuote:function(){if(this._isVisible){var e=l.getString(this._quoteData[this._quoteIndex].text),t=this._quoteData[this._quoteIndex].author;this.quote$.removeClass("visible"),t?(this.quoteAuthor$.text(t),this.quoteAuthor$.removeClass("hide")):this.quoteAuthor$.addClass("hide"),this.quoteText$.text(e),this.quote$.addClass("visible"),this._shownAt=(new Date).getTime(),this._currentQuoteTimer=window.setTimeout(this.showNextQuote,this._transitionTime),this._quoteIndex=(this._quoteIndex+1)%this._quoteData.length}},render:function(){return this._isVisible=!0,this.$el.html(s.toString()),this.quote$=this.$el.find(".quote"),this.quoteText$=this.quote$.find(".text"),this.quoteAuthor$=this.quote$.find(".author"),this.quoteText$.addClass(this._appCssId),this._whenQuotesLoaded().then(function(){r.runSilent("SMBQuoteLoaderExperiment",{showSMBQuotesForSMBUsers:function(e){e&&e.track()},control:function(e){e&&e.track()}}).done(),r.runSilent("quotesForNonSMBExperiment",{showSMBQuotesForNonSMBUsers:function(e){e&&e.track()},control:function(e){e&&e.track()}}).done(),this.showNextQuote()}.bind(this)),this}})}.apply(t,n))||(e.exports=o)},577:function(e){e.exports={defaultQuotes:[{text:"quote-loader-default-hashtag"},{text:"quote-loader-default-social-media"},{text:"quote-loader-default-impression"},{text:"quote-loader-default-sleep"},{text:"quote-loader-default-branding"},{text:"quote-loader-default-lifestyle"},{text:"quote-loader-default-consistency"},{text:"quote-loader-default-audience"}],upgradeToPremiumQuotes:[{text:"quote-loader-upgrade-to-premium-brand"},{text:"quote-loader-upgrade-to-premium-logo"},{text:"quote-loader-upgrade-to-premium-themes"},{text:"quote-loader-upgrade-to-premium-story"}]}},578:function(e,t){e.exports='<div class="mrvl-quote-loader">\n    <div class="quote">\n        <q class="text"></q>\n        <cite class="author"></cite>\n    </div>\n</div>\n'},579:function(e,t,i){var n=i(580);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(27)(n,o);n.locals&&(e.exports=n.locals)},580:function(e,t,i){(e.exports=i(26)(!1)).push([e.i,".mrvl-quote-loader .quote{position:absolute;top:0;left:0;width:100%;transition:opacity .5s;opacity:0;padding-right:20px;padding-left:20px}.mrvl-quote-loader .quote.visible{opacity:1}.mrvl-quote-loader .quote .text{display:block;font-size:34px;font-family:brandon-grotesque,adobe-clean,sans-serif;color:#00b1ef;margin-bottom:22px;font-weight:400}.mrvl-quote-loader .quote .text.video,.mrvl-quote-loader .quote .text.voice{color:#ff4931}.mrvl-quote-loader .quote .text.page,.mrvl-quote-loader .quote .text.slate{color:#00b1ef}.mrvl-quote-loader .quote .text.post,.mrvl-quote-loader .quote .text.theo{color:#10c459}.mrvl-quote-loader .quote .text.pmref{color:#f17ddc}.mrvl-quote-loader .quote .author{display:block;font-family:brandon-grotesque,adobe-clean,sans-serif;font-size:18px;font-weight:400;color:#82919b;text-transform:uppercase}",""])},593:function(e,t,i){var n,o;n=[i(0),i(2),i(1),i(3),i(5),i(7),i(574),i(8),i(594),i(595)],void 0===(o=function(e,t,i,n,o,r,a,s,l,d){"use strict";return i.View.extend({initialize:function(){t.bindAll(this,t.functionsIn(this)),this.TRANSITION_TIME=400,this._temporaryClasses=[],this._quoteLoaderView=new a({location:"editor"}),window.marvel.events.on("show-interstitial",this.handleShow),window.marvel.events.on("hide-interstitial",this.handleHide),window.marvel.events.on("interstitial-error",this.handleInterstitialError)},handleShow:function(e){this._isShowing?e.afterShowingDefer&&e.afterShowingDefer.resolve():(this._fnBeforeHiding=e.fnBeforeHiding,this._isShowing=!0,this.render(e.typeName),t.delay(function(){window.marvel.events.trigger("spark-dialog-shown"),this.$el.addClass("show"),e.afterShowingDefer&&t.delay(function(){e.afterShowingDefer.resolve()},this.TRANSITION_TIME)}.bind(this),1))},_doHide:function(){if(this._isShowing){var e;e=this._fnBeforeHiding?this._fnBeforeHiding():n.resolve();var i=function(){this._isShowing=!1,this._quoteLoaderView.clear(),window.marvel.events.trigger("spark-dialog-closed"),this.$el.removeClass("show"),t.each(this._temporaryClasses,function(e){this.$el.removeClass(e)}.bind(this)),this._temporaryClasses=[],t.delay(function(){this._quoteLoaderView.remove(),this.$el.remove(),window.marvel.events.trigger("editor-showing-interstitial-hidden")}.bind(this),10)}.bind(this);e.then(i,i).done()}},handleHide:function(e){var i=(new Date).getTime(),n=this._quoteLoaderView.timeLastQuoteShown();n&&i-n<10?t.delay(function(){this._doHide()}.bind(this),10-(i-n)):this._doHide()},handleInterstitialError:function(e){(e.addClass&&(this._temporaryClasses.push(e.addClass),this.$el.addClass(e.addClass)),e.addElement$)&&this.$el.find(".error-detail").empty().append(e.addElement$)},render:function(t){this.$el=e(".mrvl-interstitial-wrapper"),this.$el&&this.$el[0]||(this.$el=e("<div></div>"),e("body").append(this.$el)),this.$el.attr("class","mrvl-interstitial-wrapper "+t),this.$el.attr("data-auto","mrvl-interstitial-wrapper"),this.$el.html(l.toString()),this.$el.find(".brand-name").text(s.getString("product-name")),this.quoteLoaderEl$=this.$el.find(".quotes"),this._quoteLoaderView.setElement(this.quoteLoaderEl$),this._quoteLoaderView.setAppCssId(t),this._quoteLoaderView.render()}})}.apply(t,n))||(e.exports=o)},594:function(e,t){e.exports='<div class="mrvl-interstitial-splash md-modal">\n    <div class="splash-inner">\n      <div class="spinner"></div>\n      <div class="quotes"></div>\n      <div class="error-detail"></div>\n    </div>\n</div>\n'},595:function(e,t,i){var n=i(596);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(27)(n,o);n.locals&&(e.exports=n.locals)},596:function(e,t,i){(e.exports=i(26)(!1)).push([e.i,".mrvl-interstitial-wrapper{position:fixed;top:0;left:100%;width:100%;height:100%;opacity:0;border-top:1px solid #ccc;background-color:#fff;z-index:9999}.mrvl-interstitial-wrapper.show{opacity:1;left:0;transition:all .4s}.mrvl-interstitial-wrapper.error-state .mrvl-interstitial-splash .error-detail{display:block}.mrvl-interstitial-wrapper.error-state .mrvl-interstitial-splash .quotes,.mrvl-interstitial-wrapper.error-state .mrvl-interstitial-splash .spinner{display:none}.mrvl-interstitial-splash{position:relative;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;width:100%;height:100%;z-index:27;transition:opacity .4s}.mrvl-interstitial-splash .splash-inner{width:100%;height:155px;text-align:center}.mrvl-interstitial-splash .spinner{position:relative;margin:0 auto 45px;font-size:4.5px;text-indent:-9999em;border:1.1em solid #e2e6e7;border-left:1.1em solid #f6f7f8;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation:load8 1.1s infinite linear;animation:load8 1.1s infinite linear;will-change:transform;border-radius:50%;width:60px;height:60px}.mrvl-interstitial-splash .spinner:after{border-radius:50%;width:10em;height:10em}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.mrvl-interstitial-splash .quotes{position:relative;width:100%}.mrvl-interstitial-splash .error-detail{display:none}.mrvl-interstitial-splash .error-detail h3{font-size:32px}.mrvl-interstitial-splash .error-detail p{display:inline-block;width:420px;line-height:1.5em;padding:20px 0 40px}.mrvl-interstitial-splash .error-detail button{margin:0 10px}",""])},98:function(e,t,i){var n,o;n=[i(0),i(2),i(3),i(1),i(220),i(221),i(7),i(11),i(40)],void 0===(o=function(e,t,i,n,o,r,a,s,l){"use strict";var d=new s({color:"rebeccapurple",name:"userProfileController"});return new(n.Model.extend({initUserProfile:function(){return this._currentUserProfile?i.resolve():(this._currentUserProfile=new o,this._currentUserProfile.initProfile({useFeaureFlags:!0,featureController:a,dataObj:{},profileId:"spark",type:"spark",logger:d}))},onboardSettings:function(e){var i={mode:"setup",dontAllowCloseByKeyboard:!0,fieldIds:["displayName","share-default-to-unlisted","avatar"],required:["displayName","share-default-to-unlisted"]};return e&&t.assign(i,e),this._displaySettingsForEdit(i)},getChangedSettingsToSubmit:function(e){var i={};return t.each(e,function(e,n){"_"!==n.charAt(0)&&("object"!=typeof e||t.isArray(e)?i[n]=e:i[n]="featureFlipperChanges"!==n?this.getChangedSettingsToSubmit(e):e)}.bind(this)),i},setUserSettings:function(e){var n=i.defer();return t.each(e,function(e,t){"enableMarketing"===t&&console.log("try to save "+JSON.stringify(e))}.bind(this)),e=this.getChangedSettingsToSubmit(e),this._currentUserProfile.saveUpdatedProfileSettings(e).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},refreshUserProfile:function(){if(this.userProfileDeferred){if(!this.userProfileDeferred.isFulfilled())return this.userProfileDeferred.promise;delete this.userProfileDeferred}return this.userProfileLoaded()},userProfileLoaded:function(){return this.userProfileDeferred||(this.userProfileDeferred=i.defer(),a.featuresLoaded().then(function(){this.initUserProfile().then(function(){this.userProfileDeferred.resolve(this._currentUserProfile)}.bind(this),function(e){window.marvel.logger.error("Failed to load user profile "+e.status,e),this.userProfileDeferred.reject(e.status)}.bind(this))}.bind(this)).done()),this.userProfileDeferred.promise},getGetNoticedSettings:function(){return this._currentUserProfile.getGetNoticedSettings()},getProfile:function(){return this._currentUserProfile},editSettings:function(e){var i={mode:"edit"};return e&&t.assign(i,e),this._displaySettingsForEdit(i)},_displaySettingsForEdit:function(e){e.fieldIds||(e.fieldIds=["share-default-to-unlisted"],a.hasFeature("user-settings-allow-show-account-info")&&e.fieldIds.push("displayName","avatar","email","entitlement"));var n=i.defer();e=t.clone(e),this._mode=e.mode;var o=!1;return r.showLoadingSpinner().then(function(e){o="canceled"===e}.bind(this)),this.userProfileLoaded().then(function(){return e.isFeatureFlipperRequest?void 0:this._currentUserProfile.emailListSettingsLoaded()}.bind(this)).then(function(s){if(o)return n.resolve();r.hideLoadingSpinner(),a.hasFeature("show-user-flag-image-source-stock")&&e.fieldIds.push("user-flag-image-source-stock"),t.each(l.imageServices.dooplo,function(t){a.hasFeature(l.imageServices.showFlagPrefixDooplo+t)&&e.fieldIds.push(l.imageServices.flagPrefixDooplo+t)}.bind(this));var h=e.fieldIds.indexOf("share-default-to-unlisted");-1!==h&&(this.getGetNoticedSettings().supported||e.fieldIds.splice(h,1));if(e.ignoreIfExisting&&this._currentUserProfile.lastModified)return n.resolve();var c=i.defer();e.userProfile=this._currentUserProfile,e.canEditNonBooleans=!1,e.closeDefer=c,"success"===s?e.fieldIds.push("spark-newsletter","tips-and-tricks"):"unableToLoadEmailSettingsForQualifiedUser"===s&&(e.unableToLoadEmailSettingsForQualifiedUser=!0),r.editProfile(e).then(function(e){e?this.setUserSettings(e).then(function(e){c.resolve(!0),n.resolve(e)}.bind(this),function(e){n.reject(e)}.bind(this)):(c.resolve(!0),n.resolve())}.bind(this),function(e){d.error("editProfile had error",e),n.reject(e)}).done()}.bind(this),function(e){n.reject(e)}).done(),n.promise}}))}.apply(t,n))||(e.exports=o)},99:function(e,t,i){var n,o;n=[i(1),i(3)],void 0===(o=function(e,t){"use strict";return new(e.Model.extend({getPublisher:function(){return this._publisher?t.resolve(this._publisher):(this._getPublisherDefer||(this._getPublisherDefer=t.defer(),this.getUtils().then(function(e){i.e("mui-cppublisher").then(function(t){var n=i(331);this._publisher=new n({cpUtils:e}),this._getPublisherDefer.resolve(this._publisher)}.bind(this).bind(null,i)).catch(i.oe)}.bind(this))),this._getPublisherDefer.promise)},getUtils:function(){return this._cpUtils?t.resolve(this._cpUtils):(this._getUtilsDefer||(this._getUtilsDefer=t.defer(),this.getPubController().then(function(e){i.e("mui-cputils").then(function(e){var t=i(332);this._cpUtils=new t({pubController:this._pubController}),this._getUtilsDefer.resolve(this._cpUtils)}.bind(this).bind(null,i)).catch(i.oe)}.bind(this))),this._getUtilsDefer.promise)},getPubController:function(){return this._pubController?t.resolve(this._pubController):(this._getPubControllerDefer||(this._getPubControllerDefer=t.defer(),i.e("mui-pubcontroller").then(function(e){this._pubController=i(333),this._getPubControllerDefer.resolve(this._pubController)}.bind(this).bind(null,i)).catch(i.oe)),this._getPubControllerDefer.promise)}}))}.apply(t,n))||(e.exports=o)},996:function(e,t,i){var n=i(28),o=i(17),r=i(1369),a=i(1180),s=i(1025),l={textDefaultsDict:r,assetsDict:s,sectionTypes:["title","single-column","split-layout","card-layout","column-layout","spacer","fullscreen-photo","window","banner","full-width-photo","50-50","column-overlay","photo-grid","author","credits","back-matter"],isUnderSection:{"fullscreen-photo":!0,"column-overlay":!0},customThemeComponentRegistry:{},customThemeTemplates:{},targetParagraphVisualDimensions:{height:20,width:8},itemTypeRelativeSizeMap:{title:3.9,subtitle:1.1,heading:2.5,subheading:1.5,paragraph:1,blockquote:1.3,button:.9,"unordered-list":1,"ordered-list":1,"inline-image-caption":.8,"full-width-caption":.8,"photo-grid-caption":.8,"fill-screen-caption":1.3,"window-caption":1.3},proximaNovaMetrics:{aboveDivider:66,belowDivider:149,ascentDescentRatio:1.075,spaceWidthRatio:.25},registerCustomThemeTemplates:function(e,t){var i=t.templates;if(i)for(var n=i.length,o=0;o<n;o++){var r=i[o],a=r.replace(/_/g,"-");this.customThemeTemplates[r]="#"+a+"-template"}},getCustomThemeTemplates:function(){var e=this.customThemeTemplates,t={};for(var i in e)t[i]=$(e[i]).text();return t},registerCustomThemeComponent:function(e,t){e&&t&&(this.customThemeComponentRegistry[e]=t,this.registerCustomThemeTemplates(e,t))},unregisterCustomThemeComponent:function(e){e&&(this.customThemeComponentRegistry[e]=void 0)},generateCustomThemeSectionSettings:function(){for(var e=this.sectionTypes,t=this.isUnderSection,i={},n=0;n<e.length;n++){var o=e[n];i[o]={behavior:"default-"+o,layerName:t[o]?"under":"over"}}return i},getCustomThemePayload:function(e){var t=n.extend({},e);t.components={},t.isCustomTheme=!0,t.name=a.getUniqueName(e),t.section_settings||(t.section_settings=this.generateCustomThemeSectionSettings());var i=n.extend({spacing:{},column:{},authorSection:{},creditsSection:{}},e.components);for(var o in i){var r=i[o],s=this.customThemeComponentRegistry[o];r&&s?s.process(e,r,t):console.warn&&console.warn("Unknown custom theme component: "+o)}return t},getFontIncludes:function(e){var t=this._getFontsInTheme(e);return n.map(t,function(e,t){return{src:e+".gz.js",method:"script",is_script:!0,is_link:!1}})},getCSS:function(e){var t=this.getCustomThemePayload(e),i=$("#ct-css-template").text();return o.render(i,{theme:t},this.getCustomThemeTemplates()).replace(/^\s*\n/gm,"")},convertColorToRGBA:function(e){var t=e.value;return"rgba("+t.r+","+t.g+","+t.b+","+(e.alpha||1)+")"},cloneColorWithAlpha:function(e,t){var i=n.cloneDeep(e);return i.alpha=t,i},splitLengthValue:function(e){var t=/\s*((?:-?[0-9]*\.[0-9]+)|(?:-?[0-9]+))([^\s;]*)\s*/.exec(e||"")||[];return[t[1]||"",t[2]||""]},scaleLengthValue:function(e,t,i){var n=this.splitLengthValue(e||""),o=parseFloat(n[0]||"0")*parseFloat(t),r=n[1]||"";return i&&(o=Math.round(o)),o+r},getTextDefaultsForComponent:function(e,t){var i=r["proxima-nova"],n=r["proxima-nova-condensed"];return(r[e]||i).data[t]||i.data[t]||n.data[t]},getPaddingsForFont:function(e,t,i,n){var o=Math.round(i*n),r=Math.round(i*(1-n));return{paddingTop:o,paddingBottom:r,mobile:{paddingTop:Math.ceil(o*(5/7)),paddingBottom:Math.floor(r*(5/7))}}},getTextSettingsForComponent:function(e,t,i){t=t||{fontFamily:"proxima-nova"};var o,a,s=this.getTextDefaultsForComponent(t.fontFamily,e),l=n.extend({},i),d=!1,h=!1,c=n.extend({},s,t);if(c.fontFamily=(r[t.fontFamily]||{}).family||t.fontFamily,l.customFontsUsed){for(var u=l.customFontsUsed,p=0,g=u.length;p<g;p++)if(!d){var f=u[p];if(c.fontFamily===f.cssName){for(var m in o=f.metrics)o[m]||(o[m]=this.proximaNovaMetrics[m]);d=!0;break}}if(d){var v=this.targetParagraphVisualDimensions,b=(Math.ceil(v.height/o.ascentDescentRatio)+Math.floor(v.width/o.xWidthRatio))/2;b*=this.itemTypeRelativeSizeMap[e],c.fontSize=Math.round(b)+"px";var w=o.ascentDescentRatio*Math.floor(v.height/3)/b;if(w=1+(w+=o.spaceWidthRatio),c.lineHeight=Math.round(10*w)/10,"title"===e||"button"===e){var k,S=o.aboveDivider,_=o.belowDivider;k=S>_?Math.abs(S/(S+_)):Math.abs(_/(S+_)),c.paddingShiftRatio=Math.round(100*k)/100,h=!0}}}if(!("title"!==e&&"button"!==e||h||d)){var x=r[c.fontFamily];if(x){var y=x.data[e];y&&(c.paddingShiftRatio=parseFloat(y.paddingShiftRatio)||a,a=!0)}}c.fontScale&&c.fontSize&&(c.fontSize=this.scaleLengthValue(c.fontSize,c.fontScale,!0)),c.lineHeightScale&&c.lineHeight&&(c.lineHeight=this.scaleLengthValue(c.lineHeight,c.lineHeightScale));var C={title:.53,subtitle:.83,heading:.6,subheading:.74,paragraph:.92,blockquote:.74,button:.96,"unordered-list":.92,"ordered-list":.92,"inline-image-caption":.98,"full-width-caption":.98,"photo-grid-caption":.98,"fill-screen-caption":.74,"window-caption":.74}[e]||.75,T={title:1,subtitle:.97,heading:1,subheading:1,paragraph:.97,blockquote:1,button:1,"unordered-list":.97,"ordered-list":.97,"inline-image-caption":.91,"full-width-caption":.91,"photo-grid-caption":.91,"fill-screen-caption":1,"window-caption":1}[e]||1;return c.mobile={fontSize:this.scaleLengthValue(c.fontSize,C,!0),lineHeight:this.scaleLengthValue(c.lineHeight,T)},c},_getFontsInTheme:function(e){return n.keys(n.reduce(e,function e(t,i,o){return n.isPlainObject(i)?n.reduce(i,e,t):("fontFamily"===o&&i in r&&(t[i]=!0),t)},{}))}};e.exports=l}}]);
//# sourceMappingURL=slate-web-81150d44.js.map