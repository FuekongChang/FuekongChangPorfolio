!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=161)}([function(t,e,n){var i;/*! jQuery v2.1.3 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */!function(e,n){"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,o){var r=[],a=r.slice,s=r.concat,l=r.push,c=r.indexOf,u={},h=u.toString,d=u.hasOwnProperty,f={},p=n.document,g="2.1.3",m=function(t,e){return new m.fn.init(t,e)},v=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,_=/^-ms-/,y=/-([\da-z])/gi,b=function(t,e){return e.toUpperCase()};function w(t){var e=t.length,n=m.type(t);return"function"!==n&&!m.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t))}m.fn=m.prototype={jquery:g,constructor:m,selector:"",length:0,toArray:function(){return a.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:a.call(this)},pushStack:function(t){var e=m.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return m.each(this,t,e)},map:function(t){return this.pushStack(m.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:l,sort:r.sort,splice:r.splice},m.extend=m.fn.extend=function(){var t,e,n,i,o,r,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||m.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(i=t[e])&&(c&&i&&(m.isPlainObject(i)||(o=m.isArray(i)))?(o?(o=!1,r=n&&m.isArray(n)?n:[]):r=n&&m.isPlainObject(n)?n:{},a[e]=m.extend(c,r,i)):void 0!==i&&(a[e]=i));return a},m.extend({expando:"jQuery"+(g+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===m.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!m.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"===m.type(t)&&!t.nodeType&&!m.isWindow(t)&&!(t.constructor&&!d.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?u[h.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=m.trim(t))&&(1===t.indexOf("use strict")?((e=p.createElement("script")).text=t,p.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(_,"ms-").replace(y,b)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var i=0,o=t.length,r=w(t);if(n){if(r)for(;o>i&&!1!==e.apply(t[i],n);i++);else for(i in t)if(!1===e.apply(t[i],n))break}else if(r)for(;o>i&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(v,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(w(Object(t))?m.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:c.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;n>i;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,a=!n;r>o;o++)!e(t[o],o)!==a&&i.push(t[o]);return i},map:function(t,e,n){var i,o=0,r=t.length,a=[];if(w(t))for(;r>o;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return s.apply([],a)},guid:1,proxy:function(t,e){var n,i,o;return"string"==typeof e&&(n=t[e],e=t,t=n),m.isFunction(t)?(i=a.call(arguments,2),(o=function(){return t.apply(e||this,i.concat(a.call(arguments)))}).guid=t.guid=t.guid||m.guid++,o):void 0},now:Date.now,support:f}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){u["[object "+e+"]"]=e.toLowerCase()});var S=function(t){var e,n,i,o,r,a,s,l,c,u,h,d,f,p,g,m,v,_,y,b="sizzle"+1*new Date,w=t.document,S=0,x=0,C=at(),T=at(),I=at(),k=function(t,e){return t===e&&(h=!0),0},A=1<<31,P={}.hasOwnProperty,E=[],$=E.pop,D=E.push,M=E.push,O=E.slice,B=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",H="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",L=R.replace("w","w#"),V="\\["+H+"*("+R+")(?:"+H+"*([*^$|!~]?=)"+H+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+H+"*\\]",z=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",F=new RegExp(H+"+","g"),W=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=new RegExp("^"+H+"*,"+H+"*"),j=new RegExp("^"+H+"*([>+~]|"+H+")"+H+"*"),G=new RegExp("="+H+"*([^\\]'\"]*?)"+H+"*\\]","g"),q=new RegExp(z),Y=new RegExp("^"+L+"$"),X={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R.replace("w","w*")+")"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+H+"?|("+H+")|.)","ig"),it=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ot=function(){d()};try{M.apply(E=O.call(w.childNodes),w.childNodes),E[w.childNodes.length].nodeType}catch(t){M={apply:E.length?function(t,e){D.apply(t,O.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function rt(t,e,i,o){var r,s,c,u,h,p,v,_,S,x;if((e?e.ownerDocument||e:w)!==f&&d(e),e=e||f,i=i||[],u=e.nodeType,"string"!=typeof t||!t||1!==u&&9!==u&&11!==u)return i;if(!o&&g){if(11!==u&&(r=J.exec(t)))if(c=r[1]){if(9===u){if(!(s=e.getElementById(c))||!s.parentNode)return i;if(s.id===c)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(c))&&y(e,s)&&s.id===c)return i.push(s),i}else{if(r[2])return M.apply(i,e.getElementsByTagName(t)),i;if((c=r[3])&&n.getElementsByClassName)return M.apply(i,e.getElementsByClassName(c)),i}if(n.qsa&&(!m||!m.test(t))){if(_=v=b,S=e,x=1!==u&&t,1===u&&"object"!==e.nodeName.toLowerCase()){for(p=a(t),(v=e.getAttribute("id"))?_=v.replace(et,"\\$&"):e.setAttribute("id",_),_="[id='"+_+"'] ",h=p.length;h--;)p[h]=_+mt(p[h]);S=tt.test(t)&&pt(e.parentNode)||e,x=p.join(",")}if(x)try{return M.apply(i,S.querySelectorAll(x)),i}catch(t){}finally{v||e.removeAttribute("id")}}}return l(t.replace(W,"$1"),e,i,o)}function at(){var t=[];return function e(n,o){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=o}}function st(t){return t[b]=!0,t}function lt(t){var e=f.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),o=t.length;o--;)i.attrHandle[n[o]]=e}function ut(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||A)-(~t.sourceIndex||A);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ft(t){return st(function(e){return e=+e,st(function(n,i){for(var o,r=t([],n.length,e),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function pt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=rt.support={},r=rt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},d=rt.setDocument=function(t){var e,o,a=t?t.ownerDocument||t:w;return a!==f&&9===a.nodeType&&a.documentElement?(f=a,p=a.documentElement,(o=a.defaultView)&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",ot,!1):o.attachEvent&&o.attachEvent("onunload",ot)),g=!r(a),n.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=lt(function(t){return t.appendChild(a.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(a.getElementsByClassName),n.getById=lt(function(t){return p.appendChild(t).id=b,!a.getElementsByName||!a.getElementsByName(b).length}),n.getById?(i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(t){var e=t.replace(nt,it);return function(t){return t.getAttribute("id")===e}}):(delete i.find.ID,i.filter.ID=function(t){var e=t.replace(nt,it);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(t,e){return g?e.getElementsByClassName(t):void 0},v=[],m=[],(n.qsa=Z.test(a.querySelectorAll))&&(lt(function(t){p.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+H+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+H+"*(?:value|"+N+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")}),lt(function(t){var e=a.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+H+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Z.test(_=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&lt(function(t){n.disconnectedMatch=_.call(t,"div"),_.call(t,"[s!='']:x"),v.push("!=",z)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=Z.test(p.compareDocumentPosition),y=e||Z.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},k=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===a||t.ownerDocument===w&&y(w,t)?-1:e===a||e.ownerDocument===w&&y(w,e)?1:u?B(u,t)-B(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,s=[t],l=[e];if(!o||!r)return t===a?-1:e===a?1:o?-1:r?1:u?B(u,t)-B(u,e):0;if(o===r)return ut(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},a):f},rt.matches=function(t,e){return rt(t,null,null,e)},rt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&d(t),e=e.replace(G,"='$1']"),!(!n.matchesSelector||!g||v&&v.test(e)||m&&m.test(e)))try{var i=_.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return rt(e,f,null,[t]).length>0},rt.contains=function(t,e){return(t.ownerDocument||t)!==f&&d(t),y(t,e)},rt.attr=function(t,e){(t.ownerDocument||t)!==f&&d(t);var o=i.attrHandle[e.toLowerCase()],r=o&&P.call(i.attrHandle,e.toLowerCase())?o(t,e,!g):void 0;return void 0!==r?r:n.attributes||!g?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},rt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},rt.uniqueSort=function(t){var e,i=[],o=0,r=0;if(h=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(k),h){for(;e=t[r++];)e===t[r]&&(o=i.push(r));for(;o--;)t.splice(i[o],1)}return u=null,t},o=rt.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=o(e);return n},(i=rt.selectors={cacheLength:50,createPseudo:st,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(nt,it),t[3]=(t[3]||t[4]||t[5]||"").replace(nt,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||rt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&rt.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&q.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(nt,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|"+H+")"+t+"("+H+"|$)"))&&C(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var o=rt.attr(i,t);return null==o?"!="===e:!e||(o+="","="===e?o===n:"!="===e?o!==n:"^="===e?n&&0===o.indexOf(n):"*="===e?n&&o.indexOf(n)>-1:"$="===e?n&&o.slice(-n.length)===n:"~="===e?(" "+o.replace(F," ")+" ").indexOf(n)>-1:"|="===e&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,d,f,p,g=r!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),_=!l&&!s;if(m){if(r){for(;g;){for(h=e;h=h[g];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&_){for(f=(c=(u=m[b]||(m[b]={}))[t]||[])[0]===S&&c[1],d=c[0]===S&&c[2],h=f&&m.childNodes[f];h=++f&&h&&h[g]||(d=f=0)||p.pop();)if(1===h.nodeType&&++d&&h===e){u[t]=[S,f,d];break}}else if(_&&(c=(e[b]||(e[b]={}))[t])&&c[0]===S)d=c[1];else for(;(h=++f&&h&&h[g]||(d=f=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(_&&((h[b]||(h[b]={}))[t]=[S,d]),h!==e)););return(d-=o)===i||d%i==0&&d/i>=0}}},PSEUDO:function(t,e){var n,o=i.pseudos[t]||i.setFilters[t.toLowerCase()]||rt.error("unsupported pseudo: "+t);return o[b]?o(e):o.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,n){for(var i,r=o(t,e),a=r.length;a--;)t[i=B(t,r[a])]=!(n[i]=r[a])}):function(t){return o(t,0,n)}):o}},pseudos:{not:st(function(t){var e=[],n=[],i=s(t.replace(W,"$1"));return i[b]?st(function(t,e,n,o){for(var r,a=i(t,null,o,[]),s=t.length;s--;)(r=a[s])&&(t[s]=!(e[s]=r))}):function(t,o,r){return e[0]=t,i(e,null,r,n),e[0]=null,!n.pop()}}),has:st(function(t){return function(e){return rt(t,e).length>0}}),contains:st(function(t){return t=t.replace(nt,it),function(e){return(e.textContent||e.innerText||o(e)).indexOf(t)>-1}}),lang:st(function(t){return Y.test(t||"")||rt.error("unsupported lang: "+t),t=t.replace(nt,it).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return Q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ft(function(){return[0]}),last:ft(function(t,e){return[e-1]}),eq:ft(function(t,e,n){return[0>n?n+e:n]}),even:ft(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:ft(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:ft(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:ft(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=dt(e);function gt(){}function mt(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function vt(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=x++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,a){var s,l,c=[S,r];if(a){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if((s=(l=e[b]||(e[b]={}))[i])&&s[0]===S&&s[1]===r)return c[2]=s[2];if(l[i]=c,c[2]=t(e,n,a))return!0}}}function _t(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function yt(t,e,n,i,o){for(var r,a=[],s=0,l=t.length,c=null!=e;l>s;s++)(r=t[s])&&(!n||n(r,i,o))&&(a.push(r),c&&e.push(s));return a}function bt(t,e,n,i,o,r){return i&&!i[b]&&(i=bt(i)),o&&!o[b]&&(o=bt(o,r)),st(function(r,a,s,l){var c,u,h,d=[],f=[],p=a.length,g=r||function(t,e,n){for(var i=0,o=e.length;o>i;i++)rt(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!r&&e?g:yt(g,d,t,s,l),v=n?o||(r?t:p||i)?[]:a:m;if(n&&n(m,v,s,l),i)for(c=yt(v,f),i(c,[],s,l),u=c.length;u--;)(h=c[u])&&(v[f[u]]=!(m[f[u]]=h));if(r){if(o||t){if(o){for(c=[],u=v.length;u--;)(h=v[u])&&c.push(m[u]=h);o(null,v=[],c,l)}for(u=v.length;u--;)(h=v[u])&&(c=o?B(r,h):d[u])>-1&&(r[c]=!(a[c]=h))}}else v=yt(v===a?v.splice(p,v.length):v),o?o(null,a,v,l):M.apply(a,v)})}function wt(t){for(var e,n,o,r=t.length,a=i.relative[t[0].type],s=a||i.relative[" "],l=a?1:0,u=vt(function(t){return t===e},s,!0),h=vt(function(t){return B(e,t)>-1},s,!0),d=[function(t,n,i){var o=!a&&(i||n!==c)||((e=n).nodeType?u(t,n,i):h(t,n,i));return e=null,o}];r>l;l++)if(n=i.relative[t[l].type])d=[vt(_t(d),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[b]){for(o=++l;r>o&&!i.relative[t[o].type];o++);return bt(l>1&&_t(d),l>1&&mt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(W,"$1"),n,o>l&&wt(t.slice(l,o)),r>o&&wt(t=t.slice(o)),r>o&&mt(t))}d.push(n)}return _t(d)}function St(t,e){var n=e.length>0,o=t.length>0,r=function(r,a,s,l,u){var h,d,p,g=0,m="0",v=r&&[],_=[],y=c,b=r||o&&i.find.TAG("*",u),w=S+=null==y?1:Math.random()||.1,x=b.length;for(u&&(c=a!==f&&a);m!==x&&null!=(h=b[m]);m++){if(o&&h){for(d=0;p=t[d++];)if(p(h,a,s)){l.push(h);break}u&&(S=w)}n&&((h=!p&&h)&&g--,r&&v.push(h))}if(g+=m,n&&m!==g){for(d=0;p=e[d++];)p(v,_,a,s);if(r){if(g>0)for(;m--;)v[m]||_[m]||(_[m]=$.call(l));_=yt(_)}M.apply(l,_),u&&!r&&_.length>0&&g+e.length>1&&rt.uniqueSort(l)}return u&&(S=w,c=y),v};return n?st(r):r}return gt.prototype=i.filters=i.pseudos,i.setFilters=new gt,a=rt.tokenize=function(t,e){var n,o,r,a,s,l,c,u=T[t+" "];if(u)return e?0:u.slice(0);for(s=t,l=[],c=i.preFilter;s;){for(a in(!n||(o=U.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),n=!1,(o=j.exec(s))&&(n=o.shift(),r.push({value:n,type:o[0].replace(W," ")}),s=s.slice(n.length)),i.filter)!(o=X[a].exec(s))||c[a]&&!(o=c[a](o))||(n=o.shift(),r.push({value:n,type:a,matches:o}),s=s.slice(n.length));if(!n)break}return e?s.length:s?rt.error(t):T(t,l).slice(0)},s=rt.compile=function(t,e){var n,i=[],o=[],r=I[t+" "];if(!r){for(e||(e=a(t)),n=e.length;n--;)(r=wt(e[n]))[b]?i.push(r):o.push(r);(r=I(t,St(o,i))).selector=t}return r},l=rt.select=function(t,e,o,r){var l,c,u,h,d,f="function"==typeof t&&t,p=!r&&a(t=f.selector||t);if(o=o||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&n.getById&&9===e.nodeType&&g&&i.relative[c[1].type]){if(!(e=(i.find.ID(u.matches[0].replace(nt,it),e)||[])[0]))return o;f&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(l=X.needsContext.test(t)?0:c.length;l--&&(u=c[l],!i.relative[h=u.type]);)if((d=i.find[h])&&(r=d(u.matches[0].replace(nt,it),tt.test(c[0].type)&&pt(e.parentNode)||e))){if(c.splice(l,1),!(t=r.length&&mt(c)))return M.apply(o,r),o;break}}return(f||s(t,p))(r,e,!g,o,tt.test(t)&&pt(e.parentNode)||e),o},n.sortStable=b.split("").sort(k).join("")===b,n.detectDuplicates=!!h,d(),n.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(f.createElement("div"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ct(N,function(t,e,n){var i;return n?void 0:!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),rt}(n);m.find=S,m.expr=S.selectors,m.expr[":"]=m.expr.pseudos,m.unique=S.uniqueSort,m.text=S.getText,m.isXMLDoc=S.isXML,m.contains=S.contains;var x=m.expr.match.needsContext,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;function I(t,e,n){if(m.isFunction(e))return m.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return m.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(T.test(e))return m.filter(e,t,n);e=m.filter(e,t)}return m.grep(t,function(t){return c.call(e,t)>=0!==n})}m.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?m.find.matchesSelector(i,t)?[i]:[]:m.find.matches(t,m.grep(e,function(t){return 1===t.nodeType}))},m.fn.extend({find:function(t){var e,n=this.length,i=[],o=this;if("string"!=typeof t)return this.pushStack(m(t).filter(function(){for(e=0;n>e;e++)if(m.contains(o[e],this))return!0}));for(e=0;n>e;e++)m.find(t,o[e],i);return(i=this.pushStack(n>1?m.unique(i):i)).selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(I(this,t||[],!1))},not:function(t){return this.pushStack(I(this,t||[],!0))},is:function(t){return!!I(this,"string"==typeof t&&x.test(t)?m(t):t||[],!1).length}});var k,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:A.exec(t))||!n[1]&&e)return!e||e.jquery?(e||k).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof m?e[0]:e,m.merge(this,m.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:p,!0)),C.test(n[1])&&m.isPlainObject(e))for(n in e)m.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(i=p.getElementById(n[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=p,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):m.isFunction(t)?void 0!==k.ready?k.ready(t):t(m):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),m.makeArray(t,this))}).prototype=m.fn,k=m(p);var P=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};function $(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}m.extend({dir:function(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&m(t).is(n))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),m.fn.extend({has:function(t){var e=m(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(m.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],a=x.test(t)||"string"!=typeof t?m(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&m.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?m.unique(r):r)},index:function(t){return t?"string"==typeof t?c.call(m(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(m.unique(m.merge(this.get(),m(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),m.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return m.dir(t,"parentNode")},parentsUntil:function(t,e,n){return m.dir(t,"parentNode",n)},next:function(t){return $(t,"nextSibling")},prev:function(t){return $(t,"previousSibling")},nextAll:function(t){return m.dir(t,"nextSibling")},prevAll:function(t){return m.dir(t,"previousSibling")},nextUntil:function(t,e,n){return m.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return m.dir(t,"previousSibling",n)},siblings:function(t){return m.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return m.sibling(t.firstChild)},contents:function(t){return t.contentDocument||m.merge([],t.childNodes)}},function(t,e){m.fn[t]=function(n,i){var o=m.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=m.filter(i,o)),this.length>1&&(E[t]||m.unique(o),P.test(t)&&o.reverse()),this.pushStack(o)}});var D,M=/\S+/g,O={};function B(){p.removeEventListener("DOMContentLoaded",B,!1),n.removeEventListener("load",B,!1),m.ready()}m.Callbacks=function(t){var e,n,i,o,r,a,s=[],l=!(t="string"==typeof t?O[t]||function(t){var e=O[t]={};return m.each(t.match(M)||[],function(t,n){e[n]=!0}),e}(t):m.extend({},t)).once&&[],c=function(h){for(e=t.memory&&h,n=!0,a=o||0,o=0,r=s.length,i=!0;s&&r>a;a++)if(!1===s[a].apply(h[0],h[1])&&t.stopOnFalse){e=!1;break}i=!1,s&&(l?l.length&&c(l.shift()):e?s=[]:u.disable())},u={add:function(){if(s){var n=s.length;!function e(n){m.each(n,function(n,i){var o=m.type(i);"function"===o?t.unique&&u.has(i)||s.push(i):i&&i.length&&"string"!==o&&e(i)})}(arguments),i?r=s.length:e&&(o=n,c(e))}return this},remove:function(){return s&&m.each(arguments,function(t,e){for(var n;(n=m.inArray(e,s,n))>-1;)s.splice(n,1),i&&(r>=n&&r--,a>=n&&a--)}),this},has:function(t){return t?m.inArray(t,s)>-1:!(!s||!s.length)},empty:function(){return s=[],r=0,this},disable:function(){return s=l=e=void 0,this},disabled:function(){return!s},lock:function(){return l=void 0,e||u.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!s||n&&!l||(e=[t,(e=e||[]).slice?e.slice():e],i?l.push(e):c(e)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},m.extend({Deferred:function(t){var e=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return m.Deferred(function(n){m.each(e,function(e,r){var a=m.isFunction(t[e])&&t[e];o[r[1]](function(){var t=a&&a.apply(this,arguments);t&&m.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?m.extend(t,i):i}},o={};return i.pipe=i.then,m.each(e,function(t,r){var a=r[2],s=r[3];i[r[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=a.call(arguments),s=r.length,l=1!==s||t&&m.isFunction(t.promise)?s:0,c=1===l?t:m.Deferred(),u=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?a.call(arguments):o,i===e?c.notifyWith(n,i):--l||c.resolveWith(n,i)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);s>o;o++)r[o]&&m.isFunction(r[o].promise)?r[o].promise().done(u(o,i,r)).fail(c.reject).progress(u(o,n,e)):--l;return l||c.resolveWith(i,r),c.promise()}}),m.fn.ready=function(t){return m.ready.promise().done(t),this},m.extend({isReady:!1,readyWait:1,holdReady:function(t){t?m.readyWait++:m.ready(!0)},ready:function(t){(!0===t?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==t&&--m.readyWait>0||(D.resolveWith(p,[m]),m.fn.triggerHandler&&(m(p).triggerHandler("ready"),m(p).off("ready"))))}}),m.ready.promise=function(t){return D||(D=m.Deferred(),"complete"===p.readyState?setTimeout(m.ready):(p.addEventListener("DOMContentLoaded",B,!1),n.addEventListener("load",B,!1))),D.promise(t)},m.ready.promise();var N=m.access=function(t,e,n,i,o,r,a){var s=0,l=t.length,c=null==n;if("object"===m.type(n))for(s in o=!0,n)m.access(t,e,s,n[s],!0,r,a);else if(void 0!==i&&(o=!0,m.isFunction(i)||(a=!0),c&&(a?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(m(t),n)})),e))for(;l>s;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return o?t:c?e.call(t):l?e(t[0],n):r};function H(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=m.expando+H.uid++}m.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},H.uid=1,H.accepts=m.acceptData,H.prototype={key:function(t){if(!H.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=H.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,m.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,o=this.key(t),r=this.cache[o];if("string"==typeof e)r[e]=n;else if(m.isEmptyObject(r))m.extend(this.cache[o],e);else for(i in e)r[i]=e[i];return r},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?void 0!==(i=this.get(t,e))?i:this.get(t,m.camelCase(e)):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,o,r=this.key(t),a=this.cache[r];if(void 0===e)this.cache[r]={};else{m.isArray(e)?i=e.concat(e.map(m.camelCase)):(o=m.camelCase(e),e in a?i=[e,o]:i=(i=o)in a?[i]:i.match(M)||[]),n=i.length;for(;n--;)delete a[i[n]]}},hasData:function(t){return!m.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var R=new H,L=new H,V=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,z=/([A-Z])/g;function F(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(z,"-$1").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:V.test(n)?m.parseJSON(n):n)}catch(t){}L.set(t,e,n)}else n=void 0;return n}m.extend({hasData:function(t){return L.hasData(t)||R.hasData(t)},data:function(t,e,n){return L.access(t,e,n)},removeData:function(t,e){L.remove(t,e)},_data:function(t,e,n){return R.access(t,e,n)},_removeData:function(t,e){R.remove(t,e)}}),m.fn.extend({data:function(t,e){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===t){if(this.length&&(o=L.get(r),1===r.nodeType&&!R.get(r,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(0===(i=a[n].name).indexOf("data-")&&(i=m.camelCase(i.slice(5)),F(r,i,o[i])));R.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){L.set(this,t)}):N(this,function(e){var n,i=m.camelCase(t);if(r&&void 0===e){if(void 0!==(n=L.get(r,t)))return n;if(void 0!==(n=L.get(r,i)))return n;if(void 0!==(n=F(r,i,void 0)))return n}else this.each(function(){var n=L.get(this,i);L.set(this,i,e),-1!==t.indexOf("-")&&void 0!==n&&L.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){L.remove(this,t)})}}),m.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=R.get(t,e),n&&(!i||m.isArray(n)?i=R.access(t,e,m.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=m.queue(t,e),i=n.length,o=n.shift(),r=m._queueHooks(t,e);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,function(){m.dequeue(t,e)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return R.get(t,n)||R.access(t,n,{empty:m.Callbacks("once memory").add(function(){R.remove(t,[e+"queue",n])})})}}),m.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?m.queue(this[0],t):void 0===e?this:this.each(function(){var n=m.queue(this,t,e);m._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&m.dequeue(this,t)})},dequeue:function(t){return this.each(function(){m.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=m.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=R.get(r[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(e)}});var W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=["Top","Right","Bottom","Left"],j=function(t,e){return t=e||t,"none"===m.css(t,"display")||!m.contains(t.ownerDocument,t)},G=/^(?:checkbox|radio)$/i;!function(){var t=p.createDocumentFragment().appendChild(p.createElement("div")),e=p.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),f.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var q="undefined";f.focusinBubbles="onfocusin"in n;var Y=/^key/,X=/^(?:mouse|pointer|contextmenu)|click/,Q=/^(?:focusinfocus|focusoutblur)$/,K=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function J(){return!1}function tt(){try{return p.activeElement}catch(t){}}m.event={global:{},add:function(t,e,n,i,o){var r,a,s,l,c,u,h,d,f,p,g,v=R.get(t);if(v)for(n.handler&&(n=(r=n).handler,o=r.selector),n.guid||(n.guid=m.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(e){return typeof m!==q&&m.event.triggered!==e.type?m.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(M)||[""]).length;c--;)f=g=(s=K.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(h=m.event.special[f]||{},f=(o?h.delegateType:h.bindType)||f,h=m.event.special[f]||{},u=m.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&m.expr.match.needsContext.test(o),namespace:p.join(".")},r),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,a)||t.addEventListener&&t.addEventListener(f,a,!1)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,u):d.push(u),m.event.global[f]=!0)},remove:function(t,e,n,i,o){var r,a,s,l,c,u,h,d,f,p,g,v=R.hasData(t)&&R.get(t);if(v&&(l=v.events)){for(c=(e=(e||"").match(M)||[""]).length;c--;)if(f=g=(s=K.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(h=m.event.special[f]||{},d=l[f=(i?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=d.length;r--;)u=d[r],!o&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,v.handle)||m.removeEvent(t,f,v.handle),delete l[f])}else for(f in l)m.event.remove(t,f+e[c],n,i,!0);m.isEmptyObject(l)&&(delete v.handle,R.remove(t,"events"))}},trigger:function(t,e,i,o){var r,a,s,l,c,u,h,f=[i||p],g=d.call(t,"type")?t.type:t,v=d.call(t,"namespace")?t.namespace.split("."):[];if(a=s=i=i||p,3!==i.nodeType&&8!==i.nodeType&&!Q.test(g+m.event.triggered)&&(g.indexOf(".")>=0&&(g=(v=g.split(".")).shift(),v.sort()),c=g.indexOf(":")<0&&"on"+g,(t=t[m.expando]?t:new m.Event(g,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=v.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:m.makeArray(e,[t]),h=m.event.special[g]||{},o||!h.trigger||!1!==h.trigger.apply(i,e))){if(!o&&!h.noBubble&&!m.isWindow(i)){for(l=h.delegateType||g,Q.test(l+g)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(i.ownerDocument||p)&&f.push(s.defaultView||s.parentWindow||n)}for(r=0;(a=f[r++])&&!t.isPropagationStopped();)t.type=r>1?l:h.bindType||g,(u=(R.get(a,"events")||{})[t.type]&&R.get(a,"handle"))&&u.apply(a,e),(u=c&&a[c])&&u.apply&&m.acceptData(a)&&(t.result=u.apply(a,e),!1===t.result&&t.preventDefault());return t.type=g,o||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),e)||!m.acceptData(i)||c&&m.isFunction(i[g])&&!m.isWindow(i)&&((s=i[c])&&(i[c]=null),m.event.triggered=g,i[g](),m.event.triggered=void 0,s&&(i[c]=s)),t.result}},dispatch:function(t){t=m.event.fix(t);var e,n,i,o,r,s=[],l=a.call(arguments),c=(R.get(this,"events")||{})[t.type]||[],u=m.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(s=m.event.handlers.call(this,t,c),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(r.namespace))&&(t.handleObj=r,t.data=r.data,void 0!==(i=((m.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==t.type){for(i=[],n=0;s>n;n++)void 0===i[o=(r=e[n]).selector+" "]&&(i[o]=r.needsContext?m(o,this).index(l)>=0:m.find(o,this,null,[l]).length),i[o]&&i.push(r);i.length&&a.push({elem:l,handlers:i})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,r=e.button;return null==t.pageX&&null!=e.clientX&&(i=(n=t.target.ownerDocument||p).documentElement,o=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[m.expando])return t;var e,n,i,o=t.type,r=t,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=X.test(o)?this.mouseHooks:Y.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new m.Event(r),e=i.length;e--;)t[n=i[e]]=r[n];return t.target||(t.target=p),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==tt()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===tt()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&m.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return m.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=m.extend(new m.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?m.event.trigger(o,null,e):m.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},m.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},m.Event=function(t,e){return this instanceof m.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Z:J):this.type=t,e&&m.extend(this,e),this.timeStamp=t&&t.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(t,e)},m.Event.prototype={isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Z,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Z,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Z,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){m.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,o=t.handleObj;return(!i||i!==this&&!m.contains(this,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),f.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){m.event.simulate(e,t.target,m.event.fix(t),!0)};m.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=R.access(i,e);o||i.addEventListener(t,n,!0),R.access(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=R.access(i,e)-1;o?R.access(i,e,o):(i.removeEventListener(t,n,!0),R.remove(i,e))}}}),m.fn.extend({on:function(t,e,n,i,o){var r,a;if("object"==typeof t){for(a in"string"!=typeof e&&(n=n||e,e=void 0),t)this.on(a,e,n,t[a],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),!1===i)i=J;else if(!i)return this;return 1===o&&(r=i,(i=function(t){return m().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=m.guid++)),this.each(function(){m.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,m(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(!1===e||"function"==typeof e)&&(n=e,e=void 0),!1===n&&(n=J),this.each(function(){m.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){m.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?m.event.trigger(t,e,n,!0):void 0}});var et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,nt=/<([\w:]+)/,it=/<|&#?\w+;/,ot=/<(?:script|style|link)/i,rt=/checked\s*(?:[^=]|=\s*.checked.)/i,at=/^$|\/(?:java|ecma)script/i,st=/^true\/(.*)/,lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ct={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ut(t,e){return m.nodeName(t,"table")&&m.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function ht(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function dt(t){var e=st.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function ft(t,e){for(var n=0,i=t.length;i>n;n++)R.set(t[n],"globalEval",!e||R.get(e[n],"globalEval"))}function pt(t,e){var n,i,o,r,a,s,l,c;if(1===e.nodeType){if(R.hasData(t)&&(r=R.access(t),a=R.set(e,r),c=r.events))for(o in delete a.handle,a.events={},c)for(n=0,i=c[o].length;i>n;n++)m.event.add(e,o,c[o][n]);L.hasData(t)&&(s=L.access(t),l=m.extend({},s),L.set(e,l))}}function gt(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&m.nodeName(t,e)?m.merge([t],n):n}function mt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&G.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}ct.optgroup=ct.option,ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td,m.extend({clone:function(t,e,n){var i,o,r,a,s=t.cloneNode(!0),l=m.contains(t.ownerDocument,t);if(!(f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||m.isXMLDoc(t)))for(a=gt(s),i=0,o=(r=gt(t)).length;o>i;i++)mt(r[i],a[i]);if(e)if(n)for(r=r||gt(t),a=a||gt(s),i=0,o=r.length;o>i;i++)pt(r[i],a[i]);else pt(t,s);return(a=gt(s,"script")).length>0&&ft(a,!l&&gt(t,"script")),s},buildFragment:function(t,e,n,i){for(var o,r,a,s,l,c,u=e.createDocumentFragment(),h=[],d=0,f=t.length;f>d;d++)if((o=t[d])||0===o)if("object"===m.type(o))m.merge(h,o.nodeType?[o]:o);else if(it.test(o)){for(r=r||u.appendChild(e.createElement("div")),a=(nt.exec(o)||["",""])[1].toLowerCase(),s=ct[a]||ct._default,r.innerHTML=s[1]+o.replace(et,"<$1></$2>")+s[2],c=s[0];c--;)r=r.lastChild;m.merge(h,r.childNodes),(r=u.firstChild).textContent=""}else h.push(e.createTextNode(o));for(u.textContent="",d=0;o=h[d++];)if((!i||-1===m.inArray(o,i))&&(l=m.contains(o.ownerDocument,o),r=gt(u.appendChild(o),"script"),l&&ft(r),n))for(c=0;o=r[c++];)at.test(o.type||"")&&n.push(o);return u},cleanData:function(t){for(var e,n,i,o,r=m.event.special,a=0;void 0!==(n=t[a]);a++){if(m.acceptData(n)&&((o=n[R.expando])&&(e=R.cache[o]))){if(e.events)for(i in e.events)r[i]?m.event.remove(n,i):m.removeEvent(n,i,e.handle);R.cache[o]&&delete R.cache[o]}delete L.cache[n[L.expando]]}}}),m.fn.extend({text:function(t){return N(this,function(t){return void 0===t?m.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ut(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=ut(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?m.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||m.cleanData(gt(n)),n.parentNode&&(e&&m.contains(n.ownerDocument,n)&&ft(gt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(m.cleanData(gt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return m.clone(this,t,e)})},html:function(t){return N(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ot.test(t)&&!ct[(nt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(et,"<$1></$2>");try{for(;i>n;n++)1===(e=this[n]||{}).nodeType&&(m.cleanData(gt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,m.cleanData(gt(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=s.apply([],t);var n,i,o,r,a,l,c=0,u=this.length,h=this,d=u-1,p=t[0],g=m.isFunction(p);if(g||u>1&&"string"==typeof p&&!f.checkClone&&rt.test(p))return this.each(function(n){var i=h.eq(n);g&&(t[0]=p.call(this,n,i.html())),i.domManip(t,e)});if(u&&(i=(n=m.buildFragment(t,this[0].ownerDocument,!1,this)).firstChild,1===n.childNodes.length&&(n=i),i)){for(r=(o=m.map(gt(n,"script"),ht)).length;u>c;c++)a=n,c!==d&&(a=m.clone(a,!0,!0),r&&m.merge(o,gt(a,"script"))),e.call(this[c],a,c);if(r)for(l=o[o.length-1].ownerDocument,m.map(o,dt),c=0;r>c;c++)a=o[c],at.test(a.type||"")&&!R.access(a,"globalEval")&&m.contains(l,a)&&(a.src?m._evalUrl&&m._evalUrl(a.src):m.globalEval(a.textContent.replace(lt,"")))}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){m.fn[t]=function(t){for(var n,i=[],o=m(t),r=o.length-1,a=0;r>=a;a++)n=a===r?this:this.clone(!0),m(o[a])[e](n),l.apply(i,n.get());return this.pushStack(i)}});var vt,_t={};function yt(t,e){var i,o=m(e.createElement(t)).appendTo(e.body),r=n.getDefaultComputedStyle&&(i=n.getDefaultComputedStyle(o[0]))?i.display:m.css(o[0],"display");return o.detach(),r}function bt(t){var e=p,n=_t[t];return n||("none"!==(n=yt(t,e))&&n||((e=(vt=(vt||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),n=yt(t,e),vt.detach()),_t[t]=n),n}var wt=/^margin/,St=new RegExp("^("+W+")(?!px)[a-z%]+$","i"),xt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):n.getComputedStyle(t,null)};function Ct(t,e,n){var i,o,r,a,s=t.style;return(n=n||xt(t))&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||m.contains(t.ownerDocument,t)||(a=m.style(t,e)),St.test(a)&&wt.test(e)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r)),void 0!==a?a+"":a}function Tt(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}!function(){var t,e,i=p.documentElement,o=p.createElement("div"),r=p.createElement("div");if(r.style){function a(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",i.appendChild(o);var a=n.getComputedStyle(r,null);t="1%"!==a.top,e="4px"===a.width,i.removeChild(o)}r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===r.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(r),n.getComputedStyle&&m.extend(f,{pixelPosition:function(){return a(),t},boxSizingReliable:function(){return null==e&&a(),e},reliableMarginRight:function(){var t,e=r.appendChild(p.createElement("div"));return e.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",r.style.width="1px",i.appendChild(o),t=!parseFloat(n.getComputedStyle(e,null).marginRight),i.removeChild(o),r.removeChild(e),t}})}}(),m.swap=function(t,e,n,i){var o,r,a={};for(r in e)a[r]=t.style[r],t.style[r]=e[r];for(r in o=n.apply(t,i||[]),e)t.style[r]=a[r];return o};var It=/^(none|table(?!-c[ea]).+)/,kt=new RegExp("^("+W+")(.*)$","i"),At=new RegExp("^([+-])=("+W+")","i"),Pt={position:"absolute",visibility:"hidden",display:"block"},Et={letterSpacing:"0",fontWeight:"400"},$t=["Webkit","O","Moz","ms"];function Dt(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),i=e,o=$t.length;o--;)if((e=$t[o]+n)in t)return e;return i}function Mt(t,e,n){var i=kt.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function Ot(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>r;r+=2)"margin"===n&&(a+=m.css(t,n+U[r],!0,o)),i?("content"===n&&(a-=m.css(t,"padding"+U[r],!0,o)),"margin"!==n&&(a-=m.css(t,"border"+U[r]+"Width",!0,o))):(a+=m.css(t,"padding"+U[r],!0,o),"padding"!==n&&(a+=m.css(t,"border"+U[r]+"Width",!0,o)));return a}function Bt(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=xt(t),a="border-box"===m.css(t,"boxSizing",!1,r);if(0>=o||null==o){if((0>(o=Ct(t,e,r))||null==o)&&(o=t.style[e]),St.test(o))return o;i=a&&(f.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+Ot(t,e,n||(a?"border":"content"),i,r)+"px"}function Nt(t,e){for(var n,i,o,r=[],a=0,s=t.length;s>a;a++)(i=t[a]).style&&(r[a]=R.get(i,"olddisplay"),n=i.style.display,e?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&j(i)&&(r[a]=R.access(i,"olddisplay",bt(i.nodeName)))):(o=j(i),"none"===n&&o||R.set(i,"olddisplay",o?n:m.css(i,"display"))));for(a=0;s>a;a++)(i=t[a]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[a]||"":"none"));return t}function Ht(t,e,n,i,o){return new Ht.prototype.init(t,e,n,i,o)}m.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ct(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a,s=m.camelCase(e),l=t.style;return e=m.cssProps[s]||(m.cssProps[s]=Dt(l,s)),a=m.cssHooks[e]||m.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(o=a.get(t,!1,i))?o:l[e]:("string"===(r=typeof n)&&(o=At.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(m.css(t,e)),r="number"),void(null!=n&&n==n&&("number"!==r||m.cssNumber[s]||(n+="px"),f.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l[e]=n))))}},css:function(t,e,n,i){var o,r,a,s=m.camelCase(e);return e=m.cssProps[s]||(m.cssProps[s]=Dt(t.style,s)),(a=m.cssHooks[e]||m.cssHooks[s])&&"get"in a&&(o=a.get(t,!0,n)),void 0===o&&(o=Ct(t,e,i)),"normal"===o&&e in Et&&(o=Et[e]),""===n||n?(r=parseFloat(o),!0===n||m.isNumeric(r)?r||0:o):o}}),m.each(["height","width"],function(t,e){m.cssHooks[e]={get:function(t,n,i){return n?It.test(m.css(t,"display"))&&0===t.offsetWidth?m.swap(t,Pt,function(){return Bt(t,e,i)}):Bt(t,e,i):void 0},set:function(t,n,i){var o=i&&xt(t);return Mt(0,n,i?Ot(t,e,i,"border-box"===m.css(t,"boxSizing",!1,o),o):0)}}}),m.cssHooks.marginRight=Tt(f.reliableMarginRight,function(t,e){return e?m.swap(t,{display:"inline-block"},Ct,[t,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(t,e){m.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+U[i]+e]=r[i]||r[i-2]||r[0];return o}},wt.test(t)||(m.cssHooks[t+e].set=Mt)}),m.fn.extend({css:function(t,e){return N(this,function(t,e,n){var i,o,r={},a=0;if(m.isArray(e)){for(i=xt(t),o=e.length;o>a;a++)r[e[a]]=m.css(t,e[a],!1,i);return r}return void 0!==n?m.style(t,e,n):m.css(t,e)},t,e,arguments.length>1)},show:function(){return Nt(this,!0)},hide:function(){return Nt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){j(this)?m(this).show():m(this).hide()})}}),m.Tween=Ht,Ht.prototype={constructor:Ht,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(m.cssNumber[n]?"":"px")},cur:function(){var t=Ht.propHooks[this.prop];return t&&t.get?t.get(this):Ht.propHooks._default.get(this)},run:function(t){var e,n=Ht.propHooks[this.prop];return this.pos=e=this.options.duration?m.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ht.propHooks._default.set(this),this}},Ht.prototype.init.prototype=Ht.prototype,Ht.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=m.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){m.fx.step[t.prop]?m.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[m.cssProps[t.prop]]||m.cssHooks[t.prop])?m.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},Ht.propHooks.scrollTop=Ht.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},m.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},m.fx=Ht.prototype.init,m.fx.step={};var Rt,Lt,Vt=/^(?:toggle|show|hide)$/,zt=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i"),Ft=/queueHooks$/,Wt=[function(t,e,n){var i,o,r,a,s,l,c,u=this,h={},d=t.style,f=t.nodeType&&j(t),p=R.get(t,"fxshow");for(i in n.queue||(null==(s=m._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,m.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],c=m.css(t,"display"),"inline"===("none"===c?R.get(t,"olddisplay")||bt(t.nodeName):c)&&"none"===m.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",u.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),e)if(o=e[i],Vt.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!p||void 0===p[i])continue;f=!0}h[i]=p&&p[i]||m.style(t,i)}else c=void 0;if(m.isEmptyObject(h))"inline"===("none"===c?bt(t.nodeName):c)&&(d.display=c);else for(i in p?"hidden"in p&&(f=p.hidden):p=R.access(t,"fxshow",{}),r&&(p.hidden=!f),f?m(t).show():u.done(function(){m(t).hide()}),u.done(function(){var e;for(e in R.remove(t,"fxshow"),h)m.style(t,e,h[e])}),h)a=qt(f?p[i]:0,i,u),i in p||(p[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}],Ut={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=zt.exec(e),r=o&&o[3]||(m.cssNumber[t]?"":"px"),a=(m.cssNumber[t]||"px"!==r&&+i)&&zt.exec(m.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==r){r=r||a[3],o=o||[],a=+i||1;do{a/=s=s||".5",m.style(n.elem,t,a+r)}while(s!==(s=n.cur()/i)&&1!==s&&--l)}return o&&(a=n.start=+a||+i||0,n.unit=r,n.end=o[1]?a+(o[1]+1)*o[2]:+o[2]),n}]};function jt(){return setTimeout(function(){Rt=void 0}),Rt=m.now()}function Gt(t,e){var n,i=0,o={height:t};for(e=e?1:0;4>i;i+=2-e)o["margin"+(n=U[i])]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function qt(t,e,n){for(var i,o=(Ut[e]||[]).concat(Ut["*"]),r=0,a=o.length;a>r;r++)if(i=o[r].call(n,e,t))return i}function Yt(t,e,n){var i,o,r=0,a=Wt.length,s=m.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Rt||jt(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),r=0,a=c.tweens.length;a>r;r++)c.tweens[r].run(i);return s.notifyWith(t,[c,i,n]),1>i&&a?n:(s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:m.extend({},e),opts:m.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Rt||jt(),duration:n.duration,tweens:[],createTween:function(e,n){var i=m.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return e?s.resolveWith(t,[c,e]):s.rejectWith(t,[c,e]),this}}),u=c.props;for(function(t,e){var n,i,o,r,a;for(n in t)if(o=e[i=m.camelCase(n)],r=t[n],m.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(a=m.cssHooks[i])&&"expand"in a)for(n in r=a.expand(r),delete t[i],r)n in t||(t[n]=r[n],e[n]=o);else e[i]=o}(u,c.opts.specialEasing);a>r;r++)if(i=Wt[r].call(c,t,u,c.opts))return i;return m.map(u,qt,c),m.isFunction(c.opts.start)&&c.opts.start.call(t,c),m.fx.timer(m.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}m.Animation=m.extend(Yt,{tweener:function(t,e){m.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],Ut[n]=Ut[n]||[],Ut[n].unshift(e)},prefilter:function(t,e){e?Wt.unshift(t):Wt.push(t)}}),m.speed=function(t,e,n){var i=t&&"object"==typeof t?m.extend({},t):{complete:n||!n&&e||m.isFunction(t)&&t,duration:t,easing:n&&e||e&&!m.isFunction(e)&&e};return i.duration=m.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in m.fx.speeds?m.fx.speeds[i.duration]:m.fx.speeds._default,(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){m.isFunction(i.old)&&i.old.call(this),i.queue&&m.dequeue(this,i.queue)},i},m.fn.extend({fadeTo:function(t,e,n,i){return this.filter(j).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=m.isEmptyObject(t),r=m.speed(e,n,i),a=function(){var e=Yt(this,m.extend({},t),r);(o||R.get(this,"finish"))&&e.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=m.timers,a=R.get(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&Ft.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));(e||!n)&&m.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=R.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=m.timers,a=i?i.length:0;for(n.finish=!0,m.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),m.each(["toggle","show","hide"],function(t,e){var n=m.fn[e];m.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(Gt(e,!0),t,i,o)}}),m.each({slideDown:Gt("show"),slideUp:Gt("hide"),slideToggle:Gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){m.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),m.timers=[],m.fx.tick=function(){var t,e=0,n=m.timers;for(Rt=m.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||m.fx.stop(),Rt=void 0},m.fx.timer=function(t){m.timers.push(t),t()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){Lt||(Lt=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(Lt),Lt=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(t,e){return t=m.fx&&m.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t=p.createElement("input"),e=p.createElement("select"),n=e.appendChild(p.createElement("option"));t.type="checkbox",f.checkOn=""!==t.value,f.optSelected=n.selected,e.disabled=!0,f.optDisabled=!n.disabled,(t=p.createElement("input")).value="t",t.type="radio",f.radioValue="t"===t.value}();var Xt,Qt=m.expr.attrHandle;m.fn.extend({attr:function(t,e){return N(this,m.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){m.removeAttr(this,t)})}}),m.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===q?m.prop(t,e,n):(1===r&&m.isXMLDoc(t)||(e=e.toLowerCase(),i=m.attrHooks[e]||(m.expr.match.bool.test(e)?Xt:void 0)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:null==(o=m.find.attr(t,e))?void 0:o:null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void m.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(M);if(r&&1===t.nodeType)for(;n=r[o++];)i=m.propFix[n]||n,m.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&m.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),Xt={set:function(t,e,n){return!1===e?m.removeAttr(t,n):t.setAttribute(n,n),n}},m.each(m.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Qt[e]||m.find.attr;Qt[e]=function(t,e,i){var o,r;return i||(r=Qt[e],Qt[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,Qt[e]=r),o}});var Kt=/^(?:input|select|textarea|button)$/i;m.fn.extend({prop:function(t,e){return N(this,m.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[m.propFix[t]||t]})}}),m.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return(1!==r||!m.isXMLDoc(t))&&(e=m.propFix[e]||e,o=m.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||Kt.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),f.optSelected||(m.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this});var Zt=/[\t\r\n\f]/g;m.fn.extend({addClass:function(t){var e,n,i,o,r,a,s="string"==typeof t&&t,l=0,c=this.length;if(m.isFunction(t))return this.each(function(e){m(this).addClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(M)||[];c>l;l++)if(i=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace(Zt," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a=m.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,i,o,r,a,s=0===arguments.length||"string"==typeof t&&t,l=0,c=this.length;if(m.isFunction(t))return this.each(function(e){m(this).removeClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(M)||[];c>l;l++)if(i=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace(Zt," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");a=t?m.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(m.isFunction(t)?function(n){m(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,o=m(this),r=t.match(M)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===q||"boolean"===n)&&(this.className&&R.set(this,"__className__",this.className),this.className=this.className||!1===t?"":R.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Zt," ").indexOf(e)>=0)return!0;return!1}});var Jt=/\r/g;m.fn.extend({val:function(t){var e,n,i,o=this[0];return arguments.length?(i=m.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(null==(o=i?t.call(this,n,m(this).val()):t)?o="":"number"==typeof o?o+="":m.isArray(o)&&(o=m.map(o,function(t){return null==t?"":t+""})),(e=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))})):o?(e=m.valHooks[o.type]||m.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(Jt,""):null==n?"":n:void 0}}),m.extend({valHooks:{option:{get:function(t){var e=m.find.attr(t,"value");return null!=e?e:m.trim(m.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,a=r?null:[],s=r?o+1:i.length,l=0>o?s:r?o:0;s>l;l++)if(!(!(n=i[l]).selected&&l!==o||(f.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&m.nodeName(n.parentNode,"optgroup"))){if(e=m(n).val(),r)return e;a.push(e)}return a},set:function(t,e){for(var n,i,o=t.options,r=m.makeArray(e),a=o.length;a--;)((i=o[a]).selected=m.inArray(i.value,r)>=0)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(t,e){return m.isArray(e)?t.checked=m.inArray(m(t).val(),e)>=0:void 0}},f.checkOn||(m.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){m.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),m.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var te=m.now(),ee=/\?/;m.parseJSON=function(t){return JSON.parse(t+"")},m.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&m.error("Invalid XML: "+t),e};var ne=/#.*$/,ie=/([?&])_=[^&]*/,oe=/^(.*?):[ \t]*([^\r\n]*)$/gm,re=/^(?:GET|HEAD)$/,ae=/^\/\//,se=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,le={},ce={},ue="*/".concat("*"),he=n.location.href,de=se.exec(he.toLowerCase())||[];function fe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(M)||[];if(m.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function pe(t,e,n,i){var o={},r=t===ce;function a(s){var l;return o[s]=!0,m.each(t[s]||[],function(t,s){var c=s(e,n,i);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),a(c),!1)}),l}return a(e.dataTypes[0])||!o["*"]&&a("*")}function ge(t,e){var n,i,o=m.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&m.extend(!0,t,i),t}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:he,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(de[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ue,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ge(ge(t,m.ajaxSettings),e):ge(m.ajaxSettings,t)},ajaxPrefilter:fe(le),ajaxTransport:fe(ce),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,r,a,s,l,c,u=m.ajaxSetup({},e),h=u.context||u,d=u.context&&(h.nodeType||h.jquery)?m(h):m.event,f=m.Deferred(),p=m.Callbacks("once memory"),g=u.statusCode||{},v={},_={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!r)for(r={};e=oe.exec(o);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=_[n]=_[n]||t,v[t]=e),this},overrideMimeType:function(t){return y||(u.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)g[e]=[g[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return n&&n.abort(e),S(0,e),this}};if(f.promise(w).complete=p.add,w.success=w.done,w.error=w.fail,u.url=((t||u.url||he)+"").replace(ne,"").replace(ae,de[1]+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=m.trim(u.dataType||"*").toLowerCase().match(M)||[""],null==u.crossDomain&&(s=se.exec(u.url.toLowerCase()),u.crossDomain=!(!s||s[1]===de[1]&&s[2]===de[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(de[3]||("http:"===de[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=m.param(u.data,u.traditional)),pe(le,u,e,w),2===y)return w;for(c in(l=m.event&&u.global)&&0==m.active++&&m.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!re.test(u.type),i=u.url,u.hasContent||(u.data&&(i=u.url+=(ee.test(i)?"&":"?")+u.data,delete u.data),!1===u.cache&&(u.url=ie.test(i)?i.replace(ie,"$1_="+te++):i+(ee.test(i)?"&":"?")+"_="+te++)),u.ifModified&&(m.lastModified[i]&&w.setRequestHeader("If-Modified-Since",m.lastModified[i]),m.etag[i]&&w.setRequestHeader("If-None-Match",m.etag[i])),(u.data&&u.hasContent&&!1!==u.contentType||e.contentType)&&w.setRequestHeader("Content-Type",u.contentType),w.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+ue+"; q=0.01":""):u.accepts["*"]),u.headers)w.setRequestHeader(c,u.headers[c]);if(u.beforeSend&&(!1===u.beforeSend.call(h,w,u)||2===y))return w.abort();for(c in b="abort",{success:1,error:1,complete:1})w[c](u[c]);if(n=pe(ce,u,e,w)){w.readyState=1,l&&d.trigger("ajaxSend",[w,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},u.timeout));try{y=1,n.send(v,S)}catch(t){if(!(2>y))throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,r,s){var c,v,_,b,S,x=e;2!==y&&(y=2,a&&clearTimeout(a),n=void 0,o=s||"",w.readyState=t>0?4:0,c=t>=200&&300>t||304===t,r&&(b=function(t,e,n){for(var i,o,r,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}a||(a=o)}r=r||a}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}(u,w,r)),b=function(t,e,n,i){var o,r,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=c[l+" "+r]||c["* "+r]))for(o in c)if((s=o.split(" "))[1]===r&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(r=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(u,b,w,c),c?(u.ifModified&&((S=w.getResponseHeader("Last-Modified"))&&(m.lastModified[i]=S),(S=w.getResponseHeader("etag"))&&(m.etag[i]=S)),204===t||"HEAD"===u.type?x="nocontent":304===t?x="notmodified":(x=b.state,v=b.data,c=!(_=b.error))):(_=x,(t||!x)&&(x="error",0>t&&(t=0))),w.status=t,w.statusText=(e||x)+"",c?f.resolveWith(h,[v,x,w]):f.rejectWith(h,[w,x,_]),w.statusCode(g),g=void 0,l&&d.trigger(c?"ajaxSuccess":"ajaxError",[w,u,c?v:_]),p.fireWith(h,[w,x]),l&&(d.trigger("ajaxComplete",[w,u]),--m.active||m.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,n){return m.get(t,e,n,"json")},getScript:function(t,e){return m.get(t,void 0,e,"script")}}),m.each(["get","post"],function(t,e){m[e]=function(t,n,i,o){return m.isFunction(n)&&(o=o||i,i=n,n=void 0),m.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),m._evalUrl=function(t){return m.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(t){var e;return m.isFunction(t)?this.each(function(e){m(this).wrapAll(t.call(this,e))}):(this[0]&&(e=m(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(m.isFunction(t)?function(e){m(this).wrapInner(t.call(this,e))}:function(){var e=m(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=m.isFunction(t);return this.each(function(n){m(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},m.expr.filters.visible=function(t){return!m.expr.filters.hidden(t)};var me=/%20/g,ve=/\[\]$/,_e=/\r?\n/g,ye=/^(?:submit|button|image|reset|file)$/i,be=/^(?:input|select|textarea|keygen)/i;function we(t,e,n,i){var o;if(m.isArray(e))m.each(e,function(e,o){n||ve.test(t)?i(t,o):we(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==m.type(e))i(t,e);else for(o in e)we(t+"["+o+"]",e[o],n,i)}m.param=function(t,e){var n,i=[],o=function(t,e){e=m.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(t)||t.jquery&&!m.isPlainObject(t))m.each(t,function(){o(this.name,this.value)});else for(n in t)we(n,t[n],e,o);return i.join("&").replace(me,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=m.prop(this,"elements");return t?m.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!m(this).is(":disabled")&&be.test(this.nodeName)&&!ye.test(t)&&(this.checked||!G.test(t))}).map(function(t,e){var n=m(this).val();return null==n?null:m.isArray(n)?m.map(n,function(t){return{name:e.name,value:t.replace(_e,"\r\n")}}):{name:e.name,value:n.replace(_e,"\r\n")}}).get()}}),m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Se=0,xe={},Ce={0:200,1223:204},Te=m.ajaxSettings.xhr();n.attachEvent&&n.attachEvent("onunload",function(){for(var t in xe)xe[t]()}),f.cors=!!Te&&"withCredentials"in Te,f.ajax=Te=!!Te,m.ajaxTransport(function(t){var e;return f.cors||Te&&!t.crossDomain?{send:function(n,i){var o,r=t.xhr(),a=++Se;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];for(o in t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)r.setRequestHeader(o,n[o]);e=function(t){return function(){e&&(delete xe[a],e=r.onload=r.onerror=null,"abort"===t?r.abort():"error"===t?i(r.status,r.statusText):i(Ce[r.status]||r.status,r.statusText,"string"==typeof r.responseText?{text:r.responseText}:void 0,r.getAllResponseHeaders()))}},r.onload=e(),r.onerror=e("error"),e=xe[a]=e("abort");try{r.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}:void 0}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return m.globalEval(t),t}}}),m.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),m.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(i,o){e=m("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),p.head.appendChild(e[0])},abort:function(){n&&n()}}});var Ie=[],ke=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ie.pop()||m.expando+"_"+te++;return this[t]=!0,t}}),m.ajaxPrefilter("json jsonp",function(t,e,i){var o,r,a,s=!1!==t.jsonp&&(ke.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ke.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=m.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ke,"$1"+o):!1!==t.jsonp&&(t.url+=(ee.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||m.error(o+" was not called"),a[0]},t.dataTypes[0]="json",r=n[o],n[o]=function(){a=arguments},i.always(function(){n[o]=r,t[o]&&(t.jsonpCallback=e.jsonpCallback,Ie.push(o)),a&&m.isFunction(r)&&r(a[0]),a=r=void 0}),"script"):void 0}),m.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||p;var i=C.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=m.buildFragment([t],e,o),o&&o.length&&m(o).remove(),m.merge([],i.childNodes))};var Ae=m.fn.load;m.fn.load=function(t,e,n){if("string"!=typeof t&&Ae)return Ae.apply(this,arguments);var i,o,r,a=this,s=t.indexOf(" ");return s>=0&&(i=m.trim(t.slice(s)),t=t.slice(0,s)),m.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),a.length>0&&m.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,a.html(i?m("<div>").append(m.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){a.each(n,r||[t.responseText,e,t])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){m.fn[e]=function(t){return this.on(e,t)}}),m.expr.filters.animated=function(t){return m.grep(m.timers,function(e){return t===e.elem}).length};var Pe=n.document.documentElement;function Ee(t){return m.isWindow(t)?t:9===t.nodeType&&t.defaultView}m.offset={setOffset:function(t,e,n){var i,o,r,a,s,l,c=m.css(t,"position"),u=m(t),h={};"static"===c&&(t.style.position="relative"),s=u.offset(),r=m.css(t,"top"),l=m.css(t,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(a=(i=u.position()).top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),m.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+o),"using"in e?e.using.call(t,h):u.css(h)}},m.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){m.offset.setOffset(this,t,e)});var e,n,i=this[0],o={top:0,left:0},r=i&&i.ownerDocument;return r?(e=r.documentElement,m.contains(e,i)?(typeof i.getBoundingClientRect!==q&&(o=i.getBoundingClientRect()),n=Ee(r),{top:o.top+n.pageYOffset-e.clientTop,left:o.left+n.pageXOffset-e.clientLeft}):o):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===m.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),m.nodeName(t[0],"html")||(i=t.offset()),i.top+=m.css(t[0],"borderTopWidth",!0),i.left+=m.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-m.css(n,"marginTop",!0),left:e.left-i.left-m.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Pe;t&&!m.nodeName(t,"html")&&"static"===m.css(t,"position");)t=t.offsetParent;return t||Pe})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;m.fn[t]=function(o){return N(this,function(t,o,r){var a=Ee(t);return void 0===r?a?a[e]:t[o]:void(a?a.scrollTo(i?n.pageXOffset:r,i?r:n.pageYOffset):t[o]=r)},t,o,arguments.length,null)}}),m.each(["top","left"],function(t,e){m.cssHooks[e]=Tt(f.pixelPosition,function(t,n){return n?(n=Ct(t,e),St.test(n)?m(t).position()[e]+"px":n):void 0})}),m.each({Height:"height",Width:"width"},function(t,e){m.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){m.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return N(this,function(e,n,i){var o;return m.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?m.css(e,n,a):m.style(e,n,i,a)},e,r?i:void 0,r,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,void 0===(i=function(){return m}.apply(e,[]))||(t.exports=i);var $e=n.jQuery,De=n.$;return m.noConflict=function(t){return n.$===m&&(n.$=De),t&&n.jQuery===m&&(n.jQuery=$e),m},typeof o===q&&(n.jQuery=n.$=m),m})},function(t,e,n){(function(t,i){var o;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var r,a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",d=1,f=2,p=4,g=1,m=2,v=1,_=2,y=4,b=8,w=16,S=32,x=64,C=128,T=256,I=512,k=30,A="...",P=800,E=16,$=1,D=2,M=1/0,O=9007199254740991,B=1.7976931348623157e308,N=NaN,H=4294967295,R=H-1,L=H>>>1,V=[["ary",C],["bind",v],["bindKey",_],["curry",b],["curryRight",w],["flip",I],["partial",S],["partialRight",x],["rearg",T]],z="[object Arguments]",F="[object Array]",W="[object AsyncFunction]",U="[object Boolean]",j="[object Date]",G="[object DOMException]",q="[object Error]",Y="[object Function]",X="[object GeneratorFunction]",Q="[object Map]",K="[object Number]",Z="[object Null]",J="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",it="[object String]",ot="[object Symbol]",rt="[object Undefined]",at="[object WeakMap]",st="[object WeakSet]",lt="[object ArrayBuffer]",ct="[object DataView]",ut="[object Float32Array]",ht="[object Float64Array]",dt="[object Int8Array]",ft="[object Int16Array]",pt="[object Int32Array]",gt="[object Uint8Array]",mt="[object Uint8ClampedArray]",vt="[object Uint16Array]",_t="[object Uint32Array]",yt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,St=/&(?:amp|lt|gt|quot|#39);/g,xt=/[&<>"']/g,Ct=RegExp(St.source),Tt=RegExp(xt.source),It=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Et=/^\w*$/,$t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(Dt.source),Ot=/^\s+|\s+$/g,Bt=/^\s+/,Nt=/\s+$/,Ht=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Rt=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,Vt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/\\(\\)?/g,Ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wt=/\w*$/,Ut=/^[-+]0x[0-9a-f]+$/i,jt=/^0b[01]+$/i,Gt=/^\[object .+?Constructor\]$/,qt=/^0o[0-7]+$/i,Yt=/^(?:0|[1-9]\d*)$/,Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qt=/($^)/,Kt=/['\n\r\u2028\u2029\\]/g,Zt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Jt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Jt+"]",ne="["+Zt+"]",ie="\\d+",oe="[\\u2700-\\u27bf]",re="[a-z\\xdf-\\xf6\\xf8-\\xff]",ae="[^\\ud800-\\udfff"+Jt+ie+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",se="\\ud83c[\\udffb-\\udfff]",le="[^\\ud800-\\udfff]",ce="(?:\\ud83c[\\udde6-\\uddff]){2}",ue="[\\ud800-\\udbff][\\udc00-\\udfff]",he="[A-Z\\xc0-\\xd6\\xd8-\\xde]",de="(?:"+re+"|"+ae+")",fe="(?:"+he+"|"+ae+")",pe="(?:"+ne+"|"+se+")"+"?",ge="[\\ufe0e\\ufe0f]?"+pe+("(?:\\u200d(?:"+[le,ce,ue].join("|")+")[\\ufe0e\\ufe0f]?"+pe+")*"),me="(?:"+[oe,ce,ue].join("|")+")"+ge,ve="(?:"+[le+ne+"?",ne,ce,ue,te].join("|")+")",_e=RegExp("['’]","g"),ye=RegExp(ne,"g"),be=RegExp(se+"(?="+se+")|"+ve+ge,"g"),we=RegExp([he+"?"+re+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ee,he,"$"].join("|")+")",fe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ee,he+de,"$"].join("|")+")",he+"?"+de+"+(?:['’](?:d|ll|m|re|s|t|ve))?",he+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ie,me].join("|"),"g"),Se=RegExp("[\\u200d\\ud800-\\udfff"+Zt+"\\ufe0e\\ufe0f]"),xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ce=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Te=-1,Ie={};Ie[ut]=Ie[ht]=Ie[dt]=Ie[ft]=Ie[pt]=Ie[gt]=Ie[mt]=Ie[vt]=Ie[_t]=!0,Ie[z]=Ie[F]=Ie[lt]=Ie[U]=Ie[ct]=Ie[j]=Ie[q]=Ie[Y]=Ie[Q]=Ie[K]=Ie[J]=Ie[et]=Ie[nt]=Ie[it]=Ie[at]=!1;var ke={};ke[z]=ke[F]=ke[lt]=ke[ct]=ke[U]=ke[j]=ke[ut]=ke[ht]=ke[dt]=ke[ft]=ke[pt]=ke[Q]=ke[K]=ke[J]=ke[et]=ke[nt]=ke[it]=ke[ot]=ke[gt]=ke[mt]=ke[vt]=ke[_t]=!0,ke[q]=ke[Y]=ke[at]=!1;var Ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pe=parseFloat,Ee=parseInt,$e="object"==typeof t&&t&&t.Object===Object&&t,De="object"==typeof self&&self&&self.Object===Object&&self,Me=$e||De||Function("return this")(),Oe=e&&!e.nodeType&&e,Be=Oe&&"object"==typeof i&&i&&!i.nodeType&&i,Ne=Be&&Be.exports===Oe,He=Ne&&$e.process,Re=function(){try{var t=Be&&Be.require&&Be.require("util").types;return t||He&&He.binding&&He.binding("util")}catch(t){}}(),Le=Re&&Re.isArrayBuffer,Ve=Re&&Re.isDate,ze=Re&&Re.isMap,Fe=Re&&Re.isRegExp,We=Re&&Re.isSet,Ue=Re&&Re.isTypedArray;function je(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ge(t,e,n,i){for(var o=-1,r=null==t?0:t.length;++o<r;){var a=t[o];e(i,a,n(a),t)}return i}function qe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Ye(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Xe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Qe(t,e){for(var n=-1,i=null==t?0:t.length,o=0,r=[];++n<i;){var a=t[n];e(a,n,t)&&(r[o++]=a)}return r}function Ke(t,e){return!!(null==t?0:t.length)&&ln(t,e,0)>-1}function Ze(t,e,n){for(var i=-1,o=null==t?0:t.length;++i<o;)if(n(e,t[i]))return!0;return!1}function Je(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}function tn(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t}function en(t,e,n,i){var o=-1,r=null==t?0:t.length;for(i&&r&&(n=t[++o]);++o<r;)n=e(n,t[o],o,t);return n}function nn(t,e,n,i){var o=null==t?0:t.length;for(i&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function on(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var rn=dn("length");function an(t,e,n){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=n,!1}),i}function sn(t,e,n,i){for(var o=t.length,r=n+(i?1:-1);i?r--:++r<o;)if(e(t[r],r,t))return r;return-1}function ln(t,e,n){return e==e?function(t,e,n){var i=n-1,o=t.length;for(;++i<o;)if(t[i]===e)return i;return-1}(t,e,n):sn(t,un,n)}function cn(t,e,n,i){for(var o=n-1,r=t.length;++o<r;)if(i(t[o],e))return o;return-1}function un(t){return t!=t}function hn(t,e){var n=null==t?0:t.length;return n?gn(t,e)/n:N}function dn(t){return function(e){return null==e?r:e[t]}}function fn(t){return function(e){return null==t?r:t[e]}}function pn(t,e,n,i,o){return o(t,function(t,o,r){n=i?(i=!1,t):e(n,t,o,r)}),n}function gn(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function mn(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function vn(t){return function(e){return t(e)}}function _n(t,e){return Je(e,function(e){return t[e]})}function yn(t,e){return t.has(e)}function bn(t,e){for(var n=-1,i=t.length;++n<i&&ln(e,t[n],0)>-1;);return n}function wn(t,e){for(var n=t.length;n--&&ln(e,t[n],0)>-1;);return n}var Sn=fn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),xn=fn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Cn(t){return"\\"+Ae[t]}function Tn(t){return Se.test(t)}function In(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function kn(t,e){return function(n){return t(e(n))}}function An(t,e){for(var n=-1,i=t.length,o=0,r=[];++n<i;){var a=t[n];a!==e&&a!==h||(t[n]=h,r[o++]=n)}return r}function Pn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function En(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function $n(t){return Tn(t)?function(t){var e=be.lastIndex=0;for(;be.test(t);)++e;return e}(t):rn(t)}function Dn(t){return Tn(t)?function(t){return t.match(be)||[]}(t):function(t){return t.split("")}(t)}var Mn=fn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var On=function t(e){var n=(e=null==e?Me:On.defaults(Me.Object(),e,On.pick(Me,Ce))).Array,i=e.Date,o=e.Error,Zt=e.Function,Jt=e.Math,te=e.Object,ee=e.RegExp,ne=e.String,ie=e.TypeError,oe=n.prototype,re=Zt.prototype,ae=te.prototype,se=e["__core-js_shared__"],le=re.toString,ce=ae.hasOwnProperty,ue=0,he=function(){var t=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),de=ae.toString,fe=le.call(te),pe=Me._,ge=ee("^"+le.call(ce).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=Ne?e.Buffer:r,ve=e.Symbol,be=e.Uint8Array,Se=me?me.allocUnsafe:r,Ae=kn(te.getPrototypeOf,te),$e=te.create,De=ae.propertyIsEnumerable,Oe=oe.splice,Be=ve?ve.isConcatSpreadable:r,He=ve?ve.iterator:r,Re=ve?ve.toStringTag:r,rn=function(){try{var t=Rr(te,"defineProperty");return t({},"",{}),t}catch(t){}}(),fn=e.clearTimeout!==Me.clearTimeout&&e.clearTimeout,Bn=i&&i.now!==Me.Date.now&&i.now,Nn=e.setTimeout!==Me.setTimeout&&e.setTimeout,Hn=Jt.ceil,Rn=Jt.floor,Ln=te.getOwnPropertySymbols,Vn=me?me.isBuffer:r,zn=e.isFinite,Fn=oe.join,Wn=kn(te.keys,te),Un=Jt.max,jn=Jt.min,Gn=i.now,qn=e.parseInt,Yn=Jt.random,Xn=oe.reverse,Qn=Rr(e,"DataView"),Kn=Rr(e,"Map"),Zn=Rr(e,"Promise"),Jn=Rr(e,"Set"),ti=Rr(e,"WeakMap"),ei=Rr(te,"create"),ni=ti&&new ti,ii={},oi=ua(Qn),ri=ua(Kn),ai=ua(Zn),si=ua(Jn),li=ua(ti),ci=ve?ve.prototype:r,ui=ci?ci.valueOf:r,hi=ci?ci.toString:r;function di(t){if(ks(t)&&!ms(t)&&!(t instanceof mi)){if(t instanceof gi)return t;if(ce.call(t,"__wrapped__"))return ha(t)}return new gi(t)}var fi=function(){function t(){}return function(e){if(!Is(e))return{};if($e)return $e(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function pi(){}function gi(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function mi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=H,this.__views__=[]}function vi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function _i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function yi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function bi(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new yi;++e<n;)this.add(t[e])}function wi(t){var e=this.__data__=new _i(t);this.size=e.size}function Si(t,e){var n=ms(t),i=!n&&gs(t),o=!n&&!i&&bs(t),r=!n&&!i&&!o&&Bs(t),a=n||i||o||r,s=a?mn(t.length,ne):[],l=s.length;for(var c in t)!e&&!ce.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||jr(c,l))||s.push(c);return s}function xi(t){var e=t.length;return e?t[wo(0,e-1)]:r}function Ci(t,e){return sa(nr(t),Mi(e,0,t.length))}function Ti(t){return sa(nr(t))}function Ii(t,e,n){(n===r||ds(t[e],n))&&(n!==r||e in t)||$i(t,e,n)}function ki(t,e,n){var i=t[e];ce.call(t,e)&&ds(i,n)&&(n!==r||e in t)||$i(t,e,n)}function Ai(t,e){for(var n=t.length;n--;)if(ds(t[n][0],e))return n;return-1}function Pi(t,e,n,i){return Ri(t,function(t,o,r){e(i,t,n(t),r)}),i}function Ei(t,e){return t&&ir(e,il(e),t)}function $i(t,e,n){"__proto__"==e&&rn?rn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Di(t,e){for(var i=-1,o=e.length,a=n(o),s=null==t;++i<o;)a[i]=s?r:Zs(t,e[i]);return a}function Mi(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function Oi(t,e,n,i,o,a){var s,l=e&d,c=e&f,u=e&p;if(n&&(s=o?n(t,i,o,a):n(t)),s!==r)return s;if(!Is(t))return t;var h=ms(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ce.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return nr(t,s)}else{var g=zr(t),m=g==Y||g==X;if(bs(t))return Qo(t,l);if(g==J||g==z||m&&!o){if(s=c||m?{}:Wr(t),!l)return c?function(t,e){return ir(t,Vr(t),e)}(t,function(t,e){return t&&ir(e,ol(e),t)}(s,t)):function(t,e){return ir(t,Lr(t),e)}(t,Ei(s,t))}else{if(!ke[g])return o?t:{};s=function(t,e,n){var i=t.constructor;switch(e){case lt:return Ko(t);case U:case j:return new i(+t);case ct:return function(t,e){var n=e?Ko(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ut:case ht:case dt:case ft:case pt:case gt:case mt:case vt:case _t:return Zo(t,n);case Q:return new i;case K:case it:return new i(t);case et:return function(t){var e=new t.constructor(t.source,Wt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case nt:return new i;case ot:return function(t){return ui?te(ui.call(t)):{}}(t)}}(t,g,l)}}a||(a=new wi);var v=a.get(t);if(v)return v;if(a.set(t,s),Ds(t))return t.forEach(function(i){s.add(Oi(i,e,n,i,t,a))}),s;if(As(t))return t.forEach(function(i,o){s.set(o,Oi(i,e,n,o,t,a))}),s;var _=h?r:(u?c?$r:Er:c?ol:il)(t);return qe(_||t,function(i,o){_&&(i=t[o=i]),ki(s,o,Oi(i,e,n,o,t,a))}),s}function Bi(t,e,n){var i=n.length;if(null==t)return!i;for(t=te(t);i--;){var o=n[i],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function Ni(t,e,n){if("function"!=typeof t)throw new ie(l);return ia(function(){t.apply(r,n)},e)}function Hi(t,e,n,i){var o=-1,r=Ke,s=!0,l=t.length,c=[],u=e.length;if(!l)return c;n&&(e=Je(e,vn(n))),i?(r=Ze,s=!1):e.length>=a&&(r=yn,s=!1,e=new bi(e));t:for(;++o<l;){var h=t[o],d=null==n?h:n(h);if(h=i||0!==h?h:0,s&&d==d){for(var f=u;f--;)if(e[f]===d)continue t;c.push(h)}else r(e,d,i)||c.push(h)}return c}di.templateSettings={escape:It,evaluate:kt,interpolate:At,variable:"",imports:{_:di}},di.prototype=pi.prototype,di.prototype.constructor=di,gi.prototype=fi(pi.prototype),gi.prototype.constructor=gi,mi.prototype=fi(pi.prototype),mi.prototype.constructor=mi,vi.prototype.clear=function(){this.__data__=ei?ei(null):{},this.size=0},vi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},vi.prototype.get=function(t){var e=this.__data__;if(ei){var n=e[t];return n===c?r:n}return ce.call(e,t)?e[t]:r},vi.prototype.has=function(t){var e=this.__data__;return ei?e[t]!==r:ce.call(e,t)},vi.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ei&&e===r?c:e,this},_i.prototype.clear=function(){this.__data__=[],this.size=0},_i.prototype.delete=function(t){var e=this.__data__,n=Ai(e,t);return!(n<0||(n==e.length-1?e.pop():Oe.call(e,n,1),--this.size,0))},_i.prototype.get=function(t){var e=this.__data__,n=Ai(e,t);return n<0?r:e[n][1]},_i.prototype.has=function(t){return Ai(this.__data__,t)>-1},_i.prototype.set=function(t,e){var n=this.__data__,i=Ai(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},yi.prototype.clear=function(){this.size=0,this.__data__={hash:new vi,map:new(Kn||_i),string:new vi}},yi.prototype.delete=function(t){var e=Nr(this,t).delete(t);return this.size-=e?1:0,e},yi.prototype.get=function(t){return Nr(this,t).get(t)},yi.prototype.has=function(t){return Nr(this,t).has(t)},yi.prototype.set=function(t,e){var n=Nr(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},bi.prototype.add=bi.prototype.push=function(t){return this.__data__.set(t,c),this},bi.prototype.has=function(t){return this.__data__.has(t)},wi.prototype.clear=function(){this.__data__=new _i,this.size=0},wi.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},wi.prototype.get=function(t){return this.__data__.get(t)},wi.prototype.has=function(t){return this.__data__.has(t)},wi.prototype.set=function(t,e){var n=this.__data__;if(n instanceof _i){var i=n.__data__;if(!Kn||i.length<a-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new yi(i)}return n.set(t,e),this.size=n.size,this};var Ri=ar(Gi),Li=ar(qi,!0);function Vi(t,e){var n=!0;return Ri(t,function(t,i,o){return n=!!e(t,i,o)}),n}function zi(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(l===r?s==s&&!Os(s):n(s,l)))var l=s,c=a}return c}function Fi(t,e){var n=[];return Ri(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n}function Wi(t,e,n,i,o){var r=-1,a=t.length;for(n||(n=Ur),o||(o=[]);++r<a;){var s=t[r];e>0&&n(s)?e>1?Wi(s,e-1,n,i,o):tn(o,s):i||(o[o.length]=s)}return o}var Ui=sr(),ji=sr(!0);function Gi(t,e){return t&&Ui(t,e,il)}function qi(t,e){return t&&ji(t,e,il)}function Yi(t,e){return Qe(e,function(e){return xs(t[e])})}function Xi(t,e){for(var n=0,i=(e=Go(e,t)).length;null!=t&&n<i;)t=t[ca(e[n++])];return n&&n==i?t:r}function Qi(t,e,n){var i=e(t);return ms(t)?i:tn(i,n(t))}function Ki(t){return null==t?t===r?rt:Z:Re&&Re in te(t)?function(t){var e=ce.call(t,Re),n=t[Re];try{t[Re]=r;var i=!0}catch(t){}var o=de.call(t);return i&&(e?t[Re]=n:delete t[Re]),o}(t):function(t){return de.call(t)}(t)}function Zi(t,e){return t>e}function Ji(t,e){return null!=t&&ce.call(t,e)}function to(t,e){return null!=t&&e in te(t)}function eo(t,e,i){for(var o=i?Ze:Ke,a=t[0].length,s=t.length,l=s,c=n(s),u=1/0,h=[];l--;){var d=t[l];l&&e&&(d=Je(d,vn(e))),u=jn(d.length,u),c[l]=!i&&(e||a>=120&&d.length>=120)?new bi(l&&d):r}d=t[0];var f=-1,p=c[0];t:for(;++f<a&&h.length<u;){var g=d[f],m=e?e(g):g;if(g=i||0!==g?g:0,!(p?yn(p,m):o(h,m,i))){for(l=s;--l;){var v=c[l];if(!(v?yn(v,m):o(t[l],m,i)))continue t}p&&p.push(m),h.push(g)}}return h}function no(t,e,n){var i=null==(t=ta(t,e=Go(e,t)))?t:t[ca(Sa(e))];return null==i?r:je(i,t,n)}function io(t){return ks(t)&&Ki(t)==z}function oo(t,e,n,i,o){return t===e||(null==t||null==e||!ks(t)&&!ks(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var s=ms(t),l=ms(e),c=s?F:zr(t),u=l?F:zr(e),h=(c=c==z?J:c)==J,d=(u=u==z?J:u)==J,f=c==u;if(f&&bs(t)){if(!bs(e))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new wi),s||Bs(t)?Ar(t,e,n,i,o,a):function(t,e,n,i,o,r,a){switch(n){case ct:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case lt:return!(t.byteLength!=e.byteLength||!r(new be(t),new be(e)));case U:case j:case K:return ds(+t,+e);case q:return t.name==e.name&&t.message==e.message;case et:case it:return t==e+"";case Q:var s=In;case nt:var l=i&g;if(s||(s=Pn),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;i|=m,a.set(t,e);var u=Ar(s(t),s(e),i,o,r,a);return a.delete(t),u;case ot:if(ui)return ui.call(t)==ui.call(e)}return!1}(t,e,c,n,i,o,a);if(!(n&g)){var p=h&&ce.call(t,"__wrapped__"),v=d&&ce.call(e,"__wrapped__");if(p||v){var _=p?t.value():t,y=v?e.value():e;return a||(a=new wi),o(_,y,n,i,a)}}return!!f&&(a||(a=new wi),function(t,e,n,i,o,a){var s=n&g,l=Er(t),c=l.length,u=Er(e).length;if(c!=u&&!s)return!1;for(var h=c;h--;){var d=l[h];if(!(s?d in e:ce.call(e,d)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var p=!0;a.set(t,e),a.set(e,t);for(var m=s;++h<c;){d=l[h];var v=t[d],_=e[d];if(i)var y=s?i(_,v,d,e,t,a):i(v,_,d,t,e,a);if(!(y===r?v===_||o(v,_,n,i,a):y)){p=!1;break}m||(m="constructor"==d)}if(p&&!m){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(p=!1)}return a.delete(t),a.delete(e),p}(t,e,n,i,o,a))}(t,e,n,i,oo,o))}function ro(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=te(t);o--;){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var c=(l=n[o])[0],u=t[c],h=l[1];if(s&&l[2]){if(u===r&&!(c in t))return!1}else{var d=new wi;if(i)var f=i(u,h,c,t,e,d);if(!(f===r?oo(h,u,g|m,i,d):f))return!1}}return!0}function ao(t){return!(!Is(t)||function(t){return!!he&&he in t}(t))&&(xs(t)?ge:Gt).test(ua(t))}function so(t){return"function"==typeof t?t:null==t?Pl:"object"==typeof t?ms(t)?po(t[0],t[1]):fo(t):Rl(t)}function lo(t){if(!Qr(t))return Wn(t);var e=[];for(var n in te(t))ce.call(t,n)&&"constructor"!=n&&e.push(n);return e}function co(t){if(!Is(t))return function(t){var e=[];if(null!=t)for(var n in te(t))e.push(n);return e}(t);var e=Qr(t),n=[];for(var i in t)("constructor"!=i||!e&&ce.call(t,i))&&n.push(i);return n}function uo(t,e){return t<e}function ho(t,e){var i=-1,o=_s(t)?n(t.length):[];return Ri(t,function(t,n,r){o[++i]=e(t,n,r)}),o}function fo(t){var e=Hr(t);return 1==e.length&&e[0][2]?Zr(e[0][0],e[0][1]):function(n){return n===t||ro(n,t,e)}}function po(t,e){return qr(t)&&Kr(e)?Zr(ca(t),e):function(n){var i=Zs(n,t);return i===r&&i===e?Js(n,t):oo(e,i,g|m)}}function go(t,e,n,i,o){t!==e&&Ui(e,function(a,s){if(Is(a))o||(o=new wi),function(t,e,n,i,o,a,s){var l=ea(t,n),c=ea(e,n),u=s.get(c);if(u)Ii(t,n,u);else{var h=a?a(l,c,n+"",t,e,s):r,d=h===r;if(d){var f=ms(c),p=!f&&bs(c),g=!f&&!p&&Bs(c);h=c,f||p||g?ms(l)?h=l:ys(l)?h=nr(l):p?(d=!1,h=Qo(c,!0)):g?(d=!1,h=Zo(c,!0)):h=[]:Es(c)||gs(c)?(h=l,gs(l)?h=Ws(l):Is(l)&&!xs(l)||(h=Wr(c))):d=!1}d&&(s.set(c,h),o(h,c,i,a,s),s.delete(c)),Ii(t,n,h)}}(t,e,s,n,go,i,o);else{var l=i?i(ea(t,s),a,s+"",t,e,o):r;l===r&&(l=a),Ii(t,s,l)}},ol)}function mo(t,e){var n=t.length;if(n)return jr(e+=e<0?n:0,n)?t[e]:r}function vo(t,e,n){var i=-1;return e=Je(e.length?e:[Pl],vn(Br())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(ho(t,function(t,n,o){return{criteria:Je(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return function(t,e,n){for(var i=-1,o=t.criteria,r=e.criteria,a=o.length,s=n.length;++i<a;){var l=Jo(o[i],r[i]);if(l){if(i>=s)return l;var c=n[i];return l*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function _o(t,e,n){for(var i=-1,o=e.length,r={};++i<o;){var a=e[i],s=Xi(t,a);n(s,a)&&Io(r,Go(a,t),s)}return r}function yo(t,e,n,i){var o=i?cn:ln,r=-1,a=e.length,s=t;for(t===e&&(e=nr(e)),n&&(s=Je(t,vn(n)));++r<a;)for(var l=0,c=e[r],u=n?n(c):c;(l=o(s,u,l,i))>-1;)s!==t&&Oe.call(s,l,1),Oe.call(t,l,1);return t}function bo(t,e){for(var n=t?e.length:0,i=n-1;n--;){var o=e[n];if(n==i||o!==r){var r=o;jr(o)?Oe.call(t,o,1):Ro(t,o)}}return t}function wo(t,e){return t+Rn(Yn()*(e-t+1))}function So(t,e){var n="";if(!t||e<1||e>O)return n;do{e%2&&(n+=t),(e=Rn(e/2))&&(t+=t)}while(e);return n}function xo(t,e){return oa(Jr(t,e,Pl),t+"")}function Co(t){return xi(dl(t))}function To(t,e){var n=dl(t);return sa(n,Mi(e,0,n.length))}function Io(t,e,n,i){if(!Is(t))return t;for(var o=-1,a=(e=Go(e,t)).length,s=a-1,l=t;null!=l&&++o<a;){var c=ca(e[o]),u=n;if(o!=s){var h=l[c];(u=i?i(h,c,l):r)===r&&(u=Is(h)?h:jr(e[o+1])?[]:{})}ki(l,c,u),l=l[c]}return t}var ko=ni?function(t,e){return ni.set(t,e),t}:Pl,Ao=rn?function(t,e){return rn(t,"toString",{configurable:!0,enumerable:!1,value:Il(e),writable:!0})}:Pl;function Po(t){return sa(dl(t))}function Eo(t,e,i){var o=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(i=i>r?r:i)<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var a=n(r);++o<r;)a[o]=t[o+e];return a}function $o(t,e){var n;return Ri(t,function(t,i,o){return!(n=e(t,i,o))}),!!n}function Do(t,e,n){var i=0,o=null==t?i:t.length;if("number"==typeof e&&e==e&&o<=L){for(;i<o;){var r=i+o>>>1,a=t[r];null!==a&&!Os(a)&&(n?a<=e:a<e)?i=r+1:o=r}return o}return Mo(t,e,Pl,n)}function Mo(t,e,n,i){e=n(e);for(var o=0,a=null==t?0:t.length,s=e!=e,l=null===e,c=Os(e),u=e===r;o<a;){var h=Rn((o+a)/2),d=n(t[h]),f=d!==r,p=null===d,g=d==d,m=Os(d);if(s)var v=i||g;else v=u?g&&(i||f):l?g&&f&&(i||!p):c?g&&f&&!p&&(i||!m):!p&&!m&&(i?d<=e:d<e);v?o=h+1:a=h}return jn(a,R)}function Oo(t,e){for(var n=-1,i=t.length,o=0,r=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!ds(s,l)){var l=s;r[o++]=0===a?0:a}}return r}function Bo(t){return"number"==typeof t?t:Os(t)?N:+t}function No(t){if("string"==typeof t)return t;if(ms(t))return Je(t,No)+"";if(Os(t))return hi?hi.call(t):"";var e=t+"";return"0"==e&&1/t==-M?"-0":e}function Ho(t,e,n){var i=-1,o=Ke,r=t.length,s=!0,l=[],c=l;if(n)s=!1,o=Ze;else if(r>=a){var u=e?null:Sr(t);if(u)return Pn(u);s=!1,o=yn,c=new bi}else c=e?[]:l;t:for(;++i<r;){var h=t[i],d=e?e(h):h;if(h=n||0!==h?h:0,s&&d==d){for(var f=c.length;f--;)if(c[f]===d)continue t;e&&c.push(d),l.push(h)}else o(c,d,n)||(c!==l&&c.push(d),l.push(h))}return l}function Ro(t,e){return null==(t=ta(t,e=Go(e,t)))||delete t[ca(Sa(e))]}function Lo(t,e,n,i){return Io(t,e,n(Xi(t,e)),i)}function Vo(t,e,n,i){for(var o=t.length,r=i?o:-1;(i?r--:++r<o)&&e(t[r],r,t););return n?Eo(t,i?0:r,i?r+1:o):Eo(t,i?r+1:0,i?o:r)}function zo(t,e){var n=t;return n instanceof mi&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function Fo(t,e,i){var o=t.length;if(o<2)return o?Ho(t[0]):[];for(var r=-1,a=n(o);++r<o;)for(var s=t[r],l=-1;++l<o;)l!=r&&(a[r]=Hi(a[r]||s,t[l],e,i));return Ho(Wi(a,1),e,i)}function Wo(t,e,n){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var l=i<a?e[i]:r;n(s,t[i],l)}return s}function Uo(t){return ys(t)?t:[]}function jo(t){return"function"==typeof t?t:Pl}function Go(t,e){return ms(t)?t:qr(t,e)?[t]:la(Us(t))}var qo=xo;function Yo(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:Eo(t,e,n)}var Xo=fn||function(t){return Me.clearTimeout(t)};function Qo(t,e){if(e)return t.slice();var n=t.length,i=Se?Se(n):new t.constructor(n);return t.copy(i),i}function Ko(t){var e=new t.constructor(t.byteLength);return new be(e).set(new be(t)),e}function Zo(t,e){var n=e?Ko(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Jo(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=Os(t),s=e!==r,l=null===e,c=e==e,u=Os(e);if(!l&&!u&&!a&&t>e||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&t<e||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}function tr(t,e,i,o){for(var r=-1,a=t.length,s=i.length,l=-1,c=e.length,u=Un(a-s,0),h=n(c+u),d=!o;++l<c;)h[l]=e[l];for(;++r<s;)(d||r<a)&&(h[i[r]]=t[r]);for(;u--;)h[l++]=t[r++];return h}function er(t,e,i,o){for(var r=-1,a=t.length,s=-1,l=i.length,c=-1,u=e.length,h=Un(a-l,0),d=n(h+u),f=!o;++r<h;)d[r]=t[r];for(var p=r;++c<u;)d[p+c]=e[c];for(;++s<l;)(f||r<a)&&(d[p+i[s]]=t[r++]);return d}function nr(t,e){var i=-1,o=t.length;for(e||(e=n(o));++i<o;)e[i]=t[i];return e}function ir(t,e,n,i){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var l=e[a],c=i?i(n[l],t[l],l,n,t):r;c===r&&(c=t[l]),o?$i(n,l,c):ki(n,l,c)}return n}function or(t,e){return function(n,i){var o=ms(n)?Ge:Pi,r=e?e():{};return o(n,t,Br(i,2),r)}}function rr(t){return xo(function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&Gr(n[0],n[1],s)&&(a=o<3?r:a,o=1),e=te(e);++i<o;){var l=n[i];l&&t(e,l,i,a)}return e})}function ar(t,e){return function(n,i){if(null==n)return n;if(!_s(n))return t(n,i);for(var o=n.length,r=e?o:-1,a=te(n);(e?r--:++r<o)&&!1!==i(a[r],r,a););return n}}function sr(t){return function(e,n,i){for(var o=-1,r=te(e),a=i(e),s=a.length;s--;){var l=a[t?s:++o];if(!1===n(r[l],l,r))break}return e}}function lr(t){return function(e){var n=Tn(e=Us(e))?Dn(e):r,i=n?n[0]:e.charAt(0),o=n?Yo(n,1).join(""):e.slice(1);return i[t]()+o}}function cr(t){return function(e){return en(xl(gl(e).replace(_e,"")),t,"")}}function ur(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=fi(t.prototype),i=t.apply(n,e);return Is(i)?i:n}}function hr(t){return function(e,n,i){var o=te(e);if(!_s(e)){var a=Br(n,3);e=il(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[a?e[s]:s]:r}}function dr(t){return Pr(function(e){var n=e.length,i=n,o=gi.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new ie(l);if(o&&!s&&"wrapper"==Mr(a))var s=new gi([],!0)}for(i=s?i:n;++i<n;){var c=Mr(a=e[i]),u="wrapper"==c?Dr(a):r;s=u&&Yr(u[0])&&u[1]==(C|b|S|T)&&!u[4].length&&1==u[9]?s[Mr(u[0])].apply(s,u[3]):1==a.length&&Yr(a)?s[c]():s.thru(a)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&ms(i))return s.plant(i).value();for(var o=0,r=n?e[o].apply(this,t):i;++o<n;)r=e[o].call(this,r);return r}})}function fr(t,e,i,o,a,s,l,c,u,h){var d=e&C,f=e&v,p=e&_,g=e&(b|w),m=e&I,y=p?r:ur(t);return function v(){for(var _=arguments.length,b=n(_),w=_;w--;)b[w]=arguments[w];if(g)var S=Or(v),x=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(b,S);if(o&&(b=tr(b,o,a,g)),s&&(b=er(b,s,l,g)),_-=x,g&&_<h){var C=An(b,S);return br(t,e,fr,v.placeholder,i,b,C,c,u,h-_)}var T=f?i:this,I=p?T[t]:t;return _=b.length,c?b=function(t,e){for(var n=t.length,i=jn(e.length,n),o=nr(t);i--;){var a=e[i];t[i]=jr(a,n)?o[a]:r}return t}(b,c):m&&_>1&&b.reverse(),d&&u<_&&(b.length=u),this&&this!==Me&&this instanceof v&&(I=y||ur(I)),I.apply(T,b)}}function pr(t,e){return function(n,i){return function(t,e,n,i){return Gi(t,function(t,o,r){e(i,n(t),o,r)}),i}(n,t,e(i),{})}}function gr(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=No(n),i=No(i)):(n=Bo(n),i=Bo(i)),o=t(n,i)}return o}}function mr(t){return Pr(function(e){return e=Je(e,vn(Br())),xo(function(n){var i=this;return t(e,function(t){return je(t,i,n)})})})}function vr(t,e){var n=(e=e===r?" ":No(e)).length;if(n<2)return n?So(e,t):e;var i=So(e,Hn(t/$n(e)));return Tn(e)?Yo(Dn(i),0,t).join(""):i.slice(0,t)}function _r(t){return function(e,i,o){return o&&"number"!=typeof o&&Gr(e,i,o)&&(i=o=r),e=Ls(e),i===r?(i=e,e=0):i=Ls(i),function(t,e,i,o){for(var r=-1,a=Un(Hn((e-t)/(i||1)),0),s=n(a);a--;)s[o?a:++r]=t,t+=i;return s}(e,i,o=o===r?e<i?1:-1:Ls(o),t)}}function yr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Fs(e),n=Fs(n)),t(e,n)}}function br(t,e,n,i,o,a,s,l,c,u){var h=e&b;e|=h?S:x,(e&=~(h?x:S))&y||(e&=~(v|_));var d=[t,e,o,h?a:r,h?s:r,h?r:a,h?r:s,l,c,u],f=n.apply(r,d);return Yr(t)&&na(f,d),f.placeholder=i,ra(f,t,e)}function wr(t){var e=Jt[t];return function(t,n){if(t=Fs(t),n=null==n?0:jn(Vs(n),292)){var i=(Us(t)+"e").split("e");return+((i=(Us(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Sr=Jn&&1/Pn(new Jn([,-0]))[1]==M?function(t){return new Jn(t)}:Ol;function xr(t){return function(e){var n=zr(e);return n==Q?In(e):n==nt?En(e):function(t,e){return Je(e,function(e){return[e,t[e]]})}(e,t(e))}}function Cr(t,e,i,o,a,s,c,u){var d=e&_;if(!d&&"function"!=typeof t)throw new ie(l);var f=o?o.length:0;if(f||(e&=~(S|x),o=a=r),c=c===r?c:Un(Vs(c),0),u=u===r?u:Vs(u),f-=a?a.length:0,e&x){var p=o,g=a;o=a=r}var m=d?r:Dr(t),I=[t,e,i,o,a,p,g,s,c,u];if(m&&function(t,e){var n=t[1],i=e[1],o=n|i,r=o<(v|_|C),a=i==C&&n==b||i==C&&n==T&&t[7].length<=e[8]||i==(C|T)&&e[7].length<=e[8]&&n==b;if(!r&&!a)return t;i&v&&(t[2]=e[2],o|=n&v?0:y);var s=e[3];if(s){var l=t[3];t[3]=l?tr(l,s,e[4]):s,t[4]=l?An(t[3],h):e[4]}(s=e[5])&&(l=t[5],t[5]=l?er(l,s,e[6]):s,t[6]=l?An(t[5],h):e[6]),(s=e[7])&&(t[7]=s),i&C&&(t[8]=null==t[8]?e[8]:jn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(I,m),t=I[0],e=I[1],i=I[2],o=I[3],a=I[4],!(u=I[9]=I[9]===r?d?0:t.length:Un(I[9]-f,0))&&e&(b|w)&&(e&=~(b|w)),e&&e!=v)k=e==b||e==w?function(t,e,i){var o=ur(t);return function a(){for(var s=arguments.length,l=n(s),c=s,u=Or(a);c--;)l[c]=arguments[c];var h=s<3&&l[0]!==u&&l[s-1]!==u?[]:An(l,u);return(s-=h.length)<i?br(t,e,fr,a.placeholder,r,l,h,r,r,i-s):je(this&&this!==Me&&this instanceof a?o:t,this,l)}}(t,e,u):e!=S&&e!=(v|S)||a.length?fr.apply(r,I):function(t,e,i,o){var r=e&v,a=ur(t);return function e(){for(var s=-1,l=arguments.length,c=-1,u=o.length,h=n(u+l),d=this&&this!==Me&&this instanceof e?a:t;++c<u;)h[c]=o[c];for(;l--;)h[c++]=arguments[++s];return je(d,r?i:this,h)}}(t,e,i,o);else var k=function(t,e,n){var i=e&v,o=ur(t);return function e(){return(this&&this!==Me&&this instanceof e?o:t).apply(i?n:this,arguments)}}(t,e,i);return ra((m?ko:na)(k,I),t,e)}function Tr(t,e,n,i){return t===r||ds(t,ae[n])&&!ce.call(i,n)?e:t}function Ir(t,e,n,i,o,a){return Is(t)&&Is(e)&&(a.set(e,t),go(t,e,r,Ir,a),a.delete(e)),t}function kr(t){return Es(t)?r:t}function Ar(t,e,n,i,o,a){var s=n&g,l=t.length,c=e.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var h=-1,d=!0,f=n&m?new bi:r;for(a.set(t,e),a.set(e,t);++h<l;){var p=t[h],v=e[h];if(i)var _=s?i(v,p,h,e,t,a):i(p,v,h,t,e,a);if(_!==r){if(_)continue;d=!1;break}if(f){if(!on(e,function(t,e){if(!yn(f,e)&&(p===t||o(p,t,n,i,a)))return f.push(e)})){d=!1;break}}else if(p!==v&&!o(p,v,n,i,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function Pr(t){return oa(Jr(t,r,va),t+"")}function Er(t){return Qi(t,il,Lr)}function $r(t){return Qi(t,ol,Vr)}var Dr=ni?function(t){return ni.get(t)}:Ol;function Mr(t){for(var e=t.name+"",n=ii[e],i=ce.call(ii,e)?n.length:0;i--;){var o=n[i],r=o.func;if(null==r||r==t)return o.name}return e}function Or(t){return(ce.call(di,"placeholder")?di:t).placeholder}function Br(){var t=di.iteratee||El;return t=t===El?so:t,arguments.length?t(arguments[0],arguments[1]):t}function Nr(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Hr(t){for(var e=il(t),n=e.length;n--;){var i=e[n],o=t[i];e[n]=[i,o,Kr(o)]}return e}function Rr(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return ao(n)?n:r}var Lr=Ln?function(t){return null==t?[]:(t=te(t),Qe(Ln(t),function(e){return De.call(t,e)}))}:zl,Vr=Ln?function(t){for(var e=[];t;)tn(e,Lr(t)),t=Ae(t);return e}:zl,zr=Ki;function Fr(t,e,n){for(var i=-1,o=(e=Go(e,t)).length,r=!1;++i<o;){var a=ca(e[i]);if(!(r=null!=t&&n(t,a)))break;t=t[a]}return r||++i!=o?r:!!(o=null==t?0:t.length)&&Ts(o)&&jr(a,o)&&(ms(t)||gs(t))}function Wr(t){return"function"!=typeof t.constructor||Qr(t)?{}:fi(Ae(t))}function Ur(t){return ms(t)||gs(t)||!!(Be&&t&&t[Be])}function jr(t,e){var n=typeof t;return!!(e=null==e?O:e)&&("number"==n||"symbol"!=n&&Yt.test(t))&&t>-1&&t%1==0&&t<e}function Gr(t,e,n){if(!Is(n))return!1;var i=typeof e;return!!("number"==i?_s(n)&&jr(e,n.length):"string"==i&&e in n)&&ds(n[e],t)}function qr(t,e){if(ms(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Os(t))||Et.test(t)||!Pt.test(t)||null!=e&&t in te(e)}function Yr(t){var e=Mr(t),n=di[e];if("function"!=typeof n||!(e in mi.prototype))return!1;if(t===n)return!0;var i=Dr(n);return!!i&&t===i[0]}(Qn&&zr(new Qn(new ArrayBuffer(1)))!=ct||Kn&&zr(new Kn)!=Q||Zn&&"[object Promise]"!=zr(Zn.resolve())||Jn&&zr(new Jn)!=nt||ti&&zr(new ti)!=at)&&(zr=function(t){var e=Ki(t),n=e==J?t.constructor:r,i=n?ua(n):"";if(i)switch(i){case oi:return ct;case ri:return Q;case ai:return"[object Promise]";case si:return nt;case li:return at}return e});var Xr=se?xs:Fl;function Qr(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ae)}function Kr(t){return t==t&&!Is(t)}function Zr(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in te(n))}}function Jr(t,e,i){return e=Un(e===r?t.length-1:e,0),function(){for(var o=arguments,r=-1,a=Un(o.length-e,0),s=n(a);++r<a;)s[r]=o[e+r];r=-1;for(var l=n(e+1);++r<e;)l[r]=o[r];return l[e]=i(s),je(t,this,l)}}function ta(t,e){return e.length<2?t:Xi(t,Eo(e,0,-1))}function ea(t,e){if("__proto__"!=e)return t[e]}var na=aa(ko),ia=Nn||function(t,e){return Me.setTimeout(t,e)},oa=aa(Ao);function ra(t,e,n){var i=e+"";return oa(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Ht,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return qe(V,function(n){var i="_."+n[0];e&n[1]&&!Ke(t,i)&&t.push(i)}),t.sort()}(function(t){var e=t.match(Rt);return e?e[1].split(Lt):[]}(i),n)))}function aa(t){var e=0,n=0;return function(){var i=Gn(),o=E-(i-n);if(n=i,o>0){if(++e>=P)return arguments[0]}else e=0;return t.apply(r,arguments)}}function sa(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var a=wo(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var la=function(t){var e=as(t,function(t){return n.size===u&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace($t,function(t,n,i,o){e.push(i?o.replace(zt,"$1"):n||t)}),e});function ca(t){if("string"==typeof t||Os(t))return t;var e=t+"";return"0"==e&&1/t==-M?"-0":e}function ua(t){if(null!=t){try{return le.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ha(t){if(t instanceof mi)return t.clone();var e=new gi(t.__wrapped__,t.__chain__);return e.__actions__=nr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var da=xo(function(t,e){return ys(t)?Hi(t,Wi(e,1,ys,!0)):[]}),fa=xo(function(t,e){var n=Sa(e);return ys(n)&&(n=r),ys(t)?Hi(t,Wi(e,1,ys,!0),Br(n,2)):[]}),pa=xo(function(t,e){var n=Sa(e);return ys(n)&&(n=r),ys(t)?Hi(t,Wi(e,1,ys,!0),r,n):[]});function ga(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=null==n?0:Vs(n);return o<0&&(o=Un(i+o,0)),sn(t,Br(e,3),o)}function ma(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=Vs(n),o=n<0?Un(i+o,0):jn(o,i-1)),sn(t,Br(e,3),o,!0)}function va(t){return null!=t&&t.length?Wi(t,1):[]}function _a(t){return t&&t.length?t[0]:r}var ya=xo(function(t){var e=Je(t,Uo);return e.length&&e[0]===t[0]?eo(e):[]}),ba=xo(function(t){var e=Sa(t),n=Je(t,Uo);return e===Sa(n)?e=r:n.pop(),n.length&&n[0]===t[0]?eo(n,Br(e,2)):[]}),wa=xo(function(t){var e=Sa(t),n=Je(t,Uo);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?eo(n,r,e):[]});function Sa(t){var e=null==t?0:t.length;return e?t[e-1]:r}var xa=xo(Ca);function Ca(t,e){return t&&t.length&&e&&e.length?yo(t,e):t}var Ta=Pr(function(t,e){var n=null==t?0:t.length,i=Di(t,e);return bo(t,Je(e,function(t){return jr(t,n)?+t:t}).sort(Jo)),i});function Ia(t){return null==t?t:Xn.call(t)}var ka=xo(function(t){return Ho(Wi(t,1,ys,!0))}),Aa=xo(function(t){var e=Sa(t);return ys(e)&&(e=r),Ho(Wi(t,1,ys,!0),Br(e,2))}),Pa=xo(function(t){var e=Sa(t);return e="function"==typeof e?e:r,Ho(Wi(t,1,ys,!0),r,e)});function Ea(t){if(!t||!t.length)return[];var e=0;return t=Qe(t,function(t){if(ys(t))return e=Un(t.length,e),!0}),mn(e,function(e){return Je(t,dn(e))})}function $a(t,e){if(!t||!t.length)return[];var n=Ea(t);return null==e?n:Je(n,function(t){return je(e,r,t)})}var Da=xo(function(t,e){return ys(t)?Hi(t,e):[]}),Ma=xo(function(t){return Fo(Qe(t,ys))}),Oa=xo(function(t){var e=Sa(t);return ys(e)&&(e=r),Fo(Qe(t,ys),Br(e,2))}),Ba=xo(function(t){var e=Sa(t);return e="function"==typeof e?e:r,Fo(Qe(t,ys),r,e)}),Na=xo(Ea);var Ha=xo(function(t){var e=t.length,n=e>1?t[e-1]:r;return $a(t,n="function"==typeof n?(t.pop(),n):r)});function Ra(t){var e=di(t);return e.__chain__=!0,e}function La(t,e){return e(t)}var Va=Pr(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return Di(e,t)};return!(e>1||this.__actions__.length)&&i instanceof mi&&jr(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:La,args:[o],thisArg:r}),new gi(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(r),t})):this.thru(o)});var za=or(function(t,e,n){ce.call(t,n)?++t[n]:$i(t,n,1)});var Fa=hr(ga),Wa=hr(ma);function Ua(t,e){return(ms(t)?qe:Ri)(t,Br(e,3))}function ja(t,e){return(ms(t)?Ye:Li)(t,Br(e,3))}var Ga=or(function(t,e,n){ce.call(t,n)?t[n].push(e):$i(t,n,[e])});var qa=xo(function(t,e,i){var o=-1,r="function"==typeof e,a=_s(t)?n(t.length):[];return Ri(t,function(t){a[++o]=r?je(e,t,i):no(t,e,i)}),a}),Ya=or(function(t,e,n){$i(t,n,e)});function Xa(t,e){return(ms(t)?Je:ho)(t,Br(e,3))}var Qa=or(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Ka=xo(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Gr(t,e[0],e[1])?e=[]:n>2&&Gr(e[0],e[1],e[2])&&(e=[e[0]]),vo(t,Wi(e,1),[])}),Za=Bn||function(){return Me.Date.now()};function Ja(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Cr(t,C,r,r,r,r,e)}function ts(t,e){var n;if("function"!=typeof e)throw new ie(l);return t=Vs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var es=xo(function(t,e,n){var i=v;if(n.length){var o=An(n,Or(es));i|=S}return Cr(t,i,e,n,o)}),ns=xo(function(t,e,n){var i=v|_;if(n.length){var o=An(n,Or(ns));i|=S}return Cr(e,i,t,n,o)});function is(t,e,n){var i,o,a,s,c,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new ie(l);function g(e){var n=i,a=o;return i=o=r,h=e,s=t.apply(a,n)}function m(t){var n=t-u;return u===r||n>=e||n<0||f&&t-h>=a}function v(){var t=Za();if(m(t))return _(t);c=ia(v,function(t){var n=e-(t-u);return f?jn(n,a-(t-h)):n}(t))}function _(t){return c=r,p&&i?g(t):(i=o=r,s)}function y(){var t=Za(),n=m(t);if(i=arguments,o=this,u=t,n){if(c===r)return function(t){return h=t,c=ia(v,e),d?g(t):s}(u);if(f)return c=ia(v,e),g(u)}return c===r&&(c=ia(v,e)),s}return e=Fs(e)||0,Is(n)&&(d=!!n.leading,a=(f="maxWait"in n)?Un(Fs(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),y.cancel=function(){c!==r&&Xo(c),h=0,i=u=o=c=r},y.flush=function(){return c===r?s:_(Za())},y}var os=xo(function(t,e){return Ni(t,1,e)}),rs=xo(function(t,e,n){return Ni(t,Fs(e)||0,n)});function as(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(l);var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var a=t.apply(this,i);return n.cache=r.set(o,a)||r,a};return n.cache=new(as.Cache||yi),n}function ss(t){if("function"!=typeof t)throw new ie(l);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}as.Cache=yi;var ls=qo(function(t,e){var n=(e=1==e.length&&ms(e[0])?Je(e[0],vn(Br())):Je(Wi(e,1),vn(Br()))).length;return xo(function(i){for(var o=-1,r=jn(i.length,n);++o<r;)i[o]=e[o].call(this,i[o]);return je(t,this,i)})}),cs=xo(function(t,e){var n=An(e,Or(cs));return Cr(t,S,r,e,n)}),us=xo(function(t,e){var n=An(e,Or(us));return Cr(t,x,r,e,n)}),hs=Pr(function(t,e){return Cr(t,T,r,r,r,e)});function ds(t,e){return t===e||t!=t&&e!=e}var fs=yr(Zi),ps=yr(function(t,e){return t>=e}),gs=io(function(){return arguments}())?io:function(t){return ks(t)&&ce.call(t,"callee")&&!De.call(t,"callee")},ms=n.isArray,vs=Le?vn(Le):function(t){return ks(t)&&Ki(t)==lt};function _s(t){return null!=t&&Ts(t.length)&&!xs(t)}function ys(t){return ks(t)&&_s(t)}var bs=Vn||Fl,ws=Ve?vn(Ve):function(t){return ks(t)&&Ki(t)==j};function Ss(t){if(!ks(t))return!1;var e=Ki(t);return e==q||e==G||"string"==typeof t.message&&"string"==typeof t.name&&!Es(t)}function xs(t){if(!Is(t))return!1;var e=Ki(t);return e==Y||e==X||e==W||e==tt}function Cs(t){return"number"==typeof t&&t==Vs(t)}function Ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=O}function Is(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ks(t){return null!=t&&"object"==typeof t}var As=ze?vn(ze):function(t){return ks(t)&&zr(t)==Q};function Ps(t){return"number"==typeof t||ks(t)&&Ki(t)==K}function Es(t){if(!ks(t)||Ki(t)!=J)return!1;var e=Ae(t);if(null===e)return!0;var n=ce.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&le.call(n)==fe}var $s=Fe?vn(Fe):function(t){return ks(t)&&Ki(t)==et};var Ds=We?vn(We):function(t){return ks(t)&&zr(t)==nt};function Ms(t){return"string"==typeof t||!ms(t)&&ks(t)&&Ki(t)==it}function Os(t){return"symbol"==typeof t||ks(t)&&Ki(t)==ot}var Bs=Ue?vn(Ue):function(t){return ks(t)&&Ts(t.length)&&!!Ie[Ki(t)]};var Ns=yr(uo),Hs=yr(function(t,e){return t<=e});function Rs(t){if(!t)return[];if(_s(t))return Ms(t)?Dn(t):nr(t);if(He&&t[He])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[He]());var e=zr(t);return(e==Q?In:e==nt?Pn:dl)(t)}function Ls(t){return t?(t=Fs(t))===M||t===-M?(t<0?-1:1)*B:t==t?t:0:0===t?t:0}function Vs(t){var e=Ls(t),n=e%1;return e==e?n?e-n:e:0}function zs(t){return t?Mi(Vs(t),0,H):0}function Fs(t){if("number"==typeof t)return t;if(Os(t))return N;if(Is(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Is(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ot,"");var n=jt.test(t);return n||qt.test(t)?Ee(t.slice(2),n?2:8):Ut.test(t)?N:+t}function Ws(t){return ir(t,ol(t))}function Us(t){return null==t?"":No(t)}var js=rr(function(t,e){if(Qr(e)||_s(e))ir(e,il(e),t);else for(var n in e)ce.call(e,n)&&ki(t,n,e[n])}),Gs=rr(function(t,e){ir(e,ol(e),t)}),qs=rr(function(t,e,n,i){ir(e,ol(e),t,i)}),Ys=rr(function(t,e,n,i){ir(e,il(e),t,i)}),Xs=Pr(Di);var Qs=xo(function(t,e){t=te(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&Gr(e[0],e[1],o)&&(i=1);++n<i;)for(var a=e[n],s=ol(a),l=-1,c=s.length;++l<c;){var u=s[l],h=t[u];(h===r||ds(h,ae[u])&&!ce.call(t,u))&&(t[u]=a[u])}return t}),Ks=xo(function(t){return t.push(r,Ir),je(al,r,t)});function Zs(t,e,n){var i=null==t?r:Xi(t,e);return i===r?n:i}function Js(t,e){return null!=t&&Fr(t,e,to)}var tl=pr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),t[e]=n},Il(Pl)),el=pr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),ce.call(t,e)?t[e].push(n):t[e]=[n]},Br),nl=xo(no);function il(t){return _s(t)?Si(t):lo(t)}function ol(t){return _s(t)?Si(t,!0):co(t)}var rl=rr(function(t,e,n){go(t,e,n)}),al=rr(function(t,e,n,i){go(t,e,n,i)}),sl=Pr(function(t,e){var n={};if(null==t)return n;var i=!1;e=Je(e,function(e){return e=Go(e,t),i||(i=e.length>1),e}),ir(t,$r(t),n),i&&(n=Oi(n,d|f|p,kr));for(var o=e.length;o--;)Ro(n,e[o]);return n});var ll=Pr(function(t,e){return null==t?{}:function(t,e){return _o(t,e,function(e,n){return Js(t,n)})}(t,e)});function cl(t,e){if(null==t)return{};var n=Je($r(t),function(t){return[t]});return e=Br(e),_o(t,n,function(t,n){return e(t,n[0])})}var ul=xr(il),hl=xr(ol);function dl(t){return null==t?[]:_n(t,il(t))}var fl=cr(function(t,e,n){return e=e.toLowerCase(),t+(n?pl(e):e)});function pl(t){return Sl(Us(t).toLowerCase())}function gl(t){return(t=Us(t))&&t.replace(Xt,Sn).replace(ye,"")}var ml=cr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),vl=cr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),_l=lr("toLowerCase");var yl=cr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var bl=cr(function(t,e,n){return t+(n?" ":"")+Sl(e)});var wl=cr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Sl=lr("toUpperCase");function xl(t,e,n){return t=Us(t),(e=n?r:e)===r?function(t){return xe.test(t)}(t)?function(t){return t.match(we)||[]}(t):function(t){return t.match(Vt)||[]}(t):t.match(e)||[]}var Cl=xo(function(t,e){try{return je(t,r,e)}catch(t){return Ss(t)?t:new o(t)}}),Tl=Pr(function(t,e){return qe(e,function(e){e=ca(e),$i(t,e,es(t[e],t))}),t});function Il(t){return function(){return t}}var kl=dr(),Al=dr(!0);function Pl(t){return t}function El(t){return so("function"==typeof t?t:Oi(t,d))}var $l=xo(function(t,e){return function(n){return no(n,t,e)}}),Dl=xo(function(t,e){return function(n){return no(t,n,e)}});function Ml(t,e,n){var i=il(e),o=Yi(e,i);null!=n||Is(e)&&(o.length||!i.length)||(n=e,e=t,t=this,o=Yi(e,il(e)));var r=!(Is(n)&&"chain"in n&&!n.chain),a=xs(t);return qe(o,function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(r||e){var n=t(this.__wrapped__);return(n.__actions__=nr(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,tn([this.value()],arguments))})}),t}function Ol(){}var Bl=mr(Je),Nl=mr(Xe),Hl=mr(on);function Rl(t){return qr(t)?dn(ca(t)):function(t){return function(e){return Xi(e,t)}}(t)}var Ll=_r(),Vl=_r(!0);function zl(){return[]}function Fl(){return!1}var Wl=gr(function(t,e){return t+e},0),Ul=wr("ceil"),jl=gr(function(t,e){return t/e},1),Gl=wr("floor");var ql=gr(function(t,e){return t*e},1),Yl=wr("round"),Xl=gr(function(t,e){return t-e},0);return di.after=function(t,e){if("function"!=typeof e)throw new ie(l);return t=Vs(t),function(){if(--t<1)return e.apply(this,arguments)}},di.ary=Ja,di.assign=js,di.assignIn=Gs,di.assignInWith=qs,di.assignWith=Ys,di.at=Xs,di.before=ts,di.bind=es,di.bindAll=Tl,di.bindKey=ns,di.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ms(t)?t:[t]},di.chain=Ra,di.chunk=function(t,e,i){e=(i?Gr(t,e,i):e===r)?1:Un(Vs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,l=n(Hn(o/e));a<o;)l[s++]=Eo(t,a,a+=e);return l},di.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,o=[];++e<n;){var r=t[e];r&&(o[i++]=r)}return o},di.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),i=arguments[0],o=t;o--;)e[o-1]=arguments[o];return tn(ms(i)?nr(i):[i],Wi(e,1))},di.cond=function(t){var e=null==t?0:t.length,n=Br();return t=e?Je(t,function(t){if("function"!=typeof t[1])throw new ie(l);return[n(t[0]),t[1]]}):[],xo(function(n){for(var i=-1;++i<e;){var o=t[i];if(je(o[0],this,n))return je(o[1],this,n)}})},di.conforms=function(t){return function(t){var e=il(t);return function(n){return Bi(n,t,e)}}(Oi(t,d))},di.constant=Il,di.countBy=za,di.create=function(t,e){var n=fi(t);return null==e?n:Ei(n,e)},di.curry=function t(e,n,i){var o=Cr(e,b,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},di.curryRight=function t(e,n,i){var o=Cr(e,w,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},di.debounce=is,di.defaults=Qs,di.defaultsDeep=Ks,di.defer=os,di.delay=rs,di.difference=da,di.differenceBy=fa,di.differenceWith=pa,di.drop=function(t,e,n){var i=null==t?0:t.length;return i?Eo(t,(e=n||e===r?1:Vs(e))<0?0:e,i):[]},di.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Eo(t,0,(e=i-(e=n||e===r?1:Vs(e)))<0?0:e):[]},di.dropRightWhile=function(t,e){return t&&t.length?Vo(t,Br(e,3),!0,!0):[]},di.dropWhile=function(t,e){return t&&t.length?Vo(t,Br(e,3),!0):[]},di.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Gr(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=Vs(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:Vs(i))<0&&(i+=o),i=n>i?0:zs(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},di.filter=function(t,e){return(ms(t)?Qe:Fi)(t,Br(e,3))},di.flatMap=function(t,e){return Wi(Xa(t,e),1)},di.flatMapDeep=function(t,e){return Wi(Xa(t,e),M)},di.flatMapDepth=function(t,e,n){return n=n===r?1:Vs(n),Wi(Xa(t,e),n)},di.flatten=va,di.flattenDeep=function(t){return null!=t&&t.length?Wi(t,M):[]},di.flattenDepth=function(t,e){return null!=t&&t.length?Wi(t,e=e===r?1:Vs(e)):[]},di.flip=function(t){return Cr(t,I)},di.flow=kl,di.flowRight=Al,di.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var o=t[e];i[o[0]]=o[1]}return i},di.functions=function(t){return null==t?[]:Yi(t,il(t))},di.functionsIn=function(t){return null==t?[]:Yi(t,ol(t))},di.groupBy=Ga,di.initial=function(t){return null!=t&&t.length?Eo(t,0,-1):[]},di.intersection=ya,di.intersectionBy=ba,di.intersectionWith=wa,di.invert=tl,di.invertBy=el,di.invokeMap=qa,di.iteratee=El,di.keyBy=Ya,di.keys=il,di.keysIn=ol,di.map=Xa,di.mapKeys=function(t,e){var n={};return e=Br(e,3),Gi(t,function(t,i,o){$i(n,e(t,i,o),t)}),n},di.mapValues=function(t,e){var n={};return e=Br(e,3),Gi(t,function(t,i,o){$i(n,i,e(t,i,o))}),n},di.matches=function(t){return fo(Oi(t,d))},di.matchesProperty=function(t,e){return po(t,Oi(e,d))},di.memoize=as,di.merge=rl,di.mergeWith=al,di.method=$l,di.methodOf=Dl,di.mixin=Ml,di.negate=ss,di.nthArg=function(t){return t=Vs(t),xo(function(e){return mo(e,t)})},di.omit=sl,di.omitBy=function(t,e){return cl(t,ss(Br(e)))},di.once=function(t){return ts(2,t)},di.orderBy=function(t,e,n,i){return null==t?[]:(ms(e)||(e=null==e?[]:[e]),ms(n=i?r:n)||(n=null==n?[]:[n]),vo(t,e,n))},di.over=Bl,di.overArgs=ls,di.overEvery=Nl,di.overSome=Hl,di.partial=cs,di.partialRight=us,di.partition=Qa,di.pick=ll,di.pickBy=cl,di.property=Rl,di.propertyOf=function(t){return function(e){return null==t?r:Xi(t,e)}},di.pull=xa,di.pullAll=Ca,di.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?yo(t,e,Br(n,2)):t},di.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?yo(t,e,r,n):t},di.pullAt=Ta,di.range=Ll,di.rangeRight=Vl,di.rearg=hs,di.reject=function(t,e){return(ms(t)?Qe:Fi)(t,ss(Br(e,3)))},di.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,o=[],r=t.length;for(e=Br(e,3);++i<r;){var a=t[i];e(a,i,t)&&(n.push(a),o.push(i))}return bo(t,o),n},di.rest=function(t,e){if("function"!=typeof t)throw new ie(l);return xo(t,e=e===r?e:Vs(e))},di.reverse=Ia,di.sampleSize=function(t,e,n){return e=(n?Gr(t,e,n):e===r)?1:Vs(e),(ms(t)?Ci:To)(t,e)},di.set=function(t,e,n){return null==t?t:Io(t,e,n)},di.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Io(t,e,n,i)},di.shuffle=function(t){return(ms(t)?Ti:Po)(t)},di.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Gr(t,e,n)?(e=0,n=i):(e=null==e?0:Vs(e),n=n===r?i:Vs(n)),Eo(t,e,n)):[]},di.sortBy=Ka,di.sortedUniq=function(t){return t&&t.length?Oo(t):[]},di.sortedUniqBy=function(t,e){return t&&t.length?Oo(t,Br(e,2)):[]},di.split=function(t,e,n){return n&&"number"!=typeof n&&Gr(t,e,n)&&(e=n=r),(n=n===r?H:n>>>0)?(t=Us(t))&&("string"==typeof e||null!=e&&!$s(e))&&!(e=No(e))&&Tn(t)?Yo(Dn(t),0,n):t.split(e,n):[]},di.spread=function(t,e){if("function"!=typeof t)throw new ie(l);return e=null==e?0:Un(Vs(e),0),xo(function(n){var i=n[e],o=Yo(n,0,e);return i&&tn(o,i),je(t,this,o)})},di.tail=function(t){var e=null==t?0:t.length;return e?Eo(t,1,e):[]},di.take=function(t,e,n){return t&&t.length?Eo(t,0,(e=n||e===r?1:Vs(e))<0?0:e):[]},di.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Eo(t,(e=i-(e=n||e===r?1:Vs(e)))<0?0:e,i):[]},di.takeRightWhile=function(t,e){return t&&t.length?Vo(t,Br(e,3),!1,!0):[]},di.takeWhile=function(t,e){return t&&t.length?Vo(t,Br(e,3)):[]},di.tap=function(t,e){return e(t),t},di.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new ie(l);return Is(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),is(t,e,{leading:i,maxWait:e,trailing:o})},di.thru=La,di.toArray=Rs,di.toPairs=ul,di.toPairsIn=hl,di.toPath=function(t){return ms(t)?Je(t,ca):Os(t)?[t]:nr(la(Us(t)))},di.toPlainObject=Ws,di.transform=function(t,e,n){var i=ms(t),o=i||bs(t)||Bs(t);if(e=Br(e,4),null==n){var r=t&&t.constructor;n=o?i?new r:[]:Is(t)&&xs(r)?fi(Ae(t)):{}}return(o?qe:Gi)(t,function(t,i,o){return e(n,t,i,o)}),n},di.unary=function(t){return Ja(t,1)},di.union=ka,di.unionBy=Aa,di.unionWith=Pa,di.uniq=function(t){return t&&t.length?Ho(t):[]},di.uniqBy=function(t,e){return t&&t.length?Ho(t,Br(e,2)):[]},di.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?Ho(t,r,e):[]},di.unset=function(t,e){return null==t||Ro(t,e)},di.unzip=Ea,di.unzipWith=$a,di.update=function(t,e,n){return null==t?t:Lo(t,e,jo(n))},di.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Lo(t,e,jo(n),i)},di.values=dl,di.valuesIn=function(t){return null==t?[]:_n(t,ol(t))},di.without=Da,di.words=xl,di.wrap=function(t,e){return cs(jo(e),t)},di.xor=Ma,di.xorBy=Oa,di.xorWith=Ba,di.zip=Na,di.zipObject=function(t,e){return Wo(t||[],e||[],ki)},di.zipObjectDeep=function(t,e){return Wo(t||[],e||[],Io)},di.zipWith=Ha,di.entries=ul,di.entriesIn=hl,di.extend=Gs,di.extendWith=qs,Ml(di,di),di.add=Wl,di.attempt=Cl,di.camelCase=fl,di.capitalize=pl,di.ceil=Ul,di.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=Fs(n))==n?n:0),e!==r&&(e=(e=Fs(e))==e?e:0),Mi(Fs(t),e,n)},di.clone=function(t){return Oi(t,p)},di.cloneDeep=function(t){return Oi(t,d|p)},di.cloneDeepWith=function(t,e){return Oi(t,d|p,e="function"==typeof e?e:r)},di.cloneWith=function(t,e){return Oi(t,p,e="function"==typeof e?e:r)},di.conformsTo=function(t,e){return null==e||Bi(t,e,il(e))},di.deburr=gl,di.defaultTo=function(t,e){return null==t||t!=t?e:t},di.divide=jl,di.endsWith=function(t,e,n){t=Us(t),e=No(e);var i=t.length,o=n=n===r?i:Mi(Vs(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},di.eq=ds,di.escape=function(t){return(t=Us(t))&&Tt.test(t)?t.replace(xt,xn):t},di.escapeRegExp=function(t){return(t=Us(t))&&Mt.test(t)?t.replace(Dt,"\\$&"):t},di.every=function(t,e,n){var i=ms(t)?Xe:Vi;return n&&Gr(t,e,n)&&(e=r),i(t,Br(e,3))},di.find=Fa,di.findIndex=ga,di.findKey=function(t,e){return an(t,Br(e,3),Gi)},di.findLast=Wa,di.findLastIndex=ma,di.findLastKey=function(t,e){return an(t,Br(e,3),qi)},di.floor=Gl,di.forEach=Ua,di.forEachRight=ja,di.forIn=function(t,e){return null==t?t:Ui(t,Br(e,3),ol)},di.forInRight=function(t,e){return null==t?t:ji(t,Br(e,3),ol)},di.forOwn=function(t,e){return t&&Gi(t,Br(e,3))},di.forOwnRight=function(t,e){return t&&qi(t,Br(e,3))},di.get=Zs,di.gt=fs,di.gte=ps,di.has=function(t,e){return null!=t&&Fr(t,e,Ji)},di.hasIn=Js,di.head=_a,di.identity=Pl,di.includes=function(t,e,n,i){t=_s(t)?t:dl(t),n=n&&!i?Vs(n):0;var o=t.length;return n<0&&(n=Un(o+n,0)),Ms(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&ln(t,e,n)>-1},di.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=null==n?0:Vs(n);return o<0&&(o=Un(i+o,0)),ln(t,e,o)},di.inRange=function(t,e,n){return e=Ls(e),n===r?(n=e,e=0):n=Ls(n),function(t,e,n){return t>=jn(e,n)&&t<Un(e,n)}(t=Fs(t),e,n)},di.invoke=nl,di.isArguments=gs,di.isArray=ms,di.isArrayBuffer=vs,di.isArrayLike=_s,di.isArrayLikeObject=ys,di.isBoolean=function(t){return!0===t||!1===t||ks(t)&&Ki(t)==U},di.isBuffer=bs,di.isDate=ws,di.isElement=function(t){return ks(t)&&1===t.nodeType&&!Es(t)},di.isEmpty=function(t){if(null==t)return!0;if(_s(t)&&(ms(t)||"string"==typeof t||"function"==typeof t.splice||bs(t)||Bs(t)||gs(t)))return!t.length;var e=zr(t);if(e==Q||e==nt)return!t.size;if(Qr(t))return!lo(t).length;for(var n in t)if(ce.call(t,n))return!1;return!0},di.isEqual=function(t,e){return oo(t,e)},di.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?oo(t,e,r,n):!!i},di.isError=Ss,di.isFinite=function(t){return"number"==typeof t&&zn(t)},di.isFunction=xs,di.isInteger=Cs,di.isLength=Ts,di.isMap=As,di.isMatch=function(t,e){return t===e||ro(t,e,Hr(e))},di.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,ro(t,e,Hr(e),n)},di.isNaN=function(t){return Ps(t)&&t!=+t},di.isNative=function(t){if(Xr(t))throw new o(s);return ao(t)},di.isNil=function(t){return null==t},di.isNull=function(t){return null===t},di.isNumber=Ps,di.isObject=Is,di.isObjectLike=ks,di.isPlainObject=Es,di.isRegExp=$s,di.isSafeInteger=function(t){return Cs(t)&&t>=-O&&t<=O},di.isSet=Ds,di.isString=Ms,di.isSymbol=Os,di.isTypedArray=Bs,di.isUndefined=function(t){return t===r},di.isWeakMap=function(t){return ks(t)&&zr(t)==at},di.isWeakSet=function(t){return ks(t)&&Ki(t)==st},di.join=function(t,e){return null==t?"":Fn.call(t,e)},di.kebabCase=ml,di.last=Sa,di.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=Vs(n))<0?Un(i+o,0):jn(o,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,o):sn(t,un,o,!0)},di.lowerCase=vl,di.lowerFirst=_l,di.lt=Ns,di.lte=Hs,di.max=function(t){return t&&t.length?zi(t,Pl,Zi):r},di.maxBy=function(t,e){return t&&t.length?zi(t,Br(e,2),Zi):r},di.mean=function(t){return hn(t,Pl)},di.meanBy=function(t,e){return hn(t,Br(e,2))},di.min=function(t){return t&&t.length?zi(t,Pl,uo):r},di.minBy=function(t,e){return t&&t.length?zi(t,Br(e,2),uo):r},di.stubArray=zl,di.stubFalse=Fl,di.stubObject=function(){return{}},di.stubString=function(){return""},di.stubTrue=function(){return!0},di.multiply=ql,di.nth=function(t,e){return t&&t.length?mo(t,Vs(e)):r},di.noConflict=function(){return Me._===this&&(Me._=pe),this},di.noop=Ol,di.now=Za,di.pad=function(t,e,n){t=Us(t);var i=(e=Vs(e))?$n(t):0;if(!e||i>=e)return t;var o=(e-i)/2;return vr(Rn(o),n)+t+vr(Hn(o),n)},di.padEnd=function(t,e,n){t=Us(t);var i=(e=Vs(e))?$n(t):0;return e&&i<e?t+vr(e-i,n):t},di.padStart=function(t,e,n){t=Us(t);var i=(e=Vs(e))?$n(t):0;return e&&i<e?vr(e-i,n)+t:t},di.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),qn(Us(t).replace(Bt,""),e||0)},di.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Gr(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=Ls(t),e===r?(e=t,t=0):e=Ls(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=Yn();return jn(t+o*(e-t+Pe("1e-"+((o+"").length-1))),e)}return wo(t,e)},di.reduce=function(t,e,n){var i=ms(t)?en:pn,o=arguments.length<3;return i(t,Br(e,4),n,o,Ri)},di.reduceRight=function(t,e,n){var i=ms(t)?nn:pn,o=arguments.length<3;return i(t,Br(e,4),n,o,Li)},di.repeat=function(t,e,n){return e=(n?Gr(t,e,n):e===r)?1:Vs(e),So(Us(t),e)},di.replace=function(){var t=arguments,e=Us(t[0]);return t.length<3?e:e.replace(t[1],t[2])},di.result=function(t,e,n){var i=-1,o=(e=Go(e,t)).length;for(o||(o=1,t=r);++i<o;){var a=null==t?r:t[ca(e[i])];a===r&&(i=o,a=n),t=xs(a)?a.call(t):a}return t},di.round=Yl,di.runInContext=t,di.sample=function(t){return(ms(t)?xi:Co)(t)},di.size=function(t){if(null==t)return 0;if(_s(t))return Ms(t)?$n(t):t.length;var e=zr(t);return e==Q||e==nt?t.size:lo(t).length},di.snakeCase=yl,di.some=function(t,e,n){var i=ms(t)?on:$o;return n&&Gr(t,e,n)&&(e=r),i(t,Br(e,3))},di.sortedIndex=function(t,e){return Do(t,e)},di.sortedIndexBy=function(t,e,n){return Mo(t,e,Br(n,2))},di.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Do(t,e);if(i<n&&ds(t[i],e))return i}return-1},di.sortedLastIndex=function(t,e){return Do(t,e,!0)},di.sortedLastIndexBy=function(t,e,n){return Mo(t,e,Br(n,2),!0)},di.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Do(t,e,!0)-1;if(ds(t[n],e))return n}return-1},di.startCase=bl,di.startsWith=function(t,e,n){return t=Us(t),n=null==n?0:Mi(Vs(n),0,t.length),e=No(e),t.slice(n,n+e.length)==e},di.subtract=Xl,di.sum=function(t){return t&&t.length?gn(t,Pl):0},di.sumBy=function(t,e){return t&&t.length?gn(t,Br(e,2)):0},di.template=function(t,e,n){var i=di.templateSettings;n&&Gr(t,e,n)&&(e=r),t=Us(t),e=qs({},e,i,Tr);var o,a,s=qs({},e.imports,i.imports,Tr),l=il(s),c=_n(s,l),u=0,h=e.interpolate||Qt,d="__p += '",f=ee((e.escape||Qt).source+"|"+h.source+"|"+(h===At?Ft:Qt).source+"|"+(e.evaluate||Qt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Te+"]")+"\n";t.replace(f,function(e,n,i,r,s,l){return i||(i=r),d+=t.slice(u,l).replace(Kt,Cn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),d+="';\n";var g=e.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(yt,""):d).replace(bt,"$1").replace(wt,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Cl(function(){return Zt(l,p+"return "+d).apply(r,c)});if(m.source=d,Ss(m))throw m;return m},di.times=function(t,e){if((t=Vs(t))<1||t>O)return[];var n=H,i=jn(t,H);e=Br(e),t-=H;for(var o=mn(i,e);++n<t;)e(n);return o},di.toFinite=Ls,di.toInteger=Vs,di.toLength=zs,di.toLower=function(t){return Us(t).toLowerCase()},di.toNumber=Fs,di.toSafeInteger=function(t){return t?Mi(Vs(t),-O,O):0===t?t:0},di.toString=Us,di.toUpper=function(t){return Us(t).toUpperCase()},di.trim=function(t,e,n){if((t=Us(t))&&(n||e===r))return t.replace(Ot,"");if(!t||!(e=No(e)))return t;var i=Dn(t),o=Dn(e);return Yo(i,bn(i,o),wn(i,o)+1).join("")},di.trimEnd=function(t,e,n){if((t=Us(t))&&(n||e===r))return t.replace(Nt,"");if(!t||!(e=No(e)))return t;var i=Dn(t);return Yo(i,0,wn(i,Dn(e))+1).join("")},di.trimStart=function(t,e,n){if((t=Us(t))&&(n||e===r))return t.replace(Bt,"");if(!t||!(e=No(e)))return t;var i=Dn(t);return Yo(i,bn(i,Dn(e))).join("")},di.truncate=function(t,e){var n=k,i=A;if(Is(e)){var o="separator"in e?e.separator:o;n="length"in e?Vs(e.length):n,i="omission"in e?No(e.omission):i}var a=(t=Us(t)).length;if(Tn(t)){var s=Dn(t);a=s.length}if(n>=a)return t;var l=n-$n(i);if(l<1)return i;var c=s?Yo(s,0,l).join(""):t.slice(0,l);if(o===r)return c+i;if(s&&(l+=c.length-l),$s(o)){if(t.slice(l).search(o)){var u,h=c;for(o.global||(o=ee(o.source,Us(Wt.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var d=u.index;c=c.slice(0,d===r?l:d)}}else if(t.indexOf(No(o),l)!=l){var f=c.lastIndexOf(o);f>-1&&(c=c.slice(0,f))}return c+i},di.unescape=function(t){return(t=Us(t))&&Ct.test(t)?t.replace(St,Mn):t},di.uniqueId=function(t){var e=++ue;return Us(t)+e},di.upperCase=wl,di.upperFirst=Sl,di.each=Ua,di.eachRight=ja,di.first=_a,Ml(di,function(){var t={};return Gi(di,function(e,n){ce.call(di.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),di.VERSION="4.17.11",qe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){di[t].placeholder=di}),qe(["drop","take"],function(t,e){mi.prototype[t]=function(n){n=n===r?1:Un(Vs(n),0);var i=this.__filtered__&&!e?new mi(this):this.clone();return i.__filtered__?i.__takeCount__=jn(n,i.__takeCount__):i.__views__.push({size:jn(n,H),type:t+(i.__dir__<0?"Right":"")}),i},mi.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),qe(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==$||3==n;mi.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Br(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),qe(["head","last"],function(t,e){var n="take"+(e?"Right":"");mi.prototype[t]=function(){return this[n](1).value()[0]}}),qe(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");mi.prototype[t]=function(){return this.__filtered__?new mi(this):this[n](1)}}),mi.prototype.compact=function(){return this.filter(Pl)},mi.prototype.find=function(t){return this.filter(t).head()},mi.prototype.findLast=function(t){return this.reverse().find(t)},mi.prototype.invokeMap=xo(function(t,e){return"function"==typeof t?new mi(this):this.map(function(n){return no(n,t,e)})}),mi.prototype.reject=function(t){return this.filter(ss(Br(t)))},mi.prototype.slice=function(t,e){t=Vs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new mi(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=Vs(e))<0?n.dropRight(-e):n.take(e-t)),n)},mi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},mi.prototype.toArray=function(){return this.take(H)},Gi(mi.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=di[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(di.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,l=e instanceof mi,c=s[0],u=l||ms(e),h=function(t){var e=o.apply(di,tn([t],s));return i&&d?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,g=l&&!f;if(!a&&u){e=g?e:new mi(this);var m=t.apply(e,s);return m.__actions__.push({func:La,args:[h],thisArg:r}),new gi(m,d)}return p&&g?t.apply(this,s):(m=this.thru(h),p?i?m.value()[0]:m.value():m)})}),qe(["pop","push","shift","sort","splice","unshift"],function(t){var e=oe[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);di.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var o=this.value();return e.apply(ms(o)?o:[],t)}return this[n](function(n){return e.apply(ms(n)?n:[],t)})}}),Gi(mi.prototype,function(t,e){var n=di[e];if(n){var i=n.name+"";(ii[i]||(ii[i]=[])).push({name:e,func:n})}}),ii[fr(r,_).name]=[{name:"wrapper",func:r}],mi.prototype.clone=function(){var t=new mi(this.__wrapped__);return t.__actions__=nr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=nr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=nr(this.__views__),t},mi.prototype.reverse=function(){if(this.__filtered__){var t=new mi(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},mi.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=ms(t),i=e<0,o=n?t.length:0,r=function(t,e,n){for(var i=-1,o=n.length;++i<o;){var r=n[i],a=r.size;switch(r.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=jn(e,t+a);break;case"takeRight":t=Un(t,e-a)}}return{start:t,end:e}}(0,o,this.__views__),a=r.start,s=r.end,l=s-a,c=i?s:a-1,u=this.__iteratees__,h=u.length,d=0,f=jn(l,this.__takeCount__);if(!n||!i&&o==l&&f==l)return zo(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var g=-1,m=t[c+=e];++g<h;){var v=u[g],_=v.iteratee,y=v.type,b=_(m);if(y==D)m=b;else if(!b){if(y==$)continue t;break t}}p[d++]=m}return p},di.prototype.at=Va,di.prototype.chain=function(){return Ra(this)},di.prototype.commit=function(){return new gi(this.value(),this.__chain__)},di.prototype.next=function(){this.__values__===r&&(this.__values__=Rs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},di.prototype.plant=function(t){for(var e,n=this;n instanceof pi;){var i=ha(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},di.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof mi){var e=t;return this.__actions__.length&&(e=new mi(this)),(e=e.reverse()).__actions__.push({func:La,args:[Ia],thisArg:r}),new gi(e,this.__chain__)}return this.thru(Ia)},di.prototype.toJSON=di.prototype.valueOf=di.prototype.value=function(){return zo(this.__wrapped__,this.__actions__)},di.prototype.first=di.prototype.head,He&&(di.prototype[He]=function(){return this}),di}();Me._=On,(o=function(){return On}.call(e,n,e,i))===r||(i.exports=o)}).call(this)}).call(this,n(17),n(23)(t))},function(t,e,n){var i,o;i=[n(4)],void 0===(o=function(t){var e="";if(window.getComputedStyle){var n=window.getComputedStyle(document.documentElement,"");"-moz-"===(e=(Array.prototype.slice.call(n).join("").match(/(-moz-|-webkit-|-ms-)/)||""===n.OLink&&["","o"])[1])&&(e="")}var i={vendorPrefix:e,IsSupported:{_cache:{},svg:function(){if(void 0!==this._cache.svg)return this._cache.svg;var t=!1;return document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect&&(t=!0),this._cache.svg=t,t},desktopUI:function(){return void 0===this._cache.desktopUI&&(this._cache.desktopUI=window.navigator.userAgent.search(/mobi/i)<0),this._cache.desktopUI},touch:function(){return t.touchEnabled},transforms:function(){if(void 0!==this._cache.transforms)return this._cache.transforms;var t=i.vendorPrefix+"transform",e=document.createElement("div");e.style[t]="translate3d(0,0,1px)";var n="";return window.getComputedStyle&&(n=window.getComputedStyle(document.body.appendChild(e)).getPropertyValue(t),document.body.removeChild(e)),n=Boolean(n&&"none"!==n),this._cache.transforms=n,n}},getPageMode:function(){var t=/[^?#]*\?(?:[^?#]+&)*page-mode=([^\?#&]+)/.exec(window.location);return t?t[1]:"default"}};return i}.apply(e,i))||(t.exports=o)},function(t,e,n){var i=n(1),o=n(22),r=n(92),a=n(16),s=n(11),l={textDefaultsDict:r,assetsDict:s,sectionTypes:["title","single-column","split-layout","card-layout","column-layout","spacer","fullscreen-photo","window","banner","full-width-photo","50-50","column-overlay","photo-grid","author","credits","back-matter"],isUnderSection:{"fullscreen-photo":!0,"column-overlay":!0},customThemeComponentRegistry:{},customThemeTemplates:{},targetParagraphVisualDimensions:{height:20,width:8},itemTypeRelativeSizeMap:{title:3.9,subtitle:1.1,heading:2.5,subheading:1.5,paragraph:1,blockquote:1.3,button:.9,"unordered-list":1,"ordered-list":1,"inline-image-caption":.8,"full-width-caption":.8,"photo-grid-caption":.8,"fill-screen-caption":1.3,"window-caption":1.3},proximaNovaMetrics:{aboveDivider:66,belowDivider:149,ascentDescentRatio:1.075,spaceWidthRatio:.25},registerCustomThemeTemplates:function(t,e){var n=e.templates;if(n)for(var i=n.length,o=0;o<i;o++){var r=n[o],a=r.replace(/_/g,"-");this.customThemeTemplates[r]="#"+a+"-template"}},getCustomThemeTemplates:function(){var t=this.customThemeTemplates,e={};for(var n in t)e[n]=$(t[n]).text();return e},registerCustomThemeComponent:function(t,e){t&&e&&(this.customThemeComponentRegistry[t]=e,this.registerCustomThemeTemplates(t,e))},unregisterCustomThemeComponent:function(t){t&&(this.customThemeComponentRegistry[t]=void 0)},generateCustomThemeSectionSettings:function(){for(var t=this.sectionTypes,e=this.isUnderSection,n={},i=0;i<t.length;i++){var o=t[i];n[o]={behavior:"default-"+o,layerName:e[o]?"under":"over"}}return n},getCustomThemePayload:function(t){var e=i.extend({},t);e.components={},e.isCustomTheme=!0,e.name=a.getUniqueName(t),e.section_settings||(e.section_settings=this.generateCustomThemeSectionSettings());var n=i.extend({spacing:{},column:{},authorSection:{},creditsSection:{}},t.components);for(var o in n){var r=n[o],s=this.customThemeComponentRegistry[o];r&&s?s.process(t,r,e):console.warn&&console.warn("Unknown custom theme component: "+o)}return e},getFontIncludes:function(t){var e=this._getFontsInTheme(t);return i.map(e,function(t,e){return{src:t+".gz.js",method:"script",is_script:!0,is_link:!1}})},getCSS:function(t){var e=this.getCustomThemePayload(t),n=$("#ct-css-template").text();return o.render(n,{theme:e},this.getCustomThemeTemplates()).replace(/^\s*\n/gm,"")},convertColorToRGBA:function(t){var e=t.value;return"rgba("+e.r+","+e.g+","+e.b+","+(t.alpha||1)+")"},cloneColorWithAlpha:function(t,e){var n=i.cloneDeep(t);return n.alpha=e,n},splitLengthValue:function(t){var e=/\s*((?:-?[0-9]*\.[0-9]+)|(?:-?[0-9]+))([^\s;]*)\s*/.exec(t||"")||[];return[e[1]||"",e[2]||""]},scaleLengthValue:function(t,e,n){var i=this.splitLengthValue(t||""),o=parseFloat(i[0]||"0")*parseFloat(e),r=i[1]||"";return n&&(o=Math.round(o)),o+r},getTextDefaultsForComponent:function(t,e){var n=r["proxima-nova"],i=r["proxima-nova-condensed"];return(r[t]||n).data[e]||n.data[e]||i.data[e]},getPaddingsForFont:function(t,e,n,i){var o=Math.round(n*i),r=Math.round(n*(1-i));return{paddingTop:o,paddingBottom:r,mobile:{paddingTop:Math.ceil(o*(5/7)),paddingBottom:Math.floor(r*(5/7))}}},getTextSettingsForComponent:function(t,e,n){e=e||{fontFamily:"proxima-nova"};var o,a,s=this.getTextDefaultsForComponent(e.fontFamily,t),l=i.extend({},n),c=!1,u=!1,h=i.extend({},s,e);if(h.fontFamily=(r[e.fontFamily]||{}).family||e.fontFamily,l.customFontsUsed){for(var d=l.customFontsUsed,f=0,p=d.length;f<p;f++)if(!c){var g=d[f];if(h.fontFamily===g.cssName){for(var m in o=g.metrics)o[m]||(o[m]=this.proximaNovaMetrics[m]);c=!0;break}}if(c){var v=this.targetParagraphVisualDimensions,_=(Math.ceil(v.height/o.ascentDescentRatio)+Math.floor(v.width/o.xWidthRatio))/2;_*=this.itemTypeRelativeSizeMap[t],h.fontSize=Math.round(_)+"px";var y=o.ascentDescentRatio*Math.floor(v.height/3)/_;if(y=1+(y+=o.spaceWidthRatio),h.lineHeight=Math.round(10*y)/10,"title"===t||"button"===t){var b,w=o.aboveDivider,S=o.belowDivider;b=w>S?Math.abs(w/(w+S)):Math.abs(S/(w+S)),h.paddingShiftRatio=Math.round(100*b)/100,u=!0}}}if(!("title"!==t&&"button"!==t||u||c)){var x=r[h.fontFamily];if(x){var C=x.data[t];C&&(h.paddingShiftRatio=parseFloat(C.paddingShiftRatio)||a,a=!0)}}h.fontScale&&h.fontSize&&(h.fontSize=this.scaleLengthValue(h.fontSize,h.fontScale,!0)),h.lineHeightScale&&h.lineHeight&&(h.lineHeight=this.scaleLengthValue(h.lineHeight,h.lineHeightScale));var T={title:.53,subtitle:.83,heading:.6,subheading:.74,paragraph:.92,blockquote:.74,button:.96,"unordered-list":.92,"ordered-list":.92,"inline-image-caption":.98,"full-width-caption":.98,"photo-grid-caption":.98,"fill-screen-caption":.74,"window-caption":.74}[t]||.75,I={title:1,subtitle:.97,heading:1,subheading:1,paragraph:.97,blockquote:1,button:1,"unordered-list":.97,"ordered-list":.97,"inline-image-caption":.91,"full-width-caption":.91,"photo-grid-caption":.91,"fill-screen-caption":1,"window-caption":1}[t]||1;return h.mobile={fontSize:this.scaleLengthValue(h.fontSize,T,!0),lineHeight:this.scaleLengthValue(h.lineHeight,I)},h},_getFontsInTheme:function(t){return i.keys(i.reduce(t,function t(e,n,o){return i.isPlainObject(n)?i.reduce(n,t,e):("fontFamily"===o&&n in r&&(e[n]=!0),e)},{}))}};t.exports=l},function(t,e,n){var i,o;i=[n(0),n(6),n(33),n(8),n(19),n(9),n(12),n(56),n(57),n(13),n(58),n(25),n(59),n(20),n(26),n(34),n(60),n(27),n(28),n(29),n(35),n(36),n(37),n(61),n(62),n(63),n(64),n(65),n(66)],void 0===(o=function(t,e,n,i,o,r,a,s,l,c,u,h,d,f,p,g,m,v,_,y,b,w,S,x,C,T,I,k){y.prototype.defaultPlugins=[I],y.prototype.defaultOptions.trackEvents=["touch"],x.prototype.defaultOptions.trackEvents=["touch"],v.prototype.defaultOptions.trackEvents=["touch"];var A=I.defaultOptions;return A.injectNextPreviousLinks=navigator.userAgent.search(/iPad|iPhone|iPod/i)<0,A.nextPreviousLinkTriggerEvent="vclick",v.prototype.defaultOptions.useTransform=!0,v.prototype.defaultPlugins=[C],C.defaultOptions.scrollbarsUseTransforms=!0,C.defaultOptions.scrollbarPlugins=b.sliderTrackPlugin,e}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(21),n(39)],void 0===(o=function(t,e,n,i,o){var r={};r[n.keyCodes.ARROW_UP]=!0,r[n.keyCodes.ARROW_DOWN]=!0,r[n.keyCodes.HOME]=!0,r[n.keyCodes.END]=!0,r[n.keyCodes.PAGE_UP]=!0,r[n.keyCodes.PAGE_DOWN]=!0,n.registerBasicArticleHandler("sections-article",{_addBehavior:function(i){var o=t(i),r=new n.SectionsAnimator(o,{angleThreshold:60,plugins:l});r.seek(0),o.data("animator",r);var a=o.find(".clickable-poster-image");if(a.length)new e.Widget.MediaViewer(o,a)},handleArticleActivated:function(t){n.ArticleHandlerBase.prototype.handleArticleActivated.apply(this,arguments),this._enableEventHandlers(t)},handleArticleDeactivated:function(t){n.ArticleHandlerBase.prototype.handleArticleDeactivated.apply(this,arguments),this._disableEventHandlers(t)},_handleKeyDown:function(e,i){if(r[e.keyCode]&&!n.isKeyHandlingException(e.target)){var o=t(i),a=o.data("animator"),s=-1;if(a){var l=n.keyCodes,c=o[0].offsetHeight,u=a.playPosition,h=a.getDuration();switch(e.keyCode){case l.ARROW_UP:s=u-.125*c;break;case l.ARROW_DOWN:s=u+.125*c;break;case l.PAGE_UP:s=u-c;break;case l.PAGE_DOWN:s=u+c;break;case l.ARROW_HOME:s=0;break;case l.END:s=h}a.scrollTo(0,Math.max(0,Math.min(h,s))),e.stopPropagation(),e.preventDefault()}}},_enableEventHandlers:function(e){var i=t(e),o=this,r=i.data("keydown-callback");r||(r=function(t){return o._handleKeyDown(t,e)},i.data("keydown-callback",r)),n.addGlobalKeyHandler(r)},_disableEventHandlers:function(e){var i=t(e).data("keydown-callback");i&&n.removeGlobalKeyHandler(i)},_adjustForResize:function(e){var n=t(e).data("animator");n&&n.adjustForResize()}}),e.widget("Widget.MediaViewer",e.Widget,{_setUp:function(n,i,o){return this.$container=t(document.body),this.$posters=i,this.$element=t('<div class="wp-media-viewer"></div>'),this.loader=new e.ImageLoader,o},_transformMarkup:function(){this.$close=t('<a href="#" class="wp-close-link"></a>'),this.$close.appendTo(this.$element),this.$image=t(),this.$element.appendTo(this.$container)},_attachBehavior:function(){var e=this;this.$posters.addClass("scrollable"),this.$close.addClass("scrollable"),this.$close.click(function(t){return e.hide(),!1}),this.$posters.click(function(n){return e.show(t(this).data("src")),!1})},_stopLoader:function(){this.loader.stop(),this.loader.clearQueue()},show:function(e){if(e){var n=this,i=n.loader;n._stopLoader(),this.$image.remove(),this.$element.addClass("loading visible"),i.add(e,{callback:function(e,i,o){n.$image=t('<img alt="">'),n.$image.appendTo(n.$element),n.$image[0].src=e,n.$element.removeClass("loading")}}),i.start()}},hide:function(){this._stopLoader(),this.$element.removeClass("visible"),this.$image&&this.$image.length&&(this.$image[0].src=void 0,this.$image.remove())}});var a=e.Widget.SimpleMomentumScrollView.desktopScrollbarPlugin,s=t.extend({},a,{_isEnabled:function(t,e){return n.IsSupported.desktopUI()},_handleScrollStart:function(t){a._handleScrollStart.apply(this,arguments),t.$element.trigger("scrollbar-thumb-drag-start")},_handleScrollStop:function(t){a._handleScrollStop.apply(this,arguments),t.$element.trigger("scrollbar-thumb-drag-stop")},_getAsyncMouseWheelCallback:function(t){var e=this;return function(){t._sdspAnimFrameId=0;var n=a._handleMouseWheel.call(e,t,t._sdspDelta,t._sdspDeltaX,t._sdspDeltaY);return t._sdspDelta=0,t._sdspDeltaX=0,t._sdspDeltaY=0,n}},_handleMouseWheel:function(t,e,n,i){var o=t._sdspAsyncMouseWheelCallback;o||(o=t._sdspAsyncMouseWheelCallback=this._getAsyncMouseWheelCallback(t),t._sdspDelta=0,t._sdspDeltaX=0,t._sdspDeltaY=0),t._sdspDelta+=e,t._sdspDeltaX+=n,t._sdspDeltaY+=i,t._sdspAnimFrameId||(t._sdspAnimFrameId=window.requestAnimationFrame(o));var r="vertical"===t.options.direction?-i:n;return!!(r<0&&0===t.playPosition||r>0&&t.playPosition>=t.getDuration())}}),l={initialize:function(e,n){t.extend(e,{width:function(){return this.$element[0].offsetWidth},height:function(){return this.$element[0].offsetHeight},scrollLeft:function(){return"horizontal"===e.options.direction?e.playPosition:1},scrollTop:function(){return"vertical"===e.options.direction?e.playPosition:1},scrollWidth:function(){return"horizontal"===e.options.direction?e.getDuration()+e.width():1},scrollHeight:function(){return"vertical"===e.options.direction?e.getDuration()+e.height():1},scrollTo:function(t,n){e.seek("vertical"===e.options.direction?n:t),e.trigger("scroll",{x:e.scrollLeft(),y:e.scrollTop()})}}),s.initialize(e,n)}};e.widget("Widget.SectionsAnimator",e.Widget,{defaultOptions:{direction:"vertical",animationData:[],defaultDuration:100,playHeadLocation:0,angleThreshold:30,offscreenPadding:20},oppositeDirection:{vertical:"horizontal",horizontal:"vertical"},_attachBehavior:function(){var n=this;this.$article=this.$element,this.$sections=t(),this.playHeadOffset=0,this.enabled=!0,this.trackDrag=!1,this.animationStarted=!1,this.isHorizontal="horizontal"===this.options.direction,this.startPosition=0,this.playPosition=0,this.sectionProps=[],this._createTimeline(),this.tracker=new e.MomentumDragTracker(this.$element[0],{trackEvents:["touch"],maxVelocity:100,dragStart:function(t,e,i){n._handleDragStart(e,i)},dragUpdate:function(t,e,i){n._handleDragUpdate(e,i)}})},enable:function(){this.enabled=!0,this.tracker.enable()},disable:function(){this.enabled=!1,this.stop(),this.tracker.disable()},_createTimeline:function(){var e=this.$element[0].offsetHeight;this.timeline=new n.Timeline,this.startPosition=0,this.playPosition=0,this.playHeadOffset=Math.round(e*this.options.playHeadLocation);for(var i={},o=this.$article.find(".section"),r=o.length,a=r-1,s={visible:"hidden",hidden:"visible"},l=[],u=0;u<r;u++){var h=o[u];(f=this._getSectionHandler(h))&&f.transformMarkup&&f.transformMarkup(o[u],i),l[u]=f}var d=this._getGeometryProps(this.$article,o,i);for(u=0;u<r;u++){var f;h=o[u];if(f=l[u]){i={$article:this.$article,articleHeight:e,$sections:o,sectionIndex:u,isFirstSection:0===u,isLastSection:u===a,prevProps:u>0?d[u-1]:null,props:d[u],nextProps:u<a?d[u+1]:null};f.initialize(h,i)}}this._calculateAnimationProps(this.$article,d);for(u=0;u<r;u++){var p=d[u],g=p.visible?"visible":"hidden",m=p.$section,v=(p.$view,t.data(m[0]));if(v.scrollInOffset=p.scrollInOffset,v.scrollOutOffset=p.scrollOutOffset,v.scrollOutDuration=p.scrollOutDuration,v.sectionHeight=p.height,this.timeline.add(new c(m,{startEvent:0!=u?"section-exit":void 0,endEvent:"section-enter",data:{sectionNumber:u,sectionCount:d.length}}),p.scrollInOffset,1),p.scrollOutDuration>=p.height&&this.timeline.add(new c(m,{startEvent:"section-enter",endEvent:"section-exit",data:{sectionNumber:u,sectionCount:d.length}}),p.scrollOutOffset+p.scrollOutDuration,1),p.topDuration>0&&this.timeline.translateY(m,p.scrollInOffset,p.topDuration,p.fromPosition+"px",p.toPosition+"px",{valueFilter:n.roundValueFilter}),p.scrollOutDuration&&(this.timeline.translateY(m,p.scrollOutOffset,p.scrollOutDuration,"0px",-p.scrollOutDuration+"px",{valueFilter:n.roundValueFilter}),u!=a&&1===d[u+1].layer&&this.timeline.translateY(p.$view,p.scrollOutOffset,p.scrollOutDuration,"0px",p.scrollOutDuration+"px",{valueFilter:n.roundValueFilter}),p.visibleAtEnd||this.timeline.replaceClass(m,p.scrollOutOffset+p.scrollOutDuration,"visible","hidden")),-1===p.layer){var _=p.height;p.visible&&(_=p.bottomDuration),_>0&&this.timeline.translateY(p.$view,p.scrollInOffset,_,-_+"px","0px",{valueFilter:n.roundValueFilter})}p.handler.addAnimations(p.$section,this.timeline,p.scrollInOffset),m.css(n.vendorPrefix+"transform","translate3d(0,"+p.fromPosition+"px,0)").css("zIndex",p.zIndex).addClass(g).removeClass(s[g]),p.visible||this.timeline.replaceClass(m,p.scrollInOffset,"hidden","visible")}},_getGeometryProps:function(t,e,n){for(var i=[],o=t[0].offsetHeight,r=0,a=0,s=0,l=0;l<e.length;l++){var c=e.eq(l),u=this._getSectionHandler(c),h=u._getNaturalHeight(c[0]),d=h===o,f=r<o;a+=parseInt(c.data("layer"),10)||0,s=Math.min(a,s);var p={handler:u,$section:c,$view:c.children(".section-view"),flowPosition:r,fromPosition:f?r:o,toPosition:0,topDuration:f?r:o,bottomDuration:f?Math.max(0,r+h-o):h,scrollOutDuration:h,height:h,isFullHeight:d,scrollAfterAnimation:d,visible:f,visibleAtEnd:!1,layer:parseInt(c.data("layer"),10)||0,zIndex:a};i.push(p),r+=h}for(l=0;l<e.length;l++)i[l].zIndex-=s;var g=r,m=Math.max(g-o,0);for(l=i.length-1;l>=0;){var v=(p=i[l--]).flowPosition;if(v+p.height<=m)break;v>=m?(p.scrollOutDuration=0,p.toPosition=v-m,p.topDuration-=p.toPosition):p.scrollOutDuration=m-v,p.visibleAtEnd=!0}return i},_calculateAnimationProps:function(t,e){for(var n=t[0].offsetHeight,i=e.length-1,o=0,r=0;r<=i;r++){var a=e[r];a.sectionAnimationDuration=a.handler.getDuration(a.$section),a.scrollInOffset=a.visible?0:a.flowPosition+o-n,a.scrollOutOffset=a.scrollInOffset+(a.scrollAfterAnimation?Math.max(a.topDuration,a.sectionAnimationDuration):a.topDuration),a.scrollAfterAnimation&&a.sectionAnimationDuration>a.topDuration&&(o+=a.sectionAnimationDuration-a.topDuration)}this.sectionProps.length=0,this.sectionProps.push.apply(this.sectionProps,e),t.trigger("section-props-change",[this,this.sectionProps])},_getSectionHandler:function(e){var i=t(e).data("sectionBehavior")||"default",o=n.getSectionsArticleHandler(i);return o||(console.log('Warning: Failed to find the "'+i+'" handler.'),o=n.getSectionsArticleHandler("_null")),o},adjustForResize:function(){var t=this.getDuration(),e=t?this.playPosition/t:0,n=1;return this.seek(0,n),this._createTimeline(),n=2,this.seek(Math.round(e*this.getDuration()),n),this.sectionProps},play:function(){this.timeline.play()},stop:function(){this.timeline.stop(),this.tracker._stopVelocityTimer()},seek:function(t,e){if(this.enabled){var n="horizontal"===this.options?"x":"y",i={x:0,y:0,resizing:e||0},o=this.playPosition,r=this.getDuration();t=t<0?0:t>r?r:t,i[n]=t,t!=o&&this.$element.trigger("before-article-scroll",i),t=i[n],this.timeline.seek(t),this.playPosition=t,this.$element.trigger("article-scroll",i),0===t&&this.$element.trigger("article-start",i),t>=this.getDuration()&&this.$element.trigger("article-end",i)}},getDuration:function(){return this.timeline.getDuration()},_exceedsAngleThreshold:function(t,e,n,i){var o=Math.abs(t),r=Math.abs(e),a=360,s="horizontal"===n,l=s?r:o,c=s?o:r;return c>0&&(a=Math.abs(Math.atan(l/c))*(180/Math.PI)),a>i},_handleDragStart:function(t,e){this.startPlayPosition=this.playPosition,this.animationStarted=!1,this.trackDrag=!0},_handleDragUpdate:function(t,e){if(this.trackDrag){var n=this.options;if(!this.animationStarted){if(this._exceedsAngleThreshold(t,e,n.direction,n.angleThreshold))return this.tracker.delegateDrag(this.oppositeDirection[n.direction]),void(this.trackDrag=!1);this.animationStarted=!0,this.tracker.blockDelegates()}if(this.animationStarted){var i=this.isHorizontal?t:e,o=Math.round(this.startPlayPosition-i),r=this.getDuration();if((o<0||o>r)&&this.tracker.delegateDrag())return this.animationStarted=!1,void(this.trackDrag=!1);o=(o=o<0?0:o)>r?r:o,this.scrollTo(0,o)}}},_handleDragStop:function(t,e){this.animationStarted=!1,this.trackDrag=!1}}),n.SectionsAnimator=e.Widget.SectionsAnimator,e.addWidgetConstructorAsjQueryPlugin("lucaSectionsAnimator",n.SectionsAnimator),n.sectionsArticleHandlers={},n.registerSectionsArticleHandler=function(t,e){t&&(n.sectionsArticleHandlers[t]=e)},n.registerSectionsArticleHandlerAliases=function(t){for(var e in t){var i=n.getSectionsArticleHandler(t[e]);i?n.registerSectionsArticleHandler(e,i):console.log("Failed to alias "+e+" to "+t[e]+"!")}},n.getSectionsArticleHandler=function(t){return n.sectionsArticleHandlers[t||""]},n.GenericSectionArticleHandler={initialize:function(e,i){var o=new n.Timeline,r=t(e);r.data("timeline",o),i=i||{},r.data("isFirstSection",i.isFirstSection||!1),r.data("isLastSection",i.isLastSection||!1);var a=r.data("scrollAfterAnimation");void 0!==a&&i.props&&(i.props.scrollAfterAnimation=a),this._initialize&&this._initialize(e,i)},transformMarkup:function(t){},_getNaturalHeight:function(e){return t(e)[0].offsetHeight},getDuration:function(e,n){var i=t(e).data(),o=i&&i.timeline;return n=n||0,Math.max(n,o&&o.getDuration()||0)},addAnimations:function(e,n,i){var o=t(e).data("timeline");o&&o.getDuration()>0&&n.add(o,i)}},n.registerSectionsArticleHandler("_null",n.GenericSectionArticleHandler),n.registerSectionsArticleHandler("default",t.extend({},n.GenericSectionArticleHandler,{_initialize:function(e,n){var i=t(e),o=i.data("timeline");this._addContentScrollingAnimation(i,o,n),this._addDataAnimations(i,o,n),this._addPullQuoteAnimations(i,o,n),this._addFlipBookAnimations(i,o,n),this._addColorizationAnimation(i,o,n)},_addContentScrollingAnimation:function(t,e,i){var o=t.find(".section-content"),r=o.children(".section-content-view");if(r.length){var a=Math.min(o[0].offsetHeight,i.articleHeight),s=r[0].scrollHeight;if(s>a){var l=s-a,c=i.props.bottomDuration,u=l;i.props.isFullHeight||(u=i.props.topDuration-c),e.translateY(r,c,u,"0px",-l+"px",{valueFilter:n.roundValueFilter}),r.css(n.vendorPrefix+"transform","translate3d(0,0,0)")}}},_addPullQuoteAnimations:function(e,n,i){var o=e.find(".pull-quote");o.length<1||t.data(e[0],"defaultPullQuoteData",{$quote:o,quoteY:o[0].offsetTop,quoteHeight:o[0].offsetHeight,articleHeight:e[0].parentNode.offsetHeight,options:i})},_createPullQuoteAnimations:function(e,n,i){var o=t.data(e[0],"defaultPullQuoteData")||{},r=o.$quote;if(r&&!(r.length<1)){var a=o.options.props,s=o.articleHeight;if(a.height===s){var l=.15*s,c=r[0].offsetTop,u=c<=l;if(u!=c+r[0].offsetHeight>=s-l)return this._createAlignedPullQuoteAnimations(e,n,i,u?"top":"bottom")}return this._createPullQuoteMiddleAnimations(e,n,i)}},_createAlignedPullQuoteAnimations:function(e,i,o,r){var a=t.data(e[0],"defaultPullQuoteData")||{},s=a.$quote;if(s&&!(s.length<1)){var l="top"===r,c=a.options,u=a.quoteHeight,h=a.quoteY,d=a.articleHeight,f=Math.round(d/2),p=c.props,g=(p.height,-1===p.layer),m=c.nextProps,v=m&&1===m.layer,_=Math.round(.5*f),y=Math.round(.5*_),b=y/(3*_),w=p.scrollOutOffset+p.scrollOutDuration,S=Math.round(.33*d),x=o+(l?Math.round(.67*d):0),C=x+S,T=l?Math.round(.67*d):Math.round(.33*d),I=C+(l?Math.round(.33*d):f),k=I+T,A=Math.min(C,w)-x,P=A/S,E=Math.min(k,w)-I,$=1-E/T,D={fadeInOffset:x,fadeInDuration:A,fadeInPercentage:A/S,fadeOutOffset:I,fadeOutDuration:E,fadeOutPercentage:E/T},M=x,O=M+(l?C-x:d),B=O,N=B+d,H=Math.min(O,w)-M,R=Math.min(N,w)-B,L=g?-b:1-b,V=0,z=V=l?0+(g?y:-y):g?0+y:-h-u+y;if(H>0){z=V+H*L,i.translateY(s,M,H,V+"px",z+"px",{valueFilter:n.roundValueFilter}),i.opacity(s,x,A,{fromOpacity:"0",toOpacity:P+""});var F={opacity:"0"};F[n.vendorPrefix+"transform"]="translate3d(0,"+V+"px,0)",s.css(F)}return R>0&&(z=(V=z)+R*(L=v?-b:1-b),i.translateY(s,B,R,V+"px",z+"px",{valueFilter:n.roundValueFilter}),E>0&&i.opacity(s,I,E,{fromOpacity:"1",toOpacity:$+""})),D}},_createPullQuoteMiddleAnimations:function(e,i,o){var r=t.data(e[0],"defaultPullQuoteData")||{},a=r.$quote;if(a&&!(a.length<1)){var s=r.options,l=r.quoteHeight,c=r.quoteY,u=r.articleHeight,h=Math.round(u/2),d=s.props,f=d.height,p=d.topDuration,g=d.bottomDuration,m=d.scrollOutDuration,v=-1===d.layer,_=s.nextProps,y=_&&1===_.layer,b=Math.round((f-l)/2)-c,w=b,S=b,x=0,C=g,T=p,I={fadeInOffset:0,fadeInDuration:0,fadeInPercentage:1,fadeOutOffset:0,fadeOutDuration:0,fadeOutPercentage:1};if(f>h&&(T=(C=h)+f),C!=T){var k=c+b;w=0-k+b,S=f-l-k+b,x=Math.abs((S-w)/(T-C));var A=S-w,P=T-C,E=w,$=S;C<g&&(E=w+Math.round(A*(g-C)/P)),T>p&&($=w+Math.round(A*(p-C)/P)),E!=w&&(w=E,C=g),$!=S&&(S=$,T=p),(P=T-C)>0&&w!=S&&i.translateY(a,o+C,P,w+"px",S+"px",{valueFilter:n.roundValueFilter})}if(C){var D=C-l;f>h&&(D=h-l);var M=C-(D=D<0?0:D),O=h/2;if(M<O){var B=D+O;B<=C&&(M=B)}if(M>0&&(I.fadeInOffset=o+D,I.fadeInDuration=M,i.opacity(a,I.fadeInOffset,I.fadeInDuration,{fromOpacity:"0",toOpacity:"1"}),a.css("opacity","0")),x){var N=v?x-1:x;i.translateY(a,o,C,w-N*C+"px",w+"px",{valueFilter:n.roundValueFilter})}}var H=p+m-T;if(H>0&&(I.fadeOutOffset=o+T,I.fadeOutDuration=H,i.opacity(a,I.fadeOutOffset,I.fadeOutDuration,{fromOpacity:"1",toOpacity:"0"}),x)){N=y?1-x:-x;i.translateY(a,o+T,H,S+"px",S-N*H+"px",{valueFilter:n.roundValueFilter})}return I}},_addFlipBookAnimations:function(e,n,i){var o=e.find(".flip-book").find(".flip-book-image"),r=o.length,a=e.data("fadeOut");if(r>1){var s=n.getDuration()/r,l=e[0].offsetHeight;s||(s=(r-1)*l/4);for(var c=Math.round(.4*s)||1,u=r-1,h=s<l?s:0,d=0;d<r;d++){var f=o[d],p=t(f);p.addClass("visible"),0!=d&&(p.css("opacity","0"),n.opacity(f,h,c,{fromOpacity:"0",toOpacity:"1"})),d>1&&(n.replaceClass(f,h-Math.round(1.5*s),"hidden","visible"),p.removeClass("visible").addClass("hidden")),d!=u&&(a&&n.opacity(f,h+s,c,{fromOpacity:"1",toOpacity:"0"}),d+2<=u&&n.replaceClass(f,h+Math.round(1.5*s),"visible","hidden")),h+=s}}},_addDataAnimations:function(t,e,i){for(var o=t.data("animationId")||"",r=n.animationDataRegistry[o]||[],a=r.length,s=0;s<a;s++){var l=r[s],c=l[0],u=l[1],h=l[2]||0,d=l[3]||1;i=l[4];this[c](t,e,u,h,d,i)}},_addColorizationAnimation:function(t,e,n){var i=t.find(".section-background").children(".bw-image")[0];if(i){var o=t.getData("isFirstSection")?0:t[0].offsetHeight;e.opacity(i,0,this.getDuration(t,o),{fromOpacity:"1",toOpacity:"0"})}},_elementsToOffsetAndDuration:function(e,n,i){var o=0,r=0,a=e[0].offsetHeight;return"number"==typeof n?o=Math.round(n*a):(n=t(n)[0])&&(o=n.offsetTop),"number"==typeof i?r=Math.round(i*a):(i=t(i)[0])&&(r=i.offsetTop),{offset:o,duration:r-o}},opacity:function(t,e,n,i,o,r){var a=this._elementsToOffsetAndDuration(t,i,o);return e.opacity(n,a.offset,a.duration,r)},transform:function(t,e,n,i,o,r){var a=this._elementsToOffsetAndDuration(t,i,o);return e.transform(n,a.offset,a.duration,r)},addAnimations:function(t,e,i){return this._createPullQuoteAnimations(t,e,i),n.GenericSectionArticleHandler.addAnimations.apply(this,arguments)}}));var c=function(e,i){n.Timeline.BinaryTrigger.call(this),this.$elements=t(e),this.startEvent=i.startEvent,this.endEvent=i.endEvent,this.data=i.data,this.sectionNumber=i.sectionNumber,this.sectionCount=i.sectionCount};e.inherit(c,n.Timeline.BinaryTrigger,{_start:function(){this.startEvent&&this.$elements.trigger(this.startEvent,this.data)},_end:function(){this.endEvent&&this.$elements.trigger(this.endEvent,this.data)}}),e.isChrome&&n.IsSupported.desktopUI()&&(n.roundValueFilter=function(t){return t.value=Math.round(t.value),t}),n.animationDataRegistry={},n.registerAnimationData=function(t,e){t&&e&&(n.animationDataRegistry[t]=e)}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i;void 0===(i=function(){return{}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(147),n(4),n(24),n(46),n(15),n(164)],void 0===(o=function(t,e,n,i,o,r,a,s,l){function c(t){this.map=t,this.inverted=e.invert(this.map),this.allStyles=e.keys(this.map).join(" ")}function u(){}c.prototype.setClass=function(t,e){this.clear(t),t.addClass(e)},c.prototype.clear=function(t){t.removeClass(this.allStyles)},c.prototype.getValue=function(t){return this.map[t]},c.prototype.getStyle=function(t){return this.inverted[t]},e.extend(u.prototype,n.Events,{MODEL_VERSION:"1.22",MAX_IMAGE_DIM_INLINE_LARGE:2560,MAX_IMAGE_DIM_GRID_LARGE:1024,MAX_IMAGE_DIM_INLINE:1024,MAX_IMAGE_DIM_GRID:512,getInlineSizeForDevice:function(){return h.isMobile?h.MAX_IMAGE_DIM_INLINE:h.MAX_IMAGE_DIM_INLINE_LARGE},getGridSizeForDevice:function(){return h.isMobile?h.MAX_IMAGE_DIM_GRID:h.MAX_IMAGE_DIM_GRID_LARGE},issueModel:null,articleModel:null,articleView:null,isLoadedFromRefresh:!1,_isDocumentNew:!0,isMobile:/[Mm]obi/.test(window.navigator.userAgent||""),lastPopupMessage:null,pendingImageCount:0,_adjustVisualsEnabled:!0,_nextSave:{},preferences:{},_editorContext:{paused:!1,$activeElement:null,selectedItem:null,deleteSelectedItemOnClear:!1},linkAlignCSS:new c({"link-left":"left","link-center":"center","link-right":"right"}),textAlignCSS:new c({"text-left":"left","text-center":"center","text-right":"right"}),initialize:function(){window.onerror=h._handleAppError,this._handleBeforeUnload=this._handleBeforeUnload.bind(this),window.addEventListener("beforeunload",this._handleBeforeUnload),t("body").addClass("unblur"),this._initNextSave(),this.$article=t(".article"),this.$app=t("#app"),h.Template.addById("photo-grid-tile-template"),this.selectionManager=new h.SelectionManager(this.$article),this.$app.on("dragstart",function(){return!1}),this.listenTo(i,"set-model",this._handleNativeSetModel),this.listenTo(i,"update-model",this._handleNativeUpdateModel),this.listenTo(i,"preferences",this._handleNativeGetPreferences),this.listenTo(i,"online-status-changed",this._handleOnlineStatusChanged),this.listenTo(i,"add-section",this._handleNativeAddSection),this.listenTo(i,"set-item-type",this._handleNativeSetItemType),this.listenTo(i,"change-text-attribute",this._handleNativeChangeTextAttribute),this.listenTo(i,"insert-link",this._handleNativeInsertLink),this.listenTo(i,"end-editing",this._handleNativeEndEdit),this.listenTo(i,"panel-opened",this._handleNativePanelOpened),this.listenTo(i,"panel-closed",this._handleNativePanelClosed),this.listenTo(i,"keyboard-dismissed",this._handleKeyboardDismissed),this.listenTo(i,"popup-dismissed",this._handleNativePopupDismissed),this.listenTo(i,"link-canceled",this._handleNativeLinkCanceled),this.listenTo(i,"theme",this._handleNativeThemeChange),this.listenTo(i,"toggle-preview",this._handleNativePreviewToggle),this.listenTo(i,"header-tapped",this._handleNativeHeaderTapped),this.listenTo(this.selectionManager,"selection-change",this._handleSelectionChange),this.listenToDOM("insertNewline","_handleInsertNewline"),this.listenToDOM("insertItemAfter","_handleInsertItemAfter"),this.listenToDOM("insertDefaultSection","_handleInsertDefaultSection"),this.listenToDOM("insertPhotoCollection","_handlePhotoCollection"),this.listenToDOM("insertSplitLayoutSection","_handleInsertSplitLayoutSection"),this.listenToDOM("photo-collection-editor-done","_handleInsertPhotoCollection"),this.listenToDOM("editPhotoCollection","_handleEditPhotoCollection"),this.listenToDOM("deleteSection","_handleDeleteSection"),this.listenToDOM("pasteContent","_handlePasteContent"),this.listenToDOM("mergeWithPreviousItem","_handleMergeWithPreviousItem"),this.listenToDOM("moveCaretToAdjacentItem","_handleMoveCaretToAdjacentItem"),this.listenToDOM("ensureCaretInView","_handleEnsureCaretInView"),this.listenToDOM("prependNewItemToSection","_handlePrependNewItemToSection"),this.listenToDOM("deleteItem","_handleDeleteItem"),this.listenToDOM("deleteItemOnEditorContextClear","_handleDeleteItemOnEditorContextClear"),this.listenToDOM("moveItem","_handleMoveItem"),this.listenToDOM("updateText","_handleUpdateText"),this.listenToDOM("updateImagePosition","_handleUpdateImagePosition"),this.listenToDOM("updateSettingValue","_handleUpdateSettingValue"),this.listenToDOM("updatePreference","_handleUpdatePreference"),this.listenToDOM("convertImage","_handleConvertImage"),this.listenToDOM("imageLoadInitiated","_handleImageLoadInitiated"),this.listenToDOM("imageLoadCompleted","_handleImageLoadCompleted"),this.listenToDOM("adjustVisuals","adjustVisuals"),this.listenToDOM("scrollSectionIntoView","_handleScrollSectionIntoView"),this.listenToDOM("showAttribution","_handleShowAttribution"),this.listenToDOM("showLinkEdit","_handleShowLinkEdit"),this.listenToDOM("showPopup","_handleShowNativePopup"),this.listenToDOM("showImagePicker","_handleShowNativeImagePicker"),this.listenToDOM("hideImagePicker","_handleHideNativeImagePicker"),this.listenToDOM("stopScrollTracker","_handleStopScrollTracker"),this._throttledAdjustVisuals=e.throttle(this.immediateAdjustVisuals,200),this._throttledSaveScroll=e.throttle(this.immediateSaveScroll,1e3),this._throttledSaveDocument=e.throttle(this.immediateSaveDocument,1e3),this._debouncedSaveDocument=e.debounce(this._throttledSaveDocument,1e3),this._throttledHandleArticleResize=e.throttle(this._handleArticleResize,100),this._onNativeGetModel=this._onNativeGetModel.bind(this),i.fromNativeCallback["get-model"]=this._onNativeGetModel,i.fromNativeCallback["image-response"]=this._onNativeImage.bind(this),i.fromNativeCallback["image-error"]=this._onNativeImageError.bind(this),this.registerNativeImageHandler("image-response","background",function(t,e){return this._handleNativeImageForModel(t,e,{intent:"background"})}.bind(this)),this.registerNativeImageHandler("image-error","background",this._handleNativeImageErrorForModel.bind(this)),this.registerNativeImageHandler("image-response","model",this._handleNativeImageForModel.bind(this)),this.registerNativeImageHandler("image-error","model",this._handleNativeImageErrorForModel.bind(this)),i.fromNativeCallback["get-url-info"]=this._handleNativeGetURLInfo.bind(this),i.fromNativeCallback["set-editor-context"]=this._handleNativeSetEditorContext.bind(this),i.fromNativeCallback["get-license-info"]=this._handleNativeGetLicenseInfo.bind(this),i.fromNativeCallback["get-source-for-coordinates"]=this._handleGetSourceForCoordinates.bind(this),i.fromNativeCallback["get-scroll-info"]=this._handleNativeGetScrollInfo.bind(this),r.publicationViewer.showSplash(),r.publicationViewer._panelGroup.disableSwipe(),t.event.special.vtaphold.duration=200;var n="selectionchange";this.isMobile||(this.customSelectionChange=new h.CustomSelectionChange,this.customSelectionChange.start(),n=this.customSelectionChange.eventName),document.addEventListener(n,this._handleCaretChange),document.addEventListener("keydown",this._handleKeyDown),s.loadStrings().always(function(){i.toNative("ready",{modelVersion:h.MODEL_VERSION})})},initializeView:function(){var t=this.selectionManager.getScrollReporter();this.listenTo(t,"article-scroll",this._handleArticleScroll),this.listenTo(t,"article-start",this._handleArticleStartScroll),this.listenTo(t,"article-end",this._handleArticleEndScroll),this.listenTo(t,"publication-resize-scroll",this._throttledHandleArticleResize);var n=e.throttle(function(){i.toNative("user-is-active")},1e4,{leading:!0,trailing:!0});if(window.addEventListener("touchstart",n,!0),window.addEventListener("mousedown",n,!0),window.addEventListener("keydown",n,!0),this.listenTo(t,"article-scroll",n),this.articleView.balloons.render(),this.updateOrientationMarker(),this.isLoadedFromRefresh){var o=this.articleModel.get("scroll_position");o&&this.getSectionsArticleScroller().scrollTo(o,{animate:!1})}i.toNative("editor-ready"),this.adjustVisuals(),setTimeout(this.adjustVisuals.bind(this),250)},_handleKeyDown:function(t){if(8==t.keyCode){var e=t.target,n=e.tagName.toUpperCase();!0===e.isContentEditable||"TEXTAREA"==n||"INPUT"==n&&!{button:1,checkbox:1,file:1,image:1,radio:1,range:1,reset:1,submit:1}[e.type]||t.preventDefault()}else 9==t.keyCode&&t.preventDefault()},_handleAppError:function(t,e,n,o,r){e=(e||"").replace(/[^\?#]*\/|\?.*|#.*/,"").replace(/\..*/,"");var a={buttons:[s.getString("editor.common.ok")],title:s.getString("editor.dialogs.error-app.title"),content:t+"\n\n"+e+": Line "+n};i.toNative("display-dialog",a),console.error&&console.error("Application Error Caught!",{message:t,url:e,line:n,col:o,error:r})},_handleBeforeUnload:function(t){if(this.saveIsPending){var e=s.getString("editor.dialogs.unsaved.text");return t.returnValue=e,e}},_reportAppException:function(t,e){var n="",i=0,o=0;t=t||"",e&&(e.message&&(t&&(t+="\n\n"),t+=e.message),n=e.sourceURL,i=e.line,o=e.line),h._handleAppError(t,n,i,o,e)},setIssueModel:function(e){this.issueModel&&(this.stopListening(this.issueModel),this.stopListening(this.articleModel),this.stopListening(this.articleView),this.articleView.$el.empty(),this.articleView.stopListening(),this.articleModel=null,this.articleView=null),this.issueModel=e,this.articleModel=this.issueModel.getChildAt(0),this.articleModel||(this.articleModel=this.issueModel.addChild()),this.disableAdjustVisuals(),this.articleView=new h.ArticleView({el:".article",model:this.articleModel}),0===this.pendingImageCount?this.enableAdjustVisuals():t(this).one("pendingImagesResolved",this.enableAdjustVisuals),this.listenTo(this.issueModel,"change descendant:change descendant:add descendant:remove",this._handleModelChange),this.getIsDocumentNew({reset:!0}),this.adjustVisuals()},getIsDocumentNew:function(t){return t&&t.reset&&(this._isDocumentNew=!0),this._isDocumentNew&&(this._isDocumentNew=this._checkDocumentIsNew()),this._isDocumentNew},_checkDocumentIsNew:function(){var t,e,n,i=this.articleModel.children;if(i.length>2)return!1;if(e=i.at(0)){if((n=e.children).length>2)return!1;for(var o=0,r=n.length;o<r;o++){if("img"===(t=n.at(o)).get("type"))return!1;if(""!==t.get("text"))return!1}}if(e=i.at(1)){if("content"!==e.get("type"))return!1;if((n=e.children).length>1)return!1;if(1===n.length&&("img"===(t=n.at(0)).get("type")||""!==t.get("text")))return!1}return!0},enterBrokenImageMode:function(e){t(this).on("document-saved",this.updateBrokenImageCount),this.updateBrokenImageCount(null,e)},updateBrokenImageCount:function(e,n){if((n=n||this.getNumBrokenImages(this.issueModel))!=this._lastBrokenImageCount){i.toNative("broken-image",{count:n}),this._lastBrokenImageCount=n,this.brokenImageBanner||(this.brokenImageBanner=new l,this.brokenImageBanner.render().$el.prependTo(this.$app)),this.brokenImageBanner.setNumBrokenImages(n);var o=t(document.body),r=o.hasClass("broken-image-state");0==n?r&&(o.removeClass("broken-image-state"),this.adjustVisuals()):r||(o.addClass("broken-image-state"),this.adjustVisuals())}},getNumBrokenImages:function(t){var e=0;if(t){if("img"==t.get("type")){var n=t.getImage();n&&""==n.get("image_url")&&e++}if(t.children)for(var i=t.children.models,o=0,r=i.length;o<r;o++){var a=i[o];a instanceof h.MarkupModel||(e+=this.getNumBrokenImages(a))}}return e},listenToDOM:function(t,e,n){n||(n=this),n[e]=n[e].bind(n),this.$app.on(t,n[e])},updateOrientationMarker:function(){var e=t(document.body);this.$article.width()>this.$article.height()?e.removeClass("orientation-portrait").addClass("orientation-landscape"):e.removeClass("orientation-landscape").addClass("orientation-portrait")},updatePopupLocations:function(){this.lastPopupMessage&&(this.lastPopupMessage.updateLocation(),this.lastPopupMessage.updateNative()),this.articleView.balloons.render()},isContentSection:function(t){return t&&{content:!0,"split-layout":!0,"column-layout":!0,"card-layout":!0}[t.get("type")]||!1},isFirstInSection:function(t){var e=t.parent;return this.isContentSection(e)&&"img"===e.settings.get("background_type")?1===t.getIndex():t.isFirstChild()},imageIsInline:function(t){return t&&this.isContentSection(t.parent)||!1},convertImageToInline:function(t){if(!this.imageIsInline(t)){var n,i=t.parent,o=i.parent,r=o.children.indexOf(i),a=o.getChildAt(r-1),s=o.getChildAt(r+1);a&&"content"!==a.get("type")&&(a=null),s&&"content"!==s.get("type")&&(s=null);var l={intent:"select"};if(a||s)a?(n=i.children.slice(),e.each(n,function(t){a.addChild(t,l)}),s&&(n=s.children.slice(),e.each(n,function(t){a.addChild(t)}),o.removeChild(s))):(n=i.children.slice(),e.each(n,function(t,e){s.addChildAt(t,e,l)}));else{r=o.children.indexOf(i);var c=new h.SectionModel({type:"content"});n=i.children.slice(),e.each(n,function(t){c.addChild(t,l)}),o.addChildAt(c,r,l)}o.removeChild(i)}},convertImageToCover:function(t,n){var i=t.parent,o=i.parent,r=o.children.indexOf(i),a={intent:"select"};if(this.imageIsInline(t)){var s=t===i.children.last(),l=t===i.children.first(),c=i.children.indexOf(t),u=new h.SectionModel({type:n});if(this.setCoverImageSettings(u,n),u.addChild(t),l)o.addChildAt(u,r,a);else if(o.addChildAt(u,r+1,a),!s){var d=new h.SectionModel({type:"content"}),f=i.children.slice(c);e.each(f,function(t){d.addChild(t)}),o.addChildAt(d,r+2)}l&&s&&o.removeChild(i)}else i.get("type")!==n&&(o.removeChild(i,{keep:!0}),i.set("type",n),this.setCoverImageSettings(i,n),o.addChildAt(i,r,a))},setCoverImageSettings:function(t,e){switch(e){case"window":case"banner":t.set("height","height-50");break;default:t.set("height","")}},_deleteCoverImage:function(t){var n=t.getChildAt(0),i=t.parent,o=i.children.indexOf(t),r=i.getChildAt(o-1),a=i.getChildAt(o+1);if(r&&"content"===r.get("type")&&a&&"content"===a.get("type")){var s=a.children.slice();e.each(s,function(t){r.addChild(t)}),a.remove()}n&&this._removeItem(n),t.remove()},_initNextSave:function(){this._nextSave={refresh:!1,changes:{}}},_handleModelChange:function(t){if(this._identifyTitleChanges.apply(this,arguments),this._isAllowedToSave.apply(this,arguments)){var e=this._changedModelIsText(t)||this._changeIsImageAlign(t);this.saveDocument(e)}},_isAllowedToSave:function(){return!(i.isStackFromNative&&!i.isUserInitiated)&&!this.getIsDocumentNew()},_changedModelIsText:function(t){if(!t)return!1;var e=t.changedAttributes();return!(!e||!("text"in e||"title"in e||"subtitle"in e))},_changeIsImageAlign:function(t){return!!t&&(t instanceof h.SettingModel&&"image_align"===t.get("key"))},_identifyTitleChanges:function(t){var e=this.isTitleSectionModel(t),n=h.EventsUtils.getOptions(arguments);"remove"===n._eventType?((e||this.isTitleItemModel(t,"title"))&&this.onTitleTextChanged(null),(e||this.isTitleItemModel(t,"subtitle"))&&(this._nextSave.changes.subtitleText=""),this.isTitleImageItemModel(t)&&this.onTitleImageChanged(null)):this.isTitleItemModel(t,"title")?this.onTitleTextChanged(t):this.isTitleItemModel(t,"subtitle")?this._nextSave.changes.subtitleText=t.get("text")||"":this.isTitleImageItemModel(t)?"add"!==n._eventType&&t.getImage()&&this.onTitleImageChanged(t):this.isTitleSettingsModel(t)?this._nextSave.changes.titleTextPosition=!0:this.isTitleImageSettingsModel(t)&&(this._nextSave.changes.titleImagePosition=this._getImageAlignment(t.parent))},isTitleSectionModel:function(t){return t instanceof h.SectionModel&&"title"===t.get("type")},isTitleSettingsModel:function(t){return t instanceof h.SettingModel&&this.isTitleSectionModel(t.parent)},isTitleImageSettingsModel:function(t){return t instanceof h.SettingModel&&this.isTitleImageItemModel(t.parent)},isTitleItemModel:function(t,e){return t instanceof h.ContentItemModel&&t.get("type")===(e||"title")},isTitleImageItemModel:function(t){if(t instanceof h.ContentItemModel&&"img"===t.get("type")){var e=t.getParent();if(e&&"title"===e.get("type"))return!0}return!1},checkNeedsTitleBalloon:function(){return!(!(this.selectionManager.getScrollReporter().getAnimator().playPosition<=0)||this.hasTitleImage())&&(this.showTitleBalloon(),!0)},hasTitleImage:function(){var t=this._getTitleView();return!!t&&null!==t.model.findFirstChildByType("img")},showTitleBalloon:function(){var t=this._getTitleView();t&&t.showBalloonPending()},onTitleTextChanged:function(t){var e=t&&t.get("text")||"";this.issueModel.set("title",e),this._nextSave.changes.titleText=e},onTitleImageChanged:function(t){var e,n="",o=t&&t.getImage();o&&(n=o.get("image_url")||"",e=o.get("is_preview")),this._nextSave.changes.titleImage=!0,this._nextSave.changes.titleImageIsPreview=e,i.toNative("title-image-changed",{path:n,alignment:this._getImageAlignment(t),isPreview:e})},_getImageAlignment:function(t){return t&&t.settings.get("image_align")||"50% 50%"},_getTitleView:function(){return this.$article.find(".section").eq(0).data("view")},_handleNativeImageForModel:function(t,e,n){var i=this._getLicenseUpdates(t);if(i.length)return this._updateLicenseImages(i);var o,r=this.issueModel.findByCid(e.cid);if(!r)return console.warn("Could not locate a model (cid="+e.cid+") when assigning a selected photo."),null;o="update"===e.action?[r]:this._createModelsForInsertedImages(r,t,e,n);var a=this._processInsertedOrUpdatedImages(o,t,e);return{imageSources:a,pickerSource:a.length?a[a.length-1].source:null}},_getLicenseUpdates:function(t){var n=[],i=e.transform(t.images,function(t,e){var n=e.license;if(n){var i=n.type;if(i&&"royalty_free"!==i){var o=n.image_id;o&&(t[o]=e)}}},{});if(e.isEmpty(i))return n;var o=this._getImagesByLicense();return e.each(o.royalty_free,function(t){var e=t.getImage().get("license").image_id,o=i[e];o&&n.push({imageItem:t,imageData:o})}),n},_getImagesByLicense:function(){var t={};return this.articleModel.eachChild(function(e){e.eachChild(function(e){if("img"===e.get("type")){var n=e.getImage(),i=n&&n.get("license"),o="undefined";i&&(o=String(i.type)),t[o]||(t[o]=[]),t[o].push(e)}})}),t},_updateLicenseImages:function(t){return e.each(t,function(t){this.assignNewImageFromData(t.imageItem,t.imageData)}.bind(this)),null},_createModelsForInsertedImages:function(t,e,n,i){var o=[],r=e.images.length,a={type:"img"};if(i=i||{intent:"select"},t instanceof h.SectionModel)if("insertSection"===n.action)for(var s=t.parent,l=s.children.models.indexOf(t),c=s.addChildAt(new h.SectionModel({type:"content"}),l+1),u=0;u<r;u++)o[u]=c.addChild(new h.ContentItemModel(a),i);else if("prependToSection"===n.action){"background"===n.type&&t.settings.set("background_type","img");for(u=r-1;u>=0;u--)o[u]=t.addChildAt(new h.ContentItemModel(a),0,i)}else for(u=0;u<r;u++)o[u]=t.addChild(a,i);else if(t instanceof h.ContentItemModel&&"insert"===n.action)for(u=r-1;u>=0;u--)o[u]=new h.ContentItemModel(a),t.parent.addChildAfter(o[u],t,i);return o},_processInsertedOrUpdatedImages:function(t,e,n){for(var i=[],o=0;o<t.length;o++){var r=t[o],a=e.images[o];if(r&&a){if(a.importance&&"update"!==n.action&&"content"===r.parent.get("type")&&this.convertImageToCover(r,"full-width"),a.is_new&&a.is_preview){var s=r.getImage();s&&(r.restoreOnFailureImage={image:s,pickerRequest:{uuid:a.uuid,source:a.source,maxDimension:h.MAX_IMAGE_DIM_INLINE}})}else a.is_preview||delete r.restoreOnFailureImage;if(this.assignNewImageFromData(r,a),a.is_new){var l=h.selectionManager.getSelection();if(l.selection!==r||"insert"===l.action){r.trigger("select",r,{type:"img",action:"update"}),i[o]={uuid:a.uuid,source:null};var c=this.getSourceStrForSelection();c!==a.source&&(i[o].source=c)}else l.target&&"function"==typeof l.target.scrollSectionIntoView&&setTimeout(function(){l.target.scrollSectionIntoView()}.bind(this),201)}}else console.warn("Could not create an image model for the shell-provided image:",a,n)}return i},assignNewImageFromData:function(t,e,n){t||(t=new h.ContentItemModel({type:"img"})),n||(n={});var i,o=e.imageSize?e.imageSize.width:0,r=e.imageSize?e.imageSize.height:0,a=e.path?this.addSizeToImageUrl(e.path,o,r,n):"",s=e.importance,l=new h.ImageModel({id:e.uuid,image_url:a,license:e.license,is_preview:e.is_preview,is_new:e.is_new,image_width:o,image_height:r,importance:s}),c=t.settings.get("image_align");e.focalPoint&&o&&r?i=100*e.focalPoint.x/o+"% "+100*e.focalPoint.y/r+"%":i="50% 50%";!e.is_new&&c&&"50% 50%"!==c||t.settings.set("image_align",i),e.caption&&t.set("text",e.caption);var u=t.getImage();return u&&l.set("importance",u.get("importance")),t.setImage(l),t},_handleNativeImageErrorForModel:function(t,e){var n=this.issueModel.findByCid(e.cid);n?(n.restoreOnFailureImage&&n.restoreOnFailureImage.image?n.setImage(n.restoreOnFailureImage.image):t.is_new||this._deleteItem(n),this.articleView.balloons.hideAll()):console.warn("Could not locate a model (cid="+e.cid+") when reverting a failed-to-load photo.")},registerNativeImageHandler:function(t,e,n){t&&e&&n&&(this._nativeImageHandlers||(this._nativeImageHandlers={}),this._nativeImageHandlers[t]||(this._nativeImageHandlers[t]={}),this._nativeImageHandlers[t][e]=n)},unregisterNativeImageHandler:function(t,e){t&&e&&this._nativeImageHandlers&&this._nativeImageHandlers[t]&&delete this._nativeImageHandlers[t][e]},_onNativeImage:function(t){return this._callNativeImageHandler("image-response",t)},_onNativeImageError:function(t){return this._callNativeImageHandler("image-error",t)},_callNativeImageHandler:function(t,e){if(!this._nativeImageHandlers||!this._nativeImageHandlers[t])return null;var n=this._decodeImageSourceData(e.source),i=this._nativeImageHandlers[t][n.type],o=i?i(e,n):null;if(o){var r=o.imageSources;o.imageSource=r&&r.length?r[r.length-1].source:null}return o},addSizeToImageUrl:function(e,n,i,r){if(-1!=e.search(/^blob\:/))return e;if(o.Utils.parseQueryParams(e).nonresponsive)return e;var a=(r=t.extend({detectPanoramas:!1,maxDimension:h.MAX_IMAGE_DIM_INLINE},r)).maxDimension;if(n>a||i>a){var s=i/n,l=n/i;n>i&&(!r.detectPanoramas||l<2.1)||r.detectPanoramas&&s>=2.1?n>a&&(n=a,i=Math.round(n*s)):i>a&&(i=a,n=Math.round(i*l))}return o.Utils.setQueryParam(e,"size",Math.max(n,i)||h.MAX_IMAGE_DIM_INLINE)},_addRenditionQueryParamsToImageUrls:function(t){for(var e=!1,n=/\?([^#]+&)*size=[0-9]+/,i=t.children.length,o=0;o<i;o++)for(var r=t.getChildAt(o),a=r.children.length,s=0;s<a;s++)for(var l=r.getChildAt(s),c="photo-grid"===l.get("type"),u=l.children.length,d=0;d<u;d++){var f=l.getChildAt(d).getImage();if(f){var p=f.get("image_url");if(p&&p.search(n)<0){var g;c&&(g={detectPanoramas:!0,maxDimension:h.MAX_IMAGE_DIM_GRID});var m=f.get("image_width"),v=f.get("image_height");m&&v||(m=v=c?h.MAX_IMAGE_DIM_GRID:h.MAX_IMAGE_DIM_INLINE),f.set("image_url",h.addSizeToImageUrl(p,m,v,g)),e=!0}}}return e},compareVersionNumbers:function(t,e){t=((t||"0")+"").split(/\./),e=((e||"0")+"").split(/\./);for(var n=Math.max(t.length,e.length),i=0;i<n;i++){var o=parseInt(t[i]||"0",10),r=parseInt(e[i]||"0",10);if(o!=r)return o-r}return 0},_handleNativeSetModel:function(e){try{h.luca_json=e,e.is_refresh&&(this.isLoadedFromRefresh=!0),this.updateOnlineStatus(e.online);var n=h.IssueParser.parseIssue(e.model||e);if(e.theme&&h.IssueParser.parseTheme(n,e.theme),n.theme)if(n.theme.isCustomThemeFormat()){var i=a.getCSS(e.theme||e.model.theme);t(document.body).append('<style type="text/css" id="custom-theme-style">'+i+"</style>")}else{var o=n.theme.getCssClassName();t("#font-loader").addClass(o)}var r=n.get("model_version"),l=this.compareVersionNumbers(r,h.MODEL_VERSION);r||this._addRenditionQueryParamsToImageUrls(n),this.setIssueModel(n),l<0&&(this._nextSave.changes.model_version=h.MODEL_VERSION,n.set("model_version",h.MODEL_VERSION));var c=this.getNumBrokenImages(this.issueModel);c>0&&this.enterBrokenImageMode(c)}catch(t){h._reportAppException(s.getString("editor.dialogs.error-app.text-parse"),t)}},_handleNativeUpdateModel:function(t){"article"===t.target&&this.articleModel.set(t.data)},_handleNativeGetPreferences:function(e){var n=t(document.body);this.preferences=e||{},this.preferences.modelVersion&&(h.MODEL_VERSION=this.preferences.modelVersion),"web"===this.preferences.deviceType&&n.addClass("web-shell")},_handleOnlineStatusChanged:function(t){this.updateOnlineStatus(t.online)},updateOnlineStatus:function(e){var n=t(document.body);e?n.removeClass("network-offline"):n.addClass("network-offline")},_handleNativeThemeChange:function(t){h.IssueParser.parseTheme(this.issueModel,t),this.immediateSaveScroll({silent:!0}),this._nextSave.refresh=!0,this.immediateSaveDocument()},getSectionParent:function(t){for(var e=t;e;){if(e instanceof h.SectionModel)return e;e=e.parent}return null},_handleNativePreviewToggle:function(){},_handleNativeHeaderTapped:function(t){if("modal"!=t.type){var e=this.isTextSelection();this.selectionManager.selectNone(),e||this.getSectionsArticleScroller().scrollTo(0)}this._testForJSONDebugEditor()},_headerTapCount:0,_headerTapCountTimer:-1,_testForJSONDebugEditor:function(){if(this._headerTapCount++,1===this._headerTapCount&&(clearTimeout(this._headerTapCountTimer),this._headerTapCountTimer=setTimeout(function(){this._headerTapCount=0}.bind(this),1800)),this._headerTapCount>=7&&(this._headerTapCount=0,i.toNative("editor-ready"),!t("#json-debug-editor").length)){var e=t("<div>").attr("id","json-debug-editor").css({"background-color":"white",position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","z-index":1e3}),n=(t("<h3>").css({color:"black","font-size":"18px","font-family":"monospace","margin-top":"8px","text-align":"center"}).text("Loaded Document Source").appendTo(e),h.luca_json&&h.luca_json.model);n=n?JSON.stringify(n):"Error: source not available";var o=t("<textarea>").css({webkitUserSelect:"text",webkitTouchCallout:"default",position:"absolute",top:"30px",right:"8px",bottom:"45px",left:"8px",margin:"8px auto","font-family":"monospace"}).val(n).appendTo(e),r=t("<div>").css({position:"absolute",height:"45px",right:"8px",bottom:"0px",left:"8px","text-align":"right"}).appendTo(e),a=t("<span>").css({color:"red","font-size":"18px"}).appendTo(r),s={"font-size":"18px","margin-left":"5px"},l=t("<button>").css(s).text("Save").appendTo(r),c=t("<button>").css(s).text("Cancel").appendTo(r);l.on("click",function(t){var n,r=o.val();try{n=JSON.parse(r),i.toNative("save",{changes:{},model:n,refresh:!0})}catch(t){return void a.stop().show().text("Invalid format!").fadeOut(3e3)}e.remove()}),c.on("click",function(t){e.remove()}),e.appendTo(document.body)}},_handleNativeAddSection:function(t){this.issueModel||this.setIssueModel(new h.IssueModel);var e=this.articleModel.addChild({type:t.type});if("content"==t.type){var n=new h.ContentItemModel({type:"p",text:""});e.addChild(n)}else if("title"==t.type){var i=new h.ContentItemModel({type:"title",text:""}),o=new h.ContentItemModel({type:"subtitle",text:""});e.addChild(i),e.addChild(o)}},_handleNativeSetItemType:function(t){this.disableAdjustVisuals(),this.setSelectedContentItemType(t.type),this.enableAdjustVisuals(),this.adjustVisuals();var e=this.getSelectionMetrics(),n=e.focus.top,i=e.focus.height;n<0&&this.getSectionsArticleScroller().scrollTo(n-i,{relative:!0,animate:!1}),this.nudgeCaretAboveKeyboard(),this.fireCaretChangedEvent({reason:"itemTypeChange"})},_handleNativeChangeTextAttribute:function(t){if(t){var e=this.selectionManager.getSelection().selection;if(e instanceof h.ContentItemModel){if(this.contentItemSupportsMarkups(e)&&(t.hasOwnProperty("bold")&&this._executeContentEditableCommand("bold"),t.hasOwnProperty("italic")&&this._executeContentEditableCommand("italic"),t.hasOwnProperty("anchor"))){var n=window.getSelection(),i=this.findClosestNodeOfType(n.anchorNode,"A","editable-region"),o=this.findClosestNodeOfType(n.focusNode,"A","editable-region");if(i&&i===o){var r=document.createRange();r.selectNodeContents(i),n.removeAllRanges(),n.addRange(r)}""!=t.anchor?this._executeContentEditableCommand("createLink",t.anchor):this._executeContentEditableCommand("unlink")}if(t.alignment)if("none"===t.alignment)e.settings.set("text_align","");else{var a=this.textAlignCSS.getStyle(t.alignment);e.settings.set("text_align",a)}}}},_executeContentEditableCommand:function(t,e){e=e||null,document.execCommand(t,!1,e),(o.isIE||o.isMSEdge)&&this._handleCaretChange({detail:{reason:"mouse"}})},_handleNativeGetLicenseInfo:function(){return e.mapValues(this._getImagesByLicense(),function(t){return e.map(t,function(t){var e=t.getImage();return e?e.attributes:{}})})},_handleGetSourceForCoordinates:function(n){var o,r,a,s;if(this.photoCollectionEditor&&this.photoCollectionEditor.isShowing())s=this.photoCollectionEditor.collectionView.imageOptions.maxDimension,a=(o=this._getClosestElementIn([".mock-photo-collection .photo-image"],null,n,!0))?this._encodeImageSourceData({type:"photo-collection",action:"replace",pid:o.id}):this._encodeImageSourceData(this.photoCollectionEditor.getNewImageSource());else{if((o=this._getGlideshowSlideFromPosition(n))||(o=this._getSectionBackgroundFromPosition(n),r=t(o).closest(".section")[0]),!o){var l=!!this._getClosestElementIn([".article .photo-grid-section"],null,n,!0);o=this._getClosestElementIn([".article .section:not(.hidden) .image",".article .section:not(.hidden) .insert-before-link:not(.hide)",".article .section:not(.hidden) .insert-after-link:not(.hide)",".article .title-section:not(.hidden)",".article .fullscreen-photo-section:not(.hidden)",".article .window-section:not(.hidden)",".article .photo-grid-section:not(.hidden) .photo-image"],null,n,l)}if(o){var c=t(r||o).data("view");c&&"function"==typeof c.getSourceForDrop&&(a=c.getSourceForDrop(o))}}if(a){var u=e.defaults({source:a,maxDimension:s},n);return i.toNative("source-for-coordinates",u),a}return null},_handleNativeGetScrollInfo:function(){var t=this.getScrollInfo(),e=t.$section.data(),n=e.isFirstSection?0:t.position-t.clientHeight-e.scrollInOffset;return{position:t.position,duration:t.duration,sectionIndex:t.sectionIndex,sectionOffsetFromTop:n,clientHeight:t.clientHeight,sectionItemIndex:t.sectionItemIndex}},getScrollInfo:function(){for(var t=this.$article.data("animator"),e=t.playPosition,n=t.getDuration(),i=t.height(),o=e-i/2,r=this.$article.find(".section").not(".content-divider-section, .placeholder, .spacer-section"),a=r.eq(0),s=1;s<r.length;s++){var l=r.eq(s);if(l.data("scrollInOffset")>o)break;a=l}var c=0,u=a.data().view;return u&&u.getClosestSlideFromScrollPosition&&-1===(c=u.getClosestSlideFromScrollPosition().index)&&(c=0),{position:e,duration:n,clientHeight:i,$section:a,sectionIndex:s-1,sectionItemIndex:c}},_getClosestElementIn:function(n,i,o,r){e.isArray(n)||(n=[n]),i||(i=document.body);var a=null,s=Number.POSITIVE_INFINITY,l=t(window).height();return t(i).find(n.join(",")).toArray().some(function(t){var e=t.getBoundingClientRect();if(!(e.bottom<=0||e.top>=l)){var n=e.top<=o.y&&e.bottom>=o.y;if(n&&r&&(n=e.left<=o.x&&e.right>=o.x),n)return a=t,!0;if(!r){var i=Math.abs(e.top-o.y),c=Math.abs(e.bottom-o.y),u=Math.min(i,c);u<s&&(s=u,a=t)}}}),a},_getGlideshowSlideFromPosition:function(e){var n=this._getClosestElementIn(".wp-panel-active .article .card-flipbook-section",null,e,!0);if(n&&!this._getClosestElementIn(".content-container",n,e,!0)){var i=t(n).data("view");if(i){var o=i.getClosestSlideFromScrollPosition();if(o=o.$slide&&o.$slide[0])return o}}return null},_getSectionBackgroundFromPosition:function(e){var n=null,i=t(this._getClosestElementIn(".article .single-column-section:not(.hidden)",null,e,!0));if(i){var o=t(i).find(".section-background");o.length>0&&(this._getClosestElementIn(".content-container",i,e,!0)||(n=o[0]))}return n},getSelectionIndexes:function(t){var e=window.getSelection().getRangeAt(0),n=e.startContainer,i=e.startOffset,o=n,r=0,a=e.cloneContents().textContent.length;n.nodeType!=Node.TEXT_NODE?o=n.childNodes[i]:r+=i;for(var s=this.getTextNodesBeforeTarget(t,o).textNodes,l=0;l<s.length;l++)r+=s[l].textContent.length;return{selectionStart:r,selectionEnd:r+a,selectionLength:a}},getTextNodesBeforeTarget:function(t,e){var n={textNodes:[],targetFound:!1};if(t===e)return n.targetFound=!0,n;if(3==t.nodeType)return n.textNodes=[t],n;for(var i=t.childNodes,o=0;o<i.length;o++){if(i[o]===e){n.targetFound=!0;break}var r=this.getTextNodesBeforeTarget(i[o],e);if(n.textNodes=n.textNodes.concat(r.textNodes),r.targetFound){n.targetFound=!0;break}}return n},saveCaretState:function(){var e=t(document.activeElement).closest(".editable-region").data("view");if(e||(e=t(window.getSelection().anchorNode).closest(".editable-region").data("view")),e){var n=this.getSelectionIndexes(e.el);this._caretState={editableRegionView:e,editableRegionViewParent:e.$el.parent(),anchorOffset:n.selectionStart,focusOffset:n.selectionEnd}}},restoreCaretState:function(){if(this._caretState){var t=this._caretState.editableRegionView;if(t){if(!t.el.parentNode)t=this._caretState.editableRegionViewParent.find(".editable-region").data("view");t.setCaretPosition(this._caretState.anchorOffset,this._caretState.focusOffset),this._caretState=null}}},getEnclosingRect:function(t,e){var n={top:0,right:0,bottom:0,left:0,width:0,height:0},i=arguments.length;if(i>0){var o=arguments[0];n.top=o.top,n.right=o.right,n.bottom=o.bottom,n.left=o.left,n.width=o.width,n.height=o.height;for(var r=1;r<i;r++){o=arguments[r];var a=n.left<o.left?n.left:o.left,s=n.right>o.right?n.right:o.right,l=n.top<o.top?n.top:o.top,c=n.bottom>o.bottom?n.bottom:o.bottom;n.left=a,n.right=s,n.top=l,n.bottom=c,n.width=s-a,n.height=c-l}}return n},getDOMRangeMetrics:function(t){var e={x:0,y:0,width:0,height:0};if(t.getClientRects){for(var n=t.getClientRects(),i=n.length,o=[],r=0;r<i;r++){var a=n[r];if(t.collapsed){if(0==r&&i>1)continue}else if(0==a.width)continue;o.push(a)}o.length>0&&(e=this.getEnclosingRect.apply(this,o))}return e},getSelectionMetrics:function(){var t=window.getSelection(),e=t.rangeCount;if(!e)return null;var n=document.createRange();n.setStart(t.anchorNode,t.anchorOffset),n.collapse(!1);var i=document.createRange();i.setStart(t.focusNode,t.focusOffset),i.collapse(!1);for(var o={x:0,y:0,width:0,height:0},r=[],a=0;a<e;a++)r.push(this.getDOMRangeMetrics(t.getRangeAt(a)));return r.length>0&&(o=this.getEnclosingRect.apply(this,r)),t.isCollapsed&&t.anchorNode==t.focusNode&&t.focusNode.nodeType==Node.ELEMENT_NODE&&(o.width=0),{isCollapsed:t.isCollapsed,focus:this.getDOMRangeMetrics(i),anchor:this.getDOMRangeMetrics(n),extent:o}},convertScrollOffsetsToAnimatorPosition:function(){var e=document.activeElement;if(e){var n=t(e).closest(".section"),i=n.closest(".article")[0];if(i){for(var o=i.parentNode,r=0,a=e.parentNode;a&&a!=o;){var s=a.scrollTop||0;s&&(r+=s,a.scrollTop=0),a=a.parentNode}if(r){var l=this.$article.data("animator"),c=l.scrollTop(),u=l.scrollHeight(),h=c+r,d=0;h>u&&(d=h-u,h=u),c!=h&&(this.getSectionsArticleScroller().scrollTo(h,{animate:!1}),d&&n.scrollTop(d))}}}},nudgeCaretAboveKeyboard:function(){var e=this.getSelectionMetrics();if(e){var n=e.focus.top,i=e.focus.height;if(n+i>=window.innerHeight){var o=n-window.innerHeight+3*i,r=0,a=this.$article.data("animator"),s=a.scrollTop(),l=a.scrollHeight()-t(window).height()-s;o>l&&(o-=r=o-l),this.getSectionsArticleScroller().scrollTo(o,{relative:!0,animate:!1}),r>0&&t(document).scrollTop(r)}}},nudgeCaretBelowTop:function(){var t=this.getSelectionMetrics();if(t){var e=t.focus.top,n=t.focus.height;if(e<0){var i=e-3*n;this.getSectionsArticleScroller().scrollTo(i,{relative:!0,animate:!1})}}},_handleNativeEndEdit:function(){this.selectionManager.selectNone(),this.issueModel.triggerAll("end-editing")},_handleNativePanelOpened:function(){this.selectionManager.selectNone({keepNativeUI:!0,target:"PANEL"}),this.issueModel.triggerAll("end-editing")},_handleNativePanelClosed:function(){this.checkNeedsTitleBalloon()},_handleKeyboardDismissed:function(){if(!0!==this.ignoreNextKeyboardDismissal){this.isTextSelection()&&this.selectionManager.selectNone({target:"KEYBOARD"});var t=this._getTitleView();t&&t._showHint()}this.ignoreNextKeyboardDismissal=!1},_handleInsertNewline:function(t,e,n,i,o,r){var a=e.parent,s=a.children.models.indexOf(e),l=""===this.flattenHTMLtoText(i),c=""===this.flattenHTMLtoText(r),u="p",d=e.get("type"),f="ol.li"==d||"ul.li"==d;this.disableAdjustVisuals();var p=this.$article.data("animator").scrollTop(),g=n.$el.height();if(l&&c)return this.setContentItemText(e,""),f&&this.setSelectedContentItemType(u),this.enableAdjustVisuals(),void this.adjustVisuals();f&&(u=d),this.ignoreNextKeyboardDismissal=!0,c&&(n.editableRegionView.isCurrentlyEditing=!1,this.setContentItemText(e,"")),this.setContentItemText(e,i);var m=new h.ContentItemModel({type:u});this.setContentItemText(m,r);var v=e.settings.get("text_align");v&&m.settings.set("text_align",v),a.addChildAt(m,s+1),this.enableAdjustVisuals(),this.adjustVisuals(),this.getSectionsArticleScroller().scrollTo(p+g,{relative:!1,animate:!1}),l?(n.editableRegionView.$el.text("."),n.editableRegionView.setCaretPosition(0),n.editableRegionView.$el.text("")):this._setFocus(m),this.nudgeCaretAboveKeyboard(),this.fireCaretChangedEvent({reason:"input"})},_applyItemSettings:function(t,e){if(e)for(var n in e)t.settings.set(n,e[n])},_handleInsertItemAfter:function(t,e,n,i,o){var r=n.parent,a=new h.ContentItemModel({type:i,text:" "});this._applyItemSettings(a,o),r.addChildAfter(a,n,{intent:"edit"}),this._setFocus(a)},_getGroupDetails:function(t){var e=t.parent;if(!e)return-1;var n=e.children.models.indexOf(t),i=e.children.models.length;if("card-flipbook"==e.get("type"))for(var o=e.get("groups"),r=0,a=o.length;r<a;r++){var s=o[r],l=s.offset;if(l<=n&&l+s.count>n){n-=l,n-=1,i=s.count-1;break}}return{index:n,count:i}},_handleMergeWithPreviousItem:function(t,e,n,i,o){var r=n.parent,a=r.children.models.indexOf(n),s=this._getGroupDetails(n).index;if(1==={content:1,"card-flipbook":1,"split-layout":1,"column-layout":1,"card-layout":1}[r.get("type")]&&0!==s){var l=r.getChildAt(a-1),c=l.get("type");if("img"!=c&&"a"!=c){e.preventDefault(),this.disableAdjustVisuals();var u=this.$article.data("animator").scrollTop(),d=i.$el.closest(".content-container"),f=d.height(),p=h.MarkupParser.toDocumentFragment(l.get("text"),l.children.models);this.setContentItemText(l,this._combineDocumentFragments([p,o.documentFragment])),n.remove(),this.enableAdjustVisuals(),this.adjustVisuals();var g=d.height()-f;this.getSectionsArticleScroller().scrollTo(u+g,{relative:!1,animate:!1});var m=this.flattenHTMLtoText(p).length;this._setFocus(l,m),this.nudgeCaretAboveKeyboard(),this.fireCaretChangedEvent({reason:"input"})}}},_handleMoveCaretToAdjacentItem:function(e,n,i,o,r){var a=i.parent,s=a.children.models.indexOf(i),l=this._getGroupDetails(i),c=l.index,u=l.count;if(1==={content:1,"card-flipbook":1,"split-layout":1,"column-layout":1,"card-layout":1}[a.get("type")]&&!(r<0&&0===c||r>0&&c>=u-1)){var h=a.getChildAt(s+r),d=h.get("text").length,f=h.get("type");if(n.preventDefault(),"img"!=f&&"a"!=f){var p=r>0?0:d,g=this.getSelectionMetrics().extent||{},m=g.left;if(this._setFocus(h,p),o)for(var v=t("#"+h.cid).closest(".content-item").data("view").editableRegionView,_=this.getSelectionMetrics().extent||{},y=_.top,b=_.left;r>0&&b<m&&p<d||r<0&&b>m&&p>0;){if(_.top!=y){v.setCaretPosition(r>0?--p:++p);break}v.setCaretPosition(r>0?++p:--p),b=(_=this.getSelectionMetrics().extent||{}).left}this._handleEnsureCaretInView(n);var w=t(n.target).closest(".content-container");0!=w.scrollLeft()&&(this.getSectionsArticleScroller().scrollTo(g.height,{relative:!0,animate:!1}),w.scrollLeft(0))}}},_handleEnsureCaretInView:function(t){this.nudgeCaretAboveKeyboard(),this.nudgeCaretBelowTop(),this.fireCaretChangedEvent({reason:"keyboard",sourceEvent:t})},_combineDocumentFragments:function(t){for(var e=document.createDocumentFragment(),n=0;n<t.length;n++){var i,o,r=t[n];for("string"==typeof r?(i=document.createDocumentFragment()).textContent=r:i=r.cloneNode(!0);o=i.firstChild;)e.appendChild(o)}return e},_handlePrependNewItemToSection:function(t,e,n,i,o){var r=new h.ContentItemModel({type:i,text:" "});this._applyItemSettings(r,o),n.addChildAt(r,0,{intent:"edit"}),this._setFocus(r)},_handleInsertDefaultSection:function(t,e,n,i,o){var r=n.parent,a=r.children.models.indexOf(n),s=new h.SectionModel({type:"content"}),l=new h.ContentItemModel({type:i});this._applyItemSettings(l,o),s.addChild(l),r.addChildAt(s,a+1,{intent:"edit"}),this._setFocus(l)},_handlePhotoCollection:function(t,e,n,i,o){var r={type:n,action:i,cid:o.cid};this._showPhotoCollectionEditor(r,{imageDatas:null})},_handleEditPhotoCollection:function(t,e,n){var i={type:n.section.get("type"),action:"replace",cid:n.section.cid},o={selectedIndex:e.selectedSlide?e.selectedSlide.index:-1,imageDatas:this.getPhotoCollectionData(n.section)};this._showPhotoCollectionEditor(i,o)},_showPhotoCollectionEditor:function(t,e){this.popupIsPresent()||(this.getSectionsArticleScroller().stop(),"card-flipbook"===t.type&&void 0===e.showHelp&&(e.showHelp="1"!==this.preferences.glideshowUsageHintShown,this.updatePreference("glideshowUsageHintShown","1")),this.photoCollectionEditor||(this.photoCollectionEditor=new h.PhotoCollectionModalView,this.$app.append(this.photoCollectionEditor.$el)),this.photoCollectionEditor.show(t,e))},_splitContentSectionAtIndex:function(t,e,n){var i=t.get("type"),o=t.children.slice(e),r=null;if(o.length>0){var a=t.parent;r=new h.SectionModel({type:i});for(var s=0;s<o.length;s++)r.addChild(o[s]);a.addChildAfter(r,t)}return{before:t,after:r}},_splitContentSectionAfter:function(t,e){var n=t.parent,i=n.children.indexOf(t)+1;return this._splitContentSectionAtIndex(n,i)},_mergeSectionsIfPossible:function(t,e){if(t&&e&&t!=e){var n=t.get("type"),i=e.get("type");if("content"===n&&n===i){for(var o=e.children.slice(),r=o.length,a=0;a<r;a++)t.addChild(o[a]);e.parent.removeChild(e)}}},getPhotoCollectionData:function(e){for(var n=[],i=e.children.length,o=0;o<i;o++){var r=this._getPhotoCollectionItemInfo(e,o);if(r.isCollectionImage){var a=r.item.getImage(),s=a.get("license"),l={is_new:!0,is_preview:!1,path:a.get("image_url"),importance:a.get("importance")||0,imageSize:{width:a.get("image_width")||0,height:a.get("image_height")||0},license:s&&t.extend({},s),cid:a.cid,uuid:a.get("id"),hasContent:r.hasContent};n.push(l)}}return n},_getPhotoCollectionItemInfo:function(t,e){var n=t.getChildAt(e),i=t.get("groups"),o=this._getGroupForItemAt(i,e),r=!1;return"card-flipbook"===t.get("type")&&(r=!!o&&o.count>1),{item:n,isCollectionImage:this._isPhotoCollectionImage(n,t,e,o),hasContent:r}},_getGroupForItemAt:function(t,e){for(var n=0,i=t.length;n<i;n++){var o=t[n],r=o.offset+o.count-1;if(e>=o.offset&&e<=r)return o}return null},_isPhotoCollectionImage:function(t,e,n,i){return t instanceof h.ContentItemModel!=!1&&"img"===t.get("type")&&("card-flipbook"!==e.get("type")||i.offset===n)},_removeSection:function(t,e){var n=t.getPrevSibling(),i=t.getNextSibling(),o=t.remove(e);return n&&i&&this._mergeSectionsIfPossible(n,i),o},_handleDeleteSection:function(t,e){e&&e.section&&(e.imageItemsRemoved&&this._notifyImagesRemoved(e.imageItemsRemoved),this._removeSection(e.section))},_handleInsertPhotoCollection:function(t,e,n){var i=n.imageDatas,o=e.action,r=this.issueModel.findByCid(e.cid),a=null,s=null;switch(o){case"insertBeforeSection":case"insertAfterSection":if(0===i.length)return;a=r;break;case"insertAfterItem":if(0===i.length)return;a=r.parent,o="insertAfterSection",r.isLastChild()||this._splitContentSectionAfter(r);break;case"replace":if(0===i.length)return void this._removeSection(r);s=r,a=r,o="insertBeforeSection"}if(a){var l=this.PhotoCollectionSectionFactory.create(e.type,i,s),c=a.parent,u=s?{}:{intent:"edit"};"insertBeforeSection"===o?c.addChildBefore(l,a,u):c.addChildAfter(l,a,u),s&&s.remove()}},_handleInsertSplitLayoutSection:function(t,e,n,i){var o=null,r="left";switch(n){case"insertBeforeSection":case"insertAfterSection":o=i;var a="insertBeforeSection"===n?o.getPrevSibling():o,s="insertAfterSection"===n?o.getNextSibling():o,l=null;a&&"split-layout"===a.get("type")?l=a:s&&"split-layout"===s.get("type")&&(l=s),l&&(r={left:"right",right:"left"}[l.settings.get("background_split_position")||"left"]);break;case"insertAfterItem":o=i.parent,n="insertAfterSection",i.isLastChild()||this._splitContentSectionAfter(i)}var c=o.parent,u=new h.SectionModel({type:"split-layout"});u.settings.set("background_split_position",r),"insertBeforeSection"===n?c.addChildBefore(u,o,{intent:"edit"}):c.addChildAfter(u,o,{intent:"edit"})},_handleNativePopupDismissed:function(){this.clearLastPopup()},_handleNativeLinkCanceled:function(t){if(this.clearLastPopup(),this.issueModel){var e=t.source,n=this.issueModel.findByCid(e);n?n.trigger("cancel"):console.warn("Could not find link button for canceling associated with cid: "+e)}},clearLastPopup:function(){this.lastPopupMessage=null},popupIsPresent:function(){return null!==this.lastPopupMessage},_handlePasteContent:function(e,n,i,r){this.isPasting=!0,this.disableAdjustVisuals();for(var a=this.$article.data("animator").scrollTop(),s=i.$el.closest(".content-container"),l=s.height()+r.heightBeforePaste,c=n.get("type"),u=n.parent,d=u.children.indexOf(n),f={p:!0,"ol.li":!0,"ul.li":!0}[c]&&{content:!0,"card-flipbook":!0,"split-layout":!0,"card-layout":!0,"column-layout":!0}[u.get("type")],p=this._splitByNewline(r.pasteContent),g=p.length,m=0;m<g;m++)p[m]=this.collapseSpaces(p[m]);var v=this.collapseSpaces(r.pasteContent);f&&g>1&&(v=p[0]);var _=[r.contentBeforeCaret,r.spaceBeforeCaret,v];if(f&&1!=g||(_.push(r.spaceAfterCaret),_.push(r.contentAfterCaret)),i.isCurrentlyEditing=!1,this.setContentItemText(n,""),this.setContentItemText(n,this._combineDocumentFragments(_)),i.isCurrentlyEditing=!0,f&&g>1)for(m=1;m<g;m++){var y=[p[m]],b=m==g-1;b&&(y.push(r.spaceAfterCaret),y.push(r.contentAfterCaret));var w=new h.ContentItemModel({type:c});if(this.setContentItemText(w,this._combineDocumentFragments(y)),u.addChildAt(w,d+m),b){var S=p[m].textContent.length,x=this,C=function(){x._setFocus(w,S)};o.isIE?setTimeout(C,0):C()}}else{var T=0;T+=this.flattenHTMLtoText(r.contentBeforeCaret).length,T+=r.spaceBeforeCaret.length,T+=v.textContent.length;C=function(){i.setCaretPosition(T)};o.isIE?setTimeout(C,0):C()}t(document).scrollTop(0),this.enableAdjustVisuals(),this.adjustVisuals();var I=s.height()-l;this.getSectionsArticleScroller().scrollTo(a+I,{relative:!1,animate:!1}),this.nudgeCaretAboveKeyboard(),this.fireCaretChangedEvent({reason:"input"}),this.isPasting=!1},_splitByNewline:function(t){for(var e=t.cloneNode(!0).textContent.trim().split(/[\r\n\u2028\u2029]\s*/g),n=[],i=0;i<e.length;i++){var o=document.createDocumentFragment();o.textContent=e[i],n.push(o)}return n},_handleDeleteItem:function(t,e,n){if(n=n||{},this.selectionManager.selectNone(),n.section)switch(n.section.get("type")){case"banner":case"window":case"zoom":this._deleteCoverImage(n.section)}else n.item&&this._deleteItem(n.item)},_handleDeleteItemOnEditorContextClear:function(t,e,n){this._editorContext.deleteSelectedItemOnClear=!0},modelCanExistWithoutChildren:function(t){return t&&{"card-layout":!0,"column-layout":!0,"split-layout":!0,title:!0}[t.get("type")]||!1},_deleteItem:function(t){var e=t.parent;this._removeItem(t),e&&!this.modelCanExistWithoutChildren(e)&&0===e.children.length&&this._removeSection(e)},_removeItem:function(t){this._notifyImagesRemoved([t]),t.remove()},_notifyImagesRemoved:function(t){var e=[];t.forEach(function(t){var n=t.getImage();n&&e.push({uuid:n.get("id"),source:this.getSourceStr({cid:t.cid}),isTitleImage:this._isTitleImage(n)})}.bind(this)),e.length&&i.toNative("image-remove",{imageSources:e})},_isTitleImage:function(t){try{return"title"===t.parent.parent.get("type")}catch(t){}return!1},_handleNativeSetEditorContext:function(t){var e=null;!0===t.paused?(e=this.getSelectionMetrics(),this.pauseEditorContext()):(this.resumeEditorContext(t.clearContext),e=this.getSelectionMetrics());var n=null;if(e){var i=e.extent||{};n={x:i.left,y:i.top,width:i.width,height:i.height}}return{caretMetrics:e,location:n}},pauseEditorContext:function(){if(this._editorContext.paused=!0,this._editorContext.$activeElement=t(document.activeElement),this._editorContext.selectedItem=this.selectionManager.getSelection().selection,this._editorContext.$activeElement.hasClass("editable-region")&&(this.saveCaretState(),"web"==h.preferences.deviceType)){var e=window.getSelection();e&&e.removeAllRanges(),this._editorContext.$activeElement.blur()}},resumeEditorContext:function(t){var e=this._editorContext.$activeElement;e&&e.hasClass("editable-region")&&(e[0].focus(),this.restoreCaretState(),t&&(this.selectionManager.selectNone(),this._editorContext.deleteSelectedItemOnClear&&this._editorContext.selectedItem&&this._deleteItem(this._editorContext.selectedItem))),this._editorContext.paused=!1,this._editorContext.$activeElement=null,this._editorContext.selectedItem=null,this._editorContext.deleteSelectedItemOnClear=!1},editorContextIsPaused:function(){return this._editorContext&&!0===this._editorContext.paused},_handleMoveItem:function(t,e,n){var i=n.item||this.selectionManager.getSelection().selection;if(i instanceof h.ContentItemModel!=!1){var o,r,a=n.moveBy<0?-1:1,s=-1===a,l=1===a,c=i.parent,u={intent:"move"};this.disableAdjustVisuals();var d=Boolean("content"===c.get("type"));if(d){var f=null,p=null;if(i.isFirstChild()&&s){var g=c.getPrevSibling();if(g){var m="content"===g.get("type");f=m?g:g.getPrevSibling(),p=m?c:g,this._injectItemBetweenSections(i,f,p,!1,u),0===c.children.length&&c.remove()}}else if(i.isLastChild()&&l){var v=c.getNextSibling();if(v){var _="content"===v.get("type");f=_?c:v,p=_?v:v.getNextSibling(),this._injectItemBetweenSections(i,f,p,!0,u),0===c.children.length&&c.remove()}}else r=this._getNextNonListItemIndex(c,i,!1,a),c.addChildAt(i.remove({keep:!0}),r,u)}else{if(o=c.getIndex()+a,"title"===c.get("type")||c.isLastChild()&&l||o<=0)return void this.enableAdjustVisuals();var y=c.parent,b=y.getChildAt(o);if(r=this._getMoveIndexIfInsertingIntoNextSection(b,a)){var w=this._splitContentSectionAtIndex(b,r);y.addChildAfter(c.remove({keep:!0}),w.before,u),l?this._mergeSectionsIfPossible(w.before.getPrevSibling(),w.before):this._mergeSectionsIfPossible(w.after,w.after.getNextSibling())}else{var S;y.addChildAt(c.remove({keep:!0}),o,u),l?(S=c.getPrevSibling(),this._mergeSectionsIfPossible(S.getPrevSibling(),S)):(S=c.getNextSibling(),this._mergeSectionsIfPossible(S,S.getNextSibling()))}}this.enableAdjustVisuals(),d||this.immediateAdjustVisuals(),i.trigger("select",i,{type:"img"})}},_injectItemBetweenSections:function(t,e,n,i,o){if(e&&(e||n)){var r=i?n:e;if(r&&"content"===r.get("type"))i?r.addChildAt(t.remove({keep:!0}),0,o):r.addChild(t.remove({keep:!0}),o);else{var a=t.parent,s=new h.SectionModel({type:"content"});e?e.parent.addChildAfter(s,e):n.parent.addChildBefore(s,n),s.addChild(t.remove({keep:!0}),o),0===a.children.length&&a.remove()}}},_getNextNonListItemIndex:function(t,e,n,i){var o,r;n?o=(r=e).getIndex():(o=e.getIndex()+i,r=t.getChildAt(o));var a,s,l=r.get("type");if("ul.li"===l||"ol.li"===l){do{o+=i,s=(a=t.getChildAt(o))&&a.get("type")}while(s===l);o-=i}return o},_getMoveIndexIfInsertingIntoNextSection:function(t,e){if("content"===t.get("type")){if(1===t.children.length)return!1;var n=t.getChildAt(0).get("type");if("ul.li"===n||"ol.li"===n){for(var i=!0,o=t.children.length;o--;)if(t.getChildAt(o).get("type")!==n){i=!1;break}if(i)return!1}var r=1===e,a=r?0:t.children.length-1,s=t.getChildAt(a);return a=this._getNextNonListItemIndex(t,s,!0,e),r&&a++,a}return!1},_handleUpdateText:function(t,e,n){var i=this.contentItemSupportsMarkups(e);this.setContentItemText(e,n.documentFragment,i),this.nudgeCaretAboveKeyboard()},contentItemSupportsMarkups:function(t){if(!t||t instanceof n.Model==!1)return!1;var e=t.get("type");if(!0==={p:!0,"ol.li":!0,"ul.li":!0}[e])return!0;if("img"==e){var i=t.parent;if(i){if(1==={content:1,"full-width":1,"card-flipbook":1,"split-layout":1,"column-layout":1,"card-layout":1}[i.get("type")])return!0}}return!1},_handleUpdateImagePosition:function(t,e,n,i){e&&e.settings&&e.settings.set("image_align",n+"% "+i+"%")},_handleUpdateSettingValue:function(t,e,n,i){e.settings.set(n,i)},_handleUpdatePreference:function(t,e,n){this.updatePreference(e,n)},updatePreference:function(t,e){this.preferences[t]=e,i.toNative("set-preference",{key:t,value:e})},_handleConvertImage:function(t,e,n,i){this.disableAdjustVisuals(),"inline"===i?this.convertImageToInline(n):this.convertImageToCover(n,i),this.enableAdjustVisuals(),this._imageChangeUpdates(n)},_handleImageLoadInitiated:function(t){this.pendingImageCount++},_handleImageLoadCompleted:function(e){this.pendingImageCount--,0===this.pendingImageCount&&t(this).trigger("pendingImagesResolved")},isAdjustVisualsEnabled:function(){return h._adjustVisualsEnabled},enableAdjustVisuals:function(){h._adjustVisualsEnabled=!0},disableAdjustVisuals:function(){h._adjustVisualsEnabled=!1},_imageChangeUpdates:function(t){this.immediateAdjustVisuals(),t.trigger("select",t,{type:"img",action:"update"})},createElement:function(t,e){var n=document.createElement(t||"div");if(e)for(var i in e)n.setAttribute(i,e[i]);return n},create$Element:function(e,n){return t(h.createElement(e,n))},setContentItemText:function(t,e,n){var i;n=void 0===n||n,"string"==typeof e?(i=document.createDocumentFragment()).textContent=e:i=e,i=this.collapseSpaces(i);for(var o=t.children.length;o--;)t.getChildAt(o).remove();var r=h.MarkupParser.fromDOMElement(i);if(n)for(o=0;o<r.markups.length;o++)t.addChild(new h.MarkupModel(r.markups[o]));t.set("text",r.text)},flattenHTMLtoText:function(e){var n=document.createElement("div");return"string"==typeof e?n.innerHTML=e:n.appendChild(e.cloneNode(!0)),t(n).text()},setSelectedContentItemType:function(t){var e=this.selectionManager.getSelection().selection;if(e&&e instanceof h.ContentItemModel!=!1){this.ignoreNextKeyboardDismissal=!0,this.saveCaretState();var n=e.get("type");if(e.set("type",t),"ol.li"==t&&"ul.li"==n||"ul.li"==t&&"ol.li"==n){var i,o,r=e.parent,a=r.children.indexOf(e);for(i=a+1;i<r.children.length&&(o=r.getChildAt(i)).get("type")==n;i++)o.set("type",t);for(i=a-1;i>=0&&(o=r.getChildAt(i)).get("type")==n;i--)o.set("type",t)}this.restoreCaretState()}else console.warn("Cannot change type to "+t+": No content item selected")},collapseSpaces:function(t){for(var e=t.cloneNode(!0),n=this.getTextNodes(e),i=0;i<n.length;i++){var o=n[i];if(o.textContent=o.textContent.replace(/&nbsp;/g," "),o.textContent=o.textContent.replace(/\s{2,}/g," "),o.textContent=o.textContent.replace(/[\u2028\u2029]/g,""),0==i&&(o.textContent=o.textContent.replace(/\s*/,"")),i==n.length-1&&(o.textContent=o.textContent.replace(/\s*$/,"")),i>=1){var r=n[i-1].textContent;r.lastIndexOf(" ")==r.length-1&&(o.textContent=o.textContent.replace(/\s*/,""))}}return e},getTextNodes:function(t){var e=[];if(3==t.nodeType)return[t];for(var n=t.childNodes,i=0;i<n.length;i++)e=e.concat(this.getTextNodes(n[i]));return e},adjustVisuals:function(){this.isAdjustVisualsEnabled()&&this._throttledAdjustVisuals()},immediateAdjustVisuals:function(){this.isAdjustVisualsEnabled()&&(h.articleView.beforeAdjustVisuals(),h.isAdjustingVisuals=!0,r.publicationViewer.adjustVisuals(),h.isAdjustingVisuals=!1,h.articleView.afterAdjustVisuals(),r.publicationViewer.splashLock&&(r.publicationViewer.hideSplash(),r.publicationViewer.splashLock||this.initializeView()))},saveScroll:function(t){this._throttledSaveScroll(t)},immediateSaveScroll:function(t){var e=this.getSectionsArticleScroller().getCurrentScrollOffset();this.articleModel.set("scroll_position",e,t)},saveDocument:function(t){this.saveIsPending||i.toNative("save-pending"),this.saveIsPending=!0,t?this._debouncedSaveDocument():this._throttledSaveDocument()},immediateSaveDocument:function(){var e=this._nextSave;e.model=this.getSaveJSON(),this._initNextSave(),this.saveIsPending=!1,i.toNative("save",e),t(this).trigger("document-saved")},getSaveJSON:function(){return this.issueModel.toJSON({includeCID:!1})},_handleScrollSectionIntoView:function(e,n){if(!this.popupIsPresent()){var i=t(n.section);i.length&&this.getSectionsArticleScroller().scrollSectionIntoView(i,n)}},getSectionsArticleScroller:function(){return this._sectionsArticleScroller||(this._sectionsArticleScroller=new o.Widget.SectionsArticleScroller(this.$article)),this._sectionsArticleScroller},_handleShowAttribution:function(t,e,n,i){this.lastPopupMessage=new h.NativePopupBalloon("display-photo-attribution",e,{path:n.get("image_url"),uuid:n.get("id"),license:n.get("license"),source:this.getSourceStrForAttrib(i)}),this.lastPopupMessage.updateNative()},_handleShowLinkEdit:function(t,e,n,i,o,r){var a=this.linkAlignCSS.getValue(o);this.lastPopupMessage=new h.NativePopupBalloon("display-link-dialog",e,{text:n,href:i,alignment:a,source:r.cid,embedded:r.settings.get("embedded")}),this.lastPopupMessage.updateNative()},_handleShowNativePopup:function(t,e,n,i){this.lastPopupMessage=new h.NativePopupBalloon("display-popup",e,{title:n,content:i}),this.lastPopupMessage.updateNative()},_handleShowNativeImagePicker:function(t,e,n){this.showImagePickerForSelection(n)},_handleHideNativeImagePicker:function(t,e,n){i.toNative("hide-picker")},_handleStopScrollTracker:function(){var t=this.$article.data("animator").tracker;t.blockDelegates(),t._stopTracking()},_handleNativeInsertLink:function(t){if(this.issueModel){var n=t.source,i=this.issueModel.findByCid(n);if(i){i.set(e.pick(t,"text","href"));var o=this.linkAlignCSS.getStyle(t.alignment);i.settings.set("link_align",o)}else console.warn("Could not find link button for updating associated with cid: "+n)}this.clearLastPopup()},_handleNativeGetURLInfo:function(t){return LucaJSONParser.getURLInfo(t.url)},_getElBounds:function(t){var e=t.getBoundingClientRect();return{x:e.left+e.width/2,y:e.top+e.height/2,left:e.left,top:e.top,width:e.width,height:e.height}},_setFocus:function(e,n){var i=t("#"+e.cid);(i.focus(),void 0!==n)&&i.closest(".content-item").data("view").editableRegionView.setCaretPosition(n)},_onNativeGetModel:function(t){return{model:this.getSaveJSON()}},fireCaretChangedEvent:function(t){this.isMobile||(t=t||{},i.toNative({event:"caret-changed",params:{reason:t.reason,sourceEvent:t.sourceEvent,caretMetrics:h.getSelectionMetrics()}}))},_handleCaretChange:function(t){h.fireCaretChangedEvent(t.detail);var n=document.queryCommandState("bold"),o=document.queryCommandState("italic"),r="",a=h.findClosestNodeOfType(window.getSelection().anchorNode,"A","editable-region"),s=h.findClosestNodeOfType(window.getSelection().focusNode,"A","editable-region");a&&a===s&&(r=a.getAttribute("href"));var l=h.selectionManager.getSelection().selection;h.lastTextAttributeChangedParams=h.lastTextAttributeChangedParams||{};var c={};h.contentItemSupportsMarkups(l)&&(c={bold:n+"",italic:o+"",anchor:r}),!1===e.isEqual(c,h.lastTextAttributeChangedParams)&&(i.toNative({event:"text-attribute-changed",params:c}),h.lastTextAttributeChangedParams=c),h.convertScrollOffsetsToAnimatorPosition()},findClosestNodeOfType:function(t,e,n){for(e=(e||"").toUpperCase();t;){if(t.nodeType==Node.ELEMENT_NODE){if(n&&t.classList.contains(n))return null;if(t.nodeName.toUpperCase()==e)return t}t=t.parentNode}return null},_handleSelectionChange:function(t,e,r,a){if(a||(a={}),this.articleView)if(!1===e.balloons)this.articleView.balloons.hideAll();else if(!e.selection){var s=!1;"PANEL"!==e.target&&(s=this.checkNeedsTitleBalloon()),s||this.articleView.balloons.hideAll()}if(e.selection!==r.selection||e.action!==r.action||e.type!==r.type||e.target!==r.target){var l=e.selection instanceof n.Model&&e.selection;if(!e.selection||!this.isTextSelection()){var c=window.getSelection?window.getSelection():document.selection;c&&!o.isIE&&(c.removeAllRanges?c.removeAllRanges():c.empty&&c.empty());var u=document.activeElement;u&&u.blur&&u.blur()}if("update"===e.action)switch(e.type){case"img":case"photo-grid":case"a":"function"==typeof e.target.scrollSectionIntoView&&e.target.scrollSectionIntoView()}a.keepNativeUI||i.toNative("hide-picker");var h=e.type;h||(h="none",l&&(h=l.get("type")));var d={contentType:h,alignment:"none"};if(l&&l.settings){var f=l.settings.get("text_align");f&&(d.alignment=this.textAlignCSS.getValue(f))}"caption"===h&&(d.showModifiers=this.contentItemSupportsMarkups(e.selection)+""),i.toNative({event:"contentType-change",params:d})}},_encodeImageSourceData:function(t){if(!t)return t;var e=JSON.stringify(t);return e=encodeURIComponent(e)},_decodeImageSourceData:function(t){var e=decodeURIComponent(t);return JSON.parse(e)},showImagePickerForSelection:function(t){var e=this.selectionManager.getSelection();if("img"===e.type){var n="",o=e.selection;if(o&&"insert"!==e.action&&"insertSlides"!==e.action&&"insertGridImage"!==e.action&&o instanceof h.ContentItemModel){var r=o.getImage();r&&(n=r.get("id")||"")}var a={uuid:n,source:this.getSourceStrForSelection(),maxDimension:h.getInlineSizeForDevice(),multiSelect:this.canInsertMultipleImages()||!1,detectFaces:!0};i.toNative("image-request",a),t&&t.hideBalloons&&this.articleView.balloons.hideAll()}},canInsertMultipleImages:function(){var t=this.selectionManager.getSelection();if("update"!=t.action){var e=t.selection,n=e.get("type");if(!(e instanceof h.SectionModel)||!0!=={title:!0,"split-layout":!0}[n]||"insertSection"===t.action)return!0}return!1},getSourceStrForAttrib:function(t){return this.getSourceStrForModel("update",t)},getSourceStrForSelection:function(){var t=this.selectionManager.getSelection(),e={type:t.pickerType||"model",action:t.action,cid:t.selection&&t.selection.cid};return this.getSourceStr(e)},getSourceStr:function(t){var n={type:"model",action:"update",cid:""};if(t){var i=e.pick(t,e.keys(n));n=e.extend(n,i)}return this._encodeImageSourceData(n)},getSourceStrForModel:function(t,e,n){var i={type:n||"model",action:t,cid:e&&e.cid};return this.getSourceStr(i)},_handleArticleScroll:function(t,e){this.articleView&&this.articleView.balloons.render(),this.getSectionsArticleScroller().isScrolling||!0===h.isAdjustingVisuals||e.resizing||!0===h.isPasting||!this.selectionManager.hasSelection()||this.selectionManager.selectNone()},hasSelection:function(){return this.selectionManager.hasSelection()},isTextSelection:function(){switch(this.selectionManager.getSelection().type){case"img":case"a":case"PENDING":case"photo-grid":case"card-flipbook":case void 0:return!1}return!0},_handleArticleStartScroll:function(t,e){h.isAdjustingVisuals||1===e.resizing||this.selectionManager.getSelection().selection||this.checkNeedsTitleBalloon()},_handleArticleEndScroll:function(t,e){if(!this.selectionManager.hasSelection()&&!h.isAdjustingVisuals&&!this.getSectionsArticleScroller().isScrolling){var n=this.$article.find(".section").last().data("view");if(n instanceof h.SingleColumnSectionView){var i=n.$(".content-item").last().data("view");i&&(n=i.isListItem()?i.listView:i)}var o=n&&n.insertBalloon;o&&o.isHidden()&&(o.show(!1),n.$el.trigger("select",[n,{selection:"PENDING"},{keepNativeUI:!0}]))}},_handleArticleResize:function(t,e){this.updateOrientationMarker(),this.updatePopupLocations(),this.$article.find(".section").trigger("article-resize")}}),o.widget("Widget.ScrollAnimator",o.Widget,{defaultOptions:{scrollDuration:200,easing:"easeOutQuad",complete:null},_attachBehavior:function(){var e=this;this.isScrolling=!1,this.scrollStart={left:0,top:0},this.scrollEnd={left:0,top:0},this.animator=new o.Animator(function(t){e._handleScrollUpdate(t)},{duration:e.options.scrollDuration,easingFunc:t.easing[e.options.easing],complete:function(){e._handleComplete()}})},_destroy:function(){this.animator=null},_getScrollOffset:function(){var t=this.$element[0];return{left:t&&t.scrollLeft||0,top:t&&t.scrollTop||0}},getScrollOffset:function(){return this._getScrollOffset()},_scrollTo:function(t,e){var n=this.$element[0];n&&(n.scrollLeft=t,n.scrollTop=e)},_handleScrollUpdate:function(t){var e=this.scrollStart,n=this.scrollEnd;this._scrollTo(e.left+(n.left-e.left)*t,e.top+(n.top-e.top)*t)},_handleComplete:function(){this.isScrolling=!1,this.complete&&this.complete()},scrollTo:function(t,e,n){n=n||{};var i=this._getScrollOffset();n.relative&&(t+=i.left,e+=i.top),this.animator.stop(),this.complete=n.complete,this.isScrolling=!0,!1===n.animate?(this._scrollTo(t,e),this._handleComplete()):t!=i.left||e!=i.top?(this.scrollStart=i,this.scrollEnd={left:t,top:e},this.animator.start()):this._handleComplete()}}),o.widget("Widget.HorizontalScrollAnimator",o.Widget.ScrollAnimator,{getScrollOffset:function(){return this._getScrollOffset().left},scrollTo:function(t,e){return o.Widget.ScrollAnimator.prototype.scrollTo.call(this,t,0,e)}}),o.widget("Widget.VerticalScrollAnimator",o.Widget.ScrollAnimator,{getScrollOffset:function(){return this._getScrollOffset().top},scrollTo:function(t,e){return o.Widget.ScrollAnimator.prototype.scrollTo.call(this,0,t,e)}}),r.ImageViewer.disable();var h=window.App=new u;return t(document.body).on("luca-publication-viewer-ready",function(t){try{h.initialize()}catch(t){h.error=t,h._reportAppException(s.getString("editor.dialogs.error-app.text-init"),t)}}),window.App}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(6),n(12)],void 0===(o=function(t,e,n){var i={inherit:function(e,n,i){var o=function(){};o.prototype=n.prototype,e.prototype=new o,e.prototype.constructor=e,e.prototype._super=n,i&&t.extend(e.prototype,i)},ensureArray:function(){var e=[],n=arguments.length;return n>0&&(e=n>1||!t.isArray(arguments[0])?t.map(arguments,function(t){return t}):arguments[0]),e},scopedFind:function(e,n,i,o){var r=" "+i+" ",a=[],s=t(e).find(n),l=s.length;o=t(o)[0];for(var c=0;c<l;c++)for(var u=s[c],h=u;h;){if(h.className&&-1!==(" "+h.className+" ").indexOf(r)){h===o&&a.push(u);break}h=h.parentNode}return t(a)},getDocumentOffset:function(e){var n=0,i=0;if(e=t(e)[0]){var o=e.offsetParent;for(n=e.offsetLeft,i=e.offsetTop;e;)e===o&&(n+=e.offsetLeft,i+=e.offsetTop,o=e.offsetParent),n-=e.scrollLeft||0,i-=e.scrollTop||0,e=e.parentNode}return{left:n,top:i}},getAlignmentAdjustment:function(t,e,n){var i=0;switch(t){case"left":case"top":i=0;break;case"right":case"bottom":i=e-n;break;case"center":default:i=(e-n)/2}return i},positionElementAroundAnother:function(e,n,i){i=t.extend({position:"right",positionOffset:0,align:"center",alignOffset:0},i);var o=t(e),r=t(n),a=r.offsetParent();r.removeClass("above below left right");var s=o.offset(),l=o.outerWidth(),c=o.outerHeight(),u=a.offset(),h=r.outerWidth(),d=r.outerHeight(),f=i.positionOffset,p=i.align,g=i.alignOffset,m=s.left-u.left,v=s.top-u.top;switch(i.position){case"above":m=m+this.getAlignmentAdjustment(p,l,h)+g,v=v-d-f;break;case"below":m=m+this.getAlignmentAdjustment(p,l,h)+g,v=v+c+f;break;case"left":m=m-h-f,v=v+this.getAlignmentAdjustment(p,c,d)+g;break;case"right":default:m=m+l+f,v=v+this.getAlignmentAdjustment(p,c,d)+g}return{x:m,y:v}},positionElementInsideAnother:function(e,n,i,o){var r=t(e),a=t(n),s=a.offsetParent(),l=r.offset(),c=s.offset(),u=l.left-c.left,h=l.top-c.top;switch(i){case"left":case"center":case"right":i=u+this.getAlignmentAdjustment(i,r.outerWidth(),a.outerWidth());break;default:i=i||0}switch(o){case"top":case"center":case"bottom":o=h+this.getAlignmentAdjustment(o,r.outerHeight(),a.outerHeight());break;default:o=o||0}return{x:i,y:o}},calcTotalWidthOfObjects:function(e){var n=0;for(var i in e)n+=t(e[i]).outerWidth();return n},setElementTransform:function(e,i){t(e).css(n.vendorPrefix+"transform",i)},instantTransform:function(e,n,i){var o=t(e);o.addClass(i),this.setElementTransform(e,n),setTimeout(function(){o.removeClass(i)},0)},parseQueryParams:function(t){var e=/([^\?#]+)?(\?([^#]*))?(#.*)?/.exec(t||""),n={};if(e&&e[3])for(var i=e[3].split("&"),o=0;o<i.length;o++){var r=(i[o]||"").split("=");n[decodeURIComponent(r[0]||"")]=decodeURIComponent(r[1]||"")}return n},serializeQueryParams:function(t){var e="";if(t)for(var n in t)e&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]);return e},setQueryParams:function(t,e){var n=this.serializeQueryParams(e);return n=(n?"?":"")+n,t.replace(/([^\?#]+)?(\?[^#]*)?(#.*)?/,"$1"+n+"$3")},setQueryParam:function(t,e,n){if(e){var i=this.parseQueryParams(t);return i[e]=n,this.setQueryParams(t,i)}return t}};return e.Utils=i,t.extend(e,i),i}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(6),n(8),n(19)],void 0===(o=function(t,e,n,i){function o(){i.call(this),this._initialize.apply(this,arguments)}return n.inherit(o,i),t.extend(o.prototype,{defaultOptions:{},_widgetName:"Widget",_initialize:function(){var e;this.plugins=[],this.trigger("before-setup").isDefaultPrevented()||(e=this._setUp.apply(this,arguments),this.trigger("setup")),this.trigger("before-init-plugins").isDefaultPrevented()||(this._initializePlugins(e),this.trigger("init-plugins")),this.options=t.extend({},this.defaultOptions,e),this.trigger("before-extract-data").isDefaultPrevented()||(this._extractData(),this.trigger("extract-data")),this.trigger("before-transform-markup").isDefaultPrevented()||(this._transformMarkup(),this.trigger("transform-markup")),this.trigger("before-attach-behavior").isDefaultPrevented()||(this._attachBehavior(),this.trigger("attach-behavior")),this.trigger("before-ready").isDefaultPrevented()||(this._ready(),this.trigger("ready"))},_setUp:function(e,n){return this.$element=t(e),n},_initializePlugins:function(t){var e=((void 0===(t=t||{}).useDefaultPlugins||t.useDefaultPlugins)&&this.defaultPlugins?this.defaultPlugins:[]).concat(t.plugins||[]);e=e.sort(function(t,e){return(t="number"==typeof t.priority?t.priority:50)-(e="number"==typeof e.priority?e.priority:50)});for(var n=0;n<e.length;n++){var i=e[n];i&&i.initialize&&i.initialize(this,t)}this.plugins=e},_extractData:function(){},_transformMarkup:function(){},_attachBehavior:function(){},_ready:function(){}}),o.registry={},o.build=function(e,i,r){var a=r&&i||o,s=r||i||{},l=function(){a.apply(this,arguments),this._widgetName=e};n.inherit(l,a),t.extend(l.prototype,s),l.prototype.defaultOptions=t.extend({},a.prototype.defaultOptions,s.defaultOptions);var c=e.split("."),u=c.length;u>1&&c[0];return o[e=c[u-1]]=l,l},o.addWidgetConstructorAsjQueryPlugin=function(e,n){t.fn[e]=function(i){var o="string"==typeof arguments[0],r=o?arguments[0]:"",a=o?Array.prototype.slice.call(arguments,1):null;return this.each(function(){if(o){var s=t(this).data(e);s&&s[r]&&s[r].apply(s,a)}else t(this).data(e,new n(this,i))}),this}},o.addMultiElementWidgetConstructorAsjQueryPlugin=function(e,n){t.fn[e]=function(i){var o="string"==typeof arguments[0],r=o?arguments[0]:"",a=o?Array.prototype.slice.call(arguments,1):null;if(this.length)if(o){(s=this.eq(0).data(e))&&s[r]&&s[r].apply(s,a)}else{var s=new n(this,i);this.each(function(){t(this).data(e,s)})}return this}},e.Widget=o,e.widget=o.build,e.addWidgetConstructorAsjQueryPlugin=o.addWidgetConstructorAsjQueryPlugin,e.addMultiElementWidgetConstructorAsjQueryPlugin=o.addMultiElementWidgetConstructorAsjQueryPlugin,o}.apply(e,i))||(t.exports=o)},function(t,e,n){(function(i){var o,r;!function(a){var s="object"==typeof self&&self.self==self&&self||"object"==typeof i&&i.global==i&&i;o=[n(127),n(0),e],void 0===(r=function(t,e,n){s.Backbone=function(t,e,n,i){var o=t.Backbone,r=Array.prototype.slice;e.VERSION="1.2.3",e.$=i,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,i){n.each(e,function(e,o){n[o]&&(t.prototype[o]=function(t,e,i){switch(t){case 1:return function(){return n[e](this[i])};case 2:return function(t){return n[e](this[i],t)};case 3:return function(t,o){return n[e](this[i],s(t,this),o)};case 4:return function(t,o,r){return n[e](this[i],s(t,this),o,r)};default:return function(){var t=r.call(arguments);return t.unshift(this[i]),n[e].apply(n,t)}}}(e,o,i))})},s=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?l(t):n.isString(t)?function(e){return e.get(t)}:t},l=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},c=e.Events={},u=/\s+/,h=function(t,e,i,o,r){var a,s=0;if(i&&"object"==typeof i){void 0!==o&&"context"in r&&void 0===r.context&&(r.context=o);for(a=n.keys(i);s<a.length;s++)e=h(t,e,a[s],i[a[s]],r)}else if(i&&u.test(i))for(a=i.split(u);s<a.length;s++)e=t(e,a[s],o,r);else e=t(e,i,o,r);return e};c.on=function(t,e,n){return d(this,t,e,n)};var d=function(t,e,n,i,o){if(t._events=h(f,t._events||{},e,n,{context:i,ctx:t,listening:o}),o){var r=t._listeners||(t._listeners={});r[o.id]=o}return t};c.listenTo=function(t,e,i){if(!t)return this;var o=t._listenId||(t._listenId=n.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),a=r[o];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=r[o]={obj:t,objId:o,id:s,listeningTo:r,count:0}}return d(t,e,i,this,a),this};var f=function(t,e,n,i){if(n){var o=t[e]||(t[e]=[]),r=i.context,a=i.ctx,s=i.listening;s&&s.count++,o.push({callback:n,context:r,ctx:r||a,listening:s})}return t};c.off=function(t,e,n){return this._events?(this._events=h(p,this._events,t,e,{context:n,listeners:this._listeners}),this):this},c.stopListening=function(t,e,i){var o=this._listeningTo;if(!o)return this;for(var r=t?[t._listenId]:n.keys(o),a=0;a<r.length;a++){var s=o[r[a]];if(!s)break;s.obj.off(e,i,this)}return n.isEmpty(o)&&(this._listeningTo=void 0),this};var p=function(t,e,i,o){if(t){var r,a=0,s=o.context,l=o.listeners;if(e||i||s){for(var c=e?[e]:n.keys(t);a<c.length;a++){e=c[a];var u=t[e];if(!u)break;for(var h=[],d=0;d<u.length;d++){var f=u[d];i&&i!==f.callback&&i!==f.callback._callback||s&&s!==f.context?h.push(f):(r=f.listening)&&0==--r.count&&(delete l[r.id],delete r.listeningTo[r.objId])}h.length?t[e]=h:delete t[e]}return n.size(t)?t:void 0}for(var p=n.keys(l);a<p.length;a++)r=l[p[a]],delete l[r.id],delete r.listeningTo[r.objId]}};c.once=function(t,e,i){var o=h(g,{},t,e,n.bind(this.off,this));return this.on(o,void 0,i)},c.listenToOnce=function(t,e,i){var o=h(g,{},e,i,n.bind(this.stopListening,this,t));return this.listenTo(t,o)};var g=function(t,e,i,o){if(i){var r=t[e]=n.once(function(){o(e,r),i.apply(this,arguments)});r._callback=i}return t};c.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return h(m,this._events,t,void 0,n),this};var m=function(t,e,n,i){if(t){var o=t[e],r=t.all;o&&r&&(r=r.slice()),o&&v(o,i),r&&v(r,[e].concat(i))}return t},v=function(t,e){var n,i=-1,o=t.length,r=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,a);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,a,s);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e);return}};c.bind=c.on,c.unbind=c.off,n.extend(e,c);var _=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(_.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var o;if("object"==typeof t?(o=t,i=e):(o={})[t]=e,i||(i={}),!this._validate(o,i))return!1;var r=i.unset,a=i.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,h=this._previousAttributes;for(var d in o)e=o[d],n.isEqual(c[d],e)||s.push(d),n.isEqual(h[d],e)?delete u[d]:u[d]=e,r?delete c[d]:c[d]=e;if(this.id=this.get(this.idAttribute),!a){s.length&&(this._pending=i);for(var f=0;f<s.length;f++)this.trigger("change:"+s[f],this,c[s[f]],i)}if(l)return this;if(!a)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,i={};for(var o in t){var r=t[o];n.isEqual(e[o],r)||(i[o]=r)}return!!n.size(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){var e=this,i=(t=n.extend({parse:!0},t)).success;return t.success=function(n){var o=t.parse?e.parse(n,t):n;if(!e.set(o,t))return!1;i&&i.call(t.context,e,n,t),e.trigger("sync",e,n,t)},H(this,t),this.sync("read",this,t)},save:function(t,e,i){var o;null==t||"object"==typeof t?(o=t,i=e):(o={})[t]=e;var r=(i=n.extend({validate:!0,parse:!0},i)).wait;if(o&&!r){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;var a=this,s=i.success,l=this.attributes;i.success=function(t){a.attributes=l;var e=i.parse?a.parse(t,i):t;if(r&&(e=n.extend({},o,e)),e&&!a.set(e,i))return!1;s&&s.call(i.context,a,t,i),a.trigger("sync",a,t,i)},H(this,i),o&&r&&(this.attributes=n.extend({},l,o));var c=this.isNew()?"create":i.patch?"patch":"update";"patch"!==c||i.attrs||(i.attrs=o);var u=this.sync(c,this,i);return this.attributes=l,u},destroy:function(t){var e=this,i=(t=t?n.clone(t):{}).success,o=t.wait,r=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){o&&r(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var a=!1;return this.isNew()?n.defer(t.success):(H(this,t),a=this.sync("delete",this,t)),o||r(),a},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||N();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}}),a(_,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var y=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1},S=function(t,e,n){n=Math.min(Math.max(n,0),t.length);for(var i=Array(t.length-n),o=e.length,r=0;r<i.length;r++)i[r]=t[r+n];for(r=0;r<o;r++)t[r+n]=e[r];for(r=0;r<i.length;r++)t[r+o+n]=i[r]};n.extend(y.prototype,c,{model:_,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,w))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:n.clone(t);var o=this._removeModels(t,e);return!e.silent&&o&&this.trigger("update",this,e),i?o[0]:o},set:function(t,e){if(null!=t){(e=n.defaults({},e,b)).parse&&!this._isModel(t)&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?[t]:t.slice();var o=e.at;null!=o&&(o=+o),o<0&&(o+=this.length+1);for(var r,a=[],s=[],l=[],c={},u=e.add,h=e.merge,d=e.remove,f=!1,p=this.comparator&&null==o&&!1!==e.sort,g=n.isString(this.comparator)?this.comparator:null,m=0;m<t.length;m++){r=t[m];var v=this.get(r);if(v){if(h&&r!==v){var _=this._isModel(r)?r.attributes:r;e.parse&&(_=v.parse(_,e)),v.set(_,e),p&&!f&&(f=v.hasChanged(g))}c[v.cid]||(c[v.cid]=!0,a.push(v)),t[m]=v}else u&&(r=t[m]=this._prepareModel(r,e))&&(s.push(r),this._addReference(r,e),c[r.cid]=!0,a.push(r))}if(d){for(m=0;m<this.length;m++)r=this.models[m],c[r.cid]||l.push(r);l.length&&this._removeModels(l,e)}var y=!1,w=!p&&u&&d;if(a.length&&w?(y=this.length!=a.length||n.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,S(this.models,a,0),this.length=this.models.length):s.length&&(p&&(f=!0),S(this.models,s,null==o?this.length:o),this.length=this.models.length),f&&this.sort({silent:!0}),!e.silent){for(m=0;m<s.length;m++)null!=o&&(e.index=o+m),(r=s[m]).trigger("add",r,this,e);(f||y)&&this.trigger("sort",this,e),(s.length||l.length)&&this.trigger("update",this,e)}return i?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null!=t){var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]}},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===i||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,i=this;return t.success=function(n){var o=t.reset?"reset":"set";i[o](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},H(this,t),this.sync("read",this,t)},create:function(t,e){var i=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;i||this.add(t,e);var o=this,r=e.success;return e.success=function(t,e,n){i&&o.add(t,n),r&&r.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;(e=e?n.clone(e):{}).collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var o=this.get(t[i]);if(o){var r=this.indexOf(o);this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),n.push(o),this._removeReference(o,e)}}return!!n.length&&n},_isModel:function(t){return t instanceof _},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if("add"!==t&&"remove"!==t||n===this){if("destroy"===t&&this.remove(e,i),"change"===t){var o=this.modelId(e.previousAttributes()),r=this.modelId(e.attributes);o!==r&&(null!=o&&delete this._byId[o],null!=r&&(this._byId[r]=e))}this.trigger.apply(this,arguments)}}}),a(y,{forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3},"models");var x=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,T)),this._ensureElement(),this.initialize.apply(this,arguments)},C=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];n.extend(x.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var o=e.match(C);this.delegate(o[1],o[2],n.bind(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,o){var r=I[t];n.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(o.url||(a.url=n.result(i,"url")||N()),null!=o.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",o.emulateJSON&&(a.data._method=r);var s=o.beforeSend;o.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),s)return s.apply(this,arguments)}}"GET"===a.type||o.emulateJSON||(a.processData=!1);var l=o.error;o.error=function(t,e,n){o.textStatus=e,o.errorThrown=n,l&&l.call(o.context,t,e,n)};var c=o.xhr=e.ajax(n.extend(a,o));return i.trigger("request",i,c,o),c};var I={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,P=/(\(\?)?:\w+/g,E=/\*\w+/g,$=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,c,{initialize:function(){},route:function(t,i,o){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var r=this;return e.history.route(t,function(n){var a=r._extractParameters(t,n);!1!==r.execute(o,a,i)&&(r.trigger.apply(r,["route:"+i].concat(a)),r.trigger("route",i,a),e.history.trigger("route",r,i,a))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace($,"\\$&").replace(A,"(?:$1)?").replace(P,function(t,e){return e?t:"([^/?]+)"}).replace(E,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var D=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,B=/#.*$/;D.started=!1,n.extend(D.prototype,c,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(M,"")},start:function(t){if(D.started)throw new Error("Backbone.history has already been started");if(D.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(O,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,o=i.insertBefore(this.iframe,i.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!D.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;if(t=this.decodeFragment(t.replace(B,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new D;_.extend=y.extend=k.extend=x.extend=D.extend=function(t,e){var i,o=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)};n.extend(i,o,e);var r=function(){this.constructor=i};r.prototype=o.prototype,i.prototype=new r,t&&n.extend(i.prototype,t);return i.__super__=o.prototype,i};var N=function(){throw new Error('A "url" property or function must be specified')},H=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e}(s,n,t,e)}.apply(e,o))||(t.exports=r)}()}).call(this,n(17))},function(t,e,n){var i=n(93),o=n(22),r={assetsDict:{circle:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10"><circle cx="5" cy="5" r="5" fill="{{color}}"></circle></svg>',triangle:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="20" viewBox="0 0 12 20"><path style="fill:{{color}};" d="M 0 0 L 0 20 L 12 10 L 0 0 Z"/></svg>',"appreciate:filled":'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path style="fill:{{color}};" transform="translate(0 3)" d="M2.8,14.4C1.1,12.9,0,10.7,0,8.4c0-2.3,1-4.5,2.8-6C4.6,0.9,6.9,0,9.2,0c2.4,0,4.6,0.8,6.4,2.4c0.1,0.1,0.3,0.3,0.4,0.4c0.1-0.1,0.3-0.3,0.4-0.4C18.2,0.9,20.5,0,22.8,0c2.3,0,4.6,0.8,6.4,2.4C31,3.9,32,6.1,32,8.4c0,2.3-1,4.5-2.8,6L16,26"/></svg>',appreciate:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path style="fill:{{color}};" transform="translate(0 3)" d="M16,26L2.8,14.4C1.1,12.9,0,10.7,0,8.4c0-2.3,1-4.5,2.8-6C4.6,0.9,6.9,0,9.2,0c2.4,0,4.6,0.8,6.4,2.4c0.1,0.1,0.3,0.3,0.4,0.4c0.1-0.1,0.3-0.3,0.4-0.4C18.2,0.9,20.5,0,22.8,0c2.3,0,4.6,0.8,6.4,2.4C31,3.9,32,6.1,32,8.4c0,2.3-1,4.5-2.8,6L16,26z M9.2,4.7C8,4.7,6.9,5.2,6,5.9C5.3,6.5,4.8,7.4,4.8,8.4c0,1,0.5,1.9,1.2,2.5l10,8.8l10-8.8c0.7-0.6,1.2-1.5,1.2-2.5c0-1-0.5-1.9-1.2-2.5c-1.9-1.5-4.5-1.5-6.4,0c-0.7,0.6-1.2,1.5-1.2,2.5h-4.8c0-1-0.5-1.9-1.2-2.5C11.5,5.1,10.4,4.7,9.2,4.7z"/></svg>',"nightcap:linkbutton":'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="11.006" viewBox="0 0 6 11.006"><path style="fill:{{color}};" d="M6,5.503l-6,5.503V0L6,5.503z"/></svg>',"vintage:unorderedlist":'<svg xmlns="http://www.w3.org/2000/svg" width="181" height="181" viewBox="0 0 181 181"><path style="fill:{{color}};" d="M 172 90 C 112 109 27 126 2 181 C 1 180 1 178 1 159 C 4 137 9 104 39 91 C 39 91 39 90 38 89 C 17 86 1 38 1 22 C 1 22 1 1 1 1 C 38 62 127 73 172 90 Z"/></svg>',"luca:blockquote":'<svg xmlns="http://www.w3.org/2000/svg" width="150" height="125.2" viewBox="0 0 150 125.2"><path style="fill:{{color}};" d="M111.2,30.2c-7.738,7.6-11.6,16.2-11.6,25.8c0,4.269,0.662,7.737,2,10.4c1.331,2.669,2.662,4.669,4,6c2.4-1.6,5.062-2.663,8-3.2c2.931-0.531,5.863-0.8,8.8-0.8c2.931,0,6,0.537,9.2,1.6c3.2,1.069,6.131,2.737,8.8,5c2.663,2.269,4.931,5.2,6.8,8.8c1.862,3.6,2.8,7.938,2.8,13c0,5.069-0.938,9.4-2.8,13c-1.869,3.6-4.269,6.537-7.2,8.8c-2.938,2.269-6.2,3.938-9.8,5c-3.6,1.069-7.137,1.6-10.6,1.6c-10.138,0-18.8-4.131-26-12.4c-7.2-8.262-10.8-20-10.8-35.2c0-10.4,1.931-19.6,5.8-27.6c3.863-8,8.6-15.062,14.2-21.2c5.6-6.131,11.731-11.531,18.4-16.2C127.862,7.938,134,3.737,139.6,0l2.8,5.2C129.331,14.269,118.931,22.6,111.2,30.2z M28.4,30.2C20.663,37.8,16.8,46.4,16.8,56c0,4.269,0.662,7.737,2,10.4c1.331,2.669,2.663,4.669,4,6c2.4-1.6,5.063-2.663,8-3.2c2.931-0.531,5.862-0.8,8.8-0.8c2.931,0,6,0.537,9.2,1.6c3.2,1.069,6.131,2.737,8.8,5c2.662,2.269,4.931,5.2,6.8,8.8c1.863,3.6,2.8,7.938,2.8,13c0,5.069-0.937,9.4-2.8,13c-1.869,3.6-4.269,6.537-7.2,8.8c-2.938,2.269-6.2,3.938-9.8,5c-3.6,1.069-7.137,1.6-10.6,1.6c-10.138,0-18.8-4.131-26-12.4C3.6,104.537,0,92.8,0,77.6C0,67.2,1.931,58,5.8,50c3.862-8,8.6-15.062,14.2-21.2c5.6-6.131,11.731-11.531,18.4-16.2C45.063,7.938,51.2,3.737,56.8,0l2.8,5.2C46.531,14.269,36.131,22.6,28.4,30.2z"/></svg>',"whimsy:heading":'<svg xmlns="http://www.w3.org/2000/svg" width="539.347" height="22.027" viewBox="0 0 539.347 22.027"><path style="fill:{{color}};" d="M225.718,13.662L225.718,13.662c0.99,0,1.98,0,2.772,0c1.386,0,2.772,0,4.158-0.198c0.594-0.198,1.188-0.99,1.386-1.584c0.198-0.198-0.594-0.99-0.99-1.386c-0.792-0.198-1.584-0.198-2.376-0.396c-3.168,0-6.336,0.198-9.504,0c-1.98,0-4.158,0-6.138-0.198c-2.772-0.198-5.544-0.594-8.514-0.594c-4.95,0-9.9,0.198-14.85,0.198c-2.772,0.198-5.544,0.198-8.514,0.198c-4.554,0.198-9.306,0.792-14.058,0.594c-2.574-0.198-4.95,0-7.524,0.198c-3.168,0.198-6.534,0.198-9.702,0.396c-1.188,0-2.574,0.198-3.762,0.198c-4.554-0.396-9.306-0.792-13.86-0.792c-8.316-0.198-16.434-0.198-24.552-0.198c-3.564,0-6.93,0.396-10.296,0.396c-5.94,0.198-11.88-0.396-18.018,0.396c-0.198,0-0.594,0-0.792,0c-1.782-0.198-3.564-0.198-5.148-0.198c-2.574,0-4.95,0.198-7.524,0.198c-0.99,0-1.98-0.198-2.97-0.198c-3.762,0-7.524,0-11.484,0.198c-3.168,0.198-6.534,0.396-9.702,0.396c-2.178,0.198-4.158,0.198-6.138-0.99c-0.99-0.594-2.376-0.99-3.564-1.188c-2.772-0.99-5.346-0.594-7.92,0.99c-1.98,1.188-3.564,4.158-0.99,6.732c0.198,0.396,0.594,0.594,1.188,0.99c2.376,1.386,4.95,1.584,7.722,1.386c2.376-0.198,4.554-1.188,5.94-3.366c0.792-0.99,1.782-1.584,3.168-1.386c4.158,0,8.514,0,12.672,0.198c4.356,0,8.712,0.396,13.068,0.396c5.148-0.198,10.494-0.396,15.642-0.396c2.574-0.198,5.346-0.198,8.118-0.198c1.584,0,3.168,0.198,4.95,0.198c4.752,0,9.306,0.396,14.058,0c4.752-0.396,9.702-0.594,14.652,0c4.752,0.594,9.702,0.396,14.454,0.198c4.752-0.198,9.306-0.594,14.058-0.396c4.158,0,8.316-0.198,12.474-0.396c4.356,0,8.712,0,13.068,0c3.366,0,6.93-0.396,10.494-0.396c5.148,0,10.296,0.198,15.444,0.198c1.98,0.198,3.96-0.198,5.94-0.198C216.61,13.662,221.164,13.662,225.718,13.662z M268.683,0c-0.594,0.594-1.386,1.188-1.782,1.782c-0.99,1.188-1.782,2.178-2.574,3.366c-0.792,1.386-1.782,2.574-2.574,3.96c-0.99,1.584-0.792,2.376,0.198,3.762c0.396,0.396,0.792,0.792,0.99,1.188c0.792,1.188,1.584,2.178,2.376,3.366c0.99,1.188,2.178,2.376,3.168,3.564c0.99,1.386,1.584,1.386,2.574,0c1.98-2.574,3.96-5.148,5.94-7.722c1.584-1.782,1.584-1.584,0.396-3.564C275.217,5.94,272.049,3.168,268.683,0z M253.041,12.87c0.198-3.366-1.386-6.534-3.564-7.92c-1.98-1.188-2.97-1.188-4.752,0c-1.782,0.99-2.376,2.376-3.168,4.158c-0.99,2.772-0.594,5.346,0.792,7.722c1.386,2.97,5.148,4.752,8.316,1.386C252.249,16.632,253.041,14.652,253.041,12.87z M297.591,12.87c0-3.366-1.584-6.534-3.762-7.92c-1.782-1.188-2.97-1.188-4.752,0c-1.782,0.99-2.376,2.376-3.168,4.158c-0.792,2.772-0.594,5.346,0.792,7.722c1.386,2.97,5.148,4.752,8.316,1.386C296.601,16.632,297.393,14.652,297.591,12.87z M19.404,13.464c-1.98-1.188-3.762-2.178-5.346-3.366c-1.782-1.386-3.762-1.584-5.742-2.178C7.92,7.722,7.326,8.118,6.732,8.514c-1.584,0.99-3.168,1.98-4.752,2.97C1.386,11.88,0.792,12.276,0,12.672c0.198,0.594,0.396,0.99,0.594,1.188c1.782,1.584,3.564,3.366,5.544,4.554c1.386,0.792,3.168,1.386,4.95,0.396c1.584-0.99,3.366-1.782,4.95-2.376C17.424,15.84,18.612,15.048,19.404,13.464z M313.827,13.662c4.356,0,8.91,0,13.464,0c1.98,0,3.96,0.396,5.94,0.198c5.148,0,10.296-0.198,15.444-0.198c3.564,0,6.93,0.396,10.494,0.396c4.356,0,8.712,0,12.87,0c4.158,0.198,8.514,0.396,12.672,0.396c4.752-0.198,9.306,0.198,13.86,0.396c4.95,0.198,9.702,0.396,14.652-0.198c4.752-0.594,9.702-0.396,14.652,0c4.554,0.396,9.306,0,14.058,0c1.584,0,3.366-0.198,4.95-0.198c2.772,0,5.346,0,8.118,0.198c5.148,0,10.296,0.198,15.444,0.396c4.356,0,8.712-0.396,13.068-0.396c4.356-0.198,8.514-0.198,12.87-0.198c1.386-0.198,2.376,0.396,3.168,1.386c1.386,2.178,3.366,3.168,5.742,3.366c2.772,0.198,5.544,0,7.92-1.386c0.396-0.396,0.792-0.594,1.188-0.99c2.376-2.574,0.792-5.544-1.188-6.732c-2.376-1.584-4.95-1.98-7.92-0.99c-1.188,0.198-2.376,0.594-3.366,1.188c-1.98,1.188-4.158,1.188-6.138,0.99c-3.366,0-6.534-0.198-9.9-0.396c-3.762-0.198-7.524-0.198-11.286-0.198c-0.99,0-2.178,0.198-3.168,0.198c-2.376,0-4.95-0.198-7.326-0.198c-1.782,0-3.564,0-5.148,0.198c-0.396,0-0.594,0-0.99,0c-5.94-0.792-11.88-0.198-17.82-0.396c-3.564,0-6.93-0.396-10.296-0.396c-8.118,0-16.434,0-24.552,0.198c-4.752,0-9.306,0.396-13.86,0.792c-1.386,0-2.574-0.198-3.762-0.198c-3.366-0.198-6.534-0.198-9.9-0.396c-2.376-0.198-4.95-0.396-7.326-0.198c-4.752,0.198-9.504-0.396-14.256-0.594c-2.772,0-5.544,0-8.514-0.198c-4.95,0-9.9-0.198-14.85-0.198c-2.772,0-5.544,0.396-8.514,0.594c-1.98,0.198-3.96,0.198-6.138,0.198c-2.97,0.198-6.138,0-9.306,0c-0.792,0.198-1.584,0.198-2.376,0.396c-0.396,0.396-1.188,1.188-0.99,1.386c0,0.594,0.792,1.386,1.188,1.584c1.386,0.198,2.772,0.198,4.158,0.198C311.847,13.662,312.837,13.662,313.827,13.662L313.827,13.662z M519.943,13.464c0.99,1.584,2.178,2.376,3.366,2.97c1.782,0.594,3.366,1.386,4.95,2.376c1.782,0.99,3.564,0.396,4.95-0.396c2.178-1.188,3.762-2.97,5.742-4.554c0.198-0.198,0.198-0.594,0.396-1.188c-0.594-0.396-1.188-0.792-1.98-1.188c-1.584-0.99-3.168-1.98-4.752-2.97c-0.396-0.396-0.99-0.792-1.386-0.594c-1.98,0.594-3.96,0.792-5.742,2.178C523.903,11.286,521.923,12.276,519.943,13.464z"/></svg>',"whimsy:unorderedlist":'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="18" viewBox="0 0 15 18"><path fill="{{color}}" d="M 0 9 L 7 0 L 15 9 L 8 18 L 0 9 Z "/></svg>',"whimsy:blockquote":'<svg xmlns="http://www.w3.org/2000/svg" width="275" height="20.997" viewBox="0 0 275 20.997"><path fill="{{color}}" d="M273.108,11.152c-1,0.8-1.8,1.7-2.9,2.3c-0.7,0.4-1.6,0.7-2.5,0.2c-0.8-0.5-1.6-0.9-2.5-1.2 c-0.6-0.3-1.2-0.7-1.7-1.5c1-0.6,2-1.1,2.8-1.7c0.9-0.7,1.9-0.8,2.9-1.1c0.2-0.1,0.5,0.1,0.7,0.3c0.8,0.5,1.6,1,2.4,1.5 c0.4,0.2,0.7,0.4,1,0.6C273.208,10.852,273.208,11.052,273.108,11.152z M260.107,13.152c-1.2,0.7-2.6,0.8-4,0.7 c-1.2-0.1-2.2-0.6-2.9-1.7c-0.4-0.5-0.9-0.8-1.6-0.7c-2.2,0-4.3,0-6.5,0.1c-2.2,0-4.4,0.2-6.6,0.2c-2.6-0.1-5.2-0.2-7.801-0.2 c-1.4-0.1-2.7-0.1-4.1-0.1c-0.8,0-1.7,0.1-2.5,0.1c-2.4,0-4.8,0.2-7.1,0c-2.5-0.2-5-0.3-7.4,0c-2.5,0.3-4.9,0.2-7.4,0.1 c-2.3-0.1-4.6-0.3-7-0.2c-2.1,0-4.3-0.1-6.4-0.2c-2.1,0-4.3,0-6.5,0c-1.8,0-3.5-0.2-5.3-0.2c-2.6,0-5.2,0.1-7.801,0.1 c-1,0.1-2-0.1-3-0.1c-0.74,0-1.452,0-2.188,0V9.205c0.23-0.014,0.459-0.031,0.688-0.054c1.5-0.1,2.9-0.3,4.3-0.3 c2.5,0,5,0.1,7.5,0.1c1.5,0.1,2.9,0.1,4.3,0.1c2.4,0.1,4.8,0.4,7.2,0.3c1.2-0.1,2.5,0,3.7,0.1c1.7,0.1,3.3,0.1,5,0.2 c0.6,0,1.2,0.1,1.9,0.1c2.3-0.2,4.6-0.4,7-0.4c4.1-0.1,8.3-0.1,12.401-0.1c1.7,0,3.4,0.2,5.2,0.2c3,0.1,6-0.2,9.001,0.2 c0.2,0,0.3,0,0.5,0c0.8-0.1,1.7-0.1,2.6-0.1c1.2,0,2.5,0.1,3.7,0.1c0.5,0,1.1-0.1,1.6-0.1c1.9,0,3.8,0,5.7,0.1 c1.7,0.1,3.3,0.2,5,0.2c1,0.1,2.1,0.1,3.1-0.5c0.5-0.3,1.1-0.5,1.7-0.6c1.5-0.5,2.8-0.3,4,0.5c1,0.6,1.8,2.1,0.6,3.4 C260.508,12.852,260.307,12.952,260.107,13.152z"/><path fill="{{color}}" d="M0.199,11.141c0.998,0.83,1.795,1.764,2.893,2.387c0.698,0.415,1.596,0.727,2.494,0.208 c0.798-0.519,1.596-0.934,2.494-1.246c0.599-0.311,1.197-0.726,1.696-1.557C8.778,10.311,7.78,9.792,6.982,9.169 C6.085,8.443,5.087,8.339,4.09,8.028c-0.2-0.104-0.499,0.104-0.698,0.311C2.593,8.858,1.795,9.377,0.998,9.896 C0.599,10.103,0.299,10.311,0,10.518C0.1,10.83,0.1,11.037,0.199,11.141z M13.167,13.217c1.197,0.726,2.594,0.83,3.99,0.726 c1.197-0.104,2.194-0.623,2.893-1.764c0.399-0.519,0.898-0.83,1.596-0.727c2.194,0,4.289,0,6.484,0.104 c2.194,0,4.389,0.208,6.583,0.208c2.594-0.104,5.187-0.208,7.78-0.208c1.397-0.104,2.693-0.104,4.09-0.104 c0.798,0,1.696,0.104,2.494,0.104c2.394,0,4.788,0.208,7.082,0c2.494-0.208,4.987-0.311,7.381,0 c2.494,0.311,4.888,0.208,7.381,0.104c2.294-0.104,4.589-0.311,6.982-0.208c2.095,0,4.289-0.104,6.384-0.207 c2.095,0,4.289,0,6.484,0c1.795,0,3.491-0.208,5.287-0.208c2.593,0,5.187,0.104,7.78,0.104c0.997,0.104,1.995-0.104,2.992-0.104 c0.738,0,1.448,0,2.183,0V9.121c-0.23-0.014-0.458-0.032-0.686-0.056c-1.496-0.104-2.893-0.311-4.289-0.311 c-2.494,0-4.987,0.104-7.481,0.104c-1.496,0.104-2.893,0.104-4.289,0.104c-2.394,0.104-4.788,0.415-7.182,0.311 c-1.197-0.104-2.494,0-3.691,0.104c-1.696,0.104-3.292,0.104-4.987,0.208c-0.599,0-1.197,0.104-1.895,0.104 c-2.294-0.208-4.589-0.415-6.982-0.415c-4.09-0.104-8.279-0.104-12.369-0.104c-1.696,0-3.392,0.208-5.187,0.208 c-2.993,0.104-5.985-0.208-8.977,0.208c-0.2,0-0.299,0-0.499,0c-0.798-0.104-1.696-0.104-2.593-0.104 c-1.197,0-2.494,0.104-3.691,0.104c-0.499,0-1.097-0.104-1.596-0.104c-1.895,0-3.79,0-5.686,0.104 c-1.696,0.104-3.292,0.208-4.987,0.208c-0.998,0.104-2.095,0.104-3.092-0.519c-0.499-0.311-1.097-0.519-1.696-0.623 c-1.496-0.519-2.793-0.311-3.99,0.519c-0.997,0.623-1.795,2.18-0.599,3.529C12.768,12.906,12.967,13.009,13.167,13.217z"/><path fill="{{color}}" d="M124.026,12.755c0,1.867,0.622,3.54,1.867,5.019c1.244,1.48,2.84,2.22,4.788,2.22 c1.812,0,3.104-0.512,3.875-1.537c0.771-1.024,1.156-2.082,1.156-3.173c0-1.383-0.494-2.428-1.481-3.133 c-0.988-0.705-1.982-1.058-2.982-1.058c-0.136,0-1.082,0.094-2.84,0.279c-0.406,0-0.69-0.1-0.852-0.3 c-0.162-0.2-0.243-0.447-0.243-0.741c0-0.908,0.284-1.91,0.852-3.006c1.136-2.192,3.138-4.102,6.005-5.732l-0.771-1.597 c-2.327,1.04-4.47,2.713-6.431,5.019C125.006,7.323,124.026,9.903,124.026,12.755L124.026,12.755z"/><path fill="{{color}}" d="M138.337,12.755c0,1.867,0.622,3.54,1.867,5.019c1.244,1.48,2.84,2.22,4.788,2.22 c1.812,0,3.104-0.512,3.875-1.537c0.771-1.024,1.156-2.082,1.156-3.173c0-1.383-0.494-2.428-1.481-3.133 c-0.988-0.705-1.982-1.058-2.982-1.058c-0.136,0-1.082,0.094-2.84,0.279c-0.406,0-0.69-0.1-0.852-0.3 c-0.162-0.2-0.243-0.447-0.243-0.741c0-0.908,0.284-1.91,0.852-3.006c1.136-2.192,3.138-4.102,6.005-5.732l-0.771-1.597 c-2.327,1.04-4.47,2.713-6.431,5.019C139.317,7.323,138.337,9.903,138.337,12.755L138.337,12.755z"/></svg>',"whimsy:blockquote-end":'<svg xmlns="http://www.w3.org/2000/svg" width="275" height="19.997" viewBox="0 0 275 19.997"><path fill="{{color}}" d="M274.095,10.152c-1,0.8-1.8,1.7-2.9,2.3c-0.7,0.4-1.6,0.7-2.5,0.2c-0.8-0.5-1.6-0.9-2.5-1.2 c-0.6-0.3-1.2-0.7-1.7-1.5c1-0.6,2-1.1,2.8-1.7c0.9-0.7,1.9-0.8,2.9-1.1c0.2-0.1,0.5,0.1,0.7,0.3c0.8,0.5,1.6,1,2.4,1.5 c0.4,0.2,0.7,0.4,1,0.6C274.195,9.852,274.195,10.052,274.095,10.152z M261.094,12.152c-1.2,0.7-2.6,0.8-4,0.7 c-1.2-0.1-2.2-0.6-2.9-1.7c-0.4-0.5-0.9-0.8-1.6-0.7c-2.2,0-4.3,0-6.5,0.1c-2.2,0-4.4,0.2-6.6,0.2c-2.6-0.1-5.2-0.2-7.801-0.2 c-1.4-0.1-2.7-0.1-4.1-0.1c-0.8,0-1.7,0.1-2.5,0.1c-2.4,0-4.8,0.2-7.1,0c-2.5-0.2-5-0.3-7.4,0c-2.5,0.3-4.9,0.2-7.4,0.1 c-2.3-0.1-4.6-0.3-7-0.2c-2.1,0-4.3-0.1-6.4-0.2c-2.1,0-4.3,0-6.5,0c-1.8,0-3.5-0.2-5.3-0.2c-2.6,0-5.2,0.1-7.801,0.1 c-1,0.1-2-0.1-3-0.1c-0.74,0-1.452,0-2.188,0V8.205c0.23-0.014,0.459-0.031,0.688-0.054c1.5-0.1,2.9-0.3,4.3-0.3 c2.5,0,5,0.1,7.5,0.1c1.5,0.1,2.9,0.1,4.3,0.1c2.4,0.1,4.8,0.4,7.2,0.3c1.2-0.1,2.5,0,3.7,0.1c1.7,0.1,3.3,0.1,5,0.2 c0.6,0,1.2,0.1,1.9,0.1c2.3-0.2,4.6-0.4,7-0.4c4.1-0.1,8.3-0.1,12.401-0.1c1.7,0,3.4,0.2,5.2,0.2c3,0.1,6-0.2,9.001,0.2 c0.2,0,0.3,0,0.5,0c0.8-0.1,1.7-0.1,2.6-0.1c1.2,0,2.5,0.1,3.7,0.1c0.5,0,1.1-0.1,1.6-0.1c1.9,0,3.8,0,5.7,0.1 c1.7,0.1,3.3,0.2,5,0.2c1,0.1,2.1,0.1,3.1-0.5c0.5-0.3,1.1-0.5,1.7-0.6c1.5-0.5,2.8-0.3,4,0.5c1,0.6,1.8,2.1,0.6,3.4 C261.494,11.852,261.294,11.952,261.094,12.152z"/><path fill="{{color}}" d="M1.186,10.141c0.997,0.83,1.795,1.764,2.893,2.387c0.698,0.415,1.596,0.727,2.494,0.208 c0.798-0.519,1.596-0.934,2.494-1.246c0.599-0.311,1.197-0.726,1.696-1.557C9.764,9.311,8.767,8.792,7.969,8.169 c-0.898-0.727-1.895-0.83-2.893-1.142c-0.2-0.104-0.499,0.104-0.698,0.311C3.58,7.858,2.782,8.377,1.984,8.896 C1.585,9.103,1.286,9.311,0.986,9.518C1.086,9.83,1.086,10.037,1.186,10.141z M14.153,12.217c1.197,0.726,2.594,0.83,3.99,0.726 c1.197-0.104,2.194-0.623,2.893-1.764c0.399-0.519,0.898-0.83,1.596-0.727c2.194,0,4.289,0,6.484,0.104 c2.194,0,4.389,0.208,6.583,0.208c2.594-0.104,5.187-0.208,7.78-0.208c1.397-0.104,2.693-0.104,4.09-0.104 c0.798,0,1.696,0.104,2.494,0.104c2.394,0,4.788,0.208,7.082,0c2.494-0.208,4.987-0.311,7.381,0 c2.494,0.311,4.888,0.208,7.381,0.104c2.294-0.104,4.589-0.311,6.982-0.208c2.095,0,4.289-0.104,6.384-0.207 c2.095,0,4.289,0,6.484,0c1.795,0,3.491-0.208,5.287-0.208c2.593,0,5.187,0.104,7.78,0.104c0.997,0.104,1.995-0.104,2.992-0.104 c0.738,0,1.448,0,2.183,0V8.121c-0.23-0.014-0.458-0.032-0.686-0.056c-1.496-0.104-2.893-0.311-4.289-0.311 c-2.494,0-4.987,0.104-7.481,0.104c-1.496,0.104-2.893,0.104-4.289,0.104c-2.394,0.104-4.788,0.415-7.182,0.311 c-1.197-0.104-2.494,0-3.691,0.104c-1.696,0.104-3.292,0.104-4.987,0.208c-0.599,0-1.197,0.104-1.895,0.104 c-2.294-0.208-4.589-0.415-6.982-0.415c-4.09-0.104-8.279-0.104-12.369-0.104c-1.696,0-3.392,0.208-5.187,0.208 c-2.993,0.104-5.985-0.208-8.977,0.208c-0.2,0-0.299,0-0.499,0c-0.798-0.104-1.696-0.104-2.593-0.104 c-1.197,0-2.494,0.104-3.691,0.104c-0.499,0-1.097-0.104-1.596-0.104c-1.895,0-3.79,0-5.686,0.104 c-1.696,0.104-3.292,0.208-4.987,0.208c-0.997,0.104-2.095,0.104-3.092-0.519c-0.499-0.311-1.097-0.519-1.696-0.623 c-1.496-0.519-2.793-0.311-3.99,0.519c-0.998,0.623-1.795,2.18-0.599,3.529C13.754,11.906,13.954,12.009,14.153,12.217z"/><path fill="{{color}}" d="M151.009,7.239c0-1.867-0.622-3.54-1.867-5.019c-1.244-1.48-2.84-2.22-4.788-2.22 c-1.812,0-3.104,0.512-3.875,1.537c-0.771,1.024-1.156,2.082-1.156,3.173c0,1.383,0.494,2.428,1.481,3.133 c0.988,0.705,1.982,1.058,2.982,1.058c0.136,0,1.082-0.094,2.84-0.279c0.406,0,0.69,0.1,0.852,0.3 c0.162,0.199,0.243,0.446,0.243,0.741c0,0.908-0.284,1.91-0.852,3.006c-1.136,2.191-3.138,4.102-6.005,5.732l0.771,1.597 c2.327-1.04,4.47-2.713,6.431-5.019C150.028,12.672,151.009,10.091,151.009,7.239L151.009,7.239z"/><path fill="{{color}}" d="M136.698,7.239c0-1.867-0.622-3.54-1.867-5.019c-1.244-1.48-2.84-2.22-4.788-2.22 c-1.812,0-3.104,0.512-3.875,1.537c-0.771,1.024-1.156,2.082-1.156,3.173c0,1.383,0.494,2.428,1.481,3.133 c0.988,0.705,1.982,1.058,2.982,1.058c0.136,0,1.082-0.094,2.84-0.279c0.406,0,0.69,0.1,0.852,0.3 c0.162,0.199,0.243,0.446,0.243,0.741c0,0.908-0.284,1.91-0.852,3.006c-1.136,2.191-3.138,4.102-6.005,5.732l0.771,1.597 c2.327-1.04,4.47-2.713,6.431-5.019C135.718,12.672,136.698,10.091,136.698,7.239L136.698,7.239z"/></svg>',"whimsy:title":'<svg xmlns="http://www.w3.org/2000/svg" width="539.347" height="22.027" viewBox="0 0 539.347 22.027"><path style="fill:{{color}};" d="M225.718,13.662L225.718,13.662c0.99,0,1.98,0,2.772,0c1.386,0,2.772,0,4.158-0.198c0.594-0.198,1.188-0.99,1.386-1.584c0.198-0.198-0.594-0.99-0.99-1.386c-0.792-0.198-1.584-0.198-2.376-0.396c-3.168,0-6.336,0.198-9.504,0c-1.98,0-4.158,0-6.138-0.198c-2.772-0.198-5.544-0.594-8.514-0.594c-4.95,0-9.9,0.198-14.85,0.198c-2.772,0.198-5.544,0.198-8.514,0.198c-4.554,0.198-9.306,0.792-14.058,0.594c-2.574-0.198-4.95,0-7.524,0.198c-3.168,0.198-6.534,0.198-9.702,0.396c-1.188,0-2.574,0.198-3.762,0.198c-4.554-0.396-9.306-0.792-13.86-0.792c-8.316-0.198-16.434-0.198-24.552-0.198c-3.564,0-6.93,0.396-10.296,0.396c-5.94,0.198-11.88-0.396-18.018,0.396c-0.198,0-0.594,0-0.792,0c-1.782-0.198-3.564-0.198-5.148-0.198c-2.574,0-4.95,0.198-7.524,0.198c-0.99,0-1.98-0.198-2.97-0.198c-3.762,0-7.524,0-11.484,0.198c-3.168,0.198-6.534,0.396-9.702,0.396c-2.178,0.198-4.158,0.198-6.138-0.99c-0.99-0.594-2.376-0.99-3.564-1.188c-2.772-0.99-5.346-0.594-7.92,0.99c-1.98,1.188-3.564,4.158-0.99,6.732c0.198,0.396,0.594,0.594,1.188,0.99c2.376,1.386,4.95,1.584,7.722,1.386c2.376-0.198,4.554-1.188,5.94-3.366c0.792-0.99,1.782-1.584,3.168-1.386c4.158,0,8.514,0,12.672,0.198c4.356,0,8.712,0.396,13.068,0.396c5.148-0.198,10.494-0.396,15.642-0.396c2.574-0.198,5.346-0.198,8.118-0.198c1.584,0,3.168,0.198,4.95,0.198c4.752,0,9.306,0.396,14.058,0c4.752-0.396,9.702-0.594,14.652,0c4.752,0.594,9.702,0.396,14.454,0.198c4.752-0.198,9.306-0.594,14.058-0.396c4.158,0,8.316-0.198,12.474-0.396c4.356,0,8.712,0,13.068,0c3.366,0,6.93-0.396,10.494-0.396c5.148,0,10.296,0.198,15.444,0.198c1.98,0.198,3.96-0.198,5.94-0.198C216.61,13.662,221.164,13.662,225.718,13.662z M268.683,0c-0.594,0.594-1.386,1.188-1.782,1.782c-0.99,1.188-1.782,2.178-2.574,3.366c-0.792,1.386-1.782,2.574-2.574,3.96c-0.99,1.584-0.792,2.376,0.198,3.762c0.396,0.396,0.792,0.792,0.99,1.188c0.792,1.188,1.584,2.178,2.376,3.366c0.99,1.188,2.178,2.376,3.168,3.564c0.99,1.386,1.584,1.386,2.574,0c1.98-2.574,3.96-5.148,5.94-7.722c1.584-1.782,1.584-1.584,0.396-3.564C275.217,5.94,272.049,3.168,268.683,0z M253.041,12.87c0.198-3.366-1.386-6.534-3.564-7.92c-1.98-1.188-2.97-1.188-4.752,0c-1.782,0.99-2.376,2.376-3.168,4.158c-0.99,2.772-0.594,5.346,0.792,7.722c1.386,2.97,5.148,4.752,8.316,1.386C252.249,16.632,253.041,14.652,253.041,12.87z M297.591,12.87c0-3.366-1.584-6.534-3.762-7.92c-1.782-1.188-2.97-1.188-4.752,0c-1.782,0.99-2.376,2.376-3.168,4.158c-0.792,2.772-0.594,5.346,0.792,7.722c1.386,2.97,5.148,4.752,8.316,1.386C296.601,16.632,297.393,14.652,297.591,12.87z M19.404,13.464c-1.98-1.188-3.762-2.178-5.346-3.366c-1.782-1.386-3.762-1.584-5.742-2.178C7.92,7.722,7.326,8.118,6.732,8.514c-1.584,0.99-3.168,1.98-4.752,2.97C1.386,11.88,0.792,12.276,0,12.672c0.198,0.594,0.396,0.99,0.594,1.188c1.782,1.584,3.564,3.366,5.544,4.554c1.386,0.792,3.168,1.386,4.95,0.396c1.584-0.99,3.366-1.782,4.95-2.376C17.424,15.84,18.612,15.048,19.404,13.464z M313.827,13.662c4.356,0,8.91,0,13.464,0c1.98,0,3.96,0.396,5.94,0.198c5.148,0,10.296-0.198,15.444-0.198c3.564,0,6.93,0.396,10.494,0.396c4.356,0,8.712,0,12.87,0c4.158,0.198,8.514,0.396,12.672,0.396c4.752-0.198,9.306,0.198,13.86,0.396c4.95,0.198,9.702,0.396,14.652-0.198c4.752-0.594,9.702-0.396,14.652,0c4.554,0.396,9.306,0,14.058,0c1.584,0,3.366-0.198,4.95-0.198c2.772,0,5.346,0,8.118,0.198c5.148,0,10.296,0.198,15.444,0.396c4.356,0,8.712-0.396,13.068-0.396c4.356-0.198,8.514-0.198,12.87-0.198c1.386-0.198,2.376,0.396,3.168,1.386c1.386,2.178,3.366,3.168,5.742,3.366c2.772,0.198,5.544,0,7.92-1.386c0.396-0.396,0.792-0.594,1.188-0.99c2.376-2.574,0.792-5.544-1.188-6.732c-2.376-1.584-4.95-1.98-7.92-0.99c-1.188,0.198-2.376,0.594-3.366,1.188c-1.98,1.188-4.158,1.188-6.138,0.99c-3.366,0-6.534-0.198-9.9-0.396c-3.762-0.198-7.524-0.198-11.286-0.198c-0.99,0-2.178,0.198-3.168,0.198c-2.376,0-4.95-0.198-7.326-0.198c-1.782,0-3.564,0-5.148,0.198c-0.396,0-0.594,0-0.99,0c-5.94-0.792-11.88-0.198-17.82-0.396c-3.564,0-6.93-0.396-10.296-0.396c-8.118,0-16.434,0-24.552,0.198c-4.752,0-9.306,0.396-13.86,0.792c-1.386,0-2.574-0.198-3.762-0.198c-3.366-0.198-6.534-0.198-9.9-0.396c-2.376-0.198-4.95-0.396-7.326-0.198c-4.752,0.198-9.504-0.396-14.256-0.594c-2.772,0-5.544,0-8.514-0.198c-4.95,0-9.9-0.198-14.85-0.198c-2.772,0-5.544,0.396-8.514,0.594c-1.98,0.198-3.96,0.198-6.138,0.198c-2.97,0.198-6.138,0-9.306,0c-0.792,0.198-1.584,0.198-2.376,0.396c-0.396,0.396-1.188,1.188-0.99,1.386c0,0.594,0.792,1.386,1.188,1.584c1.386,0.198,2.772,0.198,4.158,0.198C311.847,13.662,312.837,13.662,313.827,13.662L313.827,13.662z M519.943,13.464c0.99,1.584,2.178,2.376,3.366,2.97c1.782,0.594,3.366,1.386,4.95,2.376c1.782,0.99,3.564,0.396,4.95-0.396c2.178-1.188,3.762-2.97,5.742-4.554c0.198-0.198,0.198-0.594,0.396-1.188c-0.594-0.396-1.188-0.792-1.98-1.188c-1.584-0.99-3.168-1.98-4.752-2.97c-0.396-0.396-0.99-0.792-1.386-0.594c-1.98,0.594-3.96,0.792-5.742,2.178C523.903,11.286,521.923,12.276,519.943,13.464z"/></svg>',"wiper:blockquote":'<svg xmlns="http://www.w3.org/2000/svg" width="82.099" height="72.456" viewBox="0 0 82.099 72.456"><path style="fill:{{color}};" d="M21.489,72.456c8.816,0,13.775-5.51,13.775-11.847c0-12.122-11.571-14.877-14.051-15.979c-1.928-0.826-4.132-4.132-4.132-7.714c0-13.5,11.571-25.621,17.356-31.131c2.204-1.653,2.204-2.204,2.204-3.581C36.641,0.826,35.815,0,33.886,0s-3.581,1.377-4.959,2.204C23.968,5.234,0,22.591,0,48.764C0,64.191,12.948,72.456,21.489,72.456z M66.671,72.456c8.816,0,14.05-5.51,14.05-11.847c0-12.122-11.846-14.877-14.326-15.979c-1.929-0.826-4.133-4.132-4.133-7.714c0-13.5,11.571-25.621,17.632-31.131c2.204-1.653,2.204-2.204,2.204-3.581C82.099,0.826,81.272,0,79.344,0c-2.204,0-3.857,1.377-5.234,2.204c-4.959,3.03-28.927,20.387-28.927,46.56C45.182,64.191,58.406,72.456,66.671,72.456z"/></svg>'},getAssetAsCSSUrl:function(t,e){var n='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10"><rect width="10" height="10" fill="{{color}}"></rect></svg>',r=this.assetsDict[t];return r?n=r:console.error('Error: Unknown SVG assetName "'+t+'"'),e&&(n=o.render(r,e)),"url('data:image/svg+xml;base64,"+i(n)+"')"}};t.exports=r},function(t,e,n){var i,o;i=[n(6)],void 0===(o=function(t){window.navigator.userAgent;t.isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t.isFirefox="undefined"!=typeof InstallTrigger,t.isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),t.isIE=!!document.documentMode,t.isEdge=!t.isIE&&!!window.StyleMedia,t.isMSEdge=t.isEdge,t.isChrome=!!window.chrome&&!window.opera&&!t.isMSEdge,t.isBlink=(t.isChrome||t.isOpera)&&!!window.CSS,t.supportsAddEventListenerOptions=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t.supportsAddEventListenerOptions=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){t.supportsAddEventListenerOptions=!1}t.supportsPassiveEventListeners=t.supportsAddEventListenerOptions,t.touchEventsEnabled="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,t.pointerEventsEnabled=window.PointerEvent||window.navigator.pointerEnabled,t.msPointerEventsEnabled=window.navigator.msPointerEnabled,t.supportsMozInputSource=t.isFirefox&&!t.touchEventsEnabled&&window.MouseEvent&&window.MouseEvent.MOZ_SOURCE_MOUSE,t.touchEnabled=t.touchEventsEnabled||t.msPointerEventsEnabled||t.pointerEventsEnabled||t.supportsMozInputSource;var n="";if(window.getComputedStyle){var i=window.getComputedStyle(document.documentElement,"");"-moz-"===(n=(Array.prototype.slice.call(i).join("").match(/(-moz-|-webkit-|-ms-)/)||""===i.OLink&&["","o"])[1])&&(n="")}return t.vendorPrefix=n||"",t}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){var e,n="virtualMouseBindings",i="virtualTouchID",o="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),r="clientX clientY pageX pageY screenX screenY".split(" "),a=t.event.mouseHooks?t.event.mouseHooks.props:[],s=t.event.props.concat(a),l={},c=0,u=0,h=0,d=!1,f=[],p=!1,g=!1,m="addEventListener"in document,v=t(document),_=1,y=0;function b(t){for(;t&&void 0!==t.originalEvent;)t=t.originalEvent;return t}function w(e){for(var i,o,r={};e;){for(o in i=t.data(e,n))i[o]&&(r[o]=r.hasVirtualBinding=!0);e=e.parentNode}return r}function S(){g=!0}function x(){g=!1}function C(){T(),c=setTimeout(function(){c=0,y=0,f.length=0,p=!1,S()},t.vmouse.resetTimerDuration)}function T(){c&&(clearTimeout(c),c=0)}function I(e,i,o){var a;return(o&&o[e]||!o&&function(e,i){for(var o;e;){if((o=t.data(e,n))&&(!i||o[i]))return e;e=e.parentNode}return null}(i.target,e))&&(a=function(e,n){var i,o,a,l,c,u,h,d,f,p=e.type;if((e=t.Event(e)).type=n,i=e.originalEvent,o=t.event.props,p.search(/^(mouse|click)/)>-1&&(o=s),i)for(h=o.length;h;)e[l=o[--h]]=i[l];if(p.search(/mouse(down|up)|click/)>-1&&!e.which&&(e.which=1),-1!==p.search(/^touch/)&&(p=(a=b(i)).touches,c=a.changedTouches,u=p&&p.length?p[0]:c&&c.length?c[0]:void 0))for(d=0,f=r.length;d<f;d++)e[l=r[d]]=u[l];return e}(i,e),t(i.target).trigger(a)),a}function k(e){var n=t.data(e.target,i);if(!(p||y&&y===n)){var o=I("v"+e.type,e);o&&(o.isDefaultPrevented()&&e.preventDefault(),o.isPropagationStopped()&&e.stopPropagation(),o.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}}function A(e){var n,o,r=b(e).touches;if(r&&1===r.length&&(o=w(n=e.target)).hasVirtualBinding){y=_++,t.data(n,i,y),T(),x(),d=!1;var a=b(e).touches[0];u=a.pageX,h=a.pageY,I("vmouseover",e,o),I("vmousedown",e,o)}}function P(t){g||(d||I("vmousecancel",t,w(t.target)),d=!0,C())}function E(e){if(!g){var n=b(e).touches[0],i=d,o=t.vmouse.moveDistanceThreshold,r=w(e.target);(d=d||Math.abs(n.pageX-u)>o||Math.abs(n.pageY-h)>o)&&!i&&I("vmousecancel",e,r),I("vmousemove",e,r),C()}}function $(t){if(!g){S();var e,n=w(t.target);if(I("vmouseup",t,n),!d){var i=I("vclick",t,n);i&&i.isDefaultPrevented()&&(e=b(t).changedTouches[0],f.push({touchID:y,x:e.clientX,y:e.clientY}),p=!0)}I("vmouseout",t,n),d=!1,C()}}function D(e){var i,o=t.data(e,n);if(o)for(i in o)if(o[i])return!0;return!1}function M(){}t.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};var O=!1;try{var B=Object.defineProperty({},"passive",{get:function(){O={passive:!1}}});window.addEventListener("test",B,B),window.removeEventListener("test",B,B)}catch(t){O=!1}function N(e){var i=e.substr(1);return{setup:function(o,r){D(this)||t.data(this,n,{}),t.data(this,n)[e]=!0,l[e]=(l[e]||0)+1,1===l[e]&&v.bind(i,k),t(this).bind(i,M),m&&(l.touchstart=(l.touchstart||0)+1,1===l.touchstart&&(document.addEventListener("touchstart",A,O),document.addEventListener("touchend",$,O),document.addEventListener("touchmove",E,O),v.bind("scroll",P)))},teardown:function(o,r){--l[e],l[e]||v.unbind(i,k),m&&(--l.touchstart,l.touchstart||(document.removeEventListener("touchstart",A,O),document.removeEventListener("touchend",$,O),document.removeEventListener("touchmove",E,O),v.unbind("scroll",P)));var a=t(this),s=t.data(this,n);s&&(s[e]=!1),a.unbind(i,M),D(this)||a.removeData(n)}}}for(var H=0;H<o.length;H++)t.event.special[o[H]]=N(o[H]);m&&document.addEventListener("click",function(n){var o,r,a,s,l,c=f.length,u=n.target;if(c)for(o=n.clientX,r=n.clientY,e=t.vmouse.clickDistanceThreshold,a=u;a;){for(s=0;s<c;s++)if(l=f[s],0,a===u&&Math.abs(l.x-o)<e&&Math.abs(l.y-r)<e||t.data(a,i)===l.touchID)return n.preventDefault(),void n.stopPropagation();a=a.parentNode}},!0)}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2),n(5),n(40)],void 0===(o=function(t,e,n,i){var o=e.getSectionsArticleHandler("default");e.registerSectionsArticleHandler("title-auto-size",t.extend({},o,{_initialize:function(t,e){this._autoSizeText(t,e),o._initialize.call(this,t,e)},_autoSizeText:function(e,n){var o=t(e),r=o.find(".title"),a=o.find(".subtitle"),s=i(r,{minFontSize:10});i(a,{preScale:s.scale,minFontSize:10})}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(1),n(0),n(128),n(163)],void 0===(o=function(t,e,n,i){var o={strings:t.merge({},i),lang:"en-US",loadStrings:function(t){t||(t=this.getLang()),"string"==typeof t&&(t=t.split(","));var n=e.Deferred(),o=-1,r=function(){if(++o>=t.length)n.reject();else{var a=t[o];if(a!==this.lang){if("USE_KEYS"===a)return this.setStrings(a,this.strings),void n.resolve();if(console.log("Loading Page Editor strings for lang "+a+" of ["+t.join(",")+"]"),"en-US"===a)return this.setStrings("en-US",i),void n.resolve();e.getJSON(this.getLangStringPath(a)).done(function(t){this.setStrings(a,t),n.resolve()}.bind(this)).fail(function(t,e,n){console.error('Failed to load "'+a+'" strings: '+e,n),r()})}else n.resolve()}}.bind(this);return r(),n},setStrings:function(e,n){console.log("Setting Page Editor strings to lang "+e),this.lang=e,this.strings=t.merge({},i,n)},getLang:function(){return window.localStorage.getItem("slate-lang")||r("locale")||r("lang")||window.slateData&&window.slateData.lang||window.navigator.languages||window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||"en-US"},getLangStringPath:function(t){var e="./luca-editor/assets/locales/"+t+".json",n=r("localeStringsPath");n&&((r("locale")||r("lang"))===t&&(e=n));return e},getString:function(e,i){if("USE_KEYS"===this.lang)return e.toUpperCase().replace(/\./g,"_");var o=t.get(this.strings,e,"");return o&&"object"==typeof o&&"__value__"in o&&(o=o.__value__),o?new n(o,this.lang).format(i):(console.error("Could not find locale string for key "+e),e)}};function r(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}return window.IntlStrings=o,o}.apply(e,i))||(t.exports=o)},function(t,e){function n(t){if(!t)return"";var e=t.id||t.name;return e=r(e),o(t)?e:"custom-"+e}function i(t){return Boolean(t&&t.components)}function o(t){return!!t&&(!i(t)||!t.id)}function r(t){return(t||"").toLowerCase().replace(/[\s_]+/g,"-").replace(/[^\w\-]/g,"")}t.exports={getUniqueName:n,getCssClassName:function(t){var e=n(t);return e&&e+"-theme"},isCustomThemeFormat:i,isBuiltInTheme:o,convertToKebabCase:r}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i,o;i=[n(0),n(1),n(22),n(7),n(122),n(118)],void 0===(o=function(t,e,n,i,o,r){var a=function(t){t&&(this.text=t.text||"",t.id&&(this.text=a.addById(t.id)))};return a.partials={},a._instance=null,a.addById=function(e){var n=t("#"+e).text(),i=a.partialNameFromId(e);return a.partials[i]=n,n},a.partialNameFromId=function(t){var e=t,n=t.lastIndexOf("-template");return n===t.length-"-template".length&&(e=e.substr(0,n)),e.replace(/\-/g,"_")},e.extend(a.prototype,{text:"",partials:null,toString:function(){return this.text},render:function(t,e,i){var o=null,r=t?this.getPayload(t,i):{};return r?o=n.render(this.text,r,e||this.partials||a.partials):console.warn("Could not find matching payload method for model of type (",t.get("type"),")"),o},$render:function(){var e=t(this.render.apply(this,arguments));return a.resolveImagePlaceholders(e)},getPayload:function(t,e){var n=null;switch(t&&t.get("type")){case"title":case"content":case"zoom":case"window":case"banner":case"full-width":case"photo-grid":case"card-flipbook":case"column-layout":case"card-layout":case"split-layout":n=this.getSectionPayload(t,e);break;case"img":case"p":case"h3":case"h4":case"h5":case"h6":case"blockquote":case"ol.li":case"ul.li":case"a":case"spacer":n=this.getContentItemPayload(t,e)}return e&&e.payloadPreProcessor&&(n=e.payloadPreProcessor(n,{model:t,options:e})),n},getSectionPayload:function(t,e){var n=t.toJSON(),i=null,o=null;return e&&e.issueModel&&(o=e.issueModel),o||(o=t.getRoot()),o&&(i=o.toJSON(!1)),new r(i).parseSectionForTemplate(n)},getContentItemPayload:function(t){return new r(this._getSimpleIssueJSON(t)).parseInlineContentItem(t.toJSON(),this._getSimpleSectionPayload(t))},_getSimpleSectionPayload:function(t){return t instanceof i.ContentItemModel&&t.parent?{type:t.parent.get("type")}:{}},_getSimpleIssueJSON:function(t){return{base_url:this._getBaseUrl(t)}},_getBaseUrl:function(t){var e="",n=t.getRoot();return n&&(e=n.get("base_url")||"")&&(e+="/"),e}}),a.resolveImagePlaceholders=function(e){for(var n=e.find(".image-placeholder-link,.background-image-placeholder-link"),i=n.length,o=0;o<i;o++){var r=t(n[o]),a=r.attr("href")||"";a||(a=r.data("href")||""),r.hasClass("background-image-placeholder-link")?r.parent().css("backgroundImage","url("+a+")"):t("<img>").attr("src",a).insertAfter(r),r.remove()}return e},a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},i.Template=a,a}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(6)],void 0===(o=function(t,e){var n=function(){};return t.extend(n.prototype,{bind:function(e,n,i){return t(this).on(e,n,i)},unbind:function(e,n){return t(this).off(e,n)},on:function(e,n,i){return t(this).on(e,n,i)},off:function(e,n){return t(this).off(e,n)},trigger:function(e,n){var i=t.Event(e);return t(this).trigger(i,n),i}}),e.EventDispatcher=n,n}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(6),n(8),n(13)],void 0===(o=function(t,e,n,i){function o(t,e){e=e||{},this._id=o.nextId++,this._enabled=!0;var n=this;this.mdFunc=function(t,e){return n._startDrag(t,e)},this.mmFunc=function(t,e){return n._handleDrag(t,e)},this.muFunc=function(t,e){return n._stopDrag(t,e)},this._delegateDragTracker=null,this.startEvent=e.startEvent||this.startEvent,this.updateEvent=e.updateEvent||this.updateEvent,this.stopEvent=e.stopEvent||this.stopEvent,this._dragHandlersInstalled=!1,this.attach(t)}function r(t,n){o.call(this,t,n),this._touchId=-1,this._eventTarget=null,this._tsFunc=null,this._tmFunc=null,this._teFunc=null,this._listenerOpts=!1,e.supportsPassiveEventListeners&&(this._listenerOpts={passive:!1})}function a(t,e){o.call(this,t,e),e=e||{},this._pointerId=-1,this._lastPosition=null,this._lastTime=0;var n=e.trackEvents||this.trackEvents;this._allowed={};for(var i=0;i<n.length;i++)this._allowed[n[i]||""]=!0}function s(t,e){o.call(this,t,e);var n=(e=e||{}).trackEvents||this.trackEvents;this._allowed={};for(var i=0;i<n.length;i++)this._allowed[n[i]||""]=!0;this._map={"":"mouse"},MouseEvent&&MouseEvent.MOZ_SOURCE_MOUSE&&(this._map[MouseEvent.MOZ_SOURCE_MOUSE]="mouse",this._map[MouseEvent.MOZ_SOURCE_TOUCH]="touch",this._map[MouseEvent.MOZ_SOURCE_PEN]="pen")}t.extend(o.prototype,{startEvent:"mousedown",updateEvent:"mousemove",stopEvent:"mouseup",attach:function(e){this._dragTracker=e,e&&(this._element=e.element,t(this._element).on(this.startEvent,this.mdFunc))},detach:function(){this._dragTracker&&(this._removeDragHandlers(),t(this._element).off(this.startEvent,this.mdFunc),this._element=null,this._dragTracker=null)},enable:function(){this._enabled=!0},disable:function(){this._enabled=!1,this._removeDragHandlers()},destroy:function(){this.detach()},_getCurrentTracker:function(){return this._delegateDragTracker||this._dragTracker},setDelegateTracker:function(t){this._delegateDragTracker=t},_clearDelegateTracker:function(){this._delegateDragTracker=null},_getNativeEvent:function(t){for(;t&&t.originalEvent;)t=t.originalEvent;return t},_startDrag:function(t){var e=this._getCurrentTracker(),n=!1;return this._enabled&&e&&(this._clearDelegateTracker(),n=e._startDrag(t,this.getPosition(t)),this._installDragHandlers()),n},_handleDrag:function(t){var e=!1;if(this._dragHandlersInstalled){var n=this._getCurrentTracker();this._enabled&&n&&(e=n._handleDrag(t,this.getPosition(t)))}return e},_stopDrag:function(t){var e=!1;if(this._dragHandlersInstalled){var n=this._getCurrentTracker();this._enabled&&n&&(e=n._stopDrag(t,this.getPosition(t)),this._removeDragHandlers())}return e},_installDragHandlers:function(){t(document).on(this.updateEvent,this.mmFunc).on(this.stopEvent,this.muFunc),this._dragHandlersInstalled=!0},_removeDragHandlers:function(){this._dragHandlersInstalled&&(t(document).off(this.updateEvent,this.mmFunc).off(this.stopEvent,this.muFunc),this._dragHandlersInstalled=!1),this._clearDelegateTracker()},getPosition:function(t){return{x:t.pageX,y:t.pageY}}}),o.nextId=1,n.inherit(r,o,{startEvent:"touchstart",updateEvent:"touchmove",stopEvent:"touchend",_wrapEventCallback:function(t){return function(e){var n=t.apply(this,arguments);return!1===n&&(e.preventDefault(),e.stopPropagation()),n}},_ensureCallbacksSetUp:function(){this._tsFunc||(this._tsFunc=this._wrapEventCallback(this.mdFunc),this._tmFunc=this._wrapEventCallback(this.mmFunc),this._teFunc=this._wrapEventCallback(this.muFunc))},attach:function(t){this._dragTracker=t,t&&(this._ensureCallbacksSetUp(),this._element=t.element,this._element&&(this._element.addEventListener(this.startEvent,this._tsFunc,this._listenerOpts),1==++r.dummyHandlerLock&&(document.addEventListener(this.updateEvent,r.dummyHandler,this._listenerOpts),document.addEventListener(this.stopEvent,r.dummyHandler,this._listenerOpts))))},detach:function(){this._dragTracker&&(this._removeDragHandlers(),this._element&&(this._element.removeEventListener(this.startEvent,this._tsFunc,this._listenerOpts),--r.dummyHandlerLock<1&&(document.removeEventListener(this.updateEvent,r.dummyHandler,this._listenerOpts),document.removeEventListener(this.stopEvent,r.dummyHandler,this._listenerOpts),r.dummyHandlerLock=0)),this._element=null,this._dragTracker=null)},_getTouchById:function(t,e,n){var i=this._getNativeEvent(t)[n||"changedTouches"];if(i)for(var o=0;o<i.length;o++)if(i[o].identifier===e)return i[o];return null},_ensureTouchIdValueIsValid:function(t){-1==this._touchId||this._getTouchById(t,this._touchId,"touches")||this._removeDragHandlers()},_startDrag:function(t){var e=void 0;if(this._ensureTouchIdValueIsValid(t),-1===this._touchId){var n=this._getNativeEvent(t),i=n&&n.changedTouches&&n.changedTouches[0];i&&(this._touchId=i.identifier,this._eventTarget=t.target,e=o.prototype._startDrag.call(this,t))}return e},_handleDrag:function(t){var e=void 0;return this._getTouchById(t,this._touchId)&&this._eventTarget===t.target&&(e=o.prototype._handleDrag.call(this,t)),e},_stopDrag:function(t){var e=void 0;return this._getTouchById(t,this._touchId)&&(e=o.prototype._stopDrag.call(this,t),this._touchId=-1),e},_installDragHandlers:function(){this._dragHandlersInstalled||(this._ensureCallbacksSetUp(),document.addEventListener(this.updateEvent,this._tmFunc,this._listenerOpts),document.addEventListener(this.stopEvent,this._teFunc,this._listenerOpts),document.addEventListener("touchcancel",this._teFunc,this._listenerOpts),this._dragHandlersInstalled=!0)},_removeDragHandlers:function(){this._touchId=-1,this._dragHandlersInstalled&&(document.removeEventListener(this.updateEvent,this._tmFunc,this._listenerOpts),document.removeEventListener(this.stopEvent,this._teFunc,this._listenerOpts),document.removeEventListener("touchcancel",this._teFunc,this._listenerOpts),this._dragHandlersInstalled=!1)},getPosition:function(t){var e=this._getTouchById(t,this._touchId);return{x:e&&e.pageX||0,y:e&&e.pageY||0}}}),r.dummyHandlerLock=0,r.dummyHandler=function(){},n.inherit(a,o,{startEvent:"pointerdown",updateEvent:"pointermove",stopEvent:"pointerup",trackEvents:["mouse","touch","pen"],_getPointerId:function(t){return this._getNativeEvent(t).pointerId},_canStartDrag:function(t){return-1===this._pointerId&&this._allowed[this._getNativeEvent(t).pointerType]},_startDrag:function(t){var e=void 0;return this._canStartDrag(t)&&(this._pointerId=this._getPointerId(t),this._lastPosition=this.getPosition(t),this._lastTime=Date.now(),e=o.prototype._startDrag.call(this,t)),e},_handleDrag:function(t){var e=void 0;if(this._dragHandlersInstalled&&this._pointerId===this._getPointerId(t)){var n=this._lastPosition,i=this._lastTime,r=this.getPosition(t),a=Date.now();this._lastTime=a,(n.x!=r.x||n.y!=r.y&&a-i>=16)&&(this._lastPosition=r,e=o.prototype._handleDrag.call(this,t))}return e},_stopDrag:function(t){var e=void 0;return this._dragHandlersInstalled&&this._pointerId===this._getPointerId(t)&&(this._pointerId=-1,e=o.prototype._stopDrag.call(this,t)),e},_installDragHandlers:function(){o.prototype._installDragHandlers.call(this),t(document).on("pointercancel",this.muFunc)},_removeDragHandlers:function(){this._pointerId=-1,t(document).off("pointercancel",this.muFunc),o.prototype._removeDragHandlers.call(this)},getPosition:function(t){return{x:(t=this._getNativeEvent(t)).pageX,y:t.pageY}}}),n.inherit(s,o,{trackEvents:["mouse","touch","pen"],_canStartDrag:function(t){return t=this._getNativeEvent(t),this._allowed[this._map[this._getNativeEvent(t).mozInputSource]||""]},_startDrag:function(t){var e=void 0;return this._canStartDrag(t)&&(e=o.prototype._startDrag.call(this,t)),e}});var l=function(e,n){var i=this;this.id=l.nextId++,this.element=e,this.options=t.extend({},l.prototype.defaultOptions,n),this.dragStarted=!1,this.enabled=!0,this.mdFunc=function(t,e){return i._startDrag(t,e)},this.mmFunc=function(t,e){return i._handleDrag(t,e)},this.muFunc=function(t,e){return i._stopDrag(t,e)},this.startX=0,this.startY=0,this.options.dragEventHandler?(this.dragEventHandler=this.options.dragEventHandler,this.dragEventHandler.attach(this)):this.dragEventHandler=this.createEventHandler()};return l.nextId=1,t.extend(l.prototype,{defaultOptions:{dragThreshold:5,ignoreX:!1,ignoreY:!1,dragStart:null,dragUpdate:null,dragStop:null,trackEvents:["mouse","touch","pen"]},createEventHandler:function(){var t=this.options.trackEvents;if(e.pointerEventsEnabled)return new a(this,{trackEvents:t});if(e.supportsMozInputSource)return new s(this,{trackEvents:t});for(var n={},i=0;i<t.length;i++)n[t[i]||""]=!0;return n.mouse||n.touch?n.mouse?n.touch?new o(this,{startEvent:"vmousedown",updateEvent:"vmousemove",stopEvent:"vmouseup"}):new o(this):new r(this):null},enable:function(){this.dragEventHandler&&this.dragEventHandler.enable()},disable:function(){this.dragEventHandler&&this.dragEventHandler.disable()},destroy:function(){this.dragEventHandler&&(this.dragEventHandler.destroy(),this.dragEventHandler=null),this.element=null},dragStart:function(t,e){var n=this.options;n.dragStart&&n.dragStart(this,t,e)},dragUpdate:function(t,e){var n=this.options;n.dragUpdate&&n.dragUpdate(this,t,e)},dragStop:function(t,e){var n=this.options;n.dragStop&&n.dragStop(this,t,e)},_startDrag:function(t,e){return this.dragStarted=!1,this.startX=e.x,this.startY=e.y,!1},_handleDrag:function(t,e){var n=e.x-this.startX,i=e.y-this.startY,o=this.options;if(!this.dragStarted){if(!o.ignoreX&&Math.abs(n)<o.dragThreshold&&!o.ignoreY&&Math.abs(i)<o.dragThreshold)return!1;this.dragStarted=!0,this.dragStart(0,0)}return this.dragUpdate(o.ignoreX?0:n,o.ignoreY?0:i),!1},_stopDrag:function(t,e){if(this.dragStarted){var n=e.x-this.startX,i=e.y-this.startY,o=this.options;this.dragStop(o.ignoreX?0:n,o.ignoreY?0:i)}return this.dragStarted=!1,!1}}),e.DragTrackerEventHandler=o,e.DragTrackerTouchHandler=r,e.DragTrackerPointerHandler=a,e.DragTracker=l,l}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(30),n(69),n(4),n(2)],void 0===(o=function(t,e,n,i,o){return e.TransformCompositeProperty.prototype.defaultOptions.propertyName=o.vendorPrefix+"transform",o.Timeline=function(t){var n=this;e.Timeline.call(this,t),this._limit=-1,this._loopRestartCB=function(){n.seek(0),n.play()}},i.inherit(o.Timeline,e.Timeline,{handleTimer:function(t,n){e.Timeline.prototype.handleTimer.apply(this,arguments),!this.timerStart&&this.loop&&setTimeout(this._loopRestartCB,0)},setLimit:function(t){return this._limit=t,this},getDuration:function(t){var n=e.Timeline.prototype.getDuration.apply(this,arguments),i=this._limit;return i>=0&&i<n?i:n},update:function(t,n,i){return this._limit>=0&&this._limit<t&&(t=this._limit),e.Timeline.prototype.update.apply(this,arguments)},_addTween:function(t,n,i,o){n=n||0,i="number"!=typeof i?100:i;var r=e.createTween.apply(null,t);return this.add(r,n,i,o),r},_addPropTween:function(e,n,i,o,r,a,s,l){return l=t.extend({easing:"linear"},l),this._addTween([o,e,r,s,{fromValue:a,valueTemplate:l.valueTemplate}],n,i,l.easing),this},addReversed:function(t,e,n,i){var r=new o.Timeline.ReversedAnimation(t);return this.add(r,e,n,i),this},style:function(t,e,n,i,o,r,a){return this._addPropTween(t,e,n,"style",i,o,r,a)},attribute:function(t,e,n,i,o,r,a){return this._addPropTween(t,e,n,"attribute",i,o,r,a)},property:function(t,e,n,i,o,r,a){return this._addPropTween(t,e,n,"property",i,o,r,a)},blur:function(e,n,i,r){return r=t.extend({fromBlur:"0px",toBlur:"50px",easing:"linear"},r),this._addTween(["style",e,o.vendorPrefix+"filter",r.toBlur,{fromValue:r.fromBlur,valueTemplate:"blur(@@0@@)"}],n,i,r.easing),this},opacity:function(e,n,i,o){return o=t.extend({fromOpacity:"0",toOpacity:"1",easing:"linear"},o),this._addTween(["style",e,"opacity",o.toOpacity,{fromValue:o.fromOpacity}],n,i,o.easing),this},_transformTween:function(n,i,r,a,s,l,c){var u=t.extend({propertyName:o.vendorPrefix+"transform",easing:"linear"},c),h=new e.TransformTween(n,a,s,l,u);return this.add(h,i,r,u.easing),h},perspective:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"perspective",i,o,r),this},translateX:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"translateX",i,o,r),this},translateY:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"translateY",i,o,r),this},translateZ:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"translateZ",i,o,r),this},rotate:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"rotate",i,o,r),this},rotateX:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"rotateX",i,o,r),this},rotateY:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"rotateY",i,o,r),this},scale:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"scale",i,o,r),this},scaleX:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"scaleX",i,o,r),this},scaleY:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"scaleY",i,o,r),this},scaleZ:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"scaleZ",i,o,r),this},skewX:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"skewX",i,o,r),this},skewY:function(t,e,n,i,o,r){return this._transformTween(t,e,n,"skewY",i,o,r),this},transform:function(e,n,i,r){return void 0!==(r=t.extend({toX:"0px",toY:"0px",toZ:"0px",toScale:void 0,toScaleX:"1",toScaleY:"1",toSkewX:"0",toSkewY:"0",toRotate:"0",toRotateX:"0",toRotateY:"0",fromX:"0px",fromY:"0px",fromZ:"0px",fromScale:void 0,fromScaleX:"1",fromScaleY:"1",fromSkewX:"0",fromSkewY:"0",fromRotate:"0",fromRotateX:"0",fromRotateY:"0",easing:"linear"},r)).toScale&&(r.toScaleX=r.toScale,r.toScaleY=r.toScale),void 0!==r.fromScale&&(r.fromScaleX=r.fromScale,r.fromScaleY=r.fromScale),this._addTween(["style",e,o.vendorPrefix+"transform",[r.toX,r.toY,r.toZ,r.toRotate,r.toRotateX,r.toRotateY,r.toScaleX,r.toScaleY,r.toSkewX,r.toSkewY],{fromValue:[r.fromX,r.fromY,r.fromZ,r.fromRotate,r.fromRotateX,r.fromRotateY,r.fromScaleX,r.fromScaleY,r.fromSkewX,r.fromSkewY],valueTemplate:"translate3d(@@0@@,@@1@@,@@2@@) rotate(@@3@@) rotateX(@@4@@) rotateY(@@5@@) scale(@@6@@,@@7@@) skewX(@@8@@) skewY(@@9@@)"}],n,i,r.easing),this},binaryClassTrigger:function(e,n,i,r){if((r=t.extend({},{startClass:void 0,endClass:void 0},r)).startClass||r.endClass){var a=new o.Timeline.BinaryClassTrigger(e,r.startClass,r.endClass);this.add(a,n,i)}return this},addClass:function(t,e,n){return this.binaryClassTrigger(t,e,1,{endClass:n})},removeClass:function(t,e,n){return this.binaryClassTrigger(t,e,1,{startClass:n})},replaceClass:function(t,e,n,i){return this.binaryClassTrigger(t,e,1,{startClass:n,endClass:i})},binaryPropertyTrigger:function(e,n,i,r){if((r=t.extend({},{propertyType:"property"},r)).property&&void 0!==r.startVal&&void 0!==r.endVal){var a=new o.Timeline.BinaryPropertyTrigger(r.propertyType,e,r.property,r.startVal,r.endVal);this.add(a,n,i)}return this},timelinePlayTrigger:function(t,e,n,i){var r=new o.Timeline.TimelinePlayTrigger(t,i);return this.add(r,e,n),this},timelineStopTrigger:function(t,e,n,i){var r=new o.Timeline.TimelineStopTrigger(t,i);return this.add(r,e,n),this},binaryCallbackTrigger:function(t,e,n,i,r){var a=new o.Timeline.BinaryCallbackTrigger(t,e,r);return this.add(a,n,i),this},makeVisible:function(t,e){return this.binaryPropertyTrigger(t,e,1,{propertyType:"style",property:"visibility",startVal:"hidden",endVal:"visible"}),this},makeHidden:function(t,e){return this.binaryPropertyTrigger(t,e,1,{propertyType:"style",property:"visibility",startVal:"visible",endVal:"hidden"}),this},extendTo:function(t){this.add(new e.Animation,t)}}),o.Timeline.BinaryTrigger=function(){e.Animation.call(this),this._triggerState=-1},i.inherit(o.Timeline.BinaryTrigger,e.Animation,{setup:function(t){},update:function(t,e,n){var i=e<1?0:1;i!=this._triggerState&&(this[i?"_end":"_start"](),this._triggerState=i)},_start:function(){},_end:function(){},getDuration:function(){return 1}}),o.Timeline.BinaryClassTrigger=function(e,n,i,r){o.Timeline.BinaryTrigger.call(this),this.$elements=t(e),this.startClass=n,this.endClass=i},i.inherit(o.Timeline.BinaryClassTrigger,o.Timeline.BinaryTrigger,{_start:function(){this._replaceClass(this.startClass,this.endClass)},_end:function(){this._replaceClass(this.endClass,this.startClass)},_replaceClass:function(t,e){t&&this.$elements.addClass(t),e&&this.$elements.removeClass(e)}}),o.Timeline.BinaryPropertyTrigger=function(e,n,i,r,a,s){o.Timeline.BinaryTrigger.call(this),this.$elements=t(n),this.propertyType=e,this.property=i,this.startVal=r,this.endVal=a},i.inherit(o.Timeline.BinaryPropertyTrigger,o.Timeline.BinaryTrigger,{_start:function(){this._setValue(this.startVal)},_end:function(){this._setValue(this.endVal)},_setValue:function(t){for(var e=this.$elements,n=e.length,i=this.propertyType,o=this.property,r=0;r<n;r++){var a=e[r];switch(i){case"style":a.style[o]=t;break;case"attribute":a.setAttribute(o,t);break;default:a[o]=t}}}}),o.Timeline.TimelinePlayTrigger=function(e,n){o.Timeline.BinaryTrigger.call(this),this.options=t.extend({},this.defaultOptions,n),this.timeline=e},i.inherit(o.Timeline.TimelinePlayTrigger,o.Timeline.BinaryTrigger,{defaultOptions:{seekToStart:!0},_start:function(){this.timeline.stop(),this.timeline.seek(0)},_end:function(){this.options.seekToStart&&this.timeline.seek(0),this.timeline.play()}}),o.Timeline.TimelineStopTrigger=function(e,n){o.Timeline.BinaryTrigger.call(this),this.options=t.extend({},this.defaultOptions,n),this.timeline=e},i.inherit(o.Timeline.TimelineStopTrigger,o.Timeline.BinaryTrigger,{defaultOptions:{seekToEnd:!0},_end:function(){this.timeline.stop(),this.options.seekToEnd&&this.timeline.seek(this.timeline.getDuration())}}),o.Timeline.BinaryCallbackTrigger=function(t,e,n){o.Timeline.BinaryTrigger.call(this),this.data=n,this.forwardCallback=t,this.reverseCallback=e},i.inherit(o.Timeline.BinaryCallbackTrigger,o.Timeline.BinaryTrigger,{_start:function(){this.reverseCallback&&this.reverseCallback(this.data)},_end:function(){this.forwardCallback&&this.forwardCallback(this.data)}}),o.Timeline.ReversedAnimation=function(t){e.Animation.call(this),this._animation=t},t.extend(o.Timeline.ReversedAnimation.prototype,e.Animation.prototype,{update:function(t,e,n){if(this._animation){var i=this._animation.getDuration();this._animation.seek?this._animation.seek(i-t*e,n):this._animation.update(i-t,e,n)}},getDuration:function(t){return this._animation&&this._animation.getDuration()||0}}),o.Timeline}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o,r;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
!function(n,a){e&&"string"!=typeof e.nodeName?a(e):(o=[e],void 0===(r="function"==typeof(i=a)?i.apply(e,o):i)||(t.exports=r))}(0,function(t){var e=Object.prototype.toString,n=Array.isArray||function(t){return"[object Array]"===e.call(t)};function i(t){return"function"==typeof t}function o(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(t,e){return null!=t&&"object"==typeof t&&e in t}var a=RegExp.prototype.test;var s=/\S/;function l(t){return!function(t,e){return a.call(t,e)}(s,t)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var u=/\s*/,h=/\s+/,d=/\s*=/,f=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function g(t){this.string=t,this.tail=t,this.pos=0}function m(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function v(){this.cache={}}g.prototype.eos=function(){return""===this.tail},g.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},g.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},m.prototype.push=function(t){return new m(t,this)},m.prototype.lookup=function(t){var e,n=this.cache;if(n.hasOwnProperty(t))e=n[t];else{for(var o,a,s=this,l=!1;s;){if(t.indexOf(".")>0)for(e=s.view,o=t.split("."),a=0;null!=e&&a<o.length;)a===o.length-1&&(l=r(e,o[a])),e=e[o[a++]];else e=s.view[t],l=r(s.view,t);if(l)break;s=s.parent}n[t]=e}return i(e)&&(e=e.call(this.view)),e},v.prototype.clearCache=function(){this.cache={}},v.prototype.parse=function(e,i){var r=this.cache,a=r[e];return null==a&&(a=r[e]=function(e,i){if(!e)return[];var r,a,s,c=[],m=[],v=[],_=!1,y=!1;function b(){if(_&&!y)for(;v.length;)delete m[v.pop()];else v=[];_=!1,y=!1}function w(t){if("string"==typeof t&&(t=t.split(h,2)),!n(t)||2!==t.length)throw new Error("Invalid tags: "+t);r=new RegExp(o(t[0])+"\\s*"),a=new RegExp("\\s*"+o(t[1])),s=new RegExp("\\s*"+o("}"+t[1]))}w(i||t.tags);for(var S,x,C,T,I,k,A=new g(e);!A.eos();){if(S=A.pos,C=A.scanUntil(r))for(var P=0,E=C.length;P<E;++P)l(T=C.charAt(P))?v.push(m.length):y=!0,m.push(["text",T,S,S+1]),S+=1,"\n"===T&&b();if(!A.scan(r))break;if(_=!0,x=A.scan(p)||"name",A.scan(u),"="===x?(C=A.scanUntil(d),A.scan(d),A.scanUntil(a)):"{"===x?(C=A.scanUntil(s),A.scan(f),A.scanUntil(a),x="&"):C=A.scanUntil(a),!A.scan(a))throw new Error("Unclosed tag at "+A.pos);if(I=[x,C,S,A.pos],m.push(I),"#"===x||"^"===x)c.push(I);else if("/"===x){if(!(k=c.pop()))throw new Error('Unopened section "'+C+'" at '+S);if(k[1]!==C)throw new Error('Unclosed section "'+k[1]+'" at '+S)}else"name"===x||"{"===x||"&"===x?y=!0:"="===x&&w(C)}if(k=c.pop())throw new Error('Unclosed section "'+k[1]+'" at '+A.pos);return function(t){for(var e,n=[],i=n,o=[],r=0,a=t.length;r<a;++r)switch((e=t[r])[0]){case"#":case"^":i.push(e),o.push(e),i=e[4]=[];break;case"/":o.pop()[5]=e[2],i=o.length>0?o[o.length-1][4]:n;break;default:i.push(e)}return n}(function(t){for(var e,n,i=[],o=0,r=t.length;o<r;++o)(e=t[o])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(i.push(e),n=e));return i}(m))}(e,i)),a},v.prototype.render=function(t,e,n){var i=this.parse(t),o=e instanceof m?e:new m(e);return this.renderTokens(i,o,n,t)},v.prototype.renderTokens=function(t,e,n,i){for(var o,r,a,s="",l=0,c=t.length;l<c;++l)a=void 0,"#"===(r=(o=t[l])[0])?a=this.renderSection(o,e,n,i):"^"===r?a=this.renderInverted(o,e,n,i):">"===r?a=this.renderPartial(o,e,n,i):"&"===r?a=this.unescapedValue(o,e):"name"===r?a=this.escapedValue(o,e):"text"===r&&(a=this.rawValue(o)),void 0!==a&&(s+=a);return s},v.prototype.renderSection=function(t,e,o,r){var a=this,s="",l=e.lookup(t[1]);if(l){if(n(l))for(var c=0,u=l.length;c<u;++c)s+=this.renderTokens(t[4],e.push(l[c]),o,r);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(t[4],e.push(l),o,r);else if(i(l)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(e.view,r.slice(t[3],t[5]),function(t){return a.render(t,e,o)}))&&(s+=l)}else s+=this.renderTokens(t[4],e,o,r);return s}},v.prototype.renderInverted=function(t,e,i,o){var r=e.lookup(t[1]);if(!r||n(r)&&0===r.length)return this.renderTokens(t[4],e,i,o)},v.prototype.renderPartial=function(t,e,n){if(n){var o=i(n)?n(t[1]):n[t[1]];return null!=o?this.renderTokens(this.parse(o),e,n,o):void 0}},v.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},v.prototype.escapedValue=function(e,n){var i=n.lookup(e[1]);if(null!=i)return t.escape(i)},v.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.3.0",t.tags=["{{","}}"];var _=new v;return t.clearCache=function(){return _.clearCache()},t.parse=function(t,e){return _.parse(t,e)},t.render=function(t,e,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+function(t){return n(t)?"array":typeof t}(t)+'" was given as the first argument for mustache#render(template, view, partials)');return _.render(t,e,i)},t.to_html=function(e,n,o,r){var a=t.render(e,n,o);if(!i(r))return a;r(a)},t.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return c[t]})},t.Scanner=g,t.Context=m,t.Writer=v,t})},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var i,o;i=[n(67),n(32)],void 0===(o=function(t){return t}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(6),n(8)],void 0===(o=function(t,e,n){var i=function(e,n){if(this.options=t.extend({},i.prototype.defaultOptions,n),this._startTime=0,this._timer=0,this._callback=e,this._running=!1,this.options.easingFunc)this._easingFunc=this.options.easingFunc;else{var o=this.options.easing||"linear";this._easingFunc=this.easings[o]||this.easings.linear}var r=this;this._updateCallback=function(){r._handleUpdate()}};return t.extend(i.prototype,{defaultOptions:{useSetTimeout:!1,interval:1e3/60,duration:1e3,easing:"linear",easingFunc:null},easings:{linear:function(t,e,n,i,o){return n+(i-n)*e/o},"ease-in":function(t,e,n,i,o){return i*((e=e/o-1)*e*e+1)+n},"ease-out":function(t,e,n,i,o){return i*(e/=o)*e*e+n}},start:function(){this._running||(t(this).trigger("animator-start"),this._startTime=(new Date).getTime(),this._handleUpdate())},stop:function(){this._running=!1,this._timer&&(this.options.useSetTimeout?clearTimeout(this._timer):cancelAnimationFrame(this._timer),this._timer=0,t(this).trigger("animator-stop"))},_handleUpdate:function(){var e=this._startTime,n=(new Date).getTime()-e,i=this.options.duration;n=n>i?i:n;var o=this._easingFunc(0,n,0,1,i);t(this).trigger("animator-update",{interpolationConstant:o}),this._callback&&this._callback(o),n===i?(this.options.complete&&this.options.complete(),t(this).trigger("animator-complete"),this.stop()):this.options.useSetTimeout?this._timer=setTimeout(this._updateCallback,this.options.interval):this._timer=requestAnimationFrame(this._updateCallback)}}),e.Animator=i,i}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(6),n(8),n(12),n(20)],void 0===(o=function(t,e,n,i,o){var r=function(e,n){n=t.extend({},r.prototype.defaultOptions,n),o.call(this,e,n),this._lastDragEvent=null,this._lastDragPosition=null,this._delegateEventHandler=null,t(this.element).data(this.options.delegatePropertyName,this);var i=this.options.delegateElement;i&&(this.options.delegateElement=t(i)[0])};n.inherit(r,o),t.extend(r.prototype,{defaultOptions:t.extend({},o.prototype.defaultOptions,{delegatePropertyName:"wpDragTrackerDelegate",delegateElement:null,getDirectionFunc:null,delegateIsCompatibleFunc:null}),_startDrag:function(t,e){return this._lastDragEvent=t,this._lastDragPosition=e,r.prototype._super.prototype._startDrag.call(this,t,e)},_handleDrag:function(t,e){return this._lastDragEvent=t,this._lastDragPosition=e,r.prototype._super.prototype._handleDrag.call(this,t,e)},_stopDrag:function(t,e){if(this._lastDragEvent=null,this._lastDragPosition=null,this._delegateEventHandler=null,this.dragStarted&&a){var n=this._delegateEventHandler||this.dragEventHandler,i=n&&n._getNativeEvent(t);i&&"touch"===i.pointerType&&void 0!=i.pointerId&&a.push({pointerId:i.pointerId})}return r.prototype._super.prototype._stopDrag.call(this,t,e)},_trackerIsCompatible:function(t,e){var n=this.options.delegateIsCompatibleFunc;if(n)return n(this,t,e);var i=e||this.getDirection(),o=t.getDirection();return i===o||"both"===o},_findClosestDelegate:function(e,n){for(;e;){var i=t(e).data(this.options.delegatePropertyName);if(i&&this._trackerIsCompatible(i,n))return i;e=e.parentNode}return null},_handleDelegateHandOff:function(t,e){this._stopDrag(t,e),this._lastDragEvent=null,this._lastDragPosition=null,this._delegateEventHandler=null},delegateDrag:function(t){var e=null;if(this.dragStarted&&this._lastDragEvent&&(e=this._findClosestDelegate(this.options.delegateElement||this.element.parentNode,t))){var n=this._lastDragEvent,i=this._lastDragPosition,o=this._delegateEventHandler||this.dragEventHandler;this.blockDelegates(),this._handleDelegateHandOff(n,i),e._startDrag(n,i),e.dragStarted=!0,e.dragStart(0,0),e._handleDrag(n,i),o.setDelegateTracker(e),e._delegateEventHandler=o}return e},_getAncestorDelegates:function(){for(var e=this.options.delegateElement||this.element.parentNode,n=this.options.delegatePropertyName,i=[];e;){var o=t(e).data(n);o&&i.push(o),e=e.parentNode}return i},blockDelegates:function(t){for(var e=(t=t||this._getAncestorDelegates()).length,n=0;n<e;n++){var i=t[n];i._stopTracking&&i._stopTracking()}},_stopTracking:function(){(this._delegateEventHandler||this.dragEventHandler)._removeDragHandlers()},getDirection:function(){var t=this.options,e=t.getDirectionFunc;return ignoreX=t.ignoreX,ignoreY=t.ignoreY,e?e(this):ignoreX||ignoreY?ignoreX?"vertical":"horizontal":"both"}});var a=null;return e.pointerEventsEnabled&&(a=[],document.addEventListener("click",function(t){var e=t.pointerId;if(void 0!=e&&"touch"===t.pointerType){for(var n=a.length,i=0;i<n;i++){var o=a[i];o&&o.pointerId===e&&(t.preventDefault(),t.stopPropagation())}a.length=0}},!0)),e.DragTrackerDelegate=r,r}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(12),n(9),n(13),n(34)],void 0===(o=function(t,e,n,i,o){var r=n.build("Widget.MomentumScrollView",n,{_widgetName:"scrollview",defaultOptions:{useTransform:!1,maxVelocity:100,velocityDamper:.95,direction:void 0,delegateThreshold:1,delegateElement:null,trackEvents:["mouse","touch","pen"]},_attachBehavior:function(){var t=this,e=this.options;this.$element.css("overflow","hidden"),this._scrollLeft=0,this._scrollTop=0,this._direction=e.direction||void 0,this._directionLock=void 0,this.momentumStarted=!1,this.tracker=new o(this.$element[0],{trackEvents:e.trackEvents,delegateElement:e.delegateElement,maxVelocity:e.maxVelocity,velocityDamper:e.velocityDamper,getDirectionFunc:function(){return t._direction||"both"},dragStart:function(e,n,i){return t._handleDragStart(n,i)},dragUpdate:function(e,n,i){return t._handleDragUpdate(n,i)},dragStop:function(e,n,i){return t._handleDragStop(n,i)},momentumStart:function(e,n,i){return t._handleMomentumStart(n,i)},momentumStop:function(e,n,i){return t._handleMomentumStop(n,i)}})},scrollLeft:function(){return this.options.useTransform?this._scrollLeft:this.$element[0].scrollLeft},scrollTop:function(){return this.options.useTransform?this._scrollTop:this.$element[0].scrollTop},scrollWidth:function(){return this.$element[0].scrollWidth},scrollHeight:function(){return this.$element[0].scrollHeight},width:function(){return this.$element[0].offsetWidth},height:function(){return this.$element[0].offsetHeight},scrollTo:function(t,n){var i=this.$element[0],o=this.options.useTransform;if(i){var r=this.scrollWidth(),a=this.scrollHeight(),s=r-this.width(),l=a-this.height();if(t=s<=0||t<0?0:t>s?s:t,n=l<=0||n<0?0:n>l?l:n,this._scrollLeft=t,this._scrollTop=n,o){var c="translate3d("+(0-t)+"px,"+(0-n)+"px,0)";this._getElementsToScroll().css(e.vendorPrefix+"transform",c),this.$element.trigger("scroll")}else i.scrollLeft=t,i.scrollTop=n}},_getElementsToScroll:function(){return this.$element.children()},_handleDragStart:function(t,e){this.$element[0];this._scrollStartX=this.scrollLeft(),this._scrollStartY=this.scrollTop(),this._directionLock=void 0,this.momentumStarted=!1,this.scrollTo(this._scrollStartX-t,this._scrollStartY-e),this.$element.trigger("scroll-start",{dx:t,dy:e})},_isWithinAngleThreshold:function(t,e){return t&&Math.abs(Math.atan(e/t))*(180/Math.PI)<30},_handleDragUpdate:function(t,e){this.$element[0],this.options;var n=this._direction,i=this._directionLock;if(!i){var o=Math.abs(t),r=Math.abs(e);if(o<10&&r<10)return;if(this._isWithinAngleThreshold(o,r)?i="horizontal":this._isWithinAngleThreshold(r,o)&&(i="vertical"),n&&i&&n!=i&&this.tracker.delegateDrag(i))return void this._handleDragStop(t,e);this._directionLock=i=n||(i||"n"),this.tracker.blockDelegates()}var a=this._scrollStartX-("vertical"!=i?t:0),s=this._scrollStartY-("horizontal"!=i?e:0);this.scrollTo(a,s);var l=Math.abs(a-this.scrollLeft()),c=Math.abs(s-this.scrollTop()),u=this.options.delegateThreshold;!this.momentumStarted&&(l>u||c>u)&&this.tracker.delegateDrag("n"!=i&&i||n||"both")&&this._handleDragStop(t,e)},_handleDragStop:function(t,e){this.momentumStarted=!1,t="vertical"!=this._directionLock?t:0,e="horizontal"!=this._directionLock?e:0,this.scrollTo(this._scrollStartX-t,this._scrollStartY-e),this.$element.trigger("scroll-stop",{dx:t,dy:e})},_handleMomentumStart:function(t,e){this.momentumStarted=!0,this.$element.trigger("momentum-start",{dx:t,dy:e})},_handleMomentumStop:function(t,e){this.momentumStarted=!1,this.$element.trigger("momentum-stop",{dx:t,dy:e})}});return n.addWidgetConstructorAsjQueryPlugin("wpMomentumScrollView",r),n.SimpleMomentumScrollView=r,n.addWidgetConstructorAsjQueryPlugin("wpSimpleMomentumScrollView",r),r}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(8),n(9)],void 0===(o=function(t,e,n){var i=n.build("Widget.PanelGroup",n,{_widgetName:"panel-group",defaultOptions:{defaultIndex:0,panelClass:"wp-panel",activeClass:"wp-panel-active",toggleStateEnabled:!1,tabGroups:null},_setUp:function(){var t=this;return this.tabGroups=[],this._tabCallback=function(e,n){t._handleTabSelect(e,n)},this.showLock=0,this.tabDriver=null,i.prototype._super.prototype._setUp.apply(this,arguments)},_attachBehavior:function(){this.activeElement=null,this.activeIndex=-1,this.$element.addClass(this.options.panelClass);var t=this.options.defaultIndex;"number"==typeof t&&t>=0&&this.showPanel(t),this.addTabGroup(this.options.tabGroups)},_getElementIndex:function(e){return e?t.inArray(e,this.$element.get()):-1},_getElementByIndex:function(t){return this.$element.eq(t)[0]},_getElement:function(t){return"number"==typeof t?this._getElementByIndex(t):t},_syncTabGroups:function(){for(var t=this.tabGroups,e=this.activeIndex,n=0;n<t.length;n++){var i=t[n];i!==this.tabDriver&&i.selectTab(e)}},showPanel:function(e){if(!this.showLock){++this.showLock;var n=this._getElement(e),i=this.activeElement,o=this.options.activeClass;if(n)if(n!==i){var r={panel:n,panelIndex:this._getElementIndex(n)};this.trigger("wp-panel-before-show",r),i&&this.hidePanel(i),t(n).addClass(o),this.activeElement=n,this.activeIndex=this._getElementIndex(n),this._syncTabGroups(),this.trigger("wp-panel-show",r)}else this.options.toggleStateEnabled&&this.hidePanel(n);--this.showLock}},hidePanel:function(e){var n="number"==typeof e?this.$element.eq(e)[0]:e;if(n){var i={panel:n,panelIndex:this._getElementIndex(n)};this.trigger("wp-panel-before-hide",i),t(n).removeClass(this.options.activeClass),n===this.activeElement&&(this.activeElement=null,this.activeIndex=-1),this.trigger("wp-panel-hide",i)}},_handleTabSelect:function(t,e){this.showLock||(this.tabDriver=t.target,this.showPanel(e.tabIndex),this.tabDriver=null)},addTabGroup:function(n){if(n){for(var i=(n=e.ensureArray(n)).length,o=0;o<i;o++){var r=n[o];-1===t.inArray(r,this.tabGroups)&&(this.tabGroups.push(r),r.bind("wp-tab-select",this._tabCallback))}++this.showLock,this._syncTabGroups(),--this.showLock}},removeTabGroup:function(n){for(var i=(n=e.ensureArray(n)).length,o=0;o<i;o++){var r=n[o];sets=this.tabGroups,loc=t.inArray(r,sets),-1!==loc&&sets.splice(loc,1)}}});return n.addMultiElementWidgetConstructorAsjQueryPlugin("wpPanelGroup",i),i}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(8),n(9),n(26),n(28),n(25),n(13)],void 0===(o=function(t,e,n,i,o,r,a){var s=function(e,n){n=t.extend({},s.prototype.defaultOptions,n),i.call(this,e,n)};e.inherit(s,i),t.extend(s.prototype,{defaultOptions:t.extend({},i.prototype.defaultOptions,{angleThreshold:30,direction:"horizontal"}),_startDrag:function(e,n){this._isNativeScroller=0!=t(e.target).closest(".scrollable").length,s.prototype._super.prototype._startDrag.call(this,e,n)},_handleDrag:function(t,e){var n=e.x-this.startX,i=e.y-this.startY,o=this.options;if(!this.dragStarted){var r=Math.abs(n),a=Math.abs(i);if(r>=o.dragThreshold||a>=o.dragThreshold){var l=360,c="horizontal"===o.direction,u=c?a:r,h=c?r:a;if(h>0&&(l=Math.abs(Math.atan(u/h))*(180/Math.PI)),l>o.angleThreshold)return this._isNativeScroller&&this._stopTracking(),this._isNativeScroller}}var d=s.prototype._super.prototype._handleDrag.call(this,t,e);return!this.dragStarted||d},_stopDrag:function(t,e){var n=s.prototype._super.prototype._stopDrag.call(this,t,e);return!this.dragStarted||n},getDirection:function(){return this.options.direction}});var l=n.build("Widget.SwipePanelGroup",o,{_widgetName:"swipe-panel-group",defaultOptions:{defaultIndex:0,direction:"horizontal",snapThreshold:0,duration:200,animateWithJS:!1,animationEnabled:!0,swipeEnabled:!0,easing:"ease-out",animateClass:"wp-animate",widgetClass:"wp-swipe-panel-group",viewClass:"wp-swipe-panel-group-view",panelClass:"wp-swipe-panel-group-panel",previousClass:"wp-previous",nextClass:"wp-next",allowDelegation:!0,delegateElement:null,trackEvents:["mouse","touch","pen"]},_setUp:function(n,i){i=t.extend({},this.defaultOptions,i);this.$clip=t(n);var o=this.$clip[0],r=e.scopedFind(o,"."+i.panelClass,i.widgetClass,o);return this.$view=e.scopedFind(o,"."+i.viewClass,i.widgetClass,o),this._blockShowPanel=!0,l.prototype._super.prototype._setUp.call(this,r,i)},_attachBehavior:function(){l.prototype._super.prototype._attachBehavior.apply(this,arguments);var t=this;this._blockShowPanel=!1,this._position=0,this._startPosition=0,this._snapPosition=0,this._lastDelta=0,this._tracker=new s(this.$clip[0],{direction:this.options.direction,trackEvents:this.options.trackEvents,delegateElement:this.options.delegateElement,dragStart:function(e,n,i){return t._handleDragStart(n,i)},dragUpdate:function(e,n,i){return t._handleDragUpdate(n,i)},dragStop:function(e,n,i){return t._handleDragStop(n,i)}}),this._isHorizontal="vertical"!==this.options.direction,this._animationInProgress=!1,this._animator=null,this._animationCompleteCB=function(e){if(!e||!e.target||e.target==t.$view[0])return t._handleTransitionEnd()},this.options.animateWithJS?(this._animStartPos=0,this._animDistance=0,this._animator=new r(function(e){t._setViewPosition(t._animStartPos+t._animDistance*e)},{easing:this.options.easing,duration:this.options.duration,complete:this._animationCompleteCB})):this.$view.on("webkitTransitionEnd oTransitionEnd msTransitionEnd transitionend",this._animationCompleteCB)},_ready:function(){this._postShowPanel(this.options.defaultIndex)},_setUpBeforeAndAfterPanels:function(){var e=this.options,n=(this.$clip,this.$element),i=this.activeIndex,o=t(),r=t(),a=t();i>=0&&(r=n.eq(i),i>0&&(o=n.eq(i-1)),i<n.length&&(a=n.eq(i+1))),this.$clip.removeClass(e.animateClass);var s=e.activeClass+" "+e.previousClass+" "+e.nextClass,l=n.filter("."+e.activeClass+", ."+e.previousClass+", ."+e.nextClass);l.removeClass(s),this._setViewPosition(0),o.addClass(e.previousClass),r.addClass(e.activeClass),a.addClass(e.nextClass),0!=(l=l.filter(function(n){var i=t(this);return!i.hasClass(e.activeClass)&&!i.hasClass(e.previousClass)&&!i.hasClass(e.nextClass)})).length&&this.trigger("wp-panels-dequeued",{dequeued:l}),this.trigger("wp-panels-queued",{before:o,after:a,active:r,queued:o.add(a)})},_setElementPosition:function(n,i,o){var r=this._isHorizontal?i:0,a=this._isHorizontal?0:i,s=t.extend({unit:"px"},o);e.setElementTransform(n,"translate3d("+r+s.unit+","+a+s.unit+",0)")},_setViewPosition:function(t,e){this._position=t,this._setElementPosition(this.$view,t,e)},_updateSnapPosition:function(t){var e=this._isHorizontal?this.$clip.width():this.$clip.height(),n=this._lastDelta;Math.abs(t)<this.options.snapThreshold?this._snapPosition=0:n<=0&&t<n?this._snapPosition=-e:n>=0&&t>n?this._snapPosition=e:t!=n&&(this._snapPosition=0);var i=this.activeIndex;(0===i&&this._snapPosition>0||i+1===this.$element.length&&this._snapPosition<0)&&(this._snapPosition=0)},_postShowPanel:function(t){l.prototype._super.prototype.showPanel.apply(this,arguments),this._setUpBeforeAndAfterPanels()},showPanel:function(e){if(!this._blockShowPanel&&("number"!=typeof e&&(e=this._getElementIndex(e)),e>-1&&e!==this.activeIndex)){var n=this._isHorizontal?this.$clip.width():this.$clip.height(),i=e>this.activeIndex,o=i?-n:n,r=i?this.options.nextClass:this.options.previousClass;this._snapIndex=e,this.$element.removeClass(r),t(this._getElement(e)).addClass(r),this.options.animationEnabled?this._animatePanels(o):this._handleTransitionEnd()}},_handleTransitionEnd:function(){this._postShowPanel(this._snapIndex),this._animationInProgress=!1},_handleDragStart:function(t,e){this.options.swipeEnabled&&(this._animationInProgress&&(this.options.animateWithJS&&this._animator.stop(),this._handleTransitionEnd()),this.$clip.removeClass(this.options.animateClass),this._lastDelta=0,this._startPosition=this._position,this._snapPosition=0,this._snapIndex=this.activeIndex,this._handleDragUpdate(t,e))},_handleDragUpdate:function(t,e){if(this.options.swipeEnabled){var n=this._isHorizontal?t:e,i=this.activeIndex;if(0===i&&n>0||i+1>=this.$element.length&&n<0){var o=this._snapPosition;if(this._snapPosition=0,this.options.allowDelegation&&this._tracker.delegateDrag())return void(this._animationInProgress=!1);this._snapPosition=o,n*=.4}this._tracker.blockDelegates(),this._updateSnapPosition(n),this._setViewPosition(this._startPosition+n),this._lastDelta=n}},_animatePanels:function(t){this._position;this._animationInProgress=!0,this.options.animateWithJS?(this._animator.stop(),this._animStartPos=this._position,this._animDistance=t-this._position,this._animator.start()):(this.$clip.addClass(this.options.animateClass),this._setViewPosition(t))},enableAnimation:function(){this.options.animationEnabled=!0},disableAnimation:function(){this.options.animationEnabled=!1},enableSwipe:function(){this.options.swipeEnabled=!0},disableSwipe:function(){this.options.swipeEnabled=!1},_handleDragStop:function(t,e){this.options.swipeEnabled&&(this._snapIndex=this.activeIndex,this._snapPosition>0?--this._snapIndex:this._snapPosition<0&&++this._snapIndex,this._animatePanels(this._snapPosition))}});return n.addWidgetConstructorAsjQueryPlugin("wpSwipePanelGroup",l),l}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(68)],void 0===(o=function(t,e){var n={cloneJSONObject:function(e){if(t.isArray(e))for(var i=new Array,o=e.length,r=0;r<o;r++){var a=e[r];i[r]="object"==typeof a?n.cloneJSONObject(a):a}else{i=new Object;for(p in e){a=e[p];i[p]="object"==typeof a?n.cloneJSONObject(a):a}}return i},Notifier:function(){this.observers=[],this.suppressNotifications=0}};t.extend(n.Notifier.prototype,{addObserver:function(t){if(t){for(var e=this.observers.length,n=0;n<e;n++)if(this.observers[n]==t)return;this.observers[e]=t}},removeObserver:function(t){if(t)for(var e=0;e<this.observers.length;e++)if(this.observers[e]==t){this.observers.splice(e,1);break}},notifyObservers:function(t,e){if(t&&!this.suppressNotifications)for(var n=this.observers.length,i=0;i<n;i++){var o=this.observers[i];o&&("function"==typeof o?o(t,this,e):o[t]&&o[t](this,e))}},enableNotifications:function(){--this.suppressNotifications<0&&(this.suppressNotifications=0,n.Debug.reportError("Unbalanced enableNotifications() call!\n"))},disableNotifications:function(){++this.suppressNotifications}});var i={};function o(){n.Notifier.call(this),this.animationID=o.nextID++}function r(t,e,i){n.Animation.call(this),this.handler=t,this.handlerContext=e,this.data=i}function a(e,i,o,r){n.Notifier.call(this),this.animation=e,this.position=0,this.duration=-1,this.easing="function"==typeof r?r:t.easing[r||""],this.easing=this.easing||t.easing.linear,void 0!==i&&(this.position=i),void 0!==o&&(this.duration=o),this.timeline=null,this.dScale=1,this.dDuration=0,this.done=!1}function s(e){this.parameters={},e&&t.extend(this,e)}function l(e){n.Animation.call(this),t.extend(this,n.Timeline.config),t.extend(this,e),this.timer=0,this.timerStart=0,this.currentPosition=0,this.lastUpdate=0,this.duration=0,this.interval=1e3/this.fps,this.objects=[],this._needsSort=!1,this._cachedDuration=-1}o.nextID=1,t.extend(o.prototype,n.Notifier.prototype,{setup:function(){},update:function(t,e,n){},getDuration:function(){return 0}}),t.extend(r.prototype,o.prototype,{update:function(t,e,n){this.handler&&this.handler.call(this.handlerContext,t,e,this.data)}}),t.extend(a.prototype,n.Notifier.prototype,{setup:function(t,e){this.timeline=t;var n=this.duration,i=this.animation.getDuration();this.dScale=-1!=n&&0!=n?i/n:1,this.dDuration=-1!=n?n:i,this.done=!1,this.animation&&this.animation.setup&&this.animation.setup()},update:function(t,e){if(!this.done){var n=t,i=this.dDuration;if(n>=i&&(n=0==i?i=1:i),this.animation){var o=this.easing(n/i,n,0,1,i);this.animation.update(n*this.dScale,o,e)}n>=i&&this.complete()}},complete:function(){this.done=!0,this.timeline&&this.timeline.updateComplete(this)},getPosition:function(){return this.position},setPosition:function(t){this.position=t},getDuration:function(){return-1!=this.duration?this.duration:this.animation?this.animation.getDuration():0},setDuration:function(t){this.duration=t>=0?t:-1}}),l.config={dropFrames:!0,fps:60},t.extend(l.prototype,o.prototype,{play:function(t){this.notifyObservers("onPlay"),this.setup(this);var e=new s(t);this.timerStart=(new Date).getTime();var n=this,i=function(){n.handleTimer(e,i)};this.handleTimer(e,i)},stop:function(){this.notifyObservers("onStop"),this.timer&&clearTimeout(this.timer),this.timer=0,this.timerStart=0},seek:function(t,e){this.notifyObservers("onSeek"),this.stop(),this.currentPosition=t,this.setup(this);var n=new s(e);this.update(this.currentPosition,1,n)},add:function(t,e,n,i){var o=new a(t,e,n,i);this.objects.push(o),this._needsSort=!0,this._cachedDuration=-1},_sortObjects:function(){this._needsSort&&this.objects.sort(function(t,e){var n=t.position-e.position;return 0===n&&t.animation.animationID&&e.animation.animationID&&(n=t.animation.animationID-e.animation.animationID),n})},getDuration:function(t){var e=this._cachedDuration;if(t||e<0){var n=this.objects,i=this.objects.length,o=Math.max;e=0;for(var r=0;r<i;r++){var a=n[r];e=o(e,a.position+a.getDuration())}this._cachedDuration=e}return e},update:function(t,e,n){this._needsSort&&this._sortObjects(),this.notifyObservers("onUpdate",{elapsed:t,easingConst:e});var i=this.objects,o=i.length,r=this.lastUpdate,a=t<r,s=a?-1:o,l=a?-1:1;if(o>0)for(var c=a?o-1:0;c!=s;c+=l){var u=i[c],h=u.position,d=h+u.getDuration();a?d>=t&&h<=r&&u.update(t<h?0:t-h,n):h<=t&&d>=r&&u.update(t-h,n)}this.lastUpdate=t},handleTimer:function(t,e){var n=this.currentPosition+((new Date).getTime()-this.timerStart);if(this.update(n,1,t),n<this.duration){this.timer=setTimeout(e,this.interval)}else this.stop()},setup:function(t){this._needsSort&&this._sortObjects(),n.Animation.prototype.setup.call(this,t);for(var e=this.objects,i=this.objects.length,o=0;o<i;o++){var r=e[o];r._done=!1,r.setup(this)}this.duration=this.getDuration()},updateComplete:function(t){t._done=!0}}),n.Animation=o,n.Trigger=r,n.TimelineObject=a,n.Timeline=l,n.createTimeline=function(t){return new n.Timeline(t)},n.createTween=function(t){var e=i[t];return e?e.func.apply(e.context,Array.prototype.slice.call(arguments,1)):null},n.addTweenType=function(t,e,n){i[t]={func:e,context:n}},n.createTimelineFromData=function(t){for(var e=jQuery.Edgerton.createTimeline(),i=t.length,o=0;o<i;o++){var r=t[o],a=null;a=r.timeline?n.createTimelineFromData(r.timeline):n.createTween.apply(null,r.tween),e.add(a,r.position,r.duration,r.easing)}return e};var c={style:0,attribute:1,property:2},u={};function h(e,i,o,r,a){n.Animation.call(this),this.elements=i,this.deferElementResolution=!0,this.tweenType=c[e],this.updateTriggered=!1,this.property=o,this.fromValue=void 0,this.toValue=r,this.duration=1e3,this.valueTemplate=null,this.tokens=null,this.fromValues=null,a&&t.extend(this,a),this.deferElementResolution=this.deferElementResolution||"string"==typeof i&&-1!=i.search(/\$\{[^{}]+}/),this.deferElementResolution||(this.elements=resolveElementSelector(i)),t.isArray(r)||(r=[r]);for(var s=this.toValues=[],l=r.length,u=0;u<l;u++){var h=r[u],d=new Object;d.value=new Number(h.replace(/[a-zA-Z%]+$/,"")),d.unit=h.replace(/^-?[0-9]*(\.[0-9]+)?/,""),s.push(d)}if(l>1&&!this.valueTemplate&&alert("Multiple values specified for attribute tween, but no template was provided!"),!(l>1)||this.fromValue&&t.isArray(this.fromValue)||alert("Multiple values specified for attribute tween, but no from values specified!"),this.fromValue&&!t.isArray(this.fromValue)&&(this.fromValue=[this.fromValue]),this.fromValue){var f=this.fromValue.length,p=this.fromValues=[];for(u=0;u<f;u++){h=this.fromValue[u];p[u]=new Number(h.replace(/[a-zA-Z%]+$/,""))}this.toValues.length!=this.fromValues.length&&alert("Number of 'from' and 'to' values does not match for "+this.tweenType+" tween.")}this.valueTemplate&&(this.tokens=this.parseTemplate(this.valueTemplate))}return h.Token=function(t,e){this.value=t,this.isPlaceholder=e},t.extend(h.prototype,n.Animation.prototype,{setup:function(t){this.updateTriggered=!1},update:function(t,e,n){var i=this.getElementSet(n);this.updateTriggered||(this.updateTriggered=!0,this.setupForAnimation(n));for(var o=this.tweenType,r=this.property,a=i.length,s=0;s<a;s++){var l=i[s],c=this.getPropertyTweenData(l,o,r);if(c.animationID==this.animationID){for(var u=c.fromValues,h=c.toValues,d=c.tokens,f=u.length,p=[],g=0;g<f;g++){var m=u[g],v=h[g];p.push(m+(v.value-m)*e+v.unit)}var _="";if(d){for(var y=d.length,b=[],w=0;w<y;w++){var S=d[w];S.isPlaceholder?b.push(p[S.value]):b.push(S.value)}_=b.join("")}else _=p.join("");switch(o){case 0:l.style[r]=_;break;case 1:l.setAttribute(r,_);break;case 2:l[r]=_}}}},getDuration:function(){return this.duration},resolveElementSelector:function(e){var n=this.elements;if(e&&"string"==typeof n&&-1!=n.search(/\$\{/)){var i=n.replace(/[\$\{\}]/g,"");i||alert("Invalid parameter name: "+n),void 0===(n=e.parameters[i])&&alert("Animation parameter ${"+i+"} is undefined!")}return t(n)},getElementSet:function(t){var e=this.animationID;t.animData||(t.animData={});var n=t.animData[e];return n||(n=t.animData[e]=this.deferElementResolution?this.resolveElementSelector(t):this.elements),n},setupForAnimation:function(e){for(var n=this.tweenType,i=this.property,o=this.getElementSet(e),r=o.length,a=0;a<r;a++){var s=o[a],l=this.getPropertyTweenData(s,n,i);if(l.animationID=this.animationID,l.toValues=this.toValues,l.tokens=this.tokens,this.fromValues)l.fromValues=this.fromValues;else{var c;switch(n){case 0:c=t(s).css(i);break;case 1:c=s.getAttribute(i);break;case 2:c=s[i]+""}void 0==c&&(c="0"),l.fromValues=[new Number(c.replace(/[a-zA-Z%]+$/,""))]}}},parseTemplate:function(t){var e=u[t||""];if(!e){e=[];for(var n=t.length,i=0,o=/@@[0-9]+@@/g,r=null;i<n&&(r=o.exec(t));)r.index!=i&&e.push(new h.Token(t.substring(i,r.index),!1)),e.push(new h.Token(parseInt(r[0].replace(/@@/g,"")),!0)),i=o.lastIndex;i<n&&e.push(new h.Token(t.substring(i,n),!1)),u[t]=e}return e},getPropertyTweenData:function(e,n,i){var o=t.data(e,"tweenData");o||(o={},t.data(e,"tweenData",o));var r=o[n];r||(r=o[n]={});var a=r[i];return a||(a=r[i]={animationID:-1}),a}}),n.PropertyTween=h,n.addTweenType("style",function(t,e,n,i){return new h("style",t,e,n,i)}),n.addTweenType("attribute",function(t,e,n,i){return new h("attribute",t,e,n,i)}),n.addTweenType("property",function(t,e,n,i){return new h("property",t,e,n,i)}),n}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(5)],void 0===(o=function(t,e,n,i){var o=window.navigator.userAgent,r=/[Mm]obi/.test(o),a=t(document.body),s={DEFAULT_IMAGE_THRESHOLD:1024,DEFAULT_GRID_IMAGE_THRESHOLD:512,DESKTOP_IMAGE_THRESHOLD:2560,DESKTOP_GRID_IMAGE_THRESHOLD:1024,MAX_RENDITION_SIZE:8192,WIDTH_TOLERANCE:1,_initialize:function(){var n=t.Deferred(),i=t.Deferred();this.loader=new e.ImageLoader,this._handleViewerReady=t.proxy(this._handleViewerReady,this),a.bind("image-placeholders-loaded",function(){n.resolve()}).bind("luca-publication-viewer-ready",function(){i.resolve()}),t.when(n,i).then(this._handleViewerReady)},_handleViewerReady:function(e){for(var i=0,o=this,r=function(t,e){if(t.length)if("img"===t[0].nodeName.toLowerCase())e=Math.min(t[0].naturalWidth||t.width()||e,e);else{var n=t.data("imageWidth")||0,i=t.data("imageHeight")||0;if(n&&i){var o=n/i;o<1&&(e=Math.round(e*o)||e)}}return e},l=t.proxy(function(e,n,a){var s,l=t(e),c=l.css("background-image");c&&"none"!==c&&(c=c.replace(/url\("*/,"").replace(/"*\)/,""),(s=o.wantBigImage(l,r(l,n))?o.generateBigImageUrl(l,c,a):o.generateSmallImageUrl(l,c,a))&&c!=s&&(this.loader.add(s,{callback:function(t,e,n){var o="url("+t+")";l.css("background-image",o),i++}}),0))},this),c=t.proxy(function(e,n){var a,s=t(e),l=s.find("img"),c=l.attr("src");l.length&&c&&(a=o.wantBigImage(s,r(l,n))?o.generateBigImageUrl(l,c):o.generateSmallImageUrl(s,c))&&a!=c&&(this.loader.add(a,{callback:function(t,e,n){l[0].src=t,i++}}),0)},this),u=t(".section-background-image,.photo-container .photo-image,.image .image-wrapper"),h=u.length,d=0;d<h;d++){var f=u[d],p=t(f),g=s.DEFAULT_IMAGE_THRESHOLD;if(p.hasClass("image-wrapper"))c(f,g);else{var m=p.hasClass("photo-image");l(f,g=m?s.DEFAULT_GRID_IMAGE_THRESHOLD:g,m)}}this.loader.bind("wp-image-loader-start",function(t,e){a.addClass("responsive-images-loading").trigger("responsive-images-loading")}),this.loader.bind("wp-image-loader-empty",function(t,e){i&&n.publicationViewer.adjustVisuals(),a.removeClass("responsive-images-loading").addClass("responsive-images-loaded").trigger("responsive-images-loaded")}),this.loader.start()},wantBigImage:function(t,e){var n=s.WIDTH_TOLERANCE;if(r||0===n)return!1;var i=(window.devicePixelRatio||1)*t.width();return t.length&&i>e&&(n>=1||e/i<n)},generateBigImageUrl:function(t,n,i){var o=i?s.DESKTOP_GRID_IMAGE_THRESHOLD:s.DESKTOP_IMAGE_THRESHOLD,r=t.data("imageWidth")||0,a=t.data("imageHeight")||0;if(r&&a){var l=a/r;r=o,a=Math.round(r*l)}else r||a||(r=a=o);return e.Utils.setQueryParam(n,"size",Math.min(Math.max(r,a),s.MAX_RENDITION_SIZE))},generateSmallImageUrl:function(t,n,i){var o=i?s.DEFAULT_GRID_IMAGE_THRESHOLD:s.DEFAULT_IMAGE_THRESHOLD,r=t.data("imageWidth")||0,a=t.data("imageHeight")||0;if(i&&r&&a){var l=r/a;l>2.1&&(o=Math.round(o*l))}return e.Utils.setQueryParam(n,"size",Math.min(o,s.MAX_RENDITION_SIZE))}};s._initialize(),n.ResponsiveImages=s}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2)],void 0===(o=function(t,e){return e.Bootstrap={_nextId:0,domReadyWasTriggered:t.Deferred(),onLoadWasTriggered:t.Deferred(),bootstrapItemsDone:t.Deferred(),bootstrapItems:[],bootstrapEnabled:!0,init:function(){this.domReadyWasTriggered.then(t.proxy(function(){this.bootstrapEnabled&&this.run()},this))},getVersion:function(){if(!e.version)for(var n=t("script"),i=0;i<n.length;i++){var o=n[i],r=o&&o.src;r&&-1!=r.search(/.*\/runtime\/[^\/]+\/[^\/]+\.js/)&&(e.version=r.replace(/.*\/runtime\/([^\/]+)\/[^\/]+\.js.*/,"$1"))}return e.version||"1.21"},run:function(){this.executeBootItems(),this.bootstrapItemsDone.then(t.proxy(function(){this.bootRuntime()},this))},enable:function(){this.bootstrapEnabled=!0},disable:function(){this.bootstrapEnabled=!1},registerBootstrapItem:function(e,n){n=t.extend({priority:0,async:!1},n),this.bootstrapItems.push({id:this._nextId++,priority:n.priority,item:e,async:n.async})},executeBootItems:function(){var n=this.bootstrapItems;if(0!==n.length){n.sort(function(t,e){var n=t.priority-e.priority;return 0===n?t.id-e.id:n>0?-1:1});var i=[],o=t.Deferred(),r=o.promise();o.resolve();for(var a=0;a<n.length;a++){var s=n[a],l=s.item;if(l.init){var c=null;(c=s.async?l.init(e):r=u(r,l))&&i.push(c)}}t.when.apply(t,i).done(t.proxy(function(){this.bootstrapItemsDone.resolve()},this))}else this.bootstrapItemsDone.resolve();function u(t,n){return t.then(function(){return n.init(e)})}},bootRuntime:function(){e.IsSupported.transforms()?(e.initializePublicationViewer(),this.onLoadWasTriggered.then(function(){e.initializePublication()})):this._includeNoscript()},_includeNoscript:function(){var e=t("#noscript-static-layout"),n=e.data("href");n&&e.after('<link href="'+n+'" type="text/css" rel="stylesheet"/>')}},t(function(){e.Bootstrap.domReadyWasTriggered.resolve()}),t(window).load(function(){e.Bootstrap.onLoadWasTriggered.resolve()}),e.Bootstrap.init(),e.Bootstrap}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(6)],void 0===(o=function(t){var e=function(){this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null},n=e.prototype;return n.removeChild=function(t){if(t.parentNode===this){var e=t.previousSibling,n=t.nextSibling;this.firstChild===t&&(this.firstChild=n),this.lastChild===t&&(this.lastChild=e),e&&(e.nextSibling=n),n&&(n.previousSibling=e),t.parentNode=t.previousSibling=t.nextSibling=null}return t},n.appendChild=function(t){if(t&&(t.parentNode!==this||t!==this.lastChild)){var e=this.lastChild;t.parentNode&&t.parentNode.removeChild(t),e?(e.nextSibling=t,t.previousSibling=e):this.firstChild=t,this.lastChild=t,t.parentNode=this}return t},n.insertBefore=function(t,e){if(t&&t!==e)if(t.parentNode&&t.parentNode.removeChild(t),e){this.firstChild===e&&(this.firstChild=t);var n=e.previousSibling;t.previousSibling=n,t.nextSibling=e,e.previousSibling=t,n&&(n.nextSibling=t),t.parentNode=this}else this.appendChild(t);return t},n.insertAfter=function(t,e){return this.insertBefore(t,e&&e.nextSibling||null)},n.childNodes=function(){for(var t=[],e=this.firstChild;e;)t.push(e),e=e.nextSibling;return t},t.Node=e,e}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(6),n(8),n(26)],void 0===(o=function(t,e,n,i){var o=function(e,n){n=t.extend({},o.prototype.defaultOptions,n),i.call(this,e,n);var r=this;this._lastDX=0,this._lastDY=0,this._velocityX=0,this._velocityY=0,this._velocityTimer=0,this._vtCallback=function(){r._handleMomentumUpdate()}};return n.inherit(o,i),t.extend(o.prototype,{defaultOptions:t.extend({},i.prototype.defaultOptions,{momentumStart:null,momentumStop:null,useRequestAnimationFrame:!0,animationInterval:Math.round(1e3/60),velocityDamper:.95,minVelocityThreshold:.25,maxVelocity:1e3}),_startVelocityTimer:function(){this._stopVelocityTimer(),this.options.useRequestAnimationFrame?this._velocityTimer=requestAnimationFrame(this._vtCallback):this._velocityTimer=setTimeout(this._vtCallback,this.options.animationInterval)},_stopVelocityTimer:function(){this._velocityTimer&&(this.options.useRequestAnimationFrame?cancelAnimationFrame(this._velocityTimer):clearTimeout(this._velocityTimer),this._velocityTimer=0)},_dispatchDragUpdate:function(t,e){o.prototype._super.prototype.dragUpdate.call(this,t,e)},_dispatchDragStop:function(t,e){var n=0!=this._velocityTimer;this._stopVelocityTimer(),this._velocityX=0,this._velocityY=0,o.prototype._super.prototype.dragStop.call(this,t,e),n&&this.momentumStop(t,e)},_handleMomentumUpdate:function(){var t=this.options.velocityDamper,e=this.options.minVelocityThreshold,n=this._velocityX*t,i=this._velocityY*t;this._velocityX=Math.abs(n)<e?0:n,this._velocityY=Math.abs(i)<e?0:i,this._velocityX||this._velocityY?(this._lastDX+=this._velocityX,this._lastDY+=this._velocityY,this._dispatchDragUpdate(this._lastDX,this._lastDY),this._startVelocityTimer()):this._dispatchDragStop(this._lastDX,this._lastDY)},_startDrag:function(t,e){this._velocityTimer&&this._dispatchDragStop(this._lastDX,this._lastDY),o.prototype._super.prototype._startDrag.apply(this,arguments)},_handleDrag:function(t,e){var n=o.prototype._super.prototype._handleDrag.apply(this,arguments);return!this.dragStarted||n},_stopDrag:function(t,e){var n=this.dragStarted,i=o.prototype._super.prototype._stopDrag.apply(this,arguments);return!n||i},momentumStart:function(t,e){var n=this.options;n.momentumStart&&n.momentumStart(this,t,e)},momentumStop:function(t,e){var n=this.options;n.momentumStop&&n.momentumStop(this,t,e)},dragStart:function(t,e){o.prototype._super.prototype.dragStart.call(this,t,e),this._velocityX=0,this._velocityY=0,this._lastDX=t,this._lastDY=e},dragUpdate:function(t,e){var n=this.options.maxVelocity;this._dispatchDragUpdate(t,e);var i=t-this._lastDX,o=e-this._lastDY;i=i<0?Math.max(i,-n):Math.min(i,n),o=o<0?Math.max(o,-n):Math.min(o,n),this._velocityX=i,this._velocityY=o,this._lastDX=t,this._lastDY=e},dragStop:function(t,e){this._velocityX||this._velocityY?(this.momentumStart(t,e),this._startVelocityTimer()):this._dispatchDragStop(t,e)},_handleDelegateHandOff:function(t){this._velocityX=0,this._velocityY=0,o.prototype._super.prototype._handleDelegateHandOff.apply(this,arguments)}}),e.MomentumDragTracker=o,o}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(9),n(20)],void 0===(o=function(t,e,n){var i=e.build("Widget.Slider",e,{_widgetName:"slider",defaultOptions:{trackClassName:"wp-slider-track",trackFeedbackClassName:"wp-slider-track-feedback",thumbClassName:"wp-slider-thumb",useTransforms:!1},_attachBehavior:function(){var t=this,e=this.options;this.$track=this.$element.find("."+e.trackClassName),this.$trackFeedback=this.$element.find("."+e.trackFeedbackClassName),this.$thumb=this.$element.find("."+e.thumbClassName),this.percentage=0,this.position=0,this._resetConstraints(),this.tracker=new n(this.$thumb[0],{dragStart:function(e,n,i){t._handleDragStart(n,i)},dragUpdate:function(e,n,i){t._handleDragUpdate(n,i)},dragStop:function(e,n,i){t._handleDragStop(n,i)}})},_handleDragStart:function(t,e){this._resetConstraints(),this._startPos=this.position,this.trigger("wp-slider-drag-start",{position:this.position,percentage:this.percentage})},_handleDragUpdate:function(t,e){this.setPositionByPixel(this._startPos+t)},_handleDragStop:function(t,e){this._startPos=0,this.trigger("wp-slider-drag-stop",{position:this.position,percentage:this.percentage})},_resetConstraints:function(t){var e=this.$track.width(),n=this.$thumb.width();this.maxPos=e-n,this.setPositionByPixel(this.percentage*this.maxPos,t)},setPositionByPixel:function(t,e){t=(t=Math.round(t||0))<0?0:t>this.maxPos?this.maxPos:t,this._setThumbPosition(t,e)},setPositionByPercentage:function(t,e){this.percentage=t<0?0:t<1?t:1,this._setThumbPosition(Math.round(this.percentage*this.maxPos),e)},getPosition:function(){return this.position},getPositionAsPercentage:function(){return this.percentage},_setThumbPosition:function(t,e){if(this.percentage=t/this.maxPos,this.position=t,this.$trackFeedback.css("width",100*this.percentage+"%"),this.options.useTransforms){var n="translateX("+t+"px)";this.$thumb.css({webkitTransform:n,mozTransform:n,oTransform:n,msTransform:n,transform:n})}else this.$thumb.css("left",t+"px");(void 0===e||e)&&this.update()},update:function(){this._update(),this.trigger("wp-slider-update",{position:this.position,percentage:this.percentage})},_update:function(){}});return e.addWidgetConstructorAsjQueryPlugin("wpSlider",i),i}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(9),n(20)],void 0===(o=function(t,e,n){var i=e.build("Widget.Slider2d",e,{_widgetName:"slider2d",defaultOptions:{trackClassName:"wp-slider-track",thumbClassName:"wp-slider-thumb",ignoreY:!0,ignoreX:!1,useTransforms:!1},_attachBehavior:function(){var t=this,e=this.options;this.$track=this.$element.find("."+e.trackClassName),this.$thumb=this.$element.find("."+e.thumbClassName);var i=Math.round(this.$track.width()),o=Math.round(this.$track.height()),r=(Math.round(this.$thumb.width()),parseInt(this.$thumb.css("left"))||0),a=parseInt(this.$thumb.css("top"))||0,s=r/i,l=a/o;this.percentage={x:s,y:l},this.position={x:r,y:a},this._resetConstraints(),this.tracker=new n(this.$thumb[0],{dragStart:function(e,n,i){t._handleDragStart(n,i)},dragUpdate:function(e,n,i){t._handleDragUpdate(n,i)},dragStop:function(e,n,i){t._handleDragStop(n,i)}})},_handleDragStart:function(t,e){this._resetConstraints(),this._startPos={x:this.position.x,y:this.position.y},this.trigger("wp-slider-drag-start",{position:this.position,percentage:this.percentage})},_handleDragUpdate:function(t,e){this.options.ignoreY?this.setPositionByPixel(this._startPos.x+t,this._startPos.y):this.options.ignoreX?this.setPositionByPixel(this._startPos.x,this._startPos.y+e):this.setPositionByPixel(this._startPos.x+t,this._startPos.y+e)},_handleDragStop:function(t,e){this._startPos={x:0,y:0},this.trigger("wp-slider-drag-stop",{position:this.position,percentage:this.percentage})},_resetConstraints:function(t){var e=this.$track.width(),n=this.$track.height(),i=this.$thumb.outerWidth(),o=this.$thumb.outerHeight();this.maxPos={x:e-i,y:n-o},this.maxPos.x=this.maxPos.x<0?0:this.maxPos.x,this.maxPos.y=this.maxPos.y<0?0:this.maxPos.y,this.setPositionByPixel(this.percentage.x*this.maxPos.x,this.percentage.y*this.maxPos.y,t)},setPositionByPixel:function(t,e,n){t=(t=Math.round(t||0))<0?0:t>this.maxPos.x?this.maxPos.x:t,e=(e=Math.round(e||0))<0?0:e>this.maxPos.y?this.maxPos.y:e,this._setThumbPosition(t,e,n)},setPositionByPercentage:function(t,e,n){this.percentage.x=t<0?0:t<1?t:1,this.percentage.y=e<0?0:e<1?e:1,this._setThumbPosition(Math.round(this.percentage.x*this.maxPos.x),Math.round(this.percentage.y*this.maxPos.y),n)},getPosition:function(){return this.position},getPositionAsPercentage:function(){return this.percentage},_setThumbPosition:function(t,e,n){var i=this.maxPos.x,o=this.maxPos.y;t=t<0?0:t>i?i:t,e=e<0?0:e>o?o:e,this.position={x:t,y:e},this.percentage={x:i?t/i:0,y:o?e/o:0},this.options.useTransforms?WebPro.Utils.setElementTransform(this.$thumb,"translate3d("+t+"px,"+e+"px,0)"):this.$thumb.css({left:t+"px",top:e+"px"}),(void 0===n||n)&&this.update()},update:function(){this._update(),this.options.ignoreY?this.trigger("wp-slider-update",{position:this.position.x,percentage:this.percentage.x}):this.options.ignoreX?this.trigger("wp-slider-update",{position:this.position.y,percentage:this.percentage.y}):this.trigger("wp-slider-update",{positionX:this.position.x,positionY:this.position.y,percentageX:this.percentage.x,percentageY:this.percentage.y})},_update:function(){}});return e.addWidgetConstructorAsjQueryPlugin("wpSlider2d",i),i}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(8),n(9),n(19),n(33),n(27),n(25)],void 0===(o=function(t,e,n,i,o,r,a){var s=function(){i.call(this),o.call(this),this._x=0,this._y=0,this._width=0,this._height=0};e.inherit(s,o),t.extend(s.prototype,i.prototype,{getPosition:function(){return{x:this._x,y:this._y}},setPosition:function(t,e){this._x=t,this._y=e},getWidth:function(){return this._width},setWidth:function(t){this._width=t},getHeight:function(){return this._height},setHeight:function(t){this.height=t},getBounds:function(){return{width:this.getWidth(),height:this.getHeight()}},setBounds:function(t,e){this.setWidth(t),this.setHeight(e)}});var l=function(e,n){s.call(this),this.options=t.extend({},n),this.$element=t(e)};e.inherit(l,s),t.extend(l.prototype,{_setTransform:function(t){this.$element.css({webkitTransform:t,mozTransform:t,oTransform:t,msTransform:t,transform:t})},_syncTransform:function(){this._setTransform("translate("+this._x+"px,"+this._y+"px)")},setPosition:function(t,e){this._x=t,this._y=e,this._syncTransform()},setWidth:function(t){this._width=t,this.$element.css("width",t+"px")},setHeight:function(t){this._height=t,this.$element.css("height",t+"px")},getWidth:function(){return this.$element.width()},getHeight:function(){return this.$element.height()}});var c=function(t,e){l.call(this,t,e),this._zoom=1};e.inherit(c,l),t.extend(c.prototype,{_syncTransform:function(){this._setTransform("translate("+this._x+"px,"+this._y+"px) scale("+this._zoom+","+this._zoom+")")},getZoomWidth:function(){return this.$element.width()*this._zoom},getZoomHeight:function(){return this.$element.height()*this._zoom},getZoomBounds:function(){return{width:this.getZoomWidth(),height:this.getZoomHeight()}},getZoom:function(){return this._zoom},setZoom:function(t){this._zoom=t,this._syncTransform(),this.trigger("zoom-changed")}});var u=function(e,n,i,o){o=t.extend({},this.defaultOptions,o),l.call(this,e,o);var a=this;this.$view=t(n),this.$image=t(i),this._zoomAnimation=null,this.scrollview=new r(this.$element,{useTransform:!1}),this.zoomView=new c(this.$image),this.zoomView.bind("zoom-changed",function(){a._handleContentChanged()})};e.inherit(u,l),t.extend(u.prototype,{defaultOptions:{padding:0},_getClipBounds:function(){return{width:this.$element.width(),height:this.$element.height()}},_setViewBounds:function(t,e){this.$view.css({width:t+"px",height:e+"px"})},_getZoomCenterPoint:function(){var t=this.scrollview,e=t.$element,n=e.width(),i=e.height(),o=this.zoomView,r=o.getZoom()||1,a=(o.getWidth(),o.getHeight(),o.getPosition()),s=a.x,l=a.y;return{x:(t.scrollLeft()+n/2-s)/r,y:(t.scrollTop()+i/2-l)/r}},getZoom:function(){return this.zoomView.getZoom()},setZoom:function(t,e){t=t>0?t:1;var n=(e=e||{}).x,i=e.y;if("number"!=typeof n||"number"!=typeof i){var o=this._getZoomCenterPoint();n=o.x,i=o.y}var r=this.scrollview,a=r.$element,s=a.width(),l=a.height(),c=this.zoomView.getPosition(),u=n*t+c.x-s/2,h=i*t+c.y-l/2;this.zoomView.setZoom(t),u=Math.round(u<0?0:u),h=Math.round(h<0?0:h),r.scrollTo(u,h)},setZoomAnimate:function(e,n){var i=this,o=getZoomCenterPoint(),r=this._zoomAnimation,s=this.zoomView.getZoom(),l=t.extend({duration:500},n);r&&r.stop();var c=l.complete;l.complete=function(){i._zoomAnimation=null,c&&c()},(r=this._zoomAnimation=new a(function(t){setZoomLevel(s+(e-s)*t,{x:o.x,y:o.y})},l)).start()},_forceBrowserReflow:function(){return document.body.offsetHeight},scrollRectIntoView:function(e,n){var i=t.extend({padding:20,duration:500,zoomToFit:!1,canScaleUp:!1,zoomLevel:void 0,center:!0},n),o=this.scrollview,r=o.$element,s=o.scrollLeft(),l=o.scrollTop(),c=r.width(),u=r.height(),h=this.lastViewportWidth!=c||this.lastViewportHeight!=u,d=s,f=l,p=this.zoomView,g=p.getZoom(),m=e.width,v=e.height,_=g;i.zoomToFit?_=m<c&&v<u?i.canScaleUp?Math.min(c/m,u/v):1:Math.min(c/(m+i.padding),u/(v+i.padding)):i.zoomLevel&&(_=i.zoomLevel);var y=this._calculateViewZoomBounds(_),b=(p.getPosition(),e.x*_+y.imageX),w=e.y*_+y.imageY,S=m*_,x=v*_;d=Math.round(b-(c-S)/2),f=Math.round(w-(u-x)/2);d=d<0?0:d,f=f<0?0:f;var C=s!=d||l!=f,T=g!=_||h;this.lastViewportWidth=c,this.lastViewportHeight=u,i.center||!C||T||b>=s&&w>=l&&b+S<=s+c&&w+x<=l+u&&(C=!1);var I=this._zoomAnimation;if(I&&(I.stop(),this._zoomAnimation=null),C||T){var k=this,A=_-g,P=d-s,E=f-l;i.duration>0?(I=this._zoomAnimation=new a(function(t){T&&(p.setZoom(g+A*t),k._forceBrowserReflow()),C&&o.scrollTo(s+Math.round(P*t),l+Math.round(E*t))},i)).start():(T&&(p.setZoom(_),k._forceBrowserReflow()),C&&o.scrollTo(d,f))}},getImageBounds:function(){return this.zoomView.getBounds()},_getImageZoomBounds:function(t){var e=this.zoomView.getBounds();return e.width*=t,e.height*=t,e},_calculateViewZoomBounds:function(t){var e=this._getClipBounds(),n=this._getImageZoomBounds(t),i=this.options.padding,o=n.width,r=n.height,a=Math.max(i,(e.width-o)/2),s=Math.max(i,(e.height-r)/2);return{width:2*a+o,height:2*s+r,imageX:a,imageY:s,imageWidth:o,imageHeight:r}},_handleContentChanged:function(){var t=this._calculateViewZoomBounds(this.getZoom());this.zoomView.setPosition(t.imageX,t.imageY),this._setViewBounds(t.width,t.height)}});var h=n.build("Widget.InteractiveImage",n,{defaultOptions:{clipClassName:"wp-interactive-image-clip",viewClassName:"wp-interactive-image-view",contentClassName:"wp-interactive-image-content"},_attachBehavior:function(){this.$clip=this.$element.find("."+this.options.clipClassName),0===this.$clip.length&&(this.$clip=this.$element),this.$view=this.$element.find("."+this.options.viewClassName),this.$image=this.$element.find("."+this.options.contentClassName),this.imageZoomView=new u(this.$clip,this.$view,this.$image)},getClipBounds:function(){return this.imageZoomView._getClipBounds()},getImageBounds:function(){return this.imageZoomView.getImageBounds()},getZoom:function(){return this.imageZoomView.getZoom()},setZoom:function(t,e){this.imageZoomView.setZoom(t,e)},cover:function(e){e=t.extend({padding:0,horizontalPosition:"center",verticalPosition:"center",complete:void 0,duration:500},e);var n=this.imageZoomView._getClipBounds(),i=this.imageZoomView.getImageBounds(),o=0,r=0,a=n.width,s=n.height,l=Math.max(a/i.width,s/i.height),c=i.width*l,u=i.height*l,h=e.horizontalPosition,d=e.verticalPosition;"center"===h?o=(c-a)/2:"right"===h&&(o=c-a),"center"===d?r=(u-s)/2:"bottom"===h&&(r=u-s),o/=c,r/=u,a/=c,s/=u,this.zoomAndCenterRect({x:o,y:r,width:a,height:s},{percentageValues:!0,padding:e.padding,complete:e.complete,duration:e.duration,canScaleUp:e.canScaleUp})},fitAndCenter:function(e){e=t.extend({padding:20,complete:void 0,duration:500},e),this.zoomAndCenterRect({x:0,y:0,width:1,height:1},{percentageValues:!0,padding:e.padding,complete:e.complete,duration:e.duration,canScaleUp:e.canScaleUp})},zoomAndCenter:function(e,n,i,o){o=t.extend({complete:void 0,padding:20,duration:500},o),e=e>0?e:1;var r=this.imageZoomView.getImageBounds(),a=n*r.width,s=i*r.height;this.imageZoomView.scrollRectIntoView({x:a,y:s,width:1,height:1},{zoomLevel:e,padding:o.padding,complete:o.complete,duration:o.duration})},zoomAndCenterRect:function(e,n){var i=t.extend({},e);if((n=t.extend({canScaleUp:!0,padding:20,complete:void 0,duration:500,percentageValues:!1},n)).percentageValues){var o=this.imageZoomView.getImageBounds();i.x=i.x*o.width,i.y=i.y*o.height,i.width=i.width*o.width,i.height=i.height*o.height}this.imageZoomView.scrollRectIntoView(i,{complete:n.complete,duration:n.duration,zoomToFit:!0,canScaleUp:n.canScaleUp,padding:n.padding,center:!0})}});return n.addWidgetConstructorAsjQueryPlugin("wpInteractiveImage",h),h}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(2)],void 0===(o=function(t){return t.EmbeddedLinkViewer=function(t){var e=t?$(t):$("#embedded-link-viewer");0===e.length&&(e=$(document.createElement("div")).addClass("embedded-link-viewer").html('<div class="embed-container"></div><button class="close-button">Close</button>')).insertAfter("#publication-viewer"),this._$overlay=e,this._$container=e.find(".embed-container"),e.length&&(this._handleEmbeddedLinkClick=$.proxy(this._handleEmbeddedLinkClick,this),this._handleClickToExit=$.proxy(this._handleClickToExit,this),$(document).on("vclick",".link-button-wrapper .embedded-link-wrapper",this._handleEmbeddedLinkClick),this._$overlay.on("vclick",this._handleClickToExit))},$.extend(t.EmbeddedLinkViewer.prototype,{isVisible:function(){return this._$overlay.hasClass("visible")},_loadFrame:function(){var t=/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*([^\/\?#:]+)\.[^\/\?#:]+/.exec(this._$url),e=this._$url;if(t&&t[1]){switch(t[1]){case"youtube":e=WebPro.Utils.setQueryParam(e,"autoplay",1),e=WebPro.Utils.setQueryParam(e,"rel",0);break;case"vimeo":e=WebPro.Utils.setQueryParam(e,"autoplay",1)}this._$frame[0].src=e||"about:blank"}},show:function(t){var e=t.find("iframe").attr("src");e&&(this._$container.empty(),this._$url=e,this._$frame=$(document.createElement("iframe")),this._$frame.attr("frameborder","0"),this._$container.append(this._$frame),this._loadFrame(),this._$overlay.addClass("visible"),$(document.body).addClass("embedded-link-viewer-visible"))},hide:function(){this._$overlay.removeClass("visible"),$(document.body).removeClass("embedded-link-viewer-visible"),this._$container.empty()},_handleEmbeddedLinkClick:function(t){return this.show($(t.currentTarget)),!1},_handleClickToExit:function(t){return this.hide(),!1}}),t.EmbeddedLinkViewer}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(21),n(38)],void 0===(o=function(t,e,n,i,o){var r=n.IsSupported;function a(e,n){var i=this;this.$element=t(e),this.eventName=n||"",this.handlers=[],this._dirty=!1,this._enabled=!1,this._callback=function(t,e){return i._handleEvent.apply(i,arguments)}}return n.PublicationViewer=e.widget("Widget.PublicationViewer",e.Widget,{_widgetName:"publication-viewer",defaultOptions:{viewerClass:"publication-viewer",viewClass:"publication-view",splashClass:"splash",hideNavLinksClass:"hide-nav-links",hideNavLinksDelay:4e3,panelGroup:null},_attachBehavior:function(){var e=this,i=this.options,o=this.$element.children();this.splashLock=0,this._isEditor=this.$element.hasClass("editor"),this.$element.addClass("loading"),this._$splash=o.filter("."+this.options.splashClass),this._$pubView=o.filter("."+this.options.viewClass),this._$panelContainer=this._$pubView.children(".wp-swipe-panel-group"),i.panelGroup?this._panelGroup=i.panelGroup:(this._$panelContainer.wpSwipePanelGroup(),this._panelGroup=this._$panelContainer.data("wpSwipePanelGroup")),this._panelGroup.bind("wp-panels-queued",function(t,n){e._handlePanelsQueued(t,n)}),this._panelGroup.bind("wp-panels-dequeued",function(t,n){e._handlePanelsDequeued(t,n)}),this._panelGroup.bind("wp-panel-show",function(t,n){e._handlePanelShow(t,n)}),this._panelGroup.bind("wp-panel-hide",function(t,n){e._handlePanelHide(t,n)}),r.desktopUI()&&(r.touch()||(this.$element.addClass("touch-disabled"),this._panelGroup._tracker.disable()),t("body").addClass("desktop-ui-visible"),this._$navPreviousLink=o.filter(".publication-viewer-previous-link").on("click",function(t){return e.previousPage(),!1}),this._$navNextLink=o.filter(".publication-viewer-next-link").on("click",function(t){return e.nextPage(),!1}),this._asyncNavControlsCBTimer=0,this._asyncNavControlsCB=function(){e._syncNavControls()},this._hideTimerCallback=function(){e.$element.addClass(e.options.hideNavLinksClass)},this._hideTimer=0,this.$element.on("mousemove",function(t){return e._handleMouseMove(t)}),this._articleScrollStartCB=function(t,n){return e._handleArticleScrollStart(t,n)},this._articleScrollEndCB=function(t,n){return e._handleArticleScrollEnd(t,n)},this._articleScrollCB=function(t,n){return e._handleArticleScroll(t,n)},this._articleScrollThumbStartCB=function(t,n){return e._handleArticleScrollThumbStart(t,n)},this._articleScrollThumbStopCB=function(t,n){return e._handleArticleScrollThumbStop(t,n)},this._$pubView.on("article-start",this._articleScrollStartCB).on("article-end",this._articleScrollEndCB).on("before-article-scroll",this._articleScrollCB).on("scrollbar-thumb-drag-start",this._articleScrollThumbStartCB).on("scrollbar-thumb-drag-stop",this._articleScrollThumbStopCB),n.addGlobalKeyHandler(function(t){if(!n.isKeyHandlingException(t.target)){var i=n.keyCodes;switch(t.keyCode){case i.ARROW_LEFT:e.previousPage(),t.preventDefault();break;case i.ARROW_RIGHT:e.nextPage(),t.preventDefault()}}},0)),t(window).on("resize",function(t){e.adjustVisuals(t)}),!this.isEditor()&&n.EmbeddedLinkViewer&&(this._embeddedLinkViewer=new n.EmbeddedLinkViewer),this._createSwipeHintAnimation()},_createSwipeHintAnimation:function(){if(r.touch()){var t=this;if(!this._swipeHintAnimation){var e=this._$pubView.find(".cover-page"),i=e.find(".navigation-hint .segment"),o=i.length;if(o){this._swipeHintAnimation=new n.Timeline({loop:!0});for(var a=0;--o>=0;)this._swipeHintAnimation.opacity(i.eq(o),a,1e3,{fromOpacity:"0.2",toOpacity:"1"}),this._swipeHintAnimation.opacity(i.eq(o),a+1e3,1e3,{fromOpacity:"1",toOpacity:"0.2"}),a+=250}}this._swipeHintActivateCB||(e||(e=this._$pubView.find(".cover-page")),this._swipeHintActivateCB=function(n,i){t._createSwipeHintAnimation(),t._swipeHintAnimation&&(i.article===e[0]?t._swipeHintAnimation.play():t._swipeHintAnimation.stop())},this.bind("article-activated",this._swipeHintActivateCB))}},enableEditMode:function(){this._syncNavControls(!0)},disableEditMode:function(){this._syncNavControls(!0)},_getArticleHandler:function(e){var i;return e&&(i=n.getArticleHandler(t(e).data("articleType"))),i},isEditor:function(){return this._isEditor},getActiveArticle:function(){var t=this._panelGroup.activeElement;return t?this._getArticleElement(t):null},_syncNavControls:function(t){if(this._asyncNavControlsCBTimer&&(clearTimeout(this._asyncNavControlsCBTimer),this._asyncNavControlsCBTimer=0),t)setTimeout(this._asyncNavControlsCB,300);else{var e=this._isFirstPage(),n=this._isLastPage();this._$navPreviousLink&&this._$navPreviousLink[e?"hide":"show"](),this._$navNextLink&&this._$navNextLink[n?"hide":"show"]()}},_isFirstPage:function(){var t=this._panelGroup,e=t.activeIndex<=0;if(e){var n=this._getArticleElement(t.activeElement),i=this._getArticleHandler(n);i&&i.currentSubPageIsFirst&&!i.currentSubPageIsFirst(n)&&(e=!1)}return e},_isLastPage:function(){var t=this._panelGroup,e=t.$element.length-1,n=t.activeIndex===e;if(n){var i=this._getArticleElement(t.activeElement),o=this._getArticleHandler(i);o&&o.currentSubPageIsLast&&!o.currentSubPageIsLast(i)&&(n=!1)}return n},_navigateSubPages:function(t,e){var n=this._getArticleHandler(t),i=!1;return n&&n[e]&&(i=n[e](t)),i},showPage:function(e){"string"==typeof e&&(e.search("#")>=0&&(e=e.replace(/.*#/,"")),e=e?t("#"+e).closest(".wp-swipe-panel-group-panel")[0]:null),e&&this._panelGroup.showPanel(e)},previousPage:function(){var t=this._panelGroup,e=this._getArticleElement(t.activeElement);this._navigateSubPages(e,"previousSubPage")?this._syncNavControls(!0):t.previousPanel()},nextPage:function(){var t=this._panelGroup,e=this._getArticleElement(t.activeElement);this._navigateSubPages(e,"nextSubPage")?this._syncNavControls(!0):t.nextPanel()},adjustVisuals:function(e){e=e?[e]:null;var n=this;n._panelGroup.$element.each(function(){var i=n._getArticleElement(this);i&&t(i).triggerHandler("publication-resize",e)}),this.trigger("publication-adjust-visuals",{source:e})},_triggerArticleActivatedHandler:function(t){var e=this._getArticleHandler(t);e&&e.handleArticleActivated&&e.handleArticleActivated(t),this._syncNavControls(),this.trigger("article-activated",{article:t,handler:e})},_triggerArticleDeactivatedHandler:function(t){var e=this._getArticleHandler(t);e&&e.handleArticleDeactivated&&e.handleArticleDeactivated(t),this.trigger("article-deactivated",{article:t,handler:e})},_triggerArticleQueuedHandler:function(t,e){var n=this._getArticleHandler(t);n&&n.handleArticleQueued&&n.handleArticleQueued(t,e),this.trigger("article-queued",{article:t,location:e,handler:n})},_triggerArticleDequeuedHandler:function(t){var e=this._getArticleHandler(t);e&&e.handleArticleDequeued&&e.handleArticleDequeued(t),this.trigger("article-dequeued",{article:t,handler:e})},_triggerArticleNavHandlers:function(){var t=this._panelGroup,e=t.$element,n=this._getArticleElement(t.activeElement);n&&this._triggerArticleActivatedHandler(n),(n=this._getArticleElement(e.filter("."+t.options.previousClass)[0]))&&this._triggerArticleQueuedHandler(n,"before"),(n=this._getArticleElement(e.filter("."+t.options.nextClass)))&&this._triggerArticleQueuedHandler(n,"after")},_getArticleElement:function(e){var n=t(e);return n.hasClass("article")?n[0]:n.find(".article")[0]},_handleMouseMove:function(t){this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=0),this.$element.removeClass(this.options.hideNavLinksClass),t.target!=this._$navPreviousLink[0]&&t.target!=this._$navNextLink[0]&&(this._hideTimer=setTimeout(this._hideTimerCallback,this.options.hideNavLinksDelay))},_handlePanelShow:function(t,e){var n=this._getArticleElement(e.panel);this._triggerArticleActivatedHandler(n)},_handlePanelHide:function(t,e){var n=this._getArticleElement(e.panel);this._triggerArticleDeactivatedHandler(n)},_handlePanelsQueued:function(t,e){var n=this._getArticleElement(e.before),i=this._getArticleElement(e.after);this._triggerArticleQueuedHandler(n,"before"),this._triggerArticleQueuedHandler(i,"after")},_handlePanelsDequeued:function(t,e){var n=this;e.dequeued.each(function(){var t=n._getArticleElement(this);n._triggerArticleDequeuedHandler(t)})},initializeSplash:function(){var t=this;function n(e){var n=t._$splash.find(e),i=n.length&&n.css("backgroundImage");if(i&&"none"!=i){var o=new Image;o.onload=function(){n.addClass("visible")},o.src=i.replace(/^\s*url\(['"]?|['"]?\)\s*$/g,"")}}n(".logo"),n(".background");var i=this._$splash.find(".wp-progress-bar");if(i.length){var o=new e.Widget.ProgressBar(i,{useFloatPercentage:!0});this.bind("load-image-placeholders",function(t,e){var n=0,i=e.$placeholders.length,r=this;r.showSplash(),e.loader.bind("wp-image-loader-load-success wp-image-loader-load-error",function(){o.setPercentage(++n/i),n>=i&&setTimeout(function(){r.hideSplash()},1e3)})})}},showSplash:function(){this.splashLock||(this.$element.addClass("loading"),this._$splash.show(),t(document.body).trigger("luca-splash-visible")),++this.splashLock},hideSplash:function(){--this.splashLock<1&&(this.splashLock=0,this.$element.removeClass("loading"),this._$splash.hide(),t(document.body).trigger("luca-splash-hidden"))},_handleArticleScrollThumbStart:function(t,e){this.$element.addClass("scrollbar-thumb-active")},_handleArticleScrollThumbStop:function(t,e){this.$element.removeClass("scrollbar-thumb-active")},_handleArticleScrollStart:function(t,e){this.$element.removeClass(this.options.hideNavLinksClass)},_handleArticleScrollEnd:function(t,e){this.$element.removeClass(this.options.hideNavLinksClass)},_handleArticleScroll:function(t,e){this.$element.addClass(this.options.hideNavLinksClass)},initializeArticle:function(e){t(e);var n=this._getArticleHandler(e);n&&n.initialize&&n.initialize(e)},initializeArticles:function(){var t=this;this._panelGroup.$element.each(function(){var e=t._getArticleElement(this);t.initializeArticle(e)})},_throttledAdjustVisualsInterval:500,_throttledAdjustVisuals:function(){if(!this._tavTimer){if(!this._throttledAdjustVisualsCallback){var t=this;this._throttledAdjustVisualsCallback=function(){t._tavTimer=0,t.adjustVisuals()}}this._tavTimer=setTimeout(this._throttledAdjustVisualsCallback,this._throttledAdjustVisualsInterval)}},loadImagePlaceholders:function(e){var n=this,i=this.$element.find(".image-placeholder-link,.background-image-placeholder-link").filter(function(){return!!n._getImagePlaceholderHref(t(this))}),o=i.length,r=t.Deferred();if(o>0){var a=e&&e.triggerCount||o,s=i.slice(0,a),l=i.slice(a);this._loadImagePlaceholders(s,{doNotify:!0}).then(function(){return r.resolve(),n._loadImagePlaceholders(l,{triggerAdjustVisuals:!0})}).then(function(){t(document.body).trigger("image-placeholders-loaded")})}else r.resolve(),t(document.body).trigger("image-placeholders-loaded");return r.promise()},_getImagePlaceholderHref:function(t){var e="";return t&&t[0]&&(e=t[0].href||t.data("href")||""),e},_loadImagePlaceholders:function(n,i){var o=this,r=t.Deferred(),a=new e.ImageLoader({numAsyncRequestsAllowed:10}),s=this;function l(n){var r=t(n),l=o._getImagePlaceholderHref(r);if(l){var c=r.data();l.search(/([^?#]+)?\?([^&#=]+=[^#&]*&)*size=[0-9]+/)<0&&(l=e.Utils.setQueryParam(l,"size","1024")),a.add(l,{callback:function(t,e,o){var a=null,l=!1;if(r.hasClass("image-placeholder-link")){var u=document.createElement("img");u.setAttribute("alt",""),u.src=t,r.replaceWith(u),a=u,l=!0}else(a=n.parentNode)&&(a.style.backgroundImage="url("+t+")");if(a){var h=c.imageWidth||e,d=c.imageHeight||o;c.src&&a.setAttribute("data-src",c.src),h&&a.setAttribute("data-image-width",h),d&&a.setAttribute("data-image-height",d),r.remove(),l&&i.triggerAdjustVisuals&&s._throttledAdjustVisuals()}}})}}i=i||{};var c=n.length;if(c>0){for(var u=0;u<c;u++)l(n[u]);a.on("wp-image-loader-empty",function(){r.resolve()}),i.doNotify&&this.trigger("load-image-placeholders",{$placeholders:n,loader:a}),a.start()}else r.resolve();return r.promise()}}),n.initializePublicationViewer=function(){if(!n.initializePublicationViewer.didExecute){var i=new e.Widget.PublicationViewer(t(".publication-viewer")),o=t(document.body);n.publicationViewer=i,i.initializeSplash(),i.showSplash(),r.svg()?o.removeClass("no-svg").addClass("svg"):o.removeClass("svg").addClass("no-svg"),r.touch()&&o.addClass("touch-enabled"),function(){try{if(e.isSafari&&/iP(hone|od|ad)/.test(navigator.platform)){var n=parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1],10);n<=7&&t("body").css({position:"fixed",width:"100%",height:"100%"})}}catch(t){}}();window.location.hostname;t(document.links).attr("target","_blank"),n.initializePublicationViewer.didExecute=!0,o.trigger("luca-publication-viewer-initialized")}},n.initializePublication=function(){if(!n.initializePublication.didExecute){n.initializePublication.didExecute=!0;var e=n.publicationViewer;e.loadImagePlaceholders().then(function(){var i=e._panelGroup,o=e._getArticleElement(i.activeElement);r.transforms()?(e.initializeArticles(),e._triggerArticleActivatedHandler(o)):(e._syncNavControls(),e.trigger("article-activated",{article:o,handler:null})),i._setUpBeforeAndAfterPanels(),r.desktopUI()&&r.transforms()&&n.enableGlobalKeyHandlers(),e.hideSplash(),e.isReady=!0,t(document.body).trigger("luca-publication-viewer-ready")})}},n.ArticleHandlerBase=function(){},t.extend(n.ArticleHandlerBase.prototype,{initialize:function(t){},handleArticleQueued:function(t,e){this._syncArticle(t)},handleArticleDequeued:function(t){var e=this._getArticleData(t);e&&(e.isVisible=!1)},handleArticleActivated:function(t){this._syncArticle(t)},handleArticleDeactivated:function(t){var e=this._getArticleData(t);e&&(e.isVisible=!1)},_attachArticleData:function(e){var n={isInitialized:!1,isVisible:!1,isDirty:!1};return t(e).data("articleHandlerData",n),n},_getArticleData:function(e){return t(e).data("articleHandlerData")||this._attachArticleData(e)},_syncArticle:function(e){var n=this,i=this._getArticleData(e);i.isVisible=!0,i.isInitialized?i.isDirty&&(i.isDirty=!1,n._adjustForResize(e)):(i.isInitialized=!0,i.isDirty=!1,this._addBehavior(e),t(e).on("publication-resize",function(t){i.isVisible?n._adjustForResize(e):i.isDirty=!0}))},_addBehavior:function(t){},_adjustForResize:function(t){},previousSubPage:function(t){return!1},nextSubPage:function(t){return!1},currentSubPageIsFirst:function(t){return!0},currentSubPageIsLast:function(t){return!0}}),n.articleHandlers={},n.registerArticleHandler=function(t,e){t&&e&&(n.articleHandlers[t]=e)},n.registerBasicArticleHandler=function(t,i){function o(){n.ArticleHandlerBase.call(this)}e.inherit(o,n.ArticleHandlerBase,i),n.registerArticleHandler(t,new o)},n.getArticleHandler=function(t){return n.articleHandlers[t||""]},n.keyHandlingExceptions={input:!0,select:!0,textarea:!0},n.isKeyHandlingException=function(t){return t&&(n.keyHandlingExceptions[t.nodeName.toLowerCase()]||"true"==t.contentEditable||""==t.contentEditable)},n.keyCodes={BACKSPACE:8,TAB:9,ENTER:13,RETURN:13,SHIFT:16,CONTROL:17,ALT:18,PAUSE:19,BREAK:19,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,INSERT:45,DELETE:46},t.extend(a.prototype,{defaultPriority:50,nextId:1,_handleEvent:function(t,e){this._dirty&&this.sortHandlers();for(var n=this.handlers.slice(0),i=n.length,o=0;o<i;o++){var r=n[o];if(!r.removed&&r.handler.apply(this,arguments))break}},sortHandlers:function(){this.handlers.sort(function(t,e){var n=e.priority-t.priority;return 0===n&&(n=e.id-t.id),n}),this._dirty=!1},indexOf:function(t){for(var e=this.handlers,n=e.length,i=0;i<n;i++)if(e[i].handler===t)return i;return-1},add:function(t,e){var n=this.indexOf(t);e="number"==typeof e?e:this.defaultPriority,n>=0?this.handlers[n].priority=e:this.handlers.push({id:this.nextId++,handler:t,priority:e,removed:!1}),this._dirty=!0},remove:function(t){var e=this.indexOf(t);e>=0&&(this.handlers[e].removed=!0,this.handlers.splice(e,1))},isEnabled:function(){return this._enabled},enable:function(){this._enabled||(this.$element.on(this.eventName,this._callback),this._enabled=!0)},disable:function(){this._enabled&&(this.$element.off(this.eventName,this._callback),this._enabled=!1)}}),n.addGlobalKeyHandler=function(t,e){n.keydownBinding||(n.keydownBinding=new a(window,"keydown")),n.keydownBinding.add(t,e)},n.removeGlobalKeyHandler=function(t,e){n.keydownBinding&&n.keydownBinding.remove(t,e)},n.enableGlobalKeyHandlers=function(){n.keydownBinding&&n.keydownBinding.enable()},n.disableGlobalKeyHandlers=function(){n.keydownBinding&&n.keydownBinding.disable()},n.PublicationViewer}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){var e=function(t){return{width:t.width(),height:t.height()}},n=function(t){var e=t.children(".auto-size-span");return e.length<1&&(t.wrapInner('<span class="auto-size-span" style="display:inline-block;"></span>'),e=t.children(".auto-size-span")),{width:e.width(),height:e.height()}};function i(t,e){t.css("fontSize",e/16+"rem")}return function(o,r){r=t.extend({preScale:1,minFontSize:10},r);var a=t(o);a.css({fontSize:"",maxHeight:""});var s=r.minFontSize,l=parseInt(a.css("fontSize"),10)||0,c=l,u=1;1!=r.preScale&&((c*=u=r.preScale)<s&&(u=(c=s)/l),i(a,c));for(;c&&c>s;){var h=e(a),d=n(a),f=d.width>0?d.width:1,p=d.height>0?d.height:1,g=h.width,m=h.height,v=Math.min(g/f,m/p)||1;if(v>=1||f-g<=1&&p-m<=1)break;(c*=v)<s&&(v=(c=s)/l),i(a,c),u*=v}return c<=s&&a.css("maxHeight","none"),{fontSize:c,scale:u}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2),n(5)],void 0===(o=function(t,e,n){var i=e.getSectionsArticleHandler("default");function o(t){var e=t?/(-?[0-9\.]+)([^0-9\s]*)/.exec(t):0,n={value:NaN};return e&&(n.units=e[2],n.value=parseFloat(e[1])),n}e.registerSectionsArticleHandler("zoom-section",t.extend({},i,{defaultOptions:{start:0,stop:1,fromScale:1.2,toScale:1,fromX:"0px",toX:"0px",fromY:"0px",toY:"0px",fixed:!1},_initialize:function(t,e){this.allowImageEffect(t,e)?this.applyImageEffect(t,e):this.clearImageEffect(t,e),this.allowFixedWindow(t,e)?this.applyFixedWindow(t,e):this.clearFixedWindow(t,e),i._initialize.call(this,t,e)},allowPullQuoteAnimations:function(t,e,n){return n.props.isFullHeight},_addPullQuoteAnimations:function(t,e,n){this.allowPullQuoteAnimations(t,e,n)?i._addPullQuoteAnimations.call(this,t,e,n):this.clearPullQuoteAnimations(t,e,n)},clearPullQuoteAnimations:function(t,e,n){t.find(".pull-quote").css("opacity","").clearCompositeTransformProps({sync:!0})},allowImageEffect:function(e,n){if(n.props.isFullHeight)return!0;var i=t(e).data();return!!(i.zoomStart||i.zoomStop||i.zoomFrom||i.zoomTo||i.panXFrom||i.panXTo||i.panYFrom||i.panYTo)},applyImageEffect:function(e,n){var i=t(e),r=i.data("timeline"),a=i.find(".section-background-image"),s=i.data(),l=parseFloat(s.zoomStart),c=parseFloat(s.zoomStop),u=parseFloat(s.zoomFrom),h=parseFloat(s.zoomTo),d=o(s.panXFrom),f=o(s.panXTo),p=o(s.panYFrom),g=o(s.panYTo),m=this.defaultOptions.fromX,v=this.defaultOptions.fromY,_=this.defaultOptions.toX,y=this.defaultOptions.toY,b=i[0].offsetHeight;isNaN(l)&&isNaN(c)||(b=n.articleHeight),isNaN(l)&&(l=this.defaultOptions.start),isNaN(c)&&(c=this.defaultOptions.stop),isNaN(u)&&(u=this.defaultOptions.fromScale),isNaN(h)&&(h=this.defaultOptions.toScale),isNaN(d.value)||(m=String(d.value+d.units)),isNaN(f.value)||(_=String(f.value+f.units)),isNaN(p.value)||(v=String(p.value+p.units)),isNaN(g.value)||(y=String(g.value+g.units)),d=o(m),f=o(_),p=o(v),g=o(y);var w=d.value||f.value||p.value||g.value;(1!==u||1!==h||w)&&(l*=b,c*=b,m!=_&&(r.translateX(a,l,c,m,_),a.setCompositeTransformProp("translateX",m)),v!=y&&(r.translateY(a,l,c,v,y),a.setCompositeTransformProp("translateY",v)),u!=h&&(r.scale(a,l,c,u+"",h+""),a.setCompositeTransformProp("scale",u+"")),a.syncCompositeTransformProps({sync:!0}))},clearImageEffect:function(e,n){t(e).find(".section-background-image").clearCompositeTransformProps({sync:!0})},allowFixedWindow:function(e,n){var i=t(e).data("fixed");return void 0!==i?i:this.defaultOptions.fixed},applyFixedWindow:function(e,n){var i=t(e),o=i.data("timeline"),r=i.data("layer")||0,a=i.find(".section-background"),s=(n.$article,n.articleHeight),l=n.props,c=l.height,u=l.fromPosition,h=c,d=0;a.css("height",s+"px"),l.visible?-1!==r?(u=l.fromPosition,d=0):l.bottomDuration?(u=s-c,d=l.bottomDuration):(u=l.fromPosition,d=0):-1!==r?(u=l.fromPosition,d=0):(u=l.fromPosition-c,d=l.bottomDuration);var f=u+c,p=n.nextProps;p&&1===p.layer&&(f-=c,h=0),l.visibleAtEnd&&(l.scrollOutDuration?p&&1===p.layer||(-1===r?(h=l.scrollOutDuration,f=l.topDuration-l.height+l.scrollOutDuration):(h-=f-l.topDuration-l.scrollOutDuration,f=l.topDuration+l.scrollOutDuration)):-1===r?l.topDuration===l.bottomDuration?(h=0,f=0):(h=-l.toPosition,f=l.topDuration-l.height):(h-=f-l.topDuration,f=l.topDuration)),a.setCompositeTransformProp("translateY",-u+"px",{sync:!0}),f&&o.translateY(a,d,f,-u+"px",h+"px"),this.getDuration=this.fixedGetDuration},clearFixedWindow:function(e,n){t(e).find(".section-background").css("height","").clearCompositeTransformProps({sync:!0})},fixedGetDuration:function(e,n){return Math.max(n||0,t(e).data("duration")||0)}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2),n(5)],void 0===(o=function(t,e,n){var i={"zoom-in":{fromX:"0%",fromY:"0%",fromScale:"1",toX:"0%",toY:"0%",toScale:"1.2"},"zoom-out":{fromX:"0%",fromY:"0%",fromScale:"1.2",toX:"0%",toY:"0%",toScale:"1"},"pan-left":{fromX:"0%",fromY:"0%",fromScale:"1.2",toX:"10%",toY:"0%",toScale:"1.2"},"pan-right":{fromX:"0%",fromY:"0%",fromScale:"1.2",toX:"-10%",toY:"0%",toScale:"1.2"}};e.registerSectionsArticleHandler("card-flipbook-section",t.extend({},e.GenericSectionArticleHandler,{_initialize:function(n,o){for(var r=o.props,a=t(n),s=r.height,l=a.data("timeline"),c=a.find(".section-content-view"),u=a.find(".section-background-image"),h=-1===r.layer,d=a.data("spacing")||.75,f=(d=d>1?1:d)*s,p=f*(2/3),g=(1-d)*s,m=r.topDuration,v=null,_=Math.max(c.length,u.length),y=_-1,b=0,w=0;w<_;w++){var S=0===w?"visible":"hidden",x=f,C=u.eq(w),T=c.eq(w);if(T.length){var I=T[0].offsetHeight,k=s;0!==w||h||(k*=.9);var A=-I;x=Math.abs(A-k),this.addGroupAnimations(l,T,{$section:a,sectionOptions:o,offset:m,duration:x,fromY:k,toY:A,visibility:S,isFirst:0===w,isLast:w===y}),0===w&&(b=k),T.data("sectionYOffset",b),C.length&&C.data("cardTopSpacingOffset",m+Math.max(k-f,0))}if(C.length){var P={},E=m;0!==w||c.length&&!h||(E=Math.max(0,E-g)),0!==w&&(E=Math.max(0,m+g-p),l.replaceClass(C,E,"hidden","visible"),l.opacity(C,E,p,{fromOpacity:"0",toOpacity:"1"}),P.opacity="0",v&&l.replaceClass(v,E+p,"visible","hidden")),C.data("transitionInBegin",E),C.data("transitionInEnd",0===w?E:E+p),v&&(v.data("transitionOutBegin",E),v.data("transitionOutEnd",E+p)),w===y&&(C.data("transitionOutBegin",m+x),C.data("transitionOutEnd",m+x));var $=i[C.data("panAndZoom")||"none"];$&&($.fromX!=$.toX&&l.translateX(C,E,x,$.fromX,$.toX),$.fromY!=$.toY&&l.translateY(C,E,x,$.fromY,$.toY),$.fromScale!=$.toScale&&l.scale(C,E,x,$.fromScale,$.toScale),P[e.vendorPrefix+"transform"]="translate3d("+$.fromX+","+$.fromY+",0) scale("+$.fromScale+")"),(0!==w||$)&&C.css(P),C.addClass(S),v=C}m+=x-g,b+=I+f}},addGroupAnimations:function(t,n,i){i.isFirst||t.replaceClass(n,i.offset,"hidden","visible"),t.translateY(n,i.offset,i.duration,i.fromY+"px",i.toY+"px",{valueFilter:e.roundValueFilter}),i.isLast||t.replaceClass(n,i.offset+i.duration,"visible","hidden"),n.css(e.vendorPrefix+"transform","translate3d(0,"+i.fromY+"px,0)").addClass(i.visibility)}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(5),n(31)],void 0===(o=function(t,e,n,i,o){var r=n.getSectionsArticleHandler("default");n.registerSectionsArticleHandler("photo-grid-section",t.extend({},n.GenericSectionArticleHandler,{_initialize:function(t,e){this._addPhotoGridBehaviors(t,e)},_getNaturalHeight:function(e){var n=t(e);return n.removeClass("managed"),n[0].offsetHeight},_addPhotoGridBehaviors:function(e,n){var i=t(e),o=t.data(e,"timeline");this._addPhotoGroupAnimations(i,o,n)},_addPhotoGroupAnimations:function(e,i,o){var a=e.data(),s=e.closest(".article")[0].offsetHeight,l=o.props,c=l.height,u=!0,h=10,d=0;"number"==typeof a.rowThreshold?a.rowThreshold>=0&&(h=a.rowThreshold):"number"==typeof a.heightThreshold&&(u=!1,h=4,a.heightThreshold>=0&&(h=Math.round(a.heightThreshold*s)));var f=e.find(".content-container"),p=f.children(".photo-grid");if(!(p.length<1)){for(var g=p.children(),m=g.length,v=[],_=0,y=f[0].offsetHeight-p[0].offsetHeight,b=p[0].offsetTop,w=0;w<m;w++)_+=v[w]=g[w].offsetHeight;if(_+y<=s||t(document.body).hasClass("disable-managed-photo-grids"))return g.removeClass("visible"),g.css(n.vendorPrefix+"transform","translate3d(0,0,0)"),e.removeClass("managed"),void r._addContentScrollingAnimation.call(this,e,i,o);var S=_+y,x=0,C=0,T=0;for(w=0;w<m;w++){var I=t(g[w]),k=v[w],A=c,P=0,E=l.topDuration,$=0;if(x<s?(A=x,$=E+b+x+k,P=Math.min($,S)-E):($=(E+=Math.max(x-s,0))+b+s+k,P=Math.min($,S)-E),P>0&&i.translateY(I,E,P,A+"px",A-P+"px"),T===w&&(C=E),d+=u?1:k,w===m-1||d>=h){var D=g.slice(T,w+1);C===l.topDuration?D.addClass("visible"):i.addClass(D,C,"visible"),$<S&&i.removeClass(D,$,"visible"),T=w+1,d=0}I.css(n.vendorPrefix+"transform","translate3d(0,"+A+"px,0)"),x+=k}e.addClass("managed")}},getElementDocOffset:function(n){var i=t(n).closest(".section");if(i.hasClass("managed")){for(var o=i.find(".photo-grid"),r=e.Utils.getDocumentOffset(o[0]),a=o.children(),s=a.length,l=0;l<s;l++){var c=a[l];if(c===n)break;r.top+=c.offsetHeight}return r}return e.Utils.getDocumentOffset(n)}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2)],void 0===(o=function(t,e,n){return e.widget("Widget.SectionsArticleScroller",e.Widget,{defaultOptions:{scrollDuration:200,easing:"easeOutQuad",complete:null},isScrolling:!1,scrollContext:null,_attachBehavior:function(){var n=this;this.scrollStart=0,this.scrollEnd=0,this.animator=new e.Animator(function(t){n._handleScrollUpdate(t)},{duration:n.options.scrollDuration,easingFunc:t.easing[n.options.easing],complete:function(){n._handleComplete()}})},_destroy:function(){this.animator=null},_handleScrollUpdate:function(t){var e=this.$element.data("animator");e&&e.scrollTo(0,this.scrollStart+(this.scrollEnd-this.scrollStart)*t)},_handleComplete:function(){this.isScrolling=!1;var e=this.scrollContext;this.scrollContext=null,e&&e.complete&&e.complete(),t(this).trigger("scroll-complete")},_handleCancel:function(){var e=this.isScrolling;this.isScrolling=!1;var n=this.scrollContext;this.scrollContext=null,e&&n&&n.cancel&&n.cancel(),t(this).trigger("scroll-cancel")},stop:function(){this.animator.stop(),this.$element.data("animator").stop(),this._handleCancel()},setScrollContext:function(t){this.scrollContext={complete:t.complete,cancel:t.cancel}},getCurrentScrollOffset:function(){var t=this.$element.data("animator");if(!t)return 0;var e=t.getDuration();return t.playPosition<0?0:t.playPosition>e?e:t.playPosition},scrollTo:function(t,e){e=e||{};var n=this.$element.data("animator"),i=n.getDuration(),o=n.playPosition;e.relative&&(t+=o),t=t<0?0:t>i?i:t,this.stop(),this.setScrollContext(e),this.isScrolling=!0,!1===e.animate?(n.scrollTo(0,t),this._handleComplete()):t!=o?(this.scrollStart=o,this.scrollEnd=t,this.animator.start()):this._handleComplete()},getScrollDirection:function(){return this.isScrolling?this.scrollStart<this.scrollEnd?1:-1:0},scrollSectionIntoView:function(e,n){if(t(e).length){var i,o=this.getCurrentScrollOffset(),r=[(i=(n=t.extend({method:"nearest",ignoreWhenFullyVisible:!0},n)).el?this.getElOffsets(o,e,n):this.getSectionOffsets(o,e,n)).bottomOffset,i.topOffset,i.centerOffset];if(!i.isFullyVisible||!n.ignoreWhenFullyVisible){var a=n.method;switch(!i.canBeFullyVisible&&n.methodIfLarge&&(a=n.methodIfLarge),a){case"nearest":o=this._getRelativeOffsetValue(o,r,"min");break;case"farthest":o=this._getRelativeOffsetValue(o,r,"max");break;case"top":o=i.topOffset;break;case"center":o=i.centerOffset;break;case"bottom":o=i.bottomOffset}}this.scrollTo(o,n)}},_getRelativeOffsetValue:function(t,e,n){for(var i=[],o=0,r=e.length;o<r;o++)i[o]=Math.abs(e[o]-t);return e[i.indexOf(Math[n].apply(Math,i))]},getSectionOffsets:function(e,n,i){var o=t(n).data()||{},r=o.sectionHeight||0,a=o.scrollInOffset||0,s=o.scrollOutOffset||a,l=i.margin||0,c=i.marginTop||l||0,u=i.marginBottom||l||0,h=s-c,d=(a===s?a:a+r)+u;return{bottomOffset:d,topOffset:h,centerOffset:(h-d)/2+d,isFullyVisible:e<=h&&e>=d,canBeFullyVisible:d<h}},getElOffsets:function(e,n,i){var o=t(n).data(),r=t.extend({},i,{margin:0,marginTop:0,marginBottom:0}),a=this.getSectionOffsets(e,n,r),s=i.el,l=s.closest(".section-content-view"),c=o.sectionHeight||0;0===l.length&&(l=s.closest(".section"));var u,h,d=l.data("sectionYOffset")||0,f=c>=this.$element.height(),p=s[0].getBoundingClientRect(),g=l[0].getBoundingClientRect(),m=p.height,v=d+p.top-g.top,_=d+g.bottom-p.bottom,y=i.margin||0,b=i.marginTop||y||0,w=i.marginBottom||y||0,S=o.scrollInOffset||0;return f?h=(u=S+v+m+w)+(c-m)-b:(u=a.bottomOffset-_+w,h=a.bottomOffset===a.topOffset?a.topOffset:a.topOffset+v-b),{bottomOffset:u,topOffset:h,centerOffset:(h-u)/2+u,isFullyVisible:e<=h&&e>=u,canBeFullyVisible:u<h}}}),n.SectionsArticleScroller=e.Widget.SectionsArticleScroller,e.Widget.SectionsArticleScroller}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(32)],void 0===(o=function(t,e,n,i){return n.StaticMode={initialize:function(){var e=this;i.disable();var n=this._injectStyles(),o=this._transformMarkup().then(function(){return e._loadImagePlaceholders()});t.when(i.onLoadWasTriggered,n,o).done(function(){e._triggerReadyNotification()})},_injectStyles:function(){var e=t.Deferred(),n=t("#noscript-static-layout");return t(document.createElement("div")).html(n.text()).children().insertAfter(n),t.when(i.onLoadWasTriggered).done(function(){var t=document.getElementById("luca-splash");if(t){var n=(new Date).getTime();!function i(){t.offsetHeight&&(new Date).getTime()-n<5e3?setTimeout(i,10):e.resolve()}()}else e.resolve()}),e.promise()},_transformMarkup:function(){var e=t.Deferred();return this._adjustSingleColumnSectionVariants(),this._adjustGlideshowDOM(),e.resolve(),e.promise()},_triggerReadyNotification:function(){t(document.body).trigger("static-mode-ready")},_getPlaceholderURL:function(t){return t[0].href||t.data("href")||""},_loadImagePlaceholders:function(){var n=this,i=t.Deferred(),o=new e.ImageLoader({numAsyncRequestsAllowed:10});return t(".image-placeholder-link, .background-image-placeholder-link").each(function(){var e=t(this),i=n._getPlaceholderURL(e);i&&o.add(i,{callback:function(t,n,i){if(e.hasClass("image-placeholder-link")){var o=document.createElement("img");o.setAttribute("alt",""),o.src=t,e.replaceWith(o)}else e.parent().css("backgroundImage","url("+t+")"),e.remove()}})}),o.on("wp-image-loader-empty",function(){i.resolve()}),o.start(),i.promise()},_adjustSingleColumnSectionVariants:function(){var e=t(".single-column-section");e.not(".split-layout, .column-layout, .card-layout").find(".section-background").remove(),e.filter(".split-layout, .column-layout, .card-layout").removeClass("split-layout column-layout card-layout")},_adjustGlideshowPairing:function(e,n,i){var o=t('<div class="image"></div>');n.removeClass("background-image-placeholder-link").addClass("image-placeholder-link"),o.append(n),i.prepend(o)},_adjustGlideshowDOM:function(){for(var e=t(".card-flipbook-section"),n=e.length,i=0;i<n;i++){$section=e.eq(i);var o=$section.find(".section-background-image"),r=$section.find(".section-content"),a=r.find(".section-content-view .content-container"),s=Math.min(o.length,a.length),l=Math.max(o.length,a.length);if(s!=l){for(var c=l-s,u=0;u<c;u++)r.append('<div class="section-content-view"><div class="content-container"></div></div>');a=r.find(".section-content-view .content-container")}for(var h=0;h<l;h++){var d=o.eq(h),f=d.find(".background-image-placeholder-link");this._adjustGlideshowPairing(d,f,a.eq(h))}r.children(".removed").removeClass("removed"),o.remove()}}},"static"===n.getPageMode()&&n.StaticMode.initialize(),n.StaticMode}.apply(e,i))||(t.exports=o)},function(t,e,n){var i=n(3);n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),t.exports=i},function(t,e,n){var i,o;i=[n(0),n(1),n(4),n(7)],void 0===(o=function(t,e,n,i){var o={MAX_RENDITION_SIZE:8192,PANORAMA_RATIO:2.1,_adjustImageURLSize:function(e,r){var a=n.Utils.parseQueryParams(e).nonresponsive,s=i.isMobile;if(r=t.extend({isGrid:!1,model:null,width:0,height:0},r),e&&!a){var l=o.PANORAMA_RATIO,c=r.width||0,u=r.height||0,h=r.isGrid?s?512:1024:s?1024:2560;if(r.model){var d=r.model.getImage();d&&(c=d.get("image_width"),u=d.get("image_height"))}if(c&&u)if(r.isGrid){var f=c<u?u/c:c/u;f>=l&&(h=Math.round(h/1.4*f))}else!s&&c<u&&(h=Math.max(h,Math.round(h*(u/c))));e=-1!=e.search(/^blob\:/)?e:n.Utils.setQueryParam(e,"size",Math.min(h,o.MAX_RENDITION_SIZE))}return e},_setImagePayloadURL:function(t,e){t&&(t.image_url=t.src=e,t.url="url("+e+")")}};return o}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7),n(119),n(124)],void 0===(o=function(t,e,n,i,o,r){var a=n.View.extend({initialize:function(){r.initialize.call(this),this._handleTapHold=this._handleTapHold.bind(this),this._tapHoldIsAllowed=this._tapHoldIsAllowed.bind(this),this._enterTapHoldMode=this._enterTapHoldMode.bind(this),this._handleMoveInTapHoldMode=this._handleMoveInTapHoldMode.bind(this),this._exitTapHoldMode=this._exitTapHoldMode.bind(this)},dispatchAdjustVisuals:function(){this.$el.trigger("adjustVisuals")},getImageItems:function(){return e.filter(this.model.children.models,function(t){return"img"===t.get("type")})},updateLoadingSpinner:function(t,e){var n=!1;if(e){var i=e.getImage();i&&i.get("is_preview")&&(n=!0)}n?t.addClass("image-loading"):t.removeClass("image-loading")},scrollSectionIntoView:function(e){e=t.extend({section:this.$el,method:"nearest",ignoreWhenFullyVisible:!0,animate:!0},e),this.$el.trigger("scrollSectionIntoView",e)},_decideToHandleTapHold:function(t){i.isMobile&&this._handleTapHold(t)},_handleTapHold:function(t){this._tapHoldIsAllowed(t)&&this._enterTapHoldMode(t)},_tapHoldIsAllowed:function(t){return!1},_enterTapHoldMode:function(t){this.$el.addClass("tap-hold-mode"),this.$el.trigger("stopScrollTracker"),this._originalMousePosition={x:t.clientX,y:t.clientY},this.blockDragScrolling(this._handleMoveInTapHoldMode,this._exitTapHoldMode)},_handleMoveInTapHoldMode:function(e){this._preventEventDefault(e),(e.clientX<0||e.clientX>t(window).width())&&this._exitTapHoldMode(e)},_exitTapHoldMode:function(t){this._preventEventDefault(t);var e=this;setTimeout(function(){e.$el.removeClass("tap-hold-mode")},301),this.unblockDragScrolling()},_handleMouseDown:function(e){if(!i.isMobile&&1==e.which){this._mouseDownPosition={x:e.clientX,y:e.clientY},this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this);var n=t(document);n.on("vmousemove",this._handleMouseMove),n.on("vmouseup",this._handleMouseUp)}},_handleMouseMove:function(e){if(!i.isMobile){if((Math.abs(this._mouseDownPosition.x-e.clientX)>=5||Math.abs(this._mouseDownPosition.y-e.clientY)>=5)&&0==t(document.activeElement).closest(".editable-region").length){var n=t(document);n.off("vmousemove",this._handleMouseMove),n.off("vmouseup",this._handleMouseUp),this._handleTapHold(e)}}},_handleMouseUp:function(e){if(!i.isMobile){var n=t(document);n.off("vmousemove",this._handleMouseMove),n.off("vmouseup",this._handleMouseUp)}}});return e.defaults(a.prototype,o,r),a}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(4),n(24),n(7),n(124)],void 0===(o=function(t,e,n,i,o,r,a){var s=n.View.extend({tagName:"p",events:{vtaphold:"_handleTapHold",keydown:"handleKeyDown",input:"handleInput",focus:"handleFocus",blur:"handleBlur",paste:"handlePaste",keyup:"_dispatchInputEvent",cut:"_dispatchInputEvent",drop:"_dispatchInputEvent"},initialize:function(t){a.initialize.call(this),this.useInputEventPolyfill=i.isIE||i.isMSEdge,this.allowSplitting=t.allowSplitting||!1,this.allowHTML=t.allowHTML||!1,this.isCurrentlyEditing=t.isCurrentlyEditing||!1,t.placeholder&&(this.$el.attr("data-placeholder",t.placeholder),this.$el.addClass("supports-placeholder"),this.placeholder=t.placeholder,this._refreshEmptyClass()),!1===t.initiallyEditable?this.setEditable(!1):this.setEditable(!0),this.$el.data("view",this),this.$el.addClass("editable-region")},_dispatchInputEvent:function(t){if(this.useInputEventPolyfill){var e=t.type,n=!1;if("keyup"==e?8==t.keyCode&&(n=!0):"cut"==e?n=!0:"drop"==e&&(n=!0),this._previousInnerHTML!=this.el.innerHTML||n){var i=document.createEvent("Event");i.initEvent("input",!0,!0),this.el.dispatchEvent(i)}this._previousInnerHTML=this.el.innerHTML}},setEditable:function(t){var e="true",n="text",i="default";t||(e="false",n="none",i="none"),this.$el.css(o.vendorPrefix+"user-select",n),this.$el.css("-webkit-touch-callout",i),this.$el.attr("contenteditable",e)},_refreshEmptyClass:function(){this.$el.text()?this.$el.removeClass("empty"):this.$el.addClass("empty")},_handleTapHold:function(t){r.isMobile&&this.isCurrentlyEditing&&this.blockDragScrolling()},handleFocus:function(t){this.useInputEventPolyfill&&(this._previousInnerHTML=this.el.innerHTML),this.isCurrentlyEditing=!0,this.trigger("focus"),this.$el.addClass("focus")},handleBlur:function(t){this._dispatchInputEvent(t),this.isCurrentlyEditing=!1,this.$el.removeClass("focus"),this.trigger("blur",t),t.preventDefault()},handlePaste:function(t){var e;t.preventDefault();var n=t.originalEvent.clipboardData;e=n?n.getData("text/plain"):window.clipboardData.getData("Text");var i=document.createDocumentFragment();i.textContent=e;var o=this.$el.height(),a=this.extractBlockContentsFromCaret("beforeSelection"),s=(this.extractBlockContentsFromCaret("withinSelection"),this.extractBlockContentsFromCaret("afterSelection")),l=r.flattenHTMLtoText(a),c=r.flattenHTMLtoText(s),u=/\s/.test(l.charAt(l.length-1))?" ":"",h=/\s/.test(c.charAt(0))?" ":"",d={pasteContent:i,contentBeforeCaret:a=r.collapseSpaces(a),contentAfterCaret:s=r.collapseSpaces(s),spaceBeforeCaret:u,spaceAfterCaret:h,heightBeforePaste:o};this.trigger("paste",t,d)},handleKeyDown:function(t){if(13==t.keyCode){console.log("Enter key pressed");var e=["enterKeyPressed"];return this.allowSplitting&&(this.isSplitting=!0,e.push(this.extractBlockContentsFromCaret("beforeSelection")),e.push(this.extractBlockContentsFromCaret("withinSelection")),e.push(this.extractBlockContentsFromCaret("afterSelection"))),this.trigger.apply(this,e),!1}if(8==t.keyCode){var n=window.getSelection().focusOffset,i=Math.abs(n-window.getSelection().anchorOffset);this.trigger("backspaceKeyPressed",t,n,i,{documentFragment:this._getDocumentFragment()})}else if(66==t.keyCode||73==t.keyCode){if((t.ctrlKey||t.metaKey)&&!this.allowHTML)return!1}else if(85==t.keyCode){if(t.ctrlKey||t.metaKey)return!1}else if(90==t.keyCode){if(t.ctrlKey||t.metaKey)return!1}else if(t.keyCode>=37&&t.keyCode<=40){var o=r.getSelectionMetrics().extent,a=this._getTextPosition(),s=a.y,l=s+a.height,c=o.height/2,u=Math.abs(s-o.top)<c,h=Math.abs(l-o.bottom)<c,d=r.getSelectionIndexes(this.el).selectionStart,f=0==d,p=d==(this.el.textContent||this.el.innerText||"").length,g="";switch(t.keyCode){case 37:g="left";break;case 38:g="up";break;case 39:g="right";break;case 40:g="down"}var m={direction:g,againstRegionTop:u,againstRegionBottom:h,leftOfFirstCharacter:f,rightOfLastCharacter:p};this.trigger("arrowKeyPressed",t,m)}},_getTextPosition:function(){var t=window.getComputedStyle(this.el),e=parseInt(t.getPropertyValue("margin-top"),10),n=parseInt(t.getPropertyValue("border-top-width"),10),o=parseInt(t.getPropertyValue("padding-top"),10),r=(parseInt(t.getPropertyValue("margin-bottom"),10),parseInt(t.getPropertyValue("border-bottom-width"),10),parseInt(t.getPropertyValue("padding-bottom"),10),window.getComputedStyle(this.el,":before")),a=r.getPropertyValue("position"),s=r.getPropertyValue("content"),l=0,c=i.isFirefox?"none"!=s:""!=s;"absolute"!=a&&c&&(l+=parseInt(r.getPropertyValue("margin-top"),10),l+=parseInt(r.getPropertyValue("border-top-width"),10),l+=parseInt(r.getPropertyValue("padding-top"),10),l+=parseInt(r.getPropertyValue("height"),10)||0,l+=parseInt(r.getPropertyValue("padding-bottom"),10),l+=parseInt(r.getPropertyValue("border-bottom-width"),10),l+=parseInt(r.getPropertyValue("margin-bottom"),10));var u=window.getComputedStyle(this.el,":after"),h=u.getPropertyValue("position"),d=u.getPropertyValue("content"),f=0,p=i.isFirefox?"none"!=d:""!=d;return"absolute"!=h&&p&&(f+=parseInt(u.getPropertyValue("margin-top"),10),f+=parseInt(u.getPropertyValue("border-top-width"),10),f+=parseInt(u.getPropertyValue("padding-top"),10),f+=parseInt(u.getPropertyValue("height"),10)||0,f+=parseInt(u.getPropertyValue("padding-bottom"),10),f+=parseInt(u.getPropertyValue("border-bottom-width"),10),f+=parseInt(u.getPropertyValue("margin-bottom"),10)),{y:this.$el.offset().top+e+n+o+l,height:this.$el.height()-l-f}},handleInput:function(t){this.trigger("contentChanged",{documentFragment:this._getDocumentFragment()}),this._refreshEmptyClass(),this.$el.text()||this.$el.html("")},_getDocumentFragment:function(){for(var t,e=this.$el[0].cloneNode(!0),n=document.createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n},setCaretPosition:function(t,e){this.$el.focus();var n=this.$el.text().length,i=this.$el[0];if(t=t>n?n:t,(e=void 0===(e=e>n?n:e)?t:e)<(t=t<0?0:t)){var o=t;t=e,e=o}if(document.createRange&&window.getSelection){var a=document.createRange();a.selectNodeContents(i);for(var s=r.getTextNodes(i),l=0,c=0,u=0;u<s.length;u++){var h=s[u];c=l+h.length,t>=l&&t<=c&&a.setStart(h,t-l),e>=l&&e<=c&&a.setEnd(h,e-l),l=c}var d=window.getSelection();d.removeAllRanges(),d.addRange(a)}},extractBlockContentsFromCaret:function(t){var e=window.getSelection();if(e.rangeCount){var n=e.getRangeAt(0),i=this.$el[0];if(i){var o=n.cloneRange();return o.selectNodeContents(i),"beforeSelection"==t?o.setEnd(n.startContainer,n.startOffset):"afterSelection"==t?o.setStart(n.endContainer,n.endOffset):"withinSelection"==t&&(o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset)),o.extractContents()}}},render:function(t){this.isCurrentlyEditing&&!this.isSplitting||(this.isSplitting=!1,this.allowHTML?this.$el.html(t):this.$el.text(t));var e=this.$el.height();return this.regionHeight&&this.regionHeight!=e&&this.trigger("heightChanged"),this.regionHeight=e,this._refreshEmptyClass(),this},destroy:function(){this.undelegateEvents(),this.remove()}});return e.defaults(s.prototype,a),s}.apply(e,i))||(t.exports=o)},,,,,,function(t,e,n){"use strict";e.extend=function(t){var e,n,o,r,a=Array.prototype.slice.call(arguments,1);for(e=0,n=a.length;e<n;e+=1)if(o=a[e])for(r in o)i.call(o,r)&&(t[r]=o[r]);return t};var i=Object.prototype.hasOwnProperty;e.hop=i},function(t,e,n){var i;void 0===(i=function(){!function(t){t.requestAnimationFrame||(t.requestAnimationFrame=t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){return t.setTimeout(e,t.requestAnimationFrame._wpRequestAnimationFrameInterval)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||function(e){return t.clearTimeout(e)}),t.requestAnimationFrame._wpRequestAnimationFrameInterval=1e3/60}(window)}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,o;
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.11
 *
 * Requires: jQuery 1.2.2+
 */i=[n(0),n(12)],void 0===(o=function(t,e){var n,i,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],a=Array.prototype.slice;if(t.event.fixHooks)for(var s=o.length;s;)t.event.fixHooks[o[--s]]=t.event.mouseHooks;var l=t.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener)for(var e=r.length;e;)this.addEventListener(r[--e],c,!1);else this.onmousewheel=c;t.data(this,"mousewheel-line-height",l.getLineHeight(this)),t.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=r.length;e;)this.removeEventListener(r[--e],c,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e)["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function c(o){var r=o||window.event,s=a.call(arguments,1),c=0,d=0,f=0,p=0,g=0,m=0;if((o=t.event.fix(r)).type="mousewheel","detail"in r&&(f=-1*r.detail),"wheelDelta"in r&&(f=r.wheelDelta),"wheelDeltaY"in r&&(f=r.wheelDeltaY),"wheelDeltaX"in r&&(d=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(d=-1*f,f=0),c=0===f?d:f,"deltaY"in r&&(c=f=-1*r.deltaY),"deltaX"in r&&(d=r.deltaX,0===f&&(c=-1*d)),0!==f||0!==d){if(1===r.deltaMode){var v=t.data(this,"mousewheel-line-height");c*=v,f*=v,d*=v}else if(2===r.deltaMode){var _=t.data(this,"mousewheel-page-height");c*=_,f*=_,d*=_}if(e.isSafari?"deltaY"in r||(c=Math[c>=1?"floor":"ceil"](c/3),d=Math[d>=1?"floor":"ceil"](d/3),f=Math[f>=1?"floor":"ceil"](f/3)):e.isFirefox?0===r.deltaMode&&(c=Math[c>=1?"floor":"ceil"](c/2),d=Math[d>=1?"floor":"ceil"](d/2),f=Math[f>=1?"floor":"ceil"](f/2)):e.isChrome||e.isIE||e.isMSEdge||(p=Math.max(Math.abs(f),Math.abs(d)),(!i||p<i)&&(i=p,h(r,p)&&(i/=40)),h(r,p)&&(c/=40,d/=40,f/=40),c=Math[c>=1?"floor":"ceil"](c/i),d=Math[d>=1?"floor":"ceil"](d/i),f=Math[f>=1?"floor":"ceil"](f/i)),l.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();g=o.clientX-y.left,m=o.clientY-y.top}return o.deltaX=d,o.deltaY=f,o.deltaFactor=i,o.offsetX=g,o.offsetY=m,o.deltaMode=0,s.unshift(o,c,d,f),n&&clearTimeout(n),n=setTimeout(u,200),(t.event.dispatch||t.event.handle).apply(this,s)}}function u(){i=null}function h(t,e){return l.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(13)],void 0===(o=function(t){t.event.special.vtaphold={duration:1e3,moveThreshold:10,setup:function(){var e=t(this),n=t(),i=t(document),o=t.event.special.vtaphold.duration,r=t.event.special.vtaphold.moveThreshold,a=t.Event("vtaphold"),s=0,l=0,c=0,u=function(t){(Math.abs(t.pageX-s)>r||Math.abs(t.pageY-l)>r)&&h()},h=function(){c&&(clearTimeout(c),c=0),i.off("vmousemove",u).off("vmouseup",h),e.data("vtapholdSource",!1)},d=function(){h(),n.trigger(a)};e.bind("vmousedown",function(r){h(),s=r.pageX,l=r.pageY,n=t(r.target),t.extend(a,r),a.type="vtaphold";for(var f=r.target;f&&f!=e[0];){if(1==t(f).data("vtapholdSource"))return;f=f.parentNode}e.data("vtapholdSource",!0),i.on("vmousemove",u).on("vmouseup",h),c=setTimeout(d,o)})}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(6),n(8),n(19)],void 0===(o=function(t,e,n,i){var o=function(e){i.call();this.options=e=t.extend({},this.defaultOptions,e),this._queue=[],this._needsSort=!1,this._isRunning=!1,this._loaderContexts=[];for(var n=0;n<e.numAsyncRequestsAllowed;n++)this._loaderContexts[n]=this._createLoaderContext()};return o.nextRequestId=1,n.inherit(o,i),t.extend(o.prototype,{defaultOptions:{createNewImageOnReset:!0,timeoutInterval:0,numAsyncRequestsAllowed:1,crossOrigin:!1},_createLoaderContext:function(){var t=this,e={entry:null,loader:new Image,loadFunc:function(){t._handleLoad(e)},loadErrorFunc:function(){t._handleError(e)},timeoutFunc:function(){t._handleTimeout(e)},timeoutTimerId:0};return this.options.crossOrigin&&(e.loader.crossOrigin=this.options.crossOrigin),e},add:function(e,i){if(e){for(var r=n.ensureArray(e),a=0;a<r.length;a++){var s=t.extend({reqId:o.nextRequestId++,src:r[a],width:0,height:0,priority:50,callback:null,data:null},i);this._queue.push(s),this._needsSort=!0,this.trigger("wp-image-loader-add",s)}this._isRunning&&this._loadNext()}},start:function(){this._isRunning||(this._isRunning=!0,this.trigger("wp-image-loader-start"),this._loadNext())},stop:function(){if(this._isRunning){for(var t=this._loaderContexts,e=t.length,n=0;n<e;n++){var i=t[n];i.entry&&(this._queue.unshift(i.entry),this._needsSort=!0),this._resetLoaderContext(i)}this._isRunning=!1,this.trigger("wp-image-loader-stop")}},getQueueCount:function(){return this._queue.length+this._getPendingRequestCount()},clearQueue:function(){var t=this._isRunning;this.stop(),this._queue.length=0,t&&this.start()},_loadNext:function(){if(this._isRunning){var t=this._getAvailableLoaderContext();if(t){var e=this._queue;if(e.length){this._needsSort&&(e=this._queue=e.sort(function(t,e){var n=t.priority-e.priority;return n||t.reqId-e.reqId}),this._needsSort=!1);var n=e.shift();t.entry=n,this.options.timeoutInterval>0&&(t.timeoutTimerId=setTimeout(t.timeoutFunc,this.options.timeoutInterval));var i=t.loader;i.onload=t.loadFunc,i.onerror=t.loadErrorFunc,i.src=n.src,e.length&&this._loadNext()}else 0===this.getQueueCount()&&this.trigger("wp-image-loader-empty")}}},_getPendingRequestCount:function(){for(var t=this._loaderContexts,e=t.length,n=0,i=0;i<e;i++){t[i].entry&&++n}return n},_getAvailableLoaderContext:function(){for(var t=this._loaderContexts,e=t.length,n=0;n<e;n++){var i=t[n];if(!i.entry)return i}return null},_resetLoaderContext:function(t){var e=t.loader;e.onload=null,e.onerror=null,e.src=""==e.src?" ":"",this.options.createNewImageOnReset&&(t.loader=new Image,this.options.crossOrigin&&(t.loader.crossOrigin=this.options.crossOrigin)),t.entry=null,t.timeoutTimerId&&(clearTimeout(t.timeoutTimerId),t.timeoutTimerId=0)},_handleLoad:function(t){var e=t.loader;entry=t.entry,entry.width=e.width,entry.height=e.height,this._resetLoaderContext(t),entry.callback&&entry.callback(entry.src,entry.width,entry.height,entry.data),this.trigger("wp-image-loader-load-success",entry),this._loadNext()},_handleError:function(t){var e=t.entry;this._resetLoaderContext(t),this.trigger("wp-image-loader-load-error",e),this._loadNext()},_handleTimeout:function(t){var e=t.entry;this._resetLoaderContext(t),this.trigger("wp-image-loader-timeout",e),this._loadNext()}}),e.ImageLoader=o,o}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(8),n(9)],void 0===(o=function(t,e,n){var i=n.build("Widget.ScrollView",n,{defaultOptions:{smoothScroll:!0,method:"scroll"},_attachBehavior:function(){this._scrollX=0,this._scrollY=0,this.$inner=this.$element.children().first()},_ready:function(){this.scrollTo(this._scrollX,this._scrollY)},scrollTo:function(t,e){this.trigger("scroll-start",{x:this._scrollX,y:this._scrollY}),this._setScrollPosition(t,e),this.trigger("scroll-stop",{x:this._scrollX,y:this._scrollY})},_translate3d:function(t,n){e.setElementTransform(this.$inner,"translate3d("+t+"px,"+n+"px, 0)")},_setScrollPosition:function(t,e){switch(t=t>0?t:0,e=e>0?e:0,this.options.method){case"offset":this.$inner.css({left:-t+"px",top:-e+"px"});break;case"scroll":this.$element[0].scrollLeft=t,this.$element[0].scrollTop=e;break;case"transform":this._translate3d(-t,-e)}this._scrollX=t,this._scrollY=e,this.trigger("scroll",{x:this._scrollX,y:this._scrollY})},getWidth:function(){return this.$element.width()},getHeight:function(){return this.$element.height()},getScrollWidth:function(){return"scroll"===this.options.method?this.$element[0].scrollWidth:this.$inner[0].offsetWidth},getScrollHeight:function(){return"scroll"===this.options.method?this.$element[0].scrollHeight:this.$inner[0].offsetHeight},getScrollMaxX:function(){var t=this.getScrollWidth()-this.getWidth();return t<0?0:t},getScrollMaxY:function(){var t=this.getScrollHeight()-this.getHeight();return t<0?0:t},getPosition:function(){return{x:this._scrollX,y:this._scrollY}}});return n.addWidgetConstructorAsjQueryPlugin("wpScrollView",i),i}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(9),n(37),n(28),n(29),n(13)],void 0===(o=function(t,e,n,i,o,r){var a=e.build("Widget.CollectionBrowser",e,{_widgetName:"CollectionBrowser",defaultOptions:{sourceArray:[],interactiveImageClipClassName:n.prototype.defaultOptions.clipClassName,interactiveImageViewClassName:n.prototype.defaultOptions.viewClassName,interactiveImageContentClassName:n.prototype.defaultOptions.contentClassName,swipePanelGroupClassName:o.prototype.defaultOptions.widgetClass,swipePanelGroupViewClassName:o.prototype.defaultOptions.viewClass,swipePanelGroupPanelClassName:o.prototype.defaultOptions.panelClass,swipePanelGroupPanelPreviousClassName:o.prototype.defaultOptions.previousClass,swipePanelGroupPanelActiveClassName:i.prototype.defaultOptions.activeClass,swipePanelGroupPanelNextClassName:o.prototype.defaultOptions.nextClass,closeButtonClassName:"wp-collection-browser-close-button",showClassName:"wp-show",hideClassName:"wp-hide",allowDelegation:!1},_transformMarkup:function(){var e=this.options,n=e.sourceArray,i="";i+='<div class="'+e.swipePanelGroupClassName+'">',i+='  <div class="'+e.swipePanelGroupViewClassName+'">';for(var o=0;o<n.length;o++){var r=t(n[o]).addClass(e.interactiveImageContentClassName).prop("outerHTML");i+='    <div class="'+e.swipePanelGroupPanelClassName+'">',i+='      <div class="'+e.interactiveImageClipClassName+'">',i+='        <div class="'+e.interactiveImageViewClassName+'">',i+="          "+r,i+="        </div>",i+="\t     </div>",i+="    </div>"}i+="  </div>",i+="</div>",i+='<button class="'+e.closeButtonClassName+'"></button>',this.$element.html(i)},_attachBehavior:function(){var e=this,n=e.options,i=e.$element.find("."+n.swipePanelGroupClassName).wpSwipePanelGroup({allowDelegation:n.allowDelegation});e.swipePanelGroup=i.data("wpSwipePanelGroup"),e.$element.find("."+n.interactiveImageClipClassName).wpInteractiveImage(),e.swipePanelGroup.bind("wp-panels-queued",function(t,n){e._fit()}),t(window).resize(function(){e._fit()}),t(window).load(function(){e._fit()}),e.$element.find(" ."+n.closeButtonClassName).bind("vclick",function(t){return e.hideWidget(),!1}),t(document).keyup(function(t){27==t.keyCode&&e.hideWidget()})},showWidget:function(){var t=this.options;this.$element.removeClass(t.hideClassName).addClass(t.showClassName),this._fit(),this.trigger("show")},hideWidget:function(){var t=this.options;this.$element.removeClass(t.showClassName).addClass(t.hideClassName),this.trigger("hide")},_fit:function(){var t=this.$element,e={duration:0,canScaleUp:!1},n=this.options,i=" ."+n.interactiveImageClipClassName,o="."+n.interactiveImageContentClassName,r=t.find("."+n.swipePanelGroupPanelPreviousClassName+i),a=t.find("."+n.swipePanelGroupPanelActiveClassName+i),s=t.find("."+n.swipePanelGroupPanelNextClassName+i);if(r.length>0){var l=r.find(o);l.width()>0&&l.height()>0&&r.wpInteractiveImage("fitAndCenter",e)}if(a.length>0){var c=a.find(o);c.width()>0&&c.height()>0&&a.wpInteractiveImage("fitAndCenter",e)}if(s.length>0){var u=s.find(o);u.width()>0&&u.height()>0&&s.wpInteractiveImage("fitAndCenter",e)}},_ready:function(){this._fit()}});return e.addWidgetConstructorAsjQueryPlugin("wpCollectionBrowser",a),a}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(12),n(27),n(36)],void 0===(o=function(t,e,n,i){return n.desktopScrollbarPlugin={defaultOptions:{scrollbarMarkupCallback:null,scrollbarsUseTransforms:!1,scrollbarPlugins:void 0},initialize:function(n,i){var o=this;!e.touchEnabled&&n.$element.hasClass("no-scrollbars");i=t.extend(i,t.extend({},o.defaultOptions,i)),o._isEnabled(n,i)&&n.bind("transform-markup",function(t){o._transformMarkup(n)}).bind("attach-behavior",function(t){o._attachBehavior(n)})},_isEnabled:function(t,n){return!e.touchEnabled&&!t.$element.hasClass("no-scrollbars")},_transformMarkup:function(e){var n,i=e.options.direction;e._dsbp$root=e.$element.parent(),e._dsbp$vSB=t(),e._dsbpVSBSize=100,e._dsbp$hSB=t(),e._dsbpHSBSize=100,e._dsbpIsScrolling=!1,e._dsbpMouseInView=!1,i&&"vertical"!==i||((n=this._getScrollbarMarkup(e,"vertical")).appendTo(e._dsbp$root),e._dsbp$vSB=n),i&&"horizontal"!==i||((n=this._getScrollbarMarkup(e,"horizontal")).appendTo(e._dsbp$root),e._dsbp$hSB=n)},_syncScrollbars:function(t,e){var n=t.options.direction;if(!n||"vertical"===n){var i=t.height(),o=t.scrollHeight(),r=Math.round(100*(i>o?1:i/o));t._dsbpVSBSize!=r&&t._dsbpVSB.$thumb.css("height",r+"%"),t._dsbpVSB._resetConstraints(e),t._dsbpVSBSize=r}if(!n||"horizontal"===n){var a=t.width(),s=t.scrollWidth(),l=Math.round(100*(a>s?1:a/s));t._dsbpHSBSize!=l&&t._dsbpHSB.$thumb.css("width",l+"%"),t._dsbpHSB._resetConstraints(e),t._dsbpHSBSize=l}},_showScrollbars:function(t){this._syncScrollbars(t,!1),t._dsbpVSBSize<100&&t._dsbp$vSB.addClass("visible"),t._dsbpHSBSize<100&&t._dsbp$hSB.addClass("visible")},_hideScrollbars:function(t){t._dsbpMouseInView||t._dsbpIsScrolling||(t._dsbp$vSB.removeClass("visible"),t._dsbp$hSB.removeClass("visible"))},_attachBehavior:function(t){var n=this;e.touchEnabled||t.tracker.disable(),t._dsbpLock=0,t._dsbpScrollStart=function(e){n._handleScrollStart(t)},t._dsbpScrollStop=function(e){n._handleScrollStop(t)},t._dsbpScrollWheel=function(e,i,o,r){return n._handleMouseWheel(t,i,o,r)},t.$element.bind("mousewheel",t._dsbpScrollWheel),t._dsbp$root.bind("mouseenter",function(e){t._dsbpMouseInView=!0,n._showScrollbars(t)}),t._dsbp$root.bind("mouseleave",function(e){t._dsbpMouseInView=!1,n._hideScrollbars(t)}),t._dsbp$vSB.length>0&&(t._dsbpVSB=new i(t._dsbp$vSB,{ignoreX:!0,ignoreY:!1,trackClassName:"wp-scrollbar-track",thumbClassName:"wp-scrollbar-thumb",useTransforms:t.options.scrollbarsUseTransforms,plugins:t.options.scrollbarPlugins}),t._dsbpVSB.bind("wp-slider-drag-start",t._dsbpScrollStart).bind("wp-slider-drag-stop",t._dsbpScrollStop).bind("wp-slider-update",function(e,i){n._handleVerticalScroll(t,i)}),t._dsbp$vSB.bind("click",function(){return!1}).bind("mousewheel",t._dsbpScrollWheel),t.bind("scroll",function(e,i){n._handleScroll(t,i)})),t._dsbp$hSB.length>0&&(t._dsbpHSB=new i(t._dsbp$hSB,{ignoreX:!1,ignoreY:!0,trackClassName:"wp-scrollbar-track",thumbClassName:"wp-scrollbar-thumb",useTransforms:t.options.scrollbarsUseTransforms,plugins:t.options.scrollbarPlugins}),t._dsbpHSB.bind("wp-slider-drag-start",t._dsbpScrollStart).bind("wp-slider-drag-stop",t._dsbpScrollStop).bind("wp-slider-update",function(e,i){n._handleHorizontalScroll(t,i)}),t._dsbp$hSB.bind("click",function(){return!1}).bind("mousewheel",t._dsbpScrollWheel))},_getScrollbarMarkup:function(e,n){var i=e.options.scrollbarMarkupCallback;return i?i(e,n):t('<div class="wp-scrollbar '+n+'"><div class="wp-scrollbar-track"><div class="wp-scrollbar-thumb"></div></div></div>')},_syncWithWidget:function(t){var e=t.scrollLeft(),n=t.scrollTop();if(this._syncScrollbars(t),t._dsbpHSB){var i=e/(t.scrollWidth()-t.width());t._dsbpHSB.setPositionByPercentage(i,0)}if(t._dsbpVSB){i=n/(t.scrollHeight()-t.height());t._dsbpVSB.setPositionByPercentage(0,i)}},_handleScroll:function(t,e){t._dsbpLock||(++t._dsbpLock,this._syncWithWidget(t),--t._dsbpLock)},_handleMouseWheel:function(t,e,n,i){++t._dsbpLock;var o=t.scrollLeft(),r=t.scrollTop();t.scrollTo(o+n,r-i);var a=t.scrollLeft(),s=t.scrollTop(),l=o!=a||r!=s;return l&&this._syncWithWidget(t),--t._dsbpLock,!l},_handleScrollStart:function(t){t._dsbpIsScrolling=!0},_handleScrollStop:function(t){t._dsbpIsScrolling=!1,this._hideScrollbars(t)},_handleVerticalScroll:function(t,e){if(!t._dsbpLock){++t._dsbpLock;var n=this._percentageToPixelValue(t.height(),t.scrollHeight(),e.percentage);t.scrollTo(t.scrollLeft(),n),--t._dsbpLock}},_handleHorizontalScroll:function(t,e){if(!t._dsbpLock){++t._dsbpLock;var n=this._percentageToPixelValue(t.width(),t.scrollWidth(),e.percentage);t.scrollTo(n,t.scrollTop()),--t._dsbpLock}},_percentageToPixelValue:function(t,e,n){return n*(t<e?e-t:0)}},n.desktopScrollbarPlugin}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(35)],void 0===(o=function(t,e){return e.sliderTrackPlugin={initialize:function(t,e){var n=this;t.bind("attach-behavior",function(e){n._attachBehavior(t)})},_attachBehavior:function(t){t.$track.bind(t.tracker.dragEventHandler.startEvent,function(e){var n=t.$track.offset();t._resetConstraints(),t.setPositionByPixel(e.pageX-n.left,e.pageY-n.top),t.tracker.dragEventHandler._startDrag(e),e.preventDefault()})}},e.sliderTrackPlugin}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(29)],void 0===(o=function(t,e){return e.nextPreviousPlugin={defaultOptions:{previousLinkClass:"wp-swipe-panel-group-previous-link",nextLinkClass:"wp-swipe-panel-group-next-link",firstPanelClass:"wp-first-panel-displayed",lastPanelClass:"wp-last-panel-displayed",noPanelClass:"wp-no-panel-displayed",injectNextPreviousLinks:!0,nextPreviousLinkTriggerEvent:"click"},initialize:function(e,n){var i=this;t.extend(n,t.extend({},i.defaultOptions,n)),e.nextPanel||(e.nextPanel=function(){var t=e.$element.length,n=e.activeIndex;n<t-1&&e.showPanel(n+1)}),e.previousPanel||(e.previousPanel=function(){var t=e.activeIndex;t>0&&e.showPanel(t-1)}),n.injectNextPreviousLinks&&(e.bind("transform-markup",function(){i._transformMarkup(e)}),e.bind("attach-behavior",function(){i._attachBehavior(e)}),e.bind("ready",function(){i._ready(e)}),e.bind("wp-panel-show wp-insert-panel wp-remove-panel",function(t,n){i._syncNavLinks(e,n)}))},_transformMarkup:function(e){var n=e.options;e._npp$nextLink=t('<a href="#" class="'+n.nextLinkClass+'">Next</a>'),e._npp$previousLink=t('<a href="#" class="'+n.previousLinkClass+'">Previous</a>'),e.$clip,e._npp$nextLink.appendTo(e.$clip),e._npp$previousLink.appendTo(e.$clip)},_syncNavLinks:function(t){var e=t.activeIndex,n=t.options.firstPanelClass,i=t.options.lastPanelClass,o=t.options.noPanelClass;t.$clip.removeClass(n+" "+i+" "+o),0===t.$element.length?t.$clip.addClass(o):(0===e&&t.$clip.addClass(n),e===t.$element.length-1&&t.$clip.addClass(i))},_next:function(t){var e=t.activeIndex;e<t.$element.length-1&&t.showPanel(e+1)},_previous:function(t){var e=t.activeIndex;e>0&&t.showPanel(e-1)},_attachBehavior:function(t){var e=this,n=t.options.nextPreviousLinkTriggerEvent||"click";t._npp$previousLink.on(n,function(n){return e._previous(t),!1}),t._npp$nextLink.on(n,function(n){return e._next(t),!1})},_ready:function(t){this._syncNavLinks(t)}},e.nextPreviousPlugin}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(6),n(9)],void 0===(o=function(t,e,n){return e.widget("Widget.ProgressBar",e.Widget,{_widgetName:"progress-bar",defaultOptions:{widgetClass:"wp-progress-bar",clipClass:"wp-progress-bar-clip",viewClass:"wp-progress-bar-view",orientation:"horizontal",useFloatPercentage:!1,percentage:0},_attachBehavior:function(){var t=this.options;this._$view=this.$element.find("."+t.viewClass),this._$view=this.$element.find("."+t.viewClass),this._percentage=t.percentage,this.setPercentage(this._percentage)},setPercentage:function(t){var e="horizontal"===this.options.orientation?"width":"height";this.options.useFloatPercentage&&(t*=100),this._$view.css(e,t+"%"),this._percentage=t,this.trigger("percentage",{percentage:t})}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(6)],void 0===(o=function(t,e){return window.$=window.jQuery=t,window.WebPro=e,e}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(2),n(30),n(38),n(39),n(21),n(5),n(14),n(70),n(71),n(72),n(73),n(74),n(75),n(41),n(76),n(42),n(43),n(77),n(31),n(78),n(79),n(80),n(44),n(81),n(82),n(86),n(45),n(87),n(88),n(89),n(90),n(91)],void 0===(o=function(t,e){return window.Luca=t,window.Luca.Edgerton=e,t}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){return t.easing.jswing=t.easing.swing,t.extend(t.easing,{def:"easeOutQuad",swing:function(e,n,i,o,r){return t.easing[t.easing.def](e,n,i,o,r)},easeInQuad:function(t,e,n,i,o){return i*(e/=o)*e+n},easeOutQuad:function(t,e,n,i,o){return-i*(e/=o)*(e-2)+n},easeInOutQuad:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,o){return i*(e/=o)*e*e+n},easeOutCubic:function(t,e,n,i,o){return i*((e=e/o-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,o){return i*(e/=o)*e*e*e+n},easeOutQuart:function(t,e,n,i,o){return-i*((e=e/o-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,o){return i*(e/=o)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,o){return i*((e=e/o-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,o){return-i*Math.cos(e/o*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,o){return i*Math.sin(e/o*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,o){return-i/2*(Math.cos(Math.PI*e/o)-1)+n},easeInExpo:function(t,e,n,i,o){return 0==e?n:i*Math.pow(2,10*(e/o-1))+n},easeOutExpo:function(t,e,n,i,o){return e==o?n+i:i*(1-Math.pow(2,-10*e/o))+n},easeInOutExpo:function(t,e,n,i,o){return 0==e?n:e==o?n+i:(e/=o/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(2-Math.pow(2,-10*--e))+n},easeInCirc:function(t,e,n,i,o){return-i*(Math.sqrt(1-(e/=o)*e)-1)+n},easeOutCirc:function(t,e,n,i,o){return i*Math.sqrt(1-(e=e/o-1)*e)+n},easeInOutCirc:function(t,e,n,i,o){return(e/=o/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,o){var r=1.70158,a=0,s=i;if(0==e)return n;if(1==(e/=o))return n+i;if(a||(a=.3*o),s<Math.abs(i)){s=i;r=a/4}else r=a/(2*Math.PI)*Math.asin(i/s);return-s*Math.pow(2,10*(e-=1))*Math.sin((e*o-r)*(2*Math.PI)/a)+n},easeOutElastic:function(t,e,n,i,o){var r=1.70158,a=0,s=i;if(0==e)return n;if(1==(e/=o))return n+i;if(a||(a=.3*o),s<Math.abs(i)){s=i;r=a/4}else r=a/(2*Math.PI)*Math.asin(i/s);return s*Math.pow(2,-10*e)*Math.sin((e*o-r)*(2*Math.PI)/a)+i+n},easeInOutElastic:function(t,e,n,i,o){var r=1.70158,a=0,s=i;if(0==e)return n;if(2==(e/=o/2))return n+i;if(a||(a=o*(.3*1.5)),s<Math.abs(i)){s=i;r=a/4}else r=a/(2*Math.PI)*Math.asin(i/s);return e<1?s*Math.pow(2,10*(e-=1))*Math.sin((e*o-r)*(2*Math.PI)/a)*-.5+n:s*Math.pow(2,-10*(e-=1))*Math.sin((e*o-r)*(2*Math.PI)/a)*.5+i+n},easeInBack:function(t,e,n,i,o,r){return void 0==r&&(r=1.70158),i*(e/=o)*e*((r+1)*e-r)+n},easeOutBack:function(t,e,n,i,o,r){return void 0==r&&(r=1.70158),i*((e=e/o-1)*e*((r+1)*e+r)+1)+n},easeInOutBack:function(t,e,n,i,o,r){return void 0==r&&(r=1.70158),(e/=o/2)<1?i/2*(e*e*((1+(r*=1.525))*e-r))+n:i/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+n},easeInBounce:function(e,n,i,o,r){return o-t.easing.easeOutBounce(e,r-n,0,o,r)+i},easeOutBounce:function(t,e,n,i,o){return(e/=o)<1/2.75?i*(7.5625*e*e)+n:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(e,n,i,o,r){return n<r/2?.5*t.easing.easeInBounce(e,2*n,0,o,r)+i:.5*t.easing.easeOutBounce(e,2*n-r,0,o,r)+.5*o+i}}),t.easing}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(30)],void 0===(o=function(t,e){var n=function(){this._props={}};t.extend(n.prototype,{setProp:function(t,e){return t&&(this._props[t]=e),e},getProp:function(t){return this._props[t]},clearProp:function(t){t&&t in this._props&&delete this._props[t]},clearAllProps:function(){this._props={}},getValue:function(){return""}});var i=function(e,i){n.call(this),this.$ele=t(e),this.options=t.extend({},this.defaultOptions,i),this._dirty=!0,this.clearAllProps()};function o(t,e,n){for(var i=t.length,o=0;o<i;o++)e.apply(t.eq(o),n);return t}t.extend(i.prototype,n.prototype,{defaultOptions:{propertyName:"transform",forceTranslate3d:!0},setProp:function(t,e){return this._dirty=!0,n.prototype.setProp.call(this,t,e)},clearProp:function(t){return this._dirty=!0,n.prototype.clearProp.call(this,t)},clearAllProps:function(){n.prototype.clearAllProps.call(this),this.options.forceTranslate3d&&(this.setProp("translateX","0"),this.setProp("translateY","0")),this._dirty=!0},getValue:function(){var t="",e=this._props,n=e.perspective;void 0!=n&&(t+=(t?" ":"")+"perspective("+n+")");var i=e.translateX,o=e.translateY,r=e.translateZ;void 0==i&&void 0==o&&void 0==r||(i=i||"0",o=o||"0",r=r||"0",t+=(t?" ":"")+"translate3d("+i+","+o+","+r+")");var a=e.rotate,s=e.rotateX,l=e.rotateY;void 0!=a&&(t+=(t?" ":"")+"rotate("+a+")"),void 0!=s&&(t+=(t?" ":"")+"rotateX("+s+")"),void 0!=l&&(t+=(t?" ":"")+"rotateY("+l+")");var c=e.scale,u=e.scaleX,h=e.scaleY,d=e.scaleZ;void 0!=c&&(u=c,h=c),void 0==u&&void 0==h||(u=void 0===u?1:u,h=void 0===h?1:h,t+=(t?" ":"")+"scale("+u+","+h+")"),void 0!=d&&(t+=(t?" ":"")+"scaleZ("+d+")");var f=e.skewX,p=e.skewY;return void 0!=f&&(t+=(t?" ":"")+"skewX("+f+")"),void 0!=p&&(t+=(t?" ":"")+"skewY("+p+")"),t||"none"},sync:function(t){(t||this._dirty)&&this.$ele.css(this.options.propertyName,this.getValue())}}),e.compositePropsRegistry={transform:i},t.fn.edgertonGetCompositeProperty=function(n,i){var o=null,r=this[0];if(r){var a=t.data(r,"composite-props");if(a||(a={},t.data(r,"composite-props",a)),!(o=a[n])){var s=e.compositePropsRegistry[n];o=a[n]=new s(r,i)}}return o},t.fn.setCompositeTransformProp=function(t,e,n){return o(this,function(t,e,n){var i={},o="object"==typeof arguments[0];n=arguments[o?1:2]||{};var r=this.edgertonGetCompositeProperty("transform",n);if(r){if(o){i=arguments[0];for(var a in i)r.setProp(a,i[a])}else r.setProp(t,e);(n.sync||n.forceSync)&&r.sync(n.forceSync)}},arguments)},t.fn.clearCompositeTransformProps=function(t){return o(this,function(t){var e=this.edgertonGetCompositeProperty("transform",t);e&&(t=t||{},e.clearAllProps(),(t.sync||t.forceSync)&&e.sync(t.forceSync))},arguments)},t.fn.syncCompositeTransformProps=function(t){return o(this,function(t){var e=this.edgertonGetCompositeProperty("transform",t);e&&(t=t||{},e.sync(t.forceSync))},arguments)};var r=function(n,i,o,r,a){e.Animation.call(this),this.$ele=t(n),this.propName=i,this.fromValue=parseFloat(o),this.toValue=parseFloat(r),this.delta=this.toValue-this.fromValue,this.unit=(o+"").replace(/^[+-]?[0-9]*(\.[0-9]+)*/,""),this.valueFilter=a&&a.valueFilter,this.composite=this.$ele.edgertonGetCompositeProperty("transform",a)};return t.extend(r.prototype,e.Animation.prototype,{update:function(t,e,n){if(this.composite){var i={value:this.fromValue+this.delta*e,unit:this.unit||""};this.valueFilter&&(i=this.valueFilter(i)),this.composite.setProp(this.propName,i.value+i.unit),this.composite.sync()}}}),e.addTweenType("transform",function(t,n,i,o){return new e.TransformTween(t,n,o.fromValue,i,o)}),e.CompositeProperty=n,e.TransformCompositeProperty=i,e.TransformTween=r,e.CompositeProperty}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2),n(5),n(14)],void 0===(o=function(t,e,n,i){var o={"title-top-left":!0,"title-top":!0,"title-top-right":!0,"title-left":!0,"title-center":!0,"title-right":!0,"title-bottom-left":!0,"title-bottom":!0,"title-bottom-right":!0};function r(t,e,n){var i={start:t,duration:e};return t>=n?i.duration=0:t+e>n&&(i.duration=n-t),i}e.getTitleSectionHeaderInfo=function(t,e){var n={x0:0,y0:0,x1:0,y1:0,width:0,height:0,alignment:"center"},i=e.find(".title-header-view");e[0].offsetWidth,e[0].offsetHeight;if(i.length){var r=i[0];n.width=r.offsetWidth,n.height=r.offsetHeight,n.x0=r.offsetLeft,n.y0=r.offsetTop,n.x1=n.x0+n.width,n.y1=n.y0+n.height;var a=t[0].classList;if(a)for(var s=a.length,l=0;l<s;l++){var c=a[l];if(o[c]){n.isTopAligned=-1!=c.search(/top/),n.isRightAligned=-1!=c.search(/right/),n.isBottomAligned=-1!=c.search(/bottom/),n.isLeftAligned=-1!=c.search(/left/),n.isCenterAligned=-1!=c.search(/center/),n.alignment=c.replace(/^title-/,"");break}}}return n};var a=e.getSectionsArticleHandler("title-auto-size");e.registerSectionsArticleHandler("title-section",t.extend({},a,{_initialize:function(n,i){a._initialize.call(this,n,i);var o=t(n),s=o.data("timeline"),l=(o.find(".section-background"),i.props),c=(l.height,i.nextProps&&1===i.nextProps.layer),u=(l.topDuration,l.scrollOutDuration,o.find(".title-header")),h=u.find(".title-header-view"),d=r(l.topDuration,l.height,l.topDuration+l.scrollOutDuration);if(u.length&&d.duration){var f=e.getTitleSectionHeaderInfo(o,u),p=(-(f.isTopAligned?.1:f.isBottomAligned?c?.75:1.25:.5)+(c?0:1))*l.height;if(d.duration&&p){var g=d.duration/l.height,m=Math.round(p*g);if(s.translateY(u,d.start,d.duration,"0px",m+"px"),f.isBottomAligned){var v=u.find(".gradient-overlay");v.length&&s.translateY(v,d.start,d.duration,"0px",-m-(c?d.duration:0)+"px")}var _=Math.round(.3*l.height),y=Math.round(.7*l.height),b=r(l.topDuration+_,y,l.topDuration+l.scrollOutDuration);b.duration&&(s.opacity(h,b.start,b.duration,{fromOpacity:"1",toOpacity:1-b.duration/y+""}),f.isBottomAligned&&h.find(".title, .subtitle").css(e.vendorPrefix+"transform","translate3d(0,0,0)"))}}}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2),n(5),n(14)],void 0===(o=function(t,e,n,i){var o=e.getSectionsArticleHandler("title-auto-size");e.registerSectionsArticleHandler("title-bump-section",t.extend({},o,{_initialize:function(e,n){o._initialize.call(this,e,n);var i=t(e);i.data("bumpOptions",n),i.data("bumpEnabled",this._getIsBumpAllowed(t(e),n))},addAnimations:function(n,i,o){var r=(a=t(n)).data("bumpOptions").props;if(a.data("bumpEnabled")){var a,s=(a=t(n)).find(".section-background-image"),l=a.find(".title-header-view"),c=a.find(".navigation-hint"),u=(r.height,o+this.getDuration(n));if(s.length&&1!=a.data("backgroundFixed")&&i.translateY(s,u,r.scrollOutDuration,"0px",-r.scrollOutDuration+"px",{valueFilter:e.roundValueFilter}),l.length&&1!=a.data("headerFixed")){var h=l[0].offsetTop+l[0].offsetHeight,d=r.height-h;if((p=r.scrollOutDuration-d)>0){var f=u+d;i.translateY(l,f,p,"0px",-p+"px",{valueFilter:e.roundValueFilter})}}if(c.length&&1!=a.data("navigation-hint-fixed")){var p,g=c[0].offsetTop+c.outerHeight(!0);d=r.height-g;if((p=Math.round(.5*(r.scrollOutDuration-d)))>0){f=u+d;i.translateY(c,f,p,"0px",-p+"px",{valueFilter:e.roundValueFilter}),i.opacity(c,f,p,{fromOpacity:"1",toOpacity:"0"})}}return e.getSectionsArticleHandler("default").addAnimations(n,i,o)}},_getIsBumpAllowed:function(t,e){var n=e.props,i=e.nextProps;return i&&1===i.layer&&n.scrollOutDuration}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2),n(5),n(14)],void 0===(o=function(t,e,n,i){var o=e.getSectionsArticleHandler("title-auto-size");e.registerSectionsArticleHandler("title-parallax-section",t.extend({},o,{_initialize:function(e,n){o._initialize.call(this,e,n);var i=t(e);i.data("parallaxOptions",n),i.data("parallaxEnabled",this._getIsParallaxAllowed(t(e),n))},addAnimations:function(n,i,r){var a=t(n);if(a.data("parallaxEnabled")){var s=a.data("parallaxOptions"),l=s.props,c=s.nextProps,u=.3,h=.1,d=c&&1===c.layer?0:1,f=l.scrollOutDuration,p=r+this.getDuration(n),g=a.find(".section-background-image"),m=a.find(".title-header-view"),v=a.find(".navigation-hint");if(m.length){var _=m[0].offsetTop,y=_+m[0].offsetHeight;_/=l.height,y/=l.height,_<.1&&y<.3&&(u=.075,h=.05),_>.7&&y>.9&&(u=.85,h=.3)}var b=Math.round(f*(d-h)),w=Math.round(f*(d-u));return g.length&&0!=b&&i.translateY(g,p,f,"0px",b+"px",{valueFilter:e.roundValueFilter}),m.length&&0!=w&&i.translateY(m,p,f,"0px",w+"px",{valueFilter:e.roundValueFilter}),v.length&&0!=w&&i.translateY(v,p,f,"0px",w+"px",{valueFilter:e.roundValueFilter}),o.addAnimations(n,i,r)}},_getIsParallaxAllowed:function(t,e){return e.props.scrollOutDuration}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(5),n(14),n(41)],void 0===(o=function(t,e,n,i,o,r){var a=n.getSectionsArticleHandler("title-auto-size");n.registerSectionsArticleHandler("title-zoom-and-drift",t.extend({},a,{_initialize:function(e,i){a._initialize.call(this,e,i);var o=t(e),r=o.data("timeline"),s=o.find(".section-background"),l=o.data("zoomStart")||0,c=o.data("zoomStop")||1,u=o.data("zoomFrom"),h=o.data("zoomTo"),d=i.props,f=d.height,p=i.nextProps&&1===i.nextProps.layer,g=d.topDuration+d.scrollOutDuration;r.setLimit(g),l=Math.round(parseFloat(l)*f)+d.topDuration,c=Math.round(parseFloat(c)*f),u=void 0===u?"1":u,h=void 0===h?"1.1":h,c>0&&(u!=h&&r.scale(s,l,c,u,h),p&&r.translateY(s,l,c,"0px",-c+"px",{valueFilter:n.roundValueFilter}));var m=o.find(".title-header"),v=m.find(".title-header-view");if(v.length){var _=v.find(".gradient-overlay"),y=Math.round(.5*f);if(y>0){var b=d.topDuration,w=n.getTitleSectionHeaderInfo(o,m),S=w.y0,x=w.height,C=w.isTopAligned,T=w.isBottomAligned,I=C?"easeOutQuad":T?"easeOut":"easeInQuad",k=(y-x)/2-S,A=0;if(k&&(A=this.vpRelativeTranslateY(p,r,v,b,y,0,k,{easing:I,valueFilter:n.roundValueFilter})),C){var P=Math.round(.33*y),E=y-P,$=(E-x)/2-S-k;A=this.vpRelativeTranslateY(p,r,v,b+y,P,A,$,{easing:"easeInQuad",valueFilter:n.roundValueFilter}),p&&this.vpRelativeTranslateY(p,r,v,b+y+P,E,A,-E,{easing:"linear",valueFilter:n.roundValueFilter})}else p&&r.translateY(v,b+y,y,k+"px",k-y+"px",{valueFilter:n.roundValueFilter});if(_.length>0&&(C||T)){var D=-k+(T?-y:0);r.translateY(_,b,y,"0px",D+"px",{easing:I,valueFilter:n.roundValueFilter}),v.children().css(n.vendorPrefix+"transform","translate3d(0,0,0)")}}}},getVPRelativeEasing:function(e,n,i,o){o=t.extend({easing:"linear"},o);var r=t.easing[o.easing]||t.easing.linear,a=e?0:n,s={delta:i,scrollDelta:a,totalDelta:i+a,easing:function(t,e,n,i,o){return(s.delta*r(t,e,n,i,o)+s.scrollDelta*t)/s.totalDelta}};return s},vpRelativeTranslateY:function(e,n,i,o,r,a,s,l){l=t.extend({easing:"linear"},l);var c=this.getVPRelativeEasing(e,r,s,l),u=a+c.totalDelta;return l.easing=c.easing,n.translateY(i,o,r,a+"px",u+"px",l),u}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2),n(5),n(14)],void 0===(o=function(t,e,n,i){var o=e.getSectionsArticleHandler("title-auto-size");e.registerSectionsArticleHandler("title-gradient-shift",t.extend({},o,{_initialize:function(e,n){o._initialize.apply(this,arguments),t(e).data("parallaxOptions",n)},addAnimations:function(n,i,r){var a=t(n),s=a.data(),l=s.parallaxOptions;if(s.scrollOutDuration){var c=l.nextProps,u=.3,h=c&&1===c.layer?0:1,d=s.scrollOutDuration,f=s.scrollOutOffset,p=a.find(".title-header-view");if(p.length){var g=p[0].offsetTop,m=g+p[0].offsetHeight;g/=s.sectionHeight,m/=s.sectionHeight,g<.1&&m<.3&&(u=.2),g>.7&&m>.9&&(u=.8);var v=Math.round(d*(h-u));0!=v&&i.translateY(p,f,d,"0px",v+"px",{valueFilter:e.roundValueFilter})}var _=a.find(".gradient-overlay"),y=_.closest(".title-header");return 0!=y.length&&_.insertBefore(y),_.length&&(i.opacity(_,f,d,{fromOpacity:"0",toOpacity:"1"}),_.css("opacity","0")),o.addAnimations.apply(this,arguments)}}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(5),n(42),n(43)],void 0===(o=function(t,e,n,i,o,r){var a=n.getSectionsArticleHandler("default");n.registerSectionsArticleHandler("content-triggers-section",t.extend({},a,{_initialize:function(e,n){a._initialize.call(this,e,n);var i=t(e),o=i.data("timeline"),r=i.find(".image, .image .caption, blockquote");this.addElementAnimations(i,o,r,n)},addElementAnimations:function(t,n,i,o){var r=t.find(".section-content");if(!(r.length<1)){var a=Math.min(r[0].offsetHeight,o.articleHeight),s=Math.round(.2*a),l=o.props,c=l.visible?a-l.fromPosition:0,u=e.Utils.getDocumentOffset(t[0]),h=e.Utils.getDocumentOffset(r[0]),d=h.top-u.top,f=(n.getDuration()||a)-1;f=f<1?0:f;for(var p=i.length,g=0;g<p;g++){var m=i[g],v=this.getElementDocOffset(m).top-h.top;v=Math.min(d+v-c+s,f);n.removeClass(m,v,"hidden"),this.postProcessElement&&this.postProcessElement(t,n,{ele:m,offset:v,maxOffset:f,clipHeight:a},o)}i.addClass("hidden")}},getElementDocOffset:function(t){return e.Utils.getDocumentOffset(t)}}));var s=n.getSectionsArticleHandler("card-flipbook-section");n.registerSectionsArticleHandler("column-overlay-content-triggers",t.extend({},s,{addGroupAnimations:function(t,e,n){s.addGroupAnimations.apply(this,arguments);for(var i=n.sectionOptions.props.height,o=Math.round(.2*i),r=n.isFirst?i-n.fromY:0,a=e.find(".image, .image .caption, blockquote, .grid-caption"),l=a.length,c=0;c<l;c++){var u=a[c],h=n.offset+u.offsetTop-r+o;t.removeClass(u,h,"hidden")}a.addClass("hidden")}}));var l=n.getSectionsArticleHandler("photo-grid-section");n.registerSectionsArticleHandler("photo-grid-caption-trigger",t.extend({},l,{_initialize:function(e,i){var o=t(e),r=t.data(e,"timeline"),a=n.getSectionsArticleHandler("content-triggers-section"),s=o.find(".grid-caption");l._initialize.call(this,e,i),a.addElementAnimations.call(this,o,r,s,i)}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2),n(5)],void 0===(o=function(t,e,n){var i=e.getSectionsArticleHandler("default");e.registerSectionsArticleHandler("window-section",t.extend({},i,{_initialize:function(e,n){t(e).data("windowSectionOptions",n),i._initialize.call(this,e,n)},addAnimations:function(e,n,o){i.addAnimations.apply(this,arguments);var r=t(e),a=r.data()||{},s=a.layer||0,l=a.windowSectionOptions||{},c=r.find("."+(l.windowClass||"section-background")),u=l.props,h=l.articleHeight,d=a.sectionHeight,f=0;-1===s&&(f=h-d-u.fromPosition)>0&&(f=0);var p=-(u.fromPosition+f),g=o,m=u.topDuration;-1===s&&(g+=u.bottomDuration,m-=u.bottomDuration),m>0&&n.translateY(c,g,m,p+"px",p+m+"px");var v=l.nextProps;if(!(v&&1===v.layer)){var _=a.scrollOutDuration;_>0&&n.translateY(c,a.scrollOutOffset,_,"0px",_+"px")}c.css("height",h+"px"),c.setCompositeTransformProp("translateY",p+"px",{sync:!0})}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(5)],void 0===(o=function(t,e,n,i){var o=n.getSectionsArticleHandler("default");n.registerSectionsArticleHandler("split-layout-base",t.extend({},o,{_initialize:function(e,n){var i=t(e),r=i.data("timeline"),a=i.find(".section-background"),s=i.find(".section-content");this._resetElements(i,a,s);var l=a[0].offsetHeight;i.data("sectionOptions",n),i.data("heightIn",l),i.data("heightOut",l),i.data("yOut",0),a[0].offsetTop<s[0].offsetTop?this._addStackedVerticalAnimations(r,i,a,s,n):o._initialize.call(this,e,n)},_resetElements:function(t,e,n){var i=e.find(".section-background-image"),o=n.children(".section-content-view");i.css("height",e[0].offsetHeight+"px"),i.setCompositeTransformProp("translateY","0px",{sync:!0}),e.setCompositeTransformProp("translateY","0px",{sync:!0}),o.setCompositeTransformProp("translateY","0px",{sync:!0}),n.setCompositeTransformProp("translateY","0px",{sync:!0})},_addStackedVerticalAnimations:function(t,e,n,i,o){var r=n[0].offsetHeight,a=e.find(".section-content"),s=a.children(".section-content-view"),l=Math.min(a[0].offsetHeight,o.articleHeight),c=s[0].scrollHeight;if(c>l){var u=o.props.bottomDuration,h=c-l,d=Math.min(r-Math.round(o.articleHeight/4),h);if((d=d<0?0:d)>0){var f=r-d;t.translateY(i,u,d,"0px",-d+"px"),e.data("heightOut",f),e.data("yOut",d),this._addStackedVerticalBkgAnimations(t,e,n,u)}(h-=d)>0&&t.translateY(s,u+d,h,"0px",-h+"px")}},_addStackedVerticalBkgAnimations:function(t,e,n,i){var o=e.data("heightIn")||0,r=e.data("heightOut")||0,a=e.data("yOut")||0;if(a>0){var s=n.find(".section-background-image");t.style(s,i,a,"height",o+"px",r+"px"),t.translateY(n,i,a,"0px",-a+"px"),t.translateY(s,i,a,"0px",a+"px")}}}));var r=n.getSectionsArticleHandler("split-layout-base");n.registerSectionsArticleHandler("split-layout-parallax",t.extend({},r,{_addStackedVerticalBkgAnimations:function(t,e,n,i){},addAnimations:function(e,i,a){var s=t(e),l=s.data("sectionOptions"),c=l.props,u=l.articleHeight,h=s.find(".section-background"),d=h.find(".section-background-image");if(c&&d.length){var f=s.data("heightIn"),p=s.data("heightOut"),g=s.data("yOut")||0,m=(d[0].offsetHeight,0),v=0,_=u-c.topDuration;_<f&&(m=-Math.round(.2*f*((f-_)/f)),v=f-_);var y=Math.min(c.scrollOutDuration,p),b=Math.round(.2*p*(y/p));0!=m&&i.translateY(d,c.scrollInOffset,v,m+"px","0px",{valueFilter:n.roundValueFilter}),0!=b&&i.translateY(d,c.scrollOutOffset,y,g+"px",g+b+"px",{valueFilter:n.roundValueFilter})}return r._addStackedVerticalBkgAnimations.call(this,i,s,h,a+c.bottomDuration),o.addAnimations(e,i,a)}})),n.registerSectionsArticleHandlerAliases({"split-layout":"split-layout-parallax"})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(2),n(5)],void 0===(o=function(t,e){var n=["-title","-single-column","-split-layout","-column-overlay","-spacer","-fullscreen-photo","-window","-full-width-photo","-photo-grid","-author","-credits"],i=["baldwin","bruce","chic","crisp","luca","nightcap","storybook","tereza","trek","vintage","wesley","wiper","whimsy"];t.registerSectionsArticleHandlerAliases({"default-title":"title-zoom-and-drift","default-single-column":"content-triggers-section","default-split-layout":"split-layout-parallax","default-column-overlay":"column-overlay-content-triggers","default-spacer":"default","default-fullscreen-photo":"zoom-section","default-window":"window-section","default-full-width-photo":"content-triggers-section","default-photo-grid":"photo-grid-caption-trigger","default-author":"default","default-credits":"default"});for(var o=0;o<i.length;o++){for(var r=i[o],a={},s=0;s<n.length;s++){var l=n[s];a[r+l]="default"+l}t.registerSectionsArticleHandlerAliases(a)}t.registerSectionsArticleHandlerAliases({"baldwin-title":"title-section","bruce-title":"title-section","luca-title":"title-parallax-section","nightcap-title":"title-section","vintage-title":"title-gradient-shift"})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2),n(5)],void 0===(o=function(t,e,n){e.registerSectionsArticleHandler("bumper-grow-and-fade",t.extend({},e.GenericSectionArticleHandler,{_initialize:function(n,i){var o=t(n),r=o.data("timeline"),a=e.vendorPrefix+"transform",s=e.vendorPrefix+"transform-origin",l=o.find(".bumper-content"),c=o.find(".footer"),u=l.find(".logo"),h=l.find(".made-with p"),d=h.eq(1);h=h.eq(0);var f=l.find(".button"),p=i.props,g=-1===p.layer,m=p.height,v=Math.round(m/2);if(!(u.length<1||h.length<1)){var _=u[0].offsetTop,y=u[0].offsetHeight,b=(Math.round(y/2),h[0].offsetTop),w=h[0].offsetHeight,S=_-b+Math.round((y-w)/2),x=u[0].offsetLeft,C=u[0].offsetWidth,T=h[0].offsetLeft,I=h[0].offsetWidth,k=Math.min(x,T),A=Math.max(x+C,T+I)-k,P=Math.min(_,b+S),E=Math.min(_+y,b+S+w)-P,$=0-k+Math.round((o[0].offsetWidth-A)/2),D=0-_-Math.round(E/2),M=Math.round(v/2-P-E/2);g&&r.translateY(l,0,m,m+"px","0px"),r.translateX(u,0,v,$+"px",$+"px"),r.translateY(u,0,v,D+"px",M+"px"),r.scale(u,0,v,"0","1"),r.translateX(h,0,v,$+"px",$+"px"),r.translateY(h,0,v,S+D+"px",S+M+"px"),r.scale(h,0,v,"0","1");var O=Math.round(.25*m);r.translateX(u,v,O,$+"px","0px"),r.translateY(u,v,O,M+"px","0px"),r.translateX(h,v,O,$+"px","0px"),r.translateY(h,v,O,S+M+"px","0px");var B=Math.min(O/2);d.length>0&&(r.opacity(d,v+O,B,{fromOpacity:"0",toOpacity:"1"}),r.translateY(d,v+O,B,"50%","0%")),f.length>0&&(r.opacity(f,v+O+B,B,{fromOpacity:"0",toOpacity:"1"}),r.translateY(f,v+O+B,B,"25%","0%")),c.length>0&&r.translateY(c,v,v,c[0].offsetHeight-(g?0:v)+"px","0px");var N=k+A/2;h.css(s,N-T+"px 50%").css(a,"translate3d("+$+"px,"+S+"px,0)"),u.css(s,N-x+"px 50%").css(a,"translate3d("+$+"px,0,0)"),d.css("opacity","0").css(a,"translate3d(0,50%,0)"),f.css("opacity","0").css(a,"translate3d(0,25%,0)"),c.css(a,"translate3d(0,"+(g?c[0].offsetHeight:0)+"px,0)")}}}))}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(5)],void 0===(o=function(t,e,n,i){var o=36700160,r=524288,a=2097152;t(document.body).bind("luca-publication-viewer-ready",function(){var i=n.publicationViewer;i.isEditor()||i.bind("article-activated",function(n,i){var s=i&&i.article;s&&function(n){var i=t(n),s=i.find(".photo-image"),l=e.isChrome?i.find(".card-flipbook-section .section-background-image"):t();if(s.length>0||l.length>0){var c=0;i.find(".section").each(function(){var e=t(this).find(".image img");c=Math.max(c,e.length)}),r*s.length+a*l.length+a*c<=o?(s.length&&i.addClass("optimize-photo-grid-scrolling"),l.length&&i.addClass("optimize-card-flipbook-scrolling")):i.removeClass("optimize-photo-grid-scrolling").removeClass("optimize-card-flipbook-scrolling")}}(s)})})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2)],void 0===(o=function(t,e){var n={_initialize:function(){this._handleViewerReady=t.proxy(this._handleViewerReady,this),t(document.body).bind("luca-publication-viewer-ready",this._handleViewerReady)},_handleViewerReady:function(e){var n=t(".article").data("animator"),i=n.getDuration(),o=.75,r=Date.now(),a=!1;window.requestAnimationFrame(function t(){var e=Date.now()-r;a?(e=i-(e*=4),n.scrollTo(0,e<0?0:e),e<=0?setTimeout(function(){r=Date.now(),a=!1,window.requestAnimationFrame(t)},1e3):window.requestAnimationFrame(t)):(e=Math.round(e*o),n.scrollTo(0,e>i?i:e),e>i?setTimeout(function(){r=Date.now(),a=!0,window.requestAnimationFrame(t)},1e3):window.requestAnimationFrame(t))})}};"autoscroll"===e.getPageMode()&&n._initialize(),e.AutoScrollMode=n}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(5),n(44),n(83),n(84),n(85)],void 0===(o=function(t,e,n,i,o,r,a,s){function l(t,e,n){this.offsetData=t,this.index=e,this.pagingIndex=n}var c={pagingStyle:"full",_initialize:function(){this._currentArticle=null,this._handleViewerReady=t.proxy(this._handleViewerReady,this),this._handlePrevious=t.proxy(this._handlePrevious,this),this._handleNext=t.proxy(this._handleNext,this),this._handleAdjustVisuals=t.proxy(this._handleAdjustVisuals,this),this._handleResizeUpdate=t.proxy(this._handleResizeUpdate,this),this._handleGlobalKey=t.proxy(this._handleGlobalKey,this),n.publicationViewer&&n.publicationViewer.isReady?this._handleViewerReady(null):t(document.body).bind("luca-publication-viewer-ready",this._handleViewerReady)},_handleViewerReady:function(e){var i=t(this._syncCurrentArticle()),o=(n.publicationViewer.$element,t(document.body)),s=t(".prevSectionButton"),l=t(".nextSectionButton");o.addClass("presentation-mode"),s.click(this._handlePrevious),l.click(this._handleNext),n.addGlobalKeyHandler(this._handleGlobalKey),n.publicationViewer.bind("publication-adjust-visuals",this._handleAdjustVisuals),t(window).bind("resize",this._handleResizeUpdate),a.init(i),r.init(i),this.update()},_handlePrevious:function(t){return this.previousFromCurrentPosition(),!1},_handleNext:function(t){return this.nextFromCurrentPosition(),!1},_handleAdjustVisuals:function(){t(".article").data("pmDirty",!0);var e=t(this._syncCurrentArticle()),n=e.data("pmOffsetIndex");this._generatePageOffsets(e),n&&e.data("pmOffsetIndex",n)},_handleResizeUpdate:function(t){this.update()},_handleGlobalKey:function(t){if(!n.isKeyHandlingException(t.target)){var e=n.keyCodes;switch(t.keyCode){case e.ARROW_LEFT:return this.previousFromCurrentPosition(),t.preventDefault(),!0;case e.ARROW_RIGHT:return this.nextFromCurrentPosition(),t.preventDefault(),!0}}},_prepArticle:function(e){var n=t(e),i=n.data("pmOffsets"),o=n.data("pmDirty");i&&!o||this._generatePageOffsets(n)},_syncCurrentArticle:function(){var t=n.publicationViewer.getActiveArticle();return t!=this._currentArticle&&(this._prepArticle(t),this._currentArticle=t),t},update:function(){var e=t(this._syncCurrentArticle());r.update(e),n.publicationViewer.adjustVisuals(),s.update(e),a.update(e),n.publicationViewer.adjustVisuals()},getNearestOffset:function(t,e){var n=0,i=0,o=t.data("pmOffsets")||[];if(o.length)for(var r=Number.POSITIVE_INFINITY,a=null,s=0,c=o.length;s<c;s++){var u=o[s].$element.closest(".section");u.is(a)?i++:(i=0,a=u);var h=Math.abs(e-o[s].offset);if(!(h<r))break;n=s,r=h}return new l(o[n],n,i)},_getSectionsScroller:function(n){var i=t(n),o=i.data("sectionsScroller");return o||(o=new e.Widget.SectionsArticleScroller(i,{scrollDuration:500}),i.data("sectionsScroller",o)),o},_findBeforeAndAfterOffsets:function(t,e){var n=this.getNearestOffset(t,e),i=n.offsetData.offset,o=n.index,r=.05*t[0].offsetHeight,a=o-1,s=o+1,c=i-e;Math.abs(c)>r&&(c<0?a=o:s=o);var u=t.data("pmOffsets")||[],h=u.length-1;return{before:a<0?null:new l(u[a],a),after:s>h?null:new l(u[s],s)}},_generatePageOffsets:function(e){for(var n=t(e),i=n.find(".section"),o=i.length,r=[],a=0;a<o;a++){var s=t(i[a]);if(this._isValidSection(s)){var l=this._getSectionHandler(s).getScrollOffsets(n,s);r.push.apply(r,l)}}var c=n.data("animator").getDuration(),u=-1;return(r=r.filter(function(t,e,n){var i=t.offset,o=!(0!=e&&(i===u||i>c));return u=i,o})).forEach(function(t,e,n){t.sectionIndex=t.$element.closest(".section").index()}),n.data("pmDirty",!1),n.data("pmOffsets",r),n.data("pmOffsetIndex",0),r},_isValidSection:function(t){return!(t.hasClass("spacer-section")||t.hasClass("bumper-section"))},_getSectionHandler:function(t){var e=u[function(t){var e=/([^\s]+-section)\b/.exec(t[0].className||"");return e?e[1]:""}(t)];return e||(e=u.default),e},previous:function(){var e=t(this._syncCurrentArticle()),i=e.data("pmOffsets"),o=e.data("pmOffsetIndex")-1,r=this._getSectionsScroller(e);o>=0?(e.data("pmOffsetIndex",o),m(r,i[o])):n.publicationViewer.previousPage()},next:function(){var e=t(this._syncCurrentArticle()),i=e.data("pmOffsets"),o=e.data("pmOffsetIndex")+1,r=this._getSectionsScroller(e);o<i.length?(e.data("pmOffsetIndex",o),m(r,i[o])):n.publicationViewer.nextPage()},previousFromCurrentPosition:function(){var e=t(this._syncCurrentArticle()),i=this._getSectionsScroller(e);if(-1===i.getScrollDirection())return this.previous();var o=e.data("animator"),r=this._findBeforeAndAfterOffsets(e,o.playPosition);r.before?(e.data("pmOffsetIndex",r.before.index),m(i,r.before.offsetData)):n.publicationViewer.previousPage()},nextFromCurrentPosition:function(){var e=t(this._syncCurrentArticle()),i=this._getSectionsScroller(e);if(1===i.getScrollDirection())return this.next();var o=e.data("animator"),r=this._findBeforeAndAfterOffsets(e,o.playPosition);r.after?(e.data("pmOffsetIndex",r.after.index),m(i,r.after.offsetData)):n.publicationViewer.nextPage()}};var u={default:{getScrollOffsets:function(t,e){var n=0;if(e.length>0){var i=t[0].offsetHeight,o=e.data()||{},r=o.scrollOutOffset-o.scrollInOffset;n=o.scrollOutOffset,r>i&&(n=o.scrollInOffset+i)}return[{$element:e,offset:n}]}}};u["single-column-section"]={getScrollOffsets:function(t,e){var n=[],i=u.default.getScrollOffsets(t,e)[0].offset,o=t[0].offsetHeight,r=e.data()||{},a=r.scrollOutOffset-r.scrollInOffset;return n.push({$element:e,offset:i}),f(n,i,a,o,e),n}},u["photo-grid-section"]=u["single-column-section"],u["card-flipbook-section"]={getScrollOffsets:function(t,e){for(var n=e.find(".section-content-view"),i=e.find(".section-background-image"),o=[],r=u.default.getScrollOffsets(t,e)[0].offset,a=t[0].offsetHeight,s=i.length-1,l=0;l<i.length;l++){var c=i.eq(l),h=n.eq(l);if(h.length){var d=h[0].getBoundingClientRect(),p=r+(h.data("sectionYOffset")||0);d.height<=a&&(p-=Math.round((a-d.height)/2)),o.push({$element:c,offset:p}),f(o,p,d.height,a,h)}else p=l!==s?r+c.data("transitionInEnd"):e.data("scrollOutOffset"),o.push({$element:c,offset:p})}return o}},u["window-section"]={getScrollOffsets:function(t,e){var n=[];if(e.length>0){t[0].offsetHeight;var i=e.data()||{},o=(i.scrollOutOffset,i.scrollInOffset,i.scrollInOffset+i.sectionHeight);n.push({$element:e.eq(0),offset:o+Math.round((i.scrollOutOffset-o)/2)})}return n}};var h=.9,d=.05;function f(t,e,n,i,o){if(i&&!(n<=i))switch(c.pagingStyle){case"avg":return p(t,e,n,i,o);case"htop":return function(t,e,n,i,o){var r=g(o);if(!r.length)return p(t,e,n,i,o);var a=i*h,s=n-i;r.push(s);for(var l=0,c=1,u=0,d=r.length;u<d;u++){var f=r[u],m=f-l;if(m>i)for(var v=m/a,_=Math.floor(v),y=(m-i)/_,b=1;b<_+1;b++)t.push({$element:o,offset:e+l+b*y,page:c++});if(f>=s&&(f=s),t.push({$element:o,offset:e+f,page:c++}),f===s)break;l=f}}(t,e,n,i,o);case"hcenter":return function(t,e,n,i,o){var r=g(o);if(!r.length)return p(t,e,n,i,o);var a=i*h,s=n;r.push(s);for(var l=0,c=1,u=0,d=r.length;u<d;u++){var f=r[u],m=f-l;if(m>i)for(var v=m/a,_=Math.floor(v),y=(m-i)/_,b=1;b<_+1;b++)t.push({$element:o,offset:e+l+b*y,page:c++});else{var w=t.length-1,S=t[w];S.offset-=(i-m)/2}if(f===s)break;t.push({$element:o,offset:e+f,page:c++}),l=f}}(t,e,n,i,o);case"full":default:return function(t,e,n,i,o){for(var r=i*h,a=(n-i)/r,s=Math.floor(a)+1,l=1;l<s;l++)t.push({$element:o,offset:e+l*r,page:l});var c=n-i;s>0&&(c-(s-1)*r)/i>=d&&t.push({$element:o,offset:e+c,page:s,partial:!0})}(t,e,n,i,o)}}function p(t,e,n,i,o){var r=i*h,a=n/r,s=Math.floor(a);r=(n-i)/s;for(var l=1;l<s+1;l++)t.push({$element:o,offset:e+l*r,page:l})}function g(t){var e=[],n=t.find(".content-container");if(n.length){var i=n.find("h3:not(:first-child)");if(i.length){var o=n[0].getBoundingClientRect().top;e=i.map(function(t,e){return e.getBoundingClientRect().top-o}).get()}}return e}function m(e,n){e.scrollTo(n.offset),t(document.body).trigger("presentation-mode-scroll",n)}var v=n.getPageMode();"presentation"!==v&&"present"!==v||c._initialize(),c.ContentSizing=r,c.ContentPadding=a,n.PresentationMode=c}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){var e={title:"h2 .title",heading:".content-container h3",subheading:".content-container h4",subtitle:"h2 .subtitle",paragraph:".content-container p, .content-container li",button:"a.link-button",caption:".caption, .grid-caption",quote:"blockquote, .pull-quote-view .content-container"},n={title:3.9,subtitle:1.1,heading:2.5,subheading:1.45,paragraph:1,button:.9,caption:.8,quote:1.25};return{aspectRatio:4/3,scaleFactor:1,itemSizeFactors:{title:1,subtitle:1,heading:1,subheading:1,paragraph:1,button:1,caption:1,quote:1},init:function(t){},update:function(i){var o=i.data("animator"),r=o.height(),a=o.width(),s=a;a/r>this.aspectRatio&&(s=r*this.aspectRatio);var l=Math.max(8,.02*this.scaleFactor*s),c={};for(var u in this.itemSizeFactors)c[u]=1*n[u]*this.itemSizeFactors[u]*l;var h="";for(var u in c){var d=e[u];h+=(d="html body.presentation-mode .article .section "+d.split(",").join(", html body.presentation-mode .article .section "))+" { font-size: "+c[u]+"px; }\n"}h+="html { font-size: "+.8*l+"px !important; }",function(){var e=t("#pres-content-sizing");if(e.length)return e;return t("<style>").attr("id","pres-content-sizing").appendTo(document.body)}().text(h)}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){return{leftPercent:.15,topPercent:.05,imageLeftPercent:0,aspectRatio:16/9,init:function(e){var n=function(){var t=Luca.publicationViewer.getActiveArticle(),e=/(?:[^\s]+\s+)*([^\s]+)-theme(?:\s+[^\s]+)*/.exec(t.className);return e&&e[1]||"crisp"}();function i(){return t("<div>").addClass("section spacer-section content-spacer ").attr({"data-section-behavior":n+"-spacer","data-layer-name":"over"})}t(".window-section").each(function(e,n){var o=t(n);o.prev().is(".spacer-section")||o.before(i()),o.next().is(".spacer-section")||o.after(i())}),t(".spacer-section").each(function(e,n){var i=t(n);(i.prev().is(".window-section")||i.next().is(".window-section"))&&i.css({height:"25%"})});var o=e.find(".large-content-spacing-bottom, .large-content-spacing-top");o.length&&o.removeClass("large-content-spacing-bottom large-content-spacing-top"),t(".title-header-view").css("max-width","100%")},update:function(e){var n=e.data("animator"),i=n.height(),o=n.width(),r=o*this.leftPercent,a=i*this.topPercent,s=i-2*a;(o-2*r)/s>this.aspectRatio&&(r=(o-s*this.aspectRatio)/2);var l=e.find(".single-column-section, .photo-grid-section");l.each(function(e,n){var i=t(n),o=a,s=r;if(i.is(".split-layout")){s*=.5}i.find(".content-container").css("padding",o+"px "+s+"px")}.bind(this));var c=Math.round(100*this.imageLeftPercent)+"%";t(".single-column-section .image .image-wrapper").css({padding:"0 "+c}),t(".section .pull-quote").css({marginLeft:r,marginRight:r});var u=t(".card-flipbook-section .section-content-view");u.find(".content-container").css({marginLeft:r,marginRight:r,padding:"3.5rem 2rem"}),u.filter(".card-right").find(".content-container").css({marginLeft:"auto"}),u.filter(".card-center").find(".content-container").css({marginRight:"auto",marginLeft:"auto"}),Luca.publicationViewer.adjustVisuals(),l.each(function(e,n){var o,s=t(n),l=s.find(".content-container"),c=s.data("sectionHeight");c<i&&(o=a+(i-c)/2,l.css("padding",Math.round(o)+"px "+Math.round(r)+"px"))})}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){return{update:function(e){var n=e.data("animator"),i=n.width(),o=n.height();t(".full-width-section .image").css("height",o).each(function(e,n){var r=t(n),a=r.find(".image-wrapper"),s=r.find("img"),l=r.find(".caption"),c=s.get(0),u=i,h=o-l.outerHeight(!0),d=c.naturalWidth||s.data("image-width"),f=c.naturalHeight||s.data("image-height"),p={},g={paddingTop:0},m=Math.min(u/d,h/f);p.width=Math.round(d*m),p.height=Math.round(f*m),p.height!==h&&(g.paddingTop=Math.round((h-p.height)/2)),a.css(g),s.css(p)}),t(".single-column-section .image").each(function(e,n){var i=t(n),r=i.find("img"),a=r.get(0),s=i.find(".caption"),l=o-s.outerHeight(!0),c=a.naturalWidth||r.data("image-width"),u=100*Math.min(1,c/900)+"%";r.css({maxHeight:l,maxWidth:u})})}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2)],void 0===(o=function(t,e,n){var i={_initialize:function(){this._restartAnimation=t.proxy(this._restartAnimation,this),t(document.body).bind("luca-publication-viewer-ready",this._restartAnimation)},_simulateSwipe:function(e,n){var i=t(".article"),o=i.data("animator"),r=e*i[0].offsetHeight,a=1e3*n,s=Date.now(),l=t.easing.easeInQuad,c=0,u=r/n/60,h=this,d=.5*r,f=r,p=1.5*a,g=a;function m(){var t=o.scrollTop()+u,e=o.getDuration();o.scrollTo(0,t<e?t:e),u*=.95,t<e?u>2?window.requestAnimationFrame(m):setTimeout(function(){v()},500):setTimeout(function(){o.scrollTo(0,0),h._restartAnimation()},2e3)}function v(){s=Date.now(),c=0,u=r/n/60,r=Math.round(d+(f-d)*Math.random()),a=Math.round(d+(g-p)*Math.random()),_()}function _(){var t=Date.now()-s,e=t>=a?r:l(t/a,t,0,r,a);t<a?(o.scrollTo(0,o.playPosition+(e-c)),window.requestAnimationFrame(_)):m(),c=e}v()},_restartAnimation:function(t){var e=this;setTimeout(function(){e._simulateSwipe(.6,.1)},2e3)}};"usersim"===n.getPageMode()&&i._initialize(),n.UserSimulationMode=i}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(45),n(40)],void 0===(o=function(t,e,n,i,o){return n.PrintMode=t.extend({},i,{initialize:function(){t("body").addClass("print-mode"),i.initialize.call(this)},_triggerReadyNotification:function(){t(document.body).trigger("print-mode-ready")},_getPlaceholderURL:function(t){var n=i._getPlaceholderURL.apply(this,arguments),o=parseInt(e.Utils.parseQueryParams(n).size||"0",10);return e.Utils.setQueryParam(n,"size",Math.max(o,2560))},_transformMarkup:function(){var t=this;return t._fixupEmbeddedLinks().then(function(){return t._rememberSpecialSingleColumnSectionVariants(),i._transformMarkup.call(t)}).then(function(){t._printMediaQueryList||(t._printMediaQueryList=window.matchMedia("print"),t._printMediaQueryList.addListener(function(e){t._refitGlideshowCardsAndImages(e),t._autoSizeTitleText(),t._adjustHeightOfFinalSection(e)})),t._fixupInlineImagesForShrinkFitting(),t._autoSizeTitleText(),t._refitGlideshowCardsAndImages(t._printMediaQueryList)})},_adjustGlideshowPairing:function(e,n,i){var o=t('<div class="print-image"></div>').append(n),r=e.css("backgroundPosition");i.closest(".section-content-view").addClass("card-serial-layout"),r&&o.css("backgroundPosition",r),i.children().wrapAll('<div class="card-container"></div>').wrapAll('<div class="card-container-inner"></div>').wrapAll('<div class="card-container-innermost"></div>'),i.prepend(o)},_refitGlideshowCardsAndImages:function(e){var n=t(".card-flipbook-section"),i=n.find(".section-content-view");n.find(".section-content-view .content-container").find(".card-container-innermost").css("transform","none"),i.removeClass("card-overlay-layout"),i.addClass("card-serial-layout"),this._refitImages()},_refitImages:function(){t(".card-flipbook-section, .single-column-section").find(".image").each(function(){var e=t(this);if($outerWrapper=e.find(".image-outer-wrapper"),$outerWrapper.length){var n=e.find("img");n.css("maxHeight","100vh");var i=e.height(),o=$outerWrapper.height();if(o>i){var r=n.height()-(o-i);r=Math.max(r,200),n.css("maxHeight",r+"px")}}})},_fixupInlineImagesForShrinkFitting:function(){t(".card-flipbook-section, .single-column-section").find(".image").each(function(){var e=t(this);e.find("image-outer-wrapper").length<=0&&e.children().wrapAll('<div class="image-outer-wrapper"></div>')})},_fixupEmbeddedLinks:function(){var e=t(".article .embedded-link-wrapper"),n=/youtube\.com/,i=/spark\.adobe\.com\/video\//,o=/vimeo\.com\//,r=0,a=t.Deferred();function s(){--r<=0&&a.resolve()}function l(e,n,i,o){var r=t("<div class=image-placeholder-link></div>"),a=t('<a target="_blank"></a>'),s=t('<a target="_blank"></a>');r.data("href",i),a.attr("href",o),a.text(o),s.attr("href",o),n.remove(),s.append(r),e.append(s),e.parent().append(a)}return e.each(function(){var e=t(this),a=e.find("iframe"),c=a.attr("src"),u=a.attr("data-href")||c;if(n.test(c)){if(d=/embed\/([^\?\/]+)/.exec(c)){var h="https://img.youtube.com/vi/"+d[1]+"/maxresdefault.jpg";l(e,a,h,u)}}else if(o.test(c)){(d=/video\/([^\?\/]+)/.exec(c))&&(r++,t.ajax({method:"GET",url:"https://vimeo.com/api/v2/video/"+d[1]+".xml",success:function(n){var i=t(n).find("thumbnail_large").text();l(e,a,i,u),s()},error:function(t){console.error("Something went wrong while trying to fetch vimeo metadata"+t),s()}}))}else if(i.test(c)){var d;if(d=/video\/([^\?\\\/]+)/.exec(c)){var f="https://cc-api-cp.adobe.io/api/v2/voice/assets/"+d[1]+"?api_key=MarvelWeb1";r++,t.ajax({method:"GET",url:f,headers:{"X-ApiKey":"MarvelWeb1"},success:function(t){var n=a.attr("data-href")||c,i=t._links.rendition.href;i=i.replace(/\{format\}/,"jpg").replace(/\{dimension\}/,"width").replace(/\{size\}/,"2560"),l(e,a,i,n),s()},error:function(t){console.error("Something went wrong while trying to fetch spark video metadata"+t),s()}})}}}),0===r&&a.resolve(),a.promise()},_autoSizeTitleText:function(){$title=t(".article .section.title-section .title"),o($title),$subtitle=t(".article .section.title-section .subtitle"),o($subtitle)},_adjustHeightOfFinalSection:function(e){function n(t){if(!t||"transparent"===t)return!0;return!!/rgb[a]*\(255,\s*255,\s*255/.test(t)||!!/white/.test(t)}var i=function(){for(var e,n=t(".section"),i=n.length-1;i>=0;i--)if(n.eq(i).height()){e=n.eq(i);break}if(!e||!e.hasClass("title-section"))return e}();if(i)if(e.matches){var o=t(".article").css("backgroundColor"),r=i.css("backgroundColor");if(!n(o)||!n(r)){var a=t(window).height();i.css("min-height","");var s=i.height(),l=a-(i.offset().top+s)%a+s;i.css("min-height",l+"px")}}else i.css("min-height","")},_rememberSpecialSingleColumnSectionVariants:function(){t(".section").filter(".split-layout").addClass("split-layout-print")}}),n.PrintMode}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2),n(5)],void 0===(o=function(t,e,n){if(e.registerSectionsArticleHandler("brand-header",t.extend({},e.GenericSectionArticleHandler,{transformMarkup:function(e){var n=t(e),i=n.closest(".article").height(),o=n.height(),r=n.siblings(".title-section");r.height(i-o),r.data("layer",0)}})),e.FloatingBrandHeader=function(e,n){this.options=t.extend({},this.defaultOptions,n),this.$element=t(e),this.$article=this.$element.closest(".article"),this.lastScrollPosition=0,this.showReason="";var i=this,o=this.$article.data("animator");setTimeout(function(){i.hide()},this.options.initialShowTime),t(document).on("vmousemove",t.proxy(this._handleMouseMove,this)),o.$element.on("article-scroll",t.proxy(this._handleArticleScroll,this))},t.extend(e.FloatingBrandHeader.prototype,{defaultOptions:{initialShowTime:3e3,backtrackDistance:100,showClassName:"show",aboveTheFoldClassName:"above-the-fold"},show:function(t){this.showReason=t,this.$element.addClass(this.options.showClassName)},hide:function(){this.showReason="",this.$element.removeClass(this.options.showClassName)},_handleMouseMove:function(t){t.pageY<=this.$element.height()?this.show("mousemove"):"mousemove"==this.showReason&&this.hide()},_handleArticleScroll:function(t){var e=this.$article.height(),n=this.$article.data("animator");if(n){var i=n.scrollTop(),o=i-this.lastScrollPosition;i<e?this.$element.addClass(this.options.aboveTheFoldClassName):this.$element.removeClass(this.options.aboveTheFoldClassName),o<0?(landmarkScrollPosition<0&&(landmarkScrollPosition=i),landmarkScrollPosition-i>this.options.backtrackDistance&&this.show()):o>0&&(landmarkScrollPosition=-1,this.hide()),this.lastScrollPosition=i}}}),!(window.navigator.userAgent.search(/mobile/i)>=0)){var i=t(document.body);i.on("luca-publication-viewer-initialized",function(){t(".article").each(function(){var n=t(this),o=n.find(".brand-header-section");if(o.length){var r=o.find(".brand-header");o.remove(),r.addClass("floater show above-the-fold").appendTo(n),i.on("luca-publication-viewer-ready",function(){var t=new e.FloatingBrandHeader(r);r.data("brandHeader",t)})}})})}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(2),n(5),n(21)],void 0===(o=function(t,e,n,i){var o={none:{addAnimations:function(t,e,n,i,o){}},fadeOut:{addAnimations:function(t,e,n,i,o){t.opacity(e[0],n,i,{fromOpacity:"1",toOpacity:"0"}),o||e.css("opacity","1")},restore:function(t){t.css("opacity","")}},fadeIn:{addAnimations:function(t,e,n,i,o){t.opacity(e[0],n,i,{fromOpacity:"0",toOpacity:"1"}),o||e.css("opacity","0")},restore:function(t){t.css("opacity","")}},fadeOutZoomIn:{addAnimations:function(t,e,n,i,o){t.opacity(e[0],n,i,{fromOpacity:"1",toOpacity:"0"}),t.scale(e[0],n,i,"1","3",{easing:"easeInOutQuad"}),o||(e.css("opacity","1"),e.setCompositeTransformProp("scale","1",{sync:!0}))},restore:function(t){t.css("opacity",""),t.clearCompositeTransformProps({sync:!0})}},scaleUp:{addAnimations:function(t,e,n,i,o){t.scale(e[0],n,i,".5","1",{easing:"easeInOutQuad"}),o||e.setCompositeTransformProp("scale",".5",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},verticalExpand:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-view"),a=e.find(".slide-clip-outer"),s=e.find(".slide-clip-inner");t.translateY(r,n,i,"50%","0%",{easing:"easeInQuad"}),t.translateY(a,n,i,"50%","0%",{easing:"easeInQuad"}),t.translateY(s,n,i,"-100%","0%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateY","50%",{sync:!0}),a.setCompositeTransformProp("translateY","50%",{sync:!0}),s.setCompositeTransformProp("translateY","-100%",{sync:!0}))},restore:function(t){var e=t.find(".slide-view"),n=t.find(".slide-clip-outer"),i=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0}),i.clearCompositeTransformProps({sync:!0})}},verticalContract:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-view"),a=e.find(".slide-clip-outer"),s=e.find(".slide-clip-inner");t.translateY(r,n,i,"0%","50%",{easing:"easeInQuad"}),t.translateY(a,n,i,"0%","50%",{easing:"easeInQuad"}),t.translateY(s,n,i,"0%","-100%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateY","0%",{sync:!0}),a.setCompositeTransformProp("translateY","0%",{sync:!0}),s.setCompositeTransformProp("translateY","0%",{sync:!0}))},restore:function(t){var e=t.find(".slide-view"),n=t.find(".slide-clip-outer"),i=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0}),i.clearCompositeTransformProps({sync:!0})}},horizontalExpand:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-view"),a=e.find(".slide-clip-outer"),s=e.find(".slide-clip-inner");t.translateX(r,n,i,"50%","0%",{easing:"easeInQuad"}),t.translateX(a,n,i,"50%","0%",{easing:"easeInQuad"}),t.translateX(s,n,i,"-100%","0%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateX","50%",{sync:!0}),a.setCompositeTransformProp("translateX","50%",{sync:!0}),s.setCompositeTransformProp("translateX","-100%",{sync:!0}))},restore:function(t){var e=t.find(".slide-view"),n=t.find(".slide-clip-outer"),i=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0}),i.clearCompositeTransformProps({sync:!0})}},horizontalContract:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-view"),a=e.find(".slide-clip-outer"),s=e.find(".slide-clip-inner");t.translateX(r,n,i,"0%","50%",{easing:"easeInQuad"}),t.translateX(a,n,i,"0%","50%",{easing:"easeInQuad"}),t.translateX(s,n,i,"0%","-100%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateX","0%",{sync:!0}),a.setCompositeTransformProp("translateX","0%",{sync:!0}),s.setCompositeTransformProp("translateX","0%",{sync:!0}))},restore:function(t){var e=t.find(".slide-view"),n=t.find(".slide-clip-outer"),i=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0}),i.clearCompositeTransformProps({sync:!0})}},rectExpand:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-view"),a=e.find(".slide-clip-outer"),s=e.find(".slide-clip-inner");t.translateX(r,n,i,"50%","0%",{easing:"easeInQuad"}),t.translateY(r,n,i,"50%","0%",{easing:"easeInQuad"}),t.translateX(a,n,i,"50%","0%",{easing:"easeInQuad"}),t.translateY(a,n,i,"50%","0%",{easing:"easeInQuad"}),t.translateX(s,n,i,"-100%","0%",{easing:"easeInQuad"}),t.translateY(s,n,i,"-100%","0%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateX","50%"),r.setCompositeTransformProp("translateY","50%",{sync:!0}),a.setCompositeTransformProp("translateX","50%"),a.setCompositeTransformProp("translateY","50%",{sync:!0}),s.setCompositeTransformProp("translateX","-100%"),s.setCompositeTransformProp("translateX","-100%",{sync:!0}))},restore:function(t){var e=t.find(".slide-view"),n=t.find(".slide-clip-outer"),i=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0}),i.clearCompositeTransformProps({sync:!0})}},rectContract:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-view"),a=e.find(".slide-clip-outer"),s=e.find(".slide-clip-inner");t.translateX(r,n,i,"0%","50%",{easing:"easeInQuad"}),t.translateY(r,n,i,"0%","50%",{easing:"easeInQuad"}),t.translateX(a,n,i,"0%","50%",{easing:"easeInQuad"}),t.translateY(a,n,i,"0%","50%",{easing:"easeInQuad"}),t.translateX(s,n,i,"0%","-100%",{easing:"easeInQuad"}),t.translateY(s,n,i,"0%","-100%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateX","0%"),r.setCompositeTransformProp("translateY","0%",{sync:!0}),a.setCompositeTransformProp("translateX","0%"),a.setCompositeTransformProp("translateY","0%",{sync:!0}),s.setCompositeTransformProp("translateX","0%"),s.setCompositeTransformProp("translateX","0%",{sync:!0}))},restore:function(t){var e=t.find(".slide-view"),n=t.find(".slide-clip-outer"),i=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0}),i.clearCompositeTransformProps({sync:!0})}},wipeLeftShow:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-clip-outer"),a=e.find(".slide-clip-inner");t.translateX(r,n,i,"100%","0%",{easing:"easeInQuad"}),t.translateX(a,n,i,"-100%","0%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateX","100%",{sync:!0}),a.setCompositeTransformProp("translateX","-100%",{sync:!0}))},restore:function(t){var e=t.find(".slide-clip-outer"),n=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0})}},wipeRightShow:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-clip-outer"),a=e.find(".slide-clip-inner");t.translateX(r,n,i,"-100%","0%",{easing:"easeInQuad"}),t.translateX(a,n,i,"100%","0%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateX","-100%",{sync:!0}),a.setCompositeTransformProp("translateX","100%",{sync:!0}))},restore:function(t){var e=t.find(".slide-clip-outer"),n=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0})}},wipeUpShow:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-clip-outer"),a=e.find(".slide-clip-inner");t.translateY(r,n,i,"100%","0%",{easing:"easeInQuad"}),t.translateY(a,n,i,"-100%","0%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateY","100%",{sync:!0}),a.setCompositeTransformProp("translateY","-100%",{sync:!0}))},restore:function(t){var e=t.find(".slide-clip-outer"),n=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0})}},wipeDownShow:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-clip-outer"),a=e.find(".slide-clip-inner");t.translateY(r,n,i,"-100%","0%",{easing:"easeInQuad"}),t.translateY(a,n,i,"100%","0%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateY","-100%",{sync:!0}),a.setCompositeTransformProp("translateY","100%",{sync:!0}))},restore:function(t){var e=t.find(".slide-clip-outer"),n=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0})}},wipeLeftHide:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-clip-outer"),a=e.find(".slide-clip-inner");t.translateX(r,n,i,"0%","-100%",{easing:"easeInQuad"}),t.translateX(a,n,i,"0%","100%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateX","0%",{sync:!0}),a.setCompositeTransformProp("translateX","0%",{sync:!0}))},restore:function(t){var e=t.find(".slide-clip-outer"),n=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0})}},wipeRightHide:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-clip-outer"),a=e.find(".slide-clip-inner");t.translateX(r,n,i,"0%","100%",{easing:"easeInQuad"}),t.translateX(a,n,i,"0%","-100%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateX","0%",{sync:!0}),a.setCompositeTransformProp("translateX","0%",{sync:!0}))},restore:function(t){var e=t.find(".slide-clip-outer"),n=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0})}},wipeUpHide:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-clip-outer"),a=e.find(".slide-clip-inner");t.translateY(r,n,i,"0%","-100%",{easing:"easeInQuad"}),t.translateY(a,n,i,"0%","100%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateY","0%",{sync:!0}),a.setCompositeTransformProp("translateY","0%",{sync:!0}))},restore:function(t){var e=t.find(".slide-clip-outer"),n=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0})}},wipeDownHide:{addAnimations:function(t,e,n,i,o){var r=e.find(".slide-clip-outer"),a=e.find(".slide-clip-inner");t.translateY(r,n,i,"0%","100%",{easing:"easeInQuad"}),t.translateY(a,n,i,"0%","-100%",{easing:"easeInQuad"}),o||(r.setCompositeTransformProp("translateY","0%",{sync:!0}),a.setCompositeTransformProp("translateY","0%",{sync:!0}))},restore:function(t){var e=t.find(".slide-clip-outer"),n=t.find(".slide-clip-inner");e.clearCompositeTransformProps({sync:!0}),n.clearCompositeTransformProps({sync:!0})}},slideInFromTop:{addAnimations:function(t,e,n,i,o){t.translateY(e,n,i,"-100%","0%",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("translateY","-100%",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},slideInFromBottom:{addAnimations:function(t,e,n,i,o){t.translateY(e,n,i,"100%","0%",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("translateY","100%",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},slideInFromRight:{addAnimations:function(t,e,n,i,o){t.translateX(e,n,i,"100%","0%",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("translateX","100%",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},slideInFromLeft:{addAnimations:function(t,e,n,i,o){t.translateX(e,n,i,"-100%","0%",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("translateX","-100%",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},slideOutTop:{addAnimations:function(t,e,n,i,o){t.translateY(e,n,i,"0%","-100%",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("translateY","0%",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},slideOutBottom:{addAnimations:function(t,e,n,i,o){t.translateY(e,n,i,"0%","100%",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("translateY","0%",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},slideOutRight:{addAnimations:function(t,e,n,i,o){t.translateX(e,n,i,"0%","100%",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("translateX","0%",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},slideOutLeft:{addAnimations:function(t,e,n,i,o){t.translateX(e,n,i,"0%","-100%",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("translateX","0%",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},flipInUp:{addAnimations:function(t,e,n,i,o){t.rotateX(e,n,i,"-90deg","0deg",{easing:"easeOutQuad"}),o||e.setCompositeTransformProp("rotateX","-90deg",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},flipOutUp:{addAnimations:function(t,e,n,i,o){t.rotateX(e,n,i,"0deg","90deg",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("rotateX","0deg",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},flipInDown:{addAnimations:function(t,e,n,i,o){t.rotateX(e,n,i,"90deg","0deg",{easing:"easeOutQuad"}),o||e.setCompositeTransformProp("rotateX","90deg",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},flipOutDown:{addAnimations:function(t,e,n,i,o){t.rotateX(e,n,i,"0deg","-90deg",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("rotateX","0deg",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},flipInLeft:{addAnimations:function(t,e,n,i,o){t.rotateY(e,n,i,"90deg","0deg",{easing:"easeOutQuad"}),o||e.setCompositeTransformProp("rotateY","90deg",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},flipOutLeft:{addAnimations:function(t,e,n,i,o){t.rotateY(e,n,i,"0deg","-90deg",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("rotateY","0deg",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},flipInRight:{addAnimations:function(t,e,n,i,o){t.rotateY(e,n,i,"-90deg","0deg",{easing:"easeOutQuad"}),o||e.setCompositeTransformProp("rotateY","-90deg",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}},flipOutRight:{addAnimations:function(t,e,n,i,o){t.rotateY(e,n,i,"0deg","90deg",{easing:"easeInQuad"}),o||e.setCompositeTransformProp("rotateY","0deg",{sync:!0})},restore:function(t){t.clearCompositeTransformProps({sync:!0})}}},r={none:{transitionOut:"none",transitionIn:"none",transitionInLayer:0},"cross-fade":{transitionOut:"fadeOut",transitionIn:"fadeIn",transitionInLayer:1},"fade-in":{transitionOut:"none",transitionIn:"fadeIn",transitionInLayer:1},"fade-out":{transitionOut:"fadeOut",transitionIn:"none",transitionInLayer:-1},"fade-zoom-in":{transitionOut:"fadeOutZoomIn",transitionIn:"scaleUp",transitionInLayer:-1},"vertical-expand":{transitionOut:"none",transitionIn:"verticalExpand",transitionInLayer:1},"horizontal-expand":{transitionOut:"none",transitionIn:"horizontalExpand",transitionInLayer:1},"vertical-contract":{transitionOut:"verticalContract",transitionIn:"none",transitionInLayer:-1},"horizontal-contract":{transitionOut:"horizontalContract",transitionIn:"none",transitionInLayer:-1},"rect-expand":{transitionOut:"none",transitionIn:"rectExpand",transitionInLayer:1},"rect-contract":{transitionOut:"rectContract",transitionIn:"none",transitionInLayer:-1},"slide-up":{transitionOut:"slideOutTop",transitionIn:"slideInFromBottom",transitionInLayer:0},"slide-down":{transitionOut:"slideOutBottom",transitionIn:"slideInFromTop",transitionInLayer:0},"slide-right":{transitionOut:"slideOutRight",transitionIn:"slideInFromLeft",transitionInLayer:0},"slide-left":{transitionOut:"slideOutLeft",transitionIn:"slideInFromRight",transitionInLayer:0},"wipe-left":{transitionOut:"none",transitionIn:"wipeLeftShow",transitionInLayer:1},"wipe-right":{transitionOut:"none",transitionIn:"wipeRightShow",transitionInLayer:1},"wipe-up":{transitionOut:"none",transitionIn:"wipeUpShow",transitionInLayer:1},"wipe-down":{transitionOut:"none",transitionIn:"wipeDownShow",transitionInLayer:1},"wipe-left-reveal":{transitionOut:"wipeLeftHide",transitionIn:"none",transitionInLayer:-1},"wipe-right-reveal":{transitionOut:"wipeRightHide",transitionIn:"none",transitionInLayer:-1},"wipe-up-reveal":{transitionOut:"wipeUpHide",transitionIn:"none",transitionInLayer:-1},"wipe-down-reveal":{transitionOut:"wipeDownHide",transitionIn:"none",transitionInLayer:-1},"slide-up-over":{transitionOut:"none",transitionIn:"slideInFromBottom",transitionInLayer:1},"slide-down-over":{transitionOut:"none",transitionIn:"slideInFromTop",transitionInLayer:1},"slide-right-over":{transitionOut:"none",transitionIn:"slideInFromLeft",transitionInLayer:1},"slide-left-over":{transitionOut:"none",transitionIn:"slideInFromRight",transitionInLayer:1},"slide-up-reveal":{transitionOut:"slideOutTop",transitionIn:"none",transitionInLayer:-1},"slide-down-reveal":{transitionOut:"slideOutBottom",transitionIn:"none",transitionInLayer:-1},"slide-right-reveal":{transitionOut:"slideOutRight",transitionIn:"nonelideInFromLeft",transitionInLayer:-1},"slide-left-reveal":{transitionOut:"slideOutLeft",transitionIn:"none",transitionInLayer:-1},"flip-up":{transitionOut:"flipOutUp",transitionIn:"flipInUp",transitionInLayer:1,transitionAlignment:1,transitionOutDurationScale:.5,transitionInDurationScale:.5},"flip-down":{transitionOut:"flipOutDown",transitionIn:"flipInDown",transitionInLayer:1,transitionAlignment:1,transitionOutDurationScale:.5,transitionInDurationScale:.5},"flip-right":{transitionOut:"flipOutRight",transitionIn:"flipInRight",transitionInLayer:1,transitionAlignment:1,transitionOutDurationScale:.5,transitionInDurationScale:.5},"flip-left":{transitionOut:"flipOutLeft",transitionIn:"flipInLeft",transitionInLayer:1,transitionAlignment:1,transitionOutDurationScale:.5,transitionInDurationScale:.5}},a={"bkg-zoom-pt-st":{addContentAnimations:function(t,n,i){var o=i.presoData.viewportHeight,r=(n.find(".text-group"),n.find(".slide-text")),a=[];if(r.length){var s=r.find(".slide-text-primary"),l=r.find(".slide-text-secondary"),c=null;s.length>0?(c=this._getTextWrapper(s),s.css("overflow","hidden")):(c=this._getTextWrapper(r),r.css("overflow","hidden")),t.translateY(c,0,o,"100%","0%",{easing:"easeInOutQuad"}),t.scale(c,0,o+Math.round(.25*o),".8","1",{easing:"easeInOutQuad"}),t.blur(c,0,o,{fromBlur:"50px",toBlur:"0px",easing:"easeInOutQuad"}),c.setCompositeTransformProp("translateY","100%"),c.setCompositeTransformProp("scale",".8",{sync:!0}),c.css(e.vendorPrefix+"transform-origin","0% 100%"),l.length>0&&(c=this._getTextWrapper(l),t.translateY(c,0,Math.round(.9*o),"-100%","0%",{easing:"easeInQuad"}),t.blur(c,0,o,{fromBlur:"50px",toBlur:"0px",easing:"easeInOutQuad"}),c.setCompositeTransformProp("translateY","-100%",{sync:!0}),l.css("overflow","hidden")),a.push(0+o)}return a},addContinuousAnimations:function(t,e,n,i){var o=e.find(".slide-background-image");t.scale(o,0,n,"1","1.1",{easing:"linear"}),o.setCompositeTransformProp("scale","1",{sync:!0})},_getTextWrapper:function(t){var e=t.find(".slide-text-wrapper");return 0===e.length&&(t.wrapInner('<span class="slide-text-wrapper"></span>'),e=t.find(".slide-text-wrapper")),e}},"rearrange-characters":{addContentAnimations:function(e,n,i){for(var o=n.find(".text-group"),r=o.find(".text-group-background-image"),a=o.find(".text-container"),s=null,c=null,u=0,h=null,d=0,f=i.presoData.transitionDuration,p=0,g=Math.round(.2*f),m=Math.round(f/2),v=[],_=0;_<a.length;_++){var y=t(r[_]),b=t(a[_]),w=b.find("p"),S=l.wrapNonSpaceChars(w),x=null;if(o.data("charData",S),h){var C=l.getCharSpanGroupings(h,S),T=C.diff.a,I=C.hasADiff;C.diff.b,C.hasBDiff;if(I){for(x in T){E=T[x];for(var k=0;k<E.length;k++)M=E[k],e.opacity(M,p,m,{fromOpacity:"1",toOpacity:"0"})}p+=m}var A=C.common.a,P=C.common.b;if(d=p,C.hasCommon){for(x in A)for(var E=A[x],$=P[x],D=0;D<E.length;D++){var M=E[D],O=M.offsetLeft,B=M.offsetTop,N=$[D],H=N.offsetLeft,R=N.offsetTop;e.translateX(M,p,m,"0px",H-O+"px",{easing:"easeOutQuad"}),e.translateY(M,p,m,"0px",R-B+"px",{easing:"easeOutQuad"})}p+=m}b.addClass("hidden"),e.scale(c,u,p+m-u,"1","1.1",{easing:"linear"}),e.addClass(s,p+m,"hidden"),e.opacity(s,p,m,{fromOpacity:"1",toOpacity:"0"});var L=p-d+m;e.opacity(c,d,L,{fromOpacity:".8",toOpacity:"0"}),e.addClass(c,d+L,"hidden"),e.removeClass(y,d,"hidden"),e.opacity(y,d,L,{fromOpacity:"0",toOpacity:".8"}),y.addClass("hidden"),y.css("opacity","0"),e.removeClass(b,p,"hidden"),e.opacity(b,p,m,{fromOpacity:"0",toOpacity:"1"}),b.css("opacity","0"),p+=m}else b.removeClass("hidden"),b.css("opacity","1");0!=_&&v.push(p),p+=g,c=y,u=d,s=b,h=S}return v},addContinuousAnimations:function(t,e,n,i){}}};function s(e,n,o){o=t.extend({},this.defaultOptions,o),this._$element=t(e),this._type=this._$element.data("type")||"",this._presoData=n.presoData,this._animationDuration=0,this._transitionInPairing=n.transitionInPairing,this._transitionOutPairing=n.transitionOutPairing,this._transitionData=null,this._options=t.extend({},this.defaultOptions,o),this._cuePointOffsets=[],this._timeline=new i,this._contentTimeline=new i,this._transitionInTimeline=new i,this._transitionOutTimeline=new i,this._getAnimationAttributes(),this._$element.data("slide",this)}t.extend(s.prototype,{defaultOptions:{presoData:null,animationStartAlignmentAttr:"animationStartAlignment",animationEndAlignmentAttr:"animationEndAlignment",transitionAlignmentAttr:"transitionAlignment",transitionInAttr:"transitionIn",transitionOutAttr:"transitionOut",layerAttr:"layer"},_getAnimationAttributes:function(){this._slideBehaviorName=this._$element.data("behavior")||"none",this.getTransitionsData()},_getDataNumberValue:function(t,e,n){var i=t.data(e);return"number"!=typeof i?n:i},_clipValue:function(t,e,n){return t<e?e:t>n?n:t},getTimeline:function(){return this._timeline},getAnimationDuration:function(){return this._animationDuration||this._timeline.getDuration()},_valueOrDefault:function(t,e){return void 0===t?e:t},getTransitionsData:function(){if(this._transitionData)return this._transitionData;var t=this._$element,e=this._options,n=r[this._transitionInPairing]||r.none,i=r[this._transitionOutPairing]||r.none,o=this._presoData.transitionDuration,a=this._valueOrDefault(n.transitionInDurationScale,1),s=this._valueOrDefault(i&&i.transitionOutDurationScale,1),l=Math.round(o*a),c=Math.round(o*s),u={transitionOut:i&&i.transitionOut||"",transitionOutOffset:l,transitionOutDuration:c,transitionOutDurationScale:s,transitionIn:n.transitionIn,transitionInOffset:0,transitionInDuration:l,transitionInDurationScale:a,transitionInLayer:this._valueOrDefault(n.transitionInLayer,0),transitionAlignment:this._valueOrDefault(n.transitionAlignment,0),animationStartAlignment:this._valueOrDefault(n.animationStartAlignment,0),animationEndAlignment:this._valueOrDefault(n.animationEndAlignment,1)};return u.animationStartAlignment=this._clipValue(this._getDataNumberValue(t,e.animationStartAlignmentAttr,u.animationStartAlignment),0,1),u.animationEndAlignment=this._clipValue(this._getDataNumberValue(t,e.animationEndAlignmentAttr,u.animationEndAlignment),0,1),u.transitionAlignment=this._clipValue(this._getDataNumberValue(t,e.transitionAlignmentAttr,u.transitionAlignment),0,1),this._transitionData=u},getRelativeLayerIndex:function(){return this.getTransitionsData().transitionInLayer},_createTransitionInAnimations:function(t){var e=this.getTransitionsData(),n=o[e.transitionIn];return n&&n.addAnimations(this._transitionInTimeline,this._$element,0,t),this._$element.data("_lastTransitionIn",e.transitionIn),this._transitionInTimeline},_createTransitionOutAnimations:function(t){var e=this.getTransitionsData(),n=o[e.transitionOut];return n&&n.addAnimations(this._transitionOutTimeline,this._$element,0,t,!0),this._$element.data("_lastTransitionOut",e.transitionOut),this._transitionOutTimeline},_resetSlideElements:function(){for(var t=this.getTransitionsData(),e=[{last:this._$element.data("_lastTransitionOut")||"",current:t.transitionOut||"",registry:o},{last:this._$element.data("_lastTransitionIn")||"",current:t.transitionIn||"",registry:o},{last:this._$element.data("_lastSlideBehavior")||"",current:this._slideBehaviorName||"",registry:a}],n=0;n<e.length;n++){var i=e[n],r=i.registry[i.current],s=i.registry[i.last];s!=r&&s&&s.restore&&s.restore(this._$element)}},createAnimations:function(){this._resetSlideElements();var t=this.getTransitionsData(),e=t.transitionInDuration,n=t.transitionOutDuration,i=this._createTransitionInAnimations(e),o=this._createTransitionOutAnimations(n),r=this._contentTimeline,s=a[this._slideBehaviorName],l=null;s&&s.addContentAnimations&&(l=s.addContentAnimations(r,this._$element,{presoData:this._presoData})),this._$element.data("_lastSlideBehavior",this._slideBehaviorName);var c=Math.round(e*t.animationStartAlignment);if(l&&0!==l.length)for(var u=0;u<l.length;u++)l[u]+=c;else l=[e];this._cuePointOffsets=l;var h=r.getDuration();this._timeline.add(i,0),h>0&&this._timeline.add(r,c);var d=Math.max(e,c+h-n*t.animationEndAlignment);this._timeline.add(o,d),t.transitionInOffset=0,t.transitionOutOffset=d,this._animationDuration=d+n,s&&s.addContinuousAnimations&&s.addContinuousAnimations(this._timeline,this._$element,this._animationDuration,this._presoData)},clearCuePointOffsets:function(){this._cuePointOffsets.length=0},getCuePointOffsets:function(t){var e=this._cuePointOffsets,n=[];t=t||0;for(var i=0;i<e.length;i++)n[i]=e[i]+t;return n}});var l={cleanUpSpaces:function(t){return(t||"").replace(/\s+/g," ").replace(/^\s|\s$/g,"")},wrapNonSpaceChars:function(t){var e=t[0],n=l.cleanUpSpaces(t.text()),i=n.replace(/\s/g,""),o=[],r={};t.data("allChars",n),t.data("nonSpaceChars",i),t.empty();for(var a=null,s=0;s<n.length;s++){var c=n[s],u=document.createTextNode(c);if(" "!=c){a||((a=document.createElement("span")).className="word-wrapper",e.appendChild(a));var h=document.createElement("span");h.className="char-wrapper",h.appendChild(u),u=h;var d=r[c];d||(d=r[c]=[]),d.push(u),o.push(u),a.appendChild(u)}else a=null,e.appendChild(u)}return{allChars:n,nonSpaceChars:i,spans:o,charSpanDict:r}},getCharSpanGroupings:function(t,e){var n={a:{},b:{}},i={a:{},b:{}},o=!1,r=!1,a=!1;for(var s in t=t.charSpanDict,e=e.charSpanDict,t){var l=t[s],c=e[s],u=Math.min(l?l.length:0,c?c.length:0);u>0&&(n.a[s]=l.slice(0,u),n.b[s]=c.slice(0,u),o=!0),l&&u<l.length&&(i.a[s]=l.slice(u),r=!0),c&&u<c.length&&(i.b[s]=c.slice(u),a=!0)}var h=n.b,d=i.b;for(s in e){c=e[s];h[s]||d[s]||(d[s]=c.slice(0),r=!0)}return{common:n,diff:i,hasCommon:o,hasADiff:r,hasBDiff:a}}};function c(e,n){n=t.extend({},this.defaultOptions,n),this._timeline=n.timeline||new i,this._createSlides(e,n)}function u(e){this._$section=e,this._$article=e.closest(".article"),this._targetOffset=-1,this.register=t.proxy(this.register,this),this.unregister=t.proxy(this.unregister,this),this._keyHandler=t.proxy(this._keyHandler,this),this._scrollComplete=t.proxy(this._scrollComplete,this)}t.extend(c.prototype,{defaultOptions:{timeline:null},_createSlides:function(t,e){for(var n=[],i=t.length,o=t.eq(0),r=0;r<i;r++){var a=r+1<i?t.eq(r+1):null;n.push(new s(t[r],{presoData:e,transitionInPairing:o.data("transition")||"none",transitionOutPairing:a&&a.data("transition")||"none"})),o=a}this._slides=n},addAnimations:function(t,e){for(var n=e&&e.timeline||this._timeline,i=this._slides,o=i.length,r=o-1,a=0,s=[],l=0,c=0,u=[],h=0;h<o;h++)s[h]=l+=i[h].getRelativeLayerIndex(),c=Math.min(c,l);for(h=0;h<o;h++){var d=i[h],f=d._$element,p=d.getTransitionsData();d.createAnimations(),f.css("zIndex",s[h]-c),0!=a&&(a-=Math.max(0,prevToDuration-prevToDuration*p.transitionAlignment)),0===h?f.removeClass("hidden"):(f.addClass("hidden"),n.removeClass(f,a,"hidden")),n.add(d.getTimeline(),a),u=u.concat(d.getCuePointOffsets(a)),a+=d.getAnimationDuration(),h!==r&&n.addClass(f,a,"hidden"),prevToDuration=p.transitionOutDuration}this._cuePointOffsets=u}}),t.extend(u.prototype,{register:function(){e.addGlobalKeyHandler(this._keyHandler,1)},unregister:function(){e.removeGlobalKeyHandler(this._keyHandler,1)},_getSectionsAnimator:function(){return this._$article.data("animator")},_getSectionsScroller:function(){if(!this._scroller){var e=this._$article,n=e.data("sectionsScroller");n||(n=new WebPro.Widget.SectionsArticleScroller(e,{scrollDuration:800}),e.data("sectionsScroller",n)),t(n).on("scroll-complete",this._scrollComplete),this._scroller=n}return this._scroller},_scrollComplete:function(t,e){this._targetOffset=-1},_keyHandler:function(t){if(!e.isKeyHandlingException(t.target)){var n=e.keyCodes;switch(t.keyCode){case n.PAGE_UP:case n.ARROW_LEFT:return this._handlePrevious(),t.preventDefault(),!0;case n.PAGE_DOWN:case n.ARROW_RIGHT:case n.SPACE:return this._handleNext(),t.preventDefault(),!0}}},_handlePrevious:function(){var t=this._getSectionsScroller(),e=this._$section.data("scrollInOffset"),n=this._getSectionsAnimator().playPosition-e,i=this._$section.data("presoAnimator")._cuePointOffsets;this._targetOffset>=0&&(n=Math.min(n,this._targetOffset));var o=this._findBeforeAndAfterOffsets(i,n),r=o.before>=0?o.before:o.after>=0?o.after:0;this._targetOffset=r,t.scrollTo(r+e)},_handleNext:function(){var t=this._getSectionsScroller(),e=this._$section.data("scrollInOffset"),n=this._getSectionsAnimator().playPosition-e,i=this._$section.data("presoAnimator")._cuePointOffsets;this._targetOffset>=0&&(n=Math.max(n,this._targetOffset));var o=this._findBeforeAndAfterOffsets(i,n),r=o.after>=0?o.after:o.before>=0?o.before:0;this._targetOffset=r,t.scrollTo(r+e)},_findBeforeAndAfterOffsets:function(t,e){for(var n=-1,i=-1,o=t.length-1,r=0,a=o;r<a;){var s=r+a>>1,l=t[s],c=e-l;if(c<0){if(n=t[r],i=l,a==s)break;a=s}else{if(!(c>0)){n=t[0===s?s:s-1],i=t[s===o?s:s+1];break}if(n=l,i=t[a],r===s)break;r=s}}return{before:n,after:i}}});var h=e.getSectionsArticleHandler("default");e.registerSectionsArticleHandler("preso",t.extend({},h,{_initialize:function(e,n){n=n||{};var i=t(e),o=i.data("timeline"),r=n.props,a={$section:i,sectionOptions:n,transitionDuration:r.height,transitionOutDelay:.2*r.height,viewportWidth:i[0].offsetWidth,viewportHeight:r.height},s=new c(i.find(".slide"),a);i.data("presoAnimator",s),s.addAnimations(a,{timeline:o})},addAnimations:function(e,n,i){h.addAnimations.apply(this,arguments);var o=t(e),r=o.data("timeline");if(r){var a=o.data("presoKeyHandler");a?a.unregister():(a=new u(o),o.data("presoKeyHandler",a));var s=r.getDuration();s&&(0===i?a.register():n.binaryCallbackTrigger(a.register,a.unregister,i-1,1,this),n.binaryCallbackTrigger(a.unregister,a.register,i+s,1,this))}}})),e.PresoAnimator=c,e.PresoAnimator.registerTransitionAnimation=function(t,e){t&&(o[t]=e)},e.PresoAnimator.getTransitionAnimation=function(t){return o[t||""]},e.PresoAnimator.registerTransitionPairing=function(t,e){t&&(r[t]=e)},e.PresoAnimator.getTransitionPairing=function(t){return r[t||""]},e.PresoAnimator.registerSlideBehavior=function(t,e){t&&(a[t]=e)},e.PresoAnimator.getSlideBehavior=function(t){return a[t||""]},e.PresoAnimator.AnimationUtils=l}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(31)],void 0===(o=function(t,e,n,i){var o={initialize:function(e,n){t.extend(e,{nextPanel:function(){var t=this.swipePanelGroup.activeIndex;t<this.swipePanelGroup.$element.length-1?this.swipePanelGroup.showPanel(t+1):this.swipePanelGroup.showPanel(0)},prevPanel:function(){var t=this.swipePanelGroup.activeIndex;t>0?this.swipePanelGroup.showPanel(t-1):this.swipePanelGroup.showPanel(this.swipePanelGroup.$element.length-1)}})}};n.ImageViewer=function(e){e=t.extend({},e),this._$ele=t('<div class="wp-collection-browser wp-hide"></div>'),this._widget=null,this._globalKeyboardHandler=t.proxy(this._globalKeyboardHandler,this),e.parent&&t(e.parent).append(this._$ele)},t.extend(n.ImageViewer.prototype,{_getSourceArray:function(e){var n=[],i=t(e),o=0,r=0,a="";if(n.currentPhotoIndex=0,i.hasClass("image-viewer-link")){var s=i.find(".image-placeholder-link, img");s.length>0&&(o=s.data("imageWidth")||0,r=s.data("imageHeight")||0,o&&r&&(a+='  data-width="'+o+'" data-height="'+r+'"'),n.push('<div class="photo-container" data-src="'+i[0].href+'"'+a+"></div>"))}else if(i.hasClass("photo-image"))for(var l=i.closest(".section").find(".photo-image"),c=0;c<l.length;c++){var u=l.eq(c),h=u[0].href||u.data("src");a="",o=u.data("imageWidth")||0,r=u.data("imageHeight")||0,o&&r&&(a+='  data-width="'+o+'" data-height="'+r+'"'),n.push('<div class="photo-container" data-src="'+h+'"'+a+"></div>"),u[0]===i[0]&&(n.currentPhotoIndex=c)}return n},_loadPhotoForCurrentPanel:function(i){var o=this._widget;if(!(i=i||t(o.swipePanelGroup.activeElement).find(".photo-container")).hasClass("loading")&&!i.hasClass("loaded")){i.addClass("loading"),i.addClass("full");var r=document.createElement("img");r.onload=function(){i.removeClass("loading"),i.addClass("loaded"),i.append(r),i.css({width:r.width+"px",height:r.height+"px"}),o._fit(),i.bind("vclick",function(t){o.nextPanel(),t.preventDefault(),t.stopPropagation()})},r.onerror=function(){i.hasClass("full")&&(i.removeClass("full"),a=i.data("src"),r.src=a)};var a=i.data("src"),s=window.devicePixelRatio||1,l=t(window).width()*s,c=/[Mm]obi/.test(window.navigator.userAgent);a=!c&&n.ResponsiveImages&&l>1024?n.ResponsiveImages.generateBigImageUrl(i,a):e.Utils.setQueryParam(a,"size",1024),r.src=a}},_globalKeyboardHandler:function(t){if(!n.isKeyHandlingException(t.target)){var e=n.keyCodes;switch(t.keyCode){case e.ESCAPE:this.hide(),t.preventDefault();break;case e.ARROW_LEFT:this._widget.prevPanel(),t.preventDefault();break;case e.ARROW_RIGHT:this._widget.nextPanel(),t.preventDefault()}return!0}},_enableKeyHandler:function(){n.addGlobalKeyHandler(this._globalKeyboardHandler)},_disableKeyHandler:function(){n.removeGlobalKeyHandler(this._globalKeyboardHandler)},_initializeCollectionBrowser:function(e){var n=this;this._$ele.wpCollectionBrowser({sourceArray:e,plugins:o}),this._widget=this._$ele.data("wpCollectionBrowser");var i=this._widget,r=this._$ele;this._widget.on("show",function(){r.trigger("wp-collection-browser-show",this)}),this._widget.on("hide",function(){r.trigger("wp-collection-browser-hide",this)}),this._$ele.find(".wp-collection-browser-close-button").bind("vclick",function(t){return n._disableKeyHandler(),!1}),i.swipePanelGroup.bind("wp-panel-show",function(t,e){n._loadPhotoForCurrentPanel()}),i.swipePanelGroup.bind("wp-panels-dequeued",function(e,n){var i=n.dequeued;i&&i.length>0&&i.each(function(){var e=t(this).find(".photo-container");e.removeClass("loaded loading"),e[0].firstChild&&e[0].removeChild(e[0].firstChild)})}),i.swipePanelGroup.bind("wp-panels-queued",function(e,i){var o=i.queued;o&&o.length>0&&o.each(function(){var e=t(this).find(".photo-container");n._loadPhotoForCurrentPanel(e)})}),this._$ele.find(".wp-swipe-panel-group").bind("vclick",function(t){return n.hide(),!1})},hide:function(){this._disableKeyHandler(),this._widget.hideWidget()},show:function(t){this._$ele.empty();var e=this._getSourceArray(t);this._initializeCollectionBrowser(e),this._widget.showWidget(),this._enableKeyHandler(),0===e.currentPhotoIndex&&this._loadPhotoForCurrentPanel(),this._widget.swipePanelGroup._postShowPanel(e.currentPhotoIndex)}});var r=!0;n.ImageViewer.disable=function(){r=!1};var a=null;t(document.body).on("luca-publication-viewer-initialized",function(){r&&(a=new n.ImageViewer({parent:document.body}),t(document.body).on("vclick",".section .image a.image-viewer-link, .photo-grid .photo-image",function(t){return a.show(t.currentTarget),!1}))})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(4),n(2),n(32)],void 0===(o=function(t,e,n,i){var o=t.Deferred(),r=1;t(document.body).on("static-mode-ready",function(){o.resolve()}),t.when(o).then(function(){var e=t(".article"),n=e.find(".single-column-section");n.find("blockquote").attr("aria-label","Block Quote"),n.find(".section-background-image").attr("role","img").attr("aria-label","Photo"),e.find(".image").each(function(){var e=t(this),n=e.find("img");n.attr("alt")||n.attr("alt","Photo");var i=e.find(".caption");i.length&&(e.attr("aria-label","Image With Caption"),i.attr("aria-label","Caption"))}),e.find(".window-section, .fullscreen-photo-section").each(function(){var e=t(this),n=e.find(".section-background-image"),i=e.find(".pull-quote");n.attr("aria-label","Photo"),i.length&&(e.attr("aria-label","Image With Caption"),i.attr("aria-label","Caption"))});var i=e.find(".photo-grid");i.each(function(){var e=t(this),n=e.find(".photo-group-container"),i=e.find(".grid-caption");if(n.attr("role","img"),n.attr("aria-label","Photo Grid"),i.length){var o=i[0].id;o||(o="caption-"+r++,i.attr("id",o)),e.attr("aria-label","Photo Grid With Caption"),i.attr("aria-label","Caption")}}),i.find(".photo-image").attr("role","img"),e.find(".embedded-link-wrapper iframe").each(function(){var e=t(this);e.attr("title")||e.attr("title","Embedded Video")})})}.apply(e,i))||(t.exports=o)},function(t,e){t.exports={"acumin-pro-semi-condensed":{data:{title:{fontSize:"86px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.32"},subtitle:{fontSize:"24px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},heading:{fontSize:"58px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal"},subheading:{fontSize:"33px",fontWeight:"normal",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},paragraph:{fontSize:"20px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"18px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal",paddingShiftRatio:"0.43"},"unordered-list":{fontSize:"20px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"20px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"17px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"17px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"17px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"adobe-caslon-pro":{data:{title:{fontSize:"92px",fontWeight:"100",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal",paddingShiftRatio:"1"},subtitle:{fontSize:"25px",fontWeight:"600",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},heading:{fontSize:"55px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"34px",fontWeight:"600",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"21px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"29px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},button:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal",paddingShiftRatio:"0.71"},"unordered-list":{fontSize:"21px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"21px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"17px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"full-width-caption":{fontSize:"17px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"17px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"29px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"window-caption":{fontSize:"29px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"}}},"azo-sans-web":{data:{title:{fontSize:"84px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.5"},subtitle:{fontSize:"24px",fontWeight:"300",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},heading:{fontSize:"53px",fontWeight:"100",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},subheading:{fontSize:"32px",fontWeight:"bold",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},paragraph:{fontSize:"19px",fontWeight:"300",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},blockquote:{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.55",letterSpacing:"normal"},button:{fontSize:"17px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"19px",fontWeight:"300",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"ordered-list":{fontSize:"19px",fontWeight:"300",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.55",letterSpacing:"normal"},"window-caption":{fontSize:"27px",fontWeight:"100",textTransform:"none",lineHeight:"1.55",letterSpacing:"normal"}}},calluna:{data:{title:{fontSize:"86px",fontWeight:"100",textTransform:"none",lineHeight:"1.15",letterSpacing:"normal",paddingShiftRatio:"0.46"},subtitle:{fontSize:"24px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"56px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"30px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"19px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},blockquote:{fontSize:"26px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"17px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"19px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"ordered-list":{fontSize:"19px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"inline-image-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"26px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"26px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"clarendon-text-pro":{data:{title:{fontSize:"76px",fontWeight:"100",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal",paddingShiftRatio:"0.68"},subtitle:{fontSize:"22px",fontWeight:"300",textTransform:"none",lineHeight:"1.85",letterSpacing:"normal"},heading:{fontSize:"44px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},subheading:{fontSize:"28px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},paragraph:{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},blockquote:{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},button:{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal",paddingShiftRatio:"0.57"},"unordered-list":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"ordered-list":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"inline-image-caption":{fontSize:"14px",fontWeight:"100",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"full-width-caption":{fontSize:"14px",fontWeight:"100",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"14px",fontWeight:"100",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"window-caption":{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"}}},"courier-std":{data:{title:{fontSize:"75px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.5"},subtitle:{fontSize:"22px",fontWeight:"300",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"},heading:{fontSize:"50px",fontWeight:"normal",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal"},subheading:{fontSize:"30px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"futura-pt":{data:{title:{fontSize:"90px",fontWeight:"bold",textTransform:"none",lineHeight:"1.1",letterSpacing:"normal",paddingShiftRatio:"0.5"},subtitle:{fontSize:"28px",fontWeight:"bold",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"51px",fontWeight:"bold",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"32px",fontWeight:"bold",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"28px",fontWeight:"normal",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},button:{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"full-width-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"28px",fontWeight:"bold",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},"window-caption":{fontSize:"28px",fontWeight:"bold",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"}}},lato:{data:{title:{fontSize:"80px",fontWeight:"800",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.39"},subtitle:{fontSize:"22px",fontWeight:"normal",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},heading:{fontSize:"48px",fontWeight:"bold",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},subheading:{fontSize:"29px",fontWeight:"bold",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},blockquote:{fontSize:"25px",fontWeight:"300",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"},button:{fontSize:"16px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal",paddingShiftRatio:"0.43"},"unordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"25px",fontWeight:"bold",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"},"window-caption":{fontSize:"25px",fontWeight:"bold",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"}}},"ltc-bodoni-175":{data:{title:{fontSize:"84px",fontWeight:"normal",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal",paddingShiftRatio:"0.61"},subtitle:{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},heading:{fontSize:"52px",fontWeight:"normal",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},subheading:{fontSize:"32px",fontWeight:"normal",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal"},paragraph:{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"26px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.57"},"unordered-list":{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"full-width-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"26px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"26px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"museo-sans-rounded":{data:{title:{fontSize:"80px",fontWeight:"bold",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.57"},subtitle:{fontSize:"24px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},heading:{fontSize:"50px",fontWeight:"bold",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},subheading:{fontSize:"28px",fontWeight:"bold",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},blockquote:{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"16px",fontWeight:"normal",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"inline-image-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"full-width-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"museo-slab":{data:{title:{fontSize:"84px",fontWeight:"bold",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.57"},subtitle:{fontSize:"22px",fontWeight:"300",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"},heading:{fontSize:"46px",fontWeight:"bold",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},subheading:{fontSize:"30px",fontWeight:"bold",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},blockquote:{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"16px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"inline-image-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"full-width-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"14px",fontWeight:"normal",textTransform:"none",lineHeight:"1.75",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"24px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"proxima-nova":{data:{title:{fontSize:"78px",fontWeight:"100",textTransform:"none",lineHeight:"1.15",letterSpacing:"normal",paddingShiftRatio:"0.57"},subtitle:{fontSize:"22px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"50px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"29px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"pt-sans":{data:{title:{fontSize:"84px",fontWeight:"normal",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.46"},subtitle:{fontSize:"23px",fontWeight:"300",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},heading:{fontSize:"48px",fontWeight:"normal",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},subheading:{fontSize:"30px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"24px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.43"},"unordered-list":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"pt-sans-narrow":{data:{title:{fontSize:"90px",fontWeight:"normal",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.46"},subtitle:{fontSize:"28px",fontWeight:"300",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal"},heading:{fontSize:"58px",fontWeight:"normal",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"34px",fontWeight:"normal",textTransform:"none",lineHeight:"1.34",letterSpacing:"normal"},paragraph:{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"28px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.43"},"unordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"pt-serif":{data:{title:{fontSize:"80px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.46"},subtitle:{fontSize:"23px",fontWeight:"300",textTransform:"none",lineHeight:"1.65",letterSpacing:"normal"},heading:{fontSize:"52px",fontWeight:"100",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},subheading:{fontSize:"29px",fontWeight:"normal",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},blockquote:{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},button:{fontSize:"17px",fontWeight:"normal",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.8",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"window-caption":{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"}}},raleway:{data:{title:{fontSize:"76px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.57"},subtitle:{fontSize:"21px",fontWeight:"300",textTransform:"none",lineHeight:"1.55",letterSpacing:"normal"},heading:{fontSize:"48px",fontWeight:"100",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},subheading:{fontSize:"30px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},blockquote:{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},button:{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"ordered-list":{fontSize:"18px",fontWeight:"normal",textTransform:"none",lineHeight:"1.7",letterSpacing:"normal"},"inline-image-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"15px",fontWeight:"normal",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"window-caption":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"}}},"spark-bellfort-script":{data:{title:{fontSize:"98px",fontWeight:"100",textTransform:"none",lineHeight:"1.15",letterSpacing:"normal",paddingShiftRatio:"0.54"},subtitle:{fontSize:"32px",fontWeight:"300",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},heading:{fontSize:"60px",fontWeight:"100",textTransform:"none",lineHeight:"1.15",letterSpacing:"normal"},subheading:{fontSize:"38px",fontWeight:"normal",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},paragraph:{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},blockquote:{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},button:{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"ordered-list":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"inline-image-caption":{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"full-width-caption":{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"window-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"}}},"spark-didot-headline":{data:{title:{fontSize:"96px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.71"},subtitle:{fontSize:"29px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"56px",fontWeight:"100",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal"},subheading:{fontSize:"35px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},blockquote:{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.57"},"unordered-list":{fontSize:"25px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"ordered-list":{fontSize:"24px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"inline-image-caption":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"full-width-caption":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"spark-local-brewery":{data:{title:{fontSize:"88px",fontWeight:"100",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal",paddingShiftRatio:"0.64"},subtitle:{fontSize:"26px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},heading:{fontSize:"50px",fontWeight:"100",textTransform:"none",lineHeight:"1.24",letterSpacing:"normal"},subheading:{fontSize:"34px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.70",letterSpacing:"normal"},blockquote:{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"19px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.57"},"unordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.70",letterSpacing:"normal"},"ordered-list":{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.70",letterSpacing:"normal"},"inline-image-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"spark-local-brewery-four":{data:{title:{fontSize:"80px",fontWeight:"100",textTransform:"none",lineHeight:"1.1",letterSpacing:"normal",paddingShiftRatio:"0.75"},subtitle:{fontSize:"26px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"54px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal"},subheading:{fontSize:"34px",fontWeight:"normal",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},paragraph:{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},blockquote:{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},button:{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal",paddingShiftRatio:"0.64"},"unordered-list":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"ordered-list":{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"inline-image-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"full-width-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"16px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"window-caption":{fontSize:"28px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"}}},"spark-voltage":{data:{title:{fontSize:"86px",fontWeight:"normal",textTransform:"none",lineHeight:"1.25",letterSpacing:"normal",paddingShiftRatio:"0.54"},subtitle:{fontSize:"28px",fontWeight:"300",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},heading:{fontSize:"52px",fontWeight:"100",textTransform:"none",lineHeight:"1.2",letterSpacing:"normal"},subheading:{fontSize:"36px",fontWeight:"normal",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal"},paragraph:{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},button:{fontSize:"20px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.5"},"unordered-list":{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"22px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"full-width-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"18px",fontWeight:"100",textTransform:"none",lineHeight:"1.5",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"window-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"}}},"spark-wanderlust-shine":{data:{title:{fontSize:"90px",fontWeight:"100",textTransform:"none",lineHeight:"1.3",letterSpacing:"normal",paddingShiftRatio:"0.86"},subtitle:{fontSize:"30px",fontWeight:"300",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},heading:{fontSize:"52px",fontWeight:"100",textTransform:"none",lineHeight:"1.35",letterSpacing:"normal"},subheading:{fontSize:"36px",fontWeight:"normal",textTransform:"none",lineHeight:"1.45",letterSpacing:"normal"},paragraph:{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},blockquote:{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},button:{fontSize:"21px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal",paddingShiftRatio:"0.71"},"unordered-list":{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"ordered-list":{fontSize:"23px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"inline-image-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"full-width-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"photo-grid-caption":{fontSize:"17px",fontWeight:"100",textTransform:"none",lineHeight:"1.6",letterSpacing:"normal"},"fill-screen-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"},"window-caption":{fontSize:"30px",fontWeight:"100",textTransform:"none",lineHeight:"1.4",letterSpacing:"normal"}}}}},function(t,e,n){(function(e){!function(){"use strict";t.exports=function(t){return(t instanceof e?t:new e(t.toString(),"binary")).toString("base64")}}()}).call(this,n(94).Buffer)},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=n(95),o=n(96),r=n(97);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(e,n),o=(t=s(t,i)).write(e,n);o!==i&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|f(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?s(t,0):d(t,e);if("Buffer"===e.type&&r(e.data))return d(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=s(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|f(e.length);t=s(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(i)return V(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function m(t,e,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:v(t,e,n,i,o);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,i,o);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,i,o){var r,a=1,s=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var u=-1;for(r=n;r<s;r++)if(c(t,r)===c(e,-1===u?0:r-u)){if(-1===u&&(u=r),r-u+1===l)return u*a}else-1!==u&&(r-=r-u),u=-1}else for(n+l>s&&(n=s-l),r=n;r>=0;r--){for(var h=!0,d=0;d<l;d++)if(c(t,r+d)!==c(e,d)){h=!1;break}if(h)return r}return-1}function _(t,e,n,i){n=Number(n)||0;var o=t.length-n;i?(i=Number(i))>o&&(i=o):i=o;var r=e.length;if(r%2!=0)throw new TypeError("Invalid hex string");i>r/2&&(i=r/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function y(t,e,n,i){return F(V(e,t.length-n),t,n,i)}function b(t,e,n,i){return F(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function w(t,e,n,i){return b(t,e,n,i)}function S(t,e,n,i){return F(z(e),t,n,i)}function x(t,e,n,i){return F(function(t,e){for(var n,i,o,r=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),i=n>>8,o=n%256,r.push(o),r.push(i);return r}(e,t.length-n),t,n,i)}function C(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var i=[],o=e;o<n;){var r,a,s,l,c=t[o],u=null,h=c>239?4:c>223?3:c>191?2:1;if(o+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(r=t[o+1]))&&(l=(31&c)<<6|63&r)>127&&(u=l);break;case 3:r=t[o+1],a=t[o+2],128==(192&r)&&128==(192&a)&&(l=(15&c)<<12|(63&r)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:r=t[o+1],a=t[o+2],s=t[o+3],128==(192&r)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&r)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),o+=h}return function(t){var e=t.length;if(e<=I)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=I));return n}(i)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return c(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,i){return u(e),e<=0?s(t,e):void 0!==n?"string"==typeof i?s(t,e).fill(n,i):s(t,e).fill(n):s(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,r=Math.min(n,i);o<r;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!r(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=l.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):function(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,i,o){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var r=o-i,a=n-e,s=Math.min(r,a),c=this.slice(i,o),u=t.slice(e,n),h=0;h<s;++h)if(c[h]!==u[h]){r=c[h],a=u[h];break}return r<a?-1:a<r?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},l.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return y(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function k(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;o<n;++o)i+=String.fromCharCode(127&t[o]);return i}function A(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;o<n;++o)i+=String.fromCharCode(t[o]);return i}function P(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var o="",r=e;r<n;++r)o+=L(t[r]);return o}function E(t,e,n){for(var i=t.slice(e,n),o="",r=0;r<i.length;r+=2)o+=String.fromCharCode(i[r]+256*i[r+1]);return o}function $(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,i,o,r){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<r)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function M(t,e,n,i){e<0&&(e=65535+e+1);for(var o=0,r=Math.min(t.length-n,2);o<r;++o)t[n+o]=(e&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function O(t,e,n,i){e<0&&(e=4294967295+e+1);for(var o=0,r=Math.min(t.length-n,4);o<r;++o)t[n+o]=e>>>8*(i?o:3-o)&255}function B(t,e,n,i,o,r){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,i,r){return r||B(t,0,n,4),o.write(t,e,n,i,23,4),n+4}function H(t,e,n,i,r){return r||B(t,0,n,8),o.write(t,e,n,i,52,8),n+8}l.prototype.slice=function(t,e){var n,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var o=e-t;n=new l(o,void 0);for(var r=0;r<o;++r)n[r]=this[r+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||$(t,e,this.length);for(var i=this[t],o=1,r=0;++r<e&&(o*=256);)i+=this[t+r]*o;return i},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||$(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i},l.prototype.readUInt8=function(t,e){return e||$(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||$(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||$(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||$(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||$(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||$(t,e,this.length);for(var i=this[t],o=1,r=0;++r<e&&(o*=256);)i+=this[t+r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||$(t,e,this.length);for(var i=e,o=1,r=this[t+--i];i>0&&(o*=256);)r+=this[t+--i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readInt8=function(t,e){return e||$(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||$(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||$(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||$(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||$(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||$(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||$(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||$(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||$(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,r=0;for(this[e]=255&t;++r<n&&(o*=256);)this[e+r]=t/o&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,r=1;for(this[e+o]=255&t;--o>=0&&(r*=256);)this[e+o]=t/r&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var o=Math.pow(2,8*n-1);D(this,t,e,n,o-1,-o)}var r=0,a=1,s=0;for(this[e]=255&t;++r<n&&(a*=256);)t<0&&0===s&&0!==this[e+r-1]&&(s=1),this[e+r]=(t/a>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var o=Math.pow(2,8*n-1);D(this,t,e,n,o-1,-o)}var r=n-1,a=1,s=0;for(this[e+r]=255&t;--r>=0&&(a*=256);)t<0&&0===s&&0!==this[e+r+1]&&(s=1),this[e+r]=(t/a>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return H(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return H(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o,r=i-n;if(this===t&&n<e&&e<i)for(o=r-1;o>=0;--o)t[o+e]=this[o+n];else if(r<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<r;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+r),e);return r},l.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var r;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(r=e;r<n;++r)this[r]=t;else{var a=l.isBuffer(t)?t:V(new l(t,i).toString()),s=a.length;for(r=0;r<n-e;++r)this[r+e]=a[r%s]}return this};var R=/[^+\/0-9A-Za-z-_]/g;function L(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){var n;e=e||1/0;for(var i=t.length,o=null,r=[],a=0;a<i;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&r.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&r.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&r.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;r.push(n)}else if(n<2048){if((e-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function z(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(R,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,n,i){for(var o=0;o<i&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(17))},function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-c(t)},e.toByteArray=function(t){var e,n,i,a,s,l=t.length;a=c(t),s=new r(3*l/4-a),n=a>0?l-4:l;var u=0;for(e=0;e<n;e+=4)i=o[t.charCodeAt(e)]<<18|o[t.charCodeAt(e+1)]<<12|o[t.charCodeAt(e+2)]<<6|o[t.charCodeAt(e+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;2===a?(i=o[t.charCodeAt(e)]<<2|o[t.charCodeAt(e+1)]>>4,s[u++]=255&i):1===a&&(i=o[t.charCodeAt(e)]<<10|o[t.charCodeAt(e+1)]<<4|o[t.charCodeAt(e+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i);return s},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,r="",a=[],s=0,l=n-o;s<l;s+=16383)a.push(h(t,s,s+16383>l?l:s+16383));1===o?(e=t[n-1],r+=i[e>>2],r+=i[e<<4&63],r+="=="):2===o&&(e=(t[n-2]<<8)+t[n-1],r+=i[e>>10],r+=i[e>>4&63],r+=i[e<<2&63],r+="=");return a.push(r),a.join("")};for(var i=[],o=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)i[s]=a[s],o[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function u(t){return i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}function h(t,e,n){for(var i,o=[],r=e;r<n;r+=3)i=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),o.push(u(i));return o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,o){var r,a,s=8*o-i-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?o-1:0,d=n?-1:1,f=t[e+h];for(h+=d,r=f&(1<<-u)-1,f>>=-u,u+=s;u>0;r=256*r+t[e+h],h+=d,u-=8);for(a=r&(1<<-u)-1,r>>=-u,u+=i;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===r)r=1-c;else{if(r===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),r-=c}return(f?-1:1)*a*Math.pow(2,r-i)},e.write=function(t,e,n,i,o,r){var a,s,l,c=8*r-o-1,u=(1<<c)-1,h=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:r-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,o),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,o),a=0));o>=8;t[n+f]=255&s,f+=p,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[n+f]=255&a,f+=p,a/=256,c-=8);t[n+f-p]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var i=n(3),o={templates:["ct_page_css","ct_text_props_css","ct_behaviors_css"],process:function(t,e,n){n.components.page={backgroundColor:i.convertColorToRGBA(e.backgroundColor)}}};i.registerCustomThemeComponent("page",o),t.exports=o},function(t,e,n){var i=n(1),o=n(3),r=n(11),a={templates:["ct_title_section_css","ct_title_section_gradient_overlay_treatment_css","ct_title_section_border_box_treatment_css","ct_title_section_solid_box_treatment_css","ct_title_section_top_bottom_rule_treatment_css","ct_title_section_middle_rule_treatment_css","ct_title_section_vintage_treatment_css","ct_title_section_whimsy_treatment_css","ct_title_section_color_band_treatment_css","ct_title_section_header_padding_css","ct_title_section_header_view_padding_css"],process:function(t,e,n){var a=e.title,s=e.subtitle,l=o.getTextSettingsForComponent("title",a.text,t),c=o.getTextSettingsForComponent("subtitle",s.text,t);l.color=o.convertColorToRGBA(a.color),c.color=o.convertColorToRGBA(s.color),l.maxHeight=this._getAutoHeightTrigger(l),c.maxHeight=this._getAutoHeightTrigger(c);var u=e.treatment.type,h={},d={title:l,subtitle:c,treatment:h,useGradientOverlayTreatment:"gradient-overlay"===u,useBorderBoxTreatment:"border-box"===u,useSolidBoxTreatment:"solid-box"===u,useTopBottomRuleTreatment:"top-bottom-rule"===u,useMiddleRuleTreatment:"middle-rule"===u,useVintageTreatment:"vintage"===u,useWhimsyTreatment:"whimsy"===u,useColorBandTreatment:"color-band"===u},f=e.treatment;switch(u){case"top-bottom-rule":h.color=o.convertColorToRGBA(f.color);break;case"middle-rule":h.color=o.convertColorToRGBA(o.cloneColorWithAlpha(f.color,.75));break;case"whimsy":h.color=o.convertColorToRGBA(f.color),h.backgroundImage=r.getAssetAsCSSUrl("whimsy:title",h);break;case"border-box":h.borderColor=o.convertColorToRGBA(o.cloneColorWithAlpha(f.borderColor,.5)),h.backgroundColor=o.convertColorToRGBA(o.cloneColorWithAlpha(f.backgroundColor,.5));break;case"solid-box":h.backgroundColor=o.convertColorToRGBA(o.cloneColorWithAlpha(f.backgroundColor,.8));break;case"color-band":h.backgroundColor=o.convertColorToRGBA(o.cloneColorWithAlpha(f.backgroundColor,.3))}i.merge(d,o.getPaddingsForFont(l.fontFamily,"title",28,l.paddingShiftRatio)),n.components.titleSection=d},_getAutoHeightTrigger:function(t){var e=(t=t||{}).lineHeight||"1";return 3*parseFloat(e)+"em"}};o.registerCustomThemeComponent("titleSection",a),t.exports=a},function(t,e,n){var i=n(1),o=n(3),r=n(11),a={templates:["ct_heading_css","ct_heading_single_rule_treatment_css","ct_heading_double_rule_treatment_css","ct_heading_image_rule_treatment_css"],process:function(t,e,n){var a=o.convertColorToRGBA(e.color),s=o.getTextSettingsForComponent("heading",e.text,t),l=e.treatment.type,c={},u={color:a,treatment:c,useNoTreatment:"none"===l,useSingleRuleTreatment:"single-rule"===l,useDoubleRuleTreatment:"double-rule"===l,useImageRuleTreatment:"whimsy"===l,textAlign:"left"};i.extend(u,s);var h=e.treatment;switch(l){case"single-rule":case"double-rule":c.color=o.convertColorToRGBA(o.cloneColorWithAlpha(h.color,.9));break;case"whimsy":c.color=o.convertColorToRGBA(o.cloneColorWithAlpha(h.color,.9)),c.backgroundImage=r.getAssetAsCSSUrl("whimsy:heading",c)}n.components.heading=u}};o.registerCustomThemeComponent("heading",a),t.exports=a},function(t,e,n){var i=n(3);SubheadingCTC={templates:["ct_subheading_css"],process:function(t,e,n){var o=i.getTextSettingsForComponent("subheading",e.text,t);o.color=i.convertColorToRGBA(e.color),o.textAlign="left",n.components.subheading=o}},i.registerCustomThemeComponent("subheading",SubheadingCTC),t.exports=SubheadingCTC},function(t,e,n){var i=n(3),o={templates:["ct_paragraph_css"],process:function(t,e,n){var o=i.getTextSettingsForComponent("paragraph",e.text,t);o.color=i.convertColorToRGBA(e.color),n.components.paragraph=o}};i.registerCustomThemeComponent("paragraph",o),t.exports=o},function(t,e,n){var i=n(1),o=n(3),r=n(11),a={templates:["ct_unordered_list_css","ct_unordered_list_image_treatment_css"],process:function(t,e,n){var a=o.convertColorToRGBA(e.color),s=o.getTextSettingsForComponent("unordered-list",e.text,t),l=e.treatment.type,c={},u={color:a,treatment:c};i.extend(u,s);var h=e.treatment;switch(c.color=o.convertColorToRGBA(h.color||e.color),l){case"triangle":c.backgroundImage=r.getAssetAsCSSUrl("triangle",c);break;case"vbullet":c.backgroundImage=r.getAssetAsCSSUrl("vintage:unorderedlist",c);break;case"diamond":c.backgroundImage=r.getAssetAsCSSUrl("whimsy:unorderedlist",c);break;case"circle":default:c.color!=a&&(c.backgroundImage=r.getAssetAsCSSUrl("circle",c))}u.useImageTreatment=!!c.backgroundImage,n.components.unorderedList=u}};o.registerCustomThemeComponent("unorderedList",a),t.exports=a},function(t,e,n){var i=n(1),o=n(3),r={templates:["ct_ordered_list_css","ct_ordered_list_colored_counter_treatment_css"],process:function(t,e,n){var r=o.convertColorToRGBA(e.color),a=o.getTextSettingsForComponent("ordered-list",e.text,t),s={},l={color:r,treatment:s};i.extend(l,a);var c=e.treatment||{};s.color=o.convertColorToRGBA(c.color||e.color),l.useColoredCounterTreatment=s.color!=r,n.components.orderedList=l}};o.registerCustomThemeComponent("orderedList",r),t.exports=r},function(t,e,n){var i=n(1),o=n(3),r=n(11),a={templates:["ct_blockquote_css","ct_blockquote_quote_treatment_css","ct_blockquote_bottom_rule_treatment_css","ct_blockquote_top_bottom_rule_treatment_css","ct_blockquote_left_rule_treatment_css","ct_blockquote_color_band_treatment_css"],process:function(t,e,n){var a=o.convertColorToRGBA(e.color),s=o.getTextSettingsForComponent("blockquote",e.text,t),l=e.treatment.type,c={},u={color:a,treatment:c,useNoTreatment:"none"===l,useQuoteTreatment:"quote"===l,useBottomRuleTreatment:"bottom-rule"===l,useTopBottomRuleTreatment:"top-bottom-rule"===l,useLeftRuleTreatment:"left-rule"===l,useColorBandTreatment:"color-band"===l};i.extend(u,s);var h=e.treatment;switch(l){case"quote":c.color=o.convertColorToRGBA(o.cloneColorWithAlpha(h.color,.9)),c.backgroundImage=r.getAssetAsCSSUrl("luca:blockquote",c);break;case"bottom-rule":case"top-bottom-rule":case"left-rule":c.color=o.convertColorToRGBA(o.cloneColorWithAlpha(h.color,.9));break;case"color-band":c.backgroundColor=o.convertColorToRGBA(o.cloneColorWithAlpha(h.backgroundColor,.9))}n.components.blockquote=u}};o.registerCustomThemeComponent("blockquote",a),t.exports=a},function(t,e,n){var i=n(1),o=n(3),r={templates:["ct_inline_image_css","ct_inline_image_caption_background_treatment_css","ct_inline_image_border_treatment_css"],process:function(t,e,n){var r=o.convertColorToRGBA(e.color),a=o.getTextSettingsForComponent("inline-image-caption",e.text,t),s=e.treatment.type,l={},c={color:r,treatment:l,useNoTreatment:"none"===s,useCaptionBackgroundTreatment:"caption-background"===s,useBorderTreatment:"image-border"===s};i.extend(c,a);var u=e.treatment;switch(s){case"caption-background":l.backgroundColor=o.convertColorToRGBA(u.backgroundColor);break;case"image-border":u.borderColor&&(l.borderColor=o.convertColorToRGBA(u.borderColor))}n.components.inlineImage=c}};o.registerCustomThemeComponent("inlineImage",r),t.exports=r},function(t,e,n){var i=n(1),o=n(3),r=n(11),a={templates:["ct_button_css","ct_button_square_treatment_css","ct_button_rounded_treatment_css","ct_button_double_rounded_treatment_css","ct_button_pill_treatment_css","ct_button_triangle_treatment_css"],process:function(t,e,n){var a=o.convertColorToRGBA(e.color),s=o.convertColorToRGBA(e.hoverColor),l=o.getTextSettingsForComponent("button",e.text,t),c=e.treatment.type,u={},h={color:a,hoverColor:s,treatment:u,useSquareTreatment:"square-border"===c||"square-background"===c,useRoundedTreatment:"rounded-border"===c||"rounded-background"===c,useDoubleRoundedTreatment:"double-border"===c,usePillTreatment:"pill-border"===c||"pill-background"===c,useTriangleTreatment:"triangle"===c};i.extend(h,l);var d=e.treatment,f=14;switch(c){case"square-border":case"square-background":case"rounded-border":case"rounded-background":case"double-border":case"pill-border":case"pill-background":d.borderColor&&(u.borderColor=o.convertColorToRGBA(d.borderColor),u.hoverBorderColor=o.convertColorToRGBA(d.hoverBorderColor)),d.backgroundColor&&(u.backgroundColor=o.convertColorToRGBA(d.backgroundColor),u.hoverBackgroundColor=o.convertColorToRGBA(d.hoverBackgroundColor));break;case"triangle":u.color=o.convertColorToRGBA(d.color),u.hoverColor=o.convertColorToRGBA(d.hoverColor),u.backgroundImage=r.getAssetAsCSSUrl("triangle",{color:u.color}),u.hoverBackgroundImage=r.getAssetAsCSSUrl("triangle",{color:u.hoverColor}),f=4}i.merge(h,o.getPaddingsForFont(h.fontFamily,"button",f,h.paddingShiftRatio)),n.components.button=h}};o.registerCustomThemeComponent("button",a),t.exports=a},function(t,e,n){var i=n(3),o={templates:["ct_inline_link_css"],process:function(t,e,n){var o=e.treatment.type;n.components.inlineLink={color:i.convertColorToRGBA(e.color),hoverColor:i.convertColorToRGBA(e.hoverColor),useNoTreatment:"none"===o,useUnderlineTreatment:"underline"===o,underlineOnHover:"none"===o&&e.treatment.underlineOnHover}}};i.registerCustomThemeComponent("inlineLink",o),t.exports=o},function(t,e,n){var i=n(1),o=n(3),r={templates:["ct_full_width_image_css","ct_full_width_image_caption_background_treatment_css","ct_full_width_image_border_treatment_css"],process:function(t,e,n){var r=o.convertColorToRGBA(e.color),a=o.getTextSettingsForComponent("full-width-caption",e.text,t),s=e.treatment.type,l={},c={color:r,treatment:l,useNoTreatment:"none"===s,useCaptionBackgroundTreatment:"caption-background"===s,useBorderTreatment:"image-border"===s};i.extend(c,a);var u=e.treatment;switch(s){case"caption-background":l.backgroundColor=o.convertColorToRGBA(u.backgroundColor);break;case"image-border":u.borderColor&&(l.borderColor=o.convertColorToRGBA(u.borderColor))}n.components.fullWidthImage=c}};o.registerCustomThemeComponent("fullWidthImage",r),t.exports=r},function(t,e,n){var i=n(1),o=n(3),r={templates:["ct_fill_screen_image_css"],process:function(t,e,n){var r=o.getTextSettingsForComponent("fill-screen-caption",e.text,t),a={color:o.convertColorToRGBA(e.color),backgroundColor:o.convertColorToRGBA(e.backgroundColor)};i.extend(a,r),n.components.fillScreenImage=a}};o.registerCustomThemeComponent("fillScreenImage",r),t.exports=r},function(t,e,n){var i=n(1),o=n(3),r={templates:["ct_window_image_css"],process:function(t,e,n){var r=o.getTextSettingsForComponent("window-caption",e.text,t),a={color:o.convertColorToRGBA(e.color),backgroundColor:o.convertColorToRGBA(e.backgroundColor)};i.extend(a,r),n.components.windowImage=a}};o.registerCustomThemeComponent("windowImage",r),t.exports=r},function(t,e,n){var i=n(1),o=n(3),r={templates:["ct_photo_grid_css","ct_photo_grid_caption_background_treatment_css","ct_photo_grid_border_treatment_css"],process:function(t,e,n){var r=o.convertColorToRGBA(e.color),a=o.getTextSettingsForComponent("inline-image-caption",e.text,t),s=e.treatment.type,l={},c={color:r,treatment:l,useNoTreatment:"none"===s,useCaptionBackgroundTreatment:"caption-background"===s,useBorderTreatment:"image-border"===s};i.extend(c,a);var u=e.treatment;switch(s){case"caption-background":l.backgroundColor=o.convertColorToRGBA(u.backgroundColor);break;case"image-border":u.borderColor&&(l.borderColor=o.convertColorToRGBA(u.borderColor))}n.components.photoGrid=c}};o.registerCustomThemeComponent("photoGrid",r),t.exports=r},function(t,e,n){n(1);var i=n(3),o={templates:["ct_glideshow_css"],process:function(t,e,n){n.components.glideshow={backgroundColor:i.convertColorToRGBA(e.backgroundColor)}}};i.registerCustomThemeComponent("glideshow",o),t.exports=o},function(t,e,n){var i=n(16),o=40,r=2,a=2,s={p:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},ol:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},ul:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},h3:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},h4:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},blockquote:{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},".link-button-wrapper":{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1},"div.image":{p:1,ol:1,ul:1,h3:1,h4:1,blockquote:1,".link-button-wrapper":1,"div.image":1}},l={templates:["ct_spacing_css"],process:function(t,e,n){n.components.spacing={spacingRules:this._getItemSpacingRules(t,e,n)}},_getItemSpacingRules:function(t,e,n){var o="."+(i.getUniqueName(t)||"custom")+"-theme",r="";return r+=this._getItemSpacingRulesScaledForMediaQuery(o),r+=this._getItemSpacingRulesScaledForMediaQuery(o,.5,"max-width: 767px")},_getItemSpacingRulesScaledForMediaQuery:function(t,e,n){var i="";e=e||1;var l=n?"  ":"",c=o,u=a,h=function(t,n){var i=Math.round(t*c*e);switch(n){case"rem":return d(i).toFixed(3)+"rem";case"px":default:return i+"px"}},d=function(t){return t/16};n&&(i+="@media ("+n+") {\n"),i+=l+t+" .content-spacer {\n",i+=l+"  height: "+d(r)+"rem;\n",i+=l+"}\n",i+=l+t+" .content-item-spacer {\n",i+=l+"  height: "+h(u,"rem")+";\n",i+=l+"}\n",i+=l+t+" .section .section-content .content-container {\n",i+=l+"  padding-top: "+h(.5*u,"rem")+";\n",i+=l+"  padding-bottom: "+h(.5*u,"rem")+";\n",i+=l+"}\n",i+=l+t+" .full-width-section .section-content .content-container {\n",i+=l+"  padding-top: 0;\n",i+=l+"  padding-bottom: 0;\n",i+=l+"}\n",i+=l+t+" .section.large-content-spacing-top .section-content .content-container {\n",i+=l+"  padding-top: "+h(u,"rem")+";\n",i+=l+"}\n",i+=l+t+" .section.large-content-spacing-bottom .section-content .content-container {\n",i+=l+"  padding-bottom: "+h(u,"rem")+";\n",i+=l+"}\n",i+=l+t+" .content-container > :first-child {\n",i+=l+"  margin-top: 0;\n",i+=l+"}\n",i+=l+t+" .content-container > :last-child {\n",i+=l+"  margin-bottom: 0;\n",i+=l+"}\n",i+=l+t+" ul,\n",i+=l+t+" ol {\n",i+=l+"  padding: 0\n",i+=l+"}\n",i+=l+t+" li {\n",i+=l+"  margin-bottom: "+h(.2,"rem")+";\n",i+=l+"}\n",i+=l+t+" li:last-child {\n",i+=l+"  margin-bottom: 0;\n",i+=l+"}\n";for(var f=s,p=Object.keys(f),g=0;g<p.length;g++){var m=p[g];i+=l+t+" .content-container "+m+" {\n",i+=l+"  margin-top: 0;\n",i+=l+"  margin-bottom: 0;\n",i+=l+"}\n";for(var v=f[m],_=Object.keys(v),y=0;y<_.length;y++){var b=_[y];i+=l+t+" .content-container "+b+" + "+m+"{\n",i+=l+"  margin-top: "+h(f[m][b],"rem")+";\n",i+=l+"}\n"}}return i+=l+t+" .photo-grid-section + .single-column-section h3:first-child,\n",i+=l+t+" .photo-grid-section + .single-column-section h4:first-child,\n",i+=l+t+" .photo-grid-section + .single-column-section blockquote:first-child {\n",i+=l+"  margin-top: "+h(1,"rem")+";\n",i+=l+"}\n",i+=l+t+" .photo-grid-section + .single-column-section blockquote:last-child {\n",i+=l+"  margin-top: "+h(1,"rem")+";\n",i+=l+"}\n",n&&(i+="}\n"),i}};n(3).registerCustomThemeComponent("spacing",l),t.exports=l},function(t,e,n){n(16);var i={templates:["ct_column_css"],process:function(t,e,n){n.components.column={pageMargin:{superNarrow:Math.min(7,45),extraNarrow:Math.min(7,45),narrow:Math.min(12.5,45),default:20,wide:Math.min(25,45),extraWide:Math.min(30,45),superWide:Math.min(33,45)},glideshowColumn:{superNarrow:{width:Math.max(70,10),maxWidth:"none",margin:"18px 14px",padding:"31px 12px",centerAlignedWidth:75,centerAlignedMaxWidth:"900px"},extraNarrow:{width:Math.max(70,10),maxWidth:"none",margin:"18px 14px",padding:"31px 13px",centerAlignedWidth:75,centerAlignedMaxWidth:"900px"},narrow:{width:Math.max(60,10),maxWidth:"none",margin:"32px 32px",padding:"56px 32px",centerAlignedWidth:75,centerAlignedMaxWidth:"900px"},default:{width:50,maxWidth:"none",margin:"32px 32px",padding:"56px 32px",centerAlignedWidth:65,centerAlignedMaxWidth:"900px"},wide:{width:Math.max(40,10),maxWidth:"580px",margin:"32px 32px",padding:"56px 32px",centerAlignedWidth:65,centerAlignedMaxWidth:"900px"},extraWide:{width:Math.max(30,10),maxWidth:"580px",margin:"32px 80px",padding:"56px 32px",centerAlignedWidth:65,centerAlignedMaxWidth:"900px"},superWide:{width:Math.max(25,10),maxWidth:"580px",margin:"32px 80px",padding:"56px 32px",centerAlignedWidth:65,centerAlignedMaxWidth:"900px"}}}}};n(3).registerCustomThemeComponent("column",i),t.exports=i},function(t,e,n){var i=n(3),o=n(11),r={templates:["ct_author_section_css"],process:function(t,e,n){var r=t.components.paragraph;if(r){var a=i.getTextSettingsForComponent("paragraph",r.text,t),s=r.color,l=i.cloneColorWithAlpha(s,.5),c=i.convertColorToRGBA(s),u=i.convertColorToRGBA(l);a.color=c,a.colorAlpha=u,a.appreciateIconUnfilled=o.getAssetAsCSSUrl("appreciate",{color:c}),a.appreciateIconUnfilledAlpha=o.getAssetAsCSSUrl("appreciate",{color:u}),a.appreciateIconFilled=o.getAssetAsCSSUrl("appreciate:filled",{color:c}),a.appreciateIconFilledAlpha=o.getAssetAsCSSUrl("appreciate:filled",{color:u}),n.components.authorSection=a}}};i.registerCustomThemeComponent("authorSection",r),t.exports=r},function(t,e,n){var i=n(3),o={templates:["ct_credits_section_css"],process:function(t,e,n){var o=t.components.paragraph;o&&(n.components.creditsSection={color:i.convertColorToRGBA(o.color)})}};i.registerCustomThemeComponent("creditsSection",o),t.exports=o},function(t,e,n){var i=n(46),o=n(16),r=function(t){this._parseIssueRoot(t)},a=n(1),s=function(t){return t?t.replace(/\</g,"%3C").replace(/\>/g,"%3E").replace(/\"/g,"%22"):t};a.extend(r.prototype,{defaultTitleAlign:"title-center",defaultCoverTitleAlign:"title-top-left",defaultCaptionAlign:"caption-left",defaultCardAlign:"card-left",defaultImageAlign:"50% 50%",defaultLinkButtonAlign:"link-left",defaultEmbedURL:"about:blank",defaultLinkURL:"",sectionTypeSettings:{title:{isName:"title_section",settingsName:"title",parser:"parseTitleSectionForTemplate"},content:{isName:"default_section",settingsName:"single-column",parser:"parseCommonSection"},"column-layout":{isName:"column_layout_section",settingsName:"column-layout",parser:"parseColumnLayoutSectionForTemplate"},"card-layout":{isName:"card_layout_section",settingsName:"card-layout",parser:"parseCardLayoutSectionForTemplate"},"split-layout":{isName:"split_layout_section",settingsName:"split-layout",parser:"parseSplitLayoutSectionForTemplate"},spacer:{isName:"spacer_section",settingsName:"spacer",parser:"parseSpacerSectionForTemplate"},zoom:{isName:"zoom_section",settingsName:"fullscreen-photo",parser:"parseSectionImageForTemplate"},window:{isName:"window_section",settingsName:"window",parser:"parseSectionImageForTemplate"},banner:{isName:"banner_section",settingsName:"banner",parser:"parseSectionImageForTemplate"},"full-width":{isName:"full_width_photo_section",settingsName:"full-width-photo",parser:"parseSectionImageForTemplate"},"card-flipbook":{isName:"card_flipbook_section",settingsName:"column-overlay",parser:"parseCardFlipbookSectionForTemplate"},"fifty-fifty":{isName:"fifty_fifty_section",settingsName:"50-50",parser:"parseFiftyFiftySectionForTemplate"},wipe:{isName:"wipe_section",settingsName:"wipe",parser:"parseWipeSectionForTemplate"},"photo-grid":{isName:"photo_grid_section",settingsName:"photo-grid",parser:"parsePhotoGridSectionForTemplate"},"back-matter":{isName:"back_matter_section",settingsName:"back-matter",parser:"parseBackMatterSectionForTemplate"},author:{isName:"author_section",settingsName:"author",parser:"parseAuthorSectionForTemplate"},credits:{isName:"credits_section",settingsName:"credits",parser:"parseCreditsSectionForTemplate"},bumper:{isName:"bumper_section",settingsName:"bumper",parser:"parseBumperSectionForTemplate"},"brand-bumper":{isName:"brand_bumper_section",settingsName:"brand-bumper",parser:"parseBrandBumperSectionForTemplate"},"brand-header":{isName:"brand_header_section",settingsName:"brand-header",parser:"parseBrandHeaderSectionForTemplate"}},openCloseTypes:{ol:1,ul:1},rootPayload:null,rootURL:"",isValidURL:function(t){var e=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),n="http://"+t,i="http:"+t;return e.test(t)||e.test(n)||e.test(i)||/^mailto\:[^\@]+\@[^\@]+/.test(t)||/^tel\:[\d\s\(\)\-\+]+/.test(t)},getBasicURLInfo:function(t){var e={};return e.valid=this.isValidURL(t),e.absoluteURL=t,t&&!/^(([A-Za-z]+:)|\/\/)/.test(t)&&(e.absoluteURL="http://"+t),e},getURLInfo:function(t){var e=this.getBasicURLInfo(t);if(e.embeddable=!1,e.embedURL=void 0,!e.valid)return e;var n=t.match(/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*([^\/\?#:]+)\.[^\/\?#:]+/),i=n&&n[1]||"";n&&"adobe"===n[1]&&"spark"==(i=(n=t.match(/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*([^\/\?#:]+)\.adobe\.[^\/\?#:]+\/([^\/\?#:]+)/))&&n[1]||"")&&(i+="-"+n[2]);if("voice"===i&&t.search(/voice\.adobe\.com\/v\//)>=0&&(i="voice-ccv"),i){var o={voice:{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*voice\.adobe\.com\/(?:[^\/\?#]+\/)([^\?#\&\/]+)/,prefix:"https://voice.adobe.com/a/",postfix:"/embed"},"voice-ccv":{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*voice\.adobe\.com\/v\/([^\?#\&\/]+)/,prefix:"https://www.ccv.adobe.com/v1/player/",postfix:"/embed"},ccv:{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*ccv.adobe\.com\/(?:[^\/\?#]+\/)+([^\?#\&\/]+)\/embed/,prefix:"https://www.ccv.adobe.com/v1/player/",postfix:"/embed"},"spark-video":{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*spark\.adobe\.com\/video\/([^\?#\&\/]+)/,prefix:"https://spark.adobe.com/video/",postfix:"/embed?lazyLoading=true"},youtube:{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*youtube\.com\/(?:(?:watch\?(?:[^&]+&)*v=)|(?:embed\/))([^\?#\&\/]+)/,prefix:"https://youtube.com/embed/",postfix:"?enablejsapi=1"},youtu:{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*youtu\.be\/([^\?#\&\/]+)/,prefix:"https://youtube.com/embed/",postfix:"?enablejsapi=1"},vimeo:{regex:/(?:(?:https?:)?\/\/)?(?:[^\.:\/]+\.)*vimeo\.com(?:\/[^\/\?#]+)*\/([^\?#\&\/]+)/,prefix:"https://player.vimeo.com/video/",postfix:""}}[i];if(o){var r=t.match(o.regex);r&&(e.embeddable=!0,e.embedURL=o.prefix+r[1]+o.postfix)}}return e},simpleValidateLinkURL:function(t){var e=this.getBasicURLInfo(t);return e.valid?e.absoluteURL:this.defaultLinkURL},parseIssueForTemplate:function(t){var e=this._parseIssueRoot(t);return t.pages&&(e.pages=this.parseIssuePages(t.pages,e)),e.splash=this._parseSplashForTemplate(t,e),e},_parsePageBrandForTemplate:function(t,e){var n=e.brand;return n&&this._copyPrimitives(n,{})},_parseSplashForTemplate:function(t,e){for(var n={},i=e.pages,o=i.length,r=0;r<o;r++){for(var a=i[r].sections,s=a.length,l=0;l<s;l++){var c=a[l];if(c.title_section&&c.image){n.image=this._copyPrimitives(c.image,{});break}}if(n.image)break}return n},parseBrandSocialUrls:function(t,e){e.facebookUrl&&(t.facebookUrl=this.simpleValidateLinkURL(e.facebookUrl)),e.facebookIcon&&(t.facebookIcon=e.facebookIcon),e.twitterUrl&&(t.twitterUrl=this.simpleValidateLinkURL(e.twitterUrl)),e.twitterIcon&&(t.twitterIcon=e.twitterIcon),e.instagramUrl&&(t.instagramUrl=this.simpleValidateLinkURL(e.instagramUrl)),e.instagramIcon&&(t.instagramIcon=e.instagramIcon),t.hasSocialUrls=!!(t.facebookUrl||t.twitterUrl||t.instagramUrl)},parseBrandHeaderSectionForTemplate:function(t,e){var n=this.parseCommonSection(t,e),i=e.brand;return"brandkit"==e.brand_type&&(n.brandCTAEnabled=!!i.headerCTAEnabled),i&&(n.brandName=i.name,n.hasBrandLogo="custom"==e.brand_type||!!i.headerLogo,n.brandUrl=this.simpleValidateLinkURL(i.url),n.brandCTA=i.headerCta,n.brandCTAUrl=this.simpleValidateLinkURL(i.headerCtaUrl),n.brandCTAButtonStyle=i.headerCTAButtonStyle,this.parseBrandSocialUrls(n,i)),n},parseBrandBumperSectionForTemplate:function(t,e){var n=this.parseCommonSection(t,e),i=e.brand;return"brandkit"==e.brand_type&&(n.brandCTAEnabled=!!i.footerCTAEnabled),i&&(n.brandName=i.name,n.hasBrandLogo="custom"==e.brand_type||!!i.bumperLogo,n.brandUrl=this.simpleValidateLinkURL(i.url),n.brandCTA=i.footerCta,n.brandCTAUrl=this.simpleValidateLinkURL(i.footerCtaUrl),n.brandCTAButtonStyle=i.footerCTAButtonStyle,this.parseBrandSocialUrls(n,i)),n},_parseIssueRoot:function(t){t||(t={});var e={id:t.cid||"",isSinglePage:!0,images:[]};return this.rootPayload=e,this.rootURL=t.base_url||"",this._copyPrimitives(t,e),t.brand&&(e.brand=t.brand),t.brand_type&&(e.brand_type=t.brand_type),t.theme&&(e.theme=this.parseThemeForTemplate(t.theme)),t.stylesheets&&(e.stylesheets=t.stylesheets.slice()),t.javascripts&&(e.javascripts=t.javascripts.slice()),t.pages&&(e.isSinglePage=1===t.pages.length),e},parseIssuePages:function(t,e){for(var n=[],i=t.length,o=0;o<i;o++){var r=t[o],a=0===o&&i>1&&r.sections&&1===r.sections.length,s=this.parsePageForTemplate(r,a,e);n.push(s)}if(i>1){var l={bumper_page:!0,issue_id:e&&e.id,issue_url:e&&e.published_url,title:e&&e.title,subtitle:e&&e.subtitle};n.push(l)}return n},parsePageForTemplate:function(t,e,n){var i={id:t.cid||""};this._copyPrimitives(t,i),i.brand=this._parsePageBrandForTemplate(t,n),i.brand_type=n.brand_type,i.isCover=e,i.isCover||(i.toc={id:t.id});var o=t.author;return i.has_author=!(!o||!o.first_name&&!o.last_name),i.author=t.author,i.credits=t.credits,t.sections&&(i.sections=this.parsePageSections(t.sections,i)),i},parsePageSections:function(t,e){for(var n=[],i=0,o=t.length;i<o;i++){var r=t[i],a=this.parseSectionForTemplate(r,e);n.push(a)}return this.updateLayersFromLayerNames(n),n},parseSectionForTemplate:function(t,e){var n=this.sectionTypeSettings[t.type]||{};return(n.parser&&this[n.parser]||this.parseCommonSection).call(this,t,e)},parseSectionForTemplateInContext:function(t,e){return e&&this._parseIssueRoot(e),this.parseSectionForTemplate(t)},parseCommonSection:function(t,e,n){var i={id:t.cid||"",isCover:!!e&&e.isCover,section_class:this.getSettingByName(t.settings,"section_class")||""};this._copyPrimitives(t,i),this._parseSectionTypeIsBools(t,i),this._applyThemeSettings(i);var o=n||t.content_items||[];return i.content_items=this.parseInlineContentItems(o,i),i},parseSingleColumnSectionForTemplate:function(t,e,n){var i=this.parseCommonSection(t,e,n),o=i.content_items;if("img"===(this.getSettingByName(t.settings,"background_type")||"none")&&o.length){var r=o[0];"img"===r.type&&(i.image=r.image,o.shift())}return i},parseColumnLayoutSectionForTemplate:function(t,e,n){var i=this.parseSingleColumnSectionForTemplate(t,e,n);i.section_class+=(i.section_class?" ":"")+"column-layout";this.getSettingByName(t.settings,"background_type");if(i.image){i.section_class+=" background-image-overrides";var o=this.getSettingByName(t.settings,"background_overlay_type")||"none";"none"!=o&&(i.section_class+=" background-overlay-"+o)}var r=this.getSettingByName(t.settings,"section_sizing")||"natural";return"natural"!==r&&(i.section_class+=(i.section_class?" ":"")+"height-"+r),i},parseCardLayoutSectionForTemplate:function(t,e,n){var i=this.parseSingleColumnSectionForTemplate(t,e,n);return i.section_class+=(i.section_class?" ":"")+"card-layout",i},parseSplitLayoutSectionForTemplate:function(t,e,n){var i=this.parseSingleColumnSectionForTemplate(t,e,n),o=this.getSettingByName(t.settings,"background_split_position")||"left";return i.section_class+=(i.section_class?" ":"")+"split-layout",i.section_class+=" image-on-"+o,i},parseTitleSectionForTemplate:function(t,e){var n=this.parseCommonSection(t,e,[]);this._parseTitleAlign(t,n),this._addToTOC("title_align",n.title_align,e);var i=t.content_items;if(i)for(var o=0,r=i.length;o<r;o++){var a=i[o];"title"===a.type?(n.title=a.text,this._addToTOC("title",n.title,e)):"subtitle"===a.type?(n.subtitle=a.text,this._addToTOC("subtitle",n.subtitle,e)):"img"===a.type&&(n.image=this.parseImage(a,n),this._addToTOC("image_url",s(n.image_url),e),this._addToTOC("image_align",n.image.align,e))}return(n.title||n.subtitle)&&(n.renderTitleHeader=!0),n},parseSectionImageForTemplate:function(t,e){var n=this.parseCommonSection(t,e);this._parseTitleAlign(t,n),this._parseCaptionAlign(t,n);var i=this._findFirstByType(t.content_items,"img");return i&&(n.image=this.parseImage(i,n),n.caption=i.text),n},parseSpacerSectionForTemplate:function(t,e){var n=this.parseCommonSection(t,e);return n.spacer_class=this.getSettingByName(t.settings,"spacer_class")||"",n},parseCardFlipbookSectionForTemplate:function(t,e){for(var n=this.parseCommonSection(t,e),i=[],o=[],r=t.groups,a=r.length-1,s=0,l=r.length;s<l;s++){var c=r[s],u=n.content_items.slice(c.offset,c.offset+c.count);i[s]=u.shift();var h=i[s].settings.card_align||this.defaultCardAlign;(s!==a||u.length)&&(o[s]={content_items:u,card_align:h})}return n.background_images=i,n.cards=o,n},updateLayersFromLayerNames:function(t){for(var e={over:1,under:0},n={over:1,under:-1},i=-1,o=0,r=t.length;o<r;o++){var a,s=t[o],l=s.layerName,c=e[l];if(void 0===c)c=-1;else a=-1===i?n[l]:c-i,s.layer=a;i=c}},parseFiftyFiftySectionForTemplate:function(t,e){for(var n=this.parseCommonSection(t,e),i=n.content_items,o=0,r=i.length;o<r;o++){var a=i[o];if("img"!==a.type)break;a.background_image=!0}return n},parseWipeSectionForTemplate:function(t,e){for(var n=this.parseCommonSection(t,e),i=1,o=n.content_items,r=0,a=o.length;r<a;r++){var s=o[r];if("img"===s.type&&(n["background_image_"+i]=s.src,++i>2))break}return n},parsePhotoGridSectionForTemplate:function(t,e){var n,i,o=this.parseCommonSection(t,e),r=t.groups||[],a=o.content_items||[];for(n=0;n<a.length;n++)if("p"===a[n].type&&a[n].text){i=a[n];break}i&&(o.grid_caption=i.content,o.text_align=i.text_align);var s=[];for(o.groups=s,n=0;n<r.length;n++){var l=r[n];if(l){for(var c={layoutName:l.layoutName,photos:[]},u=0;u<l.count;u++){var h=a[l.offset+u];if(h&&h.image){var d=h.id,f=h.image,p=f.src||"",g=f.image_width||0,m=f.image_height||0,v=Math.min(Math.max(g,m),1024);c.photos.push({id:d,src:p,caption:h.text||"",image_src:p.replace(/(\?(?:[^#\&]*\&)*)size=[0-9]+/,"$1size="+v),image_width:g,image_height:m})}}s.push(c)}}return o},parseBackMatterSectionForTemplate:function(t,e){var n=this.parseCommonSection(t,e),i=t.groups||[],o=n.content_items||[],r=[];n.groups=r;for(var a=0;a<i.length;a++){var s=i[a];if(s){for(var l={name:s.name,content_items:[]},c=0;c<s.count;c++){var u=o[s.offset+c];u&&l.content_items.push(u)}r.push(l)}}return n},parseAuthorSectionForTemplate:function(t,e){var n=this.parseCommonSection(t,e),i=e.author;if(n.has_author=e.has_author,i){n.author_first_name=i.first_name||"",n.author_last_name=i.last_name||"";var o=i.avatar_url||"";o&&(o=this.makeAbsoluteURL(o)),n.avatar_url=o}return n.appreciate_url=e.appreciate_url||"",n},parseCreditsSectionForTemplate:function(t,e){var n=this.parseCommonSection(t,e);return n.credits=e.credits||"",n},parseBumperSectionForTemplate:function(t,e){return this.parseCommonSection(t,e)},_parseSectionTypeIsBools:function(t,e){for(var n in this.sectionTypeSettings){e[this.sectionTypeSettings[n].isName]=t.type===n}},_parseTitleAlign:function(t,e){var n=this.getSettingByName(t.settings,"title_align");e.title_align=n||(e.isCover?this.defaultCoverTitleAlign:this.defaultTitleAlign)},_parseCaptionAlign:function(t,e){var n=this.getSettingByName(t.settings,"caption_align");e.caption_align=n||this.defaultCaptionAlign},_addToTOC:function(t,e,n){n&&n.toc&&void 0===n.toc[t]&&(n.toc[t]=e)},parseInlineContentItems:function(t,e){var n,i,o=[],r=0,a=t.length;for(r=0;r<a;r++){var s=t[r],l=this.parseInlineContentItem(s,e);o.push(l)}for(r=0;r<a;r++)i=o[r],(n=o[r-1])&&i.supertype===n.supertype||(this.openCloseTypes[i.supertype]&&(i.open=i.supertype),n&&this.openCloseTypes[n.supertype]&&(i.close=n.supertype));return i&&this.openCloseTypes[i.supertype]&&o.push({body:!0,type:"",close:i.supertype}),o},parseInlineContentItem:function(t,e){var n=e?e.type:"",i={id:t.cid||"",body:!0,content:this.parseContentText(n,t)};switch(this._copyPrimitives(t,i),t.type){case"ol.li":case"ul.li":var o=t.type.split(".");i.supertype=o[0],i.type=o[1];break;case"img":this.parseImageItem(t,i,e);break;case"a":i.block_class="link-button-wrapper",i.item_class="link-button",i.link_align=this.getSettingByName(t.settings,"link_align")||this.defaultLinkButtonAlign,i.href=s(i.href);var r=this.getURLInfo(i.href);i.href=r.absoluteURL,this.getSettingByName(t.settings,"embedded")&&(r.valid&&r.embeddable&&r.embedURL?i.embed_url=r.embedURL:i.embed_url=this.defaultEmbedURL)}switch(t.type){case"p":case"img":case"h3":case"h4":var a=this.getSettingByName(t.settings,"text_align");a&&(i.text_align=a)}if(i.is_simple_text=!this.itemSupportsMarkups(n,t.type),t.settings){i.settings={};for(var l=0,c=t.settings.length;l<c;l++){var u=t.settings[l];i.settings[u.key]=u.value}}return i},parseImageItem:function(t,e,n){var i=e||{id:t.cid||""};return e||this._copyPrimitives(t,i),i.body=!0,i.type=t.type,i.href=t.href,i.is_image=!0,i.image=this.parseImage(t,n),i.src=s(i.image.image_url),i},makeAbsoluteURL:function(t){if(t&&this.rootURL&&!/^[^\:]{2,6}\:/.test(t)&&!/^\//.test(t)){var e="/"===this.rootURL.slice(-1)?"":"/";t=this.rootURL+e+t}return t},parseImage:function(t,e){var n={};this._copyPrimitives(t.image,n);var i=t.image,o=s(i?i.image_url:"");o&&(o=this.makeAbsoluteURL(o),this.rootPayload&&this.rootPayload.images&&(this.rootPayload.images[o]||(this.rootPayload.images.push(o),this.rootPayload.images[o]=!0))),n.image_url=o,n.src=o,n.url=o?"url("+o+")":"",n.image_width=i?i.image_width:0,n.image_height=i?i.image_height:0,n.image_width&&n.image_height&&(n.aspect_ratio=n.image_height/n.image_width*100);var r=this.getSettingByName(t.settings,"image_align");return(!r||r.search(/^\s*(?:(?:[0-9]*\.[0-9]+)|(?:[0-9]+))\%\s+(?:(?:[0-9]*\.[0-9]+)|(?:[0-9]+))\%\s*$/)<0)&&(r=this.defaultImageAlign),n.align=r,n.attribution=t.contributor_name,n.site=t.contributor_website,n},itemSupportsMarkups:function(t,e){if(!0==={p:!0,"ol.li":!0,"ul.li":!0}[e])return!0;if("img"==e){if(1==={content:1,"full-width":1,"card-flipbook":1,"split-layout":1,"column-layout":1,"card-layout":1}[t])return!0}return!1},parseContentText:function(t,e){var n=e.text,i=e.type;if(n&&this.itemSupportsMarkups(t,e.type)){var o=e.markups;o.sort(this._startIndexSort);var r=[];for(u=0;u<o.length;u++){var a=o[u],s=a.start_index,l=a.end_index;if(s!=l||"br"==i){var c=this.getMarkupStyleTags(a);r.push({tag:c.open,offset:s,index:u,type:"open"}),r.push({tag:c.close,offset:l,index:u,type:"close"})}}for(var u=0;u<r.length;u++)"close"==r[u].type&&""==r[u].tag&&r.splice(u,1);r.sort(this._offsetSort);var h=[],d=0;for(u=0;u<r.length;u++){var f=r[u];f.offset>d&&(h.push(this.getSubstring(n,d,f.offset,!0)),d=f.offset),h.push(f.tag)}return d<n.length&&h.push(this.getSubstring(n,d,n.length,!0)),h.join("")}return n||""},parseThemeForTemplate:function(t){var e={},n=o.isCustomThemeFormat(t);if(n)e=i.getCustomThemePayload(t);else{var r=o.convertToKebabCase(t.name||"Crisp");e.name=r}return t.fonts&&(e.fonts=t.fonts.slice()),t.font_includes?e.font_includes=a.map(t.font_includes,function(t){return{src:t.src,method:t.method,is_script:"script"===t.method,is_link:"link"===t.method,path:t.path}}):e.font_includes=n?i.getFontIncludes(t):[],e},_applyThemeSettings:function(t){var e=this._getSectionThemeSettings(this.rootPayload,t.type);e.layer&&(t.layer=e.layer),e.layerName&&(t.layerName=e.layerName),e.behavior&&(t.behavior=e.behavior)},getSettingByName:function(t,e){if(t&&e)for(var n=0,i=t.length;n<i;n++){var o=t[n];if(o.key===e)return o.value}return null},getSettingsValues:function(t){var e=[];if(!t)return e;for(var n=0,i=t.length;n<i;n++){var o=t[n];e.push(o.value)}return e},_copyPrimitives:function(t,e){for(var n in t){var i=t[n];"object"!=typeof i&&(e[n]=i)}return e},_simpleClone:function(t){var e={};for(var n in t){var i=t[n];e[n]=i&&"object"==typeof i?this._simpleClone(i):i}return e},_findFirstByType:function(t,e){if(!t)return null;for(var n=0,i=t.length;n<i;n++){var o=t[n];if(o.type===e)return o}return null},startIndexSort:function(t,e){var n=t.start_index-e.start_index;return 0===n&&(n=e.end_index-t.end_index),n},_offsetSort:function(t,e){if(t.offset==e.offset){if("open"==t.type&&"open"==e.type){if("<br>"==t.tag||"\n"==t.tag)return-1;if("<br>"==e.tag||"\n"==e.tag)return 1}return"close"==t.type&&"close"==e.type?e.index-t.index:t.index===e.index?"open"==t.type?-1:1:t.index-e.index}return t.offset-e.offset},getMarkupStyleTags:function(t){var e=t.type,n="",i=this.getURLInfo(s(t.href));return i.absoluteURL&&(n=' href="'+i.absoluteURL+'" target="_blank" rel="nofollow noreferrer"'),{open:"<"+e+n+">",close:"</"+e+">"}},entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},escapeHtml:function(t){var e=this.entityMap;return String(t).replace(/[&<>"'\/]/g,function(t){return e[t]})},getSubstring:function(t,e,n,i){var o=t.substring(e,n);return i?this.escapeHtml(o):o},getSectionIdFromType:function(t){var e=r.sectionTypeSettings[t];return e&&e.settingsName||t},_getSectionThemeSettings:function(t,e){var n=this.getSectionIdFromType(e),r={behavior:"default",layerName:i.isUnderSection[n]?"under":"over"};if(o.isBuiltInTheme(t.theme))r.behavior=(t.theme.name||"default")+"-"+n;else{var a=t.theme&&t.theme.section_settings,s=a&&a[n];s&&(r=s)}return r},_addSectionClass:function(t,e){if(t&&e){var n,i=t.settings;i||(t.settings=i=[]);for(var o=0,r=i.length;o<r;o++){var a=i[o];if("section_class"===a.key){n=a;break}}n||(n={key:"section_class",value:""},i.push(n));var s=n.value.split(/\s+/);s.push(e),n.value=s.join(" ")}},isFullWidthImageWithCaption:function(t){var e=null;return t&&"full-width"===t.type&&(e=t.content_items[0]),e&&"img"===e.type&&e.text},preprocessSections:function(t,e,n){var i=e.sections,o=i[i.length-1],r=e.author;(r&&(r.first_name||r.last_name)||e.appreciate_url)&&i.push({type:"author"}),e.credits&&i.push({type:"credits"}),t.brand&&i.unshift({type:"brand-header"}),n&&(t.brand?i.push({type:"brand-bumper"}):i.push({type:"bumper"}));for(var a={title:!0,zoom:!0,window:!0,"full-width":!0,banner:!0,"card-flipbook":!0,"split-layout":!0,"column-layout":!0,"card-layout":!0},s={content:!0,"photo-grid":!0},l={p:!0,blockquote:!0,h3:!0,h4:!0,"ul.li":!0,"ol.li":!0,a:!0},c=0,u=null,h="";c<i.length;){var d=i[c],f=d.type,p=i[c+1],g=p&&p.type||"",m="",v=null,_=d===o;if(a[f])a[g]&&(m="content-spacer",this.isFullWidthImageWithCaption(d)&&(m="content-item-spacer"),"under"===this._getSectionThemeSettings(t,f).layerName&&(m+=" top-shadow"),g&&"under"===this._getSectionThemeSettings(t,g).layerName&&(m+=" bottom-shadow"),c++,v={type:"spacer",settings:[{key:"section_class",value:m}]},i.splice(c,0,v));else if(s[f]){if(a[h]){if(a[g]){var y=d.content_items;1===y.length&&l[y[0].type]&&this._addSectionClass(d,"single-item-content-section")}this._addSectionClass(d,"large-content-spacing-top")}(a[g]||_)&&this._addSectionClass(d,"large-content-spacing-bottom")}var b=v||p,w=b&&b.type||"";"over"===this._getSectionThemeSettings(t,f).layerName?(h&&"under"===this._getSectionThemeSettings(t,h).layerName&&this._addSectionClass(d,"top-shadow"),w&&"under"===this._getSectionThemeSettings(t,w).layerName&&this._addSectionClass(d,"bottom-shadow")):"bumper"===f&&h&&"under"===this._getSectionThemeSettings(t,h).layerName&&this._addSectionClass(u,"bottom-shadow"),c++,u=v||d,h=v?v.type:f}return t},preprocessJSON:function(t){var e=null;t.theme&&((e=t.theme.section_settings)||(e=i.generateCustomThemeSectionSettings(),t.theme.section_settings=e)),e&&(e.bumper||(e.bumper={behavior:"default",layerName:"under"}),t.brand&&(e["brand-header"]||(e["brand-header"]={behavior:"brand-header",layerName:"over"}),e["brand-bumper"]||(e["brand-bumper"]={behavior:"brand-bumper",layerName:"under"})));for(var n=t.pages.length,o=0;o<n;o++)this.preprocessSections(t,t.pages[o],1===n);return t}}),a.extend(r,r.prototype);try{window.LucaJSONParser=r}catch(t){}t.exports&&(t.exports=r)},function(t,e,n){var i,o;i=[n(0),n(1)],void 0===(o=function(t,e){return{triggerSelect:function(t){t?void 0===t.selection&&(t.selection=this.model):t={selection:null},this.$el.trigger("select",[this,t])},triggerSelectNone:function(){this.triggerSelect()},simpleHandleModelSelect:function(t,e){e||(e={}),void 0===e.selection&&(e.selection=t),this.triggerSelect(e)}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7)],void 0===(o=function(t){var e={isAbsoluteURLRE:/^[^\:]{2,6}\:/,makeAbsoluteURL:function(e){if(e){var n=t.issueModel?t.issueModel.get("base_url"):"";if(n&&!this.isAbsoluteURLRE.test(e))e=n+("/"===n.slice(-1)?"":"/")+e}return e}};function n(t,e,n,i){this.left=t,this.top=e,this.width=n,this.height=i,this.update()}return n.prototype.update=function(t){return t&&(t.left&&(this.left+=t.left),t.top&&(this.top+=t.top),t.width&&(this.width+=t.width),t.height&&(this.height+=t.height)),this.right=this.left+this.width,this.bottom=this.top+this.height,this.area=this.width*this.height,this},n.prototype.getRect=function(){return{left:this.left,top:this.top,width:this.width,height:this.height}},n.fromRect=function(t){return new n(t.left,t.top,t.width,t.height)},n.fromEl=function(t){var e=t.getBoundingClientRect();return n.fromRect(e)},n.fromDocument=function(t){t||(t=document);var e=t.documentElement;return new n(0,0,e.clientWidth,e.clientHeight)},n.prototype.intersects=function(t){return this.left<=t.right&&t.left<=this.right&&this.top<=t.bottom&&t.top<=this.bottom},n.prototype.contains=function(t){return this.left<=t.left&&this.right>=t.right&&this.top<=t.top&&this.bottom>=t.bottom},n.prototype.getLargestRectangFromCover=function(t){if(!this.intersects(t))return this;var e=[];if(t.left>this.left&&t.left<this.right&&e.push(new n(this.left,this.top,t.left-this.left,this.height)),t.right<this.right&&t.right>this.left&&e.push(new n(t.right,this.top,this.right-t.right,this.height)),t.top>this.top&&t.top<this.bottom&&e.push(new n(this.left,this.top,this.width,t.top-this.top)),t.bottom<this.bottom&&t.bottom>this.top&&e.push(new n(this.left,t.bottom,this.width,this.bottom-t.bottom)),!e.length)return this;for(var i=e[0],o=1,r=e.length;o<r;o++)e[o].area>i.area&&(i=e[o]);return i},n.prototype.getOffsetYToCenter=function(t){return(this.top+this.bottom)/2-(t.top+t.bottom)/2},e.Rectang=n,t.Utils=e,e}.apply(e,i))||(t.exports=o)},,function(t,e,n){var i,o;i=[n(1),n(10),n(7),n(16)],void 0===(o=function(t,e,n,i){var o={localUpdates:"change add remove",descendantUpdates:"descendant:change descendant:add descendant:remove",collectionUpdates:"sort",triggerWithEventType:function(n){if(n){var i=0===n.indexOf("descendant:"),r=o.getOptions(arguments),a=!i&&r._eventType!==n;i&&!a||(a&&void 0!=r._eventType&&(r=arguments[arguments.length-1]=t.clone(r)),r._eventType=n),e.Model.prototype.trigger.apply(this,arguments)}},getOptions:function(n){var i=t.last(n);return(!t.isObject(i)||i instanceof e.Model||i instanceof e.Collection)&&(i={},Array.prototype.push.call(n,i)),i},propagateEvent:function(t,e){var n=o.getOptions(e),i="descendant";n._eventType&&0!==n._eventType.indexOf("descendant:")&&(i+=":"+n._eventType);var r=[i];r.push.apply(r,e),n._currentTarget=t,t.trigger.apply(t,r)}},r=e.Model.extend({_autoUpdateEnabled:!0,saveEnabled:!0,ownerIdName:"",jsonName:null,initialize:function(t,e){if(e&&e.childModelClass){var n=new a(null,{jsonName:e.childrenJSONName});this.children=this.initChildCollection(n,e.childModelClass)}this.listenTo(this,"remove",this._handleRemoved)},initSettings:function(){this.settings=new g(this),this.initChildCollection(this.settings.collection)},initChildCollection:function(t,e){e&&(t.model=e);var n=o.localUpdates+" "+o.descendantUpdates+" "+o.collectionUpdates;return this.listenTo(t,n,this._handleCollectionChanged),t},_handleCollectionChanged:function(){this._validateCollectionChange(arguments),this._autoUpdateEnabled&&this.update.apply(this,arguments),o.propagateEvent(this,arguments)},_handleRemoved:function(t,e,n){n&&n.keep||this.cleanup()},_validateCollectionChange:function(t){var n=t[0],i=t[1],o=n instanceof e.Model,r=i instanceof e.Collection;o&&r&&n.parent&&-1===n.parent.children.indexOf(n)&&n.setParent(null)},toJSON:function(t){t||(t={});var n=void 0===t.deep||t.deep,i=void 0===t.includeCID||t.includeCID,o=e.Model.prototype.toJSON.call(this);return i&&(o.cid=this.cid),n&&this.children&&this.children.toJSONInto(o,t),this.settings&&this.settings.toJSONInto(o,t),o},toJSONInto:function(t,e){this.jsonName&&(t[this.jsonName]=this.toJSON(e))},getAttributes:function(){var t={};for(var e in this._settingsLookup)t[e]=this.get(e);return t},enableAutoUpdate:function(){this._autoUpdateEnabled||(this._autoUpdateEnabled=!0,this.update())},disableAutoUpdate:function(){this._autoUpdateEnabled=!1},update:function(){},getOwner:function(){return this.getParent()},trigger:o.triggerWithEventType,triggerAll:function(t){this.trigger.apply(this,arguments),this.triggerAllChildren.apply(this,arguments)},triggerAllChildren:function(t){if(this.children)for(var e=this.children.models.slice(),n=0,i=e.length;n<i;n++){var o=e[n];o.triggerAll.apply(o,arguments)}},parent:null,lastParent:null,children:null,getRoot:function(){for(var t=this;t;){if(t.isRoot)return t;t=t.parent}return null},setParent:function(t){this.parent&&(this.lastParent=this.parent),this.parent=t},getParent:function(){return this.parent||this.lastParent},addChild:function(t,e){return this.addChildAt(t,this.children.length,e)},addChildAt:function(n,i,o){if(!n||n instanceof e.Model==!1){var r=n;if(!this.children.model)return null;n=new this.children.model(r,o)}var a=n.parent;if(a){if(a===this)return this.children.move(n,i,o)?n:null;a.removeChild(n,t.extend({keep:!0},o))}return n.setParent(this),i=this.children.validateNewIndex(i,!0),this.children.add(n,t.extend({at:i},o)),a||n._triggerDescendantChange(),n},_triggerDescendantChange:function(){if(this.children)for(var t=this.children,e=t.length,n=0;n<e;n++){var i=t.at(n);i.trigger("change",i,i.collection,{}),i._triggerDescendantChange()}},addChildBefore:function(t,e,n){var i=this.children.length;if(e){var o=this.children.indexOf(e);o>=0&&(i=o)}return this.addChildAt(t,i,n)},addChildAfter:function(t,e,n){var i=this.children.length;if(e){var o=this.children.indexOf(e);-1!==o&&(i=o+1)}return this.addChildAt(t,i,n)},getChildAt:function(t){if(!(t<0))return this.children.at(t)},getChildById:function(t){return this.children.get(t)},removeChild:function(t,e){return-1!==this.children.indexOf(t)?(t.setParent(null),this.children.remove(t,e),e&&e.keep||this.removeDescendants(t,e),t):null},removeDescendants:function(t,e){if(t.children)for(var n=t.children.length;n--;)t.removeChild(t.getChildAt(n))},remove:function(t){return this.parent?this.parent.removeChild(this,t):null},isFirstChild:function(){return this===this.parent.getChildAt(0)},isLastChild:function(){return this===this.parent.getChildAt(this.parent.children.length-1)},getPrevSibling:function(){var t=this.parent;if(t&&!this.isFirstChild()){var e=t.children.indexOf(this);return t.getChildAt(e-1)}return null},getNextSibling:function(){var t=this.parent;if(t&&!this.isLastChild()){var e=t.children.indexOf(this);return t.getChildAt(e+1)}return null},getIndex:function(){return this.parent?this.parent.children.indexOf(this):-1},eachChild:function(){return this.children.each.apply(this.children,arguments)},findChild:function(){return this.children.find.apply(this.children,arguments)},findFirstChildByType:function(t,e){for(var n=null,i=0,o=this.children.models.length;i<o;i++){var r=this.children.models[i];if(r.attributes.type===t){n=r;break}}return n||e&&e.orCreate&&(n=this.addChild({type:t})),n},findByCid:function(t){if(!this.children)return null;for(var e=0,n=this.children.models.length;e<n;e++){var i=this.children.models[e];if(i.cid===t)return i;if(i=i.findByCid(t))return i}return null},cleanup:function(){this.stopListening(),this.settings&&this.settings.stopListening()},destroy:function(t){return this.cleanup(),e.Model.prototype.destroy.call(this,t)}}),a=e.Collection.extend({jsonName:null,initialize:function(t,e){e&&e.jsonName&&(this.jsonName=e.jsonName)},trigger:o.triggerWithEventType,move:function(e,n,i){n=this.validateNewIndex(n,!1);var o=this.indexOf(e);if(-1!==o&&o!==n){this.remove(e,{silent:!0}),this.add(e,{at:n,silent:!0});var r=t.defaults({fromIndex:o,toIndex:n},i);return r.silent||(this.trigger("sort",this,r),e.trigger("move",e,this,r)),!0}return!1},validateNewIndex:function(t,e){var n=this.length;return e||n--,t<0?t=0:t>n&&(t=n),t},toJSONInto:function(t,e){var n=this.jsonName||this.model&&this.model.prototype.jsonName;if(n){for(var i=[],o=0,r=this.models.length;o<r;o++){var a=this.models[o];i.push(a.toJSON(e))}t[n]=i}}}),s=r.extend({isRoot:!0,theme:null,initialize:function(){this.articleAt=this.getChildAt,r.prototype.initialize.call(this,null,{childModelClass:l})},toJSON:function(t){var e=r.prototype.toJSON.call(this,t);return this.theme&&this.theme.toJSONInto(e,t),e}}),l=r.extend({jsonName:"pages",defaults:{type:"sections"},initialize:function(){this.sectionAt=this.getChildAt,r.prototype.initialize.call(this,null,{childModelClass:c})}}),c=r.extend({jsonName:"sections",defaults:{type:"default"},initialize:function(t,e){e||(e={}),e.childModelClass||(e.childModelClass=h),this.itemAt=this.getChildAt,this.initSettings(),r.prototype.initialize.call(this,t,e)}}),u=c.extend({addChildAt:function(t,e,n){return this._updateGroups("add",e,n&&n.groupIndex),c.prototype.addChildAt.apply(this,arguments)},removeChild:function(t,e,n){return this._updateGroups("remove",t.getIndex(),n&&n.groupIndex),c.prototype.removeChild.apply(this,arguments)},_updateGroups:function(t,e,n){var i=this.get("groups");if(i)for(var o="add"===t?1:-1,r=0,a=i.length;r<a;r++){var s=i[r],l=s.offset+s.count,c=l-1;if(e===l&&1===o){var u=r+1,h=i[u];h?(n===u?h.count+=o:(s.count+=o,h.offset+=o),r++):s.count+=o}else e>=s.offset&&e<=c?s.count+=o:e<s.offset&&(s.offset+=o)}}}),h=r.extend({jsonName:"content_items",_image:null,defaults:{text:""},initialize:function(){this.markupAt=this.getChildAt,this.initSettings(),r.prototype.initialize.call(this,null,{childModelClass:d})},toJSON:function(t){var e=r.prototype.toJSON.call(this,t);return this._image&&this._image.toJSONInto(e,t),e},setImage:function(t){t!==this._image&&(this._image&&this.stopListening(this._image),this._image=t,this._image&&(this._image.parent=this,this.listenTo(this._image,"change descendant:change",this._onImageChange)),this.trigger("change",this,{}))},getImage:function(){return this._image},getImageURL:function(){var t=this.getImage();return t&&t.get("image_url")||""},_onImageChange:function(t,e){o.propagateEvent(this,arguments)},getOwner:function(){var t=this.parent||this.lastParent;return t.parent||t.lastParent},cleanup:function(){return this.setImage(null),r.prototype.cleanup.call(this)}}),d=r.extend({jsonName:"markups",defaults:{start_index:0,end_index:0}}),f=r.extend({jsonName:"image",defaults:{image_url:null}}),p=r.extend({jsonName:"theme",isCustomThemeFormat:function(){return i.isCustomThemeFormat(this.attributes)},getCssClassName:function(){return i.getCssClassName(this.attributes)}}),g=function(t){this.parent=t,this._settingsLookup={},this.collection=new m(null,{parent:t}),this.listenTo(this.collection,"change",this._handleSettingsChanged),this.listenTo(this.collection,"remove",this._handleSettingsChanged)};t.extend(g.prototype,e.Events,{jsonName:"settings",toJSON:function(t){var e=[];for(var n in this._settingsLookup)e.push({key:n,value:this.get(n)});return e},toJSONInto:r.prototype.toJSONInto,has:function(t){return void 0!=this._settingsLookup[t]},set:function(t,e,n){var i=this._settingsLookup[t];return i||((i=new v(null,{collection:this.collection})).set("key",t),this.collection.add(i,{silent:!0}),this._settingsLookup[t]=i),void 0!=n&&i.set("id",n),i.set("value",e)},get:function(t){var e=this._settingsLookup[t];if(e)return e.get("value")},getModel:function(t){return this._settingsLookup[t]},clear:function(t){var e=this._settingsLookup[t];this._settingsLookup[t]=void 0,this.collection.remove(e)},unset:function(t){return this.clear(t)},copyFrom:function(t){var e=t._settingsLookup;for(var n in e)this.set(n,t.get(n))},_handleSettingsChanged:function(){var t=["change"];t.push.apply(t,arguments),this.trigger.apply(this,t)}});var m=a.extend({initialize:function(t,e){this.parent=e.parent,this.model=v}}),v=e.Model.extend({initialize:function(t,e){this.parent=this.collection?this.collection.parent:null},setParent:function(t){this.parent=t}});n.EventsUtils=o,n.IssueModel=s,n.ArticleModel=l,n.SectionModel=c,n.GroupedSectionModel=u,n.ContentItemModel=h,n.MarkupModel=d,n.SettingsCollection=m,n.SettingModel=v,n.ImageModel=f,n.ThemeModel=p}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(7),n(18),n(137),n(153),n(168),n(170),n(171),n(172),n(15)],void 0===(o=function(t,e,n,i,o,r,a,s,l,c,u){var h=o.extend({template:new i({id:"content-section-template"}),events:{strictclick:"_handleClick","strictclick .insert-before-link":"_handleInsertLink","balloon-select .photo-button.section-level-balloon":"_handleInsertPhoto","balloon-select .text-button.section-level-balloon":"_handleInsertText","balloon-select .call-to-action-button.section-level-balloon":"_handleInsertCallToActionButton","balloon-select .embedded-link-button.section-level-balloon":"_handleInsertEmbeddedLink","balloon-select .photo-grid-button":"_handleInsertPhotoGrid","balloon-select .card-flipbook-button":"_handleInsertCardFlipbook","balloon-select .split-layout-button":"_handleInsertSplitLayoutSection"},insertButtons:["photo","text","link","embedded-link","photogrid","slideshow","split-layout"],backgroundButtons:["focalpoint","replace","delete"],articleModel:null,initialize:function(t){o.prototype.initialize.call(this),this.contentItemViewDict={},t.insertButtons&&(this.insertButtons=t.insertButtons),t.isPlaceholder&&(this.isPlaceholder=!0),this.articleModel=t.articleModel,this.backgroundModel=null,this.listenTo(this.model.children,"add",this.addContentItem),this.listenTo(this.model.children,"remove",this.removeContentItem),this.listenTo(this.model.children,"change",this.updateContentItem),this.listenTo(this.model,"change descendant:change descendant:add",this.render),this._create(t),this._createBalloons(t)},_create:function(t){if(this.template){var e=this.model.getRoot();!e&&this.articleModel&&(e=this.articleModel.getRoot()),this.setElement(this.template.$render(this.model,null,{issueModel:e}))}this.isPlaceholder&&this.$el.addClass("placeholder"),this.$el.attr("data-cid",this.model.cid),this.$el.data("view",this),this.$insertLink=n.create$Element("a",{href:"#",class:"insert-before-link plus-button-small"}),this.$insertLink.data("view",this),this.$itemContainer=this.$(".content-container").empty().append(this.$insertLink),this._createChildren(t),o.prototype._create.apply(this,arguments)},_createChildren:function(t){this.updateBackgroundImage();for(var e=0;e<this.model.children.length;e++)if(0!==e||!this.backgroundModel){var n=this.model.getChildAt(e);this.insertContentItemBefore(n,null,t)}},_createBalloons:function(t){this.insertBalloon=new n.ContextBalloonView({el:this.$insertLink,position:{percentX:.5,percentY:.5,offsetY:-17},buttons:this.insertButtons,addedButtonClass:"section-level-balloon"})},getSourceForDrop:function(e){var i,o="prependToSection",r=this.model;if(this.isPlaceholder){var a=this.$el.prev().data("view");a?(o="insertSection",r=a.model):r=null}else"card-flipbook"===this.model.get("type")?(o="insert",r=this.model.getChildAt(this.group.offset)):t(e).hasClass("section-background")?this.backgroundModel?(o="update",r=this.backgroundModel):(o="prependToSection",i="background"):this.backgroundModel&&(o="insert",r=this.backgroundModel);return r&&n.getSourceStrForModel(o,r,i)},_handleInsertLink:function(e){return this.scrollInsertLinkIntoView(t(e.target)),this.insertBalloon.toggle(!1)?this.triggerSelect({selection:"PENDING"}):this.triggerSelectNone(),!1},_handleClick:function(e){if(!t(e.target).closest(".editable-region").length)return this.triggerSelectNone(),!1},_handleInsertPhoto:function(){if(this.isPlaceholder){var t=this.$el.prev().data("view").model;this.triggerSelect({selection:t,type:"img",action:"insertSection"})}else this.backgroundModel?this.$el.trigger("select",[this,{selection:this.backgroundModel,type:"img",action:"insert"}]):this.triggerSelect({type:"img",action:"prependToSection"});this.$el.trigger("showImagePicker",[this]),this.insertBalloon.activate(null)},_handleInsertText:function(){if(this.isPlaceholder){var t=this.$el.prev().data("view").model;this.$el.trigger("insertDefaultSection",[this,t,"p"])}else this.backgroundModel?this.$el.trigger("insertItemAfter",[this,this.backgroundModel,"p"]):this.$el.trigger("prependNewItemToSection",[this,this.model,"p"]);this.insertBalloon.hide()},_handleInsertPhotoGrid:function(t){return this._requestPhotoEditor("photo-grid"),!1},_handleInsertCardFlipbook:function(t){return this._requestPhotoEditor("card-flipbook"),!1},_handleInsertSplitLayoutSection:function(t){var e=this.model,n="insertBeforeSection";this.isPlaceholder&&(e=this.$el.prev().data("view").model,n="insertAfterSection"),this.$el.trigger("insertSplitLayoutSection",[this,n,e]),this.insertBalloon.hide()},_requestPhotoEditor:function(t){var e=this.model,n="insertBeforeSection";this.isPlaceholder&&(e=this.$el.prev().data("view").model,n="insertAfterSection"),this.$el.trigger("insertPhotoCollection",[this,t,n,e]),this.insertBalloon.hide()},_handleInsertPhotoStack:function(){this.insertBalloon.hide()},_triggerLinkInsert:function(t){this.$el.trigger("hideImagePicker",[this]);var e={embedded:t};if(this.isPlaceholder){var n=this.$el.prev().data("view").model;this.$el.trigger("insertDefaultSection",[this,n,"a",e])}else this.backgroundModel?this.$el.trigger("insertItemAfter",[this,this.backgroundModel,"a",e]):this.$el.trigger("prependNewItemToSection",[this,this.model,"a",e]);this.insertBalloon.hide()},_handleInsertCallToActionButton:function(){this._triggerLinkInsert(!1)},_handleInsertEmbeddedLink:function(){this._triggerLinkInsert(!0)},_handleDeleteSection:function(t){n.NativeConfirm.confirm({title:u.getString("editor.dialogs.content-delete.title"),content:u.getString("editor.dialogs.content-delete.text"),buttons:[u.getString("editor.common.cancel"),u.getString("editor.dialogs.content-delete.confirm")],buttonOptions:[null,{style:"destructive"}]},function(t){switch(t.selectedIndex){case 1:this.$el.trigger("deleteSection",[{section:this.model}]),this.insertBalloon.hideAll()}}.bind(this))},_handleOverlayToggle:function(t){var e=this.model.settings.get("background_type")||"none",n=this.model.settings.get("background_overlay_type")||"none",i="img"===e&&"none"===n?"dark":"none";i!==n&&this.$el.trigger("updateSettingValue",[this.model,"background_overlay_type",i])},scrollSectionIntoView:function(e){e=t.extend({section:this.$el,method:"nearest",ignoreWhenFullyVisible:!0,animate:!0},e),this.$el.trigger("scrollSectionIntoView",e)},scrollInsertLinkIntoView:function(t,e){this.scrollSectionIntoView({marginTop:115,el:t})},insertContentItemBefore:function(t,e,n){var i,o=t.get("type"),l={model:t,intent:n&&n.intent,insertButtons:this.insertButtons};switch(o){case"img":i=new r(l);break;case"a":i=new a(l);break;default:i=new s(l)}var c=null,u=this.contentItemViewDict[this._getSiblingCID(t,-1)];c=e?this.contentItemViewDict[e.cid]:this.contentItemViewDict[this._getSiblingCID(t,1)];var h=u?u.model.get("type"):null,d=c?c.model.get("type"):null;"ol.li"==o||"ul.li"==o?o==h||o==d?this._join(u,c,i):u&&c&&h==d&&o!=h?(this._split(u,c),this._insert(c,i)):this._insert(c,i):(u&&u.isListItem()&&c&&c.isListItem()&&h==d&&this._split(u,c),this._insert(c,i)),this.contentItemViewDict[t.cid]=i,this.dispatchAdjustVisuals()},_insert:function(t,e){var n=e;if(e.isListItem()){var i=new l({listType:e.model.get("type").split(".")[0],insertButtons:e.insertButtons});i.insertListItemViewBefore(e),n=i}t&&t.listView&&(t=t.listView),this._addView(n,t)},_join:function(t,e,n){var i=t?t.model.get("type"):null,o=e?e.model.get("type"):null,r=n?n.model.get("type"):null;o&&o==r?e.listView.insertListItemViewBefore(n,e):i&&i==r&&t.listView.appendListItemView(n)},_split:function(t,e){var n=t.model.get("type"),i=new l({listType:n.split(".")[0],insertButtons:t.insertButtons});this._addView(i,e.listView);for(var o=t.listView.$el.find(".content-item"),r=0;r<o.length;r++){var a=o.eq(r).data("view");if(i.appendListItemView(a),a==t)break}},_merge:function(t,e){if(t&&e&&t.listView&&e.listView&&t.listView!=e.listView&&t.listView.listType==e.listView.listType){for(var n=e.listView,i=n.$el.find(".content-item"),o=0;o<i.length;o++){var r=i.eq(o).data("view");t.listView.appendListItemView(r)}n.remove()}},_cleanupListView:function(t){t&&0===t.$(".content-item").length&&t.remove()},_getSiblingCID:function(t,e){var n=this.model.children.indexOf(t),i=this.model.getChildAt(n+e);return i?i.cid:-1},_addView:function(t,e){e?t.$el.insertBefore(e.$el):this.$itemContainer.append(t.$el)},removeContentItem:function(t,e,n){if(t===this.backgroundModel)return this.updateBackgroundImage(),void this.render();var i=t.cid,o=t.get("type"),r=this.contentItemViewDict[i];if(r){var a=n.index>0?this.contentItemViewDict[e.models[n.index-1].cid]:null,s=n.index<e.length?this.contentItemViewDict[e.models[n.index].cid]:null;"ol.li"==o||"ul.li"==o?r.listView.removeListItemView(r):r.remove(),this._merge(a,s),delete this.contentItemViewDict[i],this.dispatchAdjustVisuals()}},addContentItem:function(t,e,n){if(n&&"background"===n.intent)this.$el.trigger("updateSettingValue",[this.model,"background_overlay_type","dark"]),this.updateBackgroundImage();else{var i=this.model.getChildAt(n.at+1);this.insertContentItemBefore(t,i,n)}},updateBackgroundImage:function(){var t,e=this._getBackgroundModel();e?e!==this.backgroundModel&&(t=this.backgroundModel,this.backgroundModel=e,this.listenTo(e,"select",this.simpleHandleModelSelect)):(t=this.backgroundModel,this.backgroundModel=null,this.$el.trigger("updateSettingValue",[this.model,"background_type","none"])),t&&this.stopListening(t,"select",this.simpleHandleModelSelect),this.$el.toggleClass("has-background",!!this.$sectionOptsButton)},updateContentItem:function(t,e,n){if(t.changed.type){var i=t.previousAttributes().type.split(".")[0],o=t.get("type").split(".")[0],r="ol"==i||"ul"==i,a="ol"==o||"ul"==o;if(r||a){var s=this.contentItemViewDict[this._getSiblingCID(t,-1)],l=this.contentItemViewDict[t.cid],c=this.contentItemViewDict[this._getSiblingCID(t,1)],u=s?s.listView:null,h=l?l.listView:null,d=c?c.listView:null,f=s?s.model.get("type").split(".")[0]:null,p=c?c.model.get("type").split(".")[0]:null,g="ol"==f||"ul"==f;l.isChangingType=!0,r&&a?f==p&&g&&f!=o?(this._split(s,c),this._insert(c,l)):f==o||p==o?(this._join(s,c,l),this._merge(s,c)):this._insert(c,l):r&&!a?(l.listView=null,f==p&&g&&this._split(s,c),this._insert(c,l),h._refreshModel()):!r&&a&&(f==p&&f==o?(this._join(s,c,l),this._merge(s,c)):f==o||p==o?this._join(s,c,l):this._insert(c,l)),l.isChangingType=!1,this._cleanupListView(h),this._cleanupListView(u),this._cleanupListView(d),this.dispatchAdjustVisuals()}}},_getPayload:function(){return this.template.getPayload(this.model)},_getPayloadURL:function(t){var e=t.image&&t.image.url||"none";return e=e.replace(/\+.*\./g,".")},_getSectionSizing:function(){for(var t=this.$el[0].classList,e=0;e<t.length;e++){var n=t[e];if(-1!=n.search(/^height-(natural|[0-9]+)$/))return n.replace(/^height-/,"")}return"natural"},_getBackgroundModel:function(){if(this.hasSectionOptionBackground()){var t=this.model.findFirstChildByType("img");if(t&&0===t.getIndex())return t}return null},render:function(){var t=this.model.settings.get("background_overlay_type")||"dark";if(this.$el.removeClass("background-overlay-dark background-overlay-darker background-overlay-light background-overlay-lighter"),this.hasSectionOptionBackground()){var e=this._getPayload(),n=this.$image.css("background-image")||"none",i=e.image&&e.image.src,o=this._getPayloadURL(e);if(o!==n){var r=function(){var t=this._getPayload();this._getPayloadURL(t)===o&&(this.$image.css("background-image",o),this.$el.addClass("background-image-overrides"),this.$el.removeClass("empty-image"))}.bind(this);"none"===o?(r(),this.$el.addClass("empty-image")):this._preloadImage(i,r)}else o&&"none"!==o&&this.$el.removeClass("empty-image");var a=e.image?e.image.align:"50% 50%";this.$image.css("background-position",a),"none"!==t&&this.$el.addClass("background-overlay-"+t),this.backgroundModel&&this.updateLoadingSpinner(this.$image.closest(".section-background"),this.backgroundModel)}else this.$(".section-background-image").attr("style",""),this.$el.removeClass("background-image-overrides").removeClass("background-overlay-"+t);var s=this._getSectionSizing(),l=this.model.settings.get("section_sizing")||"natural";return s!=l&&(this.$el.removeClass("height-"+s),this.$el.addClass("height-"+l),this.dispatchAdjustVisuals()),this},remove:function(){return this.insertBalloon.remove(),o.prototype.remove.call(this)}});return e.extend(h.prototype,c),n.SingleColumnSectionView=h,h}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1)],void 0===(o=function(t,e){return{_isBlockingScroll:!1,_blockingScrollMoveHandler:null,_blockingScrollUpHandler:null,initialize:function(){this._handleBlockingScrollMove=this._handleBlockingScrollMove.bind(this),this._handleBlockingScrollUp=this._handleBlockingScrollUp.bind(this)},blockDragScrolling:function(t,e){this._blockingScrollMoveHandler=t,this._blockingScrollUpHandler=e,this._isBlockingScroll||(this.$el.on("vmousemove",this._handleBlockingScrollMove).on("vmouseup",this._handleBlockingScrollUp),this._isBlockingScroll=!0)},unblockDragScrolling:function(){this._blockingScrollMoveHandler=null,this._blockingScrollUpHandler=null,this._isBlockingScroll&&(this.$el.off("vmousemove",this._handleBlockingScrollMove).off("vmouseup",this._handleBlockingScrollUp),this._isBlockingScroll=!1)},_handleBlockingScrollMove:function(t){return this._blockingScrollMoveHandler?this._blockingScrollMoveHandler.call(this,t):this._preventEventDefault(t)},_handleBlockingScrollUp:function(t){var e=this._blockingScrollUpHandler;if(this.unblockDragScrolling(),e)return e.call(this,t)},_preventEventDefault:function(t){return t&&(t.preventDefault(),t.stopPropagation()),!1}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7),n(18),n(119)],void 0===(o=function(t,e,n,i,o,r){var a=n.View.extend({template:new o({id:"content-body-template"}),className:"content-item",events:{"strictclick .insert-after-link":"_handleInsertLink","balloon-select .photo-button":"_handleInsertPhoto","balloon-select .text-button":"_handleInsertText","balloon-select .photo-stack-button":"_handleInsertPhotoStack","balloon-select .call-to-action-button":"_handleInsertCallToActionButton","balloon-select .embedded-link-button":"_handleInsertEmbeddedLink","balloon-select .photo-grid-button":"_handleInsertPhotoGrid","balloon-select .card-flipbook-button":"_handleInsertCardFlipbook","balloon-select .split-layout-button":"_handleInsertSplitLayoutSection"},insertButtons:["photo","text","link","embedded-link","photogrid","slideshow"],initialize:function(t){t.insertButtons&&(this.insertButtons=t.insertButtons);var e=0;this.model&&(e=this.model.cid,this.listenTo(this.model,"change",this.render),this.listenTo(this.model.settings,"change",this.render)),this.placeholder=t.placeholder,this.$el.attr("data-cid",e),this.$el.data("view",this),this.$insertLink=i.create$Element("a",{href:"#",class:"insert-after-link plus-button-small","data-cid":e}),this.$insertLink.data("view",this),this.insertBalloon=new i.ContextBalloonView({el:this.$insertLink,position:{percentX:.5,percentY:.5,offsetY:-17},buttons:this.insertButtons})},getSourceForDrop:function(t){return i.getSourceStrForModel("insert",this.model)},_handleInsertLink:function(e){return this.$el.closest(".section").data("view").scrollInsertLinkIntoView(t(e.target)),this.insertBalloon.toggle(!1)?this.triggerSelect({selection:"PENDING"}):this.triggerSelectNone(),!1},_handleInsertPhoto:function(){this.triggerSelect({type:"img",action:"insert"}),this.$el.trigger("showImagePicker",[this]),this.insertBalloon.activate(null)},_handleInsertText:function(){this.$el.trigger("insertItemAfter",[this,this.model,"p"]),this.insertBalloon.hide()},_handleInsertPhotoGrid:function(t){return this.$el.trigger("insertPhotoCollection",[this,"photo-grid","insertAfterItem",this.model]),this.insertBalloon.hide(),!1},_handleInsertCardFlipbook:function(t){return this.$el.trigger("insertPhotoCollection",[this,"card-flipbook","insertAfterItem",this.model]),this.insertBalloon.hide(),!1},_handleInsertSplitLayoutSection:function(t){return this.$el.trigger("insertSplitLayoutSection",[this,"insertAfterItem",this.model]),this.insertBalloon.hide(),!1},_triggerLinkInsert:function(t){this.$el.trigger("hideImagePicker",[this]);var e={embedded:t};this.$el.trigger("insertItemAfter",[this,this.model,"a",e]),this.insertBalloon.hide()},_handleInsertCallToActionButton:function(){this._triggerLinkInsert(!1)},_handleInsertEmbeddedLink:function(){this._triggerLinkInsert(!0)},isListItem:function(){return!1},dispatchAdjustVisuals:function(){this.$el.trigger("adjustVisuals")},render:function(){return this},remove:function(){return this.insertBalloon.remove(),n.View.prototype.remove.call(this)}});return e.defaults(a.prototype,r),a}.apply(e,i))||(t.exports=o)},,function(t,e,n){(function(t,i){var o;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var r,a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",d=1,f=2,p=4,g=1,m=2,v=1,_=2,y=4,b=8,w=16,S=32,x=64,C=128,T=256,I=512,k=30,A="...",P=800,E=16,$=1,D=2,M=1/0,O=9007199254740991,B=1.7976931348623157e308,N=NaN,H=4294967295,R=H-1,L=H>>>1,V=[["ary",C],["bind",v],["bindKey",_],["curry",b],["curryRight",w],["flip",I],["partial",S],["partialRight",x],["rearg",T]],z="[object Arguments]",F="[object Array]",W="[object AsyncFunction]",U="[object Boolean]",j="[object Date]",G="[object DOMException]",q="[object Error]",Y="[object Function]",X="[object GeneratorFunction]",Q="[object Map]",K="[object Number]",Z="[object Null]",J="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",it="[object String]",ot="[object Symbol]",rt="[object Undefined]",at="[object WeakMap]",st="[object WeakSet]",lt="[object ArrayBuffer]",ct="[object DataView]",ut="[object Float32Array]",ht="[object Float64Array]",dt="[object Int8Array]",ft="[object Int16Array]",pt="[object Int32Array]",gt="[object Uint8Array]",mt="[object Uint8ClampedArray]",vt="[object Uint16Array]",_t="[object Uint32Array]",yt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,St=/&(?:amp|lt|gt|quot|#39);/g,xt=/[&<>"']/g,Ct=RegExp(St.source),Tt=RegExp(xt.source),It=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Et=/^\w*$/,$t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(Dt.source),Ot=/^\s+|\s+$/g,Bt=/^\s+/,Nt=/\s+$/,Ht=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Rt=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,Vt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/\\(\\)?/g,Ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wt=/\w*$/,Ut=/^[-+]0x[0-9a-f]+$/i,jt=/^0b[01]+$/i,Gt=/^\[object .+?Constructor\]$/,qt=/^0o[0-7]+$/i,Yt=/^(?:0|[1-9]\d*)$/,Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qt=/($^)/,Kt=/['\n\r\u2028\u2029\\]/g,Zt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Jt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Jt+"]",ne="["+Zt+"]",ie="\\d+",oe="[\\u2700-\\u27bf]",re="[a-z\\xdf-\\xf6\\xf8-\\xff]",ae="[^\\ud800-\\udfff"+Jt+ie+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",se="\\ud83c[\\udffb-\\udfff]",le="[^\\ud800-\\udfff]",ce="(?:\\ud83c[\\udde6-\\uddff]){2}",ue="[\\ud800-\\udbff][\\udc00-\\udfff]",he="[A-Z\\xc0-\\xd6\\xd8-\\xde]",de="(?:"+re+"|"+ae+")",fe="(?:"+he+"|"+ae+")",pe="(?:"+ne+"|"+se+")"+"?",ge="[\\ufe0e\\ufe0f]?"+pe+("(?:\\u200d(?:"+[le,ce,ue].join("|")+")[\\ufe0e\\ufe0f]?"+pe+")*"),me="(?:"+[oe,ce,ue].join("|")+")"+ge,ve="(?:"+[le+ne+"?",ne,ce,ue,te].join("|")+")",_e=RegExp("['’]","g"),ye=RegExp(ne,"g"),be=RegExp(se+"(?="+se+")|"+ve+ge,"g"),we=RegExp([he+"?"+re+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ee,he,"$"].join("|")+")",fe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ee,he+de,"$"].join("|")+")",he+"?"+de+"+(?:['’](?:d|ll|m|re|s|t|ve))?",he+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ie,me].join("|"),"g"),Se=RegExp("[\\u200d\\ud800-\\udfff"+Zt+"\\ufe0e\\ufe0f]"),xe=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ce=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Te=-1,Ie={};Ie[ut]=Ie[ht]=Ie[dt]=Ie[ft]=Ie[pt]=Ie[gt]=Ie[mt]=Ie[vt]=Ie[_t]=!0,Ie[z]=Ie[F]=Ie[lt]=Ie[U]=Ie[ct]=Ie[j]=Ie[q]=Ie[Y]=Ie[Q]=Ie[K]=Ie[J]=Ie[et]=Ie[nt]=Ie[it]=Ie[at]=!1;var ke={};ke[z]=ke[F]=ke[lt]=ke[ct]=ke[U]=ke[j]=ke[ut]=ke[ht]=ke[dt]=ke[ft]=ke[pt]=ke[Q]=ke[K]=ke[J]=ke[et]=ke[nt]=ke[it]=ke[ot]=ke[gt]=ke[mt]=ke[vt]=ke[_t]=!0,ke[q]=ke[Y]=ke[at]=!1;var Ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pe=parseFloat,Ee=parseInt,$e="object"==typeof t&&t&&t.Object===Object&&t,De="object"==typeof self&&self&&self.Object===Object&&self,Me=$e||De||Function("return this")(),Oe=e&&!e.nodeType&&e,Be=Oe&&"object"==typeof i&&i&&!i.nodeType&&i,Ne=Be&&Be.exports===Oe,He=Ne&&$e.process,Re=function(){try{var t=Be&&Be.require&&Be.require("util").types;return t||He&&He.binding&&He.binding("util")}catch(t){}}(),Le=Re&&Re.isArrayBuffer,Ve=Re&&Re.isDate,ze=Re&&Re.isMap,Fe=Re&&Re.isRegExp,We=Re&&Re.isSet,Ue=Re&&Re.isTypedArray;function je(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ge(t,e,n,i){for(var o=-1,r=null==t?0:t.length;++o<r;){var a=t[o];e(i,a,n(a),t)}return i}function qe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Ye(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Xe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Qe(t,e){for(var n=-1,i=null==t?0:t.length,o=0,r=[];++n<i;){var a=t[n];e(a,n,t)&&(r[o++]=a)}return r}function Ke(t,e){return!!(null==t?0:t.length)&&ln(t,e,0)>-1}function Ze(t,e,n){for(var i=-1,o=null==t?0:t.length;++i<o;)if(n(e,t[i]))return!0;return!1}function Je(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}function tn(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t}function en(t,e,n,i){var o=-1,r=null==t?0:t.length;for(i&&r&&(n=t[++o]);++o<r;)n=e(n,t[o],o,t);return n}function nn(t,e,n,i){var o=null==t?0:t.length;for(i&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function on(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var rn=dn("length");function an(t,e,n){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=n,!1}),i}function sn(t,e,n,i){for(var o=t.length,r=n+(i?1:-1);i?r--:++r<o;)if(e(t[r],r,t))return r;return-1}function ln(t,e,n){return e==e?function(t,e,n){var i=n-1,o=t.length;for(;++i<o;)if(t[i]===e)return i;return-1}(t,e,n):sn(t,un,n)}function cn(t,e,n,i){for(var o=n-1,r=t.length;++o<r;)if(i(t[o],e))return o;return-1}function un(t){return t!=t}function hn(t,e){var n=null==t?0:t.length;return n?gn(t,e)/n:N}function dn(t){return function(e){return null==e?r:e[t]}}function fn(t){return function(e){return null==t?r:t[e]}}function pn(t,e,n,i,o){return o(t,function(t,o,r){n=i?(i=!1,t):e(n,t,o,r)}),n}function gn(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function mn(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function vn(t){return function(e){return t(e)}}function _n(t,e){return Je(e,function(e){return t[e]})}function yn(t,e){return t.has(e)}function bn(t,e){for(var n=-1,i=t.length;++n<i&&ln(e,t[n],0)>-1;);return n}function wn(t,e){for(var n=t.length;n--&&ln(e,t[n],0)>-1;);return n}var Sn=fn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),xn=fn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Cn(t){return"\\"+Ae[t]}function Tn(t){return Se.test(t)}function In(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function kn(t,e){return function(n){return t(e(n))}}function An(t,e){for(var n=-1,i=t.length,o=0,r=[];++n<i;){var a=t[n];a!==e&&a!==h||(t[n]=h,r[o++]=n)}return r}function Pn(t,e){return"__proto__"==e?r:t[e]}function En(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function $n(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Dn(t){return Tn(t)?function(t){var e=be.lastIndex=0;for(;be.test(t);)++e;return e}(t):rn(t)}function Mn(t){return Tn(t)?function(t){return t.match(be)||[]}(t):function(t){return t.split("")}(t)}var On=fn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Bn=function t(e){var n=(e=null==e?Me:Bn.defaults(Me.Object(),e,Bn.pick(Me,Ce))).Array,i=e.Date,o=e.Error,Zt=e.Function,Jt=e.Math,te=e.Object,ee=e.RegExp,ne=e.String,ie=e.TypeError,oe=n.prototype,re=Zt.prototype,ae=te.prototype,se=e["__core-js_shared__"],le=re.toString,ce=ae.hasOwnProperty,ue=0,he=function(){var t=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),de=ae.toString,fe=le.call(te),pe=Me._,ge=ee("^"+le.call(ce).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=Ne?e.Buffer:r,ve=e.Symbol,be=e.Uint8Array,Se=me?me.allocUnsafe:r,Ae=kn(te.getPrototypeOf,te),$e=te.create,De=ae.propertyIsEnumerable,Oe=oe.splice,Be=ve?ve.isConcatSpreadable:r,He=ve?ve.iterator:r,Re=ve?ve.toStringTag:r,rn=function(){try{var t=Lr(te,"defineProperty");return t({},"",{}),t}catch(t){}}(),fn=e.clearTimeout!==Me.clearTimeout&&e.clearTimeout,Nn=i&&i.now!==Me.Date.now&&i.now,Hn=e.setTimeout!==Me.setTimeout&&e.setTimeout,Rn=Jt.ceil,Ln=Jt.floor,Vn=te.getOwnPropertySymbols,zn=me?me.isBuffer:r,Fn=e.isFinite,Wn=oe.join,Un=kn(te.keys,te),jn=Jt.max,Gn=Jt.min,qn=i.now,Yn=e.parseInt,Xn=Jt.random,Qn=oe.reverse,Kn=Lr(e,"DataView"),Zn=Lr(e,"Map"),Jn=Lr(e,"Promise"),ti=Lr(e,"Set"),ei=Lr(e,"WeakMap"),ni=Lr(te,"create"),ii=ei&&new ei,oi={},ri=ua(Kn),ai=ua(Zn),si=ua(Jn),li=ua(ti),ci=ua(ei),ui=ve?ve.prototype:r,hi=ui?ui.valueOf:r,di=ui?ui.toString:r;function fi(t){if(ks(t)&&!ms(t)&&!(t instanceof vi)){if(t instanceof mi)return t;if(ce.call(t,"__wrapped__"))return ha(t)}return new mi(t)}var pi=function(){function t(){}return function(e){if(!Is(e))return{};if($e)return $e(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function gi(){}function mi(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function vi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=H,this.__views__=[]}function _i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function yi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function bi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function wi(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new bi;++e<n;)this.add(t[e])}function Si(t){var e=this.__data__=new yi(t);this.size=e.size}function xi(t,e){var n=ms(t),i=!n&&gs(t),o=!n&&!i&&bs(t),r=!n&&!i&&!o&&Bs(t),a=n||i||o||r,s=a?mn(t.length,ne):[],l=s.length;for(var c in t)!e&&!ce.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Gr(c,l))||s.push(c);return s}function Ci(t){var e=t.length;return e?t[So(0,e-1)]:r}function Ti(t,e){return sa(ir(t),Oi(e,0,t.length))}function Ii(t){return sa(ir(t))}function ki(t,e,n){(n===r||ds(t[e],n))&&(n!==r||e in t)||Di(t,e,n)}function Ai(t,e,n){var i=t[e];ce.call(t,e)&&ds(i,n)&&(n!==r||e in t)||Di(t,e,n)}function Pi(t,e){for(var n=t.length;n--;)if(ds(t[n][0],e))return n;return-1}function Ei(t,e,n,i){return Li(t,function(t,o,r){e(i,t,n(t),r)}),i}function $i(t,e){return t&&or(e,il(e),t)}function Di(t,e,n){"__proto__"==e&&rn?rn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Mi(t,e){for(var i=-1,o=e.length,a=n(o),s=null==t;++i<o;)a[i]=s?r:Zs(t,e[i]);return a}function Oi(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function Bi(t,e,n,i,o,a){var s,l=e&d,c=e&f,u=e&p;if(n&&(s=o?n(t,i,o,a):n(t)),s!==r)return s;if(!Is(t))return t;var h=ms(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ce.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return ir(t,s)}else{var g=Fr(t),m=g==Y||g==X;if(bs(t))return Ko(t,l);if(g==J||g==z||m&&!o){if(s=c||m?{}:Ur(t),!l)return c?function(t,e){return or(t,zr(t),e)}(t,function(t,e){return t&&or(e,ol(e),t)}(s,t)):function(t,e){return or(t,Vr(t),e)}(t,$i(s,t))}else{if(!ke[g])return o?t:{};s=function(t,e,n){var i=t.constructor;switch(e){case lt:return Zo(t);case U:case j:return new i(+t);case ct:return function(t,e){var n=e?Zo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ut:case ht:case dt:case ft:case pt:case gt:case mt:case vt:case _t:return Jo(t,n);case Q:return new i;case K:case it:return new i(t);case et:return function(t){var e=new t.constructor(t.source,Wt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case nt:return new i;case ot:return function(t){return hi?te(hi.call(t)):{}}(t)}}(t,g,l)}}a||(a=new Si);var v=a.get(t);if(v)return v;if(a.set(t,s),Ds(t))return t.forEach(function(i){s.add(Bi(i,e,n,i,t,a))}),s;if(As(t))return t.forEach(function(i,o){s.set(o,Bi(i,e,n,o,t,a))}),s;var _=h?r:(u?c?Dr:$r:c?ol:il)(t);return qe(_||t,function(i,o){_&&(i=t[o=i]),Ai(s,o,Bi(i,e,n,o,t,a))}),s}function Ni(t,e,n){var i=n.length;if(null==t)return!i;for(t=te(t);i--;){var o=n[i],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function Hi(t,e,n){if("function"!=typeof t)throw new ie(l);return ia(function(){t.apply(r,n)},e)}function Ri(t,e,n,i){var o=-1,r=Ke,s=!0,l=t.length,c=[],u=e.length;if(!l)return c;n&&(e=Je(e,vn(n))),i?(r=Ze,s=!1):e.length>=a&&(r=yn,s=!1,e=new wi(e));t:for(;++o<l;){var h=t[o],d=null==n?h:n(h);if(h=i||0!==h?h:0,s&&d==d){for(var f=u;f--;)if(e[f]===d)continue t;c.push(h)}else r(e,d,i)||c.push(h)}return c}fi.templateSettings={escape:It,evaluate:kt,interpolate:At,variable:"",imports:{_:fi}},fi.prototype=gi.prototype,fi.prototype.constructor=fi,mi.prototype=pi(gi.prototype),mi.prototype.constructor=mi,vi.prototype=pi(gi.prototype),vi.prototype.constructor=vi,_i.prototype.clear=function(){this.__data__=ni?ni(null):{},this.size=0},_i.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},_i.prototype.get=function(t){var e=this.__data__;if(ni){var n=e[t];return n===c?r:n}return ce.call(e,t)?e[t]:r},_i.prototype.has=function(t){var e=this.__data__;return ni?e[t]!==r:ce.call(e,t)},_i.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ni&&e===r?c:e,this},yi.prototype.clear=function(){this.__data__=[],this.size=0},yi.prototype.delete=function(t){var e=this.__data__,n=Pi(e,t);return!(n<0||(n==e.length-1?e.pop():Oe.call(e,n,1),--this.size,0))},yi.prototype.get=function(t){var e=this.__data__,n=Pi(e,t);return n<0?r:e[n][1]},yi.prototype.has=function(t){return Pi(this.__data__,t)>-1},yi.prototype.set=function(t,e){var n=this.__data__,i=Pi(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},bi.prototype.clear=function(){this.size=0,this.__data__={hash:new _i,map:new(Zn||yi),string:new _i}},bi.prototype.delete=function(t){var e=Hr(this,t).delete(t);return this.size-=e?1:0,e},bi.prototype.get=function(t){return Hr(this,t).get(t)},bi.prototype.has=function(t){return Hr(this,t).has(t)},bi.prototype.set=function(t,e){var n=Hr(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},wi.prototype.add=wi.prototype.push=function(t){return this.__data__.set(t,c),this},wi.prototype.has=function(t){return this.__data__.has(t)},Si.prototype.clear=function(){this.__data__=new yi,this.size=0},Si.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Si.prototype.get=function(t){return this.__data__.get(t)},Si.prototype.has=function(t){return this.__data__.has(t)},Si.prototype.set=function(t,e){var n=this.__data__;if(n instanceof yi){var i=n.__data__;if(!Zn||i.length<a-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new bi(i)}return n.set(t,e),this.size=n.size,this};var Li=sr(qi),Vi=sr(Yi,!0);function zi(t,e){var n=!0;return Li(t,function(t,i,o){return n=!!e(t,i,o)}),n}function Fi(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(l===r?s==s&&!Os(s):n(s,l)))var l=s,c=a}return c}function Wi(t,e){var n=[];return Li(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n}function Ui(t,e,n,i,o){var r=-1,a=t.length;for(n||(n=jr),o||(o=[]);++r<a;){var s=t[r];e>0&&n(s)?e>1?Ui(s,e-1,n,i,o):tn(o,s):i||(o[o.length]=s)}return o}var ji=lr(),Gi=lr(!0);function qi(t,e){return t&&ji(t,e,il)}function Yi(t,e){return t&&Gi(t,e,il)}function Xi(t,e){return Qe(e,function(e){return xs(t[e])})}function Qi(t,e){for(var n=0,i=(e=qo(e,t)).length;null!=t&&n<i;)t=t[ca(e[n++])];return n&&n==i?t:r}function Ki(t,e,n){var i=e(t);return ms(t)?i:tn(i,n(t))}function Zi(t){return null==t?t===r?rt:Z:Re&&Re in te(t)?function(t){var e=ce.call(t,Re),n=t[Re];try{t[Re]=r;var i=!0}catch(t){}var o=de.call(t);return i&&(e?t[Re]=n:delete t[Re]),o}(t):function(t){return de.call(t)}(t)}function Ji(t,e){return t>e}function to(t,e){return null!=t&&ce.call(t,e)}function eo(t,e){return null!=t&&e in te(t)}function no(t,e,i){for(var o=i?Ze:Ke,a=t[0].length,s=t.length,l=s,c=n(s),u=1/0,h=[];l--;){var d=t[l];l&&e&&(d=Je(d,vn(e))),u=Gn(d.length,u),c[l]=!i&&(e||a>=120&&d.length>=120)?new wi(l&&d):r}d=t[0];var f=-1,p=c[0];t:for(;++f<a&&h.length<u;){var g=d[f],m=e?e(g):g;if(g=i||0!==g?g:0,!(p?yn(p,m):o(h,m,i))){for(l=s;--l;){var v=c[l];if(!(v?yn(v,m):o(t[l],m,i)))continue t}p&&p.push(m),h.push(g)}}return h}function io(t,e,n){var i=null==(t=ea(t,e=qo(e,t)))?t:t[ca(Sa(e))];return null==i?r:je(i,t,n)}function oo(t){return ks(t)&&Zi(t)==z}function ro(t,e,n,i,o){return t===e||(null==t||null==e||!ks(t)&&!ks(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var s=ms(t),l=ms(e),c=s?F:Fr(t),u=l?F:Fr(e),h=(c=c==z?J:c)==J,d=(u=u==z?J:u)==J,f=c==u;if(f&&bs(t)){if(!bs(e))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new Si),s||Bs(t)?Pr(t,e,n,i,o,a):function(t,e,n,i,o,r,a){switch(n){case ct:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case lt:return!(t.byteLength!=e.byteLength||!r(new be(t),new be(e)));case U:case j:case K:return ds(+t,+e);case q:return t.name==e.name&&t.message==e.message;case et:case it:return t==e+"";case Q:var s=In;case nt:var l=i&g;if(s||(s=En),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;i|=m,a.set(t,e);var u=Pr(s(t),s(e),i,o,r,a);return a.delete(t),u;case ot:if(hi)return hi.call(t)==hi.call(e)}return!1}(t,e,c,n,i,o,a);if(!(n&g)){var p=h&&ce.call(t,"__wrapped__"),v=d&&ce.call(e,"__wrapped__");if(p||v){var _=p?t.value():t,y=v?e.value():e;return a||(a=new Si),o(_,y,n,i,a)}}return!!f&&(a||(a=new Si),function(t,e,n,i,o,a){var s=n&g,l=$r(t),c=l.length,u=$r(e).length;if(c!=u&&!s)return!1;for(var h=c;h--;){var d=l[h];if(!(s?d in e:ce.call(e,d)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var p=!0;a.set(t,e),a.set(e,t);for(var m=s;++h<c;){d=l[h];var v=t[d],_=e[d];if(i)var y=s?i(_,v,d,e,t,a):i(v,_,d,t,e,a);if(!(y===r?v===_||o(v,_,n,i,a):y)){p=!1;break}m||(m="constructor"==d)}if(p&&!m){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(p=!1)}return a.delete(t),a.delete(e),p}(t,e,n,i,o,a))}(t,e,n,i,ro,o))}function ao(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=te(t);o--;){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var c=(l=n[o])[0],u=t[c],h=l[1];if(s&&l[2]){if(u===r&&!(c in t))return!1}else{var d=new Si;if(i)var f=i(u,h,c,t,e,d);if(!(f===r?ro(h,u,g|m,i,d):f))return!1}}return!0}function so(t){return!(!Is(t)||function(t){return!!he&&he in t}(t))&&(xs(t)?ge:Gt).test(ua(t))}function lo(t){return"function"==typeof t?t:null==t?Pl:"object"==typeof t?ms(t)?go(t[0],t[1]):po(t):Rl(t)}function co(t){if(!Kr(t))return Un(t);var e=[];for(var n in te(t))ce.call(t,n)&&"constructor"!=n&&e.push(n);return e}function uo(t){if(!Is(t))return function(t){var e=[];if(null!=t)for(var n in te(t))e.push(n);return e}(t);var e=Kr(t),n=[];for(var i in t)("constructor"!=i||!e&&ce.call(t,i))&&n.push(i);return n}function ho(t,e){return t<e}function fo(t,e){var i=-1,o=_s(t)?n(t.length):[];return Li(t,function(t,n,r){o[++i]=e(t,n,r)}),o}function po(t){var e=Rr(t);return 1==e.length&&e[0][2]?Jr(e[0][0],e[0][1]):function(n){return n===t||ao(n,t,e)}}function go(t,e){return Yr(t)&&Zr(e)?Jr(ca(t),e):function(n){var i=Zs(n,t);return i===r&&i===e?Js(n,t):ro(e,i,g|m)}}function mo(t,e,n,i,o){t!==e&&ji(e,function(a,s){if(Is(a))o||(o=new Si),function(t,e,n,i,o,a,s){var l=Pn(t,n),c=Pn(e,n),u=s.get(c);if(u)ki(t,n,u);else{var h=a?a(l,c,n+"",t,e,s):r,d=h===r;if(d){var f=ms(c),p=!f&&bs(c),g=!f&&!p&&Bs(c);h=c,f||p||g?ms(l)?h=l:ys(l)?h=ir(l):p?(d=!1,h=Ko(c,!0)):g?(d=!1,h=Jo(c,!0)):h=[]:Es(c)||gs(c)?(h=l,gs(l)?h=Ws(l):(!Is(l)||i&&xs(l))&&(h=Ur(c))):d=!1}d&&(s.set(c,h),o(h,c,i,a,s),s.delete(c)),ki(t,n,h)}}(t,e,s,n,mo,i,o);else{var l=i?i(Pn(t,s),a,s+"",t,e,o):r;l===r&&(l=a),ki(t,s,l)}},ol)}function vo(t,e){var n=t.length;if(n)return Gr(e+=e<0?n:0,n)?t[e]:r}function _o(t,e,n){var i=-1;return e=Je(e.length?e:[Pl],vn(Nr())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(fo(t,function(t,n,o){return{criteria:Je(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return function(t,e,n){for(var i=-1,o=t.criteria,r=e.criteria,a=o.length,s=n.length;++i<a;){var l=tr(o[i],r[i]);if(l){if(i>=s)return l;var c=n[i];return l*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function yo(t,e,n){for(var i=-1,o=e.length,r={};++i<o;){var a=e[i],s=Qi(t,a);n(s,a)&&ko(r,qo(a,t),s)}return r}function bo(t,e,n,i){var o=i?cn:ln,r=-1,a=e.length,s=t;for(t===e&&(e=ir(e)),n&&(s=Je(t,vn(n)));++r<a;)for(var l=0,c=e[r],u=n?n(c):c;(l=o(s,u,l,i))>-1;)s!==t&&Oe.call(s,l,1),Oe.call(t,l,1);return t}function wo(t,e){for(var n=t?e.length:0,i=n-1;n--;){var o=e[n];if(n==i||o!==r){var r=o;Gr(o)?Oe.call(t,o,1):Lo(t,o)}}return t}function So(t,e){return t+Ln(Xn()*(e-t+1))}function xo(t,e){var n="";if(!t||e<1||e>O)return n;do{e%2&&(n+=t),(e=Ln(e/2))&&(t+=t)}while(e);return n}function Co(t,e){return oa(ta(t,e,Pl),t+"")}function To(t){return Ci(dl(t))}function Io(t,e){var n=dl(t);return sa(n,Oi(e,0,n.length))}function ko(t,e,n,i){if(!Is(t))return t;for(var o=-1,a=(e=qo(e,t)).length,s=a-1,l=t;null!=l&&++o<a;){var c=ca(e[o]),u=n;if(o!=s){var h=l[c];(u=i?i(h,c,l):r)===r&&(u=Is(h)?h:Gr(e[o+1])?[]:{})}Ai(l,c,u),l=l[c]}return t}var Ao=ii?function(t,e){return ii.set(t,e),t}:Pl,Po=rn?function(t,e){return rn(t,"toString",{configurable:!0,enumerable:!1,value:Il(e),writable:!0})}:Pl;function Eo(t){return sa(dl(t))}function $o(t,e,i){var o=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(i=i>r?r:i)<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var a=n(r);++o<r;)a[o]=t[o+e];return a}function Do(t,e){var n;return Li(t,function(t,i,o){return!(n=e(t,i,o))}),!!n}function Mo(t,e,n){var i=0,o=null==t?i:t.length;if("number"==typeof e&&e==e&&o<=L){for(;i<o;){var r=i+o>>>1,a=t[r];null!==a&&!Os(a)&&(n?a<=e:a<e)?i=r+1:o=r}return o}return Oo(t,e,Pl,n)}function Oo(t,e,n,i){e=n(e);for(var o=0,a=null==t?0:t.length,s=e!=e,l=null===e,c=Os(e),u=e===r;o<a;){var h=Ln((o+a)/2),d=n(t[h]),f=d!==r,p=null===d,g=d==d,m=Os(d);if(s)var v=i||g;else v=u?g&&(i||f):l?g&&f&&(i||!p):c?g&&f&&!p&&(i||!m):!p&&!m&&(i?d<=e:d<e);v?o=h+1:a=h}return Gn(a,R)}function Bo(t,e){for(var n=-1,i=t.length,o=0,r=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!ds(s,l)){var l=s;r[o++]=0===a?0:a}}return r}function No(t){return"number"==typeof t?t:Os(t)?N:+t}function Ho(t){if("string"==typeof t)return t;if(ms(t))return Je(t,Ho)+"";if(Os(t))return di?di.call(t):"";var e=t+"";return"0"==e&&1/t==-M?"-0":e}function Ro(t,e,n){var i=-1,o=Ke,r=t.length,s=!0,l=[],c=l;if(n)s=!1,o=Ze;else if(r>=a){var u=e?null:xr(t);if(u)return En(u);s=!1,o=yn,c=new wi}else c=e?[]:l;t:for(;++i<r;){var h=t[i],d=e?e(h):h;if(h=n||0!==h?h:0,s&&d==d){for(var f=c.length;f--;)if(c[f]===d)continue t;e&&c.push(d),l.push(h)}else o(c,d,n)||(c!==l&&c.push(d),l.push(h))}return l}function Lo(t,e){return null==(t=ea(t,e=qo(e,t)))||delete t[ca(Sa(e))]}function Vo(t,e,n,i){return ko(t,e,n(Qi(t,e)),i)}function zo(t,e,n,i){for(var o=t.length,r=i?o:-1;(i?r--:++r<o)&&e(t[r],r,t););return n?$o(t,i?0:r,i?r+1:o):$o(t,i?r+1:0,i?o:r)}function Fo(t,e){var n=t;return n instanceof vi&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function Wo(t,e,i){var o=t.length;if(o<2)return o?Ro(t[0]):[];for(var r=-1,a=n(o);++r<o;)for(var s=t[r],l=-1;++l<o;)l!=r&&(a[r]=Ri(a[r]||s,t[l],e,i));return Ro(Ui(a,1),e,i)}function Uo(t,e,n){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var l=i<a?e[i]:r;n(s,t[i],l)}return s}function jo(t){return ys(t)?t:[]}function Go(t){return"function"==typeof t?t:Pl}function qo(t,e){return ms(t)?t:Yr(t,e)?[t]:la(Us(t))}var Yo=Co;function Xo(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:$o(t,e,n)}var Qo=fn||function(t){return Me.clearTimeout(t)};function Ko(t,e){if(e)return t.slice();var n=t.length,i=Se?Se(n):new t.constructor(n);return t.copy(i),i}function Zo(t){var e=new t.constructor(t.byteLength);return new be(e).set(new be(t)),e}function Jo(t,e){var n=e?Zo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function tr(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=Os(t),s=e!==r,l=null===e,c=e==e,u=Os(e);if(!l&&!u&&!a&&t>e||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&t<e||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}function er(t,e,i,o){for(var r=-1,a=t.length,s=i.length,l=-1,c=e.length,u=jn(a-s,0),h=n(c+u),d=!o;++l<c;)h[l]=e[l];for(;++r<s;)(d||r<a)&&(h[i[r]]=t[r]);for(;u--;)h[l++]=t[r++];return h}function nr(t,e,i,o){for(var r=-1,a=t.length,s=-1,l=i.length,c=-1,u=e.length,h=jn(a-l,0),d=n(h+u),f=!o;++r<h;)d[r]=t[r];for(var p=r;++c<u;)d[p+c]=e[c];for(;++s<l;)(f||r<a)&&(d[p+i[s]]=t[r++]);return d}function ir(t,e){var i=-1,o=t.length;for(e||(e=n(o));++i<o;)e[i]=t[i];return e}function or(t,e,n,i){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var l=e[a],c=i?i(n[l],t[l],l,n,t):r;c===r&&(c=t[l]),o?Di(n,l,c):Ai(n,l,c)}return n}function rr(t,e){return function(n,i){var o=ms(n)?Ge:Ei,r=e?e():{};return o(n,t,Nr(i,2),r)}}function ar(t){return Co(function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&qr(n[0],n[1],s)&&(a=o<3?r:a,o=1),e=te(e);++i<o;){var l=n[i];l&&t(e,l,i,a)}return e})}function sr(t,e){return function(n,i){if(null==n)return n;if(!_s(n))return t(n,i);for(var o=n.length,r=e?o:-1,a=te(n);(e?r--:++r<o)&&!1!==i(a[r],r,a););return n}}function lr(t){return function(e,n,i){for(var o=-1,r=te(e),a=i(e),s=a.length;s--;){var l=a[t?s:++o];if(!1===n(r[l],l,r))break}return e}}function cr(t){return function(e){var n=Tn(e=Us(e))?Mn(e):r,i=n?n[0]:e.charAt(0),o=n?Xo(n,1).join(""):e.slice(1);return i[t]()+o}}function ur(t){return function(e){return en(xl(gl(e).replace(_e,"")),t,"")}}function hr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=pi(t.prototype),i=t.apply(n,e);return Is(i)?i:n}}function dr(t){return function(e,n,i){var o=te(e);if(!_s(e)){var a=Nr(n,3);e=il(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[a?e[s]:s]:r}}function fr(t){return Er(function(e){var n=e.length,i=n,o=mi.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new ie(l);if(o&&!s&&"wrapper"==Or(a))var s=new mi([],!0)}for(i=s?i:n;++i<n;){var c=Or(a=e[i]),u="wrapper"==c?Mr(a):r;s=u&&Xr(u[0])&&u[1]==(C|b|S|T)&&!u[4].length&&1==u[9]?s[Or(u[0])].apply(s,u[3]):1==a.length&&Xr(a)?s[c]():s.thru(a)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&ms(i))return s.plant(i).value();for(var o=0,r=n?e[o].apply(this,t):i;++o<n;)r=e[o].call(this,r);return r}})}function pr(t,e,i,o,a,s,l,c,u,h){var d=e&C,f=e&v,p=e&_,g=e&(b|w),m=e&I,y=p?r:hr(t);return function v(){for(var _=arguments.length,b=n(_),w=_;w--;)b[w]=arguments[w];if(g)var S=Br(v),x=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(b,S);if(o&&(b=er(b,o,a,g)),s&&(b=nr(b,s,l,g)),_-=x,g&&_<h){var C=An(b,S);return wr(t,e,pr,v.placeholder,i,b,C,c,u,h-_)}var T=f?i:this,I=p?T[t]:t;return _=b.length,c?b=function(t,e){for(var n=t.length,i=Gn(e.length,n),o=ir(t);i--;){var a=e[i];t[i]=Gr(a,n)?o[a]:r}return t}(b,c):m&&_>1&&b.reverse(),d&&u<_&&(b.length=u),this&&this!==Me&&this instanceof v&&(I=y||hr(I)),I.apply(T,b)}}function gr(t,e){return function(n,i){return function(t,e,n,i){return qi(t,function(t,o,r){e(i,n(t),o,r)}),i}(n,t,e(i),{})}}function mr(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=Ho(n),i=Ho(i)):(n=No(n),i=No(i)),o=t(n,i)}return o}}function vr(t){return Er(function(e){return e=Je(e,vn(Nr())),Co(function(n){var i=this;return t(e,function(t){return je(t,i,n)})})})}function _r(t,e){var n=(e=e===r?" ":Ho(e)).length;if(n<2)return n?xo(e,t):e;var i=xo(e,Rn(t/Dn(e)));return Tn(e)?Xo(Mn(i),0,t).join(""):i.slice(0,t)}function yr(t){return function(e,i,o){return o&&"number"!=typeof o&&qr(e,i,o)&&(i=o=r),e=Ls(e),i===r?(i=e,e=0):i=Ls(i),function(t,e,i,o){for(var r=-1,a=jn(Rn((e-t)/(i||1)),0),s=n(a);a--;)s[o?a:++r]=t,t+=i;return s}(e,i,o=o===r?e<i?1:-1:Ls(o),t)}}function br(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Fs(e),n=Fs(n)),t(e,n)}}function wr(t,e,n,i,o,a,s,l,c,u){var h=e&b;e|=h?S:x,(e&=~(h?x:S))&y||(e&=~(v|_));var d=[t,e,o,h?a:r,h?s:r,h?r:a,h?r:s,l,c,u],f=n.apply(r,d);return Xr(t)&&na(f,d),f.placeholder=i,ra(f,t,e)}function Sr(t){var e=Jt[t];return function(t,n){if(t=Fs(t),n=null==n?0:Gn(Vs(n),292)){var i=(Us(t)+"e").split("e");return+((i=(Us(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var xr=ti&&1/En(new ti([,-0]))[1]==M?function(t){return new ti(t)}:Ol;function Cr(t){return function(e){var n=Fr(e);return n==Q?In(e):n==nt?$n(e):function(t,e){return Je(e,function(e){return[e,t[e]]})}(e,t(e))}}function Tr(t,e,i,o,a,s,c,u){var d=e&_;if(!d&&"function"!=typeof t)throw new ie(l);var f=o?o.length:0;if(f||(e&=~(S|x),o=a=r),c=c===r?c:jn(Vs(c),0),u=u===r?u:Vs(u),f-=a?a.length:0,e&x){var p=o,g=a;o=a=r}var m=d?r:Mr(t),I=[t,e,i,o,a,p,g,s,c,u];if(m&&function(t,e){var n=t[1],i=e[1],o=n|i,r=o<(v|_|C),a=i==C&&n==b||i==C&&n==T&&t[7].length<=e[8]||i==(C|T)&&e[7].length<=e[8]&&n==b;if(!r&&!a)return t;i&v&&(t[2]=e[2],o|=n&v?0:y);var s=e[3];if(s){var l=t[3];t[3]=l?er(l,s,e[4]):s,t[4]=l?An(t[3],h):e[4]}(s=e[5])&&(l=t[5],t[5]=l?nr(l,s,e[6]):s,t[6]=l?An(t[5],h):e[6]),(s=e[7])&&(t[7]=s),i&C&&(t[8]=null==t[8]?e[8]:Gn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(I,m),t=I[0],e=I[1],i=I[2],o=I[3],a=I[4],!(u=I[9]=I[9]===r?d?0:t.length:jn(I[9]-f,0))&&e&(b|w)&&(e&=~(b|w)),e&&e!=v)k=e==b||e==w?function(t,e,i){var o=hr(t);return function a(){for(var s=arguments.length,l=n(s),c=s,u=Br(a);c--;)l[c]=arguments[c];var h=s<3&&l[0]!==u&&l[s-1]!==u?[]:An(l,u);return(s-=h.length)<i?wr(t,e,pr,a.placeholder,r,l,h,r,r,i-s):je(this&&this!==Me&&this instanceof a?o:t,this,l)}}(t,e,u):e!=S&&e!=(v|S)||a.length?pr.apply(r,I):function(t,e,i,o){var r=e&v,a=hr(t);return function e(){for(var s=-1,l=arguments.length,c=-1,u=o.length,h=n(u+l),d=this&&this!==Me&&this instanceof e?a:t;++c<u;)h[c]=o[c];for(;l--;)h[c++]=arguments[++s];return je(d,r?i:this,h)}}(t,e,i,o);else var k=function(t,e,n){var i=e&v,o=hr(t);return function e(){return(this&&this!==Me&&this instanceof e?o:t).apply(i?n:this,arguments)}}(t,e,i);return ra((m?Ao:na)(k,I),t,e)}function Ir(t,e,n,i){return t===r||ds(t,ae[n])&&!ce.call(i,n)?e:t}function kr(t,e,n,i,o,a){return Is(t)&&Is(e)&&(a.set(e,t),mo(t,e,r,kr,a),a.delete(e)),t}function Ar(t){return Es(t)?r:t}function Pr(t,e,n,i,o,a){var s=n&g,l=t.length,c=e.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var h=-1,d=!0,f=n&m?new wi:r;for(a.set(t,e),a.set(e,t);++h<l;){var p=t[h],v=e[h];if(i)var _=s?i(v,p,h,e,t,a):i(p,v,h,t,e,a);if(_!==r){if(_)continue;d=!1;break}if(f){if(!on(e,function(t,e){if(!yn(f,e)&&(p===t||o(p,t,n,i,a)))return f.push(e)})){d=!1;break}}else if(p!==v&&!o(p,v,n,i,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function Er(t){return oa(ta(t,r,va),t+"")}function $r(t){return Ki(t,il,Vr)}function Dr(t){return Ki(t,ol,zr)}var Mr=ii?function(t){return ii.get(t)}:Ol;function Or(t){for(var e=t.name+"",n=oi[e],i=ce.call(oi,e)?n.length:0;i--;){var o=n[i],r=o.func;if(null==r||r==t)return o.name}return e}function Br(t){return(ce.call(fi,"placeholder")?fi:t).placeholder}function Nr(){var t=fi.iteratee||El;return t=t===El?lo:t,arguments.length?t(arguments[0],arguments[1]):t}function Hr(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Rr(t){for(var e=il(t),n=e.length;n--;){var i=e[n],o=t[i];e[n]=[i,o,Zr(o)]}return e}function Lr(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return so(n)?n:r}var Vr=Vn?function(t){return null==t?[]:(t=te(t),Qe(Vn(t),function(e){return De.call(t,e)}))}:zl,zr=Vn?function(t){for(var e=[];t;)tn(e,Vr(t)),t=Ae(t);return e}:zl,Fr=Zi;function Wr(t,e,n){for(var i=-1,o=(e=qo(e,t)).length,r=!1;++i<o;){var a=ca(e[i]);if(!(r=null!=t&&n(t,a)))break;t=t[a]}return r||++i!=o?r:!!(o=null==t?0:t.length)&&Ts(o)&&Gr(a,o)&&(ms(t)||gs(t))}function Ur(t){return"function"!=typeof t.constructor||Kr(t)?{}:pi(Ae(t))}function jr(t){return ms(t)||gs(t)||!!(Be&&t&&t[Be])}function Gr(t,e){var n=typeof t;return!!(e=null==e?O:e)&&("number"==n||"symbol"!=n&&Yt.test(t))&&t>-1&&t%1==0&&t<e}function qr(t,e,n){if(!Is(n))return!1;var i=typeof e;return!!("number"==i?_s(n)&&Gr(e,n.length):"string"==i&&e in n)&&ds(n[e],t)}function Yr(t,e){if(ms(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Os(t))||Et.test(t)||!Pt.test(t)||null!=e&&t in te(e)}function Xr(t){var e=Or(t),n=fi[e];if("function"!=typeof n||!(e in vi.prototype))return!1;if(t===n)return!0;var i=Mr(n);return!!i&&t===i[0]}(Kn&&Fr(new Kn(new ArrayBuffer(1)))!=ct||Zn&&Fr(new Zn)!=Q||Jn&&"[object Promise]"!=Fr(Jn.resolve())||ti&&Fr(new ti)!=nt||ei&&Fr(new ei)!=at)&&(Fr=function(t){var e=Zi(t),n=e==J?t.constructor:r,i=n?ua(n):"";if(i)switch(i){case ri:return ct;case ai:return Q;case si:return"[object Promise]";case li:return nt;case ci:return at}return e});var Qr=se?xs:Fl;function Kr(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ae)}function Zr(t){return t==t&&!Is(t)}function Jr(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in te(n))}}function ta(t,e,i){return e=jn(e===r?t.length-1:e,0),function(){for(var o=arguments,r=-1,a=jn(o.length-e,0),s=n(a);++r<a;)s[r]=o[e+r];r=-1;for(var l=n(e+1);++r<e;)l[r]=o[r];return l[e]=i(s),je(t,this,l)}}function ea(t,e){return e.length<2?t:Qi(t,$o(e,0,-1))}var na=aa(Ao),ia=Hn||function(t,e){return Me.setTimeout(t,e)},oa=aa(Po);function ra(t,e,n){var i=e+"";return oa(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Ht,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return qe(V,function(n){var i="_."+n[0];e&n[1]&&!Ke(t,i)&&t.push(i)}),t.sort()}(function(t){var e=t.match(Rt);return e?e[1].split(Lt):[]}(i),n)))}function aa(t){var e=0,n=0;return function(){var i=qn(),o=E-(i-n);if(n=i,o>0){if(++e>=P)return arguments[0]}else e=0;return t.apply(r,arguments)}}function sa(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var a=So(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var la=function(t){var e=as(t,function(t){return n.size===u&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace($t,function(t,n,i,o){e.push(i?o.replace(zt,"$1"):n||t)}),e});function ca(t){if("string"==typeof t||Os(t))return t;var e=t+"";return"0"==e&&1/t==-M?"-0":e}function ua(t){if(null!=t){try{return le.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ha(t){if(t instanceof vi)return t.clone();var e=new mi(t.__wrapped__,t.__chain__);return e.__actions__=ir(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var da=Co(function(t,e){return ys(t)?Ri(t,Ui(e,1,ys,!0)):[]}),fa=Co(function(t,e){var n=Sa(e);return ys(n)&&(n=r),ys(t)?Ri(t,Ui(e,1,ys,!0),Nr(n,2)):[]}),pa=Co(function(t,e){var n=Sa(e);return ys(n)&&(n=r),ys(t)?Ri(t,Ui(e,1,ys,!0),r,n):[]});function ga(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=null==n?0:Vs(n);return o<0&&(o=jn(i+o,0)),sn(t,Nr(e,3),o)}function ma(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=Vs(n),o=n<0?jn(i+o,0):Gn(o,i-1)),sn(t,Nr(e,3),o,!0)}function va(t){return null!=t&&t.length?Ui(t,1):[]}function _a(t){return t&&t.length?t[0]:r}var ya=Co(function(t){var e=Je(t,jo);return e.length&&e[0]===t[0]?no(e):[]}),ba=Co(function(t){var e=Sa(t),n=Je(t,jo);return e===Sa(n)?e=r:n.pop(),n.length&&n[0]===t[0]?no(n,Nr(e,2)):[]}),wa=Co(function(t){var e=Sa(t),n=Je(t,jo);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?no(n,r,e):[]});function Sa(t){var e=null==t?0:t.length;return e?t[e-1]:r}var xa=Co(Ca);function Ca(t,e){return t&&t.length&&e&&e.length?bo(t,e):t}var Ta=Er(function(t,e){var n=null==t?0:t.length,i=Mi(t,e);return wo(t,Je(e,function(t){return Gr(t,n)?+t:t}).sort(tr)),i});function Ia(t){return null==t?t:Qn.call(t)}var ka=Co(function(t){return Ro(Ui(t,1,ys,!0))}),Aa=Co(function(t){var e=Sa(t);return ys(e)&&(e=r),Ro(Ui(t,1,ys,!0),Nr(e,2))}),Pa=Co(function(t){var e=Sa(t);return e="function"==typeof e?e:r,Ro(Ui(t,1,ys,!0),r,e)});function Ea(t){if(!t||!t.length)return[];var e=0;return t=Qe(t,function(t){if(ys(t))return e=jn(t.length,e),!0}),mn(e,function(e){return Je(t,dn(e))})}function $a(t,e){if(!t||!t.length)return[];var n=Ea(t);return null==e?n:Je(n,function(t){return je(e,r,t)})}var Da=Co(function(t,e){return ys(t)?Ri(t,e):[]}),Ma=Co(function(t){return Wo(Qe(t,ys))}),Oa=Co(function(t){var e=Sa(t);return ys(e)&&(e=r),Wo(Qe(t,ys),Nr(e,2))}),Ba=Co(function(t){var e=Sa(t);return e="function"==typeof e?e:r,Wo(Qe(t,ys),r,e)}),Na=Co(Ea);var Ha=Co(function(t){var e=t.length,n=e>1?t[e-1]:r;return $a(t,n="function"==typeof n?(t.pop(),n):r)});function Ra(t){var e=fi(t);return e.__chain__=!0,e}function La(t,e){return e(t)}var Va=Er(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return Mi(e,t)};return!(e>1||this.__actions__.length)&&i instanceof vi&&Gr(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:La,args:[o],thisArg:r}),new mi(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(r),t})):this.thru(o)});var za=rr(function(t,e,n){ce.call(t,n)?++t[n]:Di(t,n,1)});var Fa=dr(ga),Wa=dr(ma);function Ua(t,e){return(ms(t)?qe:Li)(t,Nr(e,3))}function ja(t,e){return(ms(t)?Ye:Vi)(t,Nr(e,3))}var Ga=rr(function(t,e,n){ce.call(t,n)?t[n].push(e):Di(t,n,[e])});var qa=Co(function(t,e,i){var o=-1,r="function"==typeof e,a=_s(t)?n(t.length):[];return Li(t,function(t){a[++o]=r?je(e,t,i):io(t,e,i)}),a}),Ya=rr(function(t,e,n){Di(t,n,e)});function Xa(t,e){return(ms(t)?Je:fo)(t,Nr(e,3))}var Qa=rr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Ka=Co(function(t,e){if(null==t)return[];var n=e.length;return n>1&&qr(t,e[0],e[1])?e=[]:n>2&&qr(e[0],e[1],e[2])&&(e=[e[0]]),_o(t,Ui(e,1),[])}),Za=Nn||function(){return Me.Date.now()};function Ja(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Tr(t,C,r,r,r,r,e)}function ts(t,e){var n;if("function"!=typeof e)throw new ie(l);return t=Vs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var es=Co(function(t,e,n){var i=v;if(n.length){var o=An(n,Br(es));i|=S}return Tr(t,i,e,n,o)}),ns=Co(function(t,e,n){var i=v|_;if(n.length){var o=An(n,Br(ns));i|=S}return Tr(e,i,t,n,o)});function is(t,e,n){var i,o,a,s,c,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new ie(l);function g(e){var n=i,a=o;return i=o=r,h=e,s=t.apply(a,n)}function m(t){var n=t-u;return u===r||n>=e||n<0||f&&t-h>=a}function v(){var t=Za();if(m(t))return _(t);c=ia(v,function(t){var n=e-(t-u);return f?Gn(n,a-(t-h)):n}(t))}function _(t){return c=r,p&&i?g(t):(i=o=r,s)}function y(){var t=Za(),n=m(t);if(i=arguments,o=this,u=t,n){if(c===r)return function(t){return h=t,c=ia(v,e),d?g(t):s}(u);if(f)return c=ia(v,e),g(u)}return c===r&&(c=ia(v,e)),s}return e=Fs(e)||0,Is(n)&&(d=!!n.leading,a=(f="maxWait"in n)?jn(Fs(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),y.cancel=function(){c!==r&&Qo(c),h=0,i=u=o=c=r},y.flush=function(){return c===r?s:_(Za())},y}var os=Co(function(t,e){return Hi(t,1,e)}),rs=Co(function(t,e,n){return Hi(t,Fs(e)||0,n)});function as(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(l);var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var a=t.apply(this,i);return n.cache=r.set(o,a)||r,a};return n.cache=new(as.Cache||bi),n}function ss(t){if("function"!=typeof t)throw new ie(l);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}as.Cache=bi;var ls=Yo(function(t,e){var n=(e=1==e.length&&ms(e[0])?Je(e[0],vn(Nr())):Je(Ui(e,1),vn(Nr()))).length;return Co(function(i){for(var o=-1,r=Gn(i.length,n);++o<r;)i[o]=e[o].call(this,i[o]);return je(t,this,i)})}),cs=Co(function(t,e){var n=An(e,Br(cs));return Tr(t,S,r,e,n)}),us=Co(function(t,e){var n=An(e,Br(us));return Tr(t,x,r,e,n)}),hs=Er(function(t,e){return Tr(t,T,r,r,r,e)});function ds(t,e){return t===e||t!=t&&e!=e}var fs=br(Ji),ps=br(function(t,e){return t>=e}),gs=oo(function(){return arguments}())?oo:function(t){return ks(t)&&ce.call(t,"callee")&&!De.call(t,"callee")},ms=n.isArray,vs=Le?vn(Le):function(t){return ks(t)&&Zi(t)==lt};function _s(t){return null!=t&&Ts(t.length)&&!xs(t)}function ys(t){return ks(t)&&_s(t)}var bs=zn||Fl,ws=Ve?vn(Ve):function(t){return ks(t)&&Zi(t)==j};function Ss(t){if(!ks(t))return!1;var e=Zi(t);return e==q||e==G||"string"==typeof t.message&&"string"==typeof t.name&&!Es(t)}function xs(t){if(!Is(t))return!1;var e=Zi(t);return e==Y||e==X||e==W||e==tt}function Cs(t){return"number"==typeof t&&t==Vs(t)}function Ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=O}function Is(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ks(t){return null!=t&&"object"==typeof t}var As=ze?vn(ze):function(t){return ks(t)&&Fr(t)==Q};function Ps(t){return"number"==typeof t||ks(t)&&Zi(t)==K}function Es(t){if(!ks(t)||Zi(t)!=J)return!1;var e=Ae(t);if(null===e)return!0;var n=ce.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&le.call(n)==fe}var $s=Fe?vn(Fe):function(t){return ks(t)&&Zi(t)==et};var Ds=We?vn(We):function(t){return ks(t)&&Fr(t)==nt};function Ms(t){return"string"==typeof t||!ms(t)&&ks(t)&&Zi(t)==it}function Os(t){return"symbol"==typeof t||ks(t)&&Zi(t)==ot}var Bs=Ue?vn(Ue):function(t){return ks(t)&&Ts(t.length)&&!!Ie[Zi(t)]};var Ns=br(ho),Hs=br(function(t,e){return t<=e});function Rs(t){if(!t)return[];if(_s(t))return Ms(t)?Mn(t):ir(t);if(He&&t[He])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[He]());var e=Fr(t);return(e==Q?In:e==nt?En:dl)(t)}function Ls(t){return t?(t=Fs(t))===M||t===-M?(t<0?-1:1)*B:t==t?t:0:0===t?t:0}function Vs(t){var e=Ls(t),n=e%1;return e==e?n?e-n:e:0}function zs(t){return t?Oi(Vs(t),0,H):0}function Fs(t){if("number"==typeof t)return t;if(Os(t))return N;if(Is(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Is(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ot,"");var n=jt.test(t);return n||qt.test(t)?Ee(t.slice(2),n?2:8):Ut.test(t)?N:+t}function Ws(t){return or(t,ol(t))}function Us(t){return null==t?"":Ho(t)}var js=ar(function(t,e){if(Kr(e)||_s(e))or(e,il(e),t);else for(var n in e)ce.call(e,n)&&Ai(t,n,e[n])}),Gs=ar(function(t,e){or(e,ol(e),t)}),qs=ar(function(t,e,n,i){or(e,ol(e),t,i)}),Ys=ar(function(t,e,n,i){or(e,il(e),t,i)}),Xs=Er(Mi);var Qs=Co(function(t,e){t=te(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&qr(e[0],e[1],o)&&(i=1);++n<i;)for(var a=e[n],s=ol(a),l=-1,c=s.length;++l<c;){var u=s[l],h=t[u];(h===r||ds(h,ae[u])&&!ce.call(t,u))&&(t[u]=a[u])}return t}),Ks=Co(function(t){return t.push(r,kr),je(al,r,t)});function Zs(t,e,n){var i=null==t?r:Qi(t,e);return i===r?n:i}function Js(t,e){return null!=t&&Wr(t,e,eo)}var tl=gr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),t[e]=n},Il(Pl)),el=gr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),ce.call(t,e)?t[e].push(n):t[e]=[n]},Nr),nl=Co(io);function il(t){return _s(t)?xi(t):co(t)}function ol(t){return _s(t)?xi(t,!0):uo(t)}var rl=ar(function(t,e,n){mo(t,e,n)}),al=ar(function(t,e,n,i){mo(t,e,n,i)}),sl=Er(function(t,e){var n={};if(null==t)return n;var i=!1;e=Je(e,function(e){return e=qo(e,t),i||(i=e.length>1),e}),or(t,Dr(t),n),i&&(n=Bi(n,d|f|p,Ar));for(var o=e.length;o--;)Lo(n,e[o]);return n});var ll=Er(function(t,e){return null==t?{}:function(t,e){return yo(t,e,function(e,n){return Js(t,n)})}(t,e)});function cl(t,e){if(null==t)return{};var n=Je(Dr(t),function(t){return[t]});return e=Nr(e),yo(t,n,function(t,n){return e(t,n[0])})}var ul=Cr(il),hl=Cr(ol);function dl(t){return null==t?[]:_n(t,il(t))}var fl=ur(function(t,e,n){return e=e.toLowerCase(),t+(n?pl(e):e)});function pl(t){return Sl(Us(t).toLowerCase())}function gl(t){return(t=Us(t))&&t.replace(Xt,Sn).replace(ye,"")}var ml=ur(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),vl=ur(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),_l=cr("toLowerCase");var yl=ur(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var bl=ur(function(t,e,n){return t+(n?" ":"")+Sl(e)});var wl=ur(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Sl=cr("toUpperCase");function xl(t,e,n){return t=Us(t),(e=n?r:e)===r?function(t){return xe.test(t)}(t)?function(t){return t.match(we)||[]}(t):function(t){return t.match(Vt)||[]}(t):t.match(e)||[]}var Cl=Co(function(t,e){try{return je(t,r,e)}catch(t){return Ss(t)?t:new o(t)}}),Tl=Er(function(t,e){return qe(e,function(e){e=ca(e),Di(t,e,es(t[e],t))}),t});function Il(t){return function(){return t}}var kl=fr(),Al=fr(!0);function Pl(t){return t}function El(t){return lo("function"==typeof t?t:Bi(t,d))}var $l=Co(function(t,e){return function(n){return io(n,t,e)}}),Dl=Co(function(t,e){return function(n){return io(t,n,e)}});function Ml(t,e,n){var i=il(e),o=Xi(e,i);null!=n||Is(e)&&(o.length||!i.length)||(n=e,e=t,t=this,o=Xi(e,il(e)));var r=!(Is(n)&&"chain"in n&&!n.chain),a=xs(t);return qe(o,function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(r||e){var n=t(this.__wrapped__);return(n.__actions__=ir(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,tn([this.value()],arguments))})}),t}function Ol(){}var Bl=vr(Je),Nl=vr(Xe),Hl=vr(on);function Rl(t){return Yr(t)?dn(ca(t)):function(t){return function(e){return Qi(e,t)}}(t)}var Ll=yr(),Vl=yr(!0);function zl(){return[]}function Fl(){return!1}var Wl=mr(function(t,e){return t+e},0),Ul=Sr("ceil"),jl=mr(function(t,e){return t/e},1),Gl=Sr("floor");var ql=mr(function(t,e){return t*e},1),Yl=Sr("round"),Xl=mr(function(t,e){return t-e},0);return fi.after=function(t,e){if("function"!=typeof e)throw new ie(l);return t=Vs(t),function(){if(--t<1)return e.apply(this,arguments)}},fi.ary=Ja,fi.assign=js,fi.assignIn=Gs,fi.assignInWith=qs,fi.assignWith=Ys,fi.at=Xs,fi.before=ts,fi.bind=es,fi.bindAll=Tl,fi.bindKey=ns,fi.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ms(t)?t:[t]},fi.chain=Ra,fi.chunk=function(t,e,i){e=(i?qr(t,e,i):e===r)?1:jn(Vs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,l=n(Rn(o/e));a<o;)l[s++]=$o(t,a,a+=e);return l},fi.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,o=[];++e<n;){var r=t[e];r&&(o[i++]=r)}return o},fi.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),i=arguments[0],o=t;o--;)e[o-1]=arguments[o];return tn(ms(i)?ir(i):[i],Ui(e,1))},fi.cond=function(t){var e=null==t?0:t.length,n=Nr();return t=e?Je(t,function(t){if("function"!=typeof t[1])throw new ie(l);return[n(t[0]),t[1]]}):[],Co(function(n){for(var i=-1;++i<e;){var o=t[i];if(je(o[0],this,n))return je(o[1],this,n)}})},fi.conforms=function(t){return function(t){var e=il(t);return function(n){return Ni(n,t,e)}}(Bi(t,d))},fi.constant=Il,fi.countBy=za,fi.create=function(t,e){var n=pi(t);return null==e?n:$i(n,e)},fi.curry=function t(e,n,i){var o=Tr(e,b,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},fi.curryRight=function t(e,n,i){var o=Tr(e,w,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},fi.debounce=is,fi.defaults=Qs,fi.defaultsDeep=Ks,fi.defer=os,fi.delay=rs,fi.difference=da,fi.differenceBy=fa,fi.differenceWith=pa,fi.drop=function(t,e,n){var i=null==t?0:t.length;return i?$o(t,(e=n||e===r?1:Vs(e))<0?0:e,i):[]},fi.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?$o(t,0,(e=i-(e=n||e===r?1:Vs(e)))<0?0:e):[]},fi.dropRightWhile=function(t,e){return t&&t.length?zo(t,Nr(e,3),!0,!0):[]},fi.dropWhile=function(t,e){return t&&t.length?zo(t,Nr(e,3),!0):[]},fi.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&qr(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=Vs(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:Vs(i))<0&&(i+=o),i=n>i?0:zs(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},fi.filter=function(t,e){return(ms(t)?Qe:Wi)(t,Nr(e,3))},fi.flatMap=function(t,e){return Ui(Xa(t,e),1)},fi.flatMapDeep=function(t,e){return Ui(Xa(t,e),M)},fi.flatMapDepth=function(t,e,n){return n=n===r?1:Vs(n),Ui(Xa(t,e),n)},fi.flatten=va,fi.flattenDeep=function(t){return null!=t&&t.length?Ui(t,M):[]},fi.flattenDepth=function(t,e){return null!=t&&t.length?Ui(t,e=e===r?1:Vs(e)):[]},fi.flip=function(t){return Tr(t,I)},fi.flow=kl,fi.flowRight=Al,fi.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var o=t[e];i[o[0]]=o[1]}return i},fi.functions=function(t){return null==t?[]:Xi(t,il(t))},fi.functionsIn=function(t){return null==t?[]:Xi(t,ol(t))},fi.groupBy=Ga,fi.initial=function(t){return null!=t&&t.length?$o(t,0,-1):[]},fi.intersection=ya,fi.intersectionBy=ba,fi.intersectionWith=wa,fi.invert=tl,fi.invertBy=el,fi.invokeMap=qa,fi.iteratee=El,fi.keyBy=Ya,fi.keys=il,fi.keysIn=ol,fi.map=Xa,fi.mapKeys=function(t,e){var n={};return e=Nr(e,3),qi(t,function(t,i,o){Di(n,e(t,i,o),t)}),n},fi.mapValues=function(t,e){var n={};return e=Nr(e,3),qi(t,function(t,i,o){Di(n,i,e(t,i,o))}),n},fi.matches=function(t){return po(Bi(t,d))},fi.matchesProperty=function(t,e){return go(t,Bi(e,d))},fi.memoize=as,fi.merge=rl,fi.mergeWith=al,fi.method=$l,fi.methodOf=Dl,fi.mixin=Ml,fi.negate=ss,fi.nthArg=function(t){return t=Vs(t),Co(function(e){return vo(e,t)})},fi.omit=sl,fi.omitBy=function(t,e){return cl(t,ss(Nr(e)))},fi.once=function(t){return ts(2,t)},fi.orderBy=function(t,e,n,i){return null==t?[]:(ms(e)||(e=null==e?[]:[e]),ms(n=i?r:n)||(n=null==n?[]:[n]),_o(t,e,n))},fi.over=Bl,fi.overArgs=ls,fi.overEvery=Nl,fi.overSome=Hl,fi.partial=cs,fi.partialRight=us,fi.partition=Qa,fi.pick=ll,fi.pickBy=cl,fi.property=Rl,fi.propertyOf=function(t){return function(e){return null==t?r:Qi(t,e)}},fi.pull=xa,fi.pullAll=Ca,fi.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?bo(t,e,Nr(n,2)):t},fi.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?bo(t,e,r,n):t},fi.pullAt=Ta,fi.range=Ll,fi.rangeRight=Vl,fi.rearg=hs,fi.reject=function(t,e){return(ms(t)?Qe:Wi)(t,ss(Nr(e,3)))},fi.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,o=[],r=t.length;for(e=Nr(e,3);++i<r;){var a=t[i];e(a,i,t)&&(n.push(a),o.push(i))}return wo(t,o),n},fi.rest=function(t,e){if("function"!=typeof t)throw new ie(l);return Co(t,e=e===r?e:Vs(e))},fi.reverse=Ia,fi.sampleSize=function(t,e,n){return e=(n?qr(t,e,n):e===r)?1:Vs(e),(ms(t)?Ti:Io)(t,e)},fi.set=function(t,e,n){return null==t?t:ko(t,e,n)},fi.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:ko(t,e,n,i)},fi.shuffle=function(t){return(ms(t)?Ii:Eo)(t)},fi.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&qr(t,e,n)?(e=0,n=i):(e=null==e?0:Vs(e),n=n===r?i:Vs(n)),$o(t,e,n)):[]},fi.sortBy=Ka,fi.sortedUniq=function(t){return t&&t.length?Bo(t):[]},fi.sortedUniqBy=function(t,e){return t&&t.length?Bo(t,Nr(e,2)):[]},fi.split=function(t,e,n){return n&&"number"!=typeof n&&qr(t,e,n)&&(e=n=r),(n=n===r?H:n>>>0)?(t=Us(t))&&("string"==typeof e||null!=e&&!$s(e))&&!(e=Ho(e))&&Tn(t)?Xo(Mn(t),0,n):t.split(e,n):[]},fi.spread=function(t,e){if("function"!=typeof t)throw new ie(l);return e=null==e?0:jn(Vs(e),0),Co(function(n){var i=n[e],o=Xo(n,0,e);return i&&tn(o,i),je(t,this,o)})},fi.tail=function(t){var e=null==t?0:t.length;return e?$o(t,1,e):[]},fi.take=function(t,e,n){return t&&t.length?$o(t,0,(e=n||e===r?1:Vs(e))<0?0:e):[]},fi.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?$o(t,(e=i-(e=n||e===r?1:Vs(e)))<0?0:e,i):[]},fi.takeRightWhile=function(t,e){return t&&t.length?zo(t,Nr(e,3),!1,!0):[]},fi.takeWhile=function(t,e){return t&&t.length?zo(t,Nr(e,3)):[]},fi.tap=function(t,e){return e(t),t},fi.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new ie(l);return Is(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),is(t,e,{leading:i,maxWait:e,trailing:o})},fi.thru=La,fi.toArray=Rs,fi.toPairs=ul,fi.toPairsIn=hl,fi.toPath=function(t){return ms(t)?Je(t,ca):Os(t)?[t]:ir(la(Us(t)))},fi.toPlainObject=Ws,fi.transform=function(t,e,n){var i=ms(t),o=i||bs(t)||Bs(t);if(e=Nr(e,4),null==n){var r=t&&t.constructor;n=o?i?new r:[]:Is(t)&&xs(r)?pi(Ae(t)):{}}return(o?qe:qi)(t,function(t,i,o){return e(n,t,i,o)}),n},fi.unary=function(t){return Ja(t,1)},fi.union=ka,fi.unionBy=Aa,fi.unionWith=Pa,fi.uniq=function(t){return t&&t.length?Ro(t):[]},fi.uniqBy=function(t,e){return t&&t.length?Ro(t,Nr(e,2)):[]},fi.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?Ro(t,r,e):[]},fi.unset=function(t,e){return null==t||Lo(t,e)},fi.unzip=Ea,fi.unzipWith=$a,fi.update=function(t,e,n){return null==t?t:Vo(t,e,Go(n))},fi.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Vo(t,e,Go(n),i)},fi.values=dl,fi.valuesIn=function(t){return null==t?[]:_n(t,ol(t))},fi.without=Da,fi.words=xl,fi.wrap=function(t,e){return cs(Go(e),t)},fi.xor=Ma,fi.xorBy=Oa,fi.xorWith=Ba,fi.zip=Na,fi.zipObject=function(t,e){return Uo(t||[],e||[],Ai)},fi.zipObjectDeep=function(t,e){return Uo(t||[],e||[],ko)},fi.zipWith=Ha,fi.entries=ul,fi.entriesIn=hl,fi.extend=Gs,fi.extendWith=qs,Ml(fi,fi),fi.add=Wl,fi.attempt=Cl,fi.camelCase=fl,fi.capitalize=pl,fi.ceil=Ul,fi.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=Fs(n))==n?n:0),e!==r&&(e=(e=Fs(e))==e?e:0),Oi(Fs(t),e,n)},fi.clone=function(t){return Bi(t,p)},fi.cloneDeep=function(t){return Bi(t,d|p)},fi.cloneDeepWith=function(t,e){return Bi(t,d|p,e="function"==typeof e?e:r)},fi.cloneWith=function(t,e){return Bi(t,p,e="function"==typeof e?e:r)},fi.conformsTo=function(t,e){return null==e||Ni(t,e,il(e))},fi.deburr=gl,fi.defaultTo=function(t,e){return null==t||t!=t?e:t},fi.divide=jl,fi.endsWith=function(t,e,n){t=Us(t),e=Ho(e);var i=t.length,o=n=n===r?i:Oi(Vs(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},fi.eq=ds,fi.escape=function(t){return(t=Us(t))&&Tt.test(t)?t.replace(xt,xn):t},fi.escapeRegExp=function(t){return(t=Us(t))&&Mt.test(t)?t.replace(Dt,"\\$&"):t},fi.every=function(t,e,n){var i=ms(t)?Xe:zi;return n&&qr(t,e,n)&&(e=r),i(t,Nr(e,3))},fi.find=Fa,fi.findIndex=ga,fi.findKey=function(t,e){return an(t,Nr(e,3),qi)},fi.findLast=Wa,fi.findLastIndex=ma,fi.findLastKey=function(t,e){return an(t,Nr(e,3),Yi)},fi.floor=Gl,fi.forEach=Ua,fi.forEachRight=ja,fi.forIn=function(t,e){return null==t?t:ji(t,Nr(e,3),ol)},fi.forInRight=function(t,e){return null==t?t:Gi(t,Nr(e,3),ol)},fi.forOwn=function(t,e){return t&&qi(t,Nr(e,3))},fi.forOwnRight=function(t,e){return t&&Yi(t,Nr(e,3))},fi.get=Zs,fi.gt=fs,fi.gte=ps,fi.has=function(t,e){return null!=t&&Wr(t,e,to)},fi.hasIn=Js,fi.head=_a,fi.identity=Pl,fi.includes=function(t,e,n,i){t=_s(t)?t:dl(t),n=n&&!i?Vs(n):0;var o=t.length;return n<0&&(n=jn(o+n,0)),Ms(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&ln(t,e,n)>-1},fi.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=null==n?0:Vs(n);return o<0&&(o=jn(i+o,0)),ln(t,e,o)},fi.inRange=function(t,e,n){return e=Ls(e),n===r?(n=e,e=0):n=Ls(n),function(t,e,n){return t>=Gn(e,n)&&t<jn(e,n)}(t=Fs(t),e,n)},fi.invoke=nl,fi.isArguments=gs,fi.isArray=ms,fi.isArrayBuffer=vs,fi.isArrayLike=_s,fi.isArrayLikeObject=ys,fi.isBoolean=function(t){return!0===t||!1===t||ks(t)&&Zi(t)==U},fi.isBuffer=bs,fi.isDate=ws,fi.isElement=function(t){return ks(t)&&1===t.nodeType&&!Es(t)},fi.isEmpty=function(t){if(null==t)return!0;if(_s(t)&&(ms(t)||"string"==typeof t||"function"==typeof t.splice||bs(t)||Bs(t)||gs(t)))return!t.length;var e=Fr(t);if(e==Q||e==nt)return!t.size;if(Kr(t))return!co(t).length;for(var n in t)if(ce.call(t,n))return!1;return!0},fi.isEqual=function(t,e){return ro(t,e)},fi.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?ro(t,e,r,n):!!i},fi.isError=Ss,fi.isFinite=function(t){return"number"==typeof t&&Fn(t)},fi.isFunction=xs,fi.isInteger=Cs,fi.isLength=Ts,fi.isMap=As,fi.isMatch=function(t,e){return t===e||ao(t,e,Rr(e))},fi.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,ao(t,e,Rr(e),n)},fi.isNaN=function(t){return Ps(t)&&t!=+t},fi.isNative=function(t){if(Qr(t))throw new o(s);return so(t)},fi.isNil=function(t){return null==t},fi.isNull=function(t){return null===t},fi.isNumber=Ps,fi.isObject=Is,fi.isObjectLike=ks,fi.isPlainObject=Es,fi.isRegExp=$s,fi.isSafeInteger=function(t){return Cs(t)&&t>=-O&&t<=O},fi.isSet=Ds,fi.isString=Ms,fi.isSymbol=Os,fi.isTypedArray=Bs,fi.isUndefined=function(t){return t===r},fi.isWeakMap=function(t){return ks(t)&&Fr(t)==at},fi.isWeakSet=function(t){return ks(t)&&Zi(t)==st},fi.join=function(t,e){return null==t?"":Wn.call(t,e)},fi.kebabCase=ml,fi.last=Sa,fi.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=Vs(n))<0?jn(i+o,0):Gn(o,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,o):sn(t,un,o,!0)},fi.lowerCase=vl,fi.lowerFirst=_l,fi.lt=Ns,fi.lte=Hs,fi.max=function(t){return t&&t.length?Fi(t,Pl,Ji):r},fi.maxBy=function(t,e){return t&&t.length?Fi(t,Nr(e,2),Ji):r},fi.mean=function(t){return hn(t,Pl)},fi.meanBy=function(t,e){return hn(t,Nr(e,2))},fi.min=function(t){return t&&t.length?Fi(t,Pl,ho):r},fi.minBy=function(t,e){return t&&t.length?Fi(t,Nr(e,2),ho):r},fi.stubArray=zl,fi.stubFalse=Fl,fi.stubObject=function(){return{}},fi.stubString=function(){return""},fi.stubTrue=function(){return!0},fi.multiply=ql,fi.nth=function(t,e){return t&&t.length?vo(t,Vs(e)):r},fi.noConflict=function(){return Me._===this&&(Me._=pe),this},fi.noop=Ol,fi.now=Za,fi.pad=function(t,e,n){t=Us(t);var i=(e=Vs(e))?Dn(t):0;if(!e||i>=e)return t;var o=(e-i)/2;return _r(Ln(o),n)+t+_r(Rn(o),n)},fi.padEnd=function(t,e,n){t=Us(t);var i=(e=Vs(e))?Dn(t):0;return e&&i<e?t+_r(e-i,n):t},fi.padStart=function(t,e,n){t=Us(t);var i=(e=Vs(e))?Dn(t):0;return e&&i<e?_r(e-i,n)+t:t},fi.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Yn(Us(t).replace(Bt,""),e||0)},fi.random=function(t,e,n){if(n&&"boolean"!=typeof n&&qr(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=Ls(t),e===r?(e=t,t=0):e=Ls(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=Xn();return Gn(t+o*(e-t+Pe("1e-"+((o+"").length-1))),e)}return So(t,e)},fi.reduce=function(t,e,n){var i=ms(t)?en:pn,o=arguments.length<3;return i(t,Nr(e,4),n,o,Li)},fi.reduceRight=function(t,e,n){var i=ms(t)?nn:pn,o=arguments.length<3;return i(t,Nr(e,4),n,o,Vi)},fi.repeat=function(t,e,n){return e=(n?qr(t,e,n):e===r)?1:Vs(e),xo(Us(t),e)},fi.replace=function(){var t=arguments,e=Us(t[0]);return t.length<3?e:e.replace(t[1],t[2])},fi.result=function(t,e,n){var i=-1,o=(e=qo(e,t)).length;for(o||(o=1,t=r);++i<o;){var a=null==t?r:t[ca(e[i])];a===r&&(i=o,a=n),t=xs(a)?a.call(t):a}return t},fi.round=Yl,fi.runInContext=t,fi.sample=function(t){return(ms(t)?Ci:To)(t)},fi.size=function(t){if(null==t)return 0;if(_s(t))return Ms(t)?Dn(t):t.length;var e=Fr(t);return e==Q||e==nt?t.size:co(t).length},fi.snakeCase=yl,fi.some=function(t,e,n){var i=ms(t)?on:Do;return n&&qr(t,e,n)&&(e=r),i(t,Nr(e,3))},fi.sortedIndex=function(t,e){return Mo(t,e)},fi.sortedIndexBy=function(t,e,n){return Oo(t,e,Nr(n,2))},fi.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Mo(t,e);if(i<n&&ds(t[i],e))return i}return-1},fi.sortedLastIndex=function(t,e){return Mo(t,e,!0)},fi.sortedLastIndexBy=function(t,e,n){return Oo(t,e,Nr(n,2),!0)},fi.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Mo(t,e,!0)-1;if(ds(t[n],e))return n}return-1},fi.startCase=bl,fi.startsWith=function(t,e,n){return t=Us(t),n=null==n?0:Oi(Vs(n),0,t.length),e=Ho(e),t.slice(n,n+e.length)==e},fi.subtract=Xl,fi.sum=function(t){return t&&t.length?gn(t,Pl):0},fi.sumBy=function(t,e){return t&&t.length?gn(t,Nr(e,2)):0},fi.template=function(t,e,n){var i=fi.templateSettings;n&&qr(t,e,n)&&(e=r),t=Us(t),e=qs({},e,i,Ir);var o,a,s=qs({},e.imports,i.imports,Ir),l=il(s),c=_n(s,l),u=0,h=e.interpolate||Qt,d="__p += '",f=ee((e.escape||Qt).source+"|"+h.source+"|"+(h===At?Ft:Qt).source+"|"+(e.evaluate||Qt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Te+"]")+"\n";t.replace(f,function(e,n,i,r,s,l){return i||(i=r),d+=t.slice(u,l).replace(Kt,Cn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),d+="';\n";var g=e.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(yt,""):d).replace(bt,"$1").replace(wt,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Cl(function(){return Zt(l,p+"return "+d).apply(r,c)});if(m.source=d,Ss(m))throw m;return m},fi.times=function(t,e){if((t=Vs(t))<1||t>O)return[];var n=H,i=Gn(t,H);e=Nr(e),t-=H;for(var o=mn(i,e);++n<t;)e(n);return o},fi.toFinite=Ls,fi.toInteger=Vs,fi.toLength=zs,fi.toLower=function(t){return Us(t).toLowerCase()},fi.toNumber=Fs,fi.toSafeInteger=function(t){return t?Oi(Vs(t),-O,O):0===t?t:0},fi.toString=Us,fi.toUpper=function(t){return Us(t).toUpperCase()},fi.trim=function(t,e,n){if((t=Us(t))&&(n||e===r))return t.replace(Ot,"");if(!t||!(e=Ho(e)))return t;var i=Mn(t),o=Mn(e);return Xo(i,bn(i,o),wn(i,o)+1).join("")},fi.trimEnd=function(t,e,n){if((t=Us(t))&&(n||e===r))return t.replace(Nt,"");if(!t||!(e=Ho(e)))return t;var i=Mn(t);return Xo(i,0,wn(i,Mn(e))+1).join("")},fi.trimStart=function(t,e,n){if((t=Us(t))&&(n||e===r))return t.replace(Bt,"");if(!t||!(e=Ho(e)))return t;var i=Mn(t);return Xo(i,bn(i,Mn(e))).join("")},fi.truncate=function(t,e){var n=k,i=A;if(Is(e)){var o="separator"in e?e.separator:o;n="length"in e?Vs(e.length):n,i="omission"in e?Ho(e.omission):i}var a=(t=Us(t)).length;if(Tn(t)){var s=Mn(t);a=s.length}if(n>=a)return t;var l=n-Dn(i);if(l<1)return i;var c=s?Xo(s,0,l).join(""):t.slice(0,l);if(o===r)return c+i;if(s&&(l+=c.length-l),$s(o)){if(t.slice(l).search(o)){var u,h=c;for(o.global||(o=ee(o.source,Us(Wt.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var d=u.index;c=c.slice(0,d===r?l:d)}}else if(t.indexOf(Ho(o),l)!=l){var f=c.lastIndexOf(o);f>-1&&(c=c.slice(0,f))}return c+i},fi.unescape=function(t){return(t=Us(t))&&Ct.test(t)?t.replace(St,On):t},fi.uniqueId=function(t){var e=++ue;return Us(t)+e},fi.upperCase=wl,fi.upperFirst=Sl,fi.each=Ua,fi.eachRight=ja,fi.first=_a,Ml(fi,function(){var t={};return qi(fi,function(e,n){ce.call(fi.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),fi.VERSION="4.17.10",qe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){fi[t].placeholder=fi}),qe(["drop","take"],function(t,e){vi.prototype[t]=function(n){n=n===r?1:jn(Vs(n),0);var i=this.__filtered__&&!e?new vi(this):this.clone();return i.__filtered__?i.__takeCount__=Gn(n,i.__takeCount__):i.__views__.push({size:Gn(n,H),type:t+(i.__dir__<0?"Right":"")}),i},vi.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),qe(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==$||3==n;vi.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Nr(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),qe(["head","last"],function(t,e){var n="take"+(e?"Right":"");vi.prototype[t]=function(){return this[n](1).value()[0]}}),qe(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");vi.prototype[t]=function(){return this.__filtered__?new vi(this):this[n](1)}}),vi.prototype.compact=function(){return this.filter(Pl)},vi.prototype.find=function(t){return this.filter(t).head()},vi.prototype.findLast=function(t){return this.reverse().find(t)},vi.prototype.invokeMap=Co(function(t,e){return"function"==typeof t?new vi(this):this.map(function(n){return io(n,t,e)})}),vi.prototype.reject=function(t){return this.filter(ss(Nr(t)))},vi.prototype.slice=function(t,e){t=Vs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new vi(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=Vs(e))<0?n.dropRight(-e):n.take(e-t)),n)},vi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},vi.prototype.toArray=function(){return this.take(H)},qi(vi.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=fi[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(fi.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,l=e instanceof vi,c=s[0],u=l||ms(e),h=function(t){var e=o.apply(fi,tn([t],s));return i&&d?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,g=l&&!f;if(!a&&u){e=g?e:new vi(this);var m=t.apply(e,s);return m.__actions__.push({func:La,args:[h],thisArg:r}),new mi(m,d)}return p&&g?t.apply(this,s):(m=this.thru(h),p?i?m.value()[0]:m.value():m)})}),qe(["pop","push","shift","sort","splice","unshift"],function(t){var e=oe[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);fi.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var o=this.value();return e.apply(ms(o)?o:[],t)}return this[n](function(n){return e.apply(ms(n)?n:[],t)})}}),qi(vi.prototype,function(t,e){var n=fi[e];if(n){var i=n.name+"";(oi[i]||(oi[i]=[])).push({name:e,func:n})}}),oi[pr(r,_).name]=[{name:"wrapper",func:r}],vi.prototype.clone=function(){var t=new vi(this.__wrapped__);return t.__actions__=ir(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ir(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ir(this.__views__),t},vi.prototype.reverse=function(){if(this.__filtered__){var t=new vi(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},vi.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=ms(t),i=e<0,o=n?t.length:0,r=function(t,e,n){for(var i=-1,o=n.length;++i<o;){var r=n[i],a=r.size;switch(r.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Gn(e,t+a);break;case"takeRight":t=jn(t,e-a)}}return{start:t,end:e}}(0,o,this.__views__),a=r.start,s=r.end,l=s-a,c=i?s:a-1,u=this.__iteratees__,h=u.length,d=0,f=Gn(l,this.__takeCount__);if(!n||!i&&o==l&&f==l)return Fo(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var g=-1,m=t[c+=e];++g<h;){var v=u[g],_=v.iteratee,y=v.type,b=_(m);if(y==D)m=b;else if(!b){if(y==$)continue t;break t}}p[d++]=m}return p},fi.prototype.at=Va,fi.prototype.chain=function(){return Ra(this)},fi.prototype.commit=function(){return new mi(this.value(),this.__chain__)},fi.prototype.next=function(){this.__values__===r&&(this.__values__=Rs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},fi.prototype.plant=function(t){for(var e,n=this;n instanceof gi;){var i=ha(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},fi.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof vi){var e=t;return this.__actions__.length&&(e=new vi(this)),(e=e.reverse()).__actions__.push({func:La,args:[Ia],thisArg:r}),new mi(e,this.__chain__)}return this.thru(Ia)},fi.prototype.toJSON=fi.prototype.valueOf=fi.prototype.value=function(){return Fo(this.__wrapped__,this.__actions__)},fi.prototype.first=fi.prototype.head,He&&(fi.prototype[He]=function(){return this}),fi}();Me._=Bn,(o=function(){return Bn}.call(e,n,e,i))===r||(i.exports=o)}).call(this)}).call(this,n(17),n(23)(t))},function(t,e,n){"use strict";var i=n(129).default;n(136),(e=t.exports=i).default=e},function(t,e,n){"use strict";var i=n(130),o=n(135);i.default.__addLocaleData(o.default),i.default.defaultLocale="en",e.default=i.default},function(t,e,n){"use strict";var i=n(55),o=n(131),r=n(132),a=n(133);function s(t,e,n){var i="string"==typeof t?s.__parse(t):t;if(!i||"messageFormatPattern"!==i.type)throw new TypeError("A message must be provided as a String or AST.");n=this._mergeFormats(s.formats,n),o.defineProperty(this,"_locale",{value:this._resolveLocale(e)});var r=this._findPluralRuleFunction(this._locale),a=this._compilePattern(i,e,n,r),l=this;this.format=function(e){try{return l._format(a,e)}catch(e){throw e.variableId?new Error("The intl string context variable '"+e.variableId+"' was not provided to the string '"+t+"'"):e}}}e.default=s,o.defineProperty(s,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),o.defineProperty(s,"__localeData__",{value:o.objCreate(null)}),o.defineProperty(s,"__addLocaleData",{value:function(t){if(!t||!t.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");s.__localeData__[t.locale.toLowerCase()]=t}}),o.defineProperty(s,"__parse",{value:a.default.parse}),o.defineProperty(s,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),s.prototype.resolvedOptions=function(){return{locale:this._locale}},s.prototype._compilePattern=function(t,e,n,i){return new r.default(e,n,i).compile(t)},s.prototype._findPluralRuleFunction=function(t){for(var e=s.__localeData__,n=e[t.toLowerCase()];n;){if(n.pluralRuleFunction)return n.pluralRuleFunction;n=n.parentLocale&&e[n.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+t)},s.prototype._format=function(t,e){var n,o,r,a,s,l,c="";for(n=0,o=t.length;n<o;n+=1)if("string"!=typeof(r=t[n])){if(a=r.id,!e||!i.hop.call(e,a))throw(l=new Error("A value must be provided for: "+a)).variableId=a,l;s=e[a],r.options?c+=this._format(r.getOption(s),e):c+=r.format(s)}else c+=r;return c},s.prototype._mergeFormats=function(t,e){var n,r,a={};for(n in t)i.hop.call(t,n)&&(a[n]=r=o.objCreate(t[n]),e&&i.hop.call(e,n)&&i.extend(r,e[n]));return a},s.prototype._resolveLocale=function(t){"string"==typeof t&&(t=[t]),t=(t||[]).concat(s.defaultLocale);var e,n,i,o,r=s.__localeData__;for(e=0,n=t.length;e<n;e+=1)for(i=t[e].toLowerCase().split("-");i.length;){if(o=r[i.join("-")])return o.locale;i.pop()}var a=t.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+t.join(", ")+", or the default locale: "+a)}},function(t,e,n){"use strict";var i=n(55),o=function(){try{return!!Object.defineProperty({},"a",{})}catch(t){return!1}}(),r=(!o&&Object.prototype.__defineGetter__,o?Object.defineProperty:function(t,e,n){"get"in n&&t.__defineGetter__?t.__defineGetter__(e,n.get):(!i.hop.call(t,e)||"value"in n)&&(t[e]=n.value)}),a=Object.create||function(t,e){var n,o;function a(){}for(o in a.prototype=t,n=new a,e)i.hop.call(e,o)&&r(n,o,e[o]);return n};e.defineProperty=r,e.objCreate=a},function(t,e,n){"use strict";function i(t,e,n){this.locales=t,this.formats=e,this.pluralFn=n}function o(t){this.id=t}function r(t,e,n,i,o){this.id=t,this.useOrdinal=e,this.offset=n,this.options=i,this.pluralFn=o}function a(t,e,n,i){this.id=t,this.offset=e,this.numberFormat=n,this.string=i}function s(t,e){this.id=t,this.options=e}e.default=i,i.prototype.compile=function(t){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(t)},i.prototype.compileMessage=function(t){if(!t||"messageFormatPattern"!==t.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var e,n,i,o=t.elements,r=[];for(e=0,n=o.length;e<n;e+=1)switch((i=o[e]).type){case"messageTextElement":r.push(this.compileMessageText(i));break;case"argumentElement":r.push(this.compileArgument(i));break;default:throw new Error("Message element does not have a valid type")}return r},i.prototype.compileMessageText=function(t){return this.currentPlural&&/(^|[^\\])#/g.test(t.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new a(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,t.value)):t.value.replace(/\\#/g,"#")},i.prototype.compileArgument=function(t){var e=t.format;if(!e)return new o(t.id);var n,i=this.formats,a=this.locales,l=this.pluralFn;switch(e.type){case"numberFormat":return n=i.number[e.style],{id:t.id,format:new Intl.NumberFormat(a,n).format};case"dateFormat":return n=i.date[e.style],{id:t.id,format:new Intl.DateTimeFormat(a,n).format};case"timeFormat":return n=i.time[e.style],{id:t.id,format:new Intl.DateTimeFormat(a,n).format};case"pluralFormat":return n=this.compileOptions(t),new r(t.id,e.ordinal,e.offset,n,l);case"selectFormat":return n=this.compileOptions(t),new s(t.id,n);default:throw new Error("Message element does not have a valid format type")}},i.prototype.compileOptions=function(t){var e,n,i,o=t.format,r=o.options,a={};for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===o.type?t:null,e=0,n=r.length;e<n;e+=1)a[(i=r[e]).selector]=this.compileMessage(i.value);return this.currentPlural=this.pluralStack.pop(),a},o.prototype.format=function(t){return t||"number"==typeof t?"string"==typeof t?t:String(t):""},r.prototype.getOption=function(t){var e=this.options;return e["="+t]||e[this.pluralFn(t-this.offset,this.useOrdinal)]||e.other},a.prototype.format=function(t){var e=this.numberFormat.format(t-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+e).replace(/\\#/g,"#")},s.prototype.getOption=function(t){var e=this.options;return e[t]||e.other}},function(t,e,n){"use strict";(e=t.exports=n(134).default).default=e},function(t,e,n){"use strict";e.default=function(){function t(e,n,i,o){this.message=e,this.expected=n,this.found=i,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(t,Error),{SyntaxError:t,parse:function(e){var n,i=arguments.length>1?arguments[1]:{},o={},r={start:Et},a=Et,s=function(t){return{type:"messageFormatPattern",elements:t,location:Tt()}},l=function(t){var e,n,i,o,r,a="";for(e=0,i=t.length;e<i;e+=1)for(n=0,r=(o=t[e]).length;n<r;n+=1)a+=o[n];return a},c=function(t){return{type:"messageTextElement",value:t,location:Tt()}},u=/^[^ \t\n\r,.+={}#]/,h={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},d="{",f={type:"literal",value:"{",description:'"{"'},p=",",g={type:"literal",value:",",description:'","'},m="}",v={type:"literal",value:"}",description:'"}"'},_=function(t,e){return{type:"argumentElement",id:t,format:e&&e[2],location:Tt()}},y="number",b={type:"literal",value:"number",description:'"number"'},w="date",S={type:"literal",value:"date",description:'"date"'},x="time",C={type:"literal",value:"time",description:'"time"'},T=function(t,e){return{type:t+"Format",style:e&&e[2],location:Tt()}},I="plural",k={type:"literal",value:"plural",description:'"plural"'},A=function(t){return{type:t.type,ordinal:!1,offset:t.offset||0,options:t.options,location:Tt()}},P="selectordinal",E={type:"literal",value:"selectordinal",description:'"selectordinal"'},$=function(t){return{type:t.type,ordinal:!0,offset:t.offset||0,options:t.options,location:Tt()}},D="select",M={type:"literal",value:"select",description:'"select"'},O=function(t){return{type:"selectFormat",options:t,location:Tt()}},B="=",N={type:"literal",value:"=",description:'"="'},H=function(t,e){return{type:"optionalFormatPattern",selector:t,value:e,location:Tt()}},R="offset:",L={type:"literal",value:"offset:",description:'"offset:"'},V=function(t){return t},z=function(t,e){return{type:"pluralFormat",offset:t,options:e,location:Tt()}},F={type:"other",description:"whitespace"},W=/^[ \t\n\r]/,U={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},j={type:"other",description:"optionalWhitespace"},G=/^[0-9]/,q={type:"class",value:"[0-9]",description:"[0-9]"},Y=/^[0-9a-f]/i,X={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Q="0",K={type:"literal",value:"0",description:'"0"'},Z=/^[1-9]/,J={type:"class",value:"[1-9]",description:"[1-9]"},tt=function(t){return parseInt(t,10)},et=/^[^{}\\\0-\x1F \t\n\r]/,nt={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},it="\\\\",ot={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},rt=function(){return"\\"},at="\\#",st={type:"literal",value:"\\#",description:'"\\\\#"'},lt=function(){return"\\#"},ct="\\{",ut={type:"literal",value:"\\{",description:'"\\\\{"'},ht=function(){return"{"},dt="\\}",ft={type:"literal",value:"\\}",description:'"\\\\}"'},pt=function(){return"}"},gt="\\u",mt={type:"literal",value:"\\u",description:'"\\\\u"'},vt=function(t){return String.fromCharCode(parseInt(t,16))},_t=function(t){return t.join("")},yt=0,bt=0,wt=[{line:1,column:1,seenCR:!1}],St=0,xt=[],Ct=0;if("startRule"in i){if(!(i.startRule in r))throw new Error("Can't start parsing from rule \""+i.startRule+'".');a=r[i.startRule]}function Tt(){return kt(bt,yt)}function It(t){var n,i,o=wt[t];if(o)return o;for(n=t-1;!wt[n];)n--;for(o={line:(o=wt[n]).line,column:o.column,seenCR:o.seenCR};n<t;)"\n"===(i=e.charAt(n))?(o.seenCR||o.line++,o.column=1,o.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(o.line++,o.column=1,o.seenCR=!0):(o.column++,o.seenCR=!1),n++;return wt[t]=o,o}function kt(t,e){var n=It(t),i=It(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:i.line,column:i.column}}}function At(t){yt<St||(yt>St&&(St=yt,xt=[]),xt.push(t))}function Pt(e,n,i,o){return null!==n&&function(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(n),new t(null!==e?e:function(t,e){var n,i=new Array(t.length);for(n=0;n<t.length;n++)i[n]=t[n].description;return"Expected "+(t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}(e)+'"':"end of input")+" found."}(n,i),n,i,o)}function Et(){return $t()}function $t(){var t,e,n;for(t=yt,e=[],n=Dt();n!==o;)e.push(n),n=Dt();return e!==o&&(bt=t,e=s(e)),t=e}function Dt(){var t;return(t=function(){var t,n;return t=yt,(n=function(){var t,n,i,r,a,s;if(t=yt,n=[],i=yt,(r=Nt())!==o&&(a=zt())!==o&&(s=Nt())!==o?i=r=[r,a,s]:(yt=i,i=o),i!==o)for(;i!==o;)n.push(i),i=yt,(r=Nt())!==o&&(a=zt())!==o&&(s=Nt())!==o?i=r=[r,a,s]:(yt=i,i=o);else n=o;return n!==o&&(bt=t,n=l(n)),(t=n)===o&&(t=yt,n=Bt(),t=n!==o?e.substring(t,yt):n),t}())!==o&&(bt=t,n=c(n)),t=n}())===o&&(t=function(){var t,n,i,r,a,s,l;return t=yt,123===e.charCodeAt(yt)?(n=d,yt++):(n=o,0===Ct&&At(f)),n!==o&&Nt()!==o&&(i=function(){var t,n,i;if((t=Lt())===o){if(t=yt,n=[],u.test(e.charAt(yt))?(i=e.charAt(yt),yt++):(i=o,0===Ct&&At(h)),i!==o)for(;i!==o;)n.push(i),u.test(e.charAt(yt))?(i=e.charAt(yt),yt++):(i=o,0===Ct&&At(h));else n=o;t=n!==o?e.substring(t,yt):n}return t}())!==o&&Nt()!==o?(r=yt,44===e.charCodeAt(yt)?(a=p,yt++):(a=o,0===Ct&&At(g)),a!==o&&(s=Nt())!==o&&(l=function(){var t;return(t=function(){var t,n,i,r,a,s;return t=yt,e.substr(yt,6)===y?(n=y,yt+=6):(n=o,0===Ct&&At(b)),n===o&&(e.substr(yt,4)===w?(n=w,yt+=4):(n=o,0===Ct&&At(S)),n===o&&(e.substr(yt,4)===x?(n=x,yt+=4):(n=o,0===Ct&&At(C)))),n!==o&&Nt()!==o?(i=yt,44===e.charCodeAt(yt)?(r=p,yt++):(r=o,0===Ct&&At(g)),r!==o&&(a=Nt())!==o&&(s=zt())!==o?i=r=[r,a,s]:(yt=i,i=o),i===o&&(i=null),i!==o?(bt=t,n=T(n,i),t=n):(yt=t,t=o)):(yt=t,t=o),t}())===o&&(t=function(){var t,n,i,r;return t=yt,e.substr(yt,6)===I?(n=I,yt+=6):(n=o,0===Ct&&At(k)),n!==o&&Nt()!==o?(44===e.charCodeAt(yt)?(i=p,yt++):(i=o,0===Ct&&At(g)),i!==o&&Nt()!==o&&(r=Ot())!==o?(bt=t,n=A(r),t=n):(yt=t,t=o)):(yt=t,t=o),t}())===o&&(t=function(){var t,n,i,r;return t=yt,e.substr(yt,13)===P?(n=P,yt+=13):(n=o,0===Ct&&At(E)),n!==o&&Nt()!==o?(44===e.charCodeAt(yt)?(i=p,yt++):(i=o,0===Ct&&At(g)),i!==o&&Nt()!==o&&(r=Ot())!==o?(bt=t,n=$(r),t=n):(yt=t,t=o)):(yt=t,t=o),t}())===o&&(t=function(){var t,n,i,r,a;if(t=yt,e.substr(yt,6)===D?(n=D,yt+=6):(n=o,0===Ct&&At(M)),n!==o)if(Nt()!==o)if(44===e.charCodeAt(yt)?(i=p,yt++):(i=o,0===Ct&&At(g)),i!==o)if(Nt()!==o){if(r=[],(a=Mt())!==o)for(;a!==o;)r.push(a),a=Mt();else r=o;r!==o?(bt=t,n=O(r),t=n):(yt=t,t=o)}else yt=t,t=o;else yt=t,t=o;else yt=t,t=o;else yt=t,t=o;return t}()),t}())!==o?r=a=[a,s,l]:(yt=r,r=o),r===o&&(r=null),r!==o&&(a=Nt())!==o?(125===e.charCodeAt(yt)?(s=m,yt++):(s=o,0===Ct&&At(v)),s!==o?(bt=t,n=_(i,r),t=n):(yt=t,t=o)):(yt=t,t=o)):(yt=t,t=o),t}()),t}function Mt(){var t,n,i,r,a;return t=yt,Nt()!==o&&(n=function(){var t,n,i,r;return t=yt,n=yt,61===e.charCodeAt(yt)?(i=B,yt++):(i=o,0===Ct&&At(N)),i!==o&&(r=Lt())!==o?n=i=[i,r]:(yt=n,n=o),(t=n!==o?e.substring(t,yt):n)===o&&(t=zt()),t}())!==o&&Nt()!==o?(123===e.charCodeAt(yt)?(i=d,yt++):(i=o,0===Ct&&At(f)),i!==o&&Nt()!==o&&(r=$t())!==o&&Nt()!==o?(125===e.charCodeAt(yt)?(a=m,yt++):(a=o,0===Ct&&At(v)),a!==o?(bt=t,t=H(n,r)):(yt=t,t=o)):(yt=t,t=o)):(yt=t,t=o),t}function Ot(){var t,n,i,r;if(t=yt,(n=function(){var t,n,i;return t=yt,e.substr(yt,7)===R?(n=R,yt+=7):(n=o,0===Ct&&At(L)),n!==o&&Nt()!==o&&(i=Lt())!==o?(bt=t,t=n=V(i)):(yt=t,t=o),t}())===o&&(n=null),n!==o)if(Nt()!==o){if(i=[],(r=Mt())!==o)for(;r!==o;)i.push(r),r=Mt();else i=o;i!==o?(bt=t,t=n=z(n,i)):(yt=t,t=o)}else yt=t,t=o;else yt=t,t=o;return t}function Bt(){var t,n;if(Ct++,t=[],W.test(e.charAt(yt))?(n=e.charAt(yt),yt++):(n=o,0===Ct&&At(U)),n!==o)for(;n!==o;)t.push(n),W.test(e.charAt(yt))?(n=e.charAt(yt),yt++):(n=o,0===Ct&&At(U));else t=o;return Ct--,t===o&&(n=o,0===Ct&&At(F)),t}function Nt(){var t,n,i;for(Ct++,t=yt,n=[],i=Bt();i!==o;)n.push(i),i=Bt();return t=n!==o?e.substring(t,yt):n,Ct--,t===o&&(n=o,0===Ct&&At(j)),t}function Ht(){var t;return G.test(e.charAt(yt))?(t=e.charAt(yt),yt++):(t=o,0===Ct&&At(q)),t}function Rt(){var t;return Y.test(e.charAt(yt))?(t=e.charAt(yt),yt++):(t=o,0===Ct&&At(X)),t}function Lt(){var t,n,i,r,a,s;if(t=yt,48===e.charCodeAt(yt)?(n=Q,yt++):(n=o,0===Ct&&At(K)),n===o){if(n=yt,i=yt,Z.test(e.charAt(yt))?(r=e.charAt(yt),yt++):(r=o,0===Ct&&At(J)),r!==o){for(a=[],s=Ht();s!==o;)a.push(s),s=Ht();a!==o?i=r=[r,a]:(yt=i,i=o)}else yt=i,i=o;n=i!==o?e.substring(n,yt):i}return n!==o&&(bt=t,n=tt(n)),t=n}function Vt(){var t,n,i,r,a,s,l,c;return et.test(e.charAt(yt))?(t=e.charAt(yt),yt++):(t=o,0===Ct&&At(nt)),t===o&&(t=yt,e.substr(yt,2)===it?(n=it,yt+=2):(n=o,0===Ct&&At(ot)),n!==o&&(bt=t,n=rt()),(t=n)===o&&(t=yt,e.substr(yt,2)===at?(n=at,yt+=2):(n=o,0===Ct&&At(st)),n!==o&&(bt=t,n=lt()),(t=n)===o&&(t=yt,e.substr(yt,2)===ct?(n=ct,yt+=2):(n=o,0===Ct&&At(ut)),n!==o&&(bt=t,n=ht()),(t=n)===o&&(t=yt,e.substr(yt,2)===dt?(n=dt,yt+=2):(n=o,0===Ct&&At(ft)),n!==o&&(bt=t,n=pt()),(t=n)===o&&(t=yt,e.substr(yt,2)===gt?(n=gt,yt+=2):(n=o,0===Ct&&At(mt)),n!==o?(i=yt,r=yt,(a=Rt())!==o&&(s=Rt())!==o&&(l=Rt())!==o&&(c=Rt())!==o?r=a=[a,s,l,c]:(yt=r,r=o),(i=r!==o?e.substring(i,yt):r)!==o?(bt=t,t=n=vt(i)):(yt=t,t=o)):(yt=t,t=o)))))),t}function zt(){var t,e,n;if(t=yt,e=[],(n=Vt())!==o)for(;n!==o;)e.push(n),n=Vt();else e=o;return e!==o&&(bt=t,e=_t(e)),t=e}if((n=a())!==o&&yt===e.length)return n;throw n!==o&&yt<e.length&&At({type:"end",description:"end of input"}),Pt(null,xt,St<e.length?e.charAt(St):null,St<e.length?kt(St,St+1):kt(St,St))}}}()},function(t,e,n){"use strict";e.default={locale:"en",pluralRuleFunction:function(t,e){var n=String(t).split("."),i=!n[1],o=Number(n[0])==t,r=o&&n[0].slice(-1),a=o&&n[0].slice(-2);return e?1==r&&11!=a?"one":2==r&&12!=a?"two":3==r&&13!=a?"few":"other":1==t&&i?"one":"other"}}},function(t,e){},function(t,e,n){var i,o;i=[n(0),n(1),n(4),n(7),n(48),n(47),n(149),n(152)],void 0===(o=function(t,e,n,i,o,r,a,s){var l=o.extend({events:{vtaphold:"_decideToHandleTapHold",vmousedown:"_handleMouseDown"},_imageLoader:null,initialize:function(){this._payloadPreProcessor=this._payloadPreProcessor.bind(this),o.prototype.initialize.apply(this,arguments)},_create:function(){return this._createBkgEditUI()},_tapHoldIsAllowed:function(e){return!(!t(e.target).hasClass("editable-region")||!1!==t(document.activeElement).hasClass("editable-region"))},_preloadImage:function(t,e){this._imageLoader&&(this._imageLoader.onload=null,this._imageLoader.src=""),this._imageLoader=new Image,this._imageLoader.src=t,this._imageLoader.width?e():this._imageLoader.onload=e},_payloadPreProcessor:function(t,e){if(!i.isMobile&&t&&t.content_items){var n=t.content_items[0];if(n&&n.src){var o=this._getBkgImageItem();o&&(n.src=r._adjustImageURLSize(n.src,{model:o}),r._setImagePayloadURL(n.image,n.src))}}return t},_workaroundIE11FocusBug:function(t){if(n.isIE&&"false"==t.$el.attr("contenteditable")){var e=document.createRange();e.setStart(t.el,0),window.getSelection().addRange(e)}},remove:function(){return this._removeBkgEditView(),o.prototype.remove.call(this)}});return e.defaults(l.prototype,a,s),l}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(7),n(150)],void 0===(o=function(t,e,n,i){return i.extend({events:{strictclick:"_handleClicked"},sectionModel:null,initialize:function(t){this._create(),i.prototype.initialize.apply(this,arguments)},_create:function(){this.setElement(n.create$Element("a",{class:"attribution-button"})),this.$el.css("display","inline-block")},_handleClicked:function(t){return this.model&&this.$el.trigger("showAttribution",[t.target,this.model.getImage(),this.model]),!1},render:function(){this.ensureModel();var t=this.model&&this.model.getImage(),n=t&&t.get("license");return n&&!e.isEmpty(n)?this.$el.show():this.$el.hide(),this}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(7),n(150),n(15)],void 0===(o=function(t,e,n,i,o){return i.extend({events:{strictclick:"_handleClicked"},initialize:function(t){this._create(),i.prototype.initialize.apply(this,arguments)},_create:function(){this.setElement(n.create$Element("a",{class:"image-warning-button"})),this.$el.css("display","inline-block")},_handleClicked:function(t){var e=o.getString("editor.dialogs.resolution.title"),n=o.getString("editor.dialogs.resolution.text");return this.$el.trigger("showPopup",[t.target,e,n]),!1},willLookBad:function(){var t=this.model&&this.model.getImage();if(!t)return!1;if(t.get("is_preview"))return!1;var e=this.model.parent.get("type"),n=t.get("image_width"),i=t.get("image_height");if(n&&i)switch(e){case"full-width":if(n<=512)return!0;break;default:if(n<=512||i<=512)return!0}return!1},render:function(){return this.ensureModel(),this.willLookBad()?this.$el.show():this.$el.hide(),this}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(24),n(7),n(137),n(49),n(154),n(15)],void 0===(o=function(t,e,n,i,o,r,a,s){return o.extend({events:function(){return t.extend({},o.prototype.events,{strictclick:"_handleClick","focusout .caption-editable":"_handleFocusOutCaption","balloon-select .image-style-inline-button":"_handleSelectInline","balloon-select .image-style-fullscreen-button":"_handleSelectFullscreen","balloon-select .image-style-window-button":"_handleSelectWindow","balloon-select .image-style-full-width-button":"_handleSelectFullWidth","balloon-select  .move-balloon-button":"_handleSelectMoveImage","balloon-select .focal-point-ui-button":"_handleFocalPointUIButton","balloon-select .replace-button":"_handleSelectChange","balloon-select .delete-button":"_handleDeleteImage","strictclick .move-up-button":"_handleMoveUp","strictclick .move-down-button":"_handleMoveDown"})},buttonSet:[["inline","fullscreen","window","fullwidth","move","focalpoint","replace","delete"]],buttonSetNoMove:[["inline","fullscreen","window","fullwidth","focalpoint","replace","delete"]],_activeBalloonSelector:".image-style-fullscreen-button",initialize:function(t){o.prototype.initialize.call(this),this._create(),this.$el.attr("data-cid",this.model.cid),this.$el.data("view",this),this.imageOptionsBalloon=new i.ContextBalloonView({el:this.$imageOptionsBalloon,position:{percentX:.5,percentY:.25,offsetY:0},buttons:this.buttonSet}),t&&t.intent&&setTimeout(function(){switch(t.intent){case"edit":this.$el.trigger("showImagePicker",[this]),this.imageOptionsBalloon.hideAll();break;case"select":this.updateBalloonSet(),this.imageOptionsBalloon.activate(this._activeBalloonSelector),this.imageOptionsBalloon.show({keepContext:!0});break;case"move":this.showMoveButtons()}setTimeout(function(){this.scrollSectionIntoView()}.bind(this),201)}.bind(this),1),this.listenTo(this.model,"change descendant:change descendant:add",this.render),this.listenTo(this.model.settings,"change",this.render),this.listenTo(this.model.children,"select",this.simpleHandleModelSelect)},_create:function(){if(this.template){this.setElement(this.template.$render(this.model,null,{payloadPreProcessor:this._payloadPreProcessor})),this.$sectionView=this.$el.children(".section-view"),this.$quote=this.$(".pull-quote"),this.$quote.length||(this.$quote=this._$createQuoteEl().appendTo(this.$sectionView)),this.$caption=this.$quote.find(".content-container"),this.refreshPlaceholder(),this.refreshBrokenImageState(this.model.findFirstChildByType("img"),this.$el);var e=this.$caption.text();this.$caption.empty(),this.$captionEditable=t(document.createElement("span")).addClass("caption-editable").text(e).appendTo(this.$caption),this.captionEditableRegionView=new r({el:this.$captionEditable,placeholder:s.getString("editor.image.caption-plus"),initiallyEditable:!1}),this.listenTo(this.captionEditableRegionView,"contentChanged",this._handleCaptionChange),this.listenTo(this.captionEditableRegionView,"enterKeyPressed",this._handleEnterKeyPressed),this.listenTo(this.captionEditableRegionView,"paste",this._handlePaste),this.listenTo(this.captionEditableRegionView,"blur",this.render)}this._captionAlignment=this.model.settings.get("caption_align"),this._originalCaptionOpacity=this.$caption.css("opacity"),this.$imageOptionsBalloon=i.create$Element("div",{class:"fit-in-container"}),this.$el.prepend(this.$imageOptionsBalloon),o.prototype._create.apply(this,arguments)},_$createQuoteEl:function(){var e=i.createElement,n=e("div",{class:"pull-quote","data-fade-in":".5","data-fade-out":".5","data-duration":"1.5"}),o=e("div",{class:"pull-quote-view"}),r=e("div",{class:"content-container"});return o.appendChild(r),n.appendChild(o),t(n)},getSourceForDrop:function(t){var e=this.model.findFirstChildByType("img");return i.getSourceStrForModel("update",e)},_handleCaptionChange:function(t){return this.$el.trigger("updateText",[this.model.findFirstChildByType("img"),t]),this.refreshPlaceholder(),!1},_handleEnterKeyPressed:function(){this.triggerSelectNone()},_handlePaste:function(t,e){this.$el.trigger("pasteContent",[this.model.findFirstChildByType("img"),this.captionEditableRegionView,e])},_handleFocusOutCaption:function(){this.captionEditableRegionView.setEditable(!1)},_enterTapHoldMode:function(t){o.prototype._enterTapHoldMode.apply(this,arguments),this.imageOptionsBalloon.hideAll(),this.$caption.css("opacity",this._originalCaptionOpacity/2)},_handleMoveInTapHoldMode:function(e){o.prototype._handleMoveInTapHoldMode.apply(this,arguments);var i=e.clientX-this._originalMousePosition.x,r=e.clientY-this._originalMousePosition.y;this.$caption.css(n.vendorPrefix+"transform","translate3d("+i+"px, "+r+"px, 0px)"),(e.clientX<0||e.clientX>t(window).width())&&this._exitTapHoldMode(e)},_exitTapHoldMode:function(e){o.prototype._exitTapHoldMode.apply(this,arguments);var i="caption-left";Math.min(t(window).width(),Math.max(e.clientX,0))>this.$el.width()/2&&(i="caption-right"),this.$el.trigger("updateSettingValue",[this.model,"caption_align",i]),this.$caption.css(n.vendorPrefix+"transform",""),this.$caption.css("opacity",this._originalCaptionOpacity)},refreshPlaceholder:function(){""===this.$caption.text()?this.$quote.addClass("empty-caption"):this.$quote.removeClass("empty-caption")},_onShowBkgEditView:function(){this.imageOptionsBalloon.hideAll()},_onHideBkgEditView:function(){this.imageOptionsBalloon.hide()},_handleClick:function(e){if(!this.$el.hasClass("background-edit-mode")){if(!this.$el.hasClass("tap-hold-mode"))return t(e.target).closest(".pull-quote-view").length>0?this._handleCaptionClick():this._handleImageClick();this.imageOptionsBalloon.hideAll()}},_handleImageClick:function(){return this.$el.trigger("hideImagePicker",[this]),this.imageOptionsBalloon.isHidden()?this.selectImage():this.triggerSelectNone(),!1},selectImage:function(){var t=this.model.findFirstChildByType("img");this.triggerSelect({selection:t,type:"img",action:"update"}),this.updateBalloonSet(),this.imageOptionsBalloon.activate(this._activeBalloonSelector),this.imageOptionsBalloon.show({keepContext:!0})},_handleCaptionClick:function(){if(this.$quote.css("opacity")<.02)return!1;this._workaroundIE11FocusBug(this.captionEditableRegionView),this.captionEditableRegionView.setEditable(!0),i.isMobile||this.captionEditableRegionView.$el.focus();var t=this.model.findFirstChildByType("img");this.triggerSelect({selection:t,type:"caption",action:"update",balloons:!1})},_handleSelectChange:function(){this.$el.trigger("showImagePicker",[this,{hideBalloons:!0}])},_handleSelectInline:function(){this.convertImage("inline")},_handleSelectFullscreen:function(){this.convertImage("zoom")},_handleSelectWindow:function(){this.convertImage("window")},_handleSelectFullWidth:function(){this.convertImage("full-width")},convertImage:function(t){if(this.model.get("type")!==t){var e=this.model.findFirstChildByType("img");this.$el.trigger("convertImage",[this,e,t])}},_handleDeleteImage:function(){this.$el.trigger("deleteItem",[this,{section:this.model}])},showMoveButtons:function(){a.addInstanceTo(this.$el,this.model.findFirstChildByType("img")),this.imageOptionsBalloon.hideAll()},_handleSelectMoveImage:function(){return this.showMoveButtons(),!1},_handleMoveUp:function(t){return this.$el.trigger("moveItem",[this,{item:this.model.findFirstChildByType("img"),moveBy:-1}]),!1},_handleMoveDown:function(t){return this.$el.trigger("moveItem",[this,{item:this.model.findFirstChildByType("img"),moveBy:1}]),!1},_handleFocalPointUIButton:function(t){return this.triggerSelectNone(),this._showBkgEditView(),!1},updateBalloonSet:function(){var t=this.model.findFirstChildByType("img");a.canMoveUp(t)||a.canMoveDown(t)?this.imageOptionsBalloon.setButtons(this.buttonSet):this.imageOptionsBalloon.setButtons(this.buttonSetNoMove)},render:function(){var t=this.template.getPayload(this.model,{payloadPreProcessor:this._payloadPreProcessor});if(0===t.content_items.length)return this;var e=this.$image.css("background-image"),n=t.content_items[0].src,i="url("+n+")";i!==e&&this._preloadImage(n,function(){this.$image.css("background-image",i)}.bind(this));var o=t.image?t.image.align:"50% 50%";this.$image.css("background-position",o),this.$el.data("fixed",t.fixed),this.$el.removeClass("height-100 height-80 height-75 height-50 height-25"),this.$el.addClass(t.height),this.captionEditableRegionView.render(t.content_items[0].text),t.caption_align!=this._captionAlignment&&(this.$el.removeClass(this._captionAlignment||LucaJSONParser.defaultCaptionAlign),this.$el.addClass(t.caption_align),this._captionAlignment=t.caption_align,this.dispatchAdjustVisuals());var r=this.model.findFirstChildByType("img");return this.updateLoadingSpinner(this.$el,r),this.attributionButton.render(),this.imageWarningButton.render(),this.refreshPlaceholder(),this.refreshBrokenImageState(r,this.$el),this},remove:function(){return this.captionEditableRegionView.destroy(),this.imageOptionsBalloon.remove(),o.prototype.remove.call(this)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(1)],void 0===(o=function(t){return{fromDOMElement:function(t,e){if(void 0===t)return null;void 0===e&&(e={a:1,b:1,strong:1,i:1,em:1});var n=arguments[2];void 0===n&&(n={text:"",length:0,markups:[]});for(var i=t.childNodes,o=0,r=i.length;o<r;o++){var a=i[o];if(a.nodeType===Node.TEXT_NODE){var s=a.textContent;n.text+=s,n.length+=s.length}else if(a.nodeType===Node.ELEMENT_NODE){var l=n.length;this.fromDOMElement(a,e,n);var c=a.nodeName.toLowerCase();if(e[c]){var u="",h=a.attributes.getNamedItem("href");h&&(u=h.value);var d={start_index:l,end_index:n.length,type:c,href:u};n.markups.push(d)}}}return n},toDocumentFragment:function(t,e){var n,i=document.createDocumentFragment(),o=document.createElement("div");for(o.innerHTML=this.toHTML(t,e);n=o.firstChild;)i.appendChild(n);return i},toHTML:function(t,e){return this._convertMarkupsToString(t||"",e,"html",!0)},toMarkdown:function(t,e){return this._convertMarkupsToString(t||"",e,"markdown",!1)},_convertMarkupsToString:function(t,e,n,i){var o=e.slice();o.sort(this._startIndexSort);for(var r=[],a=0;a<o.length;a++){var s=o[a],l=s.get("start_index"),c=s.get("end_index"),u=s.get("type");if(l!=c||"br"==u){var h=this._getMarkupStyleTags(s,n);r.push({tag:h.open,offset:l,index:a,type:"open"}),r.push({tag:h.close,offset:c,index:a,type:"close"})}}for(a=0;a<r.length;a++)"close"==r[a].type&&""==r[a].tag&&r.splice(a,1);r.sort(this._offsetSort);var d=[],f=0;for(a=0;a<r.length;a++){var p=r[a];p.offset>f&&(d.push(this._getSubstring(t,f,p.offset,i)),f=p.offset),d.push(p.tag)}return f<t.length&&d.push(this._getSubstring(t,f,t.length,i)),d.join("")},_getMarkupStyleTags:function(t,e){var n=t.get("type").toLowerCase(),i="",o=t.get("href"),r="",a="";if("markdown"==e)switch(n){case"br":r="\n",a="";break;case"b":case"strong":r=a="**";break;case"i":case"em":r=a="*";break;case"a":r="[",a="]()",o&&(a="]("+o+")")}else o&&(i=' href="'+o+'"'),r="<"+n+i+">",a="</"+n+">","br"==n&&(a="");return{open:r,close:a}},_getSubstring:function(e,n,i,o){var r=e.substring(n,i);return o?t.escape(r):r},_startIndexSort:function(t,e){var n=t.get("start_index")-e.get("start_index");return 0===n&&(n=e.get("end_index")-t.get("end_index")),n},_offsetSort:function(t,e){if(t.offset==e.offset){if("open"==t.type&&"open"==e.type){if("<br>"==t.tag||"\n"==t.tag)return-1;if("<br>"==e.tag||"\n"==e.tag)return 1}return"close"==t.type&&"close"==e.type?e.index-t.index:t.index===e.index?"open"==t.type?-1:1:t.index-e.index}return t.offset-e.offset}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7),n(15)],void 0===(o=function(t,e,n,i,o){var r=i.create$Element,a=n.View.extend({events:{"balloon-show":"render"},_name:"default",_renderId:0,_renderTime:0,_preloadMap:null,initialize:function(t){t||(t={}),this._preloadMap={},e.bindAll(this,"_renderFrame"),this.$el.addClass("balloon-surface"),t.name&&(this._name=t.name),a.register(this)},checkNeedForPreload:function(t){return!this._preloadMap[t]&&(this._preloadMap[t]=!0,!0)},getNew$BalloonEl:function(t){var e=r("div",{class:"balloon-position"});return e.data("view",t),this.$el.append(e),e},hideOthers:function(e){this.$(".balloon-position").each(function(n,i){var o=t(i).data("view");o!==e&&o.hide()})},hideAll:function(){this.hideOthers(null)},render:function(){return this._startRenderAnimation(),this},_startRenderAnimation:function(){this._renderTimerReset(2e3),this._animateRender()},_animateRender:function(){0===this._renderId&&(this._renderId=requestAnimationFrame(this._renderFrame))},_renderFrame:function(){this._renderId=0,(this._updatePositions()||this._renderTimerRunning())&&this._animateRender()},_renderTimerReset:function(t){this._renderTime=Date.now()+t},_renderTimerRunning:function(){return Date.now()-this._renderTime<0},_updatePositions:function(){var e=!1;return this.$(".balloon-position").each(function(n,i){var o=t(i).data("view");o.isHidden()||o.updatePosition()&&(e=!0)}),e}});a._surfaces={},a.register=function(t){this._surfaces[t._name]&&console.warn('Balloon surface "'+t._name+'" created where one by the same name already exists.'),this._surfaces[t._name]=t},a.unregister=function(t){var e=t&&t._name||this.getDefaultName();this._surfaces[e]&&delete this._surfaces[e]},a.get=function(t){return this._surfaces[t||this.getDefaultName()]},a.getDefaultName=function(){return a.prototype._name};var s=n.View.extend({_isCreated:!1,_isButtonsCreated:!1,_isHidden:!0,_activated:null,_defaultSurfaceName:"default",surface:null,_surfaceRect:null,_buttons:null,_moreButtons:null,_buttonsStyle:null,basicButtons:{photo:{label:"editor.balloon.photo",className:"photo-button"},addphoto:{label:"editor.balloon.photo-add",className:"photo-button"},layout:{label:"editor.balloon.layout",className:"layout-button"},deletelayout:{label:"editor.balloon.layout-delete",className:"delete-layout-button"},replace:{label:"editor.balloon.replace",className:"replace-button"},photostack:{label:"editor.balloon.stack",className:"photo-stack-button"},photogrid:{label:"editor.balloon.grid",className:"photo-grid-button"},slideshow:{label:"editor.balloon.glideshow",className:"card-flipbook-button"},"split-layout":{label:"editor.balloon.split",className:"split-layout-button"},editgrid:{label:"editor.balloon.grid-edit",className:"edit-grid-button"},editslides:{label:"editor.balloon.photos-edit",className:"edit-slides-button"},addphotos:{label:"editor.balloon.photos-add",className:"add-photos-button"},text:{label:"editor.balloon.text",className:"text-button"},inline:{label:"editor.balloon.inline",className:"image-style-inline-button"},fullscreen:{label:"editor.balloon.fill",className:"image-style-fullscreen-button"},banner:{label:"editor.balloon.banner",className:"image-style-banner-button"},fullwidth:{label:"editor.balloon.full-width",className:"image-style-full-width-button"},window:{label:"editor.balloon.window",className:"image-style-window-button"},delete:{label:"editor.balloon.delete",className:"delete-button"},link:{label:"editor.balloon.button",className:"call-to-action-button"},"embedded-link":{label:"editor.balloon.video",className:"embedded-link-button"},edit:{label:"editor.balloon.edit",className:"edit-button"},move:{label:"editor.balloon.move",className:"move-balloon-button"},focalpoint:{label:"editor.balloon.focal-point",className:"focal-point-ui-button"},more:{label:"editor.balloon.more",className:"more-button"},less:{label:"editor.balloon.back",className:"less-button"},star:{label:"editor.balloon.large",className:"star-button"},unstar:{label:"editor.balloon.small",className:"unstar-button"},debug:{label:"debug",className:"debug-button focal-point-ui-button"}},_subBalloons:null,_style:null,_addedButtonClass:"",_addedBalloonClass:"",_defaultPosition:{percentX:.5,percentY:0,offsetX:0,offsetY:0},position:null,data:null,_lastPosRect:null,initialize:function(t){t||(t={}),this.data=e.extend({},t.data),this._subBalloons={};var n=t.surfaceName||this._defaultSurfaceName;this.surface=a.get(n),this.position=e.extend({},this._defaultPosition,t.position);var i=t.style;i||(i=new(s.DefaultStyleClass||l)(this));this.setButtons(t.buttons,{style:i,addedClass:t.addedButtonClass}),this._handleButtonClick=this._handleButtonClick.bind(this);var o=this._getLayoutId();this.surface.checkNeedForPreload(o)&&this._create({forceUpdate:!1})},_getNew$BalloonElFromSurface:function(){var t=this.surface.getNew$BalloonEl(this);return t.addClass("hidden"),t},_create:function(t){this._isCreated||(this._isCreated=!0,this.$balloonEl=this._getNew$BalloonElFromSurface(),this.$balloonEl.on("vclick",this._handleButtonClick),this._createBalloon(t))},_createBalloon:function(t){if(this._isCreated){this.$balloon&&this.$balloon.remove(),this.$balloon=r("div",{class:"balloon animated"});var e=r("div",{class:"balloon-view"});this.$buttonGroup=r("div",{class:"button-group"}),this.$balloonEl.append(this.$balloon.append(e.append(this.$buttonGroup))),this._style&&this._style.onCreated(),this._addedBalloonClass&&this.setBalloonClass(this._addedBalloonClass),this._createButtons(t)}},_createButtons:function(t){if(this._isCreated){if(this._buttons&&this._buttons.length){if(this.setStyle(this._buttonsStyle,t))return;this.$buttonGroup.empty();var n=this._createButton.bind(this),i=e.map(this._buttons,n),o=this._moreButtons?e.map(this._moreButtons,n):null;o?(r("div",{class:"primary set"}).append(i).appendTo(this.$buttonGroup),r("div",{class:"secondary set"}).append(o).appendTo(this.$buttonGroup)):this.$buttonGroup.append(i)}this._isButtonsCreated=!0,this.activate(this._activated);var a=!(t&&"forceUpdate"in t)||t.forceUpdate;this.updatePosition({force:a}),this._style&&this._style.onButtonsAdded()}},_createButton:function(t){var e=t.className+(this._addedButtonClass?" "+this._addedButtonClass:""),n=r("button",{class:e});n.data("className",t.className);r("span").text(o.getString(t.label)).appendTo(n);return this._makeSubBalloonLink(n,t),n},setStyle:function(t,e){if(t){if(this._style){if(this._style.className===t.className)return!1;this._style.remove()}return this._style=t,this._style.init(),this._createBalloon(e),!0}},setBalloonClass:function(t){this.$balloon&&this._addedBalloonClass&&this.$balloon.removeClass(this._addedBalloonClass),this._addedBalloonClass=t,this.$balloon&&this._addedBalloonClass&&this.$balloon.addClass(this._addedBalloonClass)},addSubBalloon:function(t,e){var n=this._getButtonClassName(t);if(n){if(!e.parent)return e.parent=this,this._subBalloons[n]=e,e;console.error("Cannot have a balloon as a sub balloon to multiple balloons")}else console.error("Could not identify a class name match for sub balloon")},_getButtonClassName:function(t){return e.isString(t)&&(t=this.basicButtons[t]),t&&t.className},setButtons:function(t,n){n||(n={}),this._isButtonsCreated=!1;var i=null;t&&e.isArray(t[0])&&(i=t[1],t=t[0]),this._buttons=this._parseButtons(t),this._moreButtons=i?this._parseButtons(i):null,void 0!==n.style&&(this._buttonsStyle=n.style),void 0!==n.addedClass&&(this._addedButtonClass=n.addedClass),this._isHidden||this._createButtons()},_parseButtons:function(t){var n=[];if(t)for(var i=0,o=t.length;i<o;i++){var r=t[i];if(e.isString(r)){var a=r;(r=this.basicButtons[a])||(r={label:a,className:a})}r&&n.push(r)}return n},_makeSubBalloonLink:function(t,e){var n=this._subBalloons[e.className];n&&n.setElement(t)},_getLayoutId:function(){return JSON.stringify(this._buttons)},updatePosition:function(t){var n=!1;if(!this._isCreated)return n;if(!(t&&t.force)&&this._isHidden)return n;this._updateSurfaceRect();var i=this.$el[0].getBoundingClientRect();!this._lastPosRect||i.left||i.top?this._lastPosRect=i:i=this._lastPosRect;var o=i.width*this.position.percentX,r=i.height*this.position.percentY;o+=this.position.offsetX+(i.left-this._surfaceRect.left),r+=this.position.offsetY+(i.top-this._surfaceRect.top);var a={left:Math.round(o),top:Math.round(r)},s=this.$balloonEl.position();if(this._style){var l=this._style.onPosition(e.clone(a));if(l)return n=!e.isEqual(l,s)}(n=!e.isEqual(a,s))&&this.$balloonEl.css(a);var c=this.getOffscreenOffset();return c&&(a={left:Math.round(o-c.x),top:Math.round(r-c.y)},n=!e.isEqual(a,s),this.$balloonEl.css(a)),n},_updateSurfaceRect:function(){var t=this.$balloonEl.parent();this._surfaceRect=t[0].getBoundingClientRect()},getOffscreenOffset:function(){this._surfaceRect||this._updateSurfaceRect();var t=this.$balloon[0].getBoundingClientRect(),e=t.left-this._surfaceRect.left,n=t.top-this._surfaceRect.top,i=t.right-this._surfaceRect.right,o=t.bottom-this._surfaceRect.bottom,r=0,a=0;return e<0?r=e:i>0&&(r=Math.min(e,i)),n<0?a=n:o>0&&(a=Math.min(n,o)),r||a?{x:r,y:a}:null},show:function(t){t||(t={});var e=t.keepContext,n=!t.hasOwnProperty("hideOthers")||t.hideOthers;this._isCreated?this._createButtons():this._create(),n&&this.surface.hideOthers(this);var i=!1;return this._isHidden&&(e?i=this.select(this.$buttonGroup.find(".active")):this.activate(null),this.$balloon.width(),this.$balloonEl.removeClass("hidden"),this._isHidden=!1,this._style&&this._style.onShow(),this.$balloonEl.trigger("balloon-show")),this.showSubBalloon(t),i},showSubBalloon:function(t){if(t.showSub){var e=this._getButtonClassName(t.showSub.buttonId),n=this._subBalloons[e];n?setTimeout(function(){n.parent.isHidden()||n.show(t.showSub.options)},100):console.error("Could not find sub balloon from identifier:",t.showSub.buttonId)}},hide:function(){this.hideSubBalloons(),this._isCreated&&(this.$balloonEl.addClass("hidden"),this._isHidden=!0,this._style&&this._style.onHide())},hideSubBalloons:function(){for(var t in this._subBalloons){this._subBalloons[t].hide()}},hideAll:function(){this.surface.hideAll()},toggle:function(t){return t||(t={}),this._isHidden?{selected:this.show(t)}:(!t.hasOwnProperty("hideOthers")||t.hideOthers?this.surface.hideAll():this.hide(),!1)},isHidden:function(){return this._isHidden},remove:function(){return this.removeSubBalloons(),this.$balloonEl&&(this.$balloonEl.off("vclick",this._handleButtonClick),this.$balloonEl.remove()),n.View.prototype.remove.call(this)},removeSubBalloons:function(){for(var t in this._subBalloons){this._subBalloons[t].remove()}},_handleButtonClick:function(e){var n=t(e.target).closest("button");return n.length&&(this.activate(n),this.select(n)),!1},select:function(t){if(t&&t.length){this.selectSubBalloon(t);var e=t.attr("class"),n=this._get$EventEl();return n.addClass(e),n.trigger("balloon-select",[t,this]),n.removeClass(e),!0}return!1},selectSubBalloon:function(t){var e=t.data("className"),n=this._subBalloons[e];n&&(n.toggle({hideOthers:!1,keepContext:!0})||this.activate(null))},activate:function(n){if(this._isCreated){var i=e.isString(n)?this.$buttonGroup.find(n):t(n);this._isValidActivatable(n,i)&&(this._activated=n,this.$buttonGroup.find(".active").removeClass("active"),this._activated&&i.addClass("active"))}else this._activated=n},_isValidActivatable:function(t,e){return!t||!(!e||!e.length)&&!e.is(".more-button, .less-button")},_get$EventEl:function(){for(var t=this;t.parent;)t=t.parent;return t.$el}});s.DefaultStyleClass=null;var l=function(t,e){this.balloon=t,this.className=e};l.prototype={init:function(){this.balloon.$balloonEl.addClass(this.className)},onCreated:function(){},onButtonsAdded:function(){},onShow:function(){},onPosition:function(t){},onHide:function(){},remove:function(){this.balloon.$balloonEl.removeClass(this.className)}};e.extend(Object.create(l.prototype),{onButtonsAdded:function(){var e=this.balloon.$buttonGroup;this.balloon._moreButtons?(this.prim=new u(e.find(".primary button"),this.delayTime),this.seco=new u(e.find(".secondary button"),this.delayTime)):(this.prim=new u(e.find("button"),this.delayTime),this.seco=new u(t(),this.delayTime)),e.addClass("dark-tooltip-buttons"),e.find(".more-button, .less-button").on("vclick",this._handleMoreClicked)},onShow:function(){this._reset(),this.prim.sequence("addClass",this.showClass),this.seco.sequence("addClass",this.showClass)},onHide:function(){this.prim.sequence("removeClass",this.showClass),this.seco.sequence("removeClass",this.showClass)},_handleMoreClicked:function(t){this.balloon.$buttonGroup.toggleClass("more"),this.prim.sequence("toggleClass",this.outClass),this.seco.sequence("toggleClass",this.outClass)},_reset:function(){var t=this.balloon.$balloon,e=this.balloon.$buttonGroup;t.removeClass("animated"),e.removeClass("more"),this.prim.immediate("removeClass",this.outClass),this.seco.immediate("addClass",this.outClass),e.width(),t.addClass("animated")}});var c=function(t){l.call(this,t,"balloon-style-popup"),this.className+=" "+this.classModifier};c.prototype=e.extend(Object.create(l.prototype),{classModifier:"large",onButtonsAdded:function(){this.balloon.$balloon.attr("data-button-count",this.balloon._buttons.length)}});function u(t,e){this.$set=t,this.delay=e}e.extend(Object.create(c.prototype),{classModifier:"small",onCreated:function(){var t=r("div",{class:"balloon-tail-view"});this.balloon.$balloon.append(t)}}),s.DefaultStyleClass=c,u.prototype={sequence:function(e,n,i){t.isArray(n)||(n=[n]),void 0==i&&(i=this.delay),this.$set.each(function(o,r){function a(){var i=t(r);i[e].apply(i,n)}i?setTimeout(a,o*i):a()})},immediate:function(t,e){this.sequence(t,e,0)}};var h=function(t,e,n){this.eventType=t,this.view=e,this.attr=n||{},this.updateLocation()};e.extend(h.prototype,{updateNative:function(){NativeApp.toNative(this.eventType,this.attr)},updateLocation:function(t){this.attr.location=this._getViewBounds()},_getViewBounds:function(){if(!this.view)return{x:0,y:0,left:0,top:0,width:0,height:0};var t=this.view.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2,left:t.left,top:t.top,width:t.width,height:t.height}}});var d=function(t,e){this.attr=t,this.callback=e};d.init=function(){this.pending=[],NativeApp.on("dialog-dismissed",this.onConfirmResponse,this)},d.confirm=function(t,n){var i=e.extend({buttons:["Cancel","OK"]},t),o=new d(i,n);this.pending.push(o),NativeApp.toNative("display-dialog",i)},d.onConfirmResponse=function(t){var n=this.pending.shift();if(n&&"function"==typeof n.callback){t.isConfirmed=Boolean(t.selectedIndex>0);var i=e.defaults(t,n.attr);n.callback(i)}},d.init();var f={DONE:"done",CANCEL:"cancel",MODAL_CLASS:"modal-active",callback:null,active:!1,init:function(){this._handleModalDone=this._handleModalDone.bind(this),this._handleModalCancel=this._handleModalCancel.bind(this),NativeApp.on("modal-done",this._handleModalDone),NativeApp.on("modal-cancel",this._handleModalCancel)},show:function(t,e){if(this.active)throw new Error("Only one modal view is permitted at a time");this.callback=e,this.active=!0,i.$app.addClass(this.MODAL_CLASS),NativeApp.toNative("begin-modal",t)},enable:function(){NativeApp.toNative("modal-enable",{enabled:"true"})},disable:function(){NativeApp.toNative("modal-enable",{enabled:"false"})},_handleModalDone:function(t){this._complete(this.DONE)},_handleModalCancel:function(t){this._complete(this.CANCEL)},_complete:function(t){this.active=!1,i.$app.removeClass(this.MODAL_CLASS),this.callback&&this.callback(t)}};f.init(),i.ContextBalloonSurfaceView=a,i.ContextBalloonView=s,i.ContextBalloonStyle=l,i.NativePopupBalloon=h,i.NativeConfirm=d,i.NativeModal=f}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(138),n(139)],void 0===(o=function(t,e,n,i,o){return n.View.extend({attributionButton:null,imageWarningButton:null,initialize:function(t){t||(t={}),this.$el.addClass("image-property-buttons"),!1!==t.enableAttributionView&&(this.attributionButton=new i({model:this.model}),this.$el.append(this.attributionButton.render().$el)),!1!==t.enableWarningView&&(this.imageWarningButton=new o({model:this.model}),this.$el.append(this.imageWarningButton.render().$el))},setModel:function(t){this.attributionButton&&this.attributionButton.setModel(t),this.imageWarningButton&&this.imageWarningButton.setModel(t)},show:function(){this.$el.css("visibility","visible"),this.render()},hide:function(){this.$el.css("visibility","hidden")},render:function(){return this.attributionButton&&this.attributionButton.render(),this.imageWarningButton&&this.imageWarningButton.render(),this},remove:function(){return this.attributionButton&&this.attributionButton.remove(),this.imageWarningButton&&this.imageWarningButton.remove(),n.View.remove.call(this)}})}.apply(e,i))||(t.exports=o)},,,,function(t,e,n){var i,o;i=[n(1),n(10),n(15)],void 0===(o=function(t,e,n){var i=t.extend({},e.Events,{toNativeCallback:{},fromNativeCallback:{},_availableRE:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i,_protocol:"luca",isStackFromNative:!1,isUserInitiated:!1,isAvailable:function(){return this._availableRE.test(window.navigator.userAgent)},toNative:function(e,n){n?(n=t.extend({},n)).event=e:t.isObject(e)?(n=t.extend({},e),e=n.event):n={event:e},"function"==typeof this.toNativeCallback[e]&&this.toNativeCallback[e](n);var i=this._protocol,o=JSON.stringify(n),r=i+":"+encodeURI(o);this.isAvailable()&&t.defer(function(){var t=document.createElement("iframe");t.setAttribute("src",r),document.documentElement.appendChild(t),t.parentNode.removeChild(t)})},fromNative:function(e,i){var o,r;i||(i={}),this.isUserInitiated=void 0===i["user-initiated"]||i["user-initiated"],this.isStackFromNative=!0;try{"function"==typeof this.fromNativeCallback[e]&&(o=this.fromNativeCallback[e](i)),this.trigger(e,i)}catch(t){window.App._reportAppException(n.getString("editor.dialogs.error-app.text"),t)}finally{this.isStackFromNative=!1,this.isUserInitiated=!1}return o&&(r=t.isObject(o)?JSON.stringify(o):o),r}});return window.NativeApp=i,i}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(4)],void 0===(o=function(t,e,n,i){return n.View.extend({events:{vclick:"_handleClick"},initialize:function(t){this._handleBackgroundDragStart=this._handleBackgroundDragStart.bind(this),this._handleBackgroundDragUpdate=this._handleBackgroundDragUpdate.bind(this),this.backgroundTracker=new i.DragTrackerDelegate(this.$el[0],{dragStart:this._handleBackgroundDragStart,dragUpdate:this._handleBackgroundDragUpdate})},_handleBackgroundDragStart:function(t,e,n){this.backgroundTracker.blockDelegates()},_handleBackgroundDragUpdate:function(t,e,n){},_handleClick:function(){return!1},show:function(){this.$el.addClass("visible")},hide:function(){this.$el.hasClass("visible")&&this.$el.removeClass("visible")}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(7),n(138),n(139),n(151)],void 0===(o=function(t,e,n,i,o,r){return{_createBkgEditUI:function(){var t=n.create$Element;this.$image=this.$(".section-background-image"),this._addBkgEditView(),this.listenTo(this.bkgEditView,"background-position-editor-hide",this._hideBkgEditView),this.$el.data("view",this),this._articleResize=this._articleResize.bind(this),this._$propertyButtons=t("div",{class:"image-property-buttons"}),this.attributionButton=new i({model:this.model}),this._$propertyButtons.append(this.attributionButton.render().$el),this.imageWarningButton=new o({model:this.model}),this._$propertyButtons.append(this.imageWarningButton.render().$el),this.$el.append(this._$propertyButtons)},_articleResize:function(t){this.bkgEditView.showUpdate(),this.scrollSectionIntoView()},_addBkgEditView:function(){this.bkgEditView=new r,(n.$app||this.$el).append(this.bkgEditView.$el)},_removeBkgEditView:function(){this.bkgEditView&&this.bkgEditView.$el.remove()},_getBkgImageItem:function(){return this.model.findFirstChildByType("img")},_showBkgEditView:function(){var t=this._getBkgImageItem();if(t){var e=t.getImage();if(e&&e.get("image_url")){var n=this;this.scrollSectionIntoView({complete:function(){n.$el.addClass("background-edit-mode"),n.bkgEditView.show(n.$image,t)}}),this.$el.on("article-resize",this._articleResize),this._onShowBkgEditView()}}},_hasBkgEditView:function(){return this.$el.hasClass("background-edit-mode")},scrollSectionIntoView:function(t){},_hideBkgEditView:function(){this.bkgEditView.hide(),this.$el.removeClass("background-edit-mode"),this.$el.off("article-resize",this._articleResize),this._onHideBkgEditView()},_onShowBkgEditView:function(){},_onHideBkgEditView:function(){}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10)],void 0===(o=function(t,e,n){return n.View.extend({sectionModel:null,initialize:function(t){this.model instanceof App.SectionModel&&(this.sectionModel=this.model,this.model=this.sectionModel.findFirstChildByType("img")),this.setModel(this.model)},_handleSectionModelAdd:function(t){this.setModel(t)},ensureModel:function(){(!this.model||!this.model.parent&&this.sectionModel)&&(this.model=this.sectionModel.findFirstChildByType("img"))},setModel:function(t){t&&"img"!==t.get("type")||(this.model?(this.stopListening(this.model,"change",this.render),this.model=null):this.stopListening(this.sectionModel,"descendant:add",this._handleSectionModelAdd),t?(this.model=t,this.listenTo(this.model,"change",this.render)):this.listenTo(this.sectionModel,"descendant:add",this._handleSectionModelAdd))}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(4),n(24),n(7),n(120),n(148),n(47),n(15)],void 0===(o=function(t,e,n,i,o,r,a,s,l){return a.extend({className:"focal-point-overlay",events:function(){return e.extend({},a.prototype.events)},initialize:function(t){a.prototype.initialize.apply(this,arguments),this._handleLensDragStart=this._handleLensDragStart.bind(this),this._handleLensDragUpdate=this._handleLensDragUpdate.bind(this),this._handleModalClose=this._handleModalClose.bind(this);var e=o.create$Element;this.$fpBackground=e("div",{class:"focal-point-background"}),this.$fpTooltip=e("div",{class:"focal-point-tooltip"}).attr("data-label",l.getString("editor.image.focal-drag")).append(document.createElement("span")),this.$fpPreview=e("div",{class:"focal-point-preview"}).attr({"data-label-l":l.getString("editor.labels.landscape"),"data-label-p":l.getString("editor.labels.portrait")}),this.$fpLens=e("div",{class:"focal-point-lens"}),this.$el.append(this.$fpBackground).append(this.$fpTooltip).append(this.$fpPreview).append(this.$fpLens),this.tracker=new n.DragTrackerDelegate(this.$fpLens[0],{dragStart:this._handleLensDragStart,dragUpdate:this._handleLensDragUpdate})},_handleLensDragStart:function(t,e,n){this.tracker.blockDelegates(),this.startX=this.x,this.startY=this.y,this.$fpTooltip.removeClass("visible")},_handleLensDragUpdate:function(t,e,n){var i=this.startX+e,o=this.startY+n;this.setPosition(i,o)},setPosition:function(t,e){var n=this.imageWidth,o=this.imageHeight,r=100*(t=t<0?0:t>n?n:t)/n,a=100*(e=e<0?0:e>o?o:e)/o;this.$fpBackground.add(this.$fpPreview).css("background-position",r+"% "+a+"%"),this.x=t,this.y=e,this.$fpLens.css(i.vendorPrefix+"transform","translate3d("+t+"px,"+e+"px,0)"),this.$el.trigger("updateImagePosition",[this.model,r,a])},setPositionByPercentage:function(t,e){t=t<0?0:t>100?100:t,e=e<0?0:e>100?100:e;var n=this.imageWidth*t/100,i=this.imageHeight*e/100;this.setPosition(n,i)},getImagePosition:function(t){var e=50,n=50,i=(t.settings.get("image_align")||"").replace(/^\s*|\s*$/g,"");if(i){var o=i.split(/\s+/);e=o[0]?parseFloat(o[0]):50,n=o[1]?parseFloat(o[1]):50}return{x:e,y:n}},show:function(t,e){var n=e.getImage();if(n){var c=this.$el.hasClass("visible");a.prototype.show.apply(this,arguments),this.model=e,this.$image=t,this.imageWidth=this.$fpBackground[0].offsetWidth,this.imageHeight=this.$fpBackground[0].offsetHeight,this.x=this.imageWidth/2,this.y=this.imageHeight/2;var u=n.get("image_url");u&&(u=s._adjustImageURLSize(r.makeAbsoluteURL(u),{model:e})),this.$fpBackground.add(this.$fpPreview).css("background-image",u?"url("+u+")":"none");var h=this.getImagePosition(e);if(this.setPositionByPercentage(h.x,h.y),this.originalX=this.x,this.originalY=this.y,50===h.x&&50===h.y?(this.$fpTooltip.addClass("visible"),this.$fpTooltip.css(i.vendorPrefix+"transform","translate("+this.x+"px,"+this.y+"px)")):this.$fpTooltip.removeClass("visible"),!c){var d={title:l.getString("editor.image.focal-title")};o.NativeModal.show(d,this._handleModalClose),this.trigger("background-position-editor-show")}}},showUpdate:function(){this.show(this.$image,this.model)},_handleModalClose:function(t){t===o.NativeModal.CANCEL&&this.setPosition(this.originalX,this.originalY),this.hide()},hide:function(){if(this.$el.hasClass("visible")){this.model;this.model=null,this.$image=null,this.$el.removeClass("visible"),this.trigger("background-position-editor-hide")}}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(15)],void 0===(o=function(t,e,n){return{refreshBrokenImageState:function(e,i){var o=e?e.getImage():null;o&&""==o.get("image_url")?(this.$brokenImageIndicator||(this.$brokenImageIndicator=t(document.createElement("div")).addClass("broken-image-indicator").attr({"data-label-title":n.getString("editor.hints.missing.title"),"data-label-text":n.getString("editor.hints.missing.text")}),i.append(this.$brokenImageIndicator)),this.$el.addClass("broken-image")):this.$el.removeClass("broken-image")}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(7),n(125),n(138),n(139),n(49),n(48),n(154),n(47),n(124),n(152),n(15)],void 0===(o=function(t,e,n,i,o,r,a,s,l,c,u,h,d){var f=i.extend({events:function(){return e.extend({},e.result(i.prototype,"events"),{"click a":"_handleLinkClick","strictclick img":"_handleImageClick","strictclick .caption":"_handleCaptionClick","balloon-select .replace-button":"_handleSelectChange","balloon-select .image-style-inline-button":"_handleSelectInline","balloon-select .image-style-fullscreen-button":"_handleSelectFullscreen","balloon-select .image-style-window-button":"_handleSelectWindow","balloon-select .image-style-full-width-button":"_handleSelectFullWidth","balloon-select  .move-balloon-button":"_handleSelectMoveImage","balloon-select .delete-button":"_handleDeleteImage","strictclick .move-up-button":"_handleMoveUp","strictclick .move-down-button":"_handleMoveDown"})},buttonSet:[["inline","fullscreen","window","fullwidth","move","replace","delete"]],buttonSetNoMove:[["inline","fullscreen","window","fullwidth","replace","delete"]],_activeBalloonSelector:".image-style-inline-button",initialize:function(e){u.initialize.call(this),e||(e={}),e.activeStyle&&(this._activeBalloonSelector=e.activeStyle),i.prototype.initialize.apply(this,arguments),this.placeholder=d.getString("editor.image.caption-add"),this.$image=this.template.$render(this.model,null,{payloadPreProcessor:this._payloadPreProcessor}),this.$image.data("view",this),this.$img=this.$image.find("img"),this.$imageWrap=this.$image.find(".image-wrapper"),this.$caption=this.$image.find(".caption"),0===this.$caption.length&&(this.$caption=n.create$Element("div",{class:"caption"}),this.$image.append(this.$caption)),this._handleImageLoad=this._handleImageLoad.bind(this),this._imageLoadInitiated(),this._$propertyButtons=n.create$Element("div",{class:"image-property-buttons"}),this.attributionButton=new o({model:this.model}),this._$propertyButtons.append(this.attributionButton.render().$el),this.imageWarningButton=new r({model:this.model}),e&&e.includeImageWarning&&this._$propertyButtons.append(this.imageWarningButton.render().$el),this.$imageWrap.append(this._$propertyButtons),this.$el.append(this.$image),!1!==e.insertLink&&this.$el.append(this.$insertLink),this.listenTo(this.model,"descendant:change",this.render),this.listenTo(this.model,"select",this.simpleHandleModelSelect);var s=this.$caption[0].cloneNode(!0);this.$caption.empty(),this.$captionEditable=t(document.createElement("span")).addClass("caption-editable").append(s.childNodes).appendTo(this.$caption),this.editableRegionView=new a({el:this.$captionEditable,placeholder:this.placeholder,allowHTML:!0}),this.listenTo(this.editableRegionView,"enterKeyPressed",this._handleEnterKeyPressed),this.listenTo(this.editableRegionView,"contentChanged",this._handleContentChanged),this.listenTo(this.editableRegionView,"heightChanged",this.dispatchAdjustVisuals),this.listenTo(this.editableRegionView,"blur",this.render),this.listenTo(this.editableRegionView,"paste",this._handlePaste),this.refreshPlaceholder(),this.refreshBrokenImageState(this.model,this.$imageWrap),this.imageOptionsBalloon=new n.ContextBalloonView({el:this.$imageWrap,position:{percentX:.5,percentY:.15,offsetY:0},buttons:this.buttonSet,data:{minRowButtonCount:4}});JSON.stringify(this.model.toJSON());e&&e.intent&&setTimeout(function(){switch(e.intent){case"edit":this.$el.trigger("showImagePicker",[this]),this.imageOptionsBalloon.hideAll();break;case"select":this.updateBalloonSet(),this.imageOptionsBalloon.activate(this._activeBalloonSelector),this.imageOptionsBalloon.show({keepContext:!0});break;case"move":this.showMoveButtons()}setTimeout(function(){this.scrollSectionIntoView()}.bind(this),201)}.bind(this),1)},getSourceForDrop:function(t){return t===this.$image[0]?n.getSourceStrForModel("update",this.model):n.getSourceStrForModel("insert",this.model)},_handleEnterKeyPressed:function(){this.triggerSelectNone()},_handlePaste:function(t,e){this.$el.trigger("pasteContent",[this.model,this.editableRegionView,e])},_handleContentChanged:function(t){this.$el.trigger("updateText",[this.model,t])},_handleLinkClick:function(t){t.preventDefault()},_handleImageClick:function(t){return this.$el.trigger("hideImagePicker",[this]),this.imageOptionsBalloon.isHidden()?(this.updateBalloonSet(),this.imageOptionsBalloon.activate(this._activeBalloonSelector),this.imageOptionsBalloon.show({keepContext:!0}),this.triggerSelect({type:"img",action:"update"})):(this.imageOptionsBalloon.hide(),this.triggerSelectNone()),!1},_handleCaptionClick:function(){if(this.$caption.css("opacity")<.02)return!1;this.triggerSelect({type:"caption",action:"update",balloons:!1})},_handleSelectChange:function(){this.$el.trigger("showImagePicker",[this,{hideBalloons:!0}])},_handleSelectInline:function(){this.convertImage("inline")},_handleSelectFullscreen:function(){this.convertImage("zoom")},_handleSelectWindow:function(){this.convertImage("window")},_handleSelectFullWidth:function(){this.convertImage("full-width")},convertImage:function(t){var e=this.model.parent.get("type");"content"!==e&&"card-flipbook"!==e||(e="inline"),e!==t&&this.$el.trigger("convertImage",[this,this.model,t])},_handleDeleteImage:function(){this.$el.trigger("deleteItem",[this,{item:this.model}])},showMoveButtons:function(){l.addInstanceTo(this.$imageWrap,this.model),this.imageOptionsBalloon.hideAll()},_handleSelectMoveImage:function(){return this.showMoveButtons(),!1},_handleMoveUp:function(t){return this.$el.trigger("moveItem",[this,{item:this.model,moveBy:-1}]),!1},_handleMoveDown:function(t){return this.$el.trigger("moveItem",[this,{item:this.model,moveBy:1}]),!1},_imageLoadInitiated:function(){""!==this.$img.attr("src")&&(n.$article.trigger("imageLoadInitiated"),this.$img.one("load error",this._handleImageLoad))},_handleImageLoad:function(){this.$el.trigger("imageLoadCompleted"),this.dispatchAdjustVisuals()},scrollSectionIntoView:function(e){var n=this.$el.closest(".section");e=t.extend({section:n,el:this.$img,method:"center",methodIfLarge:"top",ignoreWhenFullyVisible:!0,animate:!0},e),this.$el.trigger("scrollSectionIntoView",e)},refreshPlaceholder:function(){""===this.model.get("text")?this.$caption.addClass("empty-caption"):this.$caption.removeClass("empty-caption")},updateLoadingSpinner:s.prototype.updateLoadingSpinner,updateBalloonSet:function(){var t=this.model;l.canMoveUp(t)||l.canMoveDown(t)?this.imageOptionsBalloon.setButtons(this.buttonSet):this.imageOptionsBalloon.setButtons(this.buttonSetNoMove)},_payloadPreProcessor:function(t,e){return!n.isMobile&&t&&t.src&&(t.src=c._adjustImageURLSize(t.src,{model:e.model}),c._setImagePayloadURL(t.image,t.src)),t},render:function(){var t=this.template.getPayload(this.model,{payloadPreProcessor:this._payloadPreProcessor}),e=t.src,i=this.$img.attr("src");e&&e!=i&&(this.$img.attr("src",e),this._imageLoadInitiated());var o=this.model.getImage();if(o){var r=o.get("image_width");r&&this.$img.attr("width",r)}return t.text_align?n.textAlignCSS.setClass(this.$caption,t.text_align):n.textAlignCSS.clear(this.$caption),this.updateLoadingSpinner(this.$imageWrap,this.model),this.editableRegionView.render(n.MarkupParser.toHTML(this.model.get("text"),this.model.children.models)),this.attributionButton.render(),this.imageWarningButton.render(),this.refreshPlaceholder(),this.refreshBrokenImageState(this.model,this.$imageWrap),this},remove:function(){return this.editableRegionView.destroy(),this.imageOptionsBalloon.remove(),i.prototype.remove.call(this)}});return e.defaults(f.prototype,u,h),f}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7)],void 0===(o=function(t,e,n,i){var o=n.View.extend({model:null,initialize:function(t){this._handleAutoRemove=this._handleAutoRemove.bind(this),this._create()},_create:function(){this.$el.addClass("move-action-buttons");var t=i.create$Element,e=t("div").addClass("move-action-buttons-stack").appendTo(this.$el);this.$upButton=t("button").addClass("move-up-button").appendTo(e),this.$downButton=t("button").addClass("move-down-button").appendTo(e)},update:function(){var t=!o.canMoveUp(this.model),e=!o.canMoveDown(this.model);this.$upButton.toggleClass("disabled",t).prop("disabled",t),this.$downButton.toggleClass("disabled",e).prop("disabled",e)},detach:function(){this.removeAutoDetachOnClickOutside(),this.$el.detach(),this.model=null},autoDetachOnClickOutside:function(){t(document.documentElement).on("vmousedown",this._handleAutoRemove)},removeAutoDetachOnClickOutside:function(){t(document.documentElement).off("vmousedown",this._handleAutoRemove)},_handleAutoRemove:function(e){t.contains(this.$el[0],e.target)||this.detach()}});return o._instance=null,o.getInstance=function(){return this._instance||(this._instance=new o),this._instance},o.addInstanceTo=function(t,e){var n=this.getInstance();n.$el.prependTo(t),n.model=e,n.update(),n.autoDetachOnClickOutside()},o.canMoveUp=function(t){if(!t)return!1;var e=t.parent;if(Boolean("content"===e.get("type"))){if(!i.isFirstInSection(t))return!0;var n=e.getPrevSibling();return!(!n||"title"===n.get("type"))}return!(e.getIndex()<=1)},o.canMoveDown=function(t){if(!t)return!1;var e=t.parent;return Boolean("content"===e.get("type"))?!t.isLastChild()||!!e.getNextSibling():"title"!==e.get("type")&&!e.isLastChild()},o}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(7),n(18),n(140)],void 0===(o=function(t,e,n,i,o){return o.extend({template:new i({id:"banner-section-template"}),_activeBalloonSelector:".image-style-banner-button",_$createQuoteEl:function(){var e=n.createElement,i=e("div",{class:"pull-quote","data-fade-in":"0","data-fade-out":"0","data-drift":"0"}),o=e("div",{class:"pull-quote-view"}),r=e("div",{class:"content-container"});return o.appendChild(r),i.appendChild(o),t(i)},scrollSectionIntoView:function(e){e=t.extend({section:this.$el,method:"nearest",ignoreWhenFullyVisible:!0},e),o.prototype.scrollSectionIntoView.call(this,e)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(22),n(4),n(24),n(7),n(18),n(120),n(48),n(123),n(49),n(149),n(47),n(143),n(15)],void 0===(o=function(t,e,n,i,o,r,a,s,l,c,u,h,d,f,p,g){var m=function(){return"iphone"===a.preferences.deviceType},v=c.extend({template:new s({id:"photo-grid-section-template"}),events:{"click a.photo-image":"_handlePhotoImageLinkClick",strictclick:"_handlePhotoGridClick","balloon-select .edit-grid-button":"_handleEditGrid","balloon-select .delete-button":"_handleDelete"},initialize:function(t){this._create(),this.listenTo(this.model,"descendant:change",this._updateContentItem),this.photoGridOptionsBalloon=new a.ContextBalloonView({el:this.$photoGridOptionsBalloon,position:{percentX:.5,percentY:.25},buttons:["editgrid","delete"]})},_payloadPreProcessor:function(t,e){if(!a.isMobile&&t&&t.groups)for(var n=t.groups,i=n.length,o=0;o<i;o++)for(var r=n[o].photos,s=r.length,l=0;l<s;l++){var c=r[l];c.image_src=f._adjustImageURLSize(c.image_src,{isGrid:!0,width:c.image_width,height:c.image_height}),c.src=c.image_src}return t},_create:function(){this.template&&(this.setElement(this.template.$render(this.model,null,{payloadPreProcessor:this._payloadPreProcessor})),this.$el.data("view",this),this.$el.find(".photo-image").data("view",this),this._createCaption(),this._createPropertyButtons(),this.$photoGridOptionsBalloon=t('<div class="fit-in-container">'),this.$el.prepend(this.$photoGridOptionsBalloon))},_createCaption:function(){this.placeholder=g.getString("editor.image.caption-add");var e=this.$el.find(".photo-grid");if(this.$caption=e.find(".grid-caption"),0===this.$caption.length){var n=t('<div class="caption-container"></div>');this.$caption=t('<div class="grid-caption"></div>'),n.append(this.$caption),e.append(n)}var i=this.$caption[0].cloneNode(!0);this.$caption.empty(),this.$captionEditable=t(document.createElement("span")).addClass("caption-editable").append(i.childNodes).appendTo(this.$caption),this.editableRegionView=new h({el:this.$captionEditable,placeholder:this.placeholder}),this.listenTo(this.editableRegionView,"enterKeyPressed",this._handleEnterKeyPressed),this.listenTo(this.editableRegionView,"contentChanged",this._handleContentChanged),this.listenTo(this.editableRegionView,"heightChanged",this.dispatchAdjustVisuals),this.listenTo(this.editableRegionView,"blur",this.render),this.listenTo(this.editableRegionView,"paste",this._handlePaste),this.refreshPlaceholder()},_createPropertyButtons:function(){this.model.children.models.forEach(function(t){if("img"===t.get("type")){var e=this.$("#"+t.cid),n=new p({model:t,enableWarningView:!1});e.append(n.$el)}}.bind(this))},_updateContentItem:function(t,e){switch(t instanceof a.SettingModel&&(t=t.parent),t.get("type")){case"p":if(this.editableRegionView){this.editableRegionView.render(t.get("text"));var n=t.settings.get("text_align");n?a.textAlignCSS.setClass(this.$caption,n):a.textAlignCSS.clear(this.$caption)}break;case"img":var i=t.getImage();if(i){var o=i.get("image_url"),r=f._adjustImageURLSize(l.makeAbsoluteURL(o),{isGrid:!0,width:i.get("image_width"),height:i.get("image_height")}),s=t.cid;this.$("#"+s).attr("data-src",r).data("src",r).css("background-image","url("+r+")")}}},getSourceForDrop:function(t){return null},_handlePhotoImageLinkClick:function(t){t.preventDefault()},_handlePhotoGridClick:function(e){if(!t(e.target).closest(".image-property-buttons").length){if(!t(e.target).closest(".grid-caption").length)return t(e.target).closest(".photo-group-container").length?(this.photoGridOptionsBalloon.toggle()?this.triggerSelect({selection:this.model,type:"photo-grid",action:"update"}):this.triggerSelectNone(),!1):(this.triggerSelectNone(),!1);var n=this.model.findFirstChildByType("p");this.triggerSelect({selection:n,type:"caption",action:"update",balloons:!1})}},_handleEditGrid:function(){this.$el.trigger("editPhotoCollection",[this,{section:this.model}]),this.photoGridOptionsBalloon.hide()},_handleDelete:function(){var t=this.getImageCount();return a.NativeConfirm.confirm({title:g.getString("editor.dialogs.grid-delete.title"),content:g.getString("editor.dialogs.grid-delete.text",{count:t}),buttons:[g.getString("editor.common.cancel"),g.getString("editor.common.delete")],buttonOptions:[null,{style:"destructive"}]},function(t){t.isConfirmed&&this.$el.trigger("deleteSection",[{section:this.model,imageItemsRemoved:this.getImageItems()}])}.bind(this)),this.photoGridOptionsBalloon.hide(),!1},getImageCount:function(){return this.model.children.length-1},scrollSectionIntoView:function(e){e=t.extend({section:this.$el,method:"nearest",ignoreWhenFullyVisible:!0,animate:!0},e),this.$el.trigger("scrollSectionIntoView",e)},_handleEnterKeyPressed:function(){this.triggerSelectNone()},_handlePaste:function(t,e,n){var i=this.model.findFirstChildByType("p");this.$el.trigger("pasteContent",[i,this.editableRegionView,e,n])},_handleContentChanged:function(t){var e=this.model.findFirstChildByType("p");this.$el.trigger("updateText",[e,t])},refreshPlaceholder:function(){""===this.model.get("text")?this.$caption.addClass("empty-caption"):this.$caption.removeClass("empty-caption")},remove:function(){return this.editableRegionView.destroy(),this.photoGridOptionsBalloon.remove(),c.prototype.remove.call(this)}}),_=c.extend({template:new s({id:"card-flipbook-section-template"}),events:{strictclick:"_handleClick","balloon-select .edit-slides-button.section-level-balloon":"_handleEditSlides","balloon-select .focal-point-ui-button":"_handleFocalPointUIButton","balloon-select .delete-button.section-level-balloon":"_handleDelete",vtaphold:"_handleTapHold"},optionsButtons:["editslides","focalpoint","delete"],optionsButtonsClass:"section-level-balloon",insertButtons:["photo","text","link","embedded-link"],initialize:function(t){this.selectedSlide=null,this.childViewDict={},this._create(),this._createBalloons(),t&&"edit"===t.intent&&setTimeout(function(){var t=this.$el.data("scrollInOffset"),e=this.$(".section-background-image").eq(0).data("cardTopSpacingOffset");a.getSectionsArticleScroller().scrollTo(t+e)}.bind(this),201),this._currentGroup=null,this._handleSelectionChange=this._handleSelectionChange.bind(this),this._updateContentItem=this._updateContentItem.bind(this),this.listenTo(this.model,"descendant:change",this._updateContentItem),this._hideImagePropertyButtons()},_payloadPreProcessor:function(t,e){if(!a.isMobile&&t&&t.background_images)for(var n=t.background_images,i=n.length,o=0;o<i;o++){var r=n[o];r&&r.src&&(r.src=f._adjustImageURLSize(r.src,{width:r.image.image_width,height:r.image.image_height}),f._setImagePayloadURL(r.image,r.src))}return t},_create:function(){this.setElement(this.template.$render(this.model,null,{payloadPreProcessor:this._payloadPreProcessor})),this._ensureMarkup(),this.$el.data("view",this),this.$el.find(".section-background-image").data("view",this),this.$(".section-content-view").removeClass("removed"),this.$optionsBalloon=a.create$Element("div"),this.$optionsBalloon.css({position:"absolute",top:"50%",left:"50%",width:"1px",height:"1px"}),this.$el.prepend(this.$optionsBalloon);for(var t=this.$(".section-content-view"),e=this.model.get("groups"),n=0,i=e.length;n<i;n++){var o=e[n],r=new y({model:this.model,el:t.eq(n),group:o,insertButtons:this.insertButtons});this.childViewDict[r.cid]=r}this._createBkgEditUI()},_createBalloons:function(t){this.optionsBalloon=new a.ContextBalloonView({el:this.$optionsBalloon,position:{percentX:.5,percentY:.5},buttons:this.optionsButtons,addedButtonClass:this.optionsButtonsClass})},_ensureMarkup:function(){var t=this.$("> .section-view > .section-background > .section-background-image"),e=this.$("> .section-view > .section-content > .section-content-view"),n=t.length-e.length;if(n>0)for(var i=this.$("> .section-view > .section-content");n--;){var o=a.create$Element("div",{class:"section-content-view"}),r=a.create$Element("div",{class:"content-container"});o.append(r),i.append(o)}},getSourceForDrop:function(t){return null},scrollInsertLinkIntoView:function(t,e){this.scrollSectionIntoView({marginTop:115,el:t})},getClosestSlideFromScrollPosition:function(){var t=this.$el.closest(".article").data("animator"),e=this.$el.find(".section-background-image"),n={$slide:null,index:-1,offset:0};if(t){var i=t.playPosition,o=this.$el.data()||{},r=o.scrollInOffset||0,a=o.scrollOutOffset||0;if(i<r+(o.sectionHeight||0))n.$slide=e.eq(0),n.index=0,n.offset=r+(n.$slide.data("cardTopSpacingOffset")||0);else if(i>=a)n.$slide=e.last(),n.index=e.length-1,n.offset=r+(n.$slide.data("transitionOutBegin")||0);else for(var s=e.length,l=s-1,c=0;c<s;c++){var u=e.eq(c),h=r+(u.data("transitionInBegin")||0),d=r+(u.data("transitionInEnd")||0);if(i>=d?(n.$slide=u,n.index=c,n.offset=c===l?i:d):n.$slide&&(i<h?n.offset=i:i<h+(d-h)/2?n.offset=h:(n.$slide=u,n.index=c,n.offset=d)),i<d)break}}return n},_getBkgImageItem:function(){return this._currentSlideImage},_onShowBkgEditView:function(){this.optionsBalloon.isHidden()||this.optionsBalloon.hide()},_onHideBkgEditView:function(){a.selectionManager.getSelection().selection===this.model&&this.optionsBalloon.show()},_selectClosestSlide:function(t){var e=this.getClosestSlideFromScrollPosition(),n=e.$slide;if(n&&n.length){this.selectedSlide=e;var i=a.getSectionsArticleScroller();if(i){i.scrollTo(e.offset),this._currentGroup=this.model.get("groups")[e.index],this._currentSlideImage=this.model.getChildAt(this._currentGroup.offset||0),this.$image=n;var o=this.model.get("groups")[this.selectedSlide.index],r=this.model.getChildAt(o.offset||0).settings.get("card_align"),s=this._getBalloonPosition(this.selectedSlide,r,t),l="";"card-center"==r&&("right"===s?l="tail-right":"left"===s&&(l="tail-left")),this.optionsBalloon.setBalloonClass(l),this.$optionsBalloon.css({center:{top:"50%",left:"50%"},bottom:{top:"75%",left:"50%"},right:{top:"50%",left:"80%"},left:{top:"50%",left:"20%"}}[s]),this.attributionButton.setModel(this._currentSlideImage),this.attributionButton.render(),this.imageWarningButton.setModel(this._currentSlideImage),this.imageWarningButton.render(),this._showImagePropertyButtons(),this.listenTo(a.selectionManager,"selection-change",this._handleSelectionChange)}}else this.selectedSlide=null},_getBalloonPosition:function(e,n,i){var o="side",r=this.$el.find(".section-content-view").eq(e.index);if(r.length){var a=this.$el.data()||{},s=a.sectionHeight||0,l=(a.scrollInOffset||0)+s,c=e.offset-l,u=(r.data("sectionYOffset")||0)-c,h=u+r[0].offsetHeight;u>=.5*s?o="center":h<=.75*s-115&&(o="bottom")}if("side"===o)if("card-right"===n)o="left";else if("card-left"!==n&&n&&i){o=this._getEventOffset(i).left<t(i.target).width()/2?"left":"right"}else o="right";return o},_getEventOffset:function(e){for(var n=e;n;){if("offsetX"in n)return{left:n.offsetX,top:n.offsetY};n=n.originalEvent}for(n=e;n;){if("touches"in n||"changedTouches"in n){var i=n.touches[0]||n.changedTouches[0],o={left:0,top:0};if(i){var r=t(e.target).offset();o.left=i.pageX-r.left,o.top=i.pageY-r.top}return o}n=n.originalEvent}return{left:(n=e.originalEvent||e).pageX||0,top:n.pageY||0}},_unselectClosestSlide:function(){this.stopListening(a.selectionManager,"selection-change",this._handleSelectionChange),this._hideImagePropertyButtons(),this._currentGroup=null,this._currentSlideImage=0,this.$image=null},_handleSelectionChange:function(t,e,n,i){this._currentGroup&&n.selection===this.model&&n.selection!=e.selection&&this._unselectClosestSlide()},_showImagePropertyButtons:function(){this._currentSlideImage&&"card-right"===this._currentSlideImage.settings.get("card_align")?this._$propertyButtons.addClass("align-left"):this._$propertyButtons.removeClass("align-left"),this._$propertyButtons.css("visibility","visible")},_hideImagePropertyButtons:function(){this._$propertyButtons.css("visibility","hidden")},_updateContentItem:function(t,e){var n=this._currentSlideImage;if(!n||n!==t&&n!==t.parent||this.$image.css("background-position",n.settings.get("image_align")||"50% 50%"),"img"===t.get("type")){var i=t.getImage();if(i){var o=i.get("image_url"),r=f._adjustImageURLSize(l.makeAbsoluteURL(o),{isGrid:!1,width:i.get("image_width"),height:i.get("image_height")}),a=t.cid;this.$("#"+a).css("background-image","url("+r+")")}}},_handleClick:function(e){if(!t(e.target).closest(".content-container").length)return this.optionsBalloon.isHidden()?(this._selectClosestSlide(e),this.optionsBalloon.show(),this.triggerSelect({selection:this.model,type:"card-flipbook",action:"update"})):(this.optionsBalloon.hide(),this.triggerSelectNone()),!1;this.optionsBalloon.hide()},_handleEditSlides:function(t){return this.$el.trigger("editPhotoCollection",[this,{section:this.model}]),this.optionsBalloon.hide(),!1},_handleFocalPointUIButton:function(t){return this._showBkgEditView(),!1},_handleDelete:function(t){var e=this.getImageCount();return a.NativeConfirm.confirm({title:g.getString("editor.dialogs.glideshow-delete.title"),content:g.getString("editor.dialogs.glideshow-delete.text",{count:e}),buttons:[g.getString("editor.common.cancel"),g.getString("editor.common.delete")]},function(t){t.isConfirmed&&this.$el.trigger("deleteSection",[{section:this.model,imageItemsRemoved:this.getImageItems()}])}.bind(this)),this.optionsBalloon.hide(),!1},getImageCount:function(){for(var t=0,e=this.model.children.models,n=0,i=e.length;n<i;n++){"img"===e[n].attributes.type&&t++}return t},remove:function(){for(var t in this.optionsBalloon.remove(),this.childViewDict){this.childViewDict[t].remove()}return this._removeBkgEditView(),c.prototype.remove.call(this)}});e.defaults(_.prototype,d);var y=u.extend({events:{strictclick:"_handleClick","vclick .insert-before-link":"_handleInsertLink",vtaphold:"_decideToHandleTapHold",vmousedown:"_handleMouseDown","balloon-select .photo-button.section-level-balloon":"_handleInsertPhoto","balloon-select .text-button.section-level-balloon":"_handleInsertText","balloon-select .call-to-action-button.section-level-balloon":"_handleInsertCallToActionButton","balloon-select .embedded-link-button.section-level-balloon":"_handleInsertEmbeddedLink"},insertButtons:["photo","text","link"],initialize:function(t){return this.group=t.group,t.insertButtons&&(this.insertButtons=t.insertButtons),this.template=null,u.prototype.initialize.call(this,t)},_create:function(t){u.prototype._create.call(this,t);var e=this.model.getChildAt(this.group.offset);this.listenTo(e.settings,"change",this._handleSettingsChange),this._updateCardAlignment(e.settings.get("card_align")),this._originalCardOpacity=this.$itemContainer.css("opacity")},_handleSettingsChange:function(t){var e=t.get("key"),n=t.get("value");"card_align"==e&&this._updateCardAlignment(n)},_updateCardAlignment:function(t){t!=this._cardAlignment&&(this.$el.removeClass(this._cardAlignment||LucaJSONParser.defaultCardAlign),this.$el.addClass(t),this._cardAlignment=t,this.dispatchAdjustVisuals())},_tapHoldIsAllowed:function(e){var n=t(e.target);return!(1!=n.closest(".content-container").length||!(a.isMobile||0===n.closest(".image-wrapper").length&&"A"!=e.target.nodeName)||!1!==t(document.activeElement).hasClass("editable-region"))},_enterTapHoldMode:function(t){c.prototype._enterTapHoldMode.apply(this,arguments),this.$itemContainer.css("opacity",this._originalCardOpacity/2),this.triggerSelectNone()},_handleMoveInTapHoldMode:function(t){var e=t.clientX-this._originalMousePosition.x,n=t.clientY-this._originalMousePosition.y;this.$itemContainer.css(r.vendorPrefix+"transform","translate3d("+e+"px, "+n+"px, 0px)"),this.$itemContainer.css(r.vendorPrefix+"transform","translate3d("+e+"px, "+n+"px, 0px)"),c.prototype._handleMoveInTapHoldMode.apply(this,arguments)},_exitTapHoldMode:function(e){c.prototype._exitTapHoldMode.apply(this,arguments);var n,i=Math.min(t(window).width(),Math.max(e.clientX,0)),o=this.$el.width();n=i<o/3?"card-left":i<2*o/3?"card-center":"card-right";var a=this.model.children.models[this.group.offset];this.$el.trigger("updateSettingValue",[a,"card_align",n]),this.$itemContainer.css(r.vendorPrefix+"transform",""),this.$itemContainer.css("opacity",this._originalCardOpacity)},_createChildren:function(t){for(var n=e.extend({insertButtons:this.insertButtons},t),i=this.group.offset+1,o=this.group.count-1,r=0;r<o;r++){var a=this.model.getChildAt(i+r);a?this.insertContentItemBefore(a,null,n):console.error("Invalid group data extends out of bounds.",this.group,this.model)}this._refreshEmptyClass()},_refreshEmptyClass:function(){this.group.count<=1?this.$el.addClass("empty"):this.$el.removeClass("empty")},scrollSectionIntoView:function(e){e=t.extend({section:this.$el.closest(".section"),method:"nearest",ignoreWhenFullyVisible:!0,animate:!0},e),this.$el.trigger("scrollSectionIntoView",e)},_handleClick:function(e){return!this.$el.hasClass("tap-hold-mode")&&(t(e.target).closest(".content-container").length?u.prototype._handleClick.call(this,e):void 0)},_handleInsertPhoto:function(t){var e=this.model.getChildAt(this.group.offset);this.triggerSelect({type:"img",selection:e,action:"insert"}),this.$el.trigger("showImagePicker",[this]),this.insertBalloon.hide()},_handleInsertText:function(){this._prependItemByType("p")},_handleInsertCallToActionButton:function(t){this._prependItemByType("a")},_handleInsertEmbeddedLink:function(t){this._prependItemByType("a",{embedded:!0})},_prependItemByType:function(t,e){var n=this.model.getChildAt(this.group.offset);this.$el.trigger("insertItemAfter",[this,n,t,e]),this.insertBalloon.hide()},addContentItem:function(t,e,n){if(this._ownsContentItem(t))return this._refreshEmptyClass(),u.prototype.addContentItem.apply(this,arguments)},removeContentItem:function(t,e,n){if(this._ownsContentItem(t,n))return this._refreshEmptyClass(),u.prototype.removeContentItem.apply(this,arguments)},updateContentItem:function(t,e,n){if(this._ownsContentItem(t))return u.prototype.updateContentItem.apply(this,arguments)},_ownsContentItem:function(t,e){var n=!1,i=e&&void 0!==e.index?e.index:t.getIndex();i--;var o=this.group.offset,r=o+this.group.count-1;return i>=o&&i<=r&&(n=!0),n},_insert:function(t,e){return"img"===e.model.get("type")&&(e.buttonSet=["replace","delete"],e.buttonSetNoMove=["replace","delete"]),u.prototype._insert.apply(this,arguments)}}),b={create:function(t,e,n){var i=null,o=null;switch(t){case"photo-grid":o=x.getImageOptions(),i=this._createPhotoGridSectionForCollection(e,n,o);break;case"card-flipbook":o=C.getImageOptions(),i=this._createCardFlipbookSectionForCollection(e,n,o)}return i},_createPhotoGridSectionForCollection:function(e,n,i){for(var o=new a.SectionModel({type:"photo-grid"}),r=[],s=T.getGroups(e,i),l=s.length,c=0;c<l;c++){for(var u=s[c],h=u.offset,d=h+u.count,f=h;f<d;f++){var p=e[f],g=this._createImageItemFromData(p,i);o.addChild(g)}r.push(t.extend({},u))}o.set("groups",r);var m=n&&n.findFirstChildByType("p"),v=m?m.get("text"):"",_=new a.ContentItemModel({type:"p",text:v});return o.addChild(_),o},_createCardFlipbookSectionForCollection:function(t,e,n){var i=new a.GroupedSectionModel({type:"card-flipbook"});function o(t){i.addChild(t)}for(var r=[],s=0,l=this._createOldFlipbookGroupLookup(e),c=t.length,u=0;u<c;u++){var h=t[u],d=null,f=l[h.cid];if(f){var p=f.items;p[0]=this._createImageItemFromData(h,n,p[0]),p.forEach(o),d={count:p.length}}else{var g=this._createImageItemFromData(h,n);i.addChild(g),d={count:1}}d.count&&(d.offset=s,s+=d.count,r.push(d))}return i.set("groups",r),i},_createOldFlipbookGroupLookup:function(t){var e={};if(t)for(var n=t.children.models,i=t.get("groups"),o=0,r=i.length;o<r;o++){var a=i[o];if(a.count){var s=n.slice(a.offset,a.offset+a.count);if(s.length){var l=s[0].getImage();l&&(e[l.cid]={group:a,items:s})}}}return e},_createImageItemFromData:function(t,e,n){var i=a.assignNewImageFromData(null,t,e);return n&&i.settings.copyFrom(n.settings),i}},w=n.View.extend({events:{"vclick .importance-button":"_handleImportant","vclick .replace-button":"_handleReplace","vclick .delete-button":"_handleDelete","vclick .forward-button":"_handleMoveForward","vclick .backward-button":"_handleMoveBackward","vclick .collection-view":"_handleClick","vclick .add-photo-button":"_handleAddPhoto","vclick .help-link":"_handleHelpLink","vclick .add-photos-content":"_handleClickAddPhotosContent"},initialize:function(e){if(this.setElement(t('<div class="mock-photo-collection"><div class="collection-view"><div class="photos"></div><div class="add-photos-content"><div class="label"></div><a class="help-link" href="#"></a></div></div></div>')),this.$el.find(".add-photos-content .label").attr({"data-label-grid":g.getString("editor.grid.photos-add"),"data-label-glideshow":g.getString("editor.glideshow.photos-add")}),this.$el.find(".add-photos-content .help-link").attr("data-label",g.getString("editor.hints.see-works")),this._nextPID=0,this.$photos=this.$el.find(".photos"),this.$selection=t(),this.imageDatas=[],this._initialImageUUIDs={},this._onNativeImage=this._onNativeImage.bind(this),this._handleImageError=this._handleImageError.bind(this),this._handleModalClose=this._handleModalClose.bind(this),this._scrollToSelection=this._scrollToSelection.bind(this),this._$collectionView=this.$el.find(".collection-view"),this._scrollAnimator=new o.Widget.VerticalScrollAnimator(this._$collectionView),m()){this.$el.addClass("full-width");var n=t('<div class="toolbar"></div>'),i=t('<button type="button" class="add-photo-button">'+g.getString("editor.collection.photo-add")+"</button>");n.append(i),n.insertAfter(this._$collectionView)}},_enableListeners:function(){a.registerNativeImageHandler("image-response","photo-collection",this._onNativeImage),a.registerNativeImageHandler("image-error","photo-collection",this._handleImageError),this.listenTo(NativeApp,"end-editing",this._onEndEditing),this.listenTo(NativeApp,"picker-width",this._handlePickerWidth),this.listenTo(NativeApp,"header-tapped",this._handleHeaderTapped)},_disableListeners:function(){a.unregisterNativeImageHandler("image-response","photo-collection"),a.unregisterNativeImageHandler("image-error","photo-collection"),this.stopListening(NativeApp,"end-editing",this._onEndEditing),this.stopListening(NativeApp,"picker-width",this._handlePickerWidth),this.stopListening(NativeApp,"header-tapped",this._handleHeaderTapped)},_addPhoto:function(e,n){var i=f._adjustImageURLSize(l.makeAbsoluteURL(e.path),{isGrid:"grid"===this.collectionView.context,width:e.imageSize.width,height:e.imageSize.height});if("replace"===e.source.action){var o=this.$("#"+e.source.pid);if(o.length){var r=o.data("imageData");t.extend(r,e),o.css("background-image","url("+i+")").data("src",i),o[e.is_preview?"addClass":"removeClass"]("image-loading"),e.is_new&&this._checkNeedsRenderAndSelect(e,n)}}else{if(0===this.$selection.length)this.imageDatas.push(e);else{var a=this.$selection.data("imageData"),s=t.inArray(a,this.imageDatas);this.imageDatas.splice(s+1,0,e)}this._checkNeedsRenderAndSelect(e,n)}e.is_new||e.is_preview||this._unlockDoneButton(),this.imageDatas.length>0&&this.$el.removeClass("empty")},_checkNeedsRenderAndSelect:function(t,e){var n="#"+t.source.pid;e?!1===e.autoSelect?!1===e.render||this.render():!1===e.render?this.selectAndScrollPhoto(n):this.renderAndSelect(n):this.renderAndSelect(n)},selectAndScrollPhoto:function(t,e){this._selectPhoto(this.$(t),e),setTimeout(this._scrollToSelection,0)},_lockDoneButton:function(){this._doneLock=(this._doneLock||0)+1,a.NativeModal.disable()},_unlockDoneButton:function(){this._doneLock=(this._doneLock||0)-1,this._doneLock<1&&(this._doneLock=0,a.NativeModal.enable())},_onNativeImage:function(e,n){if(this.$el.hasClass("visible")){this._clearReplaceMode({updatePickerSource:!1});for(var i=e.images,o=[],r="insert"===n.action,s=0;s<i.length;s++){var l=t.extend({},i[s],{source:t.extend({},n)});r&&(l.source.pid="p"+this._nextPID++),this._addPhoto(l),o[s]={uuid:l.uuid,source:null},l.is_preview&&(l.is_new&&this._lockDoneButton(),o[s].source=this._getSourceAsReplaceStr(l.source))}return{imageSources:o,pickerSource:a._encodeImageSourceData(this.getNewImageSource())}}},_onEndEditing:function(){this._handleCancel()},_showNativeImagePicker:function(e,n){e||(e=this.getNewImageSource()),n=t.extend({uuid:"",source:a._encodeImageSourceData(e),multiSelect:!("ipad"===a.preferences.deviceType)},this.collectionView.imageOptions,n),NativeApp.toNative("image-request",n)},getNewImageSource:function(){return{type:"photo-collection",action:"insert",pid:"p"+this._nextPID++}},_getSourceAsReplace:function(e){return t.extend({},e,{action:"replace"})},_getSourceAsReplaceStr:function(t){return a._encodeImageSourceData(this._getSourceAsReplace(t))},show:function(t,e){e||(e={}),this._source=t,this.$el.addClass("empty visible"),this.imageDatas.length=0,this.render(),this._enableListeners();var n=e.imageDatas;if(this._initialImageUUIDs={},n){for(var i=0,o=n.length;i<o;i++){var r=n[i];this._initialImageUUIDs[r.uuid]=!0,r.source=this.getNewImageSource(),this._addPhoto(r,{render:!1,autoSelect:!1})}this.render();var s=n.length-1;e&&"number"==typeof e.selectedIndex&&e.selectedIndex>=0&&(s=Math.min(s,e.selectedIndex));var l="#"+n[s].source.pid;0===s?(this._selectPhoto(this.$(l),{updatePickerSource:!1}),this._scrollAnimator.scrollTo(0)):this.selectAndScrollPhoto(l,{updatePickerSource:!1})}var c={title:this.collectionView.title,showHelp:e.showHelp?this.collectionView.context:null};a.NativeModal.show(c,this._handleModalClose),m()&&0!==this.imageDatas.length||this._showNativeImagePicker(null,{suppressServiceUI:!0}),NativeApp.toNative("get-picker-width")},isShowing:function(){return this.$el.hasClass("visible")},hide:function(){this._disableListeners(),NativeApp.toNative("hide-picker"),this._clearSelection({updatePickerSource:!1}),this.$el.removeClass("visible")},_getCollectionView:function(t){switch(t.type){case"card-flipbook":return new C({imageDatas:this.imageDatas});default:case"photo-grid":return new x({imageDatas:this.imageDatas})}},_handleImportant:function(e){if(t(e.target).closest("button").hasClass("disabled"))return!1;var n=t(e.target).closest(".photo-image"),i=n.data("imageData");(i.importance?0:1)?this._setImportantWithMovement(i):i.importance=0;var o=n.attr("id");return this.renderAndSelect("#"+o),!1},_setImportantWithMovement:function(t){var e={before:this._getGroupSingleTileCount()+1,after:0,moveBackward:0,moveForward:0};t.importance=1,e.after=this._getGroupSingleTileCount(),e.after>e.before&&(this._movePhotoData(t,-1)&&(e.moveBackward=this._getGroupSingleTileCount(),this._movePhotoData(t,1)),this._movePhotoData(t,1)&&(e.moveForward=this._getGroupSingleTileCount(),this._movePhotoData(t,-1)),e.moveBackward<e.after&&e.moveBackward<=e.moveForward?this._movePhotoData(t,-1):e.moveForward<e.after&&this._movePhotoData(t,1))},_getGroupSingleTileCount:function(){var t=this.collectionView.imageDatas,e=this.collectionView.imageOptions;return T.getGroups(t,e).reduce(function(t,e,n,i){return 1===e.count?t+1:t},0)},_scrollToSelection:function(){if(this.$selection.length){var t=this._getScrollMetrics(this.$selection[0]);t.isFullyVisible||this._scrollAnimator.scrollTo(t.scrollToBottom)}},_getScrollMetrics:function(t){var e=this._$collectionView[0],n=this._getOffsetTop(t),i=n+t.offsetHeight-e.offsetHeight;return{scrollToTop:n,scrollToBottom:i,isFullyVisible:e.scrollTop<=n&&e.scrollTop>=i}},_getOffsetTop:function(t){for(var e,n=t.offsetTop,i=t.offsetParent;i;)(e=i.offsetTop)&&(n+=e),i=i.offsetParent;return n},_handleReplace:function(e){var n=t(e.target).closest(".photo-image");return n.find(".replace-button.active").length?this._clearReplaceMode():this._enterReplaceMode(n),!1},_enterReplaceMode:function(t){this.$(".photo-grid").addClass("replace-mode"),t.find(".replace-button").addClass("active");var e=t.data("imageData"),n=this._getSourceAsReplace(e.source);this._showNativeImagePicker(n,{multiSelect:!1,uuid:e.uuid})},_clearReplaceMode:function(t){this.$(".photo-grid").removeClass("replace-mode"),this.$(".replace-button.active").removeClass("active"),t&&!1===t.updatePickerSource||m()||this._showNativeImagePicker()},_handleDelete:function(e){var n=t(e.target).closest(".photo-image");return n.data("imageData").hasContent?a.NativeConfirm.confirm({title:g.getString("editor.dialogs.glideshow-photo-delete.title"),content:g.getString("editor.dialogs.glideshow-photo-delete.text"),buttons:[g.getString("editor.common.cancel"),g.getString("editor.common.delete")],buttonOptions:[null,{style:"destructive"}]},function(t){t.isConfirmed&&this._deletePhoto(n)}.bind(this)):this._deletePhoto(n),!1},_deletePhoto:function(e){var n=e.data("imageData"),i=t.inArray(n,this.imageDatas);if(e.hasClass("image-loading")&&this._unlockDoneButton(),NativeApp.toNative("image-remove",{imageSources:[{uuid:n.uuid,source:this._getSourceAsReplaceStr(n.source)}]}),e.remove(),i>=0&&this.imageDatas.splice(i,1),this.render(),0===this.imageDatas.length)this.$el.addClass("empty");else{var o=i>0?i-1:0,r=this.imageDatas[o];this.selectAndScrollPhoto("#"+r.source.pid)}},_handleMoveForward:function(e){var n=t(e.target).closest(".photo-image");return this._movePhoto(n,1),!1},_handleMoveBackward:function(e){var n=t(e.target).closest(".photo-image");return this._movePhoto(n,-1),!1},_movePhoto:function(t,e){var n=t.data("imageData");if(this._movePhotoData(n,e)){var i=t.attr("id");this.renderAndSelect("#"+i)}},_movePhotoData:function(e,n){var i=t.inArray(e,this.imageDatas),o=n>0?i+n+1:i+n;return!!(n&&o>=0&&o<=this.imageDatas.length)&&(this.imageDatas.splice(o,0,e),i=n>0?i:i+1,this.imageDatas.splice(i,1),!0)},_selectPhoto:function(t,e){var n=this.$selection;n[0]!==t[0]&&(n.closest(".tile").removeClass("selected"),t.closest(".tile").addClass("selected"),this.$selection=t,this._clearReplaceMode(e))},_clearSelection:function(e){(this.$selection||t()).closest(".tile").removeClass("selected"),this.$selection=t(),this._clearReplaceMode(e)},_handleClick:function(e){var n=t(e.target).closest(".photo-image");return 0===n.length||this.$selection[0]===n[0]?this._clearSelection():this.selectAndScrollPhoto(n),!1},_handleAddPhoto:function(t){this._clearReplaceMode({updatePickerSource:!1}),this._showNativeImagePicker(),t.stopPropagation(),t.preventDefault()},_handleHelpLink:function(t){return this.$el.hasClass("collection-card-flipbook")&&NativeApp.toNative("show-help",{context:this.collectionView.context}),!1},_handleClickAddPhotosContent:function(t){NativeApp.toNative("image-request-file-select")},_handlePickerWidth:function(t){if(!m()){var e=t.width;this._$collectionView.css({right:e+"px"})}},_handleHeaderTapped:function(t){"modal"===t.type&&this._scrollAnimator.scrollTo(0)},_handleImageError:function(t,e){$photo=this.$("#"+e.pid),this._deletePhoto($photo)},_handleModalClose:function(t){t===a.NativeModal.CANCEL?(this._notifyRemovedImagesOnCancel(),this.hide(),this._doneLock=0,this.$el.trigger("photo-collection-editor-cancel",[this._source,{}])):this._doneLock||(this.hide(),this.$el.trigger("photo-collection-editor-done",[this._source,{imageDatas:this.imageDatas}]))},_notifyRemovedImagesOnCancel:function(){var t=this.imageDatas.filter(function(t){return!(t.uuid in this._initialImageUUIDs)}.bind(this)).map(function(t){return{uuid:t.uuid,source:this._getSourceAsReplaceStr(t.source)}}.bind(this));t.length&&NativeApp.toNative("image-remove",{imageSources:t})},renderAndSelect:function(t){return this.render(),this.selectAndScrollPhoto(t),this},render:function(){return this.collectionView&&(this.$el.removeClass(this.collectionView.className),this.collectionView.remove()),this.collectionView=this._getCollectionView(this._source),this.$el.addClass(this.collectionView.className),this.$photos.append(this.collectionView.render().$el),this}}),S=n.View.extend({updatePhotos:function(e){var n=this.$el.find(".photo-image");n.each(function(i,o){var r=t(o),a=this.imageDatas&&this.imageDatas[i]||{};r.data("imageData",a),0===i&&r.addClass("first-image"),i===n.length-1&&r.addClass("last-image"),a.is_preview&&r.addClass("image-loading"),e&&e(r)}.bind(this))}}),x=S.extend({type:"photo-grid",title:"",className:"collection-photo-grid",context:"grid",initialize:function(e){this.template||(this.template=t("#photo-grid-section-template").text(),this.partial=t("#photo-grid-tile-template").text()),this.title=g.getString("editor.collection.grid-edit"),this.imageDatas=e.imageDatas||[],this.imageOptions=x.getImageOptions()},_getGroups:function(){for(var t=T.getGroups(this.imageDatas,this.imageOptions),e=[],n=0;n<t.length;n++){for(var i=t[n],o={layoutName:i.layoutName,photos:[]},r=i.offset,a=i.count,s=0;s<a;s++){var c=this.imageDatas[s+r],u=f._adjustImageURLSize(l.makeAbsoluteURL(c.path),{isGrid:"grid"===this.context,width:c.imageSize.width,height:c.imageSize.height});o.photos.push({id:c.source.pid,src:u,caption:""})}e.push(o)}return e},buildPhotoButtons:function(t){var e=t.data("imageData");t.append('<div class="image-overlay"></div>').append('<div class="image-labels"><span class="label replace-label">'+g.getString("editor.common.replace")+"</span></div>").append('<div class="buttons edit-buttons dark-tooltip-buttons"><button class="replace-button"><span>'+g.getString("editor.common.replace-lc")+'</span></button><button class="importance-button"><span>'+g.getString("editor.collection.large")+'</span></button><button class="backward-button"><span>'+g.getString("editor.collection.move-b")+'</span></button><button class="forward-button"><span>'+g.getString("editor.collection.move-f")+'</span></button><button class="delete-button"><span>'+g.getString("editor.common.delete-lc")+"</span></button></div>");var n=t.find(".importance-button");e.importance?(n.addClass("active"),n.find("span").text(g.getString("editor.collection.small"))):(n.find("span").text(g.getString("editor.collection.large")),n.closest(".tile").is(":only-child")&&n.addClass("disabled"))},render:function(){var e=t(i.render(this.template,{groups:this._getGroups()},{photo_grid_tile:this.partial}));return e=s.resolveImagePlaceholders(e),this.setElement(e),this.updatePhotos(this.buildPhotoButtons),this}},{getImageOptions:function(){return{maxDimension:a.MAX_IMAGE_DIM_GRID,detectPanoramas:!0,detectFaces:!1}}}),C=S.extend({type:"card-flipbook",title:"",className:"collection-card-flipbook",context:"glideshow",initialize:function(t){this.title=g.getString("editor.collection.glideshow-edit"),this.imageDatas=t.imageDatas||[],this.imageOptions=C.getImageOptions()},buildPhotoButtons:function(t){var e=t.data("imageData");t.append('<div class="image-overlay"></div>').append('<div class="image-labels"><span class="label replace-label">'+g.getString("editor.common.replace")+"</span></div>").append('<div class="buttons edit-buttons dark-tooltip-buttons"><button class="replace-button"><span>'+g.getString("editor.common.replace-lc")+'</span></button><button class="backward-button"><span>'+g.getString("editor.collection.move-b")+'</span></button><button class="forward-button"><span>'+g.getString("editor.collection.move-f")+'</span></button><button class="delete-button"><span>'+g.getString("editor.common.delete-lc")+"</span></button></div>"),e.hasContent&&t.append('<div class="has-content"></div>')},render:function(){this.imageDatas.forEach(function(t){t.importance=1});var e=t(i.render(t("#photo-grid-section-template").text(),{groups:x.prototype._getGroups.call(this)},{photo_grid_tile:t("#photo-grid-tile-template").text()}));return e=s.resolveImagePlaceholders(e),this.setElement(e),this.updatePhotos(this.buildPhotoButtons),this}},{getImageOptions:function(){return{maxDimension:a.MAX_IMAGE_DIM_INLINE,detectPanoramas:!1,detectFaces:!0}}}),T={_gridLayoutDict:{l:["t1-layout-l-1"],p:["t1-layout-p-1"],ll:["t2-layout-ll-1"],pp:["t2-layout-pp-1"],lp:["t2-layout-lp-1"],pl:["t2-layout-pl-1"],ppp:["t3-layout-ppp-1"],lll:["t3-layout-lll-1"],pll:["t3-layout-pll-1"],llp:["t3-layout-llp-1"],lpp:["t3-layout-lpp-1"],ppl:["t3-layout-ppl-1"],lppp:["t4-layout-lppp-1"],plpp:["t4-layout-plpp-1"],pplp:["t4-layout-pplp-1"],pppl:["t4-layout-pppl-1"],pppp:["t4-layout-pppp-1"]},_maxGridLayoutTileCount:4,getGroups:function(t,e){var n,i=[];for(n=0;n<t.length;n++){var o=t[n],r=o.imageSize||{},a=r.width||0,s=r.height||0;i.push({orientation:a>s?"l":"p",importance:o.importance,data:o})}var l=this._getLayoutGroups(i,0,i.length-1),c=this._findSinglePhotoRuns(i,l);for(n=c.length-1;n>=0;n--)for(var u=c[n],h=u.start,d=u.end,f=!1,p=d-1,g=l[d].offset;!f&&p>=h;){for(var m=l[p],v=m.matches,_=v.length-1;_>1;){var y=v[_-1],b=this._getLayoutGroups(i,m.offset+y.count,g);if(0===this._findSinglePhotoRuns(i,b).length){v.length=_,m.count=y.count,Array.prototype.splice.apply(l,[p+1,d-(p+1)+1].concat(b)),f=!0;break}--_}p--}var w=[];for(n=0;n<l.length;n++){var S=l[n];w.push({offset:S.offset,count:S.count,layoutName:S.matches[S.matches.length-1].layoutName})}return w},_getLayoutGroups:function(t,e,n){for(var i=[];e<=n;){for(var o="",r="",a=[],s=0,l=0;e+l<=n&&l<this._maxGridLayoutTileCount;l++){var c=t[e+l],u=c.orientation;if(c.importance>0){0===l&&(r=(this._gridLayoutDict[u]||[])[0],s=1,a.push({layoutName:r,count:s}));break}o+=u,(r=(this._gridLayoutDict[o]||[])[0])&&(s=l+1,a.push({layoutName:r,count:s}))}var h=a[a.length-1],d={offset:e,count:h.count,matches:a};i.push(d),e+=h.count}return i},_findSinglePhotoRuns:function(t,e){for(var n=[],i=0,o=0;o<e.length;o++){var r=e[o];if(1===r.count)t[r.offset].importance||i===o||n.push({start:i,end:o,count:o-i+1}),i=o+1}return n}};a.PhotoGridSectionView=v,a.CardFlipbookSectionView=_,a.CardFlipbookCardSectionView=y,a.PhotoCollectionModalView=w,a.PhotoCollectionSectionFactory=b}.apply(e,i))||(t.exports=o)},function(t,e,n){var i;void 0===(i=function(){return{_gridLayoutDict:{l:["t1-layout-l-1"],p:["t1-layout-p-1"],ll:["t2-layout-ll-1"],pp:["t2-layout-pp-1"],lp:["t2-layout-lp-1"],pl:["t2-layout-pl-1"],ppp:["t3-layout-ppp-1"],lll:["t3-layout-lll-1"],pll:["t3-layout-pll-1"],llp:["t3-layout-llp-1"],lpp:["t3-layout-lpp-1"],ppl:["t3-layout-ppl-1"],lppp:["t4-layout-lppp-1"],plpp:["t4-layout-plpp-1"],pplp:["t4-layout-pplp-1"],pppl:["t4-layout-pppl-1"],pppp:["t4-layout-pppp-1"]},_maxGridLayoutTileCount:4,getGroups:function(t,e){var n,i=[];for(n=0;n<t.length;n++){var o=t[n],r=o.imageSize||{},a=r.width||0,s=r.height||0;i.push({orientation:a>s?"l":"p",importance:o.importance,data:o})}var l=this._getLayoutGroups(i,0,i.length-1),c=this._findSinglePhotoRuns(i,l);for(n=c.length-1;n>=0;n--)for(var u=c[n],h=u.start,d=u.end,f=!1,p=d-1,g=l[d].offset;!f&&p>=h;){for(var m=l[p],v=m.matches,_=v.length-1;_>1;){var y=v[_-1],b=this._getLayoutGroups(i,m.offset+y.count,g);if(0===this._findSinglePhotoRuns(i,b).length){v.length=_,m.count=y.count,Array.prototype.splice.apply(l,[p+1,d-(p+1)+1].concat(b)),f=!0;break}--_}p--}var w=[];for(n=0;n<l.length;n++){var S=l[n];w.push({offset:S.offset,count:S.count,layoutName:S.matches[S.matches.length-1].layoutName})}return w},_getLayoutGroups:function(t,e,n){for(var i=[];e<=n;){for(var o="",r="",a=[],s=0,l=0;e+l<=n&&l<this._maxGridLayoutTileCount;l++){var c=t[e+l],u=c.orientation;if(c.importance>0){0===l&&(r=(this._gridLayoutDict[u]||[])[0],s=1,a.push({layoutName:r,count:s}));break}o+=u,(r=(this._gridLayoutDict[o]||[])[0])&&(s=l+1,a.push({layoutName:r,count:s}))}var h=a[a.length-1],d={offset:e,count:h.count,matches:a};i.push(d),e+=h.count}return i},_findSinglePhotoRuns:function(t,e){for(var n=[],i=0,o=0;o<e.length;o++){var r=e[o];if(1===r.count)t[r.offset].importance||i===o||n.push({start:i,end:o,count:o-i+1}),i=o+1}return n}}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,o;i=[n(0),n(1)],void 0===(o=function(t,e){function n(){}return e.extend(n.prototype,{_imageLoader:null,preload:function(e){this._cleanupLoader();var n=t.Deferred();this._imageLoader=new Image,this._imageLoader.src=e;var i=function(){this._cleanupLoader(),n.resolve(e)}.bind(this),o=function(t){this._cleanupLoader(),n.reject(t,e)}.bind(this);return this._imageLoader.complete?i():(this._imageLoader.onload=i,this._imageLoader.onerror=o),n.promise()},abort:function(){this._cleanupLoader()},_cleanupLoader:function(){this._imageLoader&&(this._imageLoader.onload=null,this._imageLoader.onerror=null,this._imageLoader.src="")}}),n.preload=function(t){return(new n).preload(t)},n}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(4),n(24),n(120),n(33),n(47)],void 0===(o=function(t,e,n,i,o,r,a,s){function l(e,n){this._data=e,this._url=n,this._$ele=t(),this._tx=0,this._ty=0,this._posX=-1,this._posX=-1,this._realX=-1,this._realY=-1}return i.inherit(l,a,{sync:function(){var t=this.getPositionOffset();return this._$ele.css(o.vendorPrefix+"transform","translate3d("+t.x+"px,"+t.y+"px,0)"),this},attach:function(e){return this._$ele=t(e),this},syncGeometry:function(){var t=this._$ele&&this._$ele[0];return t&&this.setGeometry(t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight),this},setGeometry:function(t,e,n,i){return this._tx=this._ty=0,this._posX=this._realX=t,this._posY=this._realY=e,this._width=n,this._height=i,this},getGeometry:function(){return{x:this._posX,y:this._posY,width:this._width,height:this._height,x2:this._posX+this._width,y2:this._posY+this._height}},translate:function(t,e){return this._tx=t,this._ty=e,this},setPosition:function(t,e){return this._posX=t,this._posY=e,this},getPosition:function(t,e){return{x:this._posX,y:this._posY}},getPositionOffset:function(){return{x:this._posX-this._realX+this._tx,y:this._posY-this._realY+this._ty}}}),n.View.extend({events:{"vmousedown .photo":"_handleDownEvent","vtaphold .photo":"_handleTapHold","vclick .photo":"_handleClick","vclick .overlay":"_handleHide"},initialize:function(e){this.setElement(t('<div class="photo-drawer"></div>')),this._$overlay=t('<div class="overlay"></div>'),this._$clip=t('<div class="clip"><div class="view"></div></div>'),this._$view=this._$clip.children().eq(0),this.$el.append(this._$overlay),this.$el.append(this._$clip),this._pendingUpdateId=0,this._draggingEnabled=!1,this._isDragging=!1,this._startX=-1,this._startY=-1,this._photoChangedPosition=!1,this._list=new a,this._handleDownEvent=this._handleDownEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleUpEvent=this._handleUpEvent.bind(this),this._handleCancelEvent=this._handleCancelEvent.bind(this),this._handleFrameUpdate=this._handleFrameUpdate.bind(this),this._handleHide=this._handleHide.bind(this)},_getPhotoURL:function(t){var e=t&&t.getImage(),n=e?e.get("image_url"):"";return n&&n.search(/^blob\:/)<0&&(n=s._adjustImageURLSize(r.makeAbsoluteURL(n),{model:t,isGrid:!0})),n},_createPhotosList:function(t){for(var e=new i.Node,n=t.length,o=0;o<n;o++){var r=new l(t[o],this._getPhotoURL(t[o]));e.appendChild(r)}return e},_findPhotoItem:function(t){for(var e=this._list&&this._list.firstChild;e&&e._data!==t;)e=e.nextSibling;return e},_scrollPhotoItemIntoView:function(t,e){if(t){var n=t.getGeometry();this._scrollAnimator||(this._scrollAnimator=new i.Widget.HorizontalScrollAnimator(this._$clip));var o=n.x+n.x2>>1,r=this._$clip.width(),a=this._$clip[0].scrollWidth-r,s=o-(r>>1),l=this._scrollAnimator.getScrollOffset();(s=Math.max(0,Math.min(s,Math.max(0,a))))!=l&&this._scrollAnimator.scrollTo(s,e)}},_scrollPhotoElementIntoView:function(e,n){var i=t(e).data("photoItem");i&&this._scrollPhotoItemIntoView(i,n)},show:function(t,e){if(e=e||{},this._list=this._createPhotosList(t),this.render(),this.$el.addClass("show"),this._syncGeometry(),e.selectedItem){var n=this._findPhotoItem(e.selectedItem);n&&(this._scrollPhotoItemIntoView(n),this._selectPhoto(n._$ele,{reason:"initial-selection"}))}},hide:function(){this.$el.removeClass("show"),this._$view.empty(),this._removeEvents(),this.trigger("hide")},_destroyTracker:function(){this._tracker&&(this._tracker.destroy(),this._tracker=null)},_enableDragging:function(e){this._selectPhoto(e,{reason:"user-drag"}),this._offsetX=0,this._draggingEnabled||(this._draggingEnabled=!0,t(document).on("vmousemove",this._handleMoveEvent).on("vmouseup",this._handleUpEvent).on("vmousecancel",this._handleCancelEvent))},_disableDragging:function(){if(this._offsetX=0,this._draggingEnabled=!1,this._isDragging=!1,this._$photo){var t=this._$photo.data("photoItem");t&&t.translate(0,0).sync()}this._removeEvents()},_removeEvents:function(){t(document).off("vmousemove",this._handleMoveEvent).off("vmouseup",this._handleUpEvent).off("vmousecancel",this._handleCancelEvent)},_swapPositions:function(t,e){var n=t.getPosition(),i=e.getPosition();t.setPosition(i.x,i.y),e.setPosition(n.x,n.y)},_handleFrameUpdate:function(t){this._cancelDragUpdate();var e=this._pageX-this._startX+this._offsetX,n=this._$photo.data("photoItem"),i=null,o=n.getGeometry();if(this._isDragging){var r=this._$clip[0],a=r.scrollLeft,s=a;this._pageX<64?s=(s=a-10)<0?0:s:this._pageX>r.offsetWidth-64&&(s=a+10),s!=a&&(r.scrollLeft=s,s=r.scrollLeft,this._requestDragUpdate()),e+=s-a,this._offsetX+=s-a}if(0!=e)if(i=n[e>0?"nextSibling":"previousSibling"]){var l=i.getGeometry(),c=e+o[e<0?"x":"x2"],u=l.x+Math.round(l.width/2);if(e<0&&c<u||e>0&&c>u){this._list[c<u?"insertBefore":"insertAfter"](n,i),this._swapPositions(n,i);var h=o.x-n.getGeometry().x;this._offsetX+=h,e+=h,this._photoChangedPosition=!0}}else e=0;n.translate(e,0).sync(),i&&i.sync()},_requestDragUpdate:function(t){this._pendingUpdateId||(this._pendingUpdateId=window.requestAnimationFrame(this._handleFrameUpdate))},_flushPendingDragUpdate:function(t){this._pendingUpdateId&&(this._cancelDragUpdate(),this._handleFrameUpdate())},_cancelDragUpdate:function(){this._pendingUpdateId&&(window.cancelAnimationFrame(this._pendingUpdateId),this._pendingUpdateId=0)},_triggerMoveNotification:function(){if(this._photoChangedPosition&&this._$photo){var t=this._$photo.data("photoItem"),e=t&&t.previousSibling,n={item:t._data,refItem:e&&e._data};this.trigger("insert-photo-after",n)}},_handleDownEvent:function(t){this._startX=t.pageX,this._startY=t.pageY,this._pageX=this._startX,this._pageY=this._startY,this._photoChangedPosition=!1,this._isDragging=!1},_handleMoveEvent:function(t){return this._isDragging=!0,this._pageX=t.pageX,this._pageY=t.pageY,this._requestDragUpdate(),!1},_handleUpEvent:function(t){return this._isDragging=!1,this._flushPendingDragUpdate(),this._triggerMoveNotification(),this._disableDragging(),!1},_handleCancelEvent:function(t){if(t.originalEvent&&"touchcancel"===t.originalEvent.type)return this._handleUpEvent(t)},_handleHide:function(t){return this.hide(),!1},_unselectPhoto:function(t){if(this._$photo){var e=this._$photo.data("photoItem");e&&(t=t||{},this._$photo.removeClass("active"),this.trigger("photo-unselected",{item:e._data,reason:t.reason||"user-select"}))}},_selectPhoto:function(e,n){var i=t(e),o=i.data("photoItem");n=n||{},o&&(this._$photo&&this._$photo[0]==e||(this._unselectPhoto(n),this._$photo=i,this._$photo.addClass("active"),this.trigger("photo-selected",{item:o._data,reason:n.reason||"user-select"})))},_handleClick:function(e){var n=t(e.target).closest(".photo");return this._selectPhoto(n),this._scrollPhotoElementIntoView(n),!1},_handleTapHold:function(t){this._list.firstChild&&this._list.firstChild.nextSibling&&this._enableDragging(t.currentTarget)},_createPhotoElement:function(e){var n=t('<div class="photo"></div>'),i=t('<div class="photo-view"></div>');return i.css("backgroundImage","url("+e._url+")"),n.append(i),n.css(o.vendorPrefix+"transform","translate3d(0,0,0)"),n},_syncGeometry:function(){for(var t=this._list&&this._list.firstChild;t;)t.syncGeometry(),t=t.nextSibling},render:function(){var t=[];this._$view.empty();for(var e=this._list.firstChild;e;){var n=this._createPhotoElement(e);e.attach(n),n.data("photoItem",e),t.push(n),e=e.nextSibling}this._$view.append(t)}})}.apply(e,i))||(t.exports=o)},,function(t,e,n){var i,o;i=[n(0),n(1),n(162)],void 0===(o=function(t,e,n){window.NativeApp.toNative=function(t,n){return n?n.event=t:e.isObject(t)?t=(n=t).event:n={event:t},"function"==typeof this.toNativeCallback[t]&&this.toNativeCallback[t](n),parent.AppShell.receiveMessage(n)}.bind(window.NativeApp),window.NativeApp.isAvailable=function(){return!0};var i=document.location.origin;i||(i=document.location.protocol+"//"+document.location.host);function o(t){var e=t.type||"";return e.search(/^image\/jpeg/)>=0||e.search(/^image\/png/)>=0}window.addEventListener("message",function(t){if(i==t.origin){var e=t.data;e&&"adobe-spark-page-editor"==e.source&&window.NativeApp.fromNative(e.name,e.data)}},!1),document.addEventListener("keydown",function(t){80==t.keyCode&&window.WebPro.isChrome&&(t[/^Mac/.test(navigator.platform)?"metaKey":"ctrlKey"]&&(t.preventDefault(),parent.AppShell.receiveMessage({event:"print-page"})))});var r=t(".drop-zone");NativeApp.stopDraggingFeedback=function(){r.removeClass("is-dragging").removeClass("no-drop")},t(document).on("dragover",function(t){var n=NativeApp.fromNative("get-source-for-coordinates",{x:t.originalEvent.clientX,y:t.originalEvent.clientY}),i=e.toArray(t.originalEvent.dataTransfer.items),a=e.filter(i,o);return!n||0!==i.length&&1!==a.length?(t.originalEvent.dataTransfer.dropEffect="none",r.addClass("no-drop")):(t.originalEvent.dataTransfer.dropEffect="copy",r.removeClass("no-drop")),r.addClass("is-dragging"),!1}).on("drop",function(t){var n=t.originalEvent.dataTransfer||{},i=n.files||[],a=i.length;if(r.removeClass("is-dragging").removeClass("no-drop"),i=e.toArray(i),1===(i=e.filter(i,o)).length&&parent.AppShell.receiveMessage({event:"dropped-files",data:n,x:t.originalEvent.clientX,y:t.originalEvent.clientY}),a)return!1}).on("dragexit dragleave",function(t){t.target==r[0]&&r.removeClass("is-dragging").removeClass("no-drop")}).on("dragend",function(t){r.removeClass("is-dragging")})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(7),n(165),n(18),n(123),n(181),n(182),n(120),n(122),n(183),n(142),n(156),n(184),n(185)],void 0===(o=function(){}.apply(e,i))||(t.exports=o)},function(t){t.exports={editor:{common:{ok:"OK",cancel:"Cancel",delete:"Delete","delete-lc":"delete",replace:"Replace","replace-lc":"replace"},hints:{"scroll-story":"Scroll to start writing your story","see-works":"See how it works","image-add":"Add your image",missing:{title:"Oops...",text:"This photo seems to have gone missing",banner:"You have {count, plural, =1 {1 missing photo} other {# missing photos}} that should be replaced."}},dialogs:{"error-app":{title:"Application Error",text:"An error occurred while processing an application request.","text-parse":"An error occurred while parsing the data for this Page.","text-init":"An error occurred while initializing the Spark Page editor."},resolution:{title:"Low resolution image",text:"This image format works best with large images. Smaller images, like this one, will appear blurry on large screens due to scaling. Try using a larger image for a better result."},"content-delete":{title:"Delete entire section?",text:"Are you sure you want to delete this section and all its contents, including the associated image?",confirm:"Delete section"},"title-move":{text:"To move the title, tap and hold to drag it to a different position",confirm:"OK, got it"},"grid-inline-delete":{title:"Delete Photo or Grid",text:"Deleting the photo will delete 1 photo.","confirm-photo":"Delete Photo","confirm-grid":"Delete Entire Grid"},"grid-inline-delete2":{title:"Delete Grid",text:"Are you sure you want to delete this Grid? Deleting the Grid will delete {count, plural, =1 {1 photo} other {# photos}}.",confirm:"Delete Grid"},"glideshow-inline-delete":{title:"Delete Photo or Glideshow",text:"Deleting the photo will delete {count, plural, =1 {1 photo} other {# photos}} and all associated text.","confirm-photo":"Delete Photo","confirm-glideshow":"Delete Entire Glideshow"},"glideshow-inline-delete2":{title:"Delete Glideshow",text:"Are you sure you want to delete this Glideshow? Deleting the Glideshow will delete {count, plural, =1 {1 photo} other {# photos}} and all associated text.",confirm:"Delete Glideshow"},"grid-delete":{title:"Delete entire photo grid?",text:"{count, plural, =1 {1 photo} other {# photos}} will be deleted. This cannot be undone."},"glideshow-delete":{title:"Delete entire glideshow?",text:"{count, plural, =1 {1 photo} other {# photos}} and associated text will be deleted. This cannot be undone."},"glideshow-photo-delete":{title:"Delete photo and text?",text:"Deleting this photo will also delete the text associated with it. This cannot be undone."}},labels:{landscape:"Landscape",portrait:"Portrait"},title:{"title-add":"Add a title","subtitle-add":"Add a subtitle"},image:{"focal-drag":"Drag to choose focal point","focal-title":"Choose focal point","caption-plus":"+ caption","caption-add":"Add a caption"},button:{"text-default":"Edit button"},grid:{"photos-add":"Add photos to build your grid"},glideshow:{"photos-add":"Add a few background photos to your glideshow"},collection:{"grid-edit":"Edit grid","glideshow-edit":"Edit glideshow",large:"large photo",small:"small photo","move-b":"move backward","move-f":"move forward"},split:{swap:"swap content"},balloon:{photo:"Photo","photo-add":"Add photo","layout-delete":"Delete layout",replace:"Replace",grid:"Photo grid",glideshow:"Glideshow",split:"Split layout","grid-edit":"Edit grid","photos-edit":"Edit photos",text:"Text",inline:"Inline",fill:"Fill screen","full-width":"Full width",window:"Window",delete:"Delete",button:"Button",video:"Video",edit:"Edit",move:"Move","focal-point":"Focal point",large:"Large",small:"Small"}}}},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(15)],void 0===(o=function(t,e,n,i){return n.View.extend({tagName:"div",className:"broken-image-banner",initialize:function(t){this.numBrokenImages=0},setNumBrokenImages:function(t){t!==this.numBrokenImages&&(this.numBrokenImages=t,this.render())},render:function(){if(this.$el.empty(),this.numBrokenImages){var e=i.getString("editor.hints.missing.banner",{count:this.numBrokenImages});this.$el.append(t("<p>").text(e))}return this}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7),n(166),n(167),n(123),n(173),n(175),n(176),n(177),n(178),n(155),n(179),n(180),n(119),n(124)],void 0===(o=function(t,e,n,i,o,r,a,s,l,c,u,h,d,f,p,g,m){var v=n.View.extend({events:{vmousedown:"_handleMouseDown",vmouseup:"_handleMouseUp"},previewClass:"preview-mode",editorClass:"edit-mode",initialize:function(t){m.initialize.call(this),this.sectionViewDict={},this.disableSectionUpdates=!0,this._create(),this.disableSectionUpdates=!1,this._updateSections(),this.dispatchAdjustVisuals(),this.listenTo(this.model.children,"add",this._handleAddSection),this.listenTo(this.model.children,"remove",this._handleRemoveSection);var e=this.model.getParent(),n=e&&e.theme,i=n&&n.getCssClassName()||"crisp-theme";this.$el.addClass(this.editorClass).addClass(i)},_create:function(){this.$authoringViews=t(document.createElement("div")).addClass("authoring-views").appendTo(this.$el),i.ContextBalloonSurfaceView.unregister(),this.balloons=new i.ContextBalloonSurfaceView,this.$authoringViews.append(this.balloons.$el),this.hintView=new o,this.$authoringViews.append(this.hintView.$el),this.$el.data("hintView",this.hintView),this.$previewOverlay=t(document.createElement("div")).attr("id","preview-overlay").addClass("fit-in-container").css({zIndex:100}),this.bumperSection=new r;for(var e=this.model.children.models,n=0,a=e.length;n<a;n++){var s=e[n];this.addSectionView(s,{at:n})}"1"===i.preferences.alertCycleEnabled&&this.$el.append((new p).render().$el)},_updateMultiSectionClass:function(){var t=this.model.children.length;this.$el[t>1?"addClass":"removeClass"](multiClass="multiple-section-article")},_handleMouseDown:function(e){t(e.target).closest(".balloon").length&&this.blockDragScrolling()},_handleMouseUp:function(t){this.unblockDragScrolling()},_handleAddSection:function(t,e,n){this.addSectionView(t,n)},_handleRemoveSection:function(t){var e=this.sectionViewDict[t.cid];e.remove(),e=null,delete this.sectionViewDict[t.cid],this._childrenChangedUpdates()},addSectionView:function(t,e){var n=this.getSectionView(t,e);if(n){var i=this.$(".section"),o=e?e.at:0;if(void 0===o||0===i.length)this.$el.append(n.$el),n.render();else{var r=this.model.getChildAt(Math.max(0,o-1));this.sectionViewDict[r.cid].$el.after(n.$el),n.render()}this.sectionViewDict[t.cid]=n}else console.error("Attempt to add unrecognized section view (",t.get("type"),") failed.");this._childrenChangedUpdates()},_childrenChangedUpdates:function(){this._updateSections(),this._updateMultiSectionClass(),this.dispatchAdjustVisuals()},_injectPlaceholderSectionAfter:function(t){var e=new i.SectionModel({type:"content"}),n=new a({model:e,articleModel:this.model,isPlaceholder:!0});t.after(n.$el)},_injectSpacerSectionAfter:function(t){var e=new i.SectionModel({type:"spacer"}),n=new l({model:e,articleModel:this.model});t.after(n.$el)},_updateSections:function(e){if(!this.disableSectionUpdates){var n=this.$(".section").eq(0),i=this.isPreviewMode();i?this.$(".placeholder").remove():(this.$(".content-spacer").remove(),this.$("."+this.previewSpacerClasses.join(", .")).removeClass(this.previewSpacerClasses.join(" ")));for(var o=t(),r=n,a=r.next();r.length>0;)i?this._ensurePreviewSpacerSections(o,r,a):this._ensurePlaceholderSections(o,r,a),o=r,r=a,a=a.next();for(o=t(),a=(r=n).next();r.length>0;)this._updateShadowClasses(o,r,a),o=r,r=a,a=a.next()}},placeholderFullScreenSection:".title-section, .fullscreen-photo-section, .window-section, .banner-section, .full-width-section, .photo-grid-section, .card-flipbook-section, .single-column-section.split-layout, .single-column-section.column-layout, .single-column-section.card-layout",placeholderFullScreenContentSection:".single-column-section.split-layout, .single-column-section.column-layout, .single-column-section.card-layout",placeholderInlineContentSection:".single-column-section",_ensurePlaceholderSections:function(t,e,n){e.is(this.placeholderFullScreenSection)?n.is(this.placeholderInlineContentSection)&&!n.is(this.placeholderFullScreenContentSection)||this._injectPlaceholderSectionAfter(e):e.hasClass("placeholder")?n.is(this.placeholderInlineContentSection)&&!n.is(this.placeholderFullScreenContentSection)&&e.data("view").remove():n.hasClass("placeholder")&&n.data("view").remove()},previewFullScreenSection:".title-section, .fullscreen-photo-section, .window-section, .full-width-section, .banner-section",previewTextException:{p:!0,blockquote:!0,h3:!0,h4:!0,"ul.li":!0,"ol.li":!0,a:!0},previewSpacerClasses:["large-content-spacing-top","content-spacing-top","large-content-spacing-bottom","content-spacing-bottom"],_ensurePreviewSpacerSections:function(t,e,n){if(!e.is(".content-spacer")){var i=e.is(this.previewFullScreenSection),o=n.is(this.previewFullScreenSection);if(i)o&&this._injectSpacerSectionAfter(e);else{var r=!0,a=0===n.length;if(t.is(this.previewFullScreenSection)){if(o){var s=e.find(".content-item");if(1===s.length){var l=s.eq(0).data("view"),c=l&&l.model,u=c&&c.get("type");this.previewTextException[u]&&(r=!1)}}e.addClass(r?"large-content-spacing-top":"content-spacing-top")}(o||a)&&e.addClass(r?"large-content-spacing-bottom":"content-spacing-bottom")}}},_updateShadowClasses:function(t,e,n){var i="under"===t.attr("data-layer-name"),o="under"===e.attr("data-layer-name"),r="under"===n.attr("data-layer-name");o?e.removeClass("top-shadow").removeClass("bottom-shadow"):(e[i?"addClass":"removeClass"]("top-shadow"),e[r?"addClass":"removeClass"]("bottom-shadow"))},dispatchAdjustVisuals:function(){this.$el.trigger("adjustVisuals")},beforeAdjustVisuals:function(){this.updateSectionLayering()},afterAdjustVisuals:function(){this.adjustScrollTop()},updateSectionLayering:function(){var e={over:1,under:0},n={over:1,under:-1},i=-1;this.$(".section").each(function(o,r){var a,s=t(r),l=s.data("layer-name")||"over",c=e[l];void 0===c?c=-1:(a=-1===i?n[l]:c-i,s.data("layer",a),s.attr("data-layer",a));i=c}.bind(this))},adjustScrollTop:function(){for(var t in this.$el.scrollTop(0),this.sectionViewDict)if(this.sectionViewDict.hasOwnProperty(t)){var e=this.sectionViewDict[t];e&&e.$el.scrollTop(0)}},enablePreviewMode:function(){this.$el.addClass(this.previewClass).removeClass(this.editorClass),this._updateSections();var t=this.$(".section.placeholder");t.removeClass("placeholder").removeClass("single-column-section").addClass("spacer-section"),t.last().hide(),this.collectInsertLinks(),this.disableEvents(),this.disableContentEditable(),this.bumperSection.$el.insertAfter(this.$(".section").last()),this.renderPreview()},disablePreviewMode:function(){this.$el.addClass(this.editorClass).removeClass(this.previewClass),this._updateSections();var t=this.$(".section.spacer-section");t.removeClass("spacer-section").addClass("single-column-section").addClass("placeholder"),t.last().show(),this.restoreInsertLinks(),this.enableEvents(),this.enableContentEditable(),this.bumperSection.$el.remove(),this.renderPreview()},togglePreviewMode:function(){return this.isPreviewMode()?(this.disablePreviewMode(),!1):(this.enablePreviewMode(),!0)},isPreviewMode:function(){return this.$el.hasClass(this.previewClass)},renderPreview:function(){this.triggerSelectNone(),this.dispatchAdjustVisuals()},_savedInsertLinks:[],collectInsertLinks:function(){this._savedInsertLinks.length=0;for(var t=this.$(".insert-after-link"),e=0,n=t.length;e<n;e++){var i=t.eq(e);this._savedInsertLinks.push({$link:i,index:i.index(),$parent:i.parent()})}t.remove()},restoreInsertLinks:function(){for(var t=0,e=this._savedInsertLinks.length;t<e;t++){var n=this._savedInsertLinks[t];n.index?n.$parent.children().eq(n.index-1).after(n.$link):n.$parent.prepend(n.$link)}},disableEvents:function(){this._updateEvents(!0)},enableEvents:function(){this._updateEvents(!1)},_updateEvents:function(t){for(var e=this.$(".section, .content-item, .content-item-list"),n=0,i=e.length;n<i;n++){var o=e.eq(n),r=o.data("view");r?(t?r.undelegateEvents():r.delegateEvents(),"function"==typeof r.onUpdatePreviewInteractions&&r.onUpdatePreviewInteractions(t)):console.warn("Could not find a view on view element ",o)}},disableContentEditable:function(){this.$("[contenteditable=true]").addClass("data-restore-editable").attr("contenteditable","false")},enableContentEditable:function(){this.$(".data-restore-editable").removeClass("data-restore-editable").attr("contenteditable","true")},getSectionView:function(t,e){var n=null,o=e&&e.intent;switch(t.get("type")){case"title":n=new c({model:t,intent:o});break;case"content":case"column-layout":case"card-layout":n=new a({model:t,intent:o});break;case"split-layout":n=new s({model:t,intent:o});break;case"zoom":n=new h({model:t,intent:o});break;case"banner":n=new d({model:t,intent:o});break;case"full-width":n=new u({model:t,intent:o});break;case"window":n=new f({model:t,intent:o});break;case"photo-grid":n=new i.PhotoGridSectionView({model:t,intent:o});break;case"card-flipbook":n=new i.CardFlipbookSectionView({model:t,intent:o})}return n}});return e.defaults(v.prototype,g,m),i.ArticleView=v,v}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(7),n(148),n(15)],void 0===(o=function(t,e,n,i,o){return i.extend({className:"modal-hint",initialize:function(t){i.prototype.initialize.apply(this,arguments);var e=n.create$Element;this.$view=e("div",{class:"modal-hint-view"}),this.$hintText=e("div",{class:"modal-hint-text"}).text(o.getString("editor.dialogs.title-move.text")),this.$okButton=e("a",{href:"#",class:"modal-hint-button"}).text(o.getString("editor.dialogs.title-move.confirm")),this.$view.append(this.$hintText),this.$view.append(this.$okButton),this.$el.append(this.$view)},_handleClick:function(t){return this.hide(),!1}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(18)],void 0===(o=function(t,e,n,i){return n.View.extend({template:new i({id:"bumper-section-template"}),initialize:function(t){this.setElement(this.template.$render(this.model)),this.$el.data("view",this),this.$("a").attr("target","_blank")}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(7),n(125),n(169),n(15)],void 0===(o=function(t,e,n,i,o,r){return i.extend({events:function(){return e.extend({},e.result(i.prototype,"events"),{"strictclick .link-button":"_handleLinkClick","strictclick .embedded-link-click-shield":"_handleLinkClick","balloon-select .edit-button":"_handleEdit","balloon-select .delete-button":"_handleDelete","balloon-select .debug-button":"_handleDebugExec"})},buttonsDefault:["edit","delete"],buttonsDebug:["edit","delete","debug"],initialize:function(t){i.prototype.initialize.apply(this,arguments),this._create(),this.listenTo(this.model,"select",this.simpleHandleModelSelect),this.listenTo(this.model,"cancel",this._handleCancel),this.listenTo(this.model.settings,"change",this.render),this.optionsBalloon=new n.ContextBalloonView({el:this.$link,position:{percentX:.5,percentY:.15},buttons:this.buttonsDefault}),t&&"edit"===t.intent&&setTimeout(function(){this.requestEditFromButton()}.bind(this),201)},_create:function(){this.$linkBlock=this.template.$render(this.model),this.$link=this.$linkBlock.find(".link-button"),this.$embed=this.$linkBlock.find("iframe"),this.model.settings.get("embedded")&&this.$linkBlock.append(t(document.createElement("div")).addClass("embedded-link-click-shield"));var e=this.$link.text();this.$link.text(this.getLinkText({content:e}));var n=this.$link.attr("href");this.$link.attr("href","#"),this.$link.attr("data-href",n),this.$el.append(this.$linkBlock).append(this.$insertLink)},_handleLinkClick:function(t){return o.isDebugButton(this)&&this.optionsBalloon.setButtons(this.buttonsDebug),this.optionsBalloon.toggle()?this.triggerSelect({type:"a",action:"update"}):this.triggerSelectNone(),!1},_handleEdit:function(t){return this.requestEditFromButton(),!1},_handleDelete:function(){return this.$el.trigger("deleteItem",[this,{item:this.model}]),!1},_handleDebugExec:function(t){return this.optionsBalloon.hide(),o.executeDebugButton(this,t),!1},_handleCancel:function(){this.model.get("href")||this._handleDelete()},getLinkText:function(t){var e=t&&t.content;e&&" "!==e||(e=r.getString("editor.button.text-default")),this.$link.text(e)},onUpdatePreviewInteractions:function(t){t?this.$link.attr("href",this.$link.attr("data-href")).attr("target","_blank"):this.$link.attr("href","#").removeAttr("target")},requestEditFromButton:function(){this.model&&this.scrollSectionIntoView({method:"top",ignoreWhenFullyVisible:!1,complete:function(){var t=this.template.getPayload(this.model);this.$el.trigger("showLinkEdit",[this.$link[0],t.content,t.href,t.link_align,this.model])}.bind(this),cancel:this._handleCancel.bind(this)}),this.optionsBalloon.hide()},scrollSectionIntoView:function(e){var n=this.$el.closest(".section");e=t.extend({section:n,el:this.$link,marginTop:110,method:"nearest",ignoreWhenFullyVisible:!0,animate:!0},e),this.$el.trigger("scrollSectionIntoView",e)},render:function(){var t=this.template.getPayload(this.model);return this.$link.attr("data-href",t.href),this.$link.text(this.getLinkText(t)),this.$embed.attr("src",t.embed_url),n.linkAlignCSS.setClass(this.$linkBlock,t.link_align),this},remove:function(){return this.optionsBalloon.remove(),i.prototype.remove.call(this)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(7),n(147)],void 0===(o=function(t,e,n,i){return{isDebugButton:function(t){if(!t||!t.model)return!1;var n=t.model.get("type"),i=t.model.get("text");return!("a"!==n||!e.startsWith(i,"%DEBUG%"))},executeDebugButton:function(t,e){try{var n=t.model.get("text").slice("%DEBUG%".length);if((n=n.replace(/ /g,""))in this==!1)throw new Error('The debug operation "'+n+'" is not recognized.');return this[n](t,e)}catch(t){alert(t.message?t.message:t)}},license:function(t,e){var n=this._licenseGetRelatedImageModel(t.model);this._licenseReplaceCollectionImage(n)},_licenseGetRelatedImageModel:function(t){var e=t.getPrevSibling();e||(e=t.parent.getPrevSibling().findFirstChildByType("img"));if(!e||"img"!==e.get("type"))throw new Error("Expected an image (or section with an image) directly above the button, but one was not found.");return e},_licenseReplaceCollectionImage:function(t){var o=t.getImage();if(!o)throw new Error("Unable to find an image within the referenced content item.");var r=o.get("license");r||(o.license=r={}),r.image_id="test_id",r.type="royalty_free",n.registerNativeImageHandler("image-response","test",function(t,i){e.some(t.images,function(t){return t.is_preview})||(e.each(t.images,function(t){var e=t.license;e||(t.license=e={}),e.image_id="test_id",e.type="royalty_free_standard"}),n._nativeImageHandlers["image-response"].model(t,i))});var a="photo-grid"===t.getParent().get("type")?n.MAX_IMAGE_DIM_GRID:n.MAX_IMAGE_DIM_INLINE,s={uuid:o.get("id"),source:n._encodeImageSourceData({type:"test"}),multiSelect:!1,maxDimension:a};return i.toNative("image-request",s),s}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(7),n(125),n(49)],void 0===(o=function(t,e,n,i,o){return i.extend({initialize:function(t){i.prototype.initialize.apply(this,arguments),this._create(),this.modelType=this.model.get("type")||t.modelType||"p"},_create:function(){this.template&&(this.$container=this.template.$render(this.model),this.$el.empty().append(this.$container).append(this.$insertLink),this.markupsEnabled=n.contentItemSupportsMarkups(this.model),this.editableRegionView=new o({el:this.$container,allowSplitting:!0,allowHTML:this.markupsEnabled,placeholder:this.placeholder}),this.listenTo(this.editableRegionView,"enterKeyPressed",this._handleEnterKeyPressed),this.listenTo(this.editableRegionView,"backspaceKeyPressed",this._handleBackspaceKeyPressed),this.listenTo(this.editableRegionView,"arrowKeyPressed",this._handleArrowKeyPressed),this.listenTo(this.editableRegionView,"contentChanged",this._handleContentChanged),this.listenTo(this.editableRegionView,"heightChanged",this.dispatchAdjustVisuals),this.listenTo(this.editableRegionView,"focus",this._handleFocus),this.listenTo(this.editableRegionView,"blur",this._handleBlur),this.listenTo(this.editableRegionView,"paste",this._handlePaste),this.isListItem()?(this.listView=this.listView||null,this.$insertLink.addClass("hide")):this.$insertLink.removeClass("hide"))},_handleFocus:function(){this.isChangingType=!1,this.triggerSelect({type:this.model.get("type"),action:"update",balloons:!1})},_handleBlur:function(){if(this.isChangingType||""!==this.model.get("text").trim())this.render();else{var t="deleteItem";n.editorContextIsPaused()&&(t="deleteItemOnEditorContextClear"),this.$el.trigger(t,[this,{item:this.model}])}},_handlePaste:function(t,e){this.$el.trigger("pasteContent",[this.model,this.editableRegionView,e])},_handleEnterKeyPressed:function(t,e,n){this.$el.trigger("insertNewline",[this.model,this,t,e,n])},_handleBackspaceKeyPressed:function(t,e,n,i){0===e&&0===n&&this.$el.trigger("mergeWithPreviousItem",[t,this.model,this.editableRegionView,i])},_handleArrowKeyPressed:function(t,e){var n=e.direction,i="up"==n||"down"==n,o=[t,this.model];"up"==n&&e.againstRegionTop||"left"==n&&e.leftOfFirstCharacter?t.shiftKey||this.$el.trigger("moveCaretToAdjacentItem",o.concat([i,-1])):"down"==n&&e.againstRegionBottom||"right"==n&&e.rightOfLastCharacter?t.shiftKey||this.$el.trigger("moveCaretToAdjacentItem",o.concat([i,1])):this.$el.trigger("ensureCaretInView",o)},_handleContentChanged:function(t){this.$el.trigger("updateText",[this.model,t])},isListItem:function(){var t=this.model.get("type");return"ol.li"==t||"ul.li"==t},render:function(){var t=this.template.getPayload(this.model),e=this.model.get("type");this.modelType!=e&&(this.modelType=e,this.isChangingType=!0,this.editableRegionView.destroy(),this._create());var i=this.model.get("text");return this.markupsEnabled&&(i=n.MarkupParser.toHTML(i,this.model.children.models)),this.editableRegionView.render(i),t.text_align?n.textAlignCSS.setClass(this.$container,t.text_align):n.textAlignCSS.clear(this.$container),this},remove:function(){return this.editableRegionView.destroy(),i.prototype.remove.call(this)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(4),n(125)],void 0===(o=function(t,e,n,i){return i.extend({className:"content-item-list",initialize:function(e){i.prototype.initialize.apply(this,arguments),this.$el.data("view",this),this.listType=e.listType||"ul",this.$list=t(document.createElement(this.listType)),this.$el.append(this.$list).append(this.$insertLink)},updateListType:function(e){if(e!=this.listType){this.listType=e;var n=this.$list,i=t(document.createElement(this.listType));i.append(n.children()),this.$list.remove(),this.$list=i,this.$el.append(this.$list)}},_refreshModel:function(){var t=this.$list.find(".content-item").last().data("view");if(this.model=t?t.model:null,(n.isIE||n.isMSEdge)&&"ol"==this.listType)for(var e=this.$el.find("li"),i=0,o=e.length;i<o;i++)e.eq(i).attr("value",i+1)},insertListItemViewBefore:function(t,e){void 0!==e?t.$el.insertBefore(this.$list.find(e.$el)):this.$list.append(t.$el),t.listView=this,this._refreshModel()},appendListItemView:function(t){this.insertListItemViewBefore(t)},prependListItemView:function(t){this.$list.prepend(t.$el),t.listView=this},removeListItemView:function(t){t.remove(),0===this.$list.children().length&&this.remove(),this._refreshModel()}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(22),n(119)],void 0===(o=function(t,e,n,i,o){var r=["natural","100"],a=["dark","darker"];return{handleSectionOptionSizeToggle:function(t){var e=this.model.settings.get("section_sizing")||"natural",n=r[(r.indexOf(e)+1)%r.length];this.$el.trigger("updateSettingValue",[this.model,"section_sizing",n]),this.render()},handleSectionOptionOverlayToggle:function(t){if(this.hasSectionOptionBackground()){var e=this.model.settings.get("background_overlay_type")||"dark",n=a[(a.indexOf(e)+1)%a.length];this.$el.trigger("updateSettingValue",[this.model,"background_overlay_type",n]),this.render()}},handleSectionOptionRemoveBackground:function(t){if(this.hasSectionOptionBackground()){this.$el.trigger("updateSettingValue",[this.model,"background_type","none"]);var e=this.model.findFirstChildByType("img");0===e.getIndex()&&this.$el.trigger("deleteItem",[this,{item:e}]),this.render()}},handleSectionOptionSelectBackground:function(t){this._sectionOptionSelect()},hasSectionOptionBackground:function(){return"img"===this.model.settings.get("background_type")},_sectionOptionSelect:function(){var t,e;this.hasSectionOptionBackground()?(e=(t=this.model.findFirstChildByType("img"))?"update":"insert",t||(t=this.model)):(t=this.model,e="prependToSection"),t&&(this.triggerSelect({selection:t,type:"img",action:e,pickerType:"background"}),this.$el.trigger("showImagePicker",[this]))}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(7),n(18),n(123),n(174),n(15)],void 0===(o=function(t,e,n,i,o,r,a){var s=o.extend({events:function(){return t.extend({},o.prototype.events,{"balloon-select .focal-point-ui-button.bkg-action":"_handleFocalPointUIButton","balloon-select .replace-button.bkg-action":"_handleBackgroundReplaceButton","balloon-select .delete-layout-button.section-action":"_handleDeleteSection"})},insertButtons:["photo","text","link","embedded-link"],bkgButtons:["focalpoint","replace"],sectionButtons:["deletelayout"],initialize:function(t){if(o.prototype.initialize.apply(this,arguments),t&&"edit"===t.intent){var e=this;setTimeout(function(){e.scrollSectionIntoView({method:"top"})},201)}},_create:function(t){o.prototype._create.apply(this,arguments);var e=n.create$Element,i=this.$el.find(".section-background");if(i.length){var s=e("div",{class:"section-background-clip"});i.children().wrapAll(s),this.$bkgClickOverlay=e("a",{href:"#",class:"background-click-overlay"}).attr("data-label",a.getString("editor.hints.image-add")),this.$swapBtn=e("button",{class:"swap-button"}),this.$swapBtn.text(a.getString("editor.split.swap")),this.$bkgBalloonAnchor=e("div",{class:"bkg-balloon-anchor"}),this.$sectionBalloonAnchor=e("div",{class:"section-balloon-anchor"}),this.previewView=new r,i.append(this.$bkgBalloonAnchor).append(this.$sectionBalloonAnchor).append(this.$swapBtn).append(this.previewView.$el),i.find(".section-background-image").append(this.$bkgClickOverlay),this.bkgBalloon=new n.ContextBalloonView({el:this.$bkgBalloonAnchor,position:{percentX:.5,percentY:.5,offsetY:-17},buttons:this.bkgButtons,addedButtonClass:"bkg-action"}),this.sectionBalloon=new n.ContextBalloonView({el:this.$sectionBalloonAnchor,position:{percentX:.5,percentY:.5,offsetY:-17},buttons:this.sectionButtons,addedButtonClass:"section-action"}),this.$bkgClickOverlay.on("vclick",this._handleBackgroundOverlayClick.bind(this)),this.$swapBtn.on("vclick",this._handleSplitPositionToggle.bind(this)),i.append(this._$propertyButtons)}this.$el.addClass("empty-image")},_handleClick:function(e){var n=t(e.target).closest(".section-content, .editable-region");if(n.length&&!n.hasClass("editable-region"))return this.sectionBalloon.isHidden()?(this.sectionBalloon.show(),this.triggerSelect({selection:this.model,type:this.model.get("type"),action:"update"}),this.scrollSectionIntoView()):(this.sectionBalloon.hide(),this.triggerSelectNone()),!1},_handleBackgroundOverlayClick:function(t){return this.hasSectionOptionBackground()&&this.backgroundModel?this.bkgBalloon.isHidden()?(this.$el.trigger("hideImagePicker",[this]),this.bkgBalloon.show(),this.triggerSelect({selection:this.backgroundModel,type:"img",action:"update"})):(this.bkgBalloon.hide(),this.triggerSelectNone()):(this.handleSectionOptionSelectBackground(t),this.bkgBalloon.hideAll(),this.scrollSectionIntoView()),!1},_handleBackgroundReplaceButton:function(t){this.handleSectionOptionSelectBackground(t),this.bkgBalloon.hideAll(),this.scrollSectionIntoView()},_handleFocalPointUIButton:function(t){return this.triggerSelectNone(),this._showBkgEditView(),this.bkgBalloon.hide(),!1},_handleSplitPositionToggle:function(t){var e=this.model.settings.get("background_split_position")||"left";this.$el.trigger("updateSettingValue",[this.model,"background_split_position","left"==e?"right":"left"]),this.bkgBalloon.hideAll(),this.dispatchAdjustVisuals();var n={},i=this._getBkgImageItem();if(i){var o=i.getImage();o&&(n.imageUrl=o.get("image_url"),n.imagePosition=i.get("image_align")||"50% 50%")}this.previewView.show(n)},render:function(){o.prototype.render.apply(this,arguments);var t=this.model.settings.get("background_split_position")||"left";return this.$el.removeClass("image-on-"+{left:"right",right:"left"}[t]),this.$el.addClass("image-on-"+t),this},remove:function(){return this.previewView.remove(),this.bkgBalloon.remove(),this.sectionBalloon.remove(),o.prototype.remove.apply(this,arguments)},_insert:function(t,e){return"img"===e.model.get("type")&&(e.buttonSet=["replace","delete"],e.buttonSetNoMove=["replace","delete"]),o.prototype._insert.apply(this,arguments)}});return n.SplitLayoutSectionView=s,s}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(4),n(24),n(7),n(120),n(15)],void 0===(o=function(t,e,n,i,o,r,a,s){return n.View.extend({tagName:"div",className:"split-layout-preview-popup",initialize:function(t){this._autoHideTimerId=0,this.hide=this.hide.bind(this);var e=r.create$Element;this.$imagePanel=e("div",{class:"split-layout-preview-image"}),this.$el.attr("data-label",s.getString("editor.labels.landscape")).append(this.$imagePanel)},_setAutoHideTimer:function(t){t=t||{},this._clearAutoHideTimer(),this._autoHideTimerId=setTimeout(this.hide,t.autoHideDelay||3e3)},_clearAutoHideTimer:function(){this._autoHideTimerId&&(clearTimeout(this._autoHideTimerId),this._autoHideTimerId=0)},show:function(e){e=t.extend({autoHide:!0,autoHideDelay:3e3,imagePosition:"50% 50%"},e),this.$el.addClass("visible"),e.imageUrl?this.$imagePanel.removeClass("empty-image").css({backgroundImage:"url("+a.makeAbsoluteURL(e.imageUrl)+")",backgroundPosition:e.imagePosition}):this.$imagePanel.addClass("empty-image").css("backgroundImage",""),this._clearAutoHideTimer(),e.autoHide&&this._setAutoHideTimer(e)},hide:function(){this.$el.removeClass("visible"),this._clearAutoHideTimer()}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(18)],void 0===(o=function(t,e,n,i){return n.View.extend({template:new i({id:"spacer-section-template"}),articleModel:null,initialize:function(t){this.setElement(this.template.$render(this.model)),this.$el.addClass("content-spacer"),this.$el.data("view",this),this.articleModel=t.articleModel}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(24),n(7),n(18),n(137),n(49),n(47),n(15)],void 0===(o=function(t,e,n,i,o,r,a,s,l){return r.extend({template:new o({id:"title-section-template"}),firstRender:!0,events:function(){return t.extend({},r.prototype.events,{"strictclick .section-view":"_handleClick","strictclick .image-plus":"_handleClick","focusout .title-editable":"_handleFocusOutTitle","focusout .subtitle-editable":"_handleFocusOutSubtitle","balloon-select .photo-button":"_handleSelectPhoto","balloon-select .focal-point-ui-button":"_handleFocalPointUIButton","balloon-select .replace-button":"_handleSelectPhoto","balloon-select .delete-button":"_handleDeleteImage"})},buttonSet:["photo"],buttonSetHasPhoto:["focalpoint","replace","delete"],initialize:function(t){var e;r.prototype.initialize.call(this),this._create(),this.$el.attr("data-cid",this.model.cid),this.$el.data("view",this),e=this.hasBackground()?this.buttonSetHasPhoto:this.buttonSet,this.balloon=new i.ContextBalloonView({el:this.$imagePlusButton,position:{percentX:.5,percentY:.5,offsetY:-17},buttons:e}),this.listenTo(this.titleEditableRegionView,"contentChanged",this._handleTitleChange),this.listenTo(this.subtitleEditableRegionView,"contentChanged",this._handleSubtitleChange),this.listenTo(this.titleEditableRegionView,"enterKeyPressed",this._handleEnterKeyPressed),this.listenTo(this.subtitleEditableRegionView,"enterKeyPressed",this._handleEnterKeyPressed),this.listenTo(this.titleEditableRegionView,"paste",this._handleTitlePaste),this.listenTo(this.subtitleEditableRegionView,"paste",this._handleSubtitlePaste),this.listenTo(this.titleEditableRegionView,"blur",this.render),this.listenTo(this.subtitleEditableRegionView,"blur",this.render),this.listenTo(this.model,"change descendant:change descendant:add",this.render),this.listenTo(this.model,"end-editing",this._handleEndEdit),this.listenTo(this.model.settings,"change",this._handleSettingsChanged),this.listenTo(this.model.children,"select",this.simpleHandleModelSelect)},_create:function(){if(this.template){this.setElement(this.template.$render(this.model,null,{payloadPreProcessor:this._payloadPreProcessor})),this.$titleContainer=this.$(".title-header-view"),this._titleAlignment=this.model.settings.get("title_align"),this.$title=this.$(".title"),this.$subtitle=this.$(".subtitle"),this.$title.length||(this.$title=t(document.createElement("span")).addClass("title"),this.$subtitle.length?this.$title.insertBefore(this.$subtitle):this.$title.appendTo(this.$titleContainer)),this.$subtitle.length||(this.$subtitle=t(document.createElement("span")).addClass("subtitle").insertAfter(this.$title)),this.$emptyImage=i.create$Element("div",{class:"author-section-outline"}),this._updateEmptyImage(),this.$emptyImage.insertBefore(this.$(".section-view")),this.$imagePlusButton=i.create$Element("a",{href:"#",class:"plus-button-large image-plus"}),this._updateImagePlusLocation(),this.$imagePlusButton.appendTo(this.$el);var e=this.$title.text(),n=this.$subtitle.text();this.$title.empty(),this.$subtitle.empty(),this.$titleEditable=t(document.createElement("span")).addClass("title-editable").text(e).appendTo(this.$title),this.$subtitleEditable=t(document.createElement("span")).addClass("subtitle-editable").text(n).appendTo(this.$subtitle),this.titleEditableRegionView=new a({el:this.$titleEditable,placeholder:l.getString("editor.title.title-add"),initiallyEditable:!1}),this.subtitleEditableRegionView=new a({el:this.$subtitleEditable,placeholder:l.getString("editor.title.subtitle-add"),initiallyEditable:!1}),this.$navHint=this.$el.find(".navigation-hint").attr("data-label",l.getString("editor.hints.scroll-story")),r.prototype._create.apply(this,arguments),this._$propertyButtons.css("visibility","hidden"),this._originalTitleOpacity=this.$title.css("opacity"),this._originalSubtitleOpacity=this.$subtitle.css("opacity")}},getSourceForDrop:function(t){var e="update",n=this.model.findFirstChildByType("img");return n||(n=this.model,e="insert"),i.getSourceStrForModel(e,n)},_updateEmptyImage:function(){this.model.findFirstChildByType("img")?this.$el.removeClass("empty-image"):this.$el.addClass("empty-image")},_updateImagePlusLocation:function(){var t={};switch(this.model.settings.get("title_align")){case"title-bottom-left":case"title-bottom":case"title-bottom-right":t={left:0,right:0,top:"50%"};break;default:case"title-top-left":case"title-top":case"title-top-right":case"title-left":case"title-center":case"title-right":t={left:0,right:0,top:"90%"}}this.$imagePlusButton.css(t)},_onShowBkgEditView:function(){this.balloon.hideAll()},_onHideBkgEditView:function(){this.select(null),this.balloon.hide()},_handleEnterKeyPressed:function(t){this.triggerSelectNone()},_handleTitlePaste:function(t,e){this.$el.trigger("pasteContent",[this.model.findFirstChildByType("title"),this.titleEditableRegionView,e])},_handleSubtitlePaste:function(t,e){this.$el.trigger("pasteContent",[this.model.findFirstChildByType("subtitle"),this.subtitleEditableRegionView,e])},_handleTitleChange:function(t){return this.$el.trigger("updateText",[this.model.findFirstChildByType("title"),t]),!1},_handleSubtitleChange:function(t){return this.$el.trigger("updateText",[this.model.findFirstChildByType("subtitle"),t]),!1},_handleClick:function(e){if(!this.$el.hasClass("background-edit-mode")){if(!this.$el.hasClass("tap-hold-mode")){var n=t(e.target),o=null,r=!1;if(n.closest(".title-editable").length)this.titleEdited=!0,o="title",this.balloon.hideAll(),this._workaroundIE11FocusBug(this.titleEditableRegionView),this.titleEditableRegionView.setEditable(!0),i.isMobile||this.titleEditableRegionView.$el.focus();else if(n.closest(".subtitle-editable").length)this.subtitleEdited=!0,o="subtitle",this.balloon.hideAll(),this._workaroundIE11FocusBug(this.subtitleEditableRegionView),this.subtitleEditableRegionView.setEditable(!0),i.isMobile||this.subtitleEditableRegionView.$el.focus();else{if(r=!0,this.balloon.isHidden()){if(this.balloon.show())return!1;o="PENDING"}else o=null,this.balloon.hide();this.scrollSectionIntoView()}return this.select(o),!r&&void 0}this.balloon.hideAll()}},_handleFocusOutTitle:function(){this.titleEditableRegionView.setEditable(!1)},_handleFocusOutSubtitle:function(){this.subtitleEditableRegionView.setEditable(!1)},_enterTapHoldMode:function(t){r.prototype._enterTapHoldMode.apply(this,arguments),this.balloon.hideAll(),this.$title.css("opacity",this._originalTitleOpacity/2),this.$subtitle.css("opacity",this._originalSubtitleOpacity/2)},_handleMoveInTapHoldMode:function(e){r.prototype._handleMoveInTapHoldMode.apply(this,arguments);var i=e.clientX-this._originalMousePosition.x,o=e.clientY-this._originalMousePosition.y;this.$title.css(n.vendorPrefix+"transform","translate3d("+i+"px, "+o+"px, 0px)"),this.$subtitle.css(n.vendorPrefix+"transform","translate3d("+i+"px, "+o+"px, 0px)"),(e.clientX<0||e.clientX>t(window).width())&&this._exitTapHoldMode(e)},_exitTapHoldMode:function(e){r.prototype._exitTapHoldMode.apply(this,arguments);var i=Math.min(t(window).width(),Math.max(e.clientX,0)),o=e.clientY,a=this.$el.width(),s=this.$el.height(),l=1,c=1;i<1*a/3&&(l=0),i>2*a/3&&(l=2),o<1*s/3&&(c=0),o>2*s/3&&(c=2);var u=3*c+l,h="title-"+"top-left,top,top-right,left,center,right,bottom-left,bottom,bottom-right".split(",")[u];this.$el.trigger("updateSettingValue",[this.model,"title_align",h]),this.$title.css(n.vendorPrefix+"transform",""),this.$subtitle.css(n.vendorPrefix+"transform",""),this.$title.css("opacity",this._originalTitleOpacity),this.$subtitle.css("opacity",this._originalSubtitleOpacity)},_showHint:function(){return(void 0!==this.titleEdited||void 0!==this.subtitleEdited)&&((!i.preferences||"0"===i.preferences.titleDragHintShown)&&(this.$el.trigger("updatePreference",["titleDragHintShown","1"]),this.$el.closest(".article").data("hintView").show(),!0))},_handleFocalPointUIButton:function(t){return this.triggerSelectNone(),this._showBkgEditView(),!1},_handleSelectPhoto:function(t){this.select("img"),this.balloon.hide()},_handleDeleteImage:function(t){this.$el.trigger("deleteItem",[this,{item:this.model.findFirstChildByType("img")}])},_handleEndEdit:function(){this.balloon.hide()},_handleSettingsChanged:function(t,e){"title_align"===t.get("key")&&this._updateImagePlusLocation()},select:function(t){var e,n;t?("PENDING"===t?e="PENDING":(n=(e=this.model.findFirstChildByType(t))?"update":"insert",e||(e=this.model)),this.triggerSelect({selection:e,type:t,action:n}),"img"===t&&this.$el.trigger("showImagePicker",[this])):this.triggerSelectNone()},showBalloonPending:function(){this.triggerSelect({selection:"PENDING"}),this.balloon.show({keepContext:!1})},hasBackground:function(){var t=this.template.getPayload(this.model);return Boolean(t.image&&t.image.url)},refreshPlaceholder:function(){this.refreshPlaceholderForItem(this.model.findFirstChildByType("title"),this.$title),this.refreshPlaceholderForItem(this.model.findFirstChildByType("subtitle"),this.$subtitle)},refreshPlaceholderForItem:function(t,e){t&&""!==t.get("text")?e.removeClass("empty-title"):e.addClass("empty-title")},_payloadPreProcessor:function(t,e){if(!i.isMobile&&t){var n=t.image;if(n&&n.image_url){var o=this._getBkgImageItem();o&&s._setImagePayloadURL(n,s._adjustImageURLSize(n.image_url,{model:o}))}}return t.renderTitleHeader=!0,t},_getPayload:function(){var t={payloadPreProcessor:this._payloadPreProcessor};return this.template.getPayload(this.model,t)},_getPayloadURL:function(t){var e=t.image&&t.image.url||"none";return e=e.replace(/\+.*\./g,".")},render:function(){var t=this._getPayload();this.titleEditableRegionView.render(t.title||""),this.subtitleEditableRegionView.render(t.subtitle||"");var e=!1;t.title_align!=this._titleAlignment&&(this.$el.removeClass(this._titleAlignment||LucaJSONParser.defaultTitleAlign),this.$el.addClass(t.title_align),this._titleAlignment=t.title_align,e=!0);var n=this.$image.css("background-image")||"none",o=t.image&&t.image.src,r=this._getPayloadURL(t);if(r!==n){var a=function(){var t=this._getPayload();this._getPayloadURL(t)===r&&this.$image.css("background-image",r)}.bind(this);"none"===r?a():this._preloadImage(o,a),r&&"none"!==r?this.balloon.setButtons(this.buttonSetHasPhoto):this.balloon.setButtons(this.buttonSet)}var s=t.image?t.image.align:"50% 50%",l=!1;this.$image.css("background-position",s),r&&"none"!==r?(l=1===this.model.getParent().children.length,this._$propertyButtons.css("visibility","visible")):this.firstRender&&!i.isLoadedFromRefresh&&setTimeout(function(){this.showBalloonPending()}.bind(this),500),this._updateEmptyImage(),this.$navHint.css({visibility:l?"visible":"hidden"}),this.updateLoadingSpinner(this.$el,this.model.findFirstChildByType("img")),this.attributionButton.render(),this.imageWarningButton.render(),this.refreshPlaceholder(),this.firstRender=!1;var c=t.title,u=t.subtitle;return(this.oldTitle!=c||this.oldSubtitle!=u||e)&&this.dispatchAdjustVisuals(),this.oldTitle=c,this.oldSubtitle=u,this},remove:function(){return this.titleEditableRegionView.destroy(),this.subtitleEditableRegionView.destroy(),this.balloon.remove(),r.prototype.remove.call(this)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(18),n(48),n(153)],void 0===(o=function(t,e,n,i,o){return i.extend({template:new n({id:"full-width-photo-section-template"}),initialize:function(t){i.prototype.initialize.call(this),this._create(t),this.$el.data("view",this)},_create:function(t){this.setElement(this.template.$render(this.model)),this.$container=this.$(".content-container"),this.$container.empty();var e=this.model.findFirstChildByType("img"),n=t&&t.intent;this.contentItemView=new o({model:e,intent:n,insertLink:!1,activeStyle:".image-style-full-width-button",includeImageWarning:!0}),this.$container.append(this.contentItemView.render().$el)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(18),n(140)],void 0===(o=function(t,e,n,i){return i.extend({template:new n({id:"zoom-section-template"}),scrollSectionIntoView:function(e){e=t.extend({section:this.$el,method:"bottom",ignoreWhenFullyVisible:!1},e),i.prototype.scrollSectionIntoView.call(this,e)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(18),n(140),n(155)],void 0===(o=function(t,e,n,i,o){return o.extend({template:new n({id:"window-section-template"}),_activeBalloonSelector:".image-style-window-button",scrollSectionIntoView:function(e){e=t.extend({section:this.$el,method:"center",ignoreWhenFullyVisible:!1},e),i.prototype.scrollSectionIntoView.call(this,e)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10)],void 0===(o=function(t,e,n){return n.View.extend({events:{"click .alerts-callback-btn":"_handleAlertCallback","click .alerts-parsing-btn":"_handleAlertParsing","click .alerts-init-btn":"_handleAlertInit","click .title-hint-btn":"_handleTitleHint","click .broken-image-btn":"_handleBrokenImage","click .swap-text-btn":"_handleShowSwapText"},className:"debug-loc-buttons",_handleAlertCallback:function(t){var e=window.NativeApp,n="<TESTING>";e.fromNativeCallback[n]=function(){throw new Error(n)},e.fromNative(n)},_handleAlertParsing:function(t){window.App._handleNativeSetModel(null)},_handleAlertInit:function(e){window.App.initialize=null,t(window.document.body).trigger("luca-publication-viewer-ready")},_handleTitleHint:function(e){t(".article").data("hintView").show()},_handleBrokenImage:function(t){var e=window.App,n=e._createModelsForInsertedImages(e.articleModel.sectionAt(0),{images:[{}]},{action:"insertSection"},{})[0];e.assignNewImageFromData(n,{imageSize:{width:500,height:500}}),e.articleModel.set("scroll_position",e.$article.data("animator").height()),e._nextSave.refresh=!0,e.immediateSaveDocument()},_handleShowSwapText:function(e){t(".split-layout .swap-button").css({color:"black","background-image":"none",width:"250px","margin-right":"-125px"})},render:function(){return this.$el.html('<button class="alerts-callback-btn">Alert: Callback</button><br /><button class="alerts-parsing-btn">Alert: Parsing</button><br /><button class="alerts-init-btn">Alert: Init</button><br /><button class="title-hint-btn">Title Hint</button><br /><button class="broken-image-btn">Add Broken Image</button><br /><button class="swap-text-btn">Show Swap Text</button><br /><style>.debug-loc-buttons { position: absolute; z-index: 100; left: 10px; top: 10px; }.debug-loc-buttons button { font-size: 14px; margin: 5px 0; }</style>'),this}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){var e=10,n=0,i="strictclick",o="vmousemove",r="vmouseup",a=t(document);function s(e){var n=!1,s=function(u){var h=t(u.target);if(a.unbind(r,s),a.unbind(o,c),e.target===u.target&&!n&&!l(e,u)){var d=t.Event(u);d.type=i,h.trigger(d)}},c=function(t){n=n||l(e,t)};a.bind(o,c),a.bind(r,s)}function l(t,n){var i=t.pageX-n.pageX,o=t.pageY-n.pageY;return Math.sqrt(i*i+o*o)>e}t.event.special.strictclick={setup:function(){1==++n&&a.bind("vmousedown",s)},teardown:function(){0==--n&&a.unbind("vmousedown",s)}}}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(1),n(7)],void 0===(o=function(t,e){function n(){}return t.extend(n.prototype,{eventName:"customselectionchange",isMac:/^Mac/.test(navigator.platform),isIE:window.ActiveXObject||"ActiveXObject"in window,_lastRange:null,_ignoreNextInputEvent:!1,start:function(){this.commandKey=this.isMac?"metaKey":"ctrlKey",this._handleInput=this._handleInput.bind(this),this._handleKeyDown=this._handleKeyDown.bind(this),this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._handleResize=this._handleResize.bind(this),this._on("input",this._handleInput),this._on("keydown",this._handleKeyDown),this._on("mousedown",this._handleMouseDown),this._on("resize",this._handleResize,window)},stop:function(){this._off("input",this._handleInput),this._off("keydown",this._handleKeyDown),this._off("mousedown",this._handleMouseDown),this._off("mousemove",this._handleMouseMove),this._off("mouseup",this._handleMouseUp),this._off("resize",this._handleResize,window)},_on:function(t,e,n){(n=n||document).addEventListener(t,e,!0)},_off:function(t,e,n){(n=n||document).removeEventListener(t,e,!0)},_handleInput:function(t){this._ignoreNextInputEvent?this._ignoreNextInputEvent=!1:this._queueChangeEvent("input",t,!0)},_handleKeyDown:function(t){var e=9,n=35,i=36,o=37,r=38,a=39,s=40,l=65,c=66,u=73,h=[l,c,68,69,70,72,78,80,84],d=t.keyCode,f=t[this.commandKey],p=d==l&&f,g=d==c&&f,m=d==u&&f;(g||m)&&(this._ignoreNextInputEvent=!0),(d==e||d==n||d==i||d==o||d==r||d==a||d==s||p||g||m||this.isMac&&t.ctrlKey&&h.indexOf(d)>=0)&&this._queueChangeEvent("keyboard",t,p||g||m)},_handleMouseDown:function(t){0===t.button&&(this._on("mousemove",this._handleMouseMove),this._on("mouseup",this._handleMouseUp)),this._queueChangeEvent("mouse",t)},_handleMouseMove:function(t){this._queueChangeEvent("mouse",t)},_handleMouseUp:function(t){this._off("mousemove",this._handleMouseMove),this._off("mouseup",this._handleMouseUp),this._queueChangeEvent("mouse",t)},_handleResize:function(t){this._queueChangeEvent("windowResize",t,!0)},_equal:function(t,e){return t===e||!(!t||!e||t.startContainer!==e.startContainer||t.startOffset!==e.startOffset||t.endContainer!==e.endContainer||t.endOffset!==e.endOffset)},_createCustomEvent:function(t){var e,n=this.eventName;return this.isIE?(e=document.createEvent("CustomEvent")).initCustomEvent(n,!1,!1,t):e=new CustomEvent(n,{detail:t}),e},_queueChangeEvent:function(t,e,n){setTimeout(this._dispatchChangeEvent.bind(this,t,e,n),0)},_dispatchChangeEvent:function(t,e,n){var i=document.getSelection(),o=i.rangeCount?i.getRangeAt(0):null;if(n||!this._equal(o,this._lastRange)){this._lastRange=o;var r={reason:t,sourceEvent:e};document.dispatchEvent(this._createCustomEvent(r))}}}),e.CustomSelectionChange=n,n}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(1),n(7),n(122),n(141)],void 0===(o=function(t,e,n,i){var o={issueProps:["id","publication_id","base_url","title","model_version"],pageProps:["id","type","url","scroll_position","appreciate_url"],sectionProps:["id","type","height","fixed","groups"],contentItemProps:["id","page_id","type","text","href","image_id"],themeProps:["name","author","id","brandId","version","components","fonts","customFontsUsed","font_includes"],imageProps:["id","type","image_url","importance","license","image_width","image_height"],markupProps:["id","type","start_index","end_index","href"],parseIssue:function(n){var i=new e.IssueModel(t.pick(n,this.issueProps));return this.parseTheme(i,n.theme),this._parseAndAddChildren(i,n.pages,this.parseArticle,i),i},parseArticle:function(n,i){var o=new e.ArticleModel(t.pick(n,this.pageProps));return this._parseAndAddChildren(o,n.sections,this.parseSection,i),o},parseSection:function(n,i){var o;switch(n.type){case"card-flipbook":o=new e.GroupedSectionModel;break;default:o=new e.SectionModel}return this._parseSettings(o,n.settings),this._parseAndAddChildren(o,n.content_items,this.parseContentItem,i),o.set(t.pick(n,this.sectionProps)),r.section(o)?o:null},parseContentItem:function(n,i){var o=new e.ContentItemModel(t.pick(n,this.contentItemProps));return this.parseImage(o,n.image),this._parseSettings(o,n.settings),this._parseAndAddChildren(o,n.markups,this.parseMarkup,i),r.contentItem(o)},parseTheme:function(n,i){if(i){var o=new e.ThemeModel(t.pick(i,this.themeProps));n.theme=o}},parseImage:function(n,i){if(i){var o=new e.ImageModel(t.pick(i,this.imageProps));n.setImage(o)}},parseMarkup:function(n,i){return new e.MarkupModel(t.pick(n,this.markupProps))},_parseSettings:function(t,e){if(e)for(var n=0,i=e.length;n<i;n++){var o=e[n];t.settings.set(o.key,o.value,o.id)}},_parseAndAddChildren:function(t,e,n,i){if(t&&e&&n)for(var o=0,r=e.length;o<r;o++){var a=n.call(this,e[o],i);a&&t.addChild(a)}}},r={contentItem:function(t){if(t&&"img"==t.get("type")){var n=t.getImage();if(n){0==n.get("image_url").indexOf("blob:")&&n.set("image_url","")}else{var i=new e.ImageModel({image_url:"",image_width:0,image_height:0});t.setImage(i)}}return t},section:function(t){try{if(!t)throw new Error("Null section model");var n=t.get("type");if(!n)throw new Error("Section model has no type");if(!e.modelCanExistWithoutChildren(t)&&0===t.children.length)throw new Error("Section model has 0 items");switch(n){case"title":this._validateTitleSection(t);break;case"banner":case"full-width":case"window":case"zoom":this._validateSectionImageSection(t);break;case"card-flipbook":case"photo-grid":this._validatePhotoCollectionSection(t)}}catch(t){return console.warn("Error occurred during model validation (this section will be ignored): ",t),!1}return!0},_validateTitleSection:function(t){var e=t.findFirstChildByType("img");e&&""==e.getImageURL()&&e.remove()},_validateSectionImageSection:function(t){if("img"!==t.getChildAt(0).get("type"))throw new Error("Section image section first item not an image")},_validatePhotoCollectionSection:function(t){var e=t.get("type"),n=t.children.models,i=n.length;"photo-grid"==e&&"p"===n[i-1].get("type")&&i--;var o=t.get("groups");function r(t){o.splice(t,1),l--,c--}o&&o.length||(o=this._recreatePhotoCollectionGroups(e,n),t.set("groups",o));for(var a,s=0,l=0,c=o.length;l<c;l++)(a=o[l]).count?(a.offset!==s&&(console.warn("Parsing "+e+" section: found group with invalid offset; updating offset"),a.offset=s),a.offset>=i?(console.warn("Parsing "+e+" section: found group outside the bounds of items; removing group"),r(l)):(a.offset+a.count>i&&(console.warn("Parsing "+e+" section: found group outside the bounds of items; reducing group count"),a.count=i-a.offset),"img"===n[a.offset].get("type")?s+=a.count:(console.warn("Parsing "+e+" section: found group with invalid slide image; removing group"),r(l)))):(console.warn("Parsing "+e+" section: found group with 0 items; removing group"),r(l));if(a){var u=i-(a.offset+a.count);u>0&&(console.warn("Parsing "+e+" section: last group does not encapsulate remaining items; updating group"),a.count+=u)}},_recreatePhotoCollectionGroups:function(t,e){if("photo-grid"===t)throw new Error("Photo grid has no groups data");console.warn("Parsing "+t+" section: found no groups data; attempting rebuild");for(var n,i=[],o=e.length,r=0,a=o;r<a;r++){var s=e[r];if("img"===s.get("type")){var l=!1;if(0===r&&(l=!0),s.settings.get("card_align")&&(l=!0),!l){l=!0;var c=s.getImage();c.get("image_width")<=512&&c.get("image_height")<=512&&(l=!1)}l&&(n={offset:r},i.push(n))}}r=i.length;for(var u=o;r--;)(n=i[r]).count=u-n.offset,u=n.offset;return i}};e.IssueParser=o,e.MarkupParser=i}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7)],void 0===(o=function(t,e,n,i){function o(t){var e;t&&(e=t.data("animator")),this._selection={selection:null},this._handleViewSelection=this._handleViewSelection.bind(this),this._scrollReporter=new r(e),this.setView(t)}function r(t,n){this._handleScrollUpdate=this._handleScrollUpdate.bind(this),this._handlePropsChange=this._handlePropsChange.bind(this),this._forwardScrollEvent=this._forwardScrollEvent.bind(this),this.throttledEvaluate=e.throttle(this.evaluate,void 0===n?200:n),this.setAnimator(t)}e.extend(o.prototype,n.Events,{_$view:null,_selection:{selection:null},setView:function(t){t!==this._$view&&(this._$view&&this._$view.off("select",this._handleViewSelection),this._$view=t,this._$view&&this._$view.on("select",this._handleViewSelection))},getView:function(){return this._$view},setSelection:function(t,n){var i=this._selection;this._selection=e.clone(t)||{},void 0===this._selection.selection&&(this._selection.selection=null),n&&n.target&&(this._selection.target=n.target),n&&n.silent||this.trigger("selection-change",this,this._selection,i,n)},getSelection:function(){return this._selection},hasSelection:function(){return null!==this._selection.selection},selectNone:function(t){this.setSelection(null,t)},getScrollReporter:function(){return this._scrollReporter},_handleViewSelection:function(t,e,n,i){n||(n={selection:null}),e&&(n.target=e),this.setSelection(n,i)},destroy:function(){this.setView(null),this._scrollReporter.destroy()}}),e.extend(r.prototype,n.Events,{_animator:null,_previousState:null,_prevScrollY:-1,scrollChange:!0,setAnimator:function(t){t!==this._animator&&(this._previousState=null,this._animator&&(this._animator.$element.off("article-scroll",this._handleScrollUpdate),this._animator.$element.off("article-start",this._forwardScrollEvent),this._animator.$element.off("article-end",this._forwardScrollEvent),this._animator.$element.off("section-props-change",this._handlePropsChange)),this._animator=t,this._animator&&(this._animator.$element.on("article-scroll",this._handleScrollUpdate),this._animator.$element.on("article-start",this._forwardScrollEvent),this._animator.$element.on("article-end",this._forwardScrollEvent),this._animator.$element.on("section-props-change",this._handlePropsChange)))},getAnimator:function(){return this._animator},getState:function(){return this._previousState},_handleScrollUpdate:function(t,e){var n=e.y;n!==this._prevScrollY?(this.scrollChange=!0,this._prevScrollY=n,this.throttledEvaluate(),this._forwardScrollEvent(t,e)):this.scrollChange=!1;2===e.resizing&&this.trigger("publication-resize-scroll",this,e)},_handlePropsChange:function(t,e,n){this.throttledEvaluate(),this.trigger("section-props-change",this)},_forwardScrollEvent:function(t,e){this.scrollChange&&this.trigger(t.type,this,e)},getWindowMetrics:function(t){var e={top:0,bottom:0};if(!this._animator||!t)return e;var n=this._calculateExtents(t),i=this._animator.playPosition,o=this._animator.$article[0].offsetHeight;return e.top=this._getEdgeLoc(n.topToTop,i,o),e.bottom=this._getEdgeLoc(n.bottomToTop,i,o),e},_getEdgeLoc:function(t,e,n){return(t-=e)<0?0:t>n?1:t/n},evaluate:function(t){if(this._animator){for(var e=this._animator.sectionProps,n=this._animator.playPosition,i=-2,o=-2,r=-2,a=-2,s=0,l=e.length;s<l;s++){var c=e[s],u=this._calculateExtents(c);-2===i&&n<u.topToBottom&&(i=s-1),-2===o&&n<u.topToTop&&(o=s-1),-2===r&&n<u.bottomToBottom&&(r=s-1),-2===a&&n<u.bottomToTop&&(a=s-1)}-2===i&&(i=l-1),-2===o&&(o=l-1),-2===r&&(r=l-1),-2===a&&(a=-1);var h=t?null:this._previousState,d=e.slice(o,i+1);return this._previousState=d,this._statesEqual(d,h)||this.trigger("sections-state-change",this,d,h),this._previousState}},_calculateExtents:function(t){var e={topToBottom:t.scrollInOffset,topToTop:t.topDuration+t.scrollInOffset,bottomToTop:t.height+t.scrollOutOffset,bottomToBottom:t.visible?t.flowPosition:t.scrollInOffset+t.height};return t.scrollAfterAnimation&&(e.bottomToBottom+=Math.max(0,t.sectionAnimationDuration-t.topDuration)),e},_statesEqual:function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0},destroy:function(){this.setAnimator(null)}}),i.SelectionManager=o}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7),n(157),n(186),n(187),n(189),n(191)],void 0===(o=function(t,e,n,i,o,r,a,s,l){var c={_imageSourceUpdates:[],create:function(t,e,n){this._imageSourceUpdates=[];var i=null,o=this.getImageOptions(t);switch(t){case"photo-grid":i=this._createPhotoGridSectionForCollection(e,n,o);break;case"card-flipbook":i=this._createCardFlipbookSectionForCollection(e,n,o)}return i},getImageOptions:function(t){var e=null;switch(t){case"photo-grid":e={maxDimension:i.MAX_IMAGE_DIM_GRID,detectPanoramas:!0,detectFaces:!1};break;case"card-flipbook":e={maxDimension:i.MAX_IMAGE_DIM_INLINE,detectPanoramas:!1,detectFaces:!0}}return e},getLastCreateSourceUpdates:function(){var t=this._imageSourceUpdates;return this._imageSourceUpdates=[],t.length?{imageSources:t,pickerSource:t[t.length-1].source}:null},_addSourceUpdate:function(t,e){this._imageSourceUpdates[e]={uuid:t.getImage().get("id"),source:i.getSourceStr({type:"model",action:"update",cid:t.cid})}},_createPhotoGridSectionForCollection:function(t,e,n){for(var r=new i.SectionModel({type:"photo-grid"}),a=[],s=o.getGroups(t,n),l=s.length,c=0;c<l;c++){for(var u=s[c],h=u.offset,d=h+u.count,f=h;f<d;f++){var p=t[f];this._addImageItemFromData(r,p,n,f)}a.push(u)}r.set("groups",a);var g=new i.ContentItemModel({type:"p",text:""});return r.addChild(g),r},_createCardFlipbookSectionForCollection:function(t,e,n){for(var o=new i.GroupedSectionModel({type:"card-flipbook"}),r=[],a=0,s=t.length,l=0;l<s;l++){var c,u=t[l];this._addImageItemFromData(o,u,n,l);a+=(c={count:1,offset:a}).count,r.push(c)}return o.set("groups",r),o},_addImageItemFromData:function(t,e,n,o){var r=i.assignNewImageFromData(null,e,n);this._addSourceUpdate(r,o),t.addChild(r)}},u=n.Model.extend({initialize:function(){e.bindAll(this,"_handleNativeImageForCollections","_showNativeImagePickerForCreate"),this.listenToOnce(NativeApp,"preferences",this._handleNativeGetPreferences)},_handleNativeGetPreferences:function(t){"iphone"===t.deviceType&&(console.warn("PATCHING EDITOR FOR IPHONE"),this._applyPatch()),i.ContextBalloonView.DefaultStyleClass=l},_applyPatch:function(){t("body").addClass("iPhone"),i.registerNativeImageHandler("image-response","photo-grid",this._handleNativeImageForCollections),i.registerNativeImageHandler("image-response","card-flipbook",this._handleNativeImageForCollections),i.PhotoGridSectionView=a,i.GroupedSectionModel=r,i.CardFlipbookSectionView=s,i.PhotoCollectionSectionFactory=c,i._showPhotoCollectionEditor=this._showNativeImagePickerForCreate},_handleNativeImageForCollections:function(t,e){return"insertGridImage"===e.action||"insertSlides"===e.action?this._insertImages(t,e):this._createCollectionSection(t,e)},_insertImages:function(t,e){var n=i.issueModel.findByCid(e.cid);if(n){var o,r="insertSlides"===e.action,a="insertGridImage"===e.action,s=t.images,l=n.parent,c=n.getIndex()+1;l.get("groups");r&&(o=l.getGroupInfo(n),c=o.group.offset+o.group.count);var u=s.length-1,h=s.map(function(t,e){var n=!a||e!==u,o=i.assignNewImageFromData(null,t);return l.addChildAt(o,c+e,{silent:n,updateGroups:!1}),{uuid:t.uuid,source:i.getSourceStr({type:"model",action:"update",cid:o.cid})}});return r&&l.insertNewSlidesAt(s.length,o.index+1),{imageSources:h,pickerSource:h.length?h[h.length-1].source:null}}console.warn("Could not locate a model (cid="+e.cid+") when assigning a selected photo.")},_createCollectionSection:function(t,e){return i._handleInsertPhotoCollection({},e,{imageDatas:t.images}),c.getLastCreateSourceUpdates()},_showNativeImagePickerForCreate:function(e,n){n=t.extend({uuid:"",source:i._encodeImageSourceData(e),multiSelect:!0},c.getImageOptions(e.type),n),"card-flipbook"===e.type&&"1"!==i.preferences.glideshowUsageHintShown&&(i.updatePreference("glideshowUsageHintShown","1"),n.showHelp="glideshow"),NativeApp.toNative("image-request",n)}});window.iPhonePatcher=new u,window._||(window._=e),window.Backbone||(window.Backbone=n)}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7),n(122)],void 0===(o=function(t,e,n,i,o){var r=i.SectionModel;return r.extend({getImageCounts:function(t){var e=0,n=0,i=this.get("groups"),o=-1,r=-1;if(t||0===t){var a=i[t];a&&(o=a.offset,r=o+a.count)}return this.children.models.forEach(function(t,i){"img"===t.get("type")&&(e++,i>=o&&i<r&&n++)}),{all:e,slide:n,slides:i.length}},getGroupInfo:function(t){if(!t)return null;for(var e=this.get("groups"),n=t.getIndex(),i=0,o=e.length;i<o;i++){var r=e[i];if(r.offset<=n&&r.offset+r.count>n)return{group:r,index:i}}return null},addChildAt:function(t,e,n){return n&&!1===n.updateGroups||this._updateGroups("add",e,n&&n.groupIndex),r.prototype.addChildAt.apply(this,arguments)},removeChild:function(t,e,n){return n&&!1===n.updateGroups||this._updateGroups("remove",t.getIndex(),n&&n.groupIndex),r.prototype.removeChild.apply(this,arguments)},insertNewSlidesAt:function(t,e){var n=this.get("groups"),i=0;if(e>0){var o=n[e-1];i=o.offset+o.count}for(var r=[];t-- >0;)r.push({count:1,offset:i}),i+=1;n.splice.apply(n,[e,0].concat(r)),this._updateGroupOffsets(),this._setGroupsForceChange()},moveSlide:function(t,e,n){var i=this.get("groups");if(t===e||e<0||e>=i.length)console.error("Invalid index for move:",e);else{for(var o=i[t],r=i[e],a=o.offset,s=o.count,l=e<t,c=l?r.offset:r.offset+r.count-1,u=0,h=s;u<h;u++){var d=this.getChildAt(a);this.children.move(d,c,{silent:!0,updateGroups:!1}),l&&(c++,a++)}i.splice(t,1),i.splice(e,0,o),this._updateGroupOffsets(),n&&n.silent||(this._setGroupsForceChange(),this.children.trigger("sort",this.children,n))}},deleteSlideByGroup:function(t){var e=this.get("groups");this.deleteSlideAt(e.indexOf(t))},deleteSlideAt:function(t){var e=this.get("groups");if(t<0||t>=e.length)console.error("Error: Selected group for deletion not found in model.");else{for(var n=e[t],i=n.offset,o=n.count;o--;)this.getChildAt(i).remove({silent:!0,updateGroups:!1});e.splice(t,1),this._updateGroupOffsets(),this._setGroupsForceChange()}},_setGroupsForceChange:function(){var t=this.get("groups"),e=t.slice();t.length++,this.set("groups",e)},_updateGroups:function(t,e,n){var i=this.get("groups");if(i)for(var o="add"===t?1:-1,r=0,a=i.length;r<a;r++){var s=i[r],l=s.offset+s.count,c=l-1;if(e===l&&1===o){var u=r+1,h=i[u];h?(n===u?h.count+=o:(s.count+=o,h.offset+=o),r++):s.count+=o}else e>=s.offset&&e<=c?s.count+=o:e<s.offset&&(s.offset+=o)}},_updateGroupOffsets:function(){var t=0;this.get("groups").forEach(function(e){e.offset=t,t+=e.count})}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7),n(142),n(18),n(157),n(48),n(188),n(159),n(49),n(47),n(15)],void 0===(o=function(t,e,n,i,o,r,a,s,l,c,u,h,d){return s.extend({events:{vclick:"_handlePhotoGridClick","balloon-select .photo-button":"_handleInsertPhoto","balloon-select .move-balloon-button":"_handleMovePhotos","balloon-select .delete-button":"_handleDelete","balloon-select .star-button":"_handleStar","balloon-select .unstar-button":"_handleUnstar"},template:new r({id:"photo-grid-section-template"}),initialize:function(t){this._subViewDict={},this._selectedSubView=null,this._create(),this._createSubViews(),this.$el.data("view",this),this.listenTo(this.model,"descendant:change",this._updateContentItem),this.listenTo(this.model,"change:groups",this.render),this.listenTo(this.model.children,"add",this._rebuildGroups),this.listenTo(this.model.children,"sort",function(t,e){this._rebuildGroups(),this.render()}),this.listenTo(this.editableRegionView,"enterKeyPressed",this._handleCaptionEnterKeyPressed),this.listenTo(this.editableRegionView,"contentChanged",this._handleCaptionChanged),this.listenTo(this.editableRegionView,"heightChanged",this.dispatchAdjustVisuals),this.listenTo(this.editableRegionView,"blur",this.render),this.listenTo(this.editableRegionView,"paste",this._handleCaptionPaste)},_create:function(){if(this.setElement(this._$renderDOM()),this.$gridContainer=this.$el.find(".photo-grid"),this.$caption=this.$gridContainer.find(".grid-caption"),0===this.$caption.length){var e=t('<div class="caption-container"></div>');this.$caption=t('<div class="grid-caption"></div>'),e.append(this.$caption),this.$gridContainer.append(e)}var n=this.$caption[0].cloneNode(!0);this.$caption.empty(),this.$captionEditable=t(document.createElement("span")).addClass("caption-editable").append(n.childNodes).appendTo(this.$caption),this.editableRegionView=new u({el:this.$captionEditable,placeholder:d.getString("editor.image.caption-add")}),this._refreshPlaceholder()},_createSubViews:function(){this._getImageItems().forEach(function(t){if("img"===t.get("type")){var e=t.cid,n=this.$("#"+e),i=new l({el:n,model:t,parent:this});this._subViewDict[e]=i}}.bind(this))},_handlePhotoGridClick:function(e){if(!t(e.target).closest(".grid-caption").length)return t(e.target).closest(".photo-group-container").length||(this.deselectPhotoView(),this.triggerSelectNone()),!1;this.deselectPhotoView();var n=this.model.findFirstChildByType("p");this.triggerSelect({selection:n,type:"caption",action:"update",balloons:!1})},_handleInsertPhoto:function(t,e,n){return this._selectedSubView?(this.showSelectionPicker({pickerType:"photo-grid",action:"insertGridImage",selection:this._selectedSubView.model}),n.hide(),!1):(console.warn("Attempted to insert an image when there is no selected subview"),!1)},_handleMovePhotos:function(t,e,n){var i=new c,o=function(t){var e=t.item,n=t.refItem,i=e.getIndex(),o=n?n.getIndex():-1;(o<i&&o++,this.model.children.move(e,o,{silent:!1}))&&(this._rebuildGroups(),this._subViewDict[e.cid].scrollSectionIntoView({ignoreWhenFullyVisible:!1}))}.bind(this),r=function(t){if("user-select"===t.reason){var e=this._subViewDict[t.item.cid];e&&e.scrollSectionIntoView({ignoreWhenFullyVisible:!1})}}.bind(this);i.on("hide",function(){i.off(),i.remove()}),i.on("insert-photo-after",o),i.on("photo-selected",r);var a=this._selectedSubView&&this._selectedSubView.model;return this.$el.closest(".publication-viewer").after(i.$el),i.show(this._getImageItems(),{selectedItem:a}),this.selectPhotoView(null),n.hide(),!1},_handleStar:function(t,e,n){if(this._selectedSubView){var i=this._selectedSubView.model,o=this._getMoveOffsetForBetterImportancePos(i);return o&&this._moveItemModelByOffset(i,o),i.getImage().set("importance",1),n.hide(),!1}},_handleUnstar:function(t,e,n){if(this._selectedSubView)return this._selectedSubView.model.getImage().set("importance",0),n.hide(),!1},_handleDelete:function(t,e,n){var o=this._getImageCount();return i.NativeConfirm.confirm({title:d.getString("editor.dialogs.grid-inline-delete.title"),content:d.getString("editor.dialogs.grid-inline-delete.text"),buttons:[d.getString("editor.common.cancel"),d.getString("editor.dialogs.grid-inline-delete.confirm-photo"),d.getString("editor.dialogs.grid-inline-delete.confirm-grid")]},function(t){switch(t.selectedIndex){case 1:o>1?this._deleteSelectedImage():this._deleteSection();break;case 2:this._confirmDeleteSection(o)}}.bind(this)),n.hide(),!1},_confirmDeleteSection:function(t){i.NativeConfirm.confirm({title:d.getString("editor.dialogs.grid-inline-delete2.title"),content:d.getString("editor.dialogs.grid-inline-delete2.text",{count:t}),buttons:[d.getString("editor.common.cancel"),d.getString("editor.dialogs.grid-inline-delete2.confirm")],buttonOptions:[null,{style:"destructive"}]},function(t){switch(t.selectedIndex){case 1:this._deleteSection()}}.bind(this))},_handleCaptionEnterKeyPressed:function(){this.triggerSelectNone()},_handleCaptionPaste:function(t,e,n){var i=this.model.findFirstChildByType("p");this.$el.trigger("pasteContent",[i,this.editableRegionView,e,n])},_handleCaptionChanged:function(t){var e=this.model.findFirstChildByType("p");this.$el.trigger("updateText",[e,t])},_refreshPlaceholder:function(){""===this.model.get("text")?this.$caption.addClass("empty-caption"):this.$caption.removeClass("empty-caption")},_getImageItems:function(){return this.model.children.models.slice(0,-1)},_moveItemModelByOffset:function(t,e,n){var i=n||{silent:!0},o=e+t.getIndex();return!(o>this.model.children.length-2)&&this.model.children.move(t,o,i)},_updateContentItem:function(t,e,n){var o=t,r=t instanceof i.SettingModel,a=t instanceof i.ImageModel;switch((r||a)&&(o=t.parent),o.get("type")){case"p":if(this.editableRegionView){this.editableRegionView.render(o.get("text"));var s=o.settings.get("text_align");s?i.textAlignCSS.setClass(this.$caption,s):i.textAlignCSS.clear(this.$caption)}break;case"img":var l=o.getImage();l&&(l.get("is_new")||a)&&this._rebuildGroups()}},showSelectionPicker:function(t){var n=e.extend({selection:this.model,type:"img",pickerType:"model",action:"update",keepNativeUI:!0},t);this.$el.trigger("select",[this,n]),this.$el.trigger("showImagePicker",[this])},_deleteSelectedImage:function(){this._selectedSubView?(this._selectedSubView.model.remove({silent:!0}),this._rebuildGroups()):console.warn("Attempted delete of image when there is no selected subview")},_deleteSection:function(){this.$el.trigger("deleteSection",[{section:this.model,imageItemsRemoved:this._getImageItems()}])},_getImageCount:function(){return this.model.children.length-1},scrollSectionIntoView:function(e){e=t.extend({section:this.$el,method:"nearest",ignoreWhenFullyVisible:!0,animate:!0},e),this.$el.trigger("scrollSectionIntoView",e)},selectPhotoView:function(t){this.deselectPhotoView(),this._selectedSubView=t},deselectPhotoView:function(){this._selectedSubView&&(this._selectedSubView.optionsBalloon.hide(),this._selectedSubView=null)},_getMoveOffsetForBetterImportancePos:function(t){var n=i.getPhotoCollectionData(this.model),o=e.find(n,{uuid:t.getImage().get("id")}),r=this._getGroupSingleTileCount(n)+1;o.importance=1;var a=this._getGroupSingleTileCount(n),s=0,l=0,c=0;return a>r&&(this._movePhotoData(o,n,-1)&&(s=this._getGroupSingleTileCount(n),this._movePhotoData(o,n,1)),this._movePhotoData(o,n,1)&&(l=this._getGroupSingleTileCount(n)),s<a&&s<=l?c=-1:l<a&&(c=1)),c},_getGroupSingleTileCount:function(t){return this._getGroups(t).reduce(function(t,e,n,i){return 1===e.count?t+1:t},0)},_movePhotoData:function(e,n,i){var o=t.inArray(e,n),r=i>0?o+i+1:o+i;return!!(i&&r>=0&&r<=n.length)&&(n.splice(r,0,e),o=i>0?o:o+1,n.splice(o,1),!0)},_getGroups:function(t){t||(t=i.getPhotoCollectionData(this.model));var e=i.PhotoCollectionSectionFactory.getImageOptions("photo-grid");return a.getGroups(t,e)},_rebuildGroups:function(){var t=this._getGroups();this.model.set("groups",t)},render:function(){var t=this._selectedSubView?this._selectedSubView.model.cid:null;this._removeSubViews(),this.$gridContainer.find(".photo-group-container").remove();var e=this._$renderDOM().find(".photo-group-container");this.$gridContainer.prepend(e),this._createSubViews();var n=this._subViewDict[t];return n&&n.select(),this.dispatchAdjustVisuals(),this},_$renderDOM:function(){return this.template.$render(this.model,null,{payloadPreProcessor:this._payloadPreProcessor})},_payloadPreProcessor:function(t,e){if(!i.isMobile&&t&&t.groups)for(var n=t.groups,o=n.length,r=0;r<o;r++)for(var a=n[r].photos,s=a.length,l=0;l<s;l++){var c=a[l];c.image_src=h._adjustImageURLSize(c.image_src,{maxSize:1024}),c.src=c.image_src}return t},remove:function(){return this.editableRegionView.destroy(),this._removeSubViews(),s.prototype.remove.call(this)},_removeSubViews:function(){for(var t in this._subViewDict){var e=this._subViewDict[t];delete this._subViewDict[t],e.remove()}}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7),n(18),n(158),n(119),n(143)],void 0===(o=function(t,e,n,i,o,r,a,s){var l=n.View.extend({events:{strictclick:"_handleClick","balloon-select .replace-button":"_handleReplace"},template:new i.Template,_preloader:null,buttonSet:["addphoto","move","star","replace","delete"],buttonSetStarred:["addphoto","move","unstar","replace","delete"],initialize:function(t){this.parent=t.parent,this._preloader=new r,this._createBalloons(),this.$el.data("view",this),this._propertyButtons=new s({model:this.model}),this.$el.append(this._propertyButtons.render().$el),this.listenTo(this.model,"change descendant:change",this.render)},_createBalloons:function(){this.$imageOptionsBalloon=i.create$Element("div",{class:"fit-in-container"}),this.$el.append(this.$imageOptionsBalloon),this.optionsBalloon=new i.ContextBalloonView({el:this.$imageOptionsBalloon,position:{percentX:.5,percentY:.25,offsetY:0},buttons:this.buttonSet}),this._updateBalloonSet()},_handleClick:function(t){return this.optionsBalloon.isHidden()?this.select():(this.parent.deselectPhotoView(),this.triggerSelectNone()),this.scrollSectionIntoView(),!1},select:function(){this.optionsBalloon.isHidden()&&(this.parent.selectPhotoView(this),this.optionsBalloon.show(),this.triggerSelect({type:"img",action:"update"}))},_handleReplace:function(t,e,n){return this.showSelectionPicker({pickerType:"model",action:"update"}),n.hide(),!1},scrollSectionIntoView:function(e){var n=this.$el.closest(".section");e=t.extend({section:n,el:this.$el,method:"center",ignoreWhenFullyVisible:!0,animate:!0},e),this.$el.trigger("scrollSectionIntoView",e)},showSelectionPicker:function(t){var n=e.extend({selection:this.model,type:"img",pickerType:"model",action:"update",keepNativeUI:!0},t);this.$el.trigger("select",[this,n]),this.$el.trigger("showImagePicker",[this])},_updateBalloonSet:function(){var t=this.model.getImage();if(t){var e=1===t.get("importance")?this.buttonSetStarred:this.buttonSet;this.optionsBalloon.setButtons(e)}},render:function(){var t=this.template.getPayload(this.model);this._renderImage(t),this._updateBalloonSet()},_renderImage:function(t){var e=t.image.src,n=t.image.url,i=this.$el.css("background-image")||"none";if(n!==i){t.image.is_new&&this.$el.addClass("image-loading");var o=function(){t.image.is_preview||this.$el.removeClass("image-loading")}.bind(this),r=function(){this.$el.css("background-image",n),o()}.bind(this);this._preloader.preload(e).then(r,o)}},remove:function(){return this.optionsBalloon.remove(),n.View.prototype.remove.call(this)}});return e.defaults(l.prototype,a),l}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7),n(48),n(47),n(18),n(190),n(143),n(159),n(15)],void 0===(o=function(t,e,n,i,o,r,a,s,l,c,u){var h=o.extend({events:{strictclick:"_handleClick","balloon-select .flipbook-level-balloon.photo-button":"_handleInsertPhoto","balloon-select .flipbook-level-balloon.move-balloon-button":"_handleMoveSlides","balloon-select .flipbook-level-balloon.delete-button":"_handleDelete","balloon-select .flipbook-level-balloon.replace-button":"_handleReplace","balloon-select .flipbook-level-balloon.focal-point-ui-button":"_handleFocalPointUIButton",vtaphold:"_handleTapHold"},template:new a({id:"card-flipbook-section-template"}),optionsButtons:["addphoto","move","focalpoint","replace","delete"],_subViewDict:null,_selectedSlide:null,_propertyButtons:null,initialize:function(t){this._subViewDict={},this._create(),this._createBalloons(),this.$el.data("view",this),t&&"edit"===t.intent&&setTimeout(function(){var t=this.model.get("groups"),e=this._findSlideViewWith("group",t[0]);this._scrollToSlide(e)}.bind(this),201),this.listenTo(this.model,"change:groups",this.render)},_create:function(){this.setElement(this.template.$render(this.model,null,{payloadPreProcessor:this._payloadPreProcessor})),this._createEnsureMarkup();var t=this.$(".section-content-view"),e=this.$(".section-background-image");this.model.get("groups").forEach(function(n,i){this._createSlideSubView(n,e.eq(i),t.eq(i))}.bind(this)),this._propertyButtons=new l({model:this.model}),this.$el.append(this._propertyButtons.render().$el),this._propertyButtons.hide()},_createSlideSubView:function(t,e,n){var i=this.model.getChildAt(t.offset),o=new s({model:i,el:e,cardEl:n,group:t,section:this});this._subViewDict[i.cid]=o},_createEnsureMarkup:function(){var t=this.$("> .section-view > .section-background > .section-background-image"),e=this.$("> .section-view > .section-content > .section-content-view"),n=t.length-e.length;if(n>0)for(var o=this.$("> .section-view > .section-content");n--;){var r=i.create$Element("div",{class:"section-content-view"}),a=i.create$Element("div",{class:"content-container"});r.append(a),o.append(r)}this.$(".section-content-view").removeClass("removed")},_createBalloons:function(t){this.$optionsBalloon=i.create$Element("div"),this.$optionsBalloon.css({position:"absolute",top:"50%",left:"50%",width:"1px",height:"1px"}),this.$el.prepend(this.$optionsBalloon),this.optionsBalloon=new i.ContextBalloonView({el:this.$optionsBalloon,position:{percentX:.5,percentY:.5},buttons:this.optionsButtons,addedButtonClass:"flipbook-level-balloon"})},_updateOptionsBalloonPosition:function(e){if(this._selectedSlide){var n={CENTER:{top:"50%",left:"50%"},BOTTOM:{top:"75%",left:"50%"},RIGHT:{top:"50%",left:"80%"},LEFT:{top:"50%",left:"20%"}};"iphone"===i.preferences.deviceType&&(n.RIGHT.left="90%",n.LEFT.left="10%");var o=n.SIDE,r=this.$(".section-content-view").eq(this._selectedSlide.getDOMIndex());if(r.length){var a=this.$el.data()||{},s=a.sectionHeight||0,l=(a.scrollInOffset,this._selectedSlide.getScrollOffset()-s),c=(r.data("sectionYOffset")||0)-l,u=c+r[0].offsetHeight;c>=.5*s?o=n.CENTER:u<=.75*s-115&&(o=n.BOTTOM)}if(o===n.SIDE){var h=this._selectedSlide.model.settings.get("card_align");if("card-right"===h)o=n.LEFT;else if("card-left"!==h&&h&&e){o=this._getEventOffset(e).left<t(e.target).width()/2?n.LEFT:n.RIGHT}else o=n.RIGHT}this.$optionsBalloon.css(o)}},_getEventOffset:function(e){for(var n=e;n;){if("offsetX"in n)return{left:n.offsetX,top:n.offsetY};n=n.originalEvent}for(n=e;n;){if("touches"in n||"changedTouches"in n){var i=n.touches[0]||n.changedTouches[0],o={left:0,top:0};if(i){var r=t(e.target).offset();o.left=i.pageX-r.left,o.top=i.pageY-r.top}return o}n=n.originalEvent}return{left:(n=e.originalEvent||e).pageX||0,top:n.pageY||0}},_payloadPreProcessor:function(t,e){if(!i.isMobile&&t&&t.background_images)for(var n=t.background_images,o=n.length,a=0;a<o;a++){var s=n[a];s&&s.src&&(s.src=r._adjustImageURLSize(s.src),r._setImagePayloadURL(s.image,s.src))}return t},_getClosestSlideFromScrollPosition:function(){var t=this.$el.closest(".article").data("animator");if(!t)return null;var e=this.$(".section-background-image"),n=null,i=0,o=t.playPosition,r=this.$el.data()||{},a=r.scrollInOffset||0,s=r.scrollOutOffset||0;if(o<a+(r.sectionHeight||0))i=a+((n=e.eq(0)).data("cardTopSpacingOffset")||0);else if(o>=s)i=a+((n=e.last()).data("transitionOutBegin")||0);else for(var l=e.length,c=l-1,u=0;u<l;u++){var h=e.eq(u),d=a+(h.data("transitionInBegin")||0),f=a+(h.data("transitionInEnd")||0);if(o>=f?(n=h,i=u===c?o:f):n&&(o<d?i=o:o<d+(f-d)/2?i=d:(n=h,i=f)),o<f)break}var p=this._findSlideViewWith("el",n[0]);return p.setScrollOffset(i-a),p},_selectSlide:function(t,e){this._deselectSlide(),t&&(this._selectedSlide=t,this._scrollToSlide(this._selectedSlide),this._updateOptionsBalloonPosition(e),this.optionsBalloon.show(),this._showImagePropertyButtons(),this.triggerSelect({selection:this.model,type:"card-flipbook",action:"update"}),this.listenTo(i.selectionManager,"selection-change",this._handleSelectionChange))},_deselectSlide:function(){this._propertyButtons.hide(),this.stopListening(i.selectionManager,"selection-change",this._handleSelectionChange),this._selectedSlide&&(this._selectedSlide.clearScrollOffset(),this._selectedSlide=null)},_findSlideViewWith:function(t,e){for(var n in this._subViewDict){var i=this._subViewDict[n];if(i[t]===e)return i}return null},_scrollToSlide:function(t){if(t){var e=this.$el.data("scrollInOffset")||0,n=t.getScrollOffset();i.getSectionsArticleScroller().scrollTo(e+n)}},scrollToSelectedSlide:function(){if(this._selectedSlide){var t=this._getClosestSlideFromScrollPosition();this._selectedSlide!==t&&this._selectedSlide.clearScrollOffset(),this._scrollToSlide(this._selectedSlide)}},scrollInsertLinkIntoView:function(t,n){this.scrollSectionIntoView(e.extend({marginTop:115,el:t},n))},_showImagePropertyButtons:function(){var t=this._selectedSlide.model;this._propertyButtons.setModel(t),this._propertyButtons.show(),t&&"card-right"===t.settings.get("card_align")?this._propertyButtons.$el.addClass("align-left"):this._propertyButtons.$el.removeClass("align-left")},_handleClick:function(e){if(!t(e.target).closest(".content-container").length){if(this.optionsBalloon.isHidden()){var n=this._getClosestSlideFromScrollPosition();this._selectSlide(n,e)}else this._deselectSlide(),this.optionsBalloon.hide(),this.triggerSelectNone();return!1}this.optionsBalloon.hide()},_handleInsertPhoto:function(t,e,n){return this.showSelectionPicker({pickerType:"card-flipbook",action:"insertSlides"}),n.hide(),!1},_handleMoveSlides:function(t,e,n){var i=new c,o=function(t){var e=this.model.getGroupInfo(t.item),n=this.model.getGroupInfo(t.refItem),i=e.index,o=n?n.index:-1;o<i&&o++,i!=o&&this.model.moveSlide(i,o);var r=this.$(".section-background-image").eq(o),a=this._findSlideViewWith("el",r[0]);this._scrollToSlide(a)}.bind(this),r=function(t){if("user-select"===t.reason){var e=this.model.getGroupInfo(t.item),n=this.$(".section-background-image").eq(e.index),i=this._findSlideViewWith("el",n[0]);this._scrollToSlide(i)}}.bind(this);i.on("hide",function(){i.off(),i.remove()}),i.on("insert-photo-after",o),i.on("photo-selected",r);var a=this._selectedSlide&&this._selectedSlide.model;return i.$el.insertAfter(this.$el.closest(".publication-viewer")),i.show(this._getSlideItemModels(),{selectedItem:a}),this._deselectSlide(),n.hide(),!1},_handleFocalPointUIButton:function(t,e,n){if(this._selectedSlide)return this._selectedSlide.onSelectFocalPoint(t,e,n)},_handleReplace:function(t,e,n){return this.showSelectionPicker({pickerType:"model",action:"update"}),n.hide(),!1},_handleDelete:function(t){var e=this._selectedSlide&&this._selectedSlide.getGroupIndex(),n=this.model.getImageCounts(e);return i.NativeConfirm.confirm({title:u.getString("editor.dialogs.glideshow-inline-delete.title"),content:u.getString("editor.dialogs.glideshow-inline-delete.text",{count:n.slide}),buttons:[u.getString("editor.common.cancel"),u.getString("editor.dialogs.glideshow-inline-delete.confirm-photo"),u.getString("editor.dialogs.glideshow-inline-delete.confirm-glideshow")]},function(t){switch(t.selectedIndex){case 1:n.slides>1?this._deleteSelectedSlide():this._deleteSection();break;case 2:this._confirmDeleteSection(n)}}.bind(this)),this.optionsBalloon.hide(),!1},_confirmDeleteSection:function(t){i.NativeConfirm.confirm({title:u.getString("editor.dialogs.glideshow-inline-delete2.title"),content:u.getString("editor.dialogs.glideshow-inline-delete2.text",{count:t.all}),buttons:[u.getString("editor.common.cancel"),u.getString("editor.dialogs.glideshow-inline-delete2.confirm")],buttonOptions:[null,{style:"destructive"}]},function(t){switch(t.selectedIndex){case 1:this._deleteSection()}}.bind(this))},_handleSelectionChange:function(t,e,n,i){this._selectedSlide&&n.selection===this.model&&n.selection!==e.selection&&this._deselectSlide()},_deleteSection:function(){this.$el.trigger("deleteSection",[{section:this.model,imageItemsRemoved:this.getImageItems()}])},_deleteSelectedSlide:function(){var t=this._selectedSlide&&this._selectedSlide.group;t?(this._deselectSlide(),this.model.deleteSlideByGroup(t)):console.error("Error: Could not find group associated with selection for slide deletion.")},showSelectionPicker:function(t){if(this._selectedSlide){var n=e.extend({selection:this._selectedSlide.model,type:"img",pickerType:"model",action:"update",keepNativeUI:!0},t);this.$el.trigger("select",[this,n]),this.$el.trigger("showImagePicker",[this])}},_getSlideItemModels:function(){return this.model.get("groups").map(function(t){return this.model.getChildAt(t.offset)}.bind(this))},_getGroupMismatch:function(){var t=this.model.get("groups"),e=this.$(".section-background-image"),n=t.length-e.length;if(0!==n)for(var i=0,o=Math.max(t.length,e.length);i<o;i++){var r=t[i],a=e.eq(i),s=a.length?a.data("view").group:null;if(s!==r)return{diff:n,index:i,group:s||r}}return null},render:function(){var t=this._renderSlideCountChanges();return this._renderSlideOrder(),this.dispatchAdjustVisuals(),this._renderEnsureFirstSlideOpacity(),t&&setTimeout(function(){var e=this._findSlideViewWith("el",t[0]);this._selectSlide(e)}.bind(this),100),this},_renderSlideCountChanges:function(){var t=this._getGroupMismatch();if(t){if(t.diff>0)return this._renderAddSlides(t.index,t.diff).last();this._renderRemoveSlide(t.group)}return null},_renderAddSlides:function(e,n){var o=t(),r=t(),a=(this.$(".section-content-view"),this.model.get("groups")),s=this.template.getPayload(this.model);e<0&&(e=a.length);for(var l=0,c=n;l<c;l++){var u=e+l,h=a[u],f=s.cards[u],p=s.background_images[u].image,g=i.create$Element("div",{"data-image-width":p.image_width,"data-image-height":p.image_height,"data-pan-and-zoom":"zoom-in"}).addClass("section-background-image").css({"background-image":p.url,"background-position":p.align}),m=f&&f.card_align||"",v=i.create$Element("div").addClass("section-content-view "+m).append(i.create$Element("div").addClass("content-container"));this._createSlideSubView(h,g,v),o=o.add(g),r=r.add(v)}return d(o,this.$(".section-background"),e),d(r,this.$(".section-content"),e),o},_renderRemoveSlide:function(t){for(var e in this._subViewDict){var n=this._subViewDict[e];if(n.group===t){n.remove(),delete this._subViewDict[e];break}}},_renderSlideOrder:function(){var t,e={};for(var n in this._subViewDict)t=this._subViewDict[n],e[t.group.offset]=t;var i=this.model.get("groups"),o=this.$(".section-background"),r=this.$(".section-content");i.forEach(function(n,i){t=e[n.offset],d(t.$el,o,i),d(t.card.$el,r,i)})},_renderEnsureFirstSlideOpacity:function(){this.$(".section-background-image").eq(0).css("opacity","1")},remove:function(){for(var t in this.optionsBalloon.remove(),this._subViewDict){this._subViewDict[t].remove()}return o.prototype.remove.call(this)}}),d=function(t,e,n){n>=e.children().length?e.append(t):e.children().eq(n).before(t)};return h}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7),n(156),n(18),n(158),n(151)],void 0===(o=function(t,e,n,i,o,r,a,s){return n.View.extend({_preloader:null,_scrollOffset:-1,parent:null,card:null,group:null,_cardInsertButtons:["photo","text","link","embedded-link"],initialize:function(t){this.group=t.group,this.parent=t.section,this.card=this._createCardSubView(t.cardEl),this._preloader=new a,this.$el.data("view",this),this.listenTo(this.model.settings,"change",this.render),this.listenTo(this.model,"change",this.render)},_createCardSubView:function(t){return new i.CardFlipbookCardSectionView({model:this.model.parent,el:t,group:this.group,insertButtons:this._cardInsertButtons})},onSelectFocalPoint:function(t,e,n){var o=new s,r=this.parent,a=r.$el,l=this.$el.closest(".publication-viewer"),c=function(){o.showUpdate(),r.scrollToSelectedSlide()};return o.on("background-position-editor-hide",function(){o.off(),o.remove(),o=null,a.off("article-resize",c),a.removeClass("background-edit-mode"),i.selectionManager.getSelection().selection===r.model&&r.optionsBalloon.show()}),a.on("article-resize",c),a.addClass("background-edit-mode"),o.$el.insertAfter(l),o.show(this.$el,this.model),n.hide(),!1},setScrollOffset:function(t){this._scrollOffset=t},clearScrollOffset:function(){this._scrollOffset=-1},getScrollOffset:function(){if(-1!==this._scrollOffset)return this._scrollOffset;var t=0===this.getDOMIndex()?"cardTopSpacingOffset":"transitionInEnd";return this.$el.data(t)||0},getGroupIndex:function(){return this.model.parent.get("groups").indexOf(this.group)},getDOMIndex:function(){return this.$el.index()},render:function(){var t=r.getInstance().getPayload(this.model),e=t.image.src,n=t.image.url,i=this.$el.css("background-image")||"none";if(n!==i){t.image.is_new&&this.$el.addClass("image-loading");var o=function(){t.image.is_preview||this.$el.removeClass("image-loading")}.bind(this);this._preloader.preload(e).then(function(){this.$el.css("background-image",n),o()}.bind(this),o)}return this.$el.css("background-position",this.model.settings.get("image_align")||"50% 50%"),this},remove:function(){this.card.remove(),n.View.prototype.remove.call(this)}})}.apply(e,i))||(t.exports=o)},function(t,e,n){var i,o;i=[n(0),n(1),n(10),n(7),n(142)],void 0===(o=function(t,e,n,i,o){var r=function(t){i.ContextBalloonStyle.call(this,t,"balloon-style-small-device")};return r.prototype=e.extend(Object.create(i.ContextBalloonStyle.prototype),{MIN_ROW_BUTTON_COUNT:1,MAX_ROW_BUTTON_COUNT:7,onCreated:function(){"iphone"===i.preferences.deviceType&&(this.MAX_ROW_BUTTON_COUNT=4);var t=i.create$Element,e=this.balloon.$balloon.find(".balloon-view"),n=t("div",{class:"balloon-tail"});e.prepend(n);var o=t("div",{class:"balloon-border-view"}),r=t("div",{class:"balloon-border"}),a=t("div",{class:"balloon-border-tail"});o.append(r,a),e.before(o)},onButtonsAdded:function(){var t=this.balloon.data.maxRowButtonCount||this.MAX_ROW_BUTTON_COUNT,e=this.balloon.data.minRowButtonCount||this.MIN_ROW_BUTTON_COUNT,n=this.balloon.$balloon,i=this.balloon._buttons.length,o=Math.ceil(i/t),r=Math.ceil(i/o);o>1&&r<e&&(r=e,o=Math.ceil(i/r));var a=22+62*r+10*(r-1),s=22+62*o+10*(o-1);n.css({width:a,height:s,top:-(s+8),left:-a/2})},onPosition:function(t){var e=this.balloon.$balloonEl;e.css(t);var n=e.find(".balloon-border"),i=this.balloon.$buttonGroup,o=0,r=10,a=this.balloon.getOffscreenOffset();if(a){if(a.x){var s=Math.abs(a.x);s<r&&(r=s),o=a.x<0?a.x-r:a.x+r}a.y&&(t.top-=Math.round(a.y),e.css(t))}return n.add(i).css({left:-Math.round(o)}),t}}),r}.apply(e,i))||(t.exports=o)}]);